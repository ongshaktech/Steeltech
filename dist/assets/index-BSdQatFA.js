function F_(t,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();var Dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function XT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),i}var B_={exports:{}},y0={},L_={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pc=Symbol.for("react.element"),UT=Symbol.for("react.portal"),GT=Symbol.for("react.fragment"),KT=Symbol.for("react.strict_mode"),QT=Symbol.for("react.profiler"),ZT=Symbol.for("react.provider"),JT=Symbol.for("react.context"),qT=Symbol.for("react.forward_ref"),eM=Symbol.for("react.suspense"),tM=Symbol.for("react.memo"),iM=Symbol.for("react.lazy"),uy=Symbol.iterator;function nM(t){return t===null||typeof t!="object"?null:(t=uy&&t[uy]||t["@@iterator"],typeof t=="function"?t:null)}var N_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R_=Object.assign,V_={};function Fl(t,e,i){this.props=t,this.context=e,this.refs=V_,this.updater=i||N_}Fl.prototype.isReactComponent={};Fl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function O_(){}O_.prototype=Fl.prototype;function w1(t,e,i){this.props=t,this.context=e,this.refs=V_,this.updater=i||N_}var _1=w1.prototype=new O_;_1.constructor=w1;R_(_1,Fl.prototype);_1.isPureReactComponent=!0;var dy=Array.isArray,j_=Object.prototype.hasOwnProperty,C1={current:null},W_={key:!0,ref:!0,__self:!0,__source:!0};function z_(t,e,i){var n,s={},a=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)j_.call(e,n)&&!W_.hasOwnProperty(n)&&(s[n]=e[n]);var p=arguments.length-2;if(p===1)s.children=i;else if(1<p){for(var f=Array(p),g=0;g<p;g++)f[g]=arguments[g+2];s.children=f}if(t&&t.defaultProps)for(n in p=t.defaultProps,p)s[n]===void 0&&(s[n]=p[n]);return{$$typeof:Pc,type:t,key:a,ref:l,props:s,_owner:C1.current}}function sM(t,e){return{$$typeof:Pc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function S1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pc}function rM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var py=/\/+/g;function Np(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rM(""+t.key):e.toString(36)}function Vu(t,e,i,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Pc:case UT:l=!0}}if(l)return l=t,s=s(l),t=n===""?"."+Np(l,0):n,dy(s)?(i="",t!=null&&(i=t.replace(py,"$&/")+"/"),Vu(s,e,i,"",function(g){return g})):s!=null&&(S1(s)&&(s=sM(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(py,"$&/")+"/")+t)),e.push(s)),1;if(l=0,n=n===""?".":n+":",dy(t))for(var p=0;p<t.length;p++){a=t[p];var f=n+Np(a,p);l+=Vu(a,e,i,f,s)}else if(f=nM(t),typeof f=="function")for(t=f.call(t),p=0;!(a=t.next()).done;)a=a.value,f=n+Np(a,p++),l+=Vu(a,e,i,f,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ou(t,e,i){if(t==null)return t;var n=[],s=0;return Vu(t,n,"","",function(a){return e.call(i,a,s++)}),n}function aM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},Ou={transition:null},oM={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:Ou,ReactCurrentOwner:C1};function $_(){throw Error("act(...) is not supported in production builds of React.")}Lt.Children={map:ou,forEach:function(t,e,i){ou(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return ou(t,function(){e++}),e},toArray:function(t){return ou(t,function(e){return e})||[]},only:function(t){if(!S1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Lt.Component=Fl;Lt.Fragment=GT;Lt.Profiler=QT;Lt.PureComponent=w1;Lt.StrictMode=KT;Lt.Suspense=eM;Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oM;Lt.act=$_;Lt.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=R_({},t.props),s=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=C1.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(f in e)j_.call(e,f)&&!W_.hasOwnProperty(f)&&(n[f]=e[f]===void 0&&p!==void 0?p[f]:e[f])}var f=arguments.length-2;if(f===1)n.children=i;else if(1<f){p=Array(f);for(var g=0;g<f;g++)p[g]=arguments[g+2];n.children=p}return{$$typeof:Pc,type:t.type,key:s,ref:a,props:n,_owner:l}};Lt.createContext=function(t){return t={$$typeof:JT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZT,_context:t},t.Consumer=t};Lt.createElement=z_;Lt.createFactory=function(t){var e=z_.bind(null,t);return e.type=t,e};Lt.createRef=function(){return{current:null}};Lt.forwardRef=function(t){return{$$typeof:qT,render:t}};Lt.isValidElement=S1;Lt.lazy=function(t){return{$$typeof:iM,_payload:{_status:-1,_result:t},_init:aM}};Lt.memo=function(t,e){return{$$typeof:tM,type:t,compare:e===void 0?null:e}};Lt.startTransition=function(t){var e=Ou.transition;Ou.transition={};try{t()}finally{Ou.transition=e}};Lt.unstable_act=$_;Lt.useCallback=function(t,e){return Rn.current.useCallback(t,e)};Lt.useContext=function(t){return Rn.current.useContext(t)};Lt.useDebugValue=function(){};Lt.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};Lt.useEffect=function(t,e){return Rn.current.useEffect(t,e)};Lt.useId=function(){return Rn.current.useId()};Lt.useImperativeHandle=function(t,e,i){return Rn.current.useImperativeHandle(t,e,i)};Lt.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};Lt.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};Lt.useMemo=function(t,e){return Rn.current.useMemo(t,e)};Lt.useReducer=function(t,e,i){return Rn.current.useReducer(t,e,i)};Lt.useRef=function(t){return Rn.current.useRef(t)};Lt.useState=function(t){return Rn.current.useState(t)};Lt.useSyncExternalStore=function(t,e,i){return Rn.current.useSyncExternalStore(t,e,i)};Lt.useTransition=function(){return Rn.current.useTransition()};Lt.version="18.3.1";L_.exports=Lt;var q=L_.exports;const ns=b1(q),lM=F_({__proto__:null,default:ns},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hM=q,cM=Symbol.for("react.element"),uM=Symbol.for("react.fragment"),dM=Object.prototype.hasOwnProperty,pM=hM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fM={key:!0,ref:!0,__self:!0,__source:!0};function H_(t,e,i){var n,s={},a=null,l=null;i!==void 0&&(a=""+i),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)dM.call(e,n)&&!fM.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:cM,type:t,key:a,ref:l,props:s,_owner:pM.current}}y0.Fragment=uM;y0.jsx=H_;y0.jsxs=H_;B_.exports=y0;var _=B_.exports,Y_={exports:{}},ds={},X_={exports:{}},U_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Pe,Ne){var Be=Pe.length;Pe.push(Ne);e:for(;0<Be;){var X=Be-1>>>1,_e=Pe[X];if(0<s(_e,Ne))Pe[X]=Ne,Pe[Be]=_e,Be=X;else break e}}function i(Pe){return Pe.length===0?null:Pe[0]}function n(Pe){if(Pe.length===0)return null;var Ne=Pe[0],Be=Pe.pop();if(Be!==Ne){Pe[0]=Be;e:for(var X=0,_e=Pe.length,me=_e>>>1;X<me;){var $=2*(X+1)-1,oe=Pe[$],fe=$+1,ve=Pe[fe];if(0>s(oe,Be))fe<_e&&0>s(ve,oe)?(Pe[X]=ve,Pe[fe]=Be,X=fe):(Pe[X]=oe,Pe[$]=Be,X=$);else if(fe<_e&&0>s(ve,Be))Pe[X]=ve,Pe[fe]=Be,X=fe;else break e}}return Ne}function s(Pe,Ne){var Be=Pe.sortIndex-Ne.sortIndex;return Be!==0?Be:Pe.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,p=l.now();t.unstable_now=function(){return l.now()-p}}var f=[],g=[],m=1,k=null,T=3,A=!1,P=!1,L=!1,W=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(Pe){for(var Ne=i(g);Ne!==null;){if(Ne.callback===null)n(g);else if(Ne.startTime<=Pe)n(g),Ne.sortIndex=Ne.expirationTime,e(f,Ne);else break;Ne=i(g)}}function z(Pe){if(L=!1,B(Pe),!P)if(i(f)!==null)P=!0,Ue(G);else{var Ne=i(g);Ne!==null&&tt(z,Ne.startTime-Pe)}}function G(Pe,Ne){P=!1,L&&(L=!1,N(K),K=-1),A=!0;var Be=T;try{for(B(Ne),k=i(f);k!==null&&(!(k.expirationTime>Ne)||Pe&&!se());){var X=k.callback;if(typeof X=="function"){k.callback=null,T=k.priorityLevel;var _e=X(k.expirationTime<=Ne);Ne=t.unstable_now(),typeof _e=="function"?k.callback=_e:k===i(f)&&n(f),B(Ne)}else n(f);k=i(f)}if(k!==null)var me=!0;else{var $=i(g);$!==null&&tt(z,$.startTime-Ne),me=!1}return me}finally{k=null,T=Be,A=!1}}var R=!1,U=null,K=-1,ae=5,Q=-1;function se(){return!(t.unstable_now()-Q<ae)}function ge(){if(U!==null){var Pe=t.unstable_now();Q=Pe;var Ne=!0;try{Ne=U(!0,Pe)}finally{Ne?ue():(R=!1,U=null)}}else R=!1}var ue;if(typeof M=="function")ue=function(){M(ge)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Oe=Le.port2;Le.port1.onmessage=ge,ue=function(){Oe.postMessage(null)}}else ue=function(){W(ge,0)};function Ue(Pe){U=Pe,R||(R=!0,ue())}function tt(Pe,Ne){K=W(function(){Pe(t.unstable_now())},Ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Pe){Pe.callback=null},t.unstable_continueExecution=function(){P||A||(P=!0,Ue(G))},t.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<Pe?Math.floor(1e3/Pe):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return i(f)},t.unstable_next=function(Pe){switch(T){case 1:case 2:case 3:var Ne=3;break;default:Ne=T}var Be=T;T=Ne;try{return Pe()}finally{T=Be}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Pe,Ne){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var Be=T;T=Pe;try{return Ne()}finally{T=Be}},t.unstable_scheduleCallback=function(Pe,Ne,Be){var X=t.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?X+Be:X):Be=X,Pe){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=Be+_e,Pe={id:m++,callback:Ne,priorityLevel:Pe,startTime:Be,expirationTime:_e,sortIndex:-1},Be>X?(Pe.sortIndex=Be,e(g,Pe),i(f)===null&&Pe===i(g)&&(L?(N(K),K=-1):L=!0,tt(z,Be-X))):(Pe.sortIndex=_e,e(f,Pe),P||A||(P=!0,Ue(G))),Pe},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(Pe){var Ne=T;return function(){var Be=T;T=Ne;try{return Pe.apply(this,arguments)}finally{T=Be}}}})(U_);X_.exports=U_;var xM=X_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mM=q,ls=xM;function We(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G_=new Set,Hh={};function lo(t,e){sl(t,e),sl(t+"Capture",e)}function sl(t,e){for(Hh[t]=e,t=0;t<e.length;t++)G_.add(e[t])}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wx=Object.prototype.hasOwnProperty,gM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fy={},xy={};function yM(t){return wx.call(xy,t)?!0:wx.call(fy,t)?!1:gM.test(t)?xy[t]=!0:(fy[t]=!0,!1)}function vM(t,e,i,n){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bM(t,e,i,n){if(e===null||typeof e>"u"||vM(t,e,i,n))return!0;if(n)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,i,n,s,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yn[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yn[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yn[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yn[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yn[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yn[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yn[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yn[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yn[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var k1=/[\-:]([a-z])/g;function T1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(k1,T1);yn[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(k1,T1);yn[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(k1,T1);yn[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});yn.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function M1(t,e,i,n){var s=yn.hasOwnProperty(e)?yn[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bM(e,i,s,n)&&(i=null),n||s===null?yM(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):s.mustUseProperty?t[s.propertyName]=i===null?s.type===3?!1:"":i:(e=s.attributeName,n=s.attributeNamespace,i===null?t.removeAttribute(e):(s=s.type,i=s===3||s===4&&i===!0?"":""+i,n?t.setAttributeNS(n,e,i):t.setAttribute(e,i))))}var Br=mM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lu=Symbol.for("react.element"),Ao=Symbol.for("react.portal"),Do=Symbol.for("react.fragment"),P1=Symbol.for("react.strict_mode"),_x=Symbol.for("react.profiler"),K_=Symbol.for("react.provider"),Q_=Symbol.for("react.context"),E1=Symbol.for("react.forward_ref"),Cx=Symbol.for("react.suspense"),Sx=Symbol.for("react.suspense_list"),A1=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),Z_=Symbol.for("react.offscreen"),my=Symbol.iterator;function Ql(t){return t===null||typeof t!="object"?null:(t=my&&t[my]||t["@@iterator"],typeof t=="function"?t:null)}var ki=Object.assign,Rp;function ph(t){if(Rp===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);Rp=e&&e[1]||""}return`
`+Rp+t}var Vp=!1;function Op(t,e){if(!t||Vp)return"";Vp=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var n=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){n=g}t.call(e.prototype)}else{try{throw Error()}catch(g){n=g}t()}}catch(g){if(g&&n&&typeof g.stack=="string"){for(var s=g.stack.split(`
`),a=n.stack.split(`
`),l=s.length-1,p=a.length-1;1<=l&&0<=p&&s[l]!==a[p];)p--;for(;1<=l&&0<=p;l--,p--)if(s[l]!==a[p]){if(l!==1||p!==1)do if(l--,p--,0>p||s[l]!==a[p]){var f=`
`+s[l].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=l&&0<=p);break}}}finally{Vp=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?ph(t):""}function wM(t){switch(t.tag){case 5:return ph(t.type);case 16:return ph("Lazy");case 13:return ph("Suspense");case 19:return ph("SuspenseList");case 0:case 2:case 15:return t=Op(t.type,!1),t;case 11:return t=Op(t.type.render,!1),t;case 1:return t=Op(t.type,!0),t;default:return""}}function kx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Do:return"Fragment";case Ao:return"Portal";case _x:return"Profiler";case P1:return"StrictMode";case Cx:return"Suspense";case Sx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Q_:return(t.displayName||"Context")+".Consumer";case K_:return(t._context.displayName||"Context")+".Provider";case E1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A1:return e=t.displayName||null,e!==null?e:kx(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return kx(t(e))}catch{}}return null}function _M(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kx(e);case 8:return e===P1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function J_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CM(t){var e=J_(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,a=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hu(t){t._valueTracker||(t._valueTracker=CM(t))}function q_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),n="";return t&&(n=J_(t)?t.checked?"true":"false":t.value),t=n,t!==i?(e.setValue(t),!0):!1}function ud(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tx(t,e){var i=e.checked;return ki({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function gy(t,e){var i=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;i=oa(e.value!=null?e.value:i),t._wrapperState={initialChecked:n,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eC(t,e){e=e.checked,e!=null&&M1(t,"checked",e,!1)}function Mx(t,e){eC(t,e);var i=oa(e.value),n=e.type;if(i!=null)n==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Px(t,e.type,i):e.hasOwnProperty("defaultValue")&&Px(t,e.type,oa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yy(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function Px(t,e,i){(e!=="number"||ud(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var fh=Array.isArray;function Xo(t,e,i,n){if(t=t.options,e){e={};for(var s=0;s<i.length;s++)e["$"+i[s]]=!0;for(i=0;i<t.length;i++)s=e.hasOwnProperty("$"+t[i].value),t[i].selected!==s&&(t[i].selected=s),s&&n&&(t[i].defaultSelected=!0)}else{for(i=""+oa(i),e=null,s=0;s<t.length;s++){if(t[s].value===i){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ex(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(We(91));return ki({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vy(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(We(92));if(fh(i)){if(1<i.length)throw Error(We(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:oa(i)}}function tC(t,e){var i=oa(e.value),n=oa(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),n!=null&&(t.defaultValue=""+n)}function by(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ax(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cu,nC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,i,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cu=cu||document.createElement("div"),cu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yh(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var Sh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SM=["Webkit","ms","Moz","O"];Object.keys(Sh).forEach(function(t){SM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sh[e]=Sh[t]})});function sC(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||Sh.hasOwnProperty(t)&&Sh[t]?(""+e).trim():e+"px"}function rC(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var n=i.indexOf("--")===0,s=sC(i,e[i],n);i==="float"&&(i="cssFloat"),n?t.setProperty(i,s):t[i]=s}}var kM=ki({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dx(t,e){if(e){if(kM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(We(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(We(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(We(61))}if(e.style!=null&&typeof e.style!="object")throw Error(We(62))}}function Ix(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fx=null;function D1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bx=null,Uo=null,Go=null;function wy(t){if(t=Dc(t)){if(typeof Bx!="function")throw Error(We(280));var e=t.stateNode;e&&(e=C0(e),Bx(t.stateNode,t.type,e))}}function aC(t){Uo?Go?Go.push(t):Go=[t]:Uo=t}function oC(){if(Uo){var t=Uo,e=Go;if(Go=Uo=null,wy(t),e)for(t=0;t<e.length;t++)wy(e[t])}}function lC(t,e){return t(e)}function hC(){}var jp=!1;function cC(t,e,i){if(jp)return t(e,i);jp=!0;try{return lC(t,e,i)}finally{jp=!1,(Uo!==null||Go!==null)&&(hC(),oC())}}function Xh(t,e){var i=t.stateNode;if(i===null)return null;var n=C0(i);if(n===null)return null;i=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(We(231,e,typeof i));return i}var Lx=!1;if(Sr)try{var Zl={};Object.defineProperty(Zl,"passive",{get:function(){Lx=!0}}),window.addEventListener("test",Zl,Zl),window.removeEventListener("test",Zl,Zl)}catch{Lx=!1}function TM(t,e,i,n,s,a,l,p,f){var g=Array.prototype.slice.call(arguments,3);try{e.apply(i,g)}catch(m){this.onError(m)}}var kh=!1,dd=null,pd=!1,Nx=null,MM={onError:function(t){kh=!0,dd=t}};function PM(t,e,i,n,s,a,l,p,f){kh=!1,dd=null,TM.apply(MM,arguments)}function EM(t,e,i,n,s,a,l,p,f){if(PM.apply(this,arguments),kh){if(kh){var g=dd;kh=!1,dd=null}else throw Error(We(198));pd||(pd=!0,Nx=g)}}function ho(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function uC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _y(t){if(ho(t)!==t)throw Error(We(188))}function AM(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(We(188));return e!==t?null:t}for(var i=t,n=e;;){var s=i.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){i=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===i)return _y(s),t;if(a===n)return _y(s),e;a=a.sibling}throw Error(We(188))}if(i.return!==n.return)i=s,n=a;else{for(var l=!1,p=s.child;p;){if(p===i){l=!0,i=s,n=a;break}if(p===n){l=!0,n=s,i=a;break}p=p.sibling}if(!l){for(p=a.child;p;){if(p===i){l=!0,i=a,n=s;break}if(p===n){l=!0,n=a,i=s;break}p=p.sibling}if(!l)throw Error(We(189))}}if(i.alternate!==n)throw Error(We(190))}if(i.tag!==3)throw Error(We(188));return i.stateNode.current===i?t:e}function dC(t){return t=AM(t),t!==null?pC(t):null}function pC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pC(t);if(e!==null)return e;t=t.sibling}return null}var fC=ls.unstable_scheduleCallback,Cy=ls.unstable_cancelCallback,DM=ls.unstable_shouldYield,IM=ls.unstable_requestPaint,Ni=ls.unstable_now,FM=ls.unstable_getCurrentPriorityLevel,I1=ls.unstable_ImmediatePriority,xC=ls.unstable_UserBlockingPriority,fd=ls.unstable_NormalPriority,BM=ls.unstable_LowPriority,mC=ls.unstable_IdlePriority,v0=null,ir=null;function LM(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(v0,t,void 0,(t.current.flags&128)===128)}catch{}}var Ls=Math.clz32?Math.clz32:VM,NM=Math.log,RM=Math.LN2;function VM(t){return t>>>=0,t===0?32:31-(NM(t)/RM|0)|0}var uu=64,du=4194304;function xh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xd(t,e){var i=t.pendingLanes;if(i===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,l=i&268435455;if(l!==0){var p=l&~s;p!==0?n=xh(p):(a&=l,a!==0&&(n=xh(a)))}else l=i&~s,l!==0?n=xh(l):a!==0&&(n=xh(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)i=31-Ls(e),s=1<<i,n|=t[i],e&=~s;return n}function OM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jM(t,e){for(var i=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Ls(a),p=1<<l,f=s[l];f===-1?(!(p&i)||p&n)&&(s[l]=OM(p,e)):f<=e&&(t.expiredLanes|=p),a&=~p}}function Rx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gC(){var t=uu;return uu<<=1,!(uu&4194240)&&(uu=64),t}function Wp(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function Ec(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ls(e),t[e]=i}function WM(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<i;){var s=31-Ls(i),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,i&=~a}}function F1(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var n=31-Ls(i),s=1<<n;s&e|t[n]&e&&(t[n]|=e),i&=~s}}var qt=0;function yC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vC,B1,bC,wC,_C,Vx=!1,pu=[],Ur=null,Gr=null,Kr=null,Uh=new Map,Gh=new Map,Wr=[],zM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sy(t,e){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":Uh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gh.delete(e.pointerId)}}function Jl(t,e,i,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:i,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Dc(e),e!==null&&B1(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function $M(t,e,i,n,s){switch(e){case"focusin":return Ur=Jl(Ur,t,e,i,n,s),!0;case"dragenter":return Gr=Jl(Gr,t,e,i,n,s),!0;case"mouseover":return Kr=Jl(Kr,t,e,i,n,s),!0;case"pointerover":var a=s.pointerId;return Uh.set(a,Jl(Uh.get(a)||null,t,e,i,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Gh.set(a,Jl(Gh.get(a)||null,t,e,i,n,s)),!0}return!1}function CC(t){var e=Ba(t.target);if(e!==null){var i=ho(e);if(i!==null){if(e=i.tag,e===13){if(e=uC(i),e!==null){t.blockedOn=e,_C(t.priority,function(){bC(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=Ox(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var n=new i.constructor(i.type,i);Fx=n,i.target.dispatchEvent(n),Fx=null}else return e=Dc(i),e!==null&&B1(e),t.blockedOn=i,!1;e.shift()}return!0}function ky(t,e,i){ju(t)&&i.delete(e)}function HM(){Vx=!1,Ur!==null&&ju(Ur)&&(Ur=null),Gr!==null&&ju(Gr)&&(Gr=null),Kr!==null&&ju(Kr)&&(Kr=null),Uh.forEach(ky),Gh.forEach(ky)}function ql(t,e){t.blockedOn===e&&(t.blockedOn=null,Vx||(Vx=!0,ls.unstable_scheduleCallback(ls.unstable_NormalPriority,HM)))}function Kh(t){function e(s){return ql(s,t)}if(0<pu.length){ql(pu[0],t);for(var i=1;i<pu.length;i++){var n=pu[i];n.blockedOn===t&&(n.blockedOn=null)}}for(Ur!==null&&ql(Ur,t),Gr!==null&&ql(Gr,t),Kr!==null&&ql(Kr,t),Uh.forEach(e),Gh.forEach(e),i=0;i<Wr.length;i++)n=Wr[i],n.blockedOn===t&&(n.blockedOn=null);for(;0<Wr.length&&(i=Wr[0],i.blockedOn===null);)CC(i),i.blockedOn===null&&Wr.shift()}var Ko=Br.ReactCurrentBatchConfig,md=!0;function YM(t,e,i,n){var s=qt,a=Ko.transition;Ko.transition=null;try{qt=1,L1(t,e,i,n)}finally{qt=s,Ko.transition=a}}function XM(t,e,i,n){var s=qt,a=Ko.transition;Ko.transition=null;try{qt=4,L1(t,e,i,n)}finally{qt=s,Ko.transition=a}}function L1(t,e,i,n){if(md){var s=Ox(t,e,i,n);if(s===null)Zp(t,e,n,gd,i),Sy(t,n);else if($M(s,t,e,i,n))n.stopPropagation();else if(Sy(t,n),e&4&&-1<zM.indexOf(t)){for(;s!==null;){var a=Dc(s);if(a!==null&&vC(a),a=Ox(t,e,i,n),a===null&&Zp(t,e,n,gd,i),a===s)break;s=a}s!==null&&n.stopPropagation()}else Zp(t,e,n,null,i)}}var gd=null;function Ox(t,e,i,n){if(gd=null,t=D1(n),t=Ba(t),t!==null)if(e=ho(t),e===null)t=null;else if(i=e.tag,i===13){if(t=uC(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gd=t,null}function SC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FM()){case I1:return 1;case xC:return 4;case fd:case BM:return 16;case mC:return 536870912;default:return 16}default:return 16}}var $r=null,N1=null,Wu=null;function kC(){if(Wu)return Wu;var t,e=N1,i=e.length,n,s="value"in $r?$r.value:$r.textContent,a=s.length;for(t=0;t<i&&e[t]===s[t];t++);var l=i-t;for(n=1;n<=l&&e[i-n]===s[a-n];n++);return Wu=s.slice(t,1<n?1-n:void 0)}function zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fu(){return!0}function Ty(){return!1}function ps(t){function e(i,n,s,a,l){this._reactName=i,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(i=t[p],this[p]=i?i(a):a[p]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?fu:Ty,this.isPropagationStopped=Ty,this}return ki(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=fu)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=fu)},persist:function(){},isPersistent:fu}),e}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},R1=ps(Bl),Ac=ki({},Bl,{view:0,detail:0}),UM=ps(Ac),zp,$p,eh,b0=ki({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:V1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eh&&(eh&&t.type==="mousemove"?(zp=t.screenX-eh.screenX,$p=t.screenY-eh.screenY):$p=zp=0,eh=t),zp)},movementY:function(t){return"movementY"in t?t.movementY:$p}}),My=ps(b0),GM=ki({},b0,{dataTransfer:0}),KM=ps(GM),QM=ki({},Ac,{relatedTarget:0}),Hp=ps(QM),ZM=ki({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),JM=ps(ZM),qM=ki({},Bl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),e6=ps(qM),t6=ki({},Bl,{data:0}),Py=ps(t6),i6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s6[t])?!!e[t]:!1}function V1(){return r6}var a6=ki({},Ac,{key:function(t){if(t.key){var e=i6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?n6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:V1,charCode:function(t){return t.type==="keypress"?zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),o6=ps(a6),l6=ki({},b0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ey=ps(l6),h6=ki({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:V1}),c6=ps(h6),u6=ki({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),d6=ps(u6),p6=ki({},b0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),f6=ps(p6),x6=[9,13,27,32],O1=Sr&&"CompositionEvent"in window,Th=null;Sr&&"documentMode"in document&&(Th=document.documentMode);var m6=Sr&&"TextEvent"in window&&!Th,TC=Sr&&(!O1||Th&&8<Th&&11>=Th),Ay=" ",Dy=!1;function MC(t,e){switch(t){case"keyup":return x6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Io=!1;function g6(t,e){switch(t){case"compositionend":return PC(e);case"keypress":return e.which!==32?null:(Dy=!0,Ay);case"textInput":return t=e.data,t===Ay&&Dy?null:t;default:return null}}function y6(t,e){if(Io)return t==="compositionend"||!O1&&MC(t,e)?(t=kC(),Wu=N1=$r=null,Io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TC&&e.locale!=="ko"?null:e.data;default:return null}}var v6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v6[t.type]:e==="textarea"}function EC(t,e,i,n){aC(n),e=yd(e,"onChange"),0<e.length&&(i=new R1("onChange","change",null,i,n),t.push({event:i,listeners:e}))}var Mh=null,Qh=null;function b6(t){jC(t,0)}function w0(t){var e=Lo(t);if(q_(e))return t}function w6(t,e){if(t==="change")return e}var AC=!1;if(Sr){var Yp;if(Sr){var Xp="oninput"in document;if(!Xp){var Fy=document.createElement("div");Fy.setAttribute("oninput","return;"),Xp=typeof Fy.oninput=="function"}Yp=Xp}else Yp=!1;AC=Yp&&(!document.documentMode||9<document.documentMode)}function By(){Mh&&(Mh.detachEvent("onpropertychange",DC),Qh=Mh=null)}function DC(t){if(t.propertyName==="value"&&w0(Qh)){var e=[];EC(e,Qh,t,D1(t)),cC(b6,e)}}function _6(t,e,i){t==="focusin"?(By(),Mh=e,Qh=i,Mh.attachEvent("onpropertychange",DC)):t==="focusout"&&By()}function C6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return w0(Qh)}function S6(t,e){if(t==="click")return w0(e)}function k6(t,e){if(t==="input"||t==="change")return w0(e)}function T6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ws=typeof Object.is=="function"?Object.is:T6;function Zh(t,e){if(Ws(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var s=i[n];if(!wx.call(e,s)||!Ws(t[s],e[s]))return!1}return!0}function Ly(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ny(t,e){var i=Ly(t);t=0;for(var n;i;){if(i.nodeType===3){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ly(i)}}function IC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?IC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FC(){for(var t=window,e=ud();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=ud(t.document)}return e}function j1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function M6(t){var e=FC(),i=t.focusedElem,n=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&IC(i.ownerDocument.documentElement,i)){if(n!==null&&j1(i)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=i.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=Ny(i,a);var l=Ny(i,n);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var P6=Sr&&"documentMode"in document&&11>=document.documentMode,Fo=null,jx=null,Ph=null,Wx=!1;function Ry(t,e,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Wx||Fo==null||Fo!==ud(n)||(n=Fo,"selectionStart"in n&&j1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ph&&Zh(Ph,n)||(Ph=n,n=yd(jx,"onSelect"),0<n.length&&(e=new R1("onSelect","select",null,e,i),t.push({event:e,listeners:n}),e.target=Fo)))}function xu(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Bo={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},Up={},BC={};Sr&&(BC=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function _0(t){if(Up[t])return Up[t];if(!Bo[t])return t;var e=Bo[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in BC)return Up[t]=e[i];return t}var LC=_0("animationend"),NC=_0("animationiteration"),RC=_0("animationstart"),VC=_0("transitionend"),OC=new Map,Vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fa(t,e){OC.set(t,e),lo(e,[t])}for(var Gp=0;Gp<Vy.length;Gp++){var Kp=Vy[Gp],E6=Kp.toLowerCase(),A6=Kp[0].toUpperCase()+Kp.slice(1);fa(E6,"on"+A6)}fa(LC,"onAnimationEnd");fa(NC,"onAnimationIteration");fa(RC,"onAnimationStart");fa("dblclick","onDoubleClick");fa("focusin","onFocus");fa("focusout","onBlur");fa(VC,"onTransitionEnd");sl("onMouseEnter",["mouseout","mouseover"]);sl("onMouseLeave",["mouseout","mouseover"]);sl("onPointerEnter",["pointerout","pointerover"]);sl("onPointerLeave",["pointerout","pointerover"]);lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D6=new Set("cancel close invalid load scroll toggle".split(" ").concat(mh));function Oy(t,e,i){var n=t.type||"unknown-event";t.currentTarget=i,EM(n,e,void 0,t),t.currentTarget=null}function jC(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var n=t[i],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var l=n.length-1;0<=l;l--){var p=n[l],f=p.instance,g=p.currentTarget;if(p=p.listener,f!==a&&s.isPropagationStopped())break e;Oy(s,p,g),a=f}else for(l=0;l<n.length;l++){if(p=n[l],f=p.instance,g=p.currentTarget,p=p.listener,f!==a&&s.isPropagationStopped())break e;Oy(s,p,g),a=f}}}if(pd)throw t=Nx,pd=!1,Nx=null,t}function ui(t,e){var i=e[Xx];i===void 0&&(i=e[Xx]=new Set);var n=t+"__bubble";i.has(n)||(WC(e,t,2,!1),i.add(n))}function Qp(t,e,i){var n=0;e&&(n|=4),WC(i,t,n,e)}var mu="_reactListening"+Math.random().toString(36).slice(2);function Jh(t){if(!t[mu]){t[mu]=!0,G_.forEach(function(i){i!=="selectionchange"&&(D6.has(i)||Qp(i,!1,t),Qp(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mu]||(e[mu]=!0,Qp("selectionchange",!1,e))}}function WC(t,e,i,n){switch(SC(e)){case 1:var s=YM;break;case 4:s=XM;break;default:s=L1}i=s.bind(null,e,i,t),s=void 0,!Lx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,i,{capture:!0,passive:s}):t.addEventListener(e,i,!0):s!==void 0?t.addEventListener(e,i,{passive:s}):t.addEventListener(e,i,!1)}function Zp(t,e,i,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var p=n.stateNode.containerInfo;if(p===s||p.nodeType===8&&p.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var f=l.tag;if((f===3||f===4)&&(f=l.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;l=l.return}for(;p!==null;){if(l=Ba(p),l===null)return;if(f=l.tag,f===5||f===6){n=a=l;continue e}p=p.parentNode}}n=n.return}cC(function(){var g=a,m=D1(i),k=[];e:{var T=OC.get(t);if(T!==void 0){var A=R1,P=t;switch(t){case"keypress":if(zu(i)===0)break e;case"keydown":case"keyup":A=o6;break;case"focusin":P="focus",A=Hp;break;case"focusout":P="blur",A=Hp;break;case"beforeblur":case"afterblur":A=Hp;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=My;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=KM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=c6;break;case LC:case NC:case RC:A=JM;break;case VC:A=d6;break;case"scroll":A=UM;break;case"wheel":A=f6;break;case"copy":case"cut":case"paste":A=e6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Ey}var L=(e&4)!==0,W=!L&&t==="scroll",N=L?T!==null?T+"Capture":null:T;L=[];for(var M=g,B;M!==null;){B=M;var z=B.stateNode;if(B.tag===5&&z!==null&&(B=z,N!==null&&(z=Xh(M,N),z!=null&&L.push(qh(M,z,B)))),W)break;M=M.return}0<L.length&&(T=new A(T,P,null,i,m),k.push({event:T,listeners:L}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",T&&i!==Fx&&(P=i.relatedTarget||i.fromElement)&&(Ba(P)||P[kr]))break e;if((A||T)&&(T=m.window===m?m:(T=m.ownerDocument)?T.defaultView||T.parentWindow:window,A?(P=i.relatedTarget||i.toElement,A=g,P=P?Ba(P):null,P!==null&&(W=ho(P),P!==W||P.tag!==5&&P.tag!==6)&&(P=null)):(A=null,P=g),A!==P)){if(L=My,z="onMouseLeave",N="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(L=Ey,z="onPointerLeave",N="onPointerEnter",M="pointer"),W=A==null?T:Lo(A),B=P==null?T:Lo(P),T=new L(z,M+"leave",A,i,m),T.target=W,T.relatedTarget=B,z=null,Ba(m)===g&&(L=new L(N,M+"enter",P,i,m),L.target=B,L.relatedTarget=W,z=L),W=z,A&&P)t:{for(L=A,N=P,M=0,B=L;B;B=wo(B))M++;for(B=0,z=N;z;z=wo(z))B++;for(;0<M-B;)L=wo(L),M--;for(;0<B-M;)N=wo(N),B--;for(;M--;){if(L===N||N!==null&&L===N.alternate)break t;L=wo(L),N=wo(N)}L=null}else L=null;A!==null&&jy(k,T,A,L,!1),P!==null&&W!==null&&jy(k,W,P,L,!0)}}e:{if(T=g?Lo(g):window,A=T.nodeName&&T.nodeName.toLowerCase(),A==="select"||A==="input"&&T.type==="file")var G=w6;else if(Iy(T))if(AC)G=k6;else{G=C6;var R=_6}else(A=T.nodeName)&&A.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(G=S6);if(G&&(G=G(t,g))){EC(k,G,i,m);break e}R&&R(t,T,g),t==="focusout"&&(R=T._wrapperState)&&R.controlled&&T.type==="number"&&Px(T,"number",T.value)}switch(R=g?Lo(g):window,t){case"focusin":(Iy(R)||R.contentEditable==="true")&&(Fo=R,jx=g,Ph=null);break;case"focusout":Ph=jx=Fo=null;break;case"mousedown":Wx=!0;break;case"contextmenu":case"mouseup":case"dragend":Wx=!1,Ry(k,i,m);break;case"selectionchange":if(P6)break;case"keydown":case"keyup":Ry(k,i,m)}var U;if(O1)e:{switch(t){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else Io?MC(t,i)&&(K="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(K="onCompositionStart");K&&(TC&&i.locale!=="ko"&&(Io||K!=="onCompositionStart"?K==="onCompositionEnd"&&Io&&(U=kC()):($r=m,N1="value"in $r?$r.value:$r.textContent,Io=!0)),R=yd(g,K),0<R.length&&(K=new Py(K,t,null,i,m),k.push({event:K,listeners:R}),U?K.data=U:(U=PC(i),U!==null&&(K.data=U)))),(U=m6?g6(t,i):y6(t,i))&&(g=yd(g,"onBeforeInput"),0<g.length&&(m=new Py("onBeforeInput","beforeinput",null,i,m),k.push({event:m,listeners:g}),m.data=U))}jC(k,e)})}function qh(t,e,i){return{instance:t,listener:e,currentTarget:i}}function yd(t,e){for(var i=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Xh(t,i),a!=null&&n.unshift(qh(t,a,s)),a=Xh(t,e),a!=null&&n.push(qh(t,a,s))),t=t.return}return n}function wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jy(t,e,i,n,s){for(var a=e._reactName,l=[];i!==null&&i!==n;){var p=i,f=p.alternate,g=p.stateNode;if(f!==null&&f===n)break;p.tag===5&&g!==null&&(p=g,s?(f=Xh(i,a),f!=null&&l.unshift(qh(i,f,p))):s||(f=Xh(i,a),f!=null&&l.push(qh(i,f,p)))),i=i.return}l.length!==0&&t.push({event:e,listeners:l})}var I6=/\r\n?/g,F6=/\u0000|\uFFFD/g;function Wy(t){return(typeof t=="string"?t:""+t).replace(I6,`
`).replace(F6,"")}function gu(t,e,i){if(e=Wy(e),Wy(t)!==e&&i)throw Error(We(425))}function vd(){}var zx=null,$x=null;function Hx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yx=typeof setTimeout=="function"?setTimeout:void 0,B6=typeof clearTimeout=="function"?clearTimeout:void 0,zy=typeof Promise=="function"?Promise:void 0,L6=typeof queueMicrotask=="function"?queueMicrotask:typeof zy<"u"?function(t){return zy.resolve(null).then(t).catch(N6)}:Yx;function N6(t){setTimeout(function(){throw t})}function Jp(t,e){var i=e,n=0;do{var s=i.nextSibling;if(t.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(n===0){t.removeChild(s),Kh(e);return}n--}else i!=="$"&&i!=="$?"&&i!=="$!"||n++;i=s}while(i);Kh(e)}function Qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $y(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var Ll=Math.random().toString(36).slice(2),Ks="__reactFiber$"+Ll,ec="__reactProps$"+Ll,kr="__reactContainer$"+Ll,Xx="__reactEvents$"+Ll,R6="__reactListeners$"+Ll,V6="__reactHandles$"+Ll;function Ba(t){var e=t[Ks];if(e)return e;for(var i=t.parentNode;i;){if(e=i[kr]||i[Ks]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=$y(t);t!==null;){if(i=t[Ks])return i;t=$y(t)}return e}t=i,i=t.parentNode}return null}function Dc(t){return t=t[Ks]||t[kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(We(33))}function C0(t){return t[ec]||null}var Ux=[],No=-1;function xa(t){return{current:t}}function mi(t){0>No||(t.current=Ux[No],Ux[No]=null,No--)}function hi(t,e){No++,Ux[No]=t.current,t.current=e}var la={},Dn=xa(la),Un=xa(!1),Ka=la;function rl(t,e){var i=t.type.contextTypes;if(!i)return la;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in i)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Gn(t){return t=t.childContextTypes,t!=null}function bd(){mi(Un),mi(Dn)}function Hy(t,e,i){if(Dn.current!==la)throw Error(We(168));hi(Dn,e),hi(Un,i)}function zC(t,e,i){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return i;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(We(108,_M(t)||"Unknown",s));return ki({},i,n)}function wd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||la,Ka=Dn.current,hi(Dn,t),hi(Un,Un.current),!0}function Yy(t,e,i){var n=t.stateNode;if(!n)throw Error(We(169));i?(t=zC(t,e,Ka),n.__reactInternalMemoizedMergedChildContext=t,mi(Un),mi(Dn),hi(Dn,t)):mi(Un),hi(Un,i)}var xr=null,S0=!1,qp=!1;function $C(t){xr===null?xr=[t]:xr.push(t)}function O6(t){S0=!0,$C(t)}function ma(){if(!qp&&xr!==null){qp=!0;var t=0,e=qt;try{var i=xr;for(qt=1;t<i.length;t++){var n=i[t];do n=n(!0);while(n!==null)}xr=null,S0=!1}catch(s){throw xr!==null&&(xr=xr.slice(t+1)),fC(I1,ma),s}finally{qt=e,qp=!1}}return null}var Ro=[],Vo=0,_d=null,Cd=0,xs=[],ms=0,Qa=null,mr=1,gr="";function Pa(t,e){Ro[Vo++]=Cd,Ro[Vo++]=_d,_d=t,Cd=e}function HC(t,e,i){xs[ms++]=mr,xs[ms++]=gr,xs[ms++]=Qa,Qa=t;var n=mr;t=gr;var s=32-Ls(n)-1;n&=~(1<<s),i+=1;var a=32-Ls(e)+s;if(30<a){var l=s-s%5;a=(n&(1<<l)-1).toString(32),n>>=l,s-=l,mr=1<<32-Ls(e)+s|i<<s|n,gr=a+t}else mr=1<<a|i<<s|n,gr=t}function W1(t){t.return!==null&&(Pa(t,1),HC(t,1,0))}function z1(t){for(;t===_d;)_d=Ro[--Vo],Ro[Vo]=null,Cd=Ro[--Vo],Ro[Vo]=null;for(;t===Qa;)Qa=xs[--ms],xs[ms]=null,gr=xs[--ms],xs[ms]=null,mr=xs[--ms],xs[ms]=null}var ss=null,is=null,bi=!1,Ds=null;function YC(t,e){var i=ys(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function Xy(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ss=t,is=Qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ss=t,is=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=Qa!==null?{id:mr,overflow:gr}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=ys(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,ss=t,is=null,!0):!1;default:return!1}}function Gx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kx(t){if(bi){var e=is;if(e){var i=e;if(!Xy(t,e)){if(Gx(t))throw Error(We(418));e=Qr(i.nextSibling);var n=ss;e&&Xy(t,e)?YC(n,i):(t.flags=t.flags&-4097|2,bi=!1,ss=t)}}else{if(Gx(t))throw Error(We(418));t.flags=t.flags&-4097|2,bi=!1,ss=t}}}function Uy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ss=t}function yu(t){if(t!==ss)return!1;if(!bi)return Uy(t),bi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hx(t.type,t.memoizedProps)),e&&(e=is)){if(Gx(t))throw XC(),Error(We(418));for(;e;)YC(t,e),e=Qr(e.nextSibling)}if(Uy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(We(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){is=Qr(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}is=null}}else is=ss?Qr(t.stateNode.nextSibling):null;return!0}function XC(){for(var t=is;t;)t=Qr(t.nextSibling)}function al(){is=ss=null,bi=!1}function $1(t){Ds===null?Ds=[t]:Ds.push(t)}var j6=Br.ReactCurrentBatchConfig;function th(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(We(309));var n=i.stateNode}if(!n)throw Error(We(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var p=s.refs;l===null?delete p[a]:p[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(We(284));if(!i._owner)throw Error(We(290,t))}return t}function vu(t,e){throw t=Object.prototype.toString.call(e),Error(We(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gy(t){var e=t._init;return e(t._payload)}function UC(t){function e(N,M){if(t){var B=N.deletions;B===null?(N.deletions=[M],N.flags|=16):B.push(M)}}function i(N,M){if(!t)return null;for(;M!==null;)e(N,M),M=M.sibling;return null}function n(N,M){for(N=new Map;M!==null;)M.key!==null?N.set(M.key,M):N.set(M.index,M),M=M.sibling;return N}function s(N,M){return N=ea(N,M),N.index=0,N.sibling=null,N}function a(N,M,B){return N.index=B,t?(B=N.alternate,B!==null?(B=B.index,B<M?(N.flags|=2,M):B):(N.flags|=2,M)):(N.flags|=1048576,M)}function l(N){return t&&N.alternate===null&&(N.flags|=2),N}function p(N,M,B,z){return M===null||M.tag!==6?(M=of(B,N.mode,z),M.return=N,M):(M=s(M,B),M.return=N,M)}function f(N,M,B,z){var G=B.type;return G===Do?m(N,M,B.props.children,z,B.key):M!==null&&(M.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Or&&Gy(G)===M.type)?(z=s(M,B.props),z.ref=th(N,M,B),z.return=N,z):(z=Ku(B.type,B.key,B.props,null,N.mode,z),z.ref=th(N,M,B),z.return=N,z)}function g(N,M,B,z){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=lf(B,N.mode,z),M.return=N,M):(M=s(M,B.children||[]),M.return=N,M)}function m(N,M,B,z,G){return M===null||M.tag!==7?(M=Ha(B,N.mode,z,G),M.return=N,M):(M=s(M,B),M.return=N,M)}function k(N,M,B){if(typeof M=="string"&&M!==""||typeof M=="number")return M=of(""+M,N.mode,B),M.return=N,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case lu:return B=Ku(M.type,M.key,M.props,null,N.mode,B),B.ref=th(N,null,M),B.return=N,B;case Ao:return M=lf(M,N.mode,B),M.return=N,M;case Or:var z=M._init;return k(N,z(M._payload),B)}if(fh(M)||Ql(M))return M=Ha(M,N.mode,B,null),M.return=N,M;vu(N,M)}return null}function T(N,M,B,z){var G=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return G!==null?null:p(N,M,""+B,z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case lu:return B.key===G?f(N,M,B,z):null;case Ao:return B.key===G?g(N,M,B,z):null;case Or:return G=B._init,T(N,M,G(B._payload),z)}if(fh(B)||Ql(B))return G!==null?null:m(N,M,B,z,null);vu(N,B)}return null}function A(N,M,B,z,G){if(typeof z=="string"&&z!==""||typeof z=="number")return N=N.get(B)||null,p(M,N,""+z,G);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case lu:return N=N.get(z.key===null?B:z.key)||null,f(M,N,z,G);case Ao:return N=N.get(z.key===null?B:z.key)||null,g(M,N,z,G);case Or:var R=z._init;return A(N,M,B,R(z._payload),G)}if(fh(z)||Ql(z))return N=N.get(B)||null,m(M,N,z,G,null);vu(M,z)}return null}function P(N,M,B,z){for(var G=null,R=null,U=M,K=M=0,ae=null;U!==null&&K<B.length;K++){U.index>K?(ae=U,U=null):ae=U.sibling;var Q=T(N,U,B[K],z);if(Q===null){U===null&&(U=ae);break}t&&U&&Q.alternate===null&&e(N,U),M=a(Q,M,K),R===null?G=Q:R.sibling=Q,R=Q,U=ae}if(K===B.length)return i(N,U),bi&&Pa(N,K),G;if(U===null){for(;K<B.length;K++)U=k(N,B[K],z),U!==null&&(M=a(U,M,K),R===null?G=U:R.sibling=U,R=U);return bi&&Pa(N,K),G}for(U=n(N,U);K<B.length;K++)ae=A(U,N,K,B[K],z),ae!==null&&(t&&ae.alternate!==null&&U.delete(ae.key===null?K:ae.key),M=a(ae,M,K),R===null?G=ae:R.sibling=ae,R=ae);return t&&U.forEach(function(se){return e(N,se)}),bi&&Pa(N,K),G}function L(N,M,B,z){var G=Ql(B);if(typeof G!="function")throw Error(We(150));if(B=G.call(B),B==null)throw Error(We(151));for(var R=G=null,U=M,K=M=0,ae=null,Q=B.next();U!==null&&!Q.done;K++,Q=B.next()){U.index>K?(ae=U,U=null):ae=U.sibling;var se=T(N,U,Q.value,z);if(se===null){U===null&&(U=ae);break}t&&U&&se.alternate===null&&e(N,U),M=a(se,M,K),R===null?G=se:R.sibling=se,R=se,U=ae}if(Q.done)return i(N,U),bi&&Pa(N,K),G;if(U===null){for(;!Q.done;K++,Q=B.next())Q=k(N,Q.value,z),Q!==null&&(M=a(Q,M,K),R===null?G=Q:R.sibling=Q,R=Q);return bi&&Pa(N,K),G}for(U=n(N,U);!Q.done;K++,Q=B.next())Q=A(U,N,K,Q.value,z),Q!==null&&(t&&Q.alternate!==null&&U.delete(Q.key===null?K:Q.key),M=a(Q,M,K),R===null?G=Q:R.sibling=Q,R=Q);return t&&U.forEach(function(ge){return e(N,ge)}),bi&&Pa(N,K),G}function W(N,M,B,z){if(typeof B=="object"&&B!==null&&B.type===Do&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case lu:e:{for(var G=B.key,R=M;R!==null;){if(R.key===G){if(G=B.type,G===Do){if(R.tag===7){i(N,R.sibling),M=s(R,B.props.children),M.return=N,N=M;break e}}else if(R.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Or&&Gy(G)===R.type){i(N,R.sibling),M=s(R,B.props),M.ref=th(N,R,B),M.return=N,N=M;break e}i(N,R);break}else e(N,R);R=R.sibling}B.type===Do?(M=Ha(B.props.children,N.mode,z,B.key),M.return=N,N=M):(z=Ku(B.type,B.key,B.props,null,N.mode,z),z.ref=th(N,M,B),z.return=N,N=z)}return l(N);case Ao:e:{for(R=B.key;M!==null;){if(M.key===R)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){i(N,M.sibling),M=s(M,B.children||[]),M.return=N,N=M;break e}else{i(N,M);break}else e(N,M);M=M.sibling}M=lf(B,N.mode,z),M.return=N,N=M}return l(N);case Or:return R=B._init,W(N,M,R(B._payload),z)}if(fh(B))return P(N,M,B,z);if(Ql(B))return L(N,M,B,z);vu(N,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,M!==null&&M.tag===6?(i(N,M.sibling),M=s(M,B),M.return=N,N=M):(i(N,M),M=of(B,N.mode,z),M.return=N,N=M),l(N)):i(N,M)}return W}var ol=UC(!0),GC=UC(!1),Sd=xa(null),kd=null,Oo=null,H1=null;function Y1(){H1=Oo=kd=null}function X1(t){var e=Sd.current;mi(Sd),t._currentValue=e}function Qx(t,e,i){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===i)break;t=t.return}}function Qo(t,e){kd=t,H1=Oo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hn=!0),t.firstContext=null)}function ws(t){var e=t._currentValue;if(H1!==t)if(t={context:t,memoizedValue:e,next:null},Oo===null){if(kd===null)throw Error(We(308));Oo=t,kd.dependencies={lanes:0,firstContext:t}}else Oo=Oo.next=t;return e}var La=null;function U1(t){La===null?La=[t]:La.push(t)}function KC(t,e,i,n){var s=e.interleaved;return s===null?(i.next=i,U1(e)):(i.next=s.next,s.next=i),e.interleaved=i,Tr(t,n)}function Tr(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var jr=!1;function G1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(t,e,i){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Yt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Tr(t,i)}return s=n.interleaved,s===null?(e.next=e,U1(n)):(e.next=s.next,s.next=e),n.interleaved=e,Tr(t,i)}function $u(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,F1(t,i)}}function Ky(t,e){var i=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var s=null,a=null;if(i=i.firstBaseUpdate,i!==null){do{var l={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};a===null?s=a=l:a=a.next=l,i=i.next}while(i!==null);a===null?s=a=e:a=a.next=e}else s=a=e;i={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function Td(t,e,i,n){var s=t.updateQueue;jr=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,p=s.shared.pending;if(p!==null){s.shared.pending=null;var f=p,g=f.next;f.next=null,l===null?a=g:l.next=g,l=f;var m=t.alternate;m!==null&&(m=m.updateQueue,p=m.lastBaseUpdate,p!==l&&(p===null?m.firstBaseUpdate=g:p.next=g,m.lastBaseUpdate=f))}if(a!==null){var k=s.baseState;l=0,m=g=f=null,p=a;do{var T=p.lane,A=p.eventTime;if((n&T)===T){m!==null&&(m=m.next={eventTime:A,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var P=t,L=p;switch(T=e,A=i,L.tag){case 1:if(P=L.payload,typeof P=="function"){k=P.call(A,k,T);break e}k=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=L.payload,T=typeof P=="function"?P.call(A,k,T):P,T==null)break e;k=ki({},k,T);break e;case 2:jr=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,T=s.effects,T===null?s.effects=[p]:T.push(p))}else A={eventTime:A,lane:T,tag:p.tag,payload:p.payload,callback:p.callback,next:null},m===null?(g=m=A,f=k):m=m.next=A,l|=T;if(p=p.next,p===null){if(p=s.shared.pending,p===null)break;T=p,p=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(m===null&&(f=k),s.baseState=f,s.firstBaseUpdate=g,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Ja|=l,t.lanes=l,t.memoizedState=k}}function Qy(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=i,typeof s!="function")throw Error(We(191,s));s.call(n)}}}var Ic={},nr=xa(Ic),tc=xa(Ic),ic=xa(Ic);function Na(t){if(t===Ic)throw Error(We(174));return t}function K1(t,e){switch(hi(ic,e),hi(tc,t),hi(nr,Ic),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ax(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ax(e,t)}mi(nr),hi(nr,e)}function ll(){mi(nr),mi(tc),mi(ic)}function ZC(t){Na(ic.current);var e=Na(nr.current),i=Ax(e,t.type);e!==i&&(hi(tc,t),hi(nr,i))}function Q1(t){tc.current===t&&(mi(nr),mi(tc))}var Ci=xa(0);function Md(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ef=[];function Z1(){for(var t=0;t<ef.length;t++)ef[t]._workInProgressVersionPrimary=null;ef.length=0}var Hu=Br.ReactCurrentDispatcher,tf=Br.ReactCurrentBatchConfig,Za=0,Si=null,Xi=null,nn=null,Pd=!1,Eh=!1,nc=0,W6=0;function vn(){throw Error(We(321))}function J1(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Ws(t[i],e[i]))return!1;return!0}function q1(t,e,i,n,s,a){if(Za=a,Si=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hu.current=t===null||t.memoizedState===null?Y6:X6,t=i(n,s),Eh){a=0;do{if(Eh=!1,nc=0,25<=a)throw Error(We(301));a+=1,nn=Xi=null,e.updateQueue=null,Hu.current=U6,t=i(n,s)}while(Eh)}if(Hu.current=Ed,e=Xi!==null&&Xi.next!==null,Za=0,nn=Xi=Si=null,Pd=!1,e)throw Error(We(300));return t}function eg(){var t=nc!==0;return nc=0,t}function Us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Si.memoizedState=nn=t:nn=nn.next=t,nn}function _s(){if(Xi===null){var t=Si.alternate;t=t!==null?t.memoizedState:null}else t=Xi.next;var e=nn===null?Si.memoizedState:nn.next;if(e!==null)nn=e,Xi=t;else{if(t===null)throw Error(We(310));Xi=t,t={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},nn===null?Si.memoizedState=nn=t:nn=nn.next=t}return nn}function sc(t,e){return typeof e=="function"?e(t):e}function nf(t){var e=_s(),i=e.queue;if(i===null)throw Error(We(311));i.lastRenderedReducer=t;var n=Xi,s=n.baseQueue,a=i.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}n.baseQueue=s=a,i.pending=null}if(s!==null){a=s.next,n=n.baseState;var p=l=null,f=null,g=a;do{var m=g.lane;if((Za&m)===m)f!==null&&(f=f.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),n=g.hasEagerState?g.eagerState:t(n,g.action);else{var k={lane:m,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};f===null?(p=f=k,l=n):f=f.next=k,Si.lanes|=m,Ja|=m}g=g.next}while(g!==null&&g!==a);f===null?l=n:f.next=p,Ws(n,e.memoizedState)||(Hn=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=f,i.lastRenderedState=n}if(t=i.interleaved,t!==null){s=t;do a=s.lane,Si.lanes|=a,Ja|=a,s=s.next;while(s!==t)}else s===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function sf(t){var e=_s(),i=e.queue;if(i===null)throw Error(We(311));i.lastRenderedReducer=t;var n=i.dispatch,s=i.pending,a=e.memoizedState;if(s!==null){i.pending=null;var l=s=s.next;do a=t(a,l.action),l=l.next;while(l!==s);Ws(a,e.memoizedState)||(Hn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),i.lastRenderedState=a}return[a,n]}function JC(){}function qC(t,e){var i=Si,n=_s(),s=e(),a=!Ws(n.memoizedState,s);if(a&&(n.memoizedState=s,Hn=!0),n=n.queue,tg(i4.bind(null,i,n,t),[t]),n.getSnapshot!==e||a||nn!==null&&nn.memoizedState.tag&1){if(i.flags|=2048,rc(9,t4.bind(null,i,n,s,e),void 0,null),on===null)throw Error(We(349));Za&30||e4(i,e,s)}return s}function e4(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=Si.updateQueue,e===null?(e={lastEffect:null,stores:null},Si.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function t4(t,e,i,n){e.value=i,e.getSnapshot=n,n4(e)&&s4(t)}function i4(t,e,i){return i(function(){n4(e)&&s4(t)})}function n4(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Ws(t,i)}catch{return!0}}function s4(t){var e=Tr(t,1);e!==null&&Ns(e,t,1,-1)}function Zy(t){var e=Us();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:t},e.queue=t,t=t.dispatch=H6.bind(null,Si,t),[e.memoizedState,t]}function rc(t,e,i,n){return t={tag:t,create:e,destroy:i,deps:n,next:null},e=Si.updateQueue,e===null?(e={lastEffect:null,stores:null},Si.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(n=i.next,i.next=t,t.next=n,e.lastEffect=t)),t}function r4(){return _s().memoizedState}function Yu(t,e,i,n){var s=Us();Si.flags|=t,s.memoizedState=rc(1|e,i,void 0,n===void 0?null:n)}function k0(t,e,i,n){var s=_s();n=n===void 0?null:n;var a=void 0;if(Xi!==null){var l=Xi.memoizedState;if(a=l.destroy,n!==null&&J1(n,l.deps)){s.memoizedState=rc(e,i,a,n);return}}Si.flags|=t,s.memoizedState=rc(1|e,i,a,n)}function Jy(t,e){return Yu(8390656,8,t,e)}function tg(t,e){return k0(2048,8,t,e)}function a4(t,e){return k0(4,2,t,e)}function o4(t,e){return k0(4,4,t,e)}function l4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function h4(t,e,i){return i=i!=null?i.concat([t]):null,k0(4,4,l4.bind(null,e,t),i)}function ig(){}function c4(t,e){var i=_s();e=e===void 0?null:e;var n=i.memoizedState;return n!==null&&e!==null&&J1(e,n[1])?n[0]:(i.memoizedState=[t,e],t)}function u4(t,e){var i=_s();e=e===void 0?null:e;var n=i.memoizedState;return n!==null&&e!==null&&J1(e,n[1])?n[0]:(t=t(),i.memoizedState=[t,e],t)}function d4(t,e,i){return Za&21?(Ws(i,e)||(i=gC(),Si.lanes|=i,Ja|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hn=!0),t.memoizedState=i)}function z6(t,e){var i=qt;qt=i!==0&&4>i?i:4,t(!0);var n=tf.transition;tf.transition={};try{t(!1),e()}finally{qt=i,tf.transition=n}}function p4(){return _s().memoizedState}function $6(t,e,i){var n=qr(t);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},f4(t))x4(e,i);else if(i=KC(t,e,i,n),i!==null){var s=Bn();Ns(i,t,n,s),m4(i,e,n)}}function H6(t,e,i){var n=qr(t),s={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(f4(t))x4(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,p=a(l,i);if(s.hasEagerState=!0,s.eagerState=p,Ws(p,l)){var f=e.interleaved;f===null?(s.next=s,U1(e)):(s.next=f.next,f.next=s),e.interleaved=s;return}}catch{}finally{}i=KC(t,e,s,n),i!==null&&(s=Bn(),Ns(i,t,n,s),m4(i,e,n))}}function f4(t){var e=t.alternate;return t===Si||e!==null&&e===Si}function x4(t,e){Eh=Pd=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function m4(t,e,i){if(i&4194240){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,F1(t,i)}}var Ed={readContext:ws,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},Y6={readContext:ws,useCallback:function(t,e){return Us().memoizedState=[t,e===void 0?null:e],t},useContext:ws,useEffect:Jy,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,Yu(4194308,4,l4.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Yu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yu(4,2,t,e)},useMemo:function(t,e){var i=Us();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var n=Us();return e=i!==void 0?i(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=$6.bind(null,Si,t),[n.memoizedState,t]},useRef:function(t){var e=Us();return t={current:t},e.memoizedState=t},useState:Zy,useDebugValue:ig,useDeferredValue:function(t){return Us().memoizedState=t},useTransition:function(){var t=Zy(!1),e=t[0];return t=z6.bind(null,t[1]),Us().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var n=Si,s=Us();if(bi){if(i===void 0)throw Error(We(407));i=i()}else{if(i=e(),on===null)throw Error(We(349));Za&30||e4(n,e,i)}s.memoizedState=i;var a={value:i,getSnapshot:e};return s.queue=a,Jy(i4.bind(null,n,a,t),[t]),n.flags|=2048,rc(9,t4.bind(null,n,a,i,e),void 0,null),i},useId:function(){var t=Us(),e=on.identifierPrefix;if(bi){var i=gr,n=mr;i=(n&~(1<<32-Ls(n)-1)).toString(32)+i,e=":"+e+"R"+i,i=nc++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=W6++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},X6={readContext:ws,useCallback:c4,useContext:ws,useEffect:tg,useImperativeHandle:h4,useInsertionEffect:a4,useLayoutEffect:o4,useMemo:u4,useReducer:nf,useRef:r4,useState:function(){return nf(sc)},useDebugValue:ig,useDeferredValue:function(t){var e=_s();return d4(e,Xi.memoizedState,t)},useTransition:function(){var t=nf(sc)[0],e=_s().memoizedState;return[t,e]},useMutableSource:JC,useSyncExternalStore:qC,useId:p4,unstable_isNewReconciler:!1},U6={readContext:ws,useCallback:c4,useContext:ws,useEffect:tg,useImperativeHandle:h4,useInsertionEffect:a4,useLayoutEffect:o4,useMemo:u4,useReducer:sf,useRef:r4,useState:function(){return sf(sc)},useDebugValue:ig,useDeferredValue:function(t){var e=_s();return Xi===null?e.memoizedState=t:d4(e,Xi.memoizedState,t)},useTransition:function(){var t=sf(sc)[0],e=_s().memoizedState;return[t,e]},useMutableSource:JC,useSyncExternalStore:qC,useId:p4,unstable_isNewReconciler:!1};function Ps(t,e){if(t&&t.defaultProps){e=ki({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}function Zx(t,e,i,n){e=t.memoizedState,i=i(n,e),i=i==null?e:ki({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var T0={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var n=Bn(),s=qr(t),a=br(n,s);a.payload=e,i!=null&&(a.callback=i),e=Zr(t,a,s),e!==null&&(Ns(e,t,s,n),$u(e,t,s))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var n=Bn(),s=qr(t),a=br(n,s);a.tag=1,a.payload=e,i!=null&&(a.callback=i),e=Zr(t,a,s),e!==null&&(Ns(e,t,s,n),$u(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=Bn(),n=qr(t),s=br(i,n);s.tag=2,e!=null&&(s.callback=e),e=Zr(t,s,n),e!==null&&(Ns(e,t,n,i),$u(e,t,n))}};function qy(t,e,i,n,s,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,l):e.prototype&&e.prototype.isPureReactComponent?!Zh(i,n)||!Zh(s,a):!0}function g4(t,e,i){var n=!1,s=la,a=e.contextType;return typeof a=="object"&&a!==null?a=ws(a):(s=Gn(e)?Ka:Dn.current,n=e.contextTypes,a=(n=n!=null)?rl(t,s):la),e=new e(i,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=T0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function ev(t,e,i,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,n),e.state!==t&&T0.enqueueReplaceState(e,e.state,null)}function Jx(t,e,i,n){var s=t.stateNode;s.props=i,s.state=t.memoizedState,s.refs={},G1(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=ws(a):(a=Gn(e)?Ka:Dn.current,s.context=rl(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Zx(t,e,a,i),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&T0.enqueueReplaceState(s,s.state,null),Td(t,i,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hl(t,e){try{var i="",n=e;do i+=wM(n),n=n.return;while(n);var s=i}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function rf(t,e,i){return{value:t,source:null,stack:i??null,digest:e??null}}function qx(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var G6=typeof WeakMap=="function"?WeakMap:Map;function y4(t,e,i){i=br(-1,i),i.tag=3,i.payload={element:null};var n=e.value;return i.callback=function(){Dd||(Dd=!0,hm=n),qx(t,e)},i}function v4(t,e,i){i=br(-1,i),i.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;i.payload=function(){return n(s)},i.callback=function(){qx(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(i.callback=function(){qx(t,e),typeof n!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),i}function tv(t,e,i){var n=t.pingCache;if(n===null){n=t.pingCache=new G6;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(i)||(s.add(i),t=l8.bind(null,t,e,i),e.then(t,t))}function iv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nv(t,e,i,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=br(-1,1),e.tag=2,Zr(i,e,1))),i.lanes|=1),t)}var K6=Br.ReactCurrentOwner,Hn=!1;function In(t,e,i,n){e.child=t===null?GC(e,null,i,n):ol(e,t.child,i,n)}function sv(t,e,i,n,s){i=i.render;var a=e.ref;return Qo(e,s),n=q1(t,e,i,n,a,s),i=eg(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(bi&&i&&W1(e),e.flags|=1,In(t,e,n,s),e.child)}function rv(t,e,i,n,s){if(t===null){var a=i.type;return typeof a=="function"&&!cg(a)&&a.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=a,b4(t,e,a,n,s)):(t=Ku(i.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var l=a.memoizedProps;if(i=i.compare,i=i!==null?i:Zh,i(l,n)&&t.ref===e.ref)return Mr(t,e,s)}return e.flags|=1,t=ea(a,n),t.ref=e.ref,t.return=e,e.child=t}function b4(t,e,i,n,s){if(t!==null){var a=t.memoizedProps;if(Zh(a,n)&&t.ref===e.ref)if(Hn=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(Hn=!0);else return e.lanes=t.lanes,Mr(t,e,s)}return em(t,e,i,n,s)}function w4(t,e,i){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},hi(Wo,es),es|=i;else{if(!(i&1073741824))return t=a!==null?a.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,hi(Wo,es),es|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:i,hi(Wo,es),es|=n}else a!==null?(n=a.baseLanes|i,e.memoizedState=null):n=i,hi(Wo,es),es|=n;return In(t,e,s,i),e.child}function _4(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function em(t,e,i,n,s){var a=Gn(i)?Ka:Dn.current;return a=rl(e,a),Qo(e,s),i=q1(t,e,i,n,a,s),n=eg(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(bi&&n&&W1(e),e.flags|=1,In(t,e,i,s),e.child)}function av(t,e,i,n,s){if(Gn(i)){var a=!0;wd(e)}else a=!1;if(Qo(e,s),e.stateNode===null)Xu(t,e),g4(e,i,n),Jx(e,i,n,s),n=!0;else if(t===null){var l=e.stateNode,p=e.memoizedProps;l.props=p;var f=l.context,g=i.contextType;typeof g=="object"&&g!==null?g=ws(g):(g=Gn(i)?Ka:Dn.current,g=rl(e,g));var m=i.getDerivedStateFromProps,k=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";k||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(p!==n||f!==g)&&ev(e,l,n,g),jr=!1;var T=e.memoizedState;l.state=T,Td(e,n,l,s),f=e.memoizedState,p!==n||T!==f||Un.current||jr?(typeof m=="function"&&(Zx(e,i,m,n),f=e.memoizedState),(p=jr||qy(e,i,p,n,T,f,g))?(k||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=f),l.props=n,l.state=f,l.context=g,n=p):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,QC(t,e),p=e.memoizedProps,g=e.type===e.elementType?p:Ps(e.type,p),l.props=g,k=e.pendingProps,T=l.context,f=i.contextType,typeof f=="object"&&f!==null?f=ws(f):(f=Gn(i)?Ka:Dn.current,f=rl(e,f));var A=i.getDerivedStateFromProps;(m=typeof A=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(p!==k||T!==f)&&ev(e,l,n,f),jr=!1,T=e.memoizedState,l.state=T,Td(e,n,l,s);var P=e.memoizedState;p!==k||T!==P||Un.current||jr?(typeof A=="function"&&(Zx(e,i,A,n),P=e.memoizedState),(g=jr||qy(e,i,g,n,T,P,f)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,P,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,P,f)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=P),l.props=n,l.state=P,l.context=f,n=g):(typeof l.componentDidUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),n=!1)}return tm(t,e,i,n,a,s)}function tm(t,e,i,n,s,a){_4(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return s&&Yy(e,i,!1),Mr(t,e,a);n=e.stateNode,K6.current=e;var p=l&&typeof i.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=ol(e,t.child,null,a),e.child=ol(e,null,p,a)):In(t,e,p,a),e.memoizedState=n.state,s&&Yy(e,i,!0),e.child}function C4(t){var e=t.stateNode;e.pendingContext?Hy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hy(t,e.context,!1),K1(t,e.containerInfo)}function ov(t,e,i,n,s){return al(),$1(s),e.flags|=256,In(t,e,i,n),e.child}var im={dehydrated:null,treeContext:null,retryLane:0};function nm(t){return{baseLanes:t,cachePool:null,transitions:null}}function S4(t,e,i){var n=e.pendingProps,s=Ci.current,a=!1,l=(e.flags&128)!==0,p;if((p=l)||(p=t!==null&&t.memoizedState===null?!1:(s&2)!==0),p?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),hi(Ci,s&1),t===null)return Kx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,a?(n=e.mode,a=e.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=E0(l,n,0,null),t=Ha(t,n,i,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=nm(i),e.memoizedState=im,t):ng(e,l));if(s=t.memoizedState,s!==null&&(p=s.dehydrated,p!==null))return Q6(t,e,l,n,p,s,i);if(a){a=n.fallback,l=e.mode,s=t.child,p=s.sibling;var f={mode:"hidden",children:n.children};return!(l&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=f,e.deletions=null):(n=ea(s,f),n.subtreeFlags=s.subtreeFlags&14680064),p!==null?a=ea(p,a):(a=Ha(a,l,i,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,l=t.child.memoizedState,l=l===null?nm(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~i,e.memoizedState=im,n}return a=t.child,t=a.sibling,n=ea(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=i),n.return=e,n.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=n,e.memoizedState=null,n}function ng(t,e){return e=E0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bu(t,e,i,n){return n!==null&&$1(n),ol(e,t.child,null,i),t=ng(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Q6(t,e,i,n,s,a,l){if(i)return e.flags&256?(e.flags&=-257,n=rf(Error(We(422))),bu(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=E0({mode:"visible",children:n.children},s,0,null),a=Ha(a,s,l,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&ol(e,t.child,null,l),e.child.memoizedState=nm(l),e.memoizedState=im,a);if(!(e.mode&1))return bu(t,e,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var p=n.dgst;return n=p,a=Error(We(419)),n=rf(a,n,void 0),bu(t,e,l,n)}if(p=(l&t.childLanes)!==0,Hn||p){if(n=on,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Tr(t,s),Ns(n,t,s,-1))}return hg(),n=rf(Error(We(421))),bu(t,e,l,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=h8.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,is=Qr(s.nextSibling),ss=e,bi=!0,Ds=null,t!==null&&(xs[ms++]=mr,xs[ms++]=gr,xs[ms++]=Qa,mr=t.id,gr=t.overflow,Qa=e),e=ng(e,n.children),e.flags|=4096,e)}function lv(t,e,i){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Qx(t.return,e,i)}function af(t,e,i,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=i,a.tailMode=s)}function k4(t,e,i){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(In(t,e,n.children,i),n=Ci.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lv(t,i,e);else if(t.tag===19)lv(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(hi(Ci,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(i=e.child,s=null;i!==null;)t=i.alternate,t!==null&&Md(t)===null&&(s=i),i=i.sibling;i=s,i===null?(s=e.child,e.child=null):(s=i.sibling,i.sibling=null),af(e,!1,s,i,a);break;case"backwards":for(i=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Md(t)===null){e.child=s;break}t=s.sibling,s.sibling=i,i=s,s=t}af(e,!0,i,null,a);break;case"together":af(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),Ja|=e.lanes,!(i&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(We(153));if(e.child!==null){for(t=e.child,i=ea(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=ea(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function Z6(t,e,i){switch(e.tag){case 3:C4(e),al();break;case 5:ZC(e);break;case 1:Gn(e.type)&&wd(e);break;case 4:K1(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;hi(Sd,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(hi(Ci,Ci.current&1),e.flags|=128,null):i&e.child.childLanes?S4(t,e,i):(hi(Ci,Ci.current&1),t=Mr(t,e,i),t!==null?t.sibling:null);hi(Ci,Ci.current&1);break;case 19:if(n=(i&e.childLanes)!==0,t.flags&128){if(n)return k4(t,e,i);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),hi(Ci,Ci.current),n)break;return null;case 22:case 23:return e.lanes=0,w4(t,e,i)}return Mr(t,e,i)}var T4,sm,M4,P4;T4=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};sm=function(){};M4=function(t,e,i,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Na(nr.current);var a=null;switch(i){case"input":s=Tx(t,s),n=Tx(t,n),a=[];break;case"select":s=ki({},s,{value:void 0}),n=ki({},n,{value:void 0}),a=[];break;case"textarea":s=Ex(t,s),n=Ex(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=vd)}Dx(i,n);var l;i=null;for(g in s)if(!n.hasOwnProperty(g)&&s.hasOwnProperty(g)&&s[g]!=null)if(g==="style"){var p=s[g];for(l in p)p.hasOwnProperty(l)&&(i||(i={}),i[l]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Hh.hasOwnProperty(g)?a||(a=[]):(a=a||[]).push(g,null));for(g in n){var f=n[g];if(p=s!=null?s[g]:void 0,n.hasOwnProperty(g)&&f!==p&&(f!=null||p!=null))if(g==="style")if(p){for(l in p)!p.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in f)f.hasOwnProperty(l)&&p[l]!==f[l]&&(i||(i={}),i[l]=f[l])}else i||(a||(a=[]),a.push(g,i)),i=f;else g==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,p=p?p.__html:void 0,f!=null&&p!==f&&(a=a||[]).push(g,f)):g==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(g,""+f):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Hh.hasOwnProperty(g)?(f!=null&&g==="onScroll"&&ui("scroll",t),a||p===f||(a=[])):(a=a||[]).push(g,f))}i&&(a=a||[]).push("style",i);var g=a;(e.updateQueue=g)&&(e.flags|=4)}};P4=function(t,e,i,n){i!==n&&(e.flags|=4)};function ih(t,e){if(!bi)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function bn(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,n=0;if(e)for(var s=t.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=i,e}function J6(t,e,i){var n=e.pendingProps;switch(z1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(e),null;case 1:return Gn(e.type)&&bd(),bn(e),null;case 3:return n=e.stateNode,ll(),mi(Un),mi(Dn),Z1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(yu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ds!==null&&(dm(Ds),Ds=null))),sm(t,e),bn(e),null;case 5:Q1(e);var s=Na(ic.current);if(i=e.type,t!==null&&e.stateNode!=null)M4(t,e,i,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(We(166));return bn(e),null}if(t=Na(nr.current),yu(e)){n=e.stateNode,i=e.type;var a=e.memoizedProps;switch(n[Ks]=e,n[ec]=a,t=(e.mode&1)!==0,i){case"dialog":ui("cancel",n),ui("close",n);break;case"iframe":case"object":case"embed":ui("load",n);break;case"video":case"audio":for(s=0;s<mh.length;s++)ui(mh[s],n);break;case"source":ui("error",n);break;case"img":case"image":case"link":ui("error",n),ui("load",n);break;case"details":ui("toggle",n);break;case"input":gy(n,a),ui("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ui("invalid",n);break;case"textarea":vy(n,a),ui("invalid",n)}Dx(i,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var p=a[l];l==="children"?typeof p=="string"?n.textContent!==p&&(a.suppressHydrationWarning!==!0&&gu(n.textContent,p,t),s=["children",p]):typeof p=="number"&&n.textContent!==""+p&&(a.suppressHydrationWarning!==!0&&gu(n.textContent,p,t),s=["children",""+p]):Hh.hasOwnProperty(l)&&p!=null&&l==="onScroll"&&ui("scroll",n)}switch(i){case"input":hu(n),yy(n,a,!0);break;case"textarea":hu(n),by(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=vd)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iC(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(i,{is:n.is}):(t=l.createElement(i),i==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,i),t[Ks]=e,t[ec]=n,T4(t,e,!1,!1),e.stateNode=t;e:{switch(l=Ix(i,n),i){case"dialog":ui("cancel",t),ui("close",t),s=n;break;case"iframe":case"object":case"embed":ui("load",t),s=n;break;case"video":case"audio":for(s=0;s<mh.length;s++)ui(mh[s],t);s=n;break;case"source":ui("error",t),s=n;break;case"img":case"image":case"link":ui("error",t),ui("load",t),s=n;break;case"details":ui("toggle",t),s=n;break;case"input":gy(t,n),s=Tx(t,n),ui("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=ki({},n,{value:void 0}),ui("invalid",t);break;case"textarea":vy(t,n),s=Ex(t,n),ui("invalid",t);break;default:s=n}Dx(i,s),p=s;for(a in p)if(p.hasOwnProperty(a)){var f=p[a];a==="style"?rC(t,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&nC(t,f)):a==="children"?typeof f=="string"?(i!=="textarea"||f!=="")&&Yh(t,f):typeof f=="number"&&Yh(t,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Hh.hasOwnProperty(a)?f!=null&&a==="onScroll"&&ui("scroll",t):f!=null&&M1(t,a,f,l))}switch(i){case"input":hu(t),yy(t,n,!1);break;case"textarea":hu(t),by(t);break;case"option":n.value!=null&&t.setAttribute("value",""+oa(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Xo(t,!!n.multiple,a,!1):n.defaultValue!=null&&Xo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=vd)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bn(e),null;case 6:if(t&&e.stateNode!=null)P4(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(We(166));if(i=Na(ic.current),Na(nr.current),yu(e)){if(n=e.stateNode,i=e.memoizedProps,n[Ks]=e,(a=n.nodeValue!==i)&&(t=ss,t!==null))switch(t.tag){case 3:gu(n.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gu(n.nodeValue,i,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(i.nodeType===9?i:i.ownerDocument).createTextNode(n),n[Ks]=e,e.stateNode=n}return bn(e),null;case 13:if(mi(Ci),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bi&&is!==null&&e.mode&1&&!(e.flags&128))XC(),al(),e.flags|=98560,a=!1;else if(a=yu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(We(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(We(317));a[Ks]=e}else al(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bn(e),a=!1}else Ds!==null&&(dm(Ds),Ds=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ci.current&1?Ui===0&&(Ui=3):hg())),e.updateQueue!==null&&(e.flags|=4),bn(e),null);case 4:return ll(),sm(t,e),t===null&&Jh(e.stateNode.containerInfo),bn(e),null;case 10:return X1(e.type._context),bn(e),null;case 17:return Gn(e.type)&&bd(),bn(e),null;case 19:if(mi(Ci),a=e.memoizedState,a===null)return bn(e),null;if(n=(e.flags&128)!==0,l=a.rendering,l===null)if(n)ih(a,!1);else{if(Ui!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Md(t),l!==null){for(e.flags|=128,ih(a,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=i,i=e.child;i!==null;)a=i,t=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return hi(Ci,Ci.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ni()>cl&&(e.flags|=128,n=!0,ih(a,!1),e.lanes=4194304)}else{if(!n)if(t=Md(l),t!==null){if(e.flags|=128,n=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),ih(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!bi)return bn(e),null}else 2*Ni()-a.renderingStartTime>cl&&i!==1073741824&&(e.flags|=128,n=!0,ih(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(i=a.last,i!==null?i.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ni(),e.sibling=null,i=Ci.current,hi(Ci,n?i&1|2:i&1),e):(bn(e),null);case 22:case 23:return lg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?es&1073741824&&(bn(e),e.subtreeFlags&6&&(e.flags|=8192)):bn(e),null;case 24:return null;case 25:return null}throw Error(We(156,e.tag))}function q6(t,e){switch(z1(e),e.tag){case 1:return Gn(e.type)&&bd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ll(),mi(Un),mi(Dn),Z1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Q1(e),null;case 13:if(mi(Ci),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(We(340));al()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mi(Ci),null;case 4:return ll(),null;case 10:return X1(e.type._context),null;case 22:case 23:return lg(),null;case 24:return null;default:return null}}var wu=!1,Cn=!1,e8=typeof WeakSet=="function"?WeakSet:Set,rt=null;function jo(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(n){Ai(t,e,n)}else i.current=null}function rm(t,e,i){try{i()}catch(n){Ai(t,e,n)}}var hv=!1;function t8(t,e){if(zx=md,t=FC(),j1(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{i.nodeType,a.nodeType}catch{i=null;break e}var l=0,p=-1,f=-1,g=0,m=0,k=t,T=null;t:for(;;){for(var A;k!==i||s!==0&&k.nodeType!==3||(p=l+s),k!==a||n!==0&&k.nodeType!==3||(f=l+n),k.nodeType===3&&(l+=k.nodeValue.length),(A=k.firstChild)!==null;)T=k,k=A;for(;;){if(k===t)break t;if(T===i&&++g===s&&(p=l),T===a&&++m===n&&(f=l),(A=k.nextSibling)!==null)break;k=T,T=k.parentNode}k=A}i=p===-1||f===-1?null:{start:p,end:f}}else i=null}i=i||{start:0,end:0}}else i=null;for($x={focusedElem:t,selectionRange:i},md=!1,rt=e;rt!==null;)if(e=rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,rt=t;else for(;rt!==null;){e=rt;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var L=P.memoizedProps,W=P.memoizedState,N=e.stateNode,M=N.getSnapshotBeforeUpdate(e.elementType===e.type?L:Ps(e.type,L),W);N.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var B=e.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(We(163))}}catch(z){Ai(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,rt=t;break}rt=e.return}return P=hv,hv=!1,P}function Ah(t,e,i){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&rm(e,i,a)}s=s.next}while(s!==n)}}function M0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var n=i.create;i.destroy=n()}i=i.next}while(i!==e)}}function am(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function E4(t){var e=t.alternate;e!==null&&(t.alternate=null,E4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ks],delete e[ec],delete e[Xx],delete e[R6],delete e[V6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function A4(t){return t.tag===5||t.tag===3||t.tag===4}function cv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||A4(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function om(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=vd));else if(n!==4&&(t=t.child,t!==null))for(om(t,e,i),t=t.sibling;t!==null;)om(t,e,i),t=t.sibling}function lm(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(lm(t,e,i),t=t.sibling;t!==null;)lm(t,e,i),t=t.sibling}var pn=null,Es=!1;function Nr(t,e,i){for(i=i.child;i!==null;)D4(t,e,i),i=i.sibling}function D4(t,e,i){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(v0,i)}catch{}switch(i.tag){case 5:Cn||jo(i,e);case 6:var n=pn,s=Es;pn=null,Nr(t,e,i),pn=n,Es=s,pn!==null&&(Es?(t=pn,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):pn.removeChild(i.stateNode));break;case 18:pn!==null&&(Es?(t=pn,i=i.stateNode,t.nodeType===8?Jp(t.parentNode,i):t.nodeType===1&&Jp(t,i),Kh(t)):Jp(pn,i.stateNode));break;case 4:n=pn,s=Es,pn=i.stateNode.containerInfo,Es=!0,Nr(t,e,i),pn=n,Es=s;break;case 0:case 11:case 14:case 15:if(!Cn&&(n=i.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&rm(i,e,l),s=s.next}while(s!==n)}Nr(t,e,i);break;case 1:if(!Cn&&(jo(i,e),n=i.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(p){Ai(i,e,p)}Nr(t,e,i);break;case 21:Nr(t,e,i);break;case 22:i.mode&1?(Cn=(n=Cn)||i.memoizedState!==null,Nr(t,e,i),Cn=n):Nr(t,e,i);break;default:Nr(t,e,i)}}function uv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new e8),e.forEach(function(n){var s=c8.bind(null,t,n);i.has(n)||(i.add(n),n.then(s,s))})}}function Ts(t,e){var i=e.deletions;if(i!==null)for(var n=0;n<i.length;n++){var s=i[n];try{var a=t,l=e,p=l;e:for(;p!==null;){switch(p.tag){case 5:pn=p.stateNode,Es=!1;break e;case 3:pn=p.stateNode.containerInfo,Es=!0;break e;case 4:pn=p.stateNode.containerInfo,Es=!0;break e}p=p.return}if(pn===null)throw Error(We(160));D4(a,l,s),pn=null,Es=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(g){Ai(s,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)I4(e,t),e=e.sibling}function I4(t,e){var i=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ts(e,t),Xs(t),n&4){try{Ah(3,t,t.return),M0(3,t)}catch(L){Ai(t,t.return,L)}try{Ah(5,t,t.return)}catch(L){Ai(t,t.return,L)}}break;case 1:Ts(e,t),Xs(t),n&512&&i!==null&&jo(i,i.return);break;case 5:if(Ts(e,t),Xs(t),n&512&&i!==null&&jo(i,i.return),t.flags&32){var s=t.stateNode;try{Yh(s,"")}catch(L){Ai(t,t.return,L)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,l=i!==null?i.memoizedProps:a,p=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{p==="input"&&a.type==="radio"&&a.name!=null&&eC(s,a),Ix(p,l);var g=Ix(p,a);for(l=0;l<f.length;l+=2){var m=f[l],k=f[l+1];m==="style"?rC(s,k):m==="dangerouslySetInnerHTML"?nC(s,k):m==="children"?Yh(s,k):M1(s,m,k,g)}switch(p){case"input":Mx(s,a);break;case"textarea":tC(s,a);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var A=a.value;A!=null?Xo(s,!!a.multiple,A,!1):T!==!!a.multiple&&(a.defaultValue!=null?Xo(s,!!a.multiple,a.defaultValue,!0):Xo(s,!!a.multiple,a.multiple?[]:"",!1))}s[ec]=a}catch(L){Ai(t,t.return,L)}}break;case 6:if(Ts(e,t),Xs(t),n&4){if(t.stateNode===null)throw Error(We(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(L){Ai(t,t.return,L)}}break;case 3:if(Ts(e,t),Xs(t),n&4&&i!==null&&i.memoizedState.isDehydrated)try{Kh(e.containerInfo)}catch(L){Ai(t,t.return,L)}break;case 4:Ts(e,t),Xs(t);break;case 13:Ts(e,t),Xs(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(ag=Ni())),n&4&&uv(t);break;case 22:if(m=i!==null&&i.memoizedState!==null,t.mode&1?(Cn=(g=Cn)||m,Ts(e,t),Cn=g):Ts(e,t),Xs(t),n&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!m&&t.mode&1)for(rt=t,m=t.child;m!==null;){for(k=rt=m;rt!==null;){switch(T=rt,A=T.child,T.tag){case 0:case 11:case 14:case 15:Ah(4,T,T.return);break;case 1:jo(T,T.return);var P=T.stateNode;if(typeof P.componentWillUnmount=="function"){n=T,i=T.return;try{e=n,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(L){Ai(n,i,L)}}break;case 5:jo(T,T.return);break;case 22:if(T.memoizedState!==null){pv(k);continue}}A!==null?(A.return=T,rt=A):pv(k)}m=m.sibling}e:for(m=null,k=t;;){if(k.tag===5){if(m===null){m=k;try{s=k.stateNode,g?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(p=k.stateNode,f=k.memoizedProps.style,l=f!=null&&f.hasOwnProperty("display")?f.display:null,p.style.display=sC("display",l))}catch(L){Ai(t,t.return,L)}}}else if(k.tag===6){if(m===null)try{k.stateNode.nodeValue=g?"":k.memoizedProps}catch(L){Ai(t,t.return,L)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===t)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===t)break e;for(;k.sibling===null;){if(k.return===null||k.return===t)break e;m===k&&(m=null),k=k.return}m===k&&(m=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Ts(e,t),Xs(t),n&4&&uv(t);break;case 21:break;default:Ts(e,t),Xs(t)}}function Xs(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(A4(i)){var n=i;break e}i=i.return}throw Error(We(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Yh(s,""),n.flags&=-33);var a=cv(t);lm(t,a,s);break;case 3:case 4:var l=n.stateNode.containerInfo,p=cv(t);om(t,p,l);break;default:throw Error(We(161))}}catch(f){Ai(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function i8(t,e,i){rt=t,F4(t)}function F4(t,e,i){for(var n=(t.mode&1)!==0;rt!==null;){var s=rt,a=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||wu;if(!l){var p=s.alternate,f=p!==null&&p.memoizedState!==null||Cn;p=wu;var g=Cn;if(wu=l,(Cn=f)&&!g)for(rt=s;rt!==null;)l=rt,f=l.child,l.tag===22&&l.memoizedState!==null?fv(s):f!==null?(f.return=l,rt=f):fv(s);for(;a!==null;)rt=a,F4(a),a=a.sibling;rt=s,wu=p,Cn=g}dv(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,rt=a):dv(t)}}function dv(t){for(;rt!==null;){var e=rt;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||M0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Cn)if(i===null)n.componentDidMount();else{var s=e.elementType===e.type?i.memoizedProps:Ps(e.type,i.memoizedProps);n.componentDidUpdate(s,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Qy(e,a,n);break;case 3:var l=e.updateQueue;if(l!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}Qy(e,l,i)}break;case 5:var p=e.stateNode;if(i===null&&e.flags&4){i=p;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&i.focus();break;case"img":f.src&&(i.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var m=g.memoizedState;if(m!==null){var k=m.dehydrated;k!==null&&Kh(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(We(163))}Cn||e.flags&512&&am(e)}catch(T){Ai(e,e.return,T)}}if(e===t){rt=null;break}if(i=e.sibling,i!==null){i.return=e.return,rt=i;break}rt=e.return}}function pv(t){for(;rt!==null;){var e=rt;if(e===t){rt=null;break}var i=e.sibling;if(i!==null){i.return=e.return,rt=i;break}rt=e.return}}function fv(t){for(;rt!==null;){var e=rt;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{M0(4,e)}catch(f){Ai(e,i,f)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(f){Ai(e,s,f)}}var a=e.return;try{am(e)}catch(f){Ai(e,a,f)}break;case 5:var l=e.return;try{am(e)}catch(f){Ai(e,l,f)}}}catch(f){Ai(e,e.return,f)}if(e===t){rt=null;break}var p=e.sibling;if(p!==null){p.return=e.return,rt=p;break}rt=e.return}}var n8=Math.ceil,Ad=Br.ReactCurrentDispatcher,sg=Br.ReactCurrentOwner,bs=Br.ReactCurrentBatchConfig,Yt=0,on=null,$i=null,mn=0,es=0,Wo=xa(0),Ui=0,ac=null,Ja=0,P0=0,rg=0,Dh=null,zn=null,ag=0,cl=1/0,dr=null,Dd=!1,hm=null,Jr=null,_u=!1,Hr=null,Id=0,Ih=0,cm=null,Uu=-1,Gu=0;function Bn(){return Yt&6?Ni():Uu!==-1?Uu:Uu=Ni()}function qr(t){return t.mode&1?Yt&2&&mn!==0?mn&-mn:j6.transition!==null?(Gu===0&&(Gu=gC()),Gu):(t=qt,t!==0||(t=window.event,t=t===void 0?16:SC(t.type)),t):1}function Ns(t,e,i,n){if(50<Ih)throw Ih=0,cm=null,Error(We(185));Ec(t,i,n),(!(Yt&2)||t!==on)&&(t===on&&(!(Yt&2)&&(P0|=i),Ui===4&&zr(t,mn)),Kn(t,n),i===1&&Yt===0&&!(e.mode&1)&&(cl=Ni()+500,S0&&ma()))}function Kn(t,e){var i=t.callbackNode;jM(t,e);var n=xd(t,t===on?mn:0);if(n===0)i!==null&&Cy(i),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(i!=null&&Cy(i),e===1)t.tag===0?O6(xv.bind(null,t)):$C(xv.bind(null,t)),L6(function(){!(Yt&6)&&ma()}),i=null;else{switch(yC(n)){case 1:i=I1;break;case 4:i=xC;break;case 16:i=fd;break;case 536870912:i=mC;break;default:i=fd}i=W4(i,B4.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function B4(t,e){if(Uu=-1,Gu=0,Yt&6)throw Error(We(327));var i=t.callbackNode;if(Zo()&&t.callbackNode!==i)return null;var n=xd(t,t===on?mn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Fd(t,n);else{e=n;var s=Yt;Yt|=2;var a=N4();(on!==t||mn!==e)&&(dr=null,cl=Ni()+500,$a(t,e));do try{a8();break}catch(p){L4(t,p)}while(!0);Y1(),Ad.current=a,Yt=s,$i!==null?e=0:(on=null,mn=0,e=Ui)}if(e!==0){if(e===2&&(s=Rx(t),s!==0&&(n=s,e=um(t,s))),e===1)throw i=ac,$a(t,0),zr(t,n),Kn(t,Ni()),i;if(e===6)zr(t,n);else{if(s=t.current.alternate,!(n&30)&&!s8(s)&&(e=Fd(t,n),e===2&&(a=Rx(t),a!==0&&(n=a,e=um(t,a))),e===1))throw i=ac,$a(t,0),zr(t,n),Kn(t,Ni()),i;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(We(345));case 2:Ea(t,zn,dr);break;case 3:if(zr(t,n),(n&130023424)===n&&(e=ag+500-Ni(),10<e)){if(xd(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Bn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yx(Ea.bind(null,t,zn,dr),e);break}Ea(t,zn,dr);break;case 4:if(zr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var l=31-Ls(n);a=1<<l,l=e[l],l>s&&(s=l),n&=~a}if(n=s,n=Ni()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*n8(n/1960))-n,10<n){t.timeoutHandle=Yx(Ea.bind(null,t,zn,dr),n);break}Ea(t,zn,dr);break;case 5:Ea(t,zn,dr);break;default:throw Error(We(329))}}}return Kn(t,Ni()),t.callbackNode===i?B4.bind(null,t):null}function um(t,e){var i=Dh;return t.current.memoizedState.isDehydrated&&($a(t,e).flags|=256),t=Fd(t,e),t!==2&&(e=zn,zn=i,e!==null&&dm(e)),t}function dm(t){zn===null?zn=t:zn.push.apply(zn,t)}function s8(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var n=0;n<i.length;n++){var s=i[n],a=s.getSnapshot;s=s.value;try{if(!Ws(a(),s))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zr(t,e){for(e&=~rg,e&=~P0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-Ls(e),n=1<<i;t[i]=-1,e&=~n}}function xv(t){if(Yt&6)throw Error(We(327));Zo();var e=xd(t,0);if(!(e&1))return Kn(t,Ni()),null;var i=Fd(t,e);if(t.tag!==0&&i===2){var n=Rx(t);n!==0&&(e=n,i=um(t,n))}if(i===1)throw i=ac,$a(t,0),zr(t,e),Kn(t,Ni()),i;if(i===6)throw Error(We(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ea(t,zn,dr),Kn(t,Ni()),null}function og(t,e){var i=Yt;Yt|=1;try{return t(e)}finally{Yt=i,Yt===0&&(cl=Ni()+500,S0&&ma())}}function qa(t){Hr!==null&&Hr.tag===0&&!(Yt&6)&&Zo();var e=Yt;Yt|=1;var i=bs.transition,n=qt;try{if(bs.transition=null,qt=1,t)return t()}finally{qt=n,bs.transition=i,Yt=e,!(Yt&6)&&ma()}}function lg(){es=Wo.current,mi(Wo)}function $a(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,B6(i)),$i!==null)for(i=$i.return;i!==null;){var n=i;switch(z1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bd();break;case 3:ll(),mi(Un),mi(Dn),Z1();break;case 5:Q1(n);break;case 4:ll();break;case 13:mi(Ci);break;case 19:mi(Ci);break;case 10:X1(n.type._context);break;case 22:case 23:lg()}i=i.return}if(on=t,$i=t=ea(t.current,null),mn=es=e,Ui=0,ac=null,rg=P0=Ja=0,zn=Dh=null,La!==null){for(e=0;e<La.length;e++)if(i=La[e],n=i.interleaved,n!==null){i.interleaved=null;var s=n.next,a=i.pending;if(a!==null){var l=a.next;a.next=s,n.next=l}i.pending=n}La=null}return t}function L4(t,e){do{var i=$i;try{if(Y1(),Hu.current=Ed,Pd){for(var n=Si.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Pd=!1}if(Za=0,nn=Xi=Si=null,Eh=!1,nc=0,sg.current=null,i===null||i.return===null){Ui=1,ac=e,$i=null;break}e:{var a=t,l=i.return,p=i,f=e;if(e=mn,p.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var g=f,m=p,k=m.tag;if(!(m.mode&1)&&(k===0||k===11||k===15)){var T=m.alternate;T?(m.updateQueue=T.updateQueue,m.memoizedState=T.memoizedState,m.lanes=T.lanes):(m.updateQueue=null,m.memoizedState=null)}var A=iv(l);if(A!==null){A.flags&=-257,nv(A,l,p,a,e),A.mode&1&&tv(a,g,e),e=A,f=g;var P=e.updateQueue;if(P===null){var L=new Set;L.add(f),e.updateQueue=L}else P.add(f);break e}else{if(!(e&1)){tv(a,g,e),hg();break e}f=Error(We(426))}}else if(bi&&p.mode&1){var W=iv(l);if(W!==null){!(W.flags&65536)&&(W.flags|=256),nv(W,l,p,a,e),$1(hl(f,p));break e}}a=f=hl(f,p),Ui!==4&&(Ui=2),Dh===null?Dh=[a]:Dh.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var N=y4(a,f,e);Ky(a,N);break e;case 1:p=f;var M=a.type,B=a.stateNode;if(!(a.flags&128)&&(typeof M.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Jr===null||!Jr.has(B)))){a.flags|=65536,e&=-e,a.lanes|=e;var z=v4(a,p,e);Ky(a,z);break e}}a=a.return}while(a!==null)}V4(i)}catch(G){e=G,$i===i&&i!==null&&($i=i=i.return);continue}break}while(!0)}function N4(){var t=Ad.current;return Ad.current=Ed,t===null?Ed:t}function hg(){(Ui===0||Ui===3||Ui===2)&&(Ui=4),on===null||!(Ja&268435455)&&!(P0&268435455)||zr(on,mn)}function Fd(t,e){var i=Yt;Yt|=2;var n=N4();(on!==t||mn!==e)&&(dr=null,$a(t,e));do try{r8();break}catch(s){L4(t,s)}while(!0);if(Y1(),Yt=i,Ad.current=n,$i!==null)throw Error(We(261));return on=null,mn=0,Ui}function r8(){for(;$i!==null;)R4($i)}function a8(){for(;$i!==null&&!DM();)R4($i)}function R4(t){var e=j4(t.alternate,t,es);t.memoizedProps=t.pendingProps,e===null?V4(t):$i=e,sg.current=null}function V4(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&32768){if(i=q6(i,e),i!==null){i.flags&=32767,$i=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ui=6,$i=null;return}}else if(i=J6(i,e,es),i!==null){$i=i;return}if(e=e.sibling,e!==null){$i=e;return}$i=e=t}while(e!==null);Ui===0&&(Ui=5)}function Ea(t,e,i){var n=qt,s=bs.transition;try{bs.transition=null,qt=1,o8(t,e,i,n)}finally{bs.transition=s,qt=n}return null}function o8(t,e,i,n){do Zo();while(Hr!==null);if(Yt&6)throw Error(We(327));i=t.finishedWork;var s=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(We(177));t.callbackNode=null,t.callbackPriority=0;var a=i.lanes|i.childLanes;if(WM(t,a),t===on&&($i=on=null,mn=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||_u||(_u=!0,W4(fd,function(){return Zo(),null})),a=(i.flags&15990)!==0,i.subtreeFlags&15990||a){a=bs.transition,bs.transition=null;var l=qt;qt=1;var p=Yt;Yt|=4,sg.current=null,t8(t,i),I4(i,t),M6($x),md=!!zx,$x=zx=null,t.current=i,i8(i),IM(),Yt=p,qt=l,bs.transition=a}else t.current=i;if(_u&&(_u=!1,Hr=t,Id=s),a=t.pendingLanes,a===0&&(Jr=null),LM(i.stateNode),Kn(t,Ni()),e!==null)for(n=t.onRecoverableError,i=0;i<e.length;i++)s=e[i],n(s.value,{componentStack:s.stack,digest:s.digest});if(Dd)throw Dd=!1,t=hm,hm=null,t;return Id&1&&t.tag!==0&&Zo(),a=t.pendingLanes,a&1?t===cm?Ih++:(Ih=0,cm=t):Ih=0,ma(),null}function Zo(){if(Hr!==null){var t=yC(Id),e=bs.transition,i=qt;try{if(bs.transition=null,qt=16>t?16:t,Hr===null)var n=!1;else{if(t=Hr,Hr=null,Id=0,Yt&6)throw Error(We(331));var s=Yt;for(Yt|=4,rt=t.current;rt!==null;){var a=rt,l=a.child;if(rt.flags&16){var p=a.deletions;if(p!==null){for(var f=0;f<p.length;f++){var g=p[f];for(rt=g;rt!==null;){var m=rt;switch(m.tag){case 0:case 11:case 15:Ah(8,m,a)}var k=m.child;if(k!==null)k.return=m,rt=k;else for(;rt!==null;){m=rt;var T=m.sibling,A=m.return;if(E4(m),m===g){rt=null;break}if(T!==null){T.return=A,rt=T;break}rt=A}}}var P=a.alternate;if(P!==null){var L=P.child;if(L!==null){P.child=null;do{var W=L.sibling;L.sibling=null,L=W}while(L!==null)}}rt=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,rt=l;else e:for(;rt!==null;){if(a=rt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ah(9,a,a.return)}var N=a.sibling;if(N!==null){N.return=a.return,rt=N;break e}rt=a.return}}var M=t.current;for(rt=M;rt!==null;){l=rt;var B=l.child;if(l.subtreeFlags&2064&&B!==null)B.return=l,rt=B;else e:for(l=M;rt!==null;){if(p=rt,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:M0(9,p)}}catch(G){Ai(p,p.return,G)}if(p===l){rt=null;break e}var z=p.sibling;if(z!==null){z.return=p.return,rt=z;break e}rt=p.return}}if(Yt=s,ma(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(v0,t)}catch{}n=!0}return n}finally{qt=i,bs.transition=e}}return!1}function mv(t,e,i){e=hl(i,e),e=y4(t,e,1),t=Zr(t,e,1),e=Bn(),t!==null&&(Ec(t,1,e),Kn(t,e))}function Ai(t,e,i){if(t.tag===3)mv(t,t,i);else for(;e!==null;){if(e.tag===3){mv(e,t,i);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Jr===null||!Jr.has(n))){t=hl(i,t),t=v4(e,t,1),e=Zr(e,t,1),t=Bn(),e!==null&&(Ec(e,1,t),Kn(e,t));break}}e=e.return}}function l8(t,e,i){var n=t.pingCache;n!==null&&n.delete(e),e=Bn(),t.pingedLanes|=t.suspendedLanes&i,on===t&&(mn&i)===i&&(Ui===4||Ui===3&&(mn&130023424)===mn&&500>Ni()-ag?$a(t,0):rg|=i),Kn(t,e)}function O4(t,e){e===0&&(t.mode&1?(e=du,du<<=1,!(du&130023424)&&(du=4194304)):e=1);var i=Bn();t=Tr(t,e),t!==null&&(Ec(t,e,i),Kn(t,i))}function h8(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),O4(t,i)}function c8(t,e){var i=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(i=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(We(314))}n!==null&&n.delete(e),O4(t,i)}var j4;j4=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||Un.current)Hn=!0;else{if(!(t.lanes&i)&&!(e.flags&128))return Hn=!1,Z6(t,e,i);Hn=!!(t.flags&131072)}else Hn=!1,bi&&e.flags&1048576&&HC(e,Cd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Xu(t,e),t=e.pendingProps;var s=rl(e,Dn.current);Qo(e,i),s=q1(null,e,n,t,s,i);var a=eg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gn(n)?(a=!0,wd(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,G1(e),s.updater=T0,e.stateNode=s,s._reactInternals=e,Jx(e,n,t,i),e=tm(null,e,n,!0,a,i)):(e.tag=0,bi&&a&&W1(e),In(null,e,s,i),e=e.child),e;case 16:n=e.elementType;e:{switch(Xu(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=d8(n),t=Ps(n,t),s){case 0:e=em(null,e,n,t,i);break e;case 1:e=av(null,e,n,t,i);break e;case 11:e=sv(null,e,n,t,i);break e;case 14:e=rv(null,e,n,Ps(n.type,t),i);break e}throw Error(We(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ps(n,s),em(t,e,n,s,i);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ps(n,s),av(t,e,n,s,i);case 3:e:{if(C4(e),t===null)throw Error(We(387));n=e.pendingProps,a=e.memoizedState,s=a.element,QC(t,e),Td(e,n,null,i);var l=e.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=hl(Error(We(423)),e),e=ov(t,e,n,i,s);break e}else if(n!==s){s=hl(Error(We(424)),e),e=ov(t,e,n,i,s);break e}else for(is=Qr(e.stateNode.containerInfo.firstChild),ss=e,bi=!0,Ds=null,i=GC(e,null,n,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(al(),n===s){e=Mr(t,e,i);break e}In(t,e,n,i)}e=e.child}return e;case 5:return ZC(e),t===null&&Kx(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,l=s.children,Hx(n,s)?l=null:a!==null&&Hx(n,a)&&(e.flags|=32),_4(t,e),In(t,e,l,i),e.child;case 6:return t===null&&Kx(e),null;case 13:return S4(t,e,i);case 4:return K1(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ol(e,null,n,i):In(t,e,n,i),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ps(n,s),sv(t,e,n,s,i);case 7:return In(t,e,e.pendingProps,i),e.child;case 8:return In(t,e,e.pendingProps.children,i),e.child;case 12:return In(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,l=s.value,hi(Sd,n._currentValue),n._currentValue=l,a!==null)if(Ws(a.value,l)){if(a.children===s.children&&!Un.current){e=Mr(t,e,i);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var p=a.dependencies;if(p!==null){l=a.child;for(var f=p.firstContext;f!==null;){if(f.context===n){if(a.tag===1){f=br(-1,i&-i),f.tag=2;var g=a.updateQueue;if(g!==null){g=g.shared;var m=g.pending;m===null?f.next=f:(f.next=m.next,m.next=f),g.pending=f}}a.lanes|=i,f=a.alternate,f!==null&&(f.lanes|=i),Qx(a.return,i,e),p.lanes|=i;break}f=f.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(We(341));l.lanes|=i,p=l.alternate,p!==null&&(p.lanes|=i),Qx(l,i,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}In(t,e,s.children,i),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Qo(e,i),s=ws(s),n=n(s),e.flags|=1,In(t,e,n,i),e.child;case 14:return n=e.type,s=Ps(n,e.pendingProps),s=Ps(n.type,s),rv(t,e,n,s,i);case 15:return b4(t,e,e.type,e.pendingProps,i);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ps(n,s),Xu(t,e),e.tag=1,Gn(n)?(t=!0,wd(e)):t=!1,Qo(e,i),g4(e,n,s),Jx(e,n,s,i),tm(null,e,n,!0,t,i);case 19:return k4(t,e,i);case 22:return w4(t,e,i)}throw Error(We(156,e.tag))};function W4(t,e){return fC(t,e)}function u8(t,e,i,n){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ys(t,e,i,n){return new u8(t,e,i,n)}function cg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function d8(t){if(typeof t=="function")return cg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===E1)return 11;if(t===A1)return 14}return 2}function ea(t,e){var i=t.alternate;return i===null?(i=ys(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Ku(t,e,i,n,s,a){var l=2;if(n=t,typeof t=="function")cg(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Do:return Ha(i.children,s,a,e);case P1:l=8,s|=8;break;case _x:return t=ys(12,i,e,s|2),t.elementType=_x,t.lanes=a,t;case Cx:return t=ys(13,i,e,s),t.elementType=Cx,t.lanes=a,t;case Sx:return t=ys(19,i,e,s),t.elementType=Sx,t.lanes=a,t;case Z_:return E0(i,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K_:l=10;break e;case Q_:l=9;break e;case E1:l=11;break e;case A1:l=14;break e;case Or:l=16,n=null;break e}throw Error(We(130,t==null?t:typeof t,""))}return e=ys(l,i,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function Ha(t,e,i,n){return t=ys(7,t,n,e),t.lanes=i,t}function E0(t,e,i,n){return t=ys(22,t,n,e),t.elementType=Z_,t.lanes=i,t.stateNode={isHidden:!1},t}function of(t,e,i){return t=ys(6,t,null,e),t.lanes=i,t}function lf(t,e,i){return e=ys(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function p8(t,e,i,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wp(0),this.expirationTimes=Wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ug(t,e,i,n,s,a,l,p,f){return t=new p8(t,e,i,p,f),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ys(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},G1(a),t}function f8(t,e,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ao,key:n==null?null:""+n,children:t,containerInfo:e,implementation:i}}function z4(t){if(!t)return la;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(We(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(We(171))}if(t.tag===1){var i=t.type;if(Gn(i))return zC(t,i,e)}return e}function $4(t,e,i,n,s,a,l,p,f){return t=ug(i,n,!0,t,s,a,l,p,f),t.context=z4(null),i=t.current,n=Bn(),s=qr(i),a=br(n,s),a.callback=e??null,Zr(i,a,s),t.current.lanes=s,Ec(t,s,n),Kn(t,n),t}function A0(t,e,i,n){var s=e.current,a=Bn(),l=qr(s);return i=z4(i),e.context===null?e.context=i:e.pendingContext=i,e=br(a,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Zr(s,e,l),t!==null&&(Ns(t,s,l,a),$u(t,s,l)),l}function Bd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function dg(t,e){gv(t,e),(t=t.alternate)&&gv(t,e)}function x8(){return null}var H4=typeof reportError=="function"?reportError:function(t){console.error(t)};function pg(t){this._internalRoot=t}D0.prototype.render=pg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(We(409));A0(t,e,null,null)};D0.prototype.unmount=pg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qa(function(){A0(null,t,null,null)}),e[kr]=null}};function D0(t){this._internalRoot=t}D0.prototype.unstable_scheduleHydration=function(t){if(t){var e=wC();t={blockedOn:null,target:t,priority:e};for(var i=0;i<Wr.length&&e!==0&&e<Wr[i].priority;i++);Wr.splice(i,0,t),i===0&&CC(t)}};function fg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function I0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yv(){}function m8(t,e,i,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var g=Bd(l);a.call(g)}}var l=$4(e,n,t,0,null,!1,!1,"",yv);return t._reactRootContainer=l,t[kr]=l.current,Jh(t.nodeType===8?t.parentNode:t),qa(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var p=n;n=function(){var g=Bd(f);p.call(g)}}var f=ug(t,0,!1,null,null,!1,!1,"",yv);return t._reactRootContainer=f,t[kr]=f.current,Jh(t.nodeType===8?t.parentNode:t),qa(function(){A0(e,f,i,n)}),f}function F0(t,e,i,n,s){var a=i._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var p=s;s=function(){var f=Bd(l);p.call(f)}}A0(e,l,t,s)}else l=m8(i,e,t,s,n);return Bd(l)}vC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=xh(e.pendingLanes);i!==0&&(F1(e,i|1),Kn(e,Ni()),!(Yt&6)&&(cl=Ni()+500,ma()))}break;case 13:qa(function(){var n=Tr(t,1);if(n!==null){var s=Bn();Ns(n,t,1,s)}}),dg(t,1)}};B1=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var i=Bn();Ns(e,t,134217728,i)}dg(t,134217728)}};bC=function(t){if(t.tag===13){var e=qr(t),i=Tr(t,e);if(i!==null){var n=Bn();Ns(i,t,e,n)}dg(t,e)}};wC=function(){return qt};_C=function(t,e){var i=qt;try{return qt=t,e()}finally{qt=i}};Bx=function(t,e,i){switch(e){case"input":if(Mx(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var n=i[e];if(n!==t&&n.form===t.form){var s=C0(n);if(!s)throw Error(We(90));q_(n),Mx(n,s)}}}break;case"textarea":tC(t,i);break;case"select":e=i.value,e!=null&&Xo(t,!!i.multiple,e,!1)}};lC=og;hC=qa;var g8={usingClientEntryPoint:!1,Events:[Dc,Lo,C0,aC,oC,og]},nh={findFiberByHostInstance:Ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y8={bundleType:nh.bundleType,version:nh.version,rendererPackageName:nh.rendererPackageName,rendererConfig:nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Br.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dC(t),t===null?null:t.stateNode},findFiberByHostInstance:nh.findFiberByHostInstance||x8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{v0=Cu.inject(y8),ir=Cu}catch{}}ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g8;ds.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fg(e))throw Error(We(200));return f8(t,e,null,i)};ds.createRoot=function(t,e){if(!fg(t))throw Error(We(299));var i=!1,n="",s=H4;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ug(t,1,!1,null,null,i,!1,n,s),t[kr]=e.current,Jh(t.nodeType===8?t.parentNode:t),new pg(e)};ds.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(We(188)):(t=Object.keys(t).join(","),Error(We(268,t)));return t=dC(e),t=t===null?null:t.stateNode,t};ds.flushSync=function(t){return qa(t)};ds.hydrate=function(t,e,i){if(!I0(e))throw Error(We(200));return F0(null,t,e,!0,i)};ds.hydrateRoot=function(t,e,i){if(!fg(t))throw Error(We(405));var n=i!=null&&i.hydratedSources||null,s=!1,a="",l=H4;if(i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onRecoverableError!==void 0&&(l=i.onRecoverableError)),e=$4(e,null,t,1,i??null,s,!1,a,l),t[kr]=e.current,Jh(t),n)for(t=0;t<n.length;t++)i=n[t],s=i._getVersion,s=s(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,s]:e.mutableSourceEagerHydrationData.push(i,s);return new D0(e)};ds.render=function(t,e,i){if(!I0(e))throw Error(We(200));return F0(null,t,e,!1,i)};ds.unmountComponentAtNode=function(t){if(!I0(t))throw Error(We(40));return t._reactRootContainer?(qa(function(){F0(null,null,t,!1,function(){t._reactRootContainer=null,t[kr]=null})}),!0):!1};ds.unstable_batchedUpdates=og;ds.unstable_renderSubtreeIntoContainer=function(t,e,i,n){if(!I0(i))throw Error(We(200));if(t==null||t._reactInternals===void 0)throw Error(We(38));return F0(t,e,i,!1,n)};ds.version="18.3.1-next-f1338f8080-20240426";function Y4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y4)}catch(t){console.error(t)}}Y4(),Y_.exports=ds;var xg=Y_.exports;const v8=b1(xg),b8=F_({__proto__:null,default:v8},[xg]);var X4,vv=xg;X4=vv.createRoot,vv.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vi(){return vi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},vi.apply(this,arguments)}var ji;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ji||(ji={}));const bv="popstate";function w8(t){t===void 0&&(t={});function e(n,s){let{pathname:a,search:l,hash:p}=n.location;return oc("",{pathname:a,search:l,hash:p},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function i(n,s){return typeof s=="string"?s:eo(s)}return C8(e,i,null,t)}function Bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ul(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _8(){return Math.random().toString(36).substr(2,8)}function wv(t,e){return{usr:t.state,key:t.key,idx:e}}function oc(t,e,i,n){return i===void 0&&(i=null),vi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ga(e):e,{state:i,key:e&&e.key||n||_8()})}function eo(t){let{pathname:e="/",search:i="",hash:n=""}=t;return i&&i!=="?"&&(e+=i.charAt(0)==="?"?i:"?"+i),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ga(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substr(i),t=t.substr(0,i));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function C8(t,e,i,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,p=ji.Pop,f=null,g=m();g==null&&(g=0,l.replaceState(vi({},l.state,{idx:g}),""));function m(){return(l.state||{idx:null}).idx}function k(){p=ji.Pop;let W=m(),N=W==null?null:W-g;g=W,f&&f({action:p,location:L.location,delta:N})}function T(W,N){p=ji.Push;let M=oc(L.location,W,N);g=m()+1;let B=wv(M,g),z=L.createHref(M);try{l.pushState(B,"",z)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;s.location.assign(z)}a&&f&&f({action:p,location:L.location,delta:1})}function A(W,N){p=ji.Replace;let M=oc(L.location,W,N);g=m();let B=wv(M,g),z=L.createHref(M);l.replaceState(B,"",z),a&&f&&f({action:p,location:L.location,delta:0})}function P(W){let N=s.location.origin!=="null"?s.location.origin:s.location.href,M=typeof W=="string"?W:eo(W);return M=M.replace(/ $/,"%20"),Bt(N,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,N)}let L={get action(){return p},get location(){return t(s,l)},listen(W){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(bv,k),f=W,()=>{s.removeEventListener(bv,k),f=null}},createHref(W){return e(s,W)},createURL:P,encodeLocation(W){let N=P(W);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:T,replace:A,go(W){return l.go(W)}};return L}var si;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(si||(si={}));const S8=new Set(["lazy","caseSensitive","path","id","index","children"]);function k8(t){return t.index===!0}function Ld(t,e,i,n){return i===void 0&&(i=[]),n===void 0&&(n={}),t.map((s,a)=>{let l=[...i,String(a)],p=typeof s.id=="string"?s.id:l.join("-");if(Bt(s.index!==!0||!s.children,"Cannot specify children on an index route"),Bt(!n[p],'Found a route id collision on id "'+p+`".  Route id's must be globally unique within Data Router usages`),k8(s)){let f=vi({},s,e(s),{id:p});return n[p]=f,f}else{let f=vi({},s,e(s),{id:p,children:void 0});return n[p]=f,s.children&&(f.children=Ld(s.children,e,l,n)),f}})}function Ia(t,e,i){return i===void 0&&(i="/"),Qu(t,e,i,!1)}function Qu(t,e,i,n){let s=typeof e=="string"?ga(e):e,a=Pr(s.pathname||"/",i);if(a==null)return null;let l=U4(t);M8(l);let p=null;for(let f=0;p==null&&f<l.length;++f){let g=V8(a);p=N8(l[f],g,n)}return p}function T8(t,e){let{route:i,pathname:n,params:s}=t;return{id:i.id,pathname:n,params:s,data:e[i.id],handle:i.handle}}function U4(t,e,i,n){e===void 0&&(e=[]),i===void 0&&(i=[]),n===void 0&&(n="");let s=(a,l,p)=>{let f={relativePath:p===void 0?a.path||"":p,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(Bt(f.relativePath.startsWith(n),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(n.length));let g=wr([n,f.relativePath]),m=i.concat(f);a.children&&a.children.length>0&&(Bt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),U4(a.children,e,m,g)),!(a.path==null&&!a.index)&&e.push({path:g,score:B8(g,a.index),routesMeta:m})};return t.forEach((a,l)=>{var p;if(a.path===""||!((p=a.path)!=null&&p.includes("?")))s(a,l);else for(let f of G4(a.path))s(a,l,f)}),e}function G4(t){let e=t.split("/");if(e.length===0)return[];let[i,...n]=e,s=i.endsWith("?"),a=i.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=G4(n.join("/")),p=[];return p.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&p.push(...l),p.map(f=>t.startsWith("/")&&f===""?"/":f)}function M8(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:L8(e.routesMeta.map(n=>n.childrenIndex),i.routesMeta.map(n=>n.childrenIndex)))}const P8=/^:[\w-]+$/,E8=3,A8=2,D8=1,I8=10,F8=-2,_v=t=>t==="*";function B8(t,e){let i=t.split("/"),n=i.length;return i.some(_v)&&(n+=F8),e&&(n+=A8),i.filter(s=>!_v(s)).reduce((s,a)=>s+(P8.test(a)?E8:a===""?D8:I8),n)}function L8(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function N8(t,e,i){i===void 0&&(i=!1);let{routesMeta:n}=t,s={},a="/",l=[];for(let p=0;p<n.length;++p){let f=n[p],g=p===n.length-1,m=a==="/"?e:e.slice(a.length)||"/",k=Nd({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},m),T=f.route;if(!k&&g&&i&&!n[n.length-1].route.index&&(k=Nd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!k)return null;Object.assign(s,k.params),l.push({params:s,pathname:wr([a,k.pathname]),pathnameBase:W8(wr([a,k.pathnameBase])),route:T}),k.pathnameBase!=="/"&&(a=wr([a,k.pathnameBase]))}return l}function Nd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,n]=R8(t.path,t.caseSensitive,t.end),s=e.match(i);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),p=s.slice(1);return{params:n.reduce((g,m,k)=>{let{paramName:T,isOptional:A}=m;if(T==="*"){let L=p[k]||"";l=a.slice(0,a.length-L.length).replace(/(.)\/+$/,"$1")}const P=p[k];return A&&!P?g[T]=void 0:g[T]=(P||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:l,pattern:t}}function R8(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!0),ul(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,p,f)=>(n.push({paramName:p,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function V8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ul(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,n=t.charAt(i);return n&&n!=="/"?null:t.slice(i)||"/"}function O8(t,e){e===void 0&&(e="/");let{pathname:i,search:n="",hash:s=""}=typeof t=="string"?ga(t):t;return{pathname:i?i.startsWith("/")?i:j8(i,e):e,search:z8(n),hash:$8(s)}}function j8(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function hf(t,e,i,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function K4(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function mg(t,e){let i=K4(t);return e?i.map((n,s)=>s===i.length-1?n.pathname:n.pathnameBase):i.map(n=>n.pathnameBase)}function gg(t,e,i,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=ga(t):(s=vi({},t),Bt(!s.pathname||!s.pathname.includes("?"),hf("?","pathname","search",s)),Bt(!s.pathname||!s.pathname.includes("#"),hf("#","pathname","hash",s)),Bt(!s.search||!s.search.includes("#"),hf("#","search","hash",s)));let a=t===""||s.pathname==="",l=a?"/":s.pathname,p;if(l==null)p=i;else{let k=e.length-1;if(!n&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),k-=1;s.pathname=T.join("/")}p=k>=0?e[k]:"/"}let f=O8(s,p),g=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&i.endsWith("/");return!f.pathname.endsWith("/")&&(g||m)&&(f.pathname+="/"),f}const wr=t=>t.join("/").replace(/\/\/+/g,"/"),W8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),z8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Rd{constructor(e,i,n,s){s===void 0&&(s=!1),this.status=e,this.statusText=i||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function B0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Q4=["post","put","patch","delete"],H8=new Set(Q4),Y8=["get",...Q4],X8=new Set(Y8),U8=new Set([301,302,303,307,308]),G8=new Set([307,308]),cf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},K8={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},yg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q8=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Z4="remix-router-transitions";function Z8(t){const e=t.window?t.window:typeof window<"u"?window:void 0,i=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",n=!i;Bt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let re=t.detectErrorBoundary;s=pe=>({hasErrorBoundary:re(pe)})}else s=Q8;let a={},l=Ld(t.routes,s,void 0,a),p,f=t.basename||"/",g=t.dataStrategy||tP,m=t.patchRoutesOnNavigation,k=vi({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),T=null,A=new Set,P=null,L=null,W=null,N=t.hydrationData!=null,M=Ia(l,t.history.location,f),B=null;if(M==null&&!m){let re=Wn(404,{pathname:t.history.location.pathname}),{matches:pe,route:ye}=Fv(l);M=pe,B={[ye.id]:re}}M&&!t.hydrationData&&ot(M,l,t.history.location.pathname).active&&(M=null);let z;if(M)if(M.some(re=>re.route.lazy))z=!1;else if(!M.some(re=>re.route.loader))z=!0;else if(k.v7_partialHydration){let re=t.hydrationData?t.hydrationData.loaderData:null,pe=t.hydrationData?t.hydrationData.errors:null;if(pe){let ye=M.findIndex(xe=>pe[xe.route.id]!==void 0);z=M.slice(0,ye+1).every(xe=>!fm(xe.route,re,pe))}else z=M.every(ye=>!fm(ye.route,re,pe))}else z=t.hydrationData!=null;else if(z=!1,M=[],k.v7_partialHydration){let re=ot(null,l,t.history.location.pathname);re.active&&re.matches&&(M=re.matches)}let G,R={historyAction:t.history.action,location:t.history.location,matches:M,initialized:z,navigation:cf,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||B,fetchers:new Map,blockers:new Map},U=ji.Pop,K=!1,ae,Q=!1,se=new Map,ge=null,ue=!1,Le=!1,Oe=[],Ue=new Set,tt=new Map,Pe=0,Ne=-1,Be=new Map,X=new Set,_e=new Map,me=new Map,$=new Set,oe=new Map,fe=new Map,ve;function Se(){if(T=t.history.listen(re=>{let{action:pe,location:ye,delta:xe}=re;if(ve){ve(),ve=void 0;return}ul(fe.size===0||xe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ve=Z({currentLocation:R.location,nextLocation:ye,historyAction:pe});if(Ve&&xe!=null){let r=new Promise(d=>{ve=d});t.history.go(xe*-1),j(Ve,{state:"blocked",location:ye,proceed(){j(Ve,{state:"proceeding",proceed:void 0,reset:void 0,location:ye}),r.then(()=>t.history.go(xe))},reset(){let d=new Map(R.blockers);d.set(Ve,sh),st({blockers:d})}});return}return ze(pe,ye)}),i){xP(e,se);let re=()=>mP(e,se);e.addEventListener("pagehide",re),ge=()=>e.removeEventListener("pagehide",re)}return R.initialized||ze(ji.Pop,R.location,{initialHydration:!0}),G}function Ee(){T&&T(),ge&&ge(),A.clear(),ae&&ae.abort(),R.fetchers.forEach((re,pe)=>fs(pe)),R.blockers.forEach((re,pe)=>F(pe))}function it(re){return A.add(re),()=>A.delete(re)}function st(re,pe){pe===void 0&&(pe={}),R=vi({},R,re);let ye=[],xe=[];k.v7_fetcherPersist&&R.fetchers.forEach((Ve,r)=>{Ve.state==="idle"&&($.has(r)?xe.push(r):ye.push(r))}),[...A].forEach(Ve=>Ve(R,{deletedFetchers:xe,viewTransitionOpts:pe.viewTransitionOpts,flushSync:pe.flushSync===!0})),k.v7_fetcherPersist&&(ye.forEach(Ve=>R.fetchers.delete(Ve)),xe.forEach(Ve=>fs(Ve)))}function mt(re,pe,ye){var xe,Ve;let{flushSync:r}=ye===void 0?{}:ye,d=R.actionData!=null&&R.navigation.formMethod!=null&&As(R.navigation.formMethod)&&R.navigation.state==="loading"&&((xe=re.state)==null?void 0:xe._isRedirect)!==!0,h;pe.actionData?Object.keys(pe.actionData).length>0?h=pe.actionData:h=null:d?h=R.actionData:h=null;let o=pe.loaderData?Dv(R.loaderData,pe.loaderData,pe.matches||[],pe.errors):R.loaderData,c=R.blockers;c.size>0&&(c=new Map(c),c.forEach((S,E)=>c.set(E,sh)));let x=K===!0||R.navigation.formMethod!=null&&As(R.navigation.formMethod)&&((Ve=re.state)==null?void 0:Ve._isRedirect)!==!0;p&&(l=p,p=void 0),ue||U===ji.Pop||(U===ji.Push?t.history.push(re,re.state):U===ji.Replace&&t.history.replace(re,re.state));let y;if(U===ji.Pop){let S=se.get(R.location.pathname);S&&S.has(re.pathname)?y={currentLocation:R.location,nextLocation:re}:se.has(re.pathname)&&(y={currentLocation:re,nextLocation:R.location})}else if(Q){let S=se.get(R.location.pathname);S?S.add(re.pathname):(S=new Set([re.pathname]),se.set(R.location.pathname,S)),y={currentLocation:R.location,nextLocation:re}}st(vi({},pe,{actionData:h,loaderData:o,historyAction:U,location:re,initialized:!0,navigation:cf,revalidation:"idle",restoreScrollPosition:Mt(re,pe.matches||R.matches),preventScrollReset:x,blockers:c}),{viewTransitionOpts:y,flushSync:r===!0}),U=ji.Pop,K=!1,Q=!1,ue=!1,Le=!1,Oe=[]}async function at(re,pe){if(typeof re=="number"){t.history.go(re);return}let ye=pm(R.location,R.matches,f,k.v7_prependBasename,re,k.v7_relativeSplatPath,pe==null?void 0:pe.fromRouteId,pe==null?void 0:pe.relative),{path:xe,submission:Ve,error:r}=Cv(k.v7_normalizeFormMethod,!1,ye,pe),d=R.location,h=oc(R.location,xe,pe&&pe.state);h=vi({},h,t.history.encodeLocation(h));let o=pe&&pe.replace!=null?pe.replace:void 0,c=ji.Push;o===!0?c=ji.Replace:o===!1||Ve!=null&&As(Ve.formMethod)&&Ve.formAction===R.location.pathname+R.location.search&&(c=ji.Replace);let x=pe&&"preventScrollReset"in pe?pe.preventScrollReset===!0:void 0,y=(pe&&pe.flushSync)===!0,S=Z({currentLocation:d,nextLocation:h,historyAction:c});if(S){j(S,{state:"blocked",location:h,proceed(){j(S,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),at(re,pe)},reset(){let E=new Map(R.blockers);E.set(S,sh),st({blockers:E})}});return}return await ze(c,h,{submission:Ve,pendingError:r,preventScrollReset:x,replace:pe&&pe.replace,enableViewTransition:pe&&pe.viewTransition,flushSync:y})}function nt(){if(Nt(),st({revalidation:"loading"}),R.navigation.state!=="submitting"){if(R.navigation.state==="idle"){ze(R.historyAction,R.location,{startUninterruptedRevalidation:!0});return}ze(U||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation,enableViewTransition:Q===!0})}}async function ze(re,pe,ye){ae&&ae.abort(),ae=null,U=re,ue=(ye&&ye.startUninterruptedRevalidation)===!0,ut(R.location,R.matches),K=(ye&&ye.preventScrollReset)===!0,Q=(ye&&ye.enableViewTransition)===!0;let xe=p||l,Ve=ye&&ye.overrideNavigation,r=Ia(xe,pe,f),d=(ye&&ye.flushSync)===!0,h=ot(r,xe,pe.pathname);if(h.active&&h.matches&&(r=h.matches),!r){let{error:w,notFoundMatches:v,route:b}=Ce(pe.pathname);mt(pe,{matches:v,loaderData:{},errors:{[b.id]:w}},{flushSync:d});return}if(R.initialized&&!Le&&oP(R.location,pe)&&!(ye&&ye.submission&&As(ye.submission.formMethod))){mt(pe,{matches:r},{flushSync:d});return}ae=new AbortController;let o=_o(t.history,pe,ae.signal,ye&&ye.submission),c;if(ye&&ye.pendingError)c=[Fa(r).route.id,{type:si.error,error:ye.pendingError}];else if(ye&&ye.submission&&As(ye.submission.formMethod)){let w=await It(o,pe,ye.submission,r,h.active,{replace:ye.replace,flushSync:d});if(w.shortCircuited)return;if(w.pendingActionResult){let[v,b]=w.pendingActionResult;if(ts(b)&&B0(b.error)&&b.error.status===404){ae=null,mt(pe,{matches:w.matches,loaderData:{},errors:{[v]:b.error}});return}}r=w.matches||r,c=w.pendingActionResult,Ve=uf(pe,ye.submission),d=!1,h.active=!1,o=_o(t.history,o.url,o.signal)}let{shortCircuited:x,matches:y,loaderData:S,errors:E}=await ht(o,pe,r,h.active,Ve,ye&&ye.submission,ye&&ye.fetcherSubmission,ye&&ye.replace,ye&&ye.initialHydration===!0,d,c);x||(ae=null,mt(pe,vi({matches:y||r},Iv(c),{loaderData:S,errors:E})))}async function It(re,pe,ye,xe,Ve,r){r===void 0&&(r={}),Nt();let d=pP(pe,ye);if(st({navigation:d},{flushSync:r.flushSync===!0}),Ve){let c=await _i(xe,pe.pathname,re.signal);if(c.type==="aborted")return{shortCircuited:!0};if(c.type==="error"){let x=Fa(c.partialMatches).route.id;return{matches:c.partialMatches,pendingActionResult:[x,{type:si.error,error:c.error}]}}else if(c.matches)xe=c.matches;else{let{notFoundMatches:x,error:y,route:S}=Ce(pe.pathname);return{matches:x,pendingActionResult:[S.id,{type:si.error,error:y}]}}}let h,o=gh(xe,pe);if(!o.route.action&&!o.route.lazy)h={type:si.error,error:Wn(405,{method:re.method,pathname:pe.pathname,routeId:o.route.id})};else if(h=(await Qi("action",R,re,[o],xe,null))[o.route.id],re.signal.aborted)return{shortCircuited:!0};if(Ra(h)){let c;return r&&r.replace!=null?c=r.replace:c=Pv(h.response.headers.get("Location"),new URL(re.url),f)===R.location.pathname+R.location.search,await Ki(re,h,!0,{submission:ye,replace:c}),{shortCircuited:!0}}if(Yr(h))throw Wn(400,{type:"defer-action"});if(ts(h)){let c=Fa(xe,o.route.id);return(r&&r.replace)!==!0&&(U=ji.Push),{matches:xe,pendingActionResult:[c.route.id,h]}}return{matches:xe,pendingActionResult:[o.route.id,h]}}async function ht(re,pe,ye,xe,Ve,r,d,h,o,c,x){let y=Ve||uf(pe,r),S=r||d||Lv(y),E=!ue&&(!k.v7_partialHydration||!o);if(xe){if(E){let J=Gi(x);st(vi({navigation:y},J!==void 0?{actionData:J}:{}),{flushSync:c})}let ie=await _i(ye,pe.pathname,re.signal);if(ie.type==="aborted")return{shortCircuited:!0};if(ie.type==="error"){let J=Fa(ie.partialMatches).route.id;return{matches:ie.partialMatches,loaderData:{},errors:{[J]:ie.error}}}else if(ie.matches)ye=ie.matches;else{let{error:J,notFoundMatches:be,route:Me}=Ce(pe.pathname);return{matches:be,loaderData:{},errors:{[Me.id]:J}}}}let w=p||l,[v,b]=kv(t.history,R,ye,S,pe,k.v7_partialHydration&&o===!0,k.v7_skipActionErrorRevalidation,Le,Oe,Ue,$,_e,X,w,f,x);if(Re(ie=>!(ye&&ye.some(J=>J.route.id===ie))||v&&v.some(J=>J.route.id===ie)),Ne=++Pe,v.length===0&&b.length===0){let ie=Ta();return mt(pe,vi({matches:ye,loaderData:{},errors:x&&ts(x[1])?{[x[0]]:x[1].error}:null},Iv(x),ie?{fetchers:new Map(R.fetchers)}:{}),{flushSync:c}),{shortCircuited:!0}}if(E){let ie={};if(!xe){ie.navigation=y;let J=Gi(x);J!==void 0&&(ie.actionData=J)}b.length>0&&(ie.fetchers=On(b)),st(ie,{flushSync:c})}b.forEach(ie=>{Tt(ie.key),ie.controller&&tt.set(ie.key,ie.controller)});let C=()=>b.forEach(ie=>Tt(ie.key));ae&&ae.signal.addEventListener("abort",C);let{loaderResults:u,fetcherResults:I}=await ka(R,ye,v,b,re);if(re.signal.aborted)return{shortCircuited:!0};ae&&ae.signal.removeEventListener("abort",C),b.forEach(ie=>tt.delete(ie.key));let V=Su(u);if(V)return await Ki(re,V.result,!0,{replace:h}),{shortCircuited:!0};if(V=Su(I),V)return X.add(V.key),await Ki(re,V.result,!0,{replace:h}),{shortCircuited:!0};let{loaderData:H,errors:D}=Av(R,ye,u,x,b,I,oe);oe.forEach((ie,J)=>{ie.subscribe(be=>{(be||ie.done)&&oe.delete(J)})}),k.v7_partialHydration&&o&&R.errors&&(D=vi({},R.errors,D));let Y=Ta(),O=Ma(Ne),te=Y||O||b.length>0;return vi({matches:ye,loaderData:H,errors:D},te?{fetchers:new Map(R.fetchers)}:{})}function Gi(re){if(re&&!ts(re[1]))return{[re[0]]:re[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function On(re){return re.forEach(pe=>{let ye=R.fetchers.get(pe.key),xe=rh(void 0,ye?ye.data:void 0);R.fetchers.set(pe.key,xe)}),new Map(R.fetchers)}function Pi(re,pe,ye,xe){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Tt(re);let Ve=(xe&&xe.flushSync)===!0,r=p||l,d=pm(R.location,R.matches,f,k.v7_prependBasename,ye,k.v7_relativeSplatPath,pe,xe==null?void 0:xe.relative),h=Ia(r,d,f),o=ot(h,r,d);if(o.active&&o.matches&&(h=o.matches),!h){Jn(re,pe,Wn(404,{pathname:d}),{flushSync:Ve});return}let{path:c,submission:x,error:y}=Cv(k.v7_normalizeFormMethod,!0,d,xe);if(y){Jn(re,pe,y,{flushSync:Ve});return}let S=gh(h,c),E=(xe&&xe.preventScrollReset)===!0;if(x&&As(x.formMethod)){dn(re,pe,c,S,h,o.active,Ve,E,x);return}_e.set(re,{routeId:pe,path:c}),wi(re,pe,c,S,h,o.active,Ve,E,x)}async function dn(re,pe,ye,xe,Ve,r,d,h,o){Nt(),_e.delete(re);function c(he){if(!he.route.action&&!he.route.lazy){let de=Wn(405,{method:o.formMethod,pathname:ye,routeId:pe});return Jn(re,pe,de,{flushSync:d}),!0}return!1}if(!r&&c(xe))return;let x=R.fetchers.get(re);Yi(re,fP(o,x),{flushSync:d});let y=new AbortController,S=_o(t.history,ye,y.signal,o);if(r){let he=await _i(Ve,ye,S.signal);if(he.type==="aborted")return;if(he.type==="error"){Jn(re,pe,he.error,{flushSync:d});return}else if(he.matches){if(Ve=he.matches,xe=gh(Ve,ye),c(xe))return}else{Jn(re,pe,Wn(404,{pathname:ye}),{flushSync:d});return}}tt.set(re,y);let E=Pe,v=(await Qi("action",R,S,[xe],Ve,re))[xe.route.id];if(S.signal.aborted){tt.get(re)===y&&tt.delete(re);return}if(k.v7_fetcherPersist&&$.has(re)){if(Ra(v)||ts(v)){Yi(re,Rr(void 0));return}}else{if(Ra(v))if(tt.delete(re),Ne>E){Yi(re,Rr(void 0));return}else return X.add(re),Yi(re,rh(o)),Ki(S,v,!1,{fetcherSubmission:o,preventScrollReset:h});if(ts(v)){Jn(re,pe,v.error);return}}if(Yr(v))throw Wn(400,{type:"defer-action"});let b=R.navigation.location||R.location,C=_o(t.history,b,y.signal),u=p||l,I=R.navigation.state!=="idle"?Ia(u,R.navigation.location,f):R.matches;Bt(I,"Didn't find any matches after fetcher action");let V=++Pe;Be.set(re,V);let H=rh(o,v.data);R.fetchers.set(re,H);let[D,Y]=kv(t.history,R,I,o,b,!1,k.v7_skipActionErrorRevalidation,Le,Oe,Ue,$,_e,X,u,f,[xe.route.id,v]);Y.filter(he=>he.key!==re).forEach(he=>{let de=he.key,ce=R.fetchers.get(de),le=rh(void 0,ce?ce.data:void 0);R.fetchers.set(de,le),Tt(de),he.controller&&tt.set(de,he.controller)}),st({fetchers:new Map(R.fetchers)});let O=()=>Y.forEach(he=>Tt(he.key));y.signal.addEventListener("abort",O);let{loaderResults:te,fetcherResults:ie}=await ka(R,I,D,Y,C);if(y.signal.aborted)return;y.signal.removeEventListener("abort",O),Be.delete(re),tt.delete(re),Y.forEach(he=>tt.delete(he.key));let J=Su(te);if(J)return Ki(C,J.result,!1,{preventScrollReset:h});if(J=Su(ie),J)return X.add(J.key),Ki(C,J.result,!1,{preventScrollReset:h});let{loaderData:be,errors:Me}=Av(R,I,te,void 0,Y,ie,oe);if(R.fetchers.has(re)){let he=Rr(v.data);R.fetchers.set(re,he)}Ma(V),R.navigation.state==="loading"&&V>Ne?(Bt(U,"Expected pending action"),ae&&ae.abort(),mt(R.navigation.location,{matches:I,loaderData:be,errors:Me,fetchers:new Map(R.fetchers)})):(st({errors:Me,loaderData:Dv(R.loaderData,be,I,Me),fetchers:new Map(R.fetchers)}),Le=!1)}async function wi(re,pe,ye,xe,Ve,r,d,h,o){let c=R.fetchers.get(re);Yi(re,rh(o,c?c.data:void 0),{flushSync:d});let x=new AbortController,y=_o(t.history,ye,x.signal);if(r){let v=await _i(Ve,ye,y.signal);if(v.type==="aborted")return;if(v.type==="error"){Jn(re,pe,v.error,{flushSync:d});return}else if(v.matches)Ve=v.matches,xe=gh(Ve,ye);else{Jn(re,pe,Wn(404,{pathname:ye}),{flushSync:d});return}}tt.set(re,x);let S=Pe,w=(await Qi("loader",R,y,[xe],Ve,re))[xe.route.id];if(Yr(w)&&(w=await vg(w,y.signal,!0)||w),tt.get(re)===x&&tt.delete(re),!y.signal.aborted){if($.has(re)){Yi(re,Rr(void 0));return}if(Ra(w))if(Ne>S){Yi(re,Rr(void 0));return}else{X.add(re),await Ki(y,w,!1,{preventScrollReset:h});return}if(ts(w)){Jn(re,pe,w.error);return}Bt(!Yr(w),"Unhandled fetcher deferred data"),Yi(re,Rr(w.data))}}async function Ki(re,pe,ye,xe){let{submission:Ve,fetcherSubmission:r,preventScrollReset:d,replace:h}=xe===void 0?{}:xe;pe.response.headers.has("X-Remix-Revalidate")&&(Le=!0);let o=pe.response.headers.get("Location");Bt(o,"Expected a Location header on the redirect Response"),o=Pv(o,new URL(re.url),f);let c=oc(R.location,o,{_isRedirect:!0});if(i){let v=!1;if(pe.response.headers.has("X-Remix-Reload-Document"))v=!0;else if(yg.test(o)){const b=t.history.createURL(o);v=b.origin!==e.location.origin||Pr(b.pathname,f)==null}if(v){h?e.location.replace(o):e.location.assign(o);return}}ae=null;let x=h===!0||pe.response.headers.has("X-Remix-Replace")?ji.Replace:ji.Push,{formMethod:y,formAction:S,formEncType:E}=R.navigation;!Ve&&!r&&y&&S&&E&&(Ve=Lv(R.navigation));let w=Ve||r;if(G8.has(pe.response.status)&&w&&As(w.formMethod))await ze(x,c,{submission:vi({},w,{formAction:o}),preventScrollReset:d||K,enableViewTransition:ye?Q:void 0});else{let v=uf(c,Ve);await ze(x,c,{overrideNavigation:v,fetcherSubmission:r,preventScrollReset:d||K,enableViewTransition:ye?Q:void 0})}}async function Qi(re,pe,ye,xe,Ve,r){let d,h={};try{d=await iP(g,re,pe,ye,xe,Ve,r,a,s)}catch(o){return xe.forEach(c=>{h[c.route.id]={type:si.error,error:o}}),h}for(let[o,c]of Object.entries(d))if(lP(c)){let x=c.result;h[o]={type:si.redirect,response:rP(x,ye,o,Ve,f,k.v7_relativeSplatPath)}}else h[o]=await sP(c);return h}async function ka(re,pe,ye,xe,Ve){let r=re.matches,d=Qi("loader",re,Ve,ye,pe,null),h=Promise.all(xe.map(async x=>{if(x.matches&&x.match&&x.controller){let S=(await Qi("loader",re,_o(t.history,x.path,x.controller.signal),[x.match],x.matches,x.key))[x.match.route.id];return{[x.key]:S}}else return Promise.resolve({[x.key]:{type:si.error,error:Wn(404,{pathname:x.path})}})})),o=await d,c=(await h).reduce((x,y)=>Object.assign(x,y),{});return await Promise.all([uP(pe,o,Ve.signal,r,re.loaderData),dP(pe,c,xe)]),{loaderResults:o,fetcherResults:c}}function Nt(){Le=!0,Oe.push(...Re()),_e.forEach((re,pe)=>{tt.has(pe)&&Ue.add(pe),Tt(pe)})}function Yi(re,pe,ye){ye===void 0&&(ye={}),R.fetchers.set(re,pe),st({fetchers:new Map(R.fetchers)},{flushSync:(ye&&ye.flushSync)===!0})}function Jn(re,pe,ye,xe){xe===void 0&&(xe={});let Ve=Fa(R.matches,pe);fs(re),st({errors:{[Ve.route.id]:ye},fetchers:new Map(R.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function lr(re){return k.v7_fetcherPersist&&(me.set(re,(me.get(re)||0)+1),$.has(re)&&$.delete(re)),R.fetchers.get(re)||K8}function fs(re){let pe=R.fetchers.get(re);tt.has(re)&&!(pe&&pe.state==="loading"&&Be.has(re))&&Tt(re),_e.delete(re),Be.delete(re),X.delete(re),$.delete(re),Ue.delete(re),R.fetchers.delete(re)}function ii(re){if(k.v7_fetcherPersist){let pe=(me.get(re)||0)-1;pe<=0?(me.delete(re),$.add(re)):me.set(re,pe)}else fs(re);st({fetchers:new Map(R.fetchers)})}function Tt(re){let pe=tt.get(re);pe&&(pe.abort(),tt.delete(re))}function Ri(re){for(let pe of re){let ye=lr(pe),xe=Rr(ye.data);R.fetchers.set(pe,xe)}}function Ta(){let re=[],pe=!1;for(let ye of X){let xe=R.fetchers.get(ye);Bt(xe,"Expected fetcher: "+ye),xe.state==="loading"&&(X.delete(ye),re.push(ye),pe=!0)}return Ri(re),pe}function Ma(re){let pe=[];for(let[ye,xe]of Be)if(xe<re){let Ve=R.fetchers.get(ye);Bt(Ve,"Expected fetcher: "+ye),Ve.state==="loading"&&(Tt(ye),Be.delete(ye),pe.push(ye))}return Ri(pe),pe.length>0}function vo(re,pe){let ye=R.blockers.get(re)||sh;return fe.get(re)!==pe&&fe.set(re,pe),ye}function F(re){R.blockers.delete(re),fe.delete(re)}function j(re,pe){let ye=R.blockers.get(re)||sh;Bt(ye.state==="unblocked"&&pe.state==="blocked"||ye.state==="blocked"&&pe.state==="blocked"||ye.state==="blocked"&&pe.state==="proceeding"||ye.state==="blocked"&&pe.state==="unblocked"||ye.state==="proceeding"&&pe.state==="unblocked","Invalid blocker state transition: "+ye.state+" -> "+pe.state);let xe=new Map(R.blockers);xe.set(re,pe),st({blockers:xe})}function Z(re){let{currentLocation:pe,nextLocation:ye,historyAction:xe}=re;if(fe.size===0)return;fe.size>1&&ul(!1,"A router only supports one blocker at a time");let Ve=Array.from(fe.entries()),[r,d]=Ve[Ve.length-1],h=R.blockers.get(r);if(!(h&&h.state==="proceeding")&&d({currentLocation:pe,nextLocation:ye,historyAction:xe}))return r}function Ce(re){let pe=Wn(404,{pathname:re}),ye=p||l,{matches:xe,route:Ve}=Fv(ye);return Re(),{notFoundMatches:xe,route:Ve,error:pe}}function Re(re){let pe=[];return oe.forEach((ye,xe)=>{(!re||re(xe))&&(ye.cancel(),pe.push(xe),oe.delete(xe))}),pe}function je(re,pe,ye){if(P=re,W=pe,L=ye||null,!N&&R.navigation===cf){N=!0;let xe=Mt(R.location,R.matches);xe!=null&&st({restoreScrollPosition:xe})}return()=>{P=null,W=null,L=null}}function ke(re,pe){return L&&L(re,pe.map(xe=>T8(xe,R.loaderData)))||re.key}function ut(re,pe){if(P&&W){let ye=ke(re,pe);P[ye]=W()}}function Mt(re,pe){if(P){let ye=ke(re,pe),xe=P[ye];if(typeof xe=="number")return xe}return null}function ot(re,pe,ye){if(m)if(re){if(Object.keys(re[0].params).length>0)return{active:!0,matches:Qu(pe,ye,f,!0)}}else return{active:!0,matches:Qu(pe,ye,f,!0)||[]};return{active:!1,matches:null}}async function _i(re,pe,ye){if(!m)return{type:"success",matches:re};let xe=re;for(;;){let Ve=p==null,r=p||l,d=a;try{await m({path:pe,matches:xe,patch:(c,x)=>{ye.aborted||Mv(c,x,r,d,s)}})}catch(c){return{type:"error",error:c,partialMatches:xe}}finally{Ve&&!ye.aborted&&(l=[...l])}if(ye.aborted)return{type:"aborted"};let h=Ia(r,pe,f);if(h)return{type:"success",matches:h};let o=Qu(r,pe,f,!0);if(!o||xe.length===o.length&&xe.every((c,x)=>c.route.id===o[x].route.id))return{type:"success",matches:null};xe=o}}function Ut(re){a={},p=Ld(re,s,void 0,a)}function ci(re,pe){let ye=p==null;Mv(re,pe,p||l,a,s),ye&&(l=[...l],st({}))}return G={get basename(){return f},get future(){return k},get state(){return R},get routes(){return l},get window(){return e},initialize:Se,subscribe:it,enableScrollRestoration:je,navigate:at,fetch:Pi,revalidate:nt,createHref:re=>t.history.createHref(re),encodeLocation:re=>t.history.encodeLocation(re),getFetcher:lr,deleteFetcher:ii,dispose:Ee,getBlocker:vo,deleteBlocker:F,patchRoutes:ci,_internalFetchControllers:tt,_internalActiveDeferreds:oe,_internalSetRoutes:Ut},G}function J8(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function pm(t,e,i,n,s,a,l,p){let f,g;if(l){f=[];for(let k of e)if(f.push(k),k.route.id===l){g=k;break}}else f=e,g=e[e.length-1];let m=gg(s||".",mg(f,a),Pr(t.pathname,i)||t.pathname,p==="path");if(s==null&&(m.search=t.search,m.hash=t.hash),(s==null||s===""||s===".")&&g){let k=bg(m.search);if(g.route.index&&!k)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!g.route.index&&k){let T=new URLSearchParams(m.search),A=T.getAll("index");T.delete("index"),A.filter(L=>L).forEach(L=>T.append("index",L));let P=T.toString();m.search=P?"?"+P:""}}return n&&i!=="/"&&(m.pathname=m.pathname==="/"?i:wr([i,m.pathname])),eo(m)}function Cv(t,e,i,n){if(!n||!J8(n))return{path:i};if(n.formMethod&&!cP(n.formMethod))return{path:i,error:Wn(405,{method:n.formMethod})};let s=()=>({path:i,error:Wn(400,{type:"invalid-body"})}),a=n.formMethod||"get",l=t?a.toUpperCase():a.toLowerCase(),p=eS(i);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!As(l))return s();let T=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((A,P)=>{let[L,W]=P;return""+A+L+"="+W+`
`},""):String(n.body);return{path:i,submission:{formMethod:l,formAction:p,formEncType:n.formEncType,formData:void 0,json:void 0,text:T}}}else if(n.formEncType==="application/json"){if(!As(l))return s();try{let T=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:i,submission:{formMethod:l,formAction:p,formEncType:n.formEncType,formData:void 0,json:T,text:void 0}}}catch{return s()}}}Bt(typeof FormData=="function","FormData is not available in this environment");let f,g;if(n.formData)f=xm(n.formData),g=n.formData;else if(n.body instanceof FormData)f=xm(n.body),g=n.body;else if(n.body instanceof URLSearchParams)f=n.body,g=Ev(f);else if(n.body==null)f=new URLSearchParams,g=new FormData;else try{f=new URLSearchParams(n.body),g=Ev(f)}catch{return s()}let m={formMethod:l,formAction:p,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(As(m.formMethod))return{path:i,submission:m};let k=ga(i);return e&&k.search&&bg(k.search)&&f.append("index",""),k.search="?"+f,{path:eo(k),submission:m}}function Sv(t,e,i){i===void 0&&(i=!1);let n=t.findIndex(s=>s.route.id===e);return n>=0?t.slice(0,i?n+1:n):t}function kv(t,e,i,n,s,a,l,p,f,g,m,k,T,A,P,L){let W=L?ts(L[1])?L[1].error:L[1].data:void 0,N=t.createURL(e.location),M=t.createURL(s),B=i;a&&e.errors?B=Sv(i,Object.keys(e.errors)[0],!0):L&&ts(L[1])&&(B=Sv(i,L[0]));let z=L?L[1].statusCode:void 0,G=l&&z&&z>=400,R=B.filter((K,ae)=>{let{route:Q}=K;if(Q.lazy)return!0;if(Q.loader==null)return!1;if(a)return fm(Q,e.loaderData,e.errors);if(q8(e.loaderData,e.matches[ae],K)||f.some(ue=>ue===K.route.id))return!0;let se=e.matches[ae],ge=K;return Tv(K,vi({currentUrl:N,currentParams:se.params,nextUrl:M,nextParams:ge.params},n,{actionResult:W,actionStatus:z,defaultShouldRevalidate:G?!1:p||N.pathname+N.search===M.pathname+M.search||N.search!==M.search||J4(se,ge)}))}),U=[];return k.forEach((K,ae)=>{if(a||!i.some(Le=>Le.route.id===K.routeId)||m.has(ae))return;let Q=Ia(A,K.path,P);if(!Q){U.push({key:ae,routeId:K.routeId,path:K.path,matches:null,match:null,controller:null});return}let se=e.fetchers.get(ae),ge=gh(Q,K.path),ue=!1;T.has(ae)?ue=!1:g.has(ae)?(g.delete(ae),ue=!0):se&&se.state!=="idle"&&se.data===void 0?ue=p:ue=Tv(ge,vi({currentUrl:N,currentParams:e.matches[e.matches.length-1].params,nextUrl:M,nextParams:i[i.length-1].params},n,{actionResult:W,actionStatus:z,defaultShouldRevalidate:G?!1:p})),ue&&U.push({key:ae,routeId:K.routeId,path:K.path,matches:Q,match:ge,controller:new AbortController})}),[R,U]}function fm(t,e,i){if(t.lazy)return!0;if(!t.loader)return!1;let n=e!=null&&e[t.id]!==void 0,s=i!=null&&i[t.id]!==void 0;return!n&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!s}function q8(t,e,i){let n=!e||i.route.id!==e.route.id,s=t[i.route.id]===void 0;return n||s}function J4(t,e){let i=t.route.path;return t.pathname!==e.pathname||i!=null&&i.endsWith("*")&&t.params["*"]!==e.params["*"]}function Tv(t,e){if(t.route.shouldRevalidate){let i=t.route.shouldRevalidate(e);if(typeof i=="boolean")return i}return e.defaultShouldRevalidate}function Mv(t,e,i,n,s){var a;let l;if(t){let g=n[t];Bt(g,"No route found to patch children into: routeId = "+t),g.children||(g.children=[]),l=g.children}else l=i;let p=e.filter(g=>!l.some(m=>q4(g,m))),f=Ld(p,s,[t||"_","patch",String(((a=l)==null?void 0:a.length)||"0")],n);l.push(...f)}function q4(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((i,n)=>{var s;return(s=e.children)==null?void 0:s.some(a=>q4(i,a))}):!1}async function eP(t,e,i){if(!t.lazy)return;let n=await t.lazy();if(!t.lazy)return;let s=i[t.id];Bt(s,"No route found in manifest");let a={};for(let l in n){let f=s[l]!==void 0&&l!=="hasErrorBoundary";ul(!f,'Route "'+s.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!f&&!S8.has(l)&&(a[l]=n[l])}Object.assign(s,a),Object.assign(s,vi({},e(s),{lazy:void 0}))}async function tP(t){let{matches:e}=t,i=e.filter(s=>s.shouldLoad);return(await Promise.all(i.map(s=>s.resolve()))).reduce((s,a,l)=>Object.assign(s,{[i[l].route.id]:a}),{})}async function iP(t,e,i,n,s,a,l,p,f,g){let m=a.map(A=>A.route.lazy?eP(A.route,f,p):void 0),k=a.map((A,P)=>{let L=m[P],W=s.some(M=>M.route.id===A.route.id);return vi({},A,{shouldLoad:W,resolve:async M=>(M&&n.method==="GET"&&(A.route.lazy||A.route.loader)&&(W=!0),W?nP(e,n,A,L,M,g):Promise.resolve({type:si.data,result:void 0}))})}),T=await t({matches:k,request:n,params:a[0].params,fetcherKey:l,context:g});try{await Promise.all(m)}catch{}return T}async function nP(t,e,i,n,s,a){let l,p,f=g=>{let m,k=new Promise((P,L)=>m=L);p=()=>m(),e.signal.addEventListener("abort",p);let T=P=>typeof g!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+i.route.id+"]"))):g({request:e,params:i.params,context:a},...P!==void 0?[P]:[]),A=(async()=>{try{return{type:"data",result:await(s?s(L=>T(L)):T())}}catch(P){return{type:"error",result:P}}})();return Promise.race([A,k])};try{let g=i.route[t];if(n)if(g){let m,[k]=await Promise.all([f(g).catch(T=>{m=T}),n]);if(m!==void 0)throw m;l=k}else if(await n,g=i.route[t],g)l=await f(g);else if(t==="action"){let m=new URL(e.url),k=m.pathname+m.search;throw Wn(405,{method:e.method,pathname:k,routeId:i.route.id})}else return{type:si.data,result:void 0};else if(g)l=await f(g);else{let m=new URL(e.url),k=m.pathname+m.search;throw Wn(404,{pathname:k})}Bt(l.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+i.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(g){return{type:si.error,result:g}}finally{p&&e.signal.removeEventListener("abort",p)}return l}async function sP(t){let{result:e,type:i}=t;if(tS(e)){let g;try{let m=e.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?e.body==null?g=null:g=await e.json():g=await e.text()}catch(m){return{type:si.error,error:m}}return i===si.error?{type:si.error,error:new Rd(e.status,e.statusText,g),statusCode:e.status,headers:e.headers}:{type:si.data,data:g,statusCode:e.status,headers:e.headers}}if(i===si.error){if(Bv(e)){var n;if(e.data instanceof Error){var s;return{type:si.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status}}e=new Rd(((n=e.init)==null?void 0:n.status)||500,void 0,e.data)}return{type:si.error,error:e,statusCode:B0(e)?e.status:void 0}}if(hP(e)){var a,l;return{type:si.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(Bv(e)){var p,f;return{type:si.data,data:e.data,statusCode:(p=e.init)==null?void 0:p.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:si.data,data:e}}function rP(t,e,i,n,s,a){let l=t.headers.get("Location");if(Bt(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!yg.test(l)){let p=n.slice(0,n.findIndex(f=>f.route.id===i)+1);l=pm(new URL(e.url),p,s,!0,l,a),t.headers.set("Location",l)}return t}function Pv(t,e,i){if(yg.test(t)){let n=t,s=n.startsWith("//")?new URL(e.protocol+n):new URL(n),a=Pr(s.pathname,i)!=null;if(s.origin===e.origin&&a)return s.pathname+s.search+s.hash}return t}function _o(t,e,i,n){let s=t.createURL(eS(e)).toString(),a={signal:i};if(n&&As(n.formMethod)){let{formMethod:l,formEncType:p}=n;a.method=l.toUpperCase(),p==="application/json"?(a.headers=new Headers({"Content-Type":p}),a.body=JSON.stringify(n.json)):p==="text/plain"?a.body=n.text:p==="application/x-www-form-urlencoded"&&n.formData?a.body=xm(n.formData):a.body=n.formData}return new Request(s,a)}function xm(t){let e=new URLSearchParams;for(let[i,n]of t.entries())e.append(i,typeof n=="string"?n:n.name);return e}function Ev(t){let e=new FormData;for(let[i,n]of t.entries())e.append(i,n);return e}function aP(t,e,i,n,s){let a={},l=null,p,f=!1,g={},m=i&&ts(i[1])?i[1].error:void 0;return t.forEach(k=>{if(!(k.route.id in e))return;let T=k.route.id,A=e[T];if(Bt(!Ra(A),"Cannot handle redirect results in processLoaderData"),ts(A)){let P=A.error;m!==void 0&&(P=m,m=void 0),l=l||{};{let L=Fa(t,T);l[L.route.id]==null&&(l[L.route.id]=P)}a[T]=void 0,f||(f=!0,p=B0(A.error)?A.error.status:500),A.headers&&(g[T]=A.headers)}else Yr(A)?(n.set(T,A.deferredData),a[T]=A.deferredData.data,A.statusCode!=null&&A.statusCode!==200&&!f&&(p=A.statusCode),A.headers&&(g[T]=A.headers)):(a[T]=A.data,A.statusCode&&A.statusCode!==200&&!f&&(p=A.statusCode),A.headers&&(g[T]=A.headers))}),m!==void 0&&i&&(l={[i[0]]:m},a[i[0]]=void 0),{loaderData:a,errors:l,statusCode:p||200,loaderHeaders:g}}function Av(t,e,i,n,s,a,l){let{loaderData:p,errors:f}=aP(e,i,n,l);return s.forEach(g=>{let{key:m,match:k,controller:T}=g,A=a[m];if(Bt(A,"Did not find corresponding fetcher result"),!(T&&T.signal.aborted))if(ts(A)){let P=Fa(t.matches,k==null?void 0:k.route.id);f&&f[P.route.id]||(f=vi({},f,{[P.route.id]:A.error})),t.fetchers.delete(m)}else if(Ra(A))Bt(!1,"Unhandled fetcher revalidation redirect");else if(Yr(A))Bt(!1,"Unhandled fetcher deferred data");else{let P=Rr(A.data);t.fetchers.set(m,P)}}),{loaderData:p,errors:f}}function Dv(t,e,i,n){let s=vi({},e);for(let a of i){let l=a.route.id;if(e.hasOwnProperty(l)?e[l]!==void 0&&(s[l]=e[l]):t[l]!==void 0&&a.route.loader&&(s[l]=t[l]),n&&n.hasOwnProperty(l))break}return s}function Iv(t){return t?ts(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Fa(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function Fv(t){let e=t.length===1?t[0]:t.find(i=>i.index||!i.path||i.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Wn(t,e){let{pathname:i,routeId:n,method:s,type:a,message:l}=e===void 0?{}:e,p="Unknown Server Error",f="Unknown @remix-run/router error";return t===400?(p="Bad Request",s&&i&&n?f="You made a "+s+' request to "'+i+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":a==="defer-action"?f="defer() is not supported in actions":a==="invalid-body"&&(f="Unable to encode submission body")):t===403?(p="Forbidden",f='Route "'+n+'" does not match URL "'+i+'"'):t===404?(p="Not Found",f='No route matches URL "'+i+'"'):t===405&&(p="Method Not Allowed",s&&i&&n?f="You made a "+s.toUpperCase()+' request to "'+i+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":s&&(f='Invalid request method "'+s.toUpperCase()+'"')),new Rd(t||500,p,new Error(f),!0)}function Su(t){let e=Object.entries(t);for(let i=e.length-1;i>=0;i--){let[n,s]=e[i];if(Ra(s))return{key:n,result:s}}}function eS(t){let e=typeof t=="string"?ga(t):t;return eo(vi({},e,{hash:""}))}function oP(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function lP(t){return tS(t.result)&&U8.has(t.result.status)}function Yr(t){return t.type===si.deferred}function ts(t){return t.type===si.error}function Ra(t){return(t&&t.type)===si.redirect}function Bv(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function hP(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function tS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function cP(t){return X8.has(t.toLowerCase())}function As(t){return H8.has(t.toLowerCase())}async function uP(t,e,i,n,s){let a=Object.entries(e);for(let l=0;l<a.length;l++){let[p,f]=a[l],g=t.find(T=>(T==null?void 0:T.route.id)===p);if(!g)continue;let m=n.find(T=>T.route.id===g.route.id),k=m!=null&&!J4(m,g)&&(s&&s[g.route.id])!==void 0;Yr(f)&&k&&await vg(f,i,!1).then(T=>{T&&(e[p]=T)})}}async function dP(t,e,i){for(let n=0;n<i.length;n++){let{key:s,routeId:a,controller:l}=i[n],p=e[s];t.find(g=>(g==null?void 0:g.route.id)===a)&&Yr(p)&&(Bt(l,"Expected an AbortController for revalidating fetcher deferred result"),await vg(p,l.signal,!0).then(g=>{g&&(e[s]=g)}))}}async function vg(t,e,i){if(i===void 0&&(i=!1),!await t.deferredData.resolveData(e)){if(i)try{return{type:si.data,data:t.deferredData.unwrappedData}}catch(s){return{type:si.error,error:s}}return{type:si.data,data:t.deferredData.data}}}function bg(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function gh(t,e){let i=typeof e=="string"?ga(e).search:e.search;if(t[t.length-1].route.index&&bg(i||""))return t[t.length-1];let n=K4(t);return n[n.length-1]}function Lv(t){let{formMethod:e,formAction:i,formEncType:n,text:s,formData:a,json:l}=t;if(!(!e||!i||!n)){if(s!=null)return{formMethod:e,formAction:i,formEncType:n,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:i,formEncType:n,formData:a,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:i,formEncType:n,formData:void 0,json:l,text:void 0}}}function uf(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function pP(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function rh(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function fP(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Rr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function xP(t,e){try{let i=t.sessionStorage.getItem(Z4);if(i){let n=JSON.parse(i);for(let[s,a]of Object.entries(n||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function mP(t,e){if(e.size>0){let i={};for(let[n,s]of e)i[n]=[...s];try{t.sessionStorage.setItem(Z4,JSON.stringify(i))}catch(n){ul(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vd(){return Vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Vd.apply(this,arguments)}const Fc=q.createContext(null),wg=q.createContext(null),ya=q.createContext(null),_g=q.createContext(null),va=q.createContext({outlet:null,matches:[],isDataRoute:!1}),iS=q.createContext(null);function gP(t,e){let{relative:i}=e===void 0?{}:e;Bc()||Bt(!1);let{basename:n,navigator:s}=q.useContext(ya),{hash:a,pathname:l,search:p}=L0(t,{relative:i}),f=l;return n!=="/"&&(f=l==="/"?n:wr([n,l])),s.createHref({pathname:f,search:p,hash:a})}function Bc(){return q.useContext(_g)!=null}function Lc(){return Bc()||Bt(!1),q.useContext(_g).location}function nS(t){q.useContext(ya).static||q.useLayoutEffect(t)}function yP(){let{isDataRoute:t}=q.useContext(va);return t?IP():vP()}function vP(){Bc()||Bt(!1);let t=q.useContext(Fc),{basename:e,future:i,navigator:n}=q.useContext(ya),{matches:s}=q.useContext(va),{pathname:a}=Lc(),l=JSON.stringify(mg(s,i.v7_relativeSplatPath)),p=q.useRef(!1);return nS(()=>{p.current=!0}),q.useCallback(function(g,m){if(m===void 0&&(m={}),!p.current)return;if(typeof g=="number"){n.go(g);return}let k=gg(g,JSON.parse(l),a,m.relative==="path");t==null&&e!=="/"&&(k.pathname=k.pathname==="/"?e:wr([e,k.pathname])),(m.replace?n.replace:n.push)(k,m.state,m)},[e,n,l,a,t])}const bP=q.createContext(null);function wP(t){let e=q.useContext(va).outlet;return e&&q.createElement(bP.Provider,{value:t},e)}function L0(t,e){let{relative:i}=e===void 0?{}:e,{future:n}=q.useContext(ya),{matches:s}=q.useContext(va),{pathname:a}=Lc(),l=JSON.stringify(mg(s,n.v7_relativeSplatPath));return q.useMemo(()=>gg(t,JSON.parse(l),a,i==="path"),[t,l,a,i])}function _P(t,e,i,n){Bc()||Bt(!1);let{navigator:s}=q.useContext(ya),{matches:a}=q.useContext(va),l=a[a.length-1],p=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let g=Lc(),m;m=g;let k=m.pathname||"/",T=k;if(f!=="/"){let L=f.replace(/^\//,"").split("/");T="/"+k.replace(/^\//,"").split("/").slice(L.length).join("/")}let A=Ia(t,{pathname:T});return MP(A&&A.map(L=>Object.assign({},L,{params:Object.assign({},p,L.params),pathname:wr([f,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?f:wr([f,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),a,i,n)}function CP(){let t=DP(),e=B0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),i?q.createElement("pre",{style:s},i):null,null)}const SP=q.createElement(CP,null);class kP extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,i){return i.location!==e.location||i.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:i.error,location:i.location,revalidation:e.revalidation||i.revalidation}}componentDidCatch(e,i){console.error("React Router caught the following error during render",e,i)}render(){return this.state.error!==void 0?q.createElement(va.Provider,{value:this.props.routeContext},q.createElement(iS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TP(t){let{routeContext:e,match:i,children:n}=t,s=q.useContext(Fc);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),q.createElement(va.Provider,{value:e},n)}function MP(t,e,i,n){var s;if(e===void 0&&(e=[]),i===void 0&&(i=null),n===void 0&&(n=null),t==null){var a;if(!i)return null;if(i.errors)t=i.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,p=(s=i)==null?void 0:s.errors;if(p!=null){let m=l.findIndex(k=>k.route.id&&(p==null?void 0:p[k.route.id])!==void 0);m>=0||Bt(!1),l=l.slice(0,Math.min(l.length,m+1))}let f=!1,g=-1;if(i&&n&&n.v7_partialHydration)for(let m=0;m<l.length;m++){let k=l[m];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(g=m),k.route.id){let{loaderData:T,errors:A}=i,P=k.route.loader&&T[k.route.id]===void 0&&(!A||A[k.route.id]===void 0);if(k.route.lazy||P){f=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((m,k,T)=>{let A,P=!1,L=null,W=null;i&&(A=p&&k.route.id?p[k.route.id]:void 0,L=k.route.errorElement||SP,f&&(g<0&&T===0?(P=!0,W=null):g===T&&(P=!0,W=k.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,T+1)),M=()=>{let B;return A?B=L:P?B=W:k.route.Component?B=q.createElement(k.route.Component,null):k.route.element?B=k.route.element:B=m,q.createElement(TP,{match:k,routeContext:{outlet:m,matches:N,isDataRoute:i!=null},children:B})};return i&&(k.route.ErrorBoundary||k.route.errorElement||T===0)?q.createElement(kP,{location:i.location,revalidation:i.revalidation,component:L,error:A,children:M(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):M()},null)}var sS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sS||{}),Od=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Od||{});function PP(t){let e=q.useContext(Fc);return e||Bt(!1),e}function EP(t){let e=q.useContext(wg);return e||Bt(!1),e}function AP(t){let e=q.useContext(va);return e||Bt(!1),e}function rS(t){let e=AP(),i=e.matches[e.matches.length-1];return i.route.id||Bt(!1),i.route.id}function DP(){var t;let e=q.useContext(iS),i=EP(Od.UseRouteError),n=rS(Od.UseRouteError);return e!==void 0?e:(t=i.errors)==null?void 0:t[n]}function IP(){let{router:t}=PP(sS.UseNavigateStable),e=rS(Od.UseNavigateStable),i=q.useRef(!1);return nS(()=>{i.current=!0}),q.useCallback(function(s,a){a===void 0&&(a={}),i.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Vd({fromRouteId:e},a)))},[t,e])}const Nv={};function FP(t,e){Nv[e]||(Nv[e]=!0,console.warn(e))}const Co=(t,e,i)=>FP(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+i+"."));function BP(t,e){t!=null&&t.v7_startTransition||Co("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&(!e||!e.v7_relativeSplatPath)&&Co("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(e.v7_fetcherPersist||Co("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),e.v7_normalizeFormMethod||Co("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),e.v7_partialHydration||Co("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),e.v7_skipActionErrorRevalidation||Co("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function LP(t){return wP(t.context)}function NP(t){let{basename:e="/",children:i=null,location:n,navigationType:s=ji.Pop,navigator:a,static:l=!1,future:p}=t;Bc()&&Bt(!1);let f=e.replace(/^\/*/,"/"),g=q.useMemo(()=>({basename:f,navigator:a,static:l,future:Vd({v7_relativeSplatPath:!1},p)}),[f,p,a,l]);typeof n=="string"&&(n=ga(n));let{pathname:m="/",search:k="",hash:T="",state:A=null,key:P="default"}=n,L=q.useMemo(()=>{let W=Pr(m,f);return W==null?null:{location:{pathname:W,search:k,hash:T,state:A,key:P},navigationType:s}},[f,m,k,T,A,P,s]);return L==null?null:q.createElement(ya.Provider,{value:g},q.createElement(_g.Provider,{children:i,value:L}))}new Promise(()=>{});function RP(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:q.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:q.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:q.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},dl.apply(this,arguments)}function aS(t,e){if(t==null)return{};var i={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function VP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OP(t,e){return t.button===0&&(!e||e==="_self")&&!VP(t)}const jP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],WP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],zP="6";try{window.__reactRouterVersion=zP}catch{}function $P(t,e){return Z8({basename:void 0,future:dl({},void 0,{v7_prependBasename:!0}),history:w8({window:void 0}),hydrationData:HP(),routes:t,mapRouteProperties:RP,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function HP(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=dl({},e,{errors:YP(e.errors)})),e}function YP(t){if(!t)return null;let e=Object.entries(t),i={};for(let[n,s]of e)if(s&&s.__type==="RouteErrorResponse")i[n]=new Rd(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let l=new a(s.message);l.stack="",i[n]=l}catch{}}if(i[n]==null){let a=new Error(s.message);a.stack="",i[n]=a}}else i[n]=s;return i}const oS=q.createContext({isTransitioning:!1}),XP=q.createContext(new Map),UP="startTransition",Rv=lM[UP],GP="flushSync",Vv=b8[GP];function KP(t){Rv?Rv(t):t()}function ah(t){Vv?Vv(t):t()}let QP=class{constructor(){this.status="pending",this.promise=new Promise((e,i)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",i(n))}})}};function ZP(t){let{fallbackElement:e,router:i,future:n}=t,[s,a]=q.useState(i.state),[l,p]=q.useState(),[f,g]=q.useState({isTransitioning:!1}),[m,k]=q.useState(),[T,A]=q.useState(),[P,L]=q.useState(),W=q.useRef(new Map),{v7_startTransition:N}=n||{},M=q.useCallback(K=>{N?KP(K):K()},[N]),B=q.useCallback((K,ae)=>{let{deletedFetchers:Q,flushSync:se,viewTransitionOpts:ge}=ae;Q.forEach(Le=>W.current.delete(Le)),K.fetchers.forEach((Le,Oe)=>{Le.data!==void 0&&W.current.set(Oe,Le.data)});let ue=i.window==null||i.window.document==null||typeof i.window.document.startViewTransition!="function";if(!ge||ue){se?ah(()=>a(K)):M(()=>a(K));return}if(se){ah(()=>{T&&(m&&m.resolve(),T.skipTransition()),g({isTransitioning:!0,flushSync:!0,currentLocation:ge.currentLocation,nextLocation:ge.nextLocation})});let Le=i.window.document.startViewTransition(()=>{ah(()=>a(K))});Le.finished.finally(()=>{ah(()=>{k(void 0),A(void 0),p(void 0),g({isTransitioning:!1})})}),ah(()=>A(Le));return}T?(m&&m.resolve(),T.skipTransition(),L({state:K,currentLocation:ge.currentLocation,nextLocation:ge.nextLocation})):(p(K),g({isTransitioning:!0,flushSync:!1,currentLocation:ge.currentLocation,nextLocation:ge.nextLocation}))},[i.window,T,m,W,M]);q.useLayoutEffect(()=>i.subscribe(B),[i,B]),q.useEffect(()=>{f.isTransitioning&&!f.flushSync&&k(new QP)},[f]),q.useEffect(()=>{if(m&&l&&i.window){let K=l,ae=m.promise,Q=i.window.document.startViewTransition(async()=>{M(()=>a(K)),await ae});Q.finished.finally(()=>{k(void 0),A(void 0),p(void 0),g({isTransitioning:!1})}),A(Q)}},[M,l,m,i.window]),q.useEffect(()=>{m&&l&&s.location.key===l.location.key&&m.resolve()},[m,T,s.location,l]),q.useEffect(()=>{!f.isTransitioning&&P&&(p(P.state),g({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}),L(void 0))},[f.isTransitioning,P]),q.useEffect(()=>{},[]);let z=q.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:K=>i.navigate(K),push:(K,ae,Q)=>i.navigate(K,{state:ae,preventScrollReset:Q==null?void 0:Q.preventScrollReset}),replace:(K,ae,Q)=>i.navigate(K,{replace:!0,state:ae,preventScrollReset:Q==null?void 0:Q.preventScrollReset})}),[i]),G=i.basename||"/",R=q.useMemo(()=>({router:i,navigator:z,static:!1,basename:G}),[i,z,G]),U=q.useMemo(()=>({v7_relativeSplatPath:i.future.v7_relativeSplatPath}),[i.future.v7_relativeSplatPath]);return q.useEffect(()=>BP(n,i.future),[n,i.future]),q.createElement(q.Fragment,null,q.createElement(Fc.Provider,{value:R},q.createElement(wg.Provider,{value:s},q.createElement(XP.Provider,{value:W.current},q.createElement(oS.Provider,{value:f},q.createElement(NP,{basename:G,location:s.location,navigationType:s.historyAction,navigator:z,future:U},s.initialized||i.future.v7_partialHydration?q.createElement(JP,{routes:i.routes,future:i.future,state:s}):e))))),null)}const JP=q.memo(qP);function qP(t){let{routes:e,future:i,state:n}=t;return _P(e,void 0,n,i)}const eE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pr=q.forwardRef(function(e,i){let{onClick:n,relative:s,reloadDocument:a,replace:l,state:p,target:f,to:g,preventScrollReset:m,viewTransition:k}=e,T=aS(e,jP),{basename:A}=q.useContext(ya),P,L=!1;if(typeof g=="string"&&tE.test(g)&&(P=g,eE))try{let B=new URL(window.location.href),z=g.startsWith("//")?new URL(B.protocol+g):new URL(g),G=Pr(z.pathname,A);z.origin===B.origin&&G!=null?g=G+z.search+z.hash:L=!0}catch{}let W=gP(g,{relative:s}),N=nE(g,{replace:l,state:p,target:f,preventScrollReset:m,relative:s,viewTransition:k});function M(B){n&&n(B),B.defaultPrevented||N(B)}return q.createElement("a",dl({},T,{href:P||W,onClick:L||a?n:M,ref:i,target:f}))}),li=q.forwardRef(function(e,i){let{"aria-current":n="page",caseSensitive:s=!1,className:a="",end:l=!1,style:p,to:f,viewTransition:g,children:m}=e,k=aS(e,WP),T=L0(f,{relative:k.relative}),A=Lc(),P=q.useContext(wg),{navigator:L,basename:W}=q.useContext(ya),N=P!=null&&sE(T)&&g===!0,M=L.encodeLocation?L.encodeLocation(T).pathname:T.pathname,B=A.pathname,z=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;s||(B=B.toLowerCase(),z=z?z.toLowerCase():null,M=M.toLowerCase()),z&&W&&(z=Pr(z,W)||z);const G=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let R=B===M||!l&&B.startsWith(M)&&B.charAt(G)==="/",U=z!=null&&(z===M||!l&&z.startsWith(M)&&z.charAt(M.length)==="/"),K={isActive:R,isPending:U,isTransitioning:N},ae=R?n:void 0,Q;typeof a=="function"?Q=a(K):Q=[a,R?"active":null,U?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let se=typeof p=="function"?p(K):p;return q.createElement(pr,dl({},k,{"aria-current":ae,className:Q,ref:i,style:se,to:f,viewTransition:g}),typeof m=="function"?m(K):m)});var mm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(mm||(mm={}));var Ov;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ov||(Ov={}));function iE(t){let e=q.useContext(Fc);return e||Bt(!1),e}function nE(t,e){let{target:i,replace:n,state:s,preventScrollReset:a,relative:l,viewTransition:p}=e===void 0?{}:e,f=yP(),g=Lc(),m=L0(t,{relative:l});return q.useCallback(k=>{if(OP(k,i)){k.preventDefault();let T=n!==void 0?n:eo(g)===eo(m);f(t,{replace:T,state:s,preventScrollReset:a,relative:l,viewTransition:p})}},[g,f,m,n,s,i,t,a,l,p])}function sE(t,e){e===void 0&&(e={});let i=q.useContext(oS);i==null&&Bt(!1);let{basename:n}=iE(mm.useViewTransitionState),s=L0(t,{relative:e.relative});if(!i.isTransitioning)return!1;let a=Pr(i.currentLocation.pathname,n)||i.currentLocation.pathname,l=Pr(i.nextLocation.pathname,n)||i.nextLocation.pathname;return Nd(s.pathname,l)!=null||Nd(s.pathname,a)!=null}function rE({setPortion:t,portion:e}){return _.jsxs("div",{className:"flex gap-10 flex-col md:flex-row items-center justify-between pb-6",children:[_.jsx("h2",{className:"text-4xl font-sans font-medium",children:"Forming Machine"}),_.jsxs("div",{className:"flex gap-4 items-center",children:[_.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsx("input",{type:"checkbox",name:"fAll",id:"fAll",className:"w-4 h-4",checked:e=="all",onClick:()=>t("all")}),_.jsx("label",{htmlFor:"fAll",className:"text-xl",children:"All"})]}),_.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsx("input",{type:"checkbox",name:"fActive",id:"fActive",className:"w-4 h-4",checked:e=="active",onClick:()=>t("active")}),_.jsx("label",{htmlFor:"fActive",className:"text-xl",children:"Active"})]}),_.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsx("input",{type:"checkbox",name:"fIdle",id:"fIdle",className:"w-4 h-4",checked:e=="idle",onClick:()=>t("idle")}),_.jsx("label",{htmlFor:"fIdle",className:"text-xl",children:"Idle"})]})]})]})}const aE="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='47'%20height='47'%20rx='23.5'%20stroke='white'/%3e%3cpath%20d='M18.0625%2021.625C18.0625%2021.2798%2018.3423%2021%2018.6875%2021H22.125C22.2484%2021%2022.369%2021.0365%2022.4717%2021.105L24%2022.1238L25.5283%2021.105C25.631%2021.0365%2025.7516%2021%2025.875%2021H29.3125C29.6577%2021%2029.9375%2021.2798%2029.9375%2021.625C29.9375%2021.9702%2029.6577%2022.25%2029.3125%2022.25H26.0642L24.3467%2023.395C24.1368%2023.535%2023.8632%2023.535%2023.6533%2023.395L21.9358%2022.25H18.6875C18.3423%2022.25%2018.0625%2021.9702%2018.0625%2021.625Z'%20fill='white'/%3e%3cpath%20d='M25.5312%2033.75C25.1861%2033.75%2024.9062%2034.0298%2024.9062%2034.375C24.9062%2034.7202%2025.1861%2035%2025.5312%2035H28.3438C28.6889%2035%2028.9688%2034.7202%2028.9688%2034.375C28.9688%2034.0298%2028.6889%2033.75%2028.3438%2033.75H25.5312Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.0312%2031.25C22.6861%2031.25%2022.4062%2031.5298%2022.4062%2031.875V36.875C22.4062%2037.2202%2022.6861%2037.5%2023.0312%2037.5H30.8438C31.1889%2037.5%2031.4688%2037.2202%2031.4688%2036.875V31.875C31.4688%2031.5298%2031.1889%2031.25%2030.8438%2031.25H23.0312ZM23.6562%2036.25V32.5H30.2188V36.25H23.6562Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M18.5312%208C18.1861%208%2017.9062%208.27982%2017.9062%208.625V9.71875H11.6562C11.3111%209.71875%2011.0312%209.99857%2011.0312%2010.3438V12.8438C11.0312%2013.1889%2011.3111%2013.4688%2011.6562%2013.4688H14V26.875C14%2027.2202%2014.2798%2027.5%2014.625%2027.5H15.5625V28.75H14.625C14.2798%2028.75%2014%2029.0298%2014%2029.375V39.375C14%2039.7202%2014.2798%2040%2014.625%2040H33.375C33.7202%2040%2034%2039.7202%2034%2039.375V29.375C34%2029.0298%2033.7202%2028.75%2033.375%2028.75H32.4375V27.5H33.375C33.7202%2027.5%2034%2027.2202%2034%2026.875V13.4688H36.3438C36.6889%2013.4688%2036.9688%2013.1889%2036.9688%2012.8438V10.3438C36.9688%209.99857%2036.6889%209.71875%2036.3438%209.71875H30.0938V8.625C30.0938%208.27982%2029.8139%208%2029.4688%208H18.5312ZM32.75%2013.4688H30.0938V14.5625C30.0938%2014.9077%2029.8139%2015.1875%2029.4688%2015.1875H26.5V17.9375C26.5%2018.1033%2026.4342%2018.2622%2026.3169%2018.3794L24.4419%2020.2544C24.1979%2020.4985%2023.8021%2020.4985%2023.5581%2020.2544L21.6831%2018.3794C21.5658%2018.2622%2021.5%2018.1033%2021.5%2017.9375V15.1875H18.5312C18.1861%2015.1875%2017.9062%2014.9077%2017.9062%2014.5625V13.4688H15.25V26.25H18.0625V24.6875C18.0625%2024.3423%2018.3423%2024.0625%2018.6875%2024.0625H22.125C22.2484%2024.0625%2022.369%2024.099%2022.4717%2024.1675L24%2025.1863L25.5283%2024.1675C25.631%2024.099%2025.7516%2024.0625%2025.875%2024.0625H29.3125C29.6577%2024.0625%2029.9375%2024.3423%2029.9375%2024.6875V26.25H32.75V13.4688ZM35.7188%2012.2188V10.9688H30.0938V12.2188H35.7188ZM28.8438%209.25H19.1562V13.9375H28.8438V9.25ZM17.9062%2012.2188V10.9688H12.2812V12.2188H17.9062ZM25.25%2015.1875H22.75V17.6786L24%2018.9286L25.25%2017.6786V15.1875ZM28.6875%2025.3125H26.0642L24.3467%2026.4575C24.1367%2026.5975%2023.8632%2026.5975%2023.6533%2026.4575L21.9358%2025.3125H19.3125V28.75H28.6875V25.3125ZM31.1875%2027.5H29.9375V28.75H31.1875V27.5ZM16.8125%2028.75H18.0625V27.5H16.8125V28.75ZM15.25%2030V38.75H32.75V30H15.25Z'%20fill='white'/%3e%3c/svg%3e";var jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je=function(t,e){if(!t)throw Nl(e)},Nl=function(t){return new Error("Firebase Database ("+lS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[i++]=s:s<2048?(e[i++]=s>>6|192,e[i++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[i++]=s>>18|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128,e[i++]=s&63|128):(e[i++]=s>>12|224,e[i++]=s>>6&63|128,e[i++]=s&63|128)}return e},oE=function(t){const e=[];let i=0,n=0;for(;i<t.length;){const s=t[i++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[i++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[i++],l=t[i++],p=t[i++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|p&63)-65536;e[n++]=String.fromCharCode(55296+(f>>10)),e[n++]=String.fromCharCode(56320+(f&1023))}else{const a=t[i++],l=t[i++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},Cg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,p=l?t[s+1]:0,f=s+2<t.length,g=f?t[s+2]:0,m=a>>2,k=(a&3)<<4|p>>4;let T=(p&15)<<2|g>>6,A=g&63;f||(A=64,l||(T=64)),n.push(i[m],i[k],i[T],i[A])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=i[t.charAt(s++)],p=s<t.length?i[t.charAt(s)]:0;++s;const g=s<t.length?i[t.charAt(s)]:64;++s;const k=s<t.length?i[t.charAt(s)]:64;if(++s,a==null||p==null||g==null||k==null)throw new lE;const T=a<<2|p>>4;if(n.push(T),g!==64){const A=p<<4&240|g>>2;if(n.push(A),k!==64){const P=g<<6&192|k;n.push(P)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cS=function(t){const e=hS(t);return Cg.encodeByteArray(e,!0)},jd=function(t){return cS(t).replace(/\./g,"")},gm=function(t){try{return Cg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t){return uS(void 0,t)}function uS(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const i=e;return new Date(i.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const i in e)!e.hasOwnProperty(i)||!cE(i)||(t[i]=uS(t[i],e[i]));return t}function cE(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=()=>uE().__FIREBASE_DEFAULTS__,pE=()=>{if(typeof process>"u"||typeof jv>"u")return;const t=jv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gm(t[1]);return e&&JSON.parse(e)},dS=()=>{try{return dE()||pE()||fE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xE=t=>{var e,i;return(i=(e=dS())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[t]},pS=t=>{const e=xE(t);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),n]:[e.substring(0,i),n]},fS=()=>{var t;return(t=dS())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,n)=>{i?this.reject(i):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jd(JSON.stringify(i)),jd(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mE())}function gE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gS(){return lS.NODE_ADMIN===!0}function yE(){try{return typeof indexedDB=="object"}catch{return!1}}function vE(){return new Promise((t,e)=>{try{let i=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),i||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{i=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="FirebaseError";class Rl extends Error{constructor(e,i,n){super(i),this.code=e,this.customData=n,this.name=bE,Object.setPrototypeOf(this,Rl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yS.prototype.create)}}class yS{constructor(e,i,n){this.service=e,this.serviceName=i,this.errors=n}create(e,...i){const n=i[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?wE(a,n):"Error",p=`${this.serviceName}: ${l} (${s}).`;return new Rl(s,p,n)}}function wE(t,e){return t.replace(_E,(i,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const _E=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){return JSON.parse(t)}function xn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=function(t){let e={},i={},n={},s="";try{const a=t.split(".");e=lc(gm(a[0])||""),i=lc(gm(a[1])||""),s=a[2],n=i.d||{},delete i.d}catch{}return{header:e,claims:i,data:n,signature:s}},CE=function(t){const e=vS(t),i=e.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},SE=function(t){const e=vS(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Wv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wd(t,e,i){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=e.call(i,t[s],s,t));return n}function ym(t,e){if(t===e)return!0;const i=Object.keys(t),n=Object.keys(e);for(const s of i){if(!n.includes(s))return!1;const a=t[s],l=e[s];if(zv(a)&&zv(l)){if(!ym(a,l))return!1}else if(a!==l)return!1}for(const s of n)if(!i.includes(s))return!1;return!0}function zv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t){const e=[];for(const[i,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,i){i||(i=0);const n=this.W_;if(typeof e=="string")for(let k=0;k<16;k++)n[k]=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),i+=4;else for(let k=0;k<16;k++)n[k]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i+=4;for(let k=16;k<80;k++){const T=n[k-3]^n[k-8]^n[k-14]^n[k-16];n[k]=(T<<1|T>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],p=this.chain_[3],f=this.chain_[4],g,m;for(let k=0;k<80;k++){k<40?k<20?(g=p^a&(l^p),m=1518500249):(g=a^l^p,m=1859775393):k<60?(g=a&l|p&(a|l),m=2400959708):(g=a^l^p,m=3395469782);const T=(s<<5|s>>>27)+g+f+m+n[k]&4294967295;f=p,p=l,l=(a<<30|a>>>2)&4294967295,a=s,s=T}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,i){if(e==null)return;i===void 0&&(i=e.length);const n=i-this.blockSize;let s=0;const a=this.buf_;let l=this.inbuf_;for(;s<i;){if(l===0)for(;s<=n;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<i;)if(a[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}else for(;s<i;)if(a[l]=e[s],++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=i}digest(){const e=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=i&255,i/=256;this.compress_(this.buf_);let n=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)e[n]=this.chain_[s]>>a&255,++n;return e}}function ME(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s>=55296&&s<=56319){const a=s-55296;n++,Je(n<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(n)-56320;s=65536+(a<<10)+l}s<128?e[i++]=s:s<2048?(e[i++]=s>>6|192,e[i++]=s&63|128):s<65536?(e[i++]=s>>12|224,e[i++]=s>>6&63|128,e[i++]=s&63|128):(e[i++]=s>>18|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128,e[i++]=s&63|128)}return e},N0=function(t){let e=0;for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,i++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t){return t&&t._delegate?t._delegate:t}class fl{constructor(e,i,n){this.name=e,this.instanceFactory=i,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const n=new Sg;if(this.instancesDeferred.set(i,n),this.isInitialized(i)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:i});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(i=e==null?void 0:e.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DE(e))try{this.getOrInitializeService({instanceIdentifier:Aa})}catch{}for(const[i,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(i);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=Aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Aa){return this.instances.has(e)}getOptions(e=Aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:i});for(const[a,l]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(a);n===p&&l.resolve(s)}return s}onInit(e,i){var n;const s=this.normalizeInstanceIdentifier(i),a=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,i){const n=this.onInitCallbacks.get(i);if(n)for(const s of n)try{s(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:AE(e),options:i}),this.instances.set(e,n),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Aa){return this.component?this.component.multipleInstances?e:Aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AE(t){return t===Aa?void 0:t}function DE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new EE(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gt||(Gt={}));const FE={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},BE=Gt.INFO,LE={[Gt.DEBUG]:"log",[Gt.VERBOSE]:"log",[Gt.INFO]:"info",[Gt.WARN]:"warn",[Gt.ERROR]:"error"},NE=(t,e,...i)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=LE[e];if(s)console[s](`[${n}]  ${t.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kg{constructor(e){this.name=e,this._logLevel=BE,this._logHandler=NE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gt.DEBUG,...e),this._logHandler(this,Gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gt.VERBOSE,...e),this._logHandler(this,Gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gt.INFO,...e),this._logHandler(this,Gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gt.WARN,...e),this._logHandler(this,Gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gt.ERROR,...e),this._logHandler(this,Gt.ERROR,...e)}}const RE=(t,e)=>e.some(i=>t instanceof i);let $v,Hv;function VE(){return $v||($v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OE(){return Hv||(Hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bS=new WeakMap,vm=new WeakMap,wS=new WeakMap,df=new WeakMap,Tg=new WeakMap;function jE(t){const e=new Promise((i,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{i(ta(t.result)),s()},l=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(i=>{i instanceof IDBCursor&&bS.set(i,t)}).catch(()=>{}),Tg.set(e,t),e}function WE(t){if(vm.has(t))return;const e=new Promise((i,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{i(),s()},l=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});vm.set(t,e)}let bm={get(t,e,i){if(t instanceof IDBTransaction){if(e==="done")return vm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wS.get(t);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ta(t[e])},set(t,e,i){return t[e]=i,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zE(t){bm=t(bm)}function $E(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const n=t.call(pf(this),e,...i);return wS.set(n,e.sort?e.sort():[e]),ta(n)}:OE().includes(t)?function(...e){return t.apply(pf(this),e),ta(bS.get(this))}:function(...e){return ta(t.apply(pf(this),e))}}function HE(t){return typeof t=="function"?$E(t):(t instanceof IDBTransaction&&WE(t),RE(t,VE())?new Proxy(t,bm):t)}function ta(t){if(t instanceof IDBRequest)return jE(t);if(df.has(t))return df.get(t);const e=HE(t);return e!==t&&(df.set(t,e),Tg.set(e,t)),e}const pf=t=>Tg.get(t);function YE(t,e,{blocked:i,upgrade:n,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),p=ta(l);return n&&l.addEventListener("upgradeneeded",f=>{n(ta(l.result),f.oldVersion,f.newVersion,ta(l.transaction),f)}),i&&l.addEventListener("blocked",f=>i(f.oldVersion,f.newVersion,f)),p.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const XE=["get","getKey","getAll","getAllKeys","count"],UE=["put","add","delete","clear"],ff=new Map;function Yv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ff.get(e))return ff.get(e);const i=e.replace(/FromIndex$/,""),n=e!==i,s=UE.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!(s||XE.includes(i)))return;const a=async function(l,...p){const f=this.transaction(l,s?"readwrite":"readonly");let g=f.store;return n&&(g=g.index(p.shift())),(await Promise.all([g[i](...p),s&&f.done]))[0]};return ff.set(e,a),a}zE(t=>({...t,get:(e,i,n)=>Yv(e,i)||t.get(e,i,n),has:(e,i)=>!!Yv(e,i)||t.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(KE(i)){const n=i.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(i=>i).join(" ")}}function KE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wm="@firebase/app",Xv="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new kg("@firebase/app"),QE="@firebase/app-compat",ZE="@firebase/analytics-compat",JE="@firebase/analytics",qE="@firebase/app-check-compat",eA="@firebase/app-check",tA="@firebase/auth",iA="@firebase/auth-compat",nA="@firebase/database",sA="@firebase/database-compat",rA="@firebase/functions",aA="@firebase/functions-compat",oA="@firebase/installations",lA="@firebase/installations-compat",hA="@firebase/messaging",cA="@firebase/messaging-compat",uA="@firebase/performance",dA="@firebase/performance-compat",pA="@firebase/remote-config",fA="@firebase/remote-config-compat",xA="@firebase/storage",mA="@firebase/storage-compat",gA="@firebase/firestore",yA="@firebase/firestore-compat",vA="firebase",bA="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="[DEFAULT]",wA={[wm]:"fire-core",[QE]:"fire-core-compat",[JE]:"fire-analytics",[ZE]:"fire-analytics-compat",[eA]:"fire-app-check",[qE]:"fire-app-check-compat",[tA]:"fire-auth",[iA]:"fire-auth-compat",[nA]:"fire-rtdb",[sA]:"fire-rtdb-compat",[rA]:"fire-fn",[aA]:"fire-fn-compat",[oA]:"fire-iid",[lA]:"fire-iid-compat",[hA]:"fire-fcm",[cA]:"fire-fcm-compat",[uA]:"fire-perf",[dA]:"fire-perf-compat",[pA]:"fire-rc",[fA]:"fire-rc-compat",[xA]:"fire-gcs",[mA]:"fire-gcs-compat",[gA]:"fire-fst",[yA]:"fire-fst-compat","fire-js":"fire-js",[vA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=new Map,Cm=new Map;function _A(t,e){try{t.container.addComponent(e)}catch(i){to.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,i)}}function hc(t){const e=t.name;if(Cm.has(e))return to.debug(`There were multiple attempts to register component ${e}.`),!1;Cm.set(e,t);for(const i of zd.values())_A(i,t);return!0}function _S(t,e){const i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ia=new yS("app","Firebase",CA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,i,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=bA;function SS(t,e={}){let i=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:_m,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw ia.create("bad-app-name",{appName:String(s)});if(i||(i=fS()),!i)throw ia.create("no-options");const a=zd.get(s);if(a){if(ym(i,a.options)&&ym(n,a.config))return a;throw ia.create("duplicate-app",{appName:s})}const l=new IE(s);for(const f of Cm.values())l.addComponent(f);const p=new SA(i,n,l);return zd.set(s,p),p}function kS(t=_m){const e=zd.get(t);if(!e&&t===_m&&fS())return SS();if(!e)throw ia.create("no-app",{appName:t});return e}function na(t,e,i){var n;let s=(n=wA[t])!==null&&n!==void 0?n:t;i&&(s+=`-${i}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const p=[`Unable to register library "${s}" with version "${e}":`];a&&p.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&p.push("and"),l&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),to.warn(p.join(" "));return}hc(new fl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="firebase-heartbeat-database",TA=1,cc="firebase-heartbeat-store";let xf=null;function TS(){return xf||(xf=YE(kA,TA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(cc)}}}).catch(t=>{throw ia.create("idb-open",{originalErrorMessage:t.message})})),xf}async function MA(t){try{return await(await TS()).transaction(cc).objectStore(cc).get(MS(t))}catch(e){if(e instanceof Rl)to.warn(e.message);else{const i=ia.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});to.warn(i.message)}}}async function Uv(t,e){try{const n=(await TS()).transaction(cc,"readwrite");await n.objectStore(cc).put(e,MS(t)),await n.done}catch(i){if(i instanceof Rl)to.warn(i.message);else{const n=ia.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});to.warn(n.message)}}}function MS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=1024,EA=30*24*60*60*1e3;class AA{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new IA(i),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Gv();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=EA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Gv(),{heartbeatsToSend:i,unsentEntries:n}=DA(this._heartbeatsCache.heartbeats),s=jd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Gv(){return new Date().toISOString().substring(0,10)}function DA(t,e=PA){const i=[];let n=t.slice();for(const s of t){const a=i.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),Kv(i)>e){a.dates.pop();break}}else if(i.push({agent:s.agent,dates:[s.date]}),Kv(i)>e){i.pop();break}n=n.slice(1)}return{heartbeatsToSend:i,unsentEntries:n}}class IA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yE()?vE().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await MA(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const s=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const s=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Kv(t){return jd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t){hc(new fl("platform-logger",e=>new GE(e),"PRIVATE")),hc(new fl("heartbeat",e=>new AA(e),"PRIVATE")),na(wm,Xv,t),na(wm,Xv,"esm2017"),na("fire-js","")}FA("");var BA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qe,Mg=Mg||{},_t=BA||self;function R0(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function V0(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function LA(t){return Object.prototype.hasOwnProperty.call(t,mf)&&t[mf]||(t[mf]=++NA)}var mf="closure_uid_"+(1e9*Math.random()>>>0),NA=0;function RA(t,e,i){return t.call.apply(t.bind,arguments)}function VA(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,n),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Pn(t,e,i){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Pn=RA:Pn=VA,Pn.apply(null,arguments)}function ku(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var n=i.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function cn(t,e){function i(){}i.prototype=e.prototype,t.$=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.ac=function(n,s,a){for(var l=Array(arguments.length-2),p=2;p<arguments.length;p++)l[p-2]=arguments[p];return e.prototype[s].apply(n,l)}}function ba(){this.s=this.s,this.o=this.o}var OA=0;ba.prototype.s=!1;ba.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),OA!=0)&&LA(this)};ba.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const PS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let i=0;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1};function Pg(t){const e=t.length;if(0<e){const i=Array(e);for(let n=0;n<e;n++)i[n]=t[n];return i}return[]}function Qv(t,e){for(let i=1;i<arguments.length;i++){const n=arguments[i];if(R0(n)){const s=t.length||0,a=n.length||0;t.length=s+a;for(let l=0;l<a;l++)t[s+l]=n[l]}else t.push(n)}}function En(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}En.prototype.h=function(){this.defaultPrevented=!0};var jA=function(){if(!_t.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{_t.addEventListener("test",()=>{},e),_t.removeEventListener("test",()=>{},e)}catch{}return t}();function uc(t){return/^[\s\xa0]*$/.test(t)}function O0(){var t=_t.navigator;return t&&(t=t.userAgent)?t:""}function Qs(t){return O0().indexOf(t)!=-1}function Eg(t){return Eg[" "](t),t}Eg[" "]=function(){};function WA(t,e){var i=B9;return Object.prototype.hasOwnProperty.call(i,t)?i[t]:i[t]=e(t)}var zA=Qs("Opera"),xl=Qs("Trident")||Qs("MSIE"),ES=Qs("Edge"),Sm=ES||xl,AS=Qs("Gecko")&&!(O0().toLowerCase().indexOf("webkit")!=-1&&!Qs("Edge"))&&!(Qs("Trident")||Qs("MSIE"))&&!Qs("Edge"),$A=O0().toLowerCase().indexOf("webkit")!=-1&&!Qs("Edge");function DS(){var t=_t.document;return t?t.documentMode:void 0}var km;e:{var gf="",yf=function(){var t=O0();if(AS)return/rv:([^\);]+)(\)|;)/.exec(t);if(ES)return/Edge\/([\d\.]+)/.exec(t);if(xl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if($A)return/WebKit\/(\S+)/.exec(t);if(zA)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(yf&&(gf=yf?yf[1]:""),xl){var vf=DS();if(vf!=null&&vf>parseFloat(gf)){km=String(vf);break e}}km=gf}var Tm;if(_t.document&&xl){var Zv=DS();Tm=Zv||parseInt(km,10)||void 0}else Tm=void 0;var HA=Tm;function dc(t,e){if(En.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(AS){e:{try{Eg(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else i=="mouseover"?e=t.fromElement:i=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:YA[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&dc.$.h.call(this)}}cn(dc,En);var YA={2:"touch",3:"pen",4:"mouse"};dc.prototype.h=function(){dc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var j0="closure_listenable_"+(1e6*Math.random()|0),XA=0;function UA(t,e,i,n,s){this.listener=t,this.proxy=null,this.src=e,this.type=i,this.capture=!!n,this.la=s,this.key=++XA,this.fa=this.ia=!1}function W0(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ag(t,e,i){for(const n in t)e.call(i,t[n],n,t)}function GA(t,e){for(const i in t)e.call(void 0,t[i],i,t)}function IS(t){const e={};for(const i in t)e[i]=t[i];return e}const Jv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function FS(t,e){let i,n;for(let s=1;s<arguments.length;s++){n=arguments[s];for(i in n)t[i]=n[i];for(let a=0;a<Jv.length;a++)i=Jv[a],Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}}function z0(t){this.src=t,this.g={},this.h=0}z0.prototype.add=function(t,e,i,n,s){var a=t.toString();t=this.g[a],t||(t=this.g[a]=[],this.h++);var l=Pm(t,e,n,s);return-1<l?(e=t[l],i||(e.ia=!1)):(e=new UA(e,this.src,a,!!n,s),e.ia=i,t.push(e)),e};function Mm(t,e){var i=e.type;if(i in t.g){var n=t.g[i],s=PS(n,e),a;(a=0<=s)&&Array.prototype.splice.call(n,s,1),a&&(W0(e),t.g[i].length==0&&(delete t.g[i],t.h--))}}function Pm(t,e,i,n){for(var s=0;s<t.length;++s){var a=t[s];if(!a.fa&&a.listener==e&&a.capture==!!i&&a.la==n)return s}return-1}var Dg="closure_lm_"+(1e6*Math.random()|0),bf={};function BS(t,e,i,n,s){if(Array.isArray(e)){for(var a=0;a<e.length;a++)BS(t,e[a],i,n,s);return null}return i=RS(i),t&&t[j0]?t.O(e,i,V0(n)?!!n.capture:!!n,s):KA(t,e,i,!1,n,s)}function KA(t,e,i,n,s,a){if(!e)throw Error("Invalid event type");var l=V0(s)?!!s.capture:!!s,p=Fg(t);if(p||(t[Dg]=p=new z0(t)),i=p.add(e,i,n,l,a),i.proxy)return i;if(n=QA(),i.proxy=n,n.src=t,n.listener=i,t.addEventListener)jA||(s=l),s===void 0&&(s=!1),t.addEventListener(e.toString(),n,s);else if(t.attachEvent)t.attachEvent(NS(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return i}function QA(){function t(i){return e.call(t.src,t.listener,i)}const e=ZA;return t}function LS(t,e,i,n,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)LS(t,e[a],i,n,s);else n=V0(n)?!!n.capture:!!n,i=RS(i),t&&t[j0]?(t=t.i,e=String(e).toString(),e in t.g&&(a=t.g[e],i=Pm(a,i,n,s),-1<i&&(W0(a[i]),Array.prototype.splice.call(a,i,1),a.length==0&&(delete t.g[e],t.h--)))):t&&(t=Fg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Pm(e,i,n,s)),(i=-1<t?e[t]:null)&&Ig(i))}function Ig(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[j0])Mm(e.i,t);else{var i=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(i,n,t.capture):e.detachEvent?e.detachEvent(NS(i),n):e.addListener&&e.removeListener&&e.removeListener(n),(i=Fg(e))?(Mm(i,t),i.h==0&&(i.src=null,e[Dg]=null)):W0(t)}}}function NS(t){return t in bf?bf[t]:bf[t]="on"+t}function ZA(t,e){if(t.fa)t=!0;else{e=new dc(e,this);var i=t.listener,n=t.la||t.src;t.ia&&Ig(t),t=i.call(n,e)}return t}function Fg(t){return t=t[Dg],t instanceof z0?t:null}var wf="__closure_events_fn_"+(1e9*Math.random()>>>0);function RS(t){return typeof t=="function"?t:(t[wf]||(t[wf]=function(e){return t.handleEvent(e)}),t[wf])}function ln(){ba.call(this),this.i=new z0(this),this.S=this,this.J=null}cn(ln,ba);ln.prototype[j0]=!0;ln.prototype.removeEventListener=function(t,e,i,n){LS(this,t,e,i,n)};function gn(t,e){var i,n=t.J;if(n)for(i=[];n;n=n.J)i.push(n);if(t=t.S,n=e.type||e,typeof e=="string")e=new En(e,t);else if(e instanceof En)e.target=e.target||t;else{var s=e;e=new En(n,t),FS(e,s)}if(s=!0,i)for(var a=i.length-1;0<=a;a--){var l=e.g=i[a];s=Tu(l,n,!0,e)&&s}if(l=e.g=t,s=Tu(l,n,!0,e)&&s,s=Tu(l,n,!1,e)&&s,i)for(a=0;a<i.length;a++)l=e.g=i[a],s=Tu(l,n,!1,e)&&s}ln.prototype.N=function(){if(ln.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var i=t.g[e],n=0;n<i.length;n++)W0(i[n]);delete t.g[e],t.h--}}this.J=null};ln.prototype.O=function(t,e,i,n){return this.i.add(String(t),e,!1,i,n)};ln.prototype.P=function(t,e,i,n){return this.i.add(String(t),e,!0,i,n)};function Tu(t,e,i,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==i){var p=l.listener,f=l.la||l.src;l.ia&&Mm(t.i,l),s=p.call(f,n)!==!1&&s}}return s&&!n.defaultPrevented}var Bg=_t.JSON.stringify;class JA{constructor(e,i){this.i=e,this.j=i,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function qA(){var t=Lg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class e9{constructor(){this.h=this.g=null}add(e,i){const n=VS.get();n.set(e,i),this.h?this.h.next=n:this.g=n,this.h=n}}var VS=new JA(()=>new t9,t=>t.reset());class t9{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}function i9(t){var e=1;t=t.split(":");const i=[];for(;0<e&&t.length;)i.push(t.shift()),e--;return t.length&&i.push(t.join(":")),i}function n9(t){_t.setTimeout(()=>{throw t},0)}let pc,fc=!1,Lg=new e9,OS=()=>{const t=_t.Promise.resolve(void 0);pc=()=>{t.then(s9)}};var s9=()=>{for(var t;t=qA();){try{t.h.call(t.g)}catch(i){n9(i)}var e=VS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}fc=!1};function $0(t,e){ln.call(this),this.h=t||1,this.g=e||_t,this.j=Pn(this.qb,this),this.l=Date.now()}cn($0,ln);qe=$0.prototype;qe.ga=!1;qe.T=null;qe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),gn(this,"tick"),this.ga&&(Ng(this),this.start()))}};qe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ng(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}qe.N=function(){$0.$.N.call(this),Ng(this),delete this.g};function Rg(t,e,i){if(typeof t=="function")i&&(t=Pn(t,i));else if(t&&typeof t.handleEvent=="function")t=Pn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:_t.setTimeout(t,e||0)}function jS(t){t.g=Rg(()=>{t.g=null,t.i&&(t.i=!1,jS(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class r9 extends ba{constructor(e,i){super(),this.m=e,this.j=i,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jS(this)}N(){super.N(),this.g&&(_t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xc(t){ba.call(this),this.h=t,this.g={}}cn(xc,ba);var qv=[];function WS(t,e,i,n){Array.isArray(i)||(i&&(qv[0]=i.toString()),i=qv);for(var s=0;s<i.length;s++){var a=BS(e,i[s],n||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function zS(t){Ag(t.g,function(e,i){this.g.hasOwnProperty(i)&&Ig(e)},t),t.g={}}xc.prototype.N=function(){xc.$.N.call(this),zS(this)};xc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function H0(){this.g=!0}H0.prototype.Ea=function(){this.g=!1};function a9(t,e,i,n,s,a){t.info(function(){if(t.g)if(a)for(var l="",p=a.split("&"),f=0;f<p.length;f++){var g=p[f].split("=");if(1<g.length){var m=g[0];g=g[1];var k=m.split("_");l=2<=k.length&&k[1]=="type"?l+(m+"="+g+"&"):l+(m+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+n+") [attempt "+s+"]: "+e+`
`+i+`
`+l})}function o9(t,e,i,n,s,a,l){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+s+"]: "+e+`
`+i+`
`+a+" "+l})}function zo(t,e,i,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+h9(t,i)+(n?" "+n:"")})}function l9(t,e){t.info(function(){return"TIMEOUT: "+e})}H0.prototype.info=function(){};function h9(t,e){if(!t.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i){for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var n=i[t];if(!(2>n.length)){var s=n[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if(a!="noop"&&a!="stop"&&a!="close")for(var l=1;l<s.length;l++)s[l]=""}}}}return Bg(i)}catch{return e}}var co={},eb=null;function Y0(){return eb=eb||new ln}co.Ta="serverreachability";function $S(t){En.call(this,co.Ta,t)}cn($S,En);function mc(t){const e=Y0();gn(e,new $S(e))}co.STAT_EVENT="statevent";function HS(t,e){En.call(this,co.STAT_EVENT,t),this.stat=e}cn(HS,En);function Fn(t){const e=Y0();gn(e,new HS(e,t))}co.Ua="timingevent";function YS(t,e){En.call(this,co.Ua,t),this.size=e}cn(YS,En);function Nc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return _t.setTimeout(function(){t()},e)}var X0={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},XS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Vg(){}Vg.prototype.h=null;function tb(t){return t.h||(t.h=t.i())}function US(){}var Rc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Og(){En.call(this,"d")}cn(Og,En);function jg(){En.call(this,"c")}cn(jg,En);var Em;function U0(){}cn(U0,Vg);U0.prototype.g=function(){return new XMLHttpRequest};U0.prototype.i=function(){return{}};Em=new U0;function Vc(t,e,i,n){this.l=t,this.j=e,this.m=i,this.W=n||1,this.U=new xc(this),this.P=c9,t=Sm?125:void 0,this.V=new $0(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new GS}function GS(){this.i=null,this.g="",this.h=!1}var c9=45e3,Am={},$d={};qe=Vc.prototype;qe.setTimeout=function(t){this.P=t};function Dm(t,e,i){t.L=1,t.v=K0(Er(e)),t.s=i,t.S=!0,KS(t,null)}function KS(t,e){t.G=Date.now(),Oc(t),t.A=Er(t.v);var i=t.A,n=t.W;Array.isArray(n)||(n=[String(n)]),n5(i.i,"t",n),t.C=0,i=t.l.J,t.h=new GS,t.g=S5(t.l,i?e:null,!t.s),0<t.O&&(t.M=new r9(Pn(t.Pa,t,t.g),t.O)),WS(t.U,t.g,"readystatechange",t.nb),e=t.I?IS(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),mc(),a9(t.j,t.u,t.A,t.m,t.W,t.s)}qe.nb=function(t){t=t.target;const e=this.M;e&&Js(t)==3?e.l():this.Pa(t)};qe.Pa=function(t){try{if(t==this.g)e:{const m=Js(this.g);var e=this.g.Ia();const k=this.g.da();if(!(3>m)&&(m!=3||Sm||this.g&&(this.h.h||this.g.ja()||rb(this.g)))){this.J||m!=4||e==7||(e==8||0>=k?mc(3):mc(2)),G0(this);var i=this.g.da();this.ca=i;t:if(QS(this)){var n=rb(this.g);t="";var s=n.length,a=Js(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Va(this),Fh(this);var l="";break t}this.h.i=new _t.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:a&&e==s-1});n.splice(0,s),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=i==200,o9(this.j,this.u,this.A,this.m,this.W,m,i),this.i){if(this.aa&&!this.K){t:{if(this.g){var p,f=this.g;if((p=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!uc(p)){var g=p;break t}}g=null}if(i=g)zo(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Im(this,i);else{this.i=!1,this.o=3,Fn(12),Va(this),Fh(this);break e}}this.S?(ZS(this,m,l),Sm&&this.i&&m==3&&(WS(this.U,this.V,"tick",this.mb),this.V.start())):(zo(this.j,this.m,l,null),Im(this,l)),m==4&&Va(this),this.i&&!this.J&&(m==4?b5(this.l,this):(this.i=!1,Oc(this)))}else D9(this.g),i==400&&0<l.indexOf("Unknown SID")?(this.o=3,Fn(12)):(this.o=0,Fn(13)),Va(this),Fh(this)}}}catch{}finally{}};function QS(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function ZS(t,e,i){let n=!0,s;for(;!t.J&&t.C<i.length;)if(s=u9(t,i),s==$d){e==4&&(t.o=4,Fn(14),n=!1),zo(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Am){t.o=4,Fn(15),zo(t.j,t.m,i,"[Invalid Chunk]"),n=!1;break}else zo(t.j,t.m,s,null),Im(t,s);QS(t)&&s!=$d&&s!=Am&&(t.h.g="",t.C=0),e!=4||i.length!=0||t.h.h||(t.o=1,Fn(16),n=!1),t.i=t.i&&n,n?0<i.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+i.length),Xg(e),e.M=!0,Fn(11))):(zo(t.j,t.m,i,"[Invalid Chunked Response]"),Va(t),Fh(t))}qe.mb=function(){if(this.g){var t=Js(this.g),e=this.g.ja();this.C<e.length&&(G0(this),ZS(this,t,e),this.i&&t!=4&&Oc(this))}};function u9(t,e){var i=t.C,n=e.indexOf(`
`,i);return n==-1?$d:(i=Number(e.substring(i,n)),isNaN(i)?Am:(n+=1,n+i>e.length?$d:(e=e.slice(n,n+i),t.C=n+i,e)))}qe.cancel=function(){this.J=!0,Va(this)};function Oc(t){t.Y=Date.now()+t.P,JS(t,t.P)}function JS(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Nc(Pn(t.lb,t),e)}function G0(t){t.B&&(_t.clearTimeout(t.B),t.B=null)}qe.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(l9(this.j,this.A),this.L!=2&&(mc(),Fn(17)),Va(this),this.o=2,Fh(this)):JS(this,this.Y-t)};function Fh(t){t.l.H==0||t.J||b5(t.l,t)}function Va(t){G0(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Ng(t.V),zS(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Im(t,e){try{var i=t.l;if(i.H!=0&&(i.g==t||Fm(i.i,t))){if(!t.K&&Fm(i.i,t)&&i.H==3){try{var n=i.Ja.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var s=n;if(s[0]==0){e:if(!i.u){if(i.g)if(i.g.G+3e3<t.G)Xd(i),J0(i);else break e;Yg(i),Fn(18)}}else i.Fa=s[1],0<i.Fa-i.V&&37500>s[2]&&i.G&&i.A==0&&!i.v&&(i.v=Nc(Pn(i.ib,i),6e3));if(1>=a5(i.i)&&i.oa){try{i.oa()}catch{}i.oa=void 0}}else Oa(i,11)}else if((t.K||i.g==t)&&Xd(i),!uc(e))for(s=i.Ja.g.parse(e),e=0;e<s.length;e++){let g=s[e];if(i.V=g[0],g=g[1],i.H==2)if(g[0]=="c"){i.K=g[1],i.pa=g[2];const m=g[3];m!=null&&(i.ra=m,i.l.info("VER="+i.ra));const k=g[4];k!=null&&(i.Ga=k,i.l.info("SVER="+i.Ga));const T=g[5];T!=null&&typeof T=="number"&&0<T&&(n=1.5*T,i.L=n,i.l.info("backChannelRequestTimeoutMs_="+n)),n=i;const A=t.g;if(A){const P=A.g?A.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var a=n.i;a.g||P.indexOf("spdy")==-1&&P.indexOf("quic")==-1&&P.indexOf("h2")==-1||(a.j=a.l,a.g=new Set,a.h&&(Wg(a,a.h),a.h=null))}if(n.F){const L=A.g?A.g.getResponseHeader("X-HTTP-Session-Id"):null;L&&(n.Da=L,xi(n.I,n.F,L))}}i.H=3,i.h&&i.h.Ba(),i.ca&&(i.S=Date.now()-t.G,i.l.info("Handshake RTT: "+i.S+"ms")),n=i;var l=t;if(n.wa=C5(n,n.J?n.pa:null,n.Y),l.K){o5(n.i,l);var p=l,f=n.L;f&&p.setTimeout(f),p.B&&(G0(p),Oc(p)),n.g=l}else y5(n);0<i.j.length&&q0(i)}else g[0]!="stop"&&g[0]!="close"||Oa(i,7);else i.H==3&&(g[0]=="stop"||g[0]=="close"?g[0]=="stop"?Oa(i,7):Hg(i):g[0]!="noop"&&i.h&&i.h.Aa(g),i.A=0)}}mc(4)}catch{}}function d9(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(R0(t)){for(var e=[],i=t.length,n=0;n<i;n++)e.push(t[n]);return e}e=[],i=0;for(n in t)e[i++]=t[n];return e}function p9(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(R0(t)||typeof t=="string"){var e=[];t=t.length;for(var i=0;i<t;i++)e.push(i);return e}e=[],i=0;for(const n in t)e[i++]=n;return e}}}function qS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(R0(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var i=p9(t),n=d9(t),s=n.length,a=0;a<s;a++)e.call(void 0,n[a],i&&i[a],t)}var e5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function f9(t,e){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var n=t[i].indexOf("="),s=null;if(0<=n){var a=t[i].substring(0,n);s=t[i].substring(n+1)}else a=t[i];e(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Ya(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ya){this.h=t.h,Hd(this,t.j),this.s=t.s,this.g=t.g,Yd(this,t.m),this.l=t.l;var e=t.i,i=new gc;i.i=e.i,e.g&&(i.g=new Map(e.g),i.h=e.h),ib(this,i),this.o=t.o}else t&&(e=String(t).match(e5))?(this.h=!1,Hd(this,e[1]||"",!0),this.s=yh(e[2]||""),this.g=yh(e[3]||"",!0),Yd(this,e[4]),this.l=yh(e[5]||"",!0),ib(this,e[6]||"",!0),this.o=yh(e[7]||"")):(this.h=!1,this.i=new gc(null,this.h))}Ya.prototype.toString=function(){var t=[],e=this.j;e&&t.push(vh(e,nb,!0),":");var i=this.g;return(i||e=="file")&&(t.push("//"),(e=this.s)&&t.push(vh(e,nb,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.m,i!=null&&t.push(":",String(i))),(i=this.l)&&(this.g&&i.charAt(0)!="/"&&t.push("/"),t.push(vh(i,i.charAt(0)=="/"?g9:m9,!0))),(i=this.i.toString())&&t.push("?",i),(i=this.o)&&t.push("#",vh(i,v9)),t.join("")};function Er(t){return new Ya(t)}function Hd(t,e,i){t.j=i?yh(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Yd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ib(t,e,i){e instanceof gc?(t.i=e,b9(t.i,t.h)):(i||(e=vh(e,y9)),t.i=new gc(e,t.h))}function xi(t,e,i){t.i.set(e,i)}function K0(t){return xi(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function yh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function vh(t,e,i){return typeof t=="string"?(t=encodeURI(t).replace(e,x9),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function x9(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var nb=/[#\/\?@]/g,m9=/[#\?:]/g,g9=/[#\?]/g,y9=/[#\?@]/g,v9=/#/g;function gc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function wa(t){t.g||(t.g=new Map,t.h=0,t.i&&f9(t.i,function(e,i){t.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}qe=gc.prototype;qe.add=function(t,e){wa(this),this.i=null,t=Vl(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(e),this.h+=1,this};function t5(t,e){wa(t),e=Vl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function i5(t,e){return wa(t),e=Vl(t,e),t.g.has(e)}qe.forEach=function(t,e){wa(this),this.g.forEach(function(i,n){i.forEach(function(s){t.call(e,s,n,this)},this)},this)};qe.ta=function(){wa(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),i=[];for(let n=0;n<e.length;n++){const s=t[n];for(let a=0;a<s.length;a++)i.push(e[n])}return i};qe.Z=function(t){wa(this);let e=[];if(typeof t=="string")i5(this,t)&&(e=e.concat(this.g.get(Vl(this,t))));else{t=Array.from(this.g.values());for(let i=0;i<t.length;i++)e=e.concat(t[i])}return e};qe.set=function(t,e){return wa(this),this.i=null,t=Vl(this,t),i5(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};qe.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function n5(t,e,i){t5(t,e),0<i.length&&(t.i=null,t.g.set(Vl(t,e),Pg(i)),t.h+=i.length)}qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var i=0;i<e.length;i++){var n=e[i];const a=encodeURIComponent(String(n)),l=this.Z(n);for(n=0;n<l.length;n++){var s=a;l[n]!==""&&(s+="="+encodeURIComponent(String(l[n]))),t.push(s)}}return this.i=t.join("&")};function Vl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function b9(t,e){e&&!t.j&&(wa(t),t.i=null,t.g.forEach(function(i,n){var s=n.toLowerCase();n!=s&&(t5(this,n),n5(this,s,i))},t)),t.j=e}var w9=class{constructor(t,e){this.g=t,this.map=e}};function s5(t){this.l=t||_9,_t.PerformanceNavigationTiming?(t=_t.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(_t.g&&_t.g.Ka&&_t.g.Ka()&&_t.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _9=10;function r5(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function a5(t){return t.h?1:t.g?t.g.size:0}function Fm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Wg(t,e){t.g?t.g.add(e):t.h=e}function o5(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}s5.prototype.cancel=function(){if(this.i=l5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function l5(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const i of t.g.values())e=e.concat(i.F);return e}return Pg(t.i)}var C9=class{stringify(t){return _t.JSON.stringify(t,void 0)}parse(t){return _t.JSON.parse(t,void 0)}};function S9(){this.g=new C9}function k9(t,e,i){const n=i||"";try{qS(t,function(s,a){let l=s;V0(s)&&(l=Bg(s)),e.push(n+a+"="+encodeURIComponent(l))})}catch(s){throw e.push(n+"type="+encodeURIComponent("_badmap")),s}}function T9(t,e){const i=new H0;if(_t.Image){const n=new Image;n.onload=ku(Mu,i,n,"TestLoadImage: loaded",!0,e),n.onerror=ku(Mu,i,n,"TestLoadImage: error",!1,e),n.onabort=ku(Mu,i,n,"TestLoadImage: abort",!1,e),n.ontimeout=ku(Mu,i,n,"TestLoadImage: timeout",!1,e),_t.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Mu(t,e,i,n,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(n)}catch{}}function jc(t){this.l=t.fc||null,this.j=t.ob||!1}cn(jc,Vg);jc.prototype.g=function(){return new Q0(this.l,this.j)};jc.prototype.i=function(t){return function(){return t}}({});function Q0(t,e){ln.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=zg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cn(Q0,ln);var zg=0;qe=Q0.prototype;qe.open=function(t,e){if(this.readyState!=zg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,yc(this)};qe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||_t).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wc(this)),this.readyState=zg};qe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,yc(this)),this.g&&(this.readyState=3,yc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof _t.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;h5(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function h5(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}qe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Wc(this):yc(this),this.readyState==3&&h5(this)}};qe.Za=function(t){this.g&&(this.response=this.responseText=t,Wc(this))};qe.Ya=function(t){this.g&&(this.response=t,Wc(this))};qe.ka=function(){this.g&&Wc(this)};function Wc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,yc(t)}qe.setRequestHeader=function(t,e){this.v.append(t,e)};qe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};qe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var i=e.next();!i.done;)i=i.value,t.push(i[0]+": "+i[1]),i=e.next();return t.join(`\r
`)};function yc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Q0.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var M9=_t.JSON.parse;function Ii(t){ln.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=c5,this.L=this.M=!1}cn(Ii,ln);var c5="",P9=/^https?$/i,E9=["POST","PUT"];qe=Ii.prototype;qe.Oa=function(t){this.M=t};qe.ha=function(t,e,i,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Em.g(),this.C=this.u?tb(this.u):tb(Em),this.g.onreadystatechange=Pn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(a){sb(this,a);return}if(t=i||"",i=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var s in n)i.set(s,n[s]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const a of n.keys())i.set(a,n.get(a));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(i.keys()).find(a=>a.toLowerCase()=="content-type"),s=_t.FormData&&t instanceof _t.FormData,!(0<=PS(E9,e))||n||s||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of i)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{p5(this),0<this.B&&((this.L=A9(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pn(this.ua,this)):this.A=Rg(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(a){sb(this,a)}};function A9(t){return xl&&typeof t.timeout=="number"&&t.ontimeout!==void 0}qe.ua=function(){typeof Mg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gn(this,"timeout"),this.abort(8))};function sb(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,u5(t),Z0(t)}function u5(t){t.F||(t.F=!0,gn(t,"complete"),gn(t,"error"))}qe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,gn(this,"complete"),gn(this,"abort"),Z0(this))};qe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Z0(this,!0)),Ii.$.N.call(this)};qe.La=function(){this.s||(this.G||this.v||this.l?d5(this):this.kb())};qe.kb=function(){d5(this)};function d5(t){if(t.h&&typeof Mg<"u"&&(!t.C[1]||Js(t)!=4||t.da()!=2)){if(t.v&&Js(t)==4)Rg(t.La,0,t);else if(gn(t,"readystatechange"),Js(t)==4){t.h=!1;try{const l=t.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var i;if(!(i=e)){var n;if(n=l===0){var s=String(t.I).match(e5)[1]||null;!s&&_t.self&&_t.self.location&&(s=_t.self.location.protocol.slice(0,-1)),n=!P9.test(s?s.toLowerCase():"")}i=n}if(i)gn(t,"complete"),gn(t,"success");else{t.m=6;try{var a=2<Js(t)?t.g.statusText:""}catch{a=""}t.j=a+" ["+t.da()+"]",u5(t)}}finally{Z0(t)}}}}function Z0(t,e){if(t.g){p5(t);const i=t.g,n=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||gn(t,"ready");try{i.onreadystatechange=n}catch{}}}function p5(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(_t.clearTimeout(t.A),t.A=null)}qe.isActive=function(){return!!this.g};function Js(t){return t.g?t.g.readyState:0}qe.da=function(){try{return 2<Js(this)?this.g.status:-1}catch{return-1}};qe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};qe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),M9(e)}};function rb(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case c5:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function D9(t){const e={};t=(t.g&&2<=Js(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<t.length;n++){if(uc(t[n]))continue;var i=i9(t[n]);const s=i[0];if(i=i[1],typeof i!="string")continue;i=i.trim();const a=e[s]||[];e[s]=a,a.push(i)}GA(e,function(n){return n.join(", ")})}qe.Ia=function(){return this.m};qe.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function f5(t){let e="";return Ag(t,function(i,n){e+=n,e+=":",e+=i,e+=`\r
`}),e}function $g(t,e,i){e:{for(n in i){var n=!1;break e}n=!0}n||(i=f5(i),typeof t=="string"?i!=null&&encodeURIComponent(String(i)):xi(t,e,i))}function oh(t,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||e}function x5(t){this.Ga=0,this.j=[],this.l=new H0,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=oh("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=oh("baseRetryDelayMs",5e3,t),this.hb=oh("retryDelaySeedMs",1e4,t),this.eb=oh("forwardChannelMaxRetries",2,t),this.xa=oh("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new s5(t&&t.concurrentRequestLimit),this.Ja=new S9,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}qe=x5.prototype;qe.ra=8;qe.H=1;function Hg(t){if(m5(t),t.H==3){var e=t.W++,i=Er(t.I);if(xi(i,"SID",t.K),xi(i,"RID",e),xi(i,"TYPE","terminate"),zc(t,i),e=new Vc(t,t.l,e),e.L=2,e.v=K0(Er(i)),i=!1,_t.navigator&&_t.navigator.sendBeacon)try{i=_t.navigator.sendBeacon(e.v.toString(),"")}catch{}!i&&_t.Image&&(new Image().src=e.v,i=!0),i||(e.g=S5(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Oc(e)}_5(t)}function J0(t){t.g&&(Xg(t),t.g.cancel(),t.g=null)}function m5(t){J0(t),t.u&&(_t.clearTimeout(t.u),t.u=null),Xd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&_t.clearTimeout(t.m),t.m=null)}function q0(t){if(!r5(t.i)&&!t.m){t.m=!0;var e=t.Na;pc||OS(),fc||(pc(),fc=!0),Lg.add(e,t),t.C=0}}function I9(t,e){return a5(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Nc(Pn(t.Na,t,e),w5(t,t.C)),t.C++,!0)}qe.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Vc(this,this.l,t);let a=this.s;if(this.U&&(a?(a=IS(a),FS(a,this.U)):a=this.U),this.o!==null||this.O||(s.I=a,a=null),this.P)e:{for(var e=0,i=0;i<this.j.length;i++){t:{var n=this.j[i];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=i;break e}if(e===4096||i===this.j.length-1){e=i+1;break e}}e=1e3}else e=1e3;e=g5(this,s,e),i=Er(this.I),xi(i,"RID",t),xi(i,"CVER",22),this.F&&xi(i,"X-HTTP-Session-Id",this.F),zc(this,i),a&&(this.O?e="headers="+encodeURIComponent(String(f5(a)))+"&"+e:this.o&&$g(i,this.o,a)),Wg(this.i,s),this.bb&&xi(i,"TYPE","init"),this.P?(xi(i,"$req",e),xi(i,"SID","null"),s.aa=!0,Dm(s,i,null)):Dm(s,i,e),this.H=2}}else this.H==3&&(t?ab(this,t):this.j.length==0||r5(this.i)||ab(this))};function ab(t,e){var i;e?i=e.m:i=t.W++;const n=Er(t.I);xi(n,"SID",t.K),xi(n,"RID",i),xi(n,"AID",t.V),zc(t,n),t.o&&t.s&&$g(n,t.o,t.s),i=new Vc(t,t.l,i,t.C+1),t.o===null&&(i.I=t.s),e&&(t.j=e.F.concat(t.j)),e=g5(t,i,1e3),i.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Wg(t.i,i),Dm(i,n,e)}function zc(t,e){t.na&&Ag(t.na,function(i,n){xi(e,n,i)}),t.h&&qS({},function(i,n){xi(e,n,i)})}function g5(t,e,i){i=Math.min(t.j.length,i);var n=t.h?Pn(t.h.Va,t.h,t):null;e:{var s=t.j;let a=-1;for(;;){const l=["count="+i];a==-1?0<i?(a=s[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let p=!0;for(let f=0;f<i;f++){let g=s[f].g;const m=s[f].map;if(g-=a,0>g)a=Math.max(0,s[f].g-100),p=!1;else try{k9(m,l,"req"+g+"_")}catch{n&&n(m)}}if(p){n=l.join("&");break e}}}return t=t.j.splice(0,i),e.F=t,n}function y5(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;pc||OS(),fc||(pc(),fc=!0),Lg.add(e,t),t.A=0}}function Yg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Nc(Pn(t.Ma,t),w5(t,t.A)),t.A++,!0)}qe.Ma=function(){if(this.u=null,v5(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Nc(Pn(this.jb,this),t)}};qe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Fn(10),J0(this),v5(this))};function Xg(t){t.B!=null&&(_t.clearTimeout(t.B),t.B=null)}function v5(t){t.g=new Vc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Er(t.wa);xi(e,"RID","rpc"),xi(e,"SID",t.K),xi(e,"AID",t.V),xi(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&xi(e,"TO",t.qa),xi(e,"TYPE","xmlhttp"),zc(t,e),t.o&&t.s&&$g(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var i=t.g;t=t.pa,i.L=1,i.v=K0(Er(e)),i.s=null,i.S=!0,KS(i,t)}qe.ib=function(){this.v!=null&&(this.v=null,J0(this),Yg(this),Fn(19))};function Xd(t){t.v!=null&&(_t.clearTimeout(t.v),t.v=null)}function b5(t,e){var i=null;if(t.g==e){Xd(t),Xg(t),t.g=null;var n=2}else if(Fm(t.i,e))i=e.F,o5(t.i,e),n=1;else return;if(t.H!=0){if(e.i)if(n==1){i=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;n=Y0(),gn(n,new YS(n,i)),q0(t)}else y5(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(n==1&&I9(t,e)||n==2&&Yg(t)))switch(i&&0<i.length&&(e=t.i,e.i=e.i.concat(i)),s){case 1:Oa(t,5);break;case 4:Oa(t,10);break;case 3:Oa(t,6);break;default:Oa(t,2)}}}function w5(t,e){let i=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(i*=2),i*e}function Oa(t,e){if(t.l.info("Error code "+e),e==2){var i=null;t.h&&(i=null);var n=Pn(t.pb,t);i||(i=new Ya("//www.google.com/images/cleardot.gif"),_t.location&&_t.location.protocol=="http"||Hd(i,"https"),K0(i)),T9(i.toString(),n)}else Fn(2);t.H=0,t.h&&t.h.za(e),_5(t),m5(t)}qe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Fn(2)):(this.l.info("Failed to ping google.com"),Fn(1))};function _5(t){if(t.H=0,t.ma=[],t.h){const e=l5(t.i);(e.length!=0||t.j.length!=0)&&(Qv(t.ma,e),Qv(t.ma,t.j),t.i.i.length=0,Pg(t.j),t.j.length=0),t.h.ya()}}function C5(t,e,i){var n=i instanceof Ya?Er(i):new Ya(i);if(n.g!="")e&&(n.g=e+"."+n.g),Yd(n,n.m);else{var s=_t.location;n=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var a=new Ya(null);n&&Hd(a,n),e&&(a.g=e),s&&Yd(a,s),i&&(a.l=i),n=a}return i=t.F,e=t.Da,i&&e&&xi(n,i,e),xi(n,"VER",t.ra),zc(t,n),n}function S5(t,e,i){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=i&&t.Ha&&!t.va?new Ii(new jc({ob:!0})):new Ii(t.va),e.Oa(t.J),e}qe.isActive=function(){return!!this.h&&this.h.isActive(this)};function k5(){}qe=k5.prototype;qe.Ba=function(){};qe.Aa=function(){};qe.za=function(){};qe.ya=function(){};qe.isActive=function(){return!0};qe.Va=function(){};function Ud(){if(xl&&!(10<=Number(HA)))throw Error("Environmental error: no available transport.")}Ud.prototype.g=function(t,e){return new hs(t,e)};function hs(t,e){ln.call(this),this.g=new x5(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!uc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!uc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ol(this)}cn(hs,ln);hs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,i=this.h||void 0;Fn(0),t.Y=e,t.na=i||{},t.G=t.aa,t.I=C5(t,null,t.Y),q0(t)};hs.prototype.close=function(){Hg(this.g)};hs.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var i={};i.__data__=t,t=i}else this.v&&(i={},i.__data__=Bg(t),t=i);e.j.push(new w9(e.fb++,t)),e.H==3&&q0(e)};hs.prototype.N=function(){this.g.h=null,delete this.j,Hg(this.g),delete this.g,hs.$.N.call(this)};function T5(t){Og.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const i in e){t=i;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}cn(T5,Og);function M5(){jg.call(this),this.status=1}cn(M5,jg);function Ol(t){this.g=t}cn(Ol,k5);Ol.prototype.Ba=function(){gn(this.g,"a")};Ol.prototype.Aa=function(t){gn(this.g,new T5(t))};Ol.prototype.za=function(t){gn(this.g,new M5)};Ol.prototype.ya=function(){gn(this.g,"b")};function F9(){this.blockSize=-1}function zs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}cn(zs,F9);zs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function _f(t,e,i){i||(i=0);var n=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)n[s]=e.charCodeAt(i++)|e.charCodeAt(i++)<<8|e.charCodeAt(i++)<<16|e.charCodeAt(i++)<<24;else for(s=0;16>s;++s)n[s]=e[i++]|e[i++]<<8|e[i++]<<16|e[i++]<<24;e=t.g[0],i=t.g[1],s=t.g[2];var a=t.g[3],l=e+(a^i&(s^a))+n[0]+3614090360&4294967295;e=i+(l<<7&4294967295|l>>>25),l=a+(s^e&(i^s))+n[1]+3905402710&4294967295,a=e+(l<<12&4294967295|l>>>20),l=s+(i^a&(e^i))+n[2]+606105819&4294967295,s=a+(l<<17&4294967295|l>>>15),l=i+(e^s&(a^e))+n[3]+3250441966&4294967295,i=s+(l<<22&4294967295|l>>>10),l=e+(a^i&(s^a))+n[4]+4118548399&4294967295,e=i+(l<<7&4294967295|l>>>25),l=a+(s^e&(i^s))+n[5]+1200080426&4294967295,a=e+(l<<12&4294967295|l>>>20),l=s+(i^a&(e^i))+n[6]+2821735955&4294967295,s=a+(l<<17&4294967295|l>>>15),l=i+(e^s&(a^e))+n[7]+4249261313&4294967295,i=s+(l<<22&4294967295|l>>>10),l=e+(a^i&(s^a))+n[8]+1770035416&4294967295,e=i+(l<<7&4294967295|l>>>25),l=a+(s^e&(i^s))+n[9]+2336552879&4294967295,a=e+(l<<12&4294967295|l>>>20),l=s+(i^a&(e^i))+n[10]+4294925233&4294967295,s=a+(l<<17&4294967295|l>>>15),l=i+(e^s&(a^e))+n[11]+2304563134&4294967295,i=s+(l<<22&4294967295|l>>>10),l=e+(a^i&(s^a))+n[12]+1804603682&4294967295,e=i+(l<<7&4294967295|l>>>25),l=a+(s^e&(i^s))+n[13]+4254626195&4294967295,a=e+(l<<12&4294967295|l>>>20),l=s+(i^a&(e^i))+n[14]+2792965006&4294967295,s=a+(l<<17&4294967295|l>>>15),l=i+(e^s&(a^e))+n[15]+1236535329&4294967295,i=s+(l<<22&4294967295|l>>>10),l=e+(s^a&(i^s))+n[1]+4129170786&4294967295,e=i+(l<<5&4294967295|l>>>27),l=a+(i^s&(e^i))+n[6]+3225465664&4294967295,a=e+(l<<9&4294967295|l>>>23),l=s+(e^i&(a^e))+n[11]+643717713&4294967295,s=a+(l<<14&4294967295|l>>>18),l=i+(a^e&(s^a))+n[0]+3921069994&4294967295,i=s+(l<<20&4294967295|l>>>12),l=e+(s^a&(i^s))+n[5]+3593408605&4294967295,e=i+(l<<5&4294967295|l>>>27),l=a+(i^s&(e^i))+n[10]+38016083&4294967295,a=e+(l<<9&4294967295|l>>>23),l=s+(e^i&(a^e))+n[15]+3634488961&4294967295,s=a+(l<<14&4294967295|l>>>18),l=i+(a^e&(s^a))+n[4]+3889429448&4294967295,i=s+(l<<20&4294967295|l>>>12),l=e+(s^a&(i^s))+n[9]+568446438&4294967295,e=i+(l<<5&4294967295|l>>>27),l=a+(i^s&(e^i))+n[14]+3275163606&4294967295,a=e+(l<<9&4294967295|l>>>23),l=s+(e^i&(a^e))+n[3]+4107603335&4294967295,s=a+(l<<14&4294967295|l>>>18),l=i+(a^e&(s^a))+n[8]+1163531501&4294967295,i=s+(l<<20&4294967295|l>>>12),l=e+(s^a&(i^s))+n[13]+2850285829&4294967295,e=i+(l<<5&4294967295|l>>>27),l=a+(i^s&(e^i))+n[2]+4243563512&4294967295,a=e+(l<<9&4294967295|l>>>23),l=s+(e^i&(a^e))+n[7]+1735328473&4294967295,s=a+(l<<14&4294967295|l>>>18),l=i+(a^e&(s^a))+n[12]+2368359562&4294967295,i=s+(l<<20&4294967295|l>>>12),l=e+(i^s^a)+n[5]+4294588738&4294967295,e=i+(l<<4&4294967295|l>>>28),l=a+(e^i^s)+n[8]+2272392833&4294967295,a=e+(l<<11&4294967295|l>>>21),l=s+(a^e^i)+n[11]+1839030562&4294967295,s=a+(l<<16&4294967295|l>>>16),l=i+(s^a^e)+n[14]+4259657740&4294967295,i=s+(l<<23&4294967295|l>>>9),l=e+(i^s^a)+n[1]+2763975236&4294967295,e=i+(l<<4&4294967295|l>>>28),l=a+(e^i^s)+n[4]+1272893353&4294967295,a=e+(l<<11&4294967295|l>>>21),l=s+(a^e^i)+n[7]+4139469664&4294967295,s=a+(l<<16&4294967295|l>>>16),l=i+(s^a^e)+n[10]+3200236656&4294967295,i=s+(l<<23&4294967295|l>>>9),l=e+(i^s^a)+n[13]+681279174&4294967295,e=i+(l<<4&4294967295|l>>>28),l=a+(e^i^s)+n[0]+3936430074&4294967295,a=e+(l<<11&4294967295|l>>>21),l=s+(a^e^i)+n[3]+3572445317&4294967295,s=a+(l<<16&4294967295|l>>>16),l=i+(s^a^e)+n[6]+76029189&4294967295,i=s+(l<<23&4294967295|l>>>9),l=e+(i^s^a)+n[9]+3654602809&4294967295,e=i+(l<<4&4294967295|l>>>28),l=a+(e^i^s)+n[12]+3873151461&4294967295,a=e+(l<<11&4294967295|l>>>21),l=s+(a^e^i)+n[15]+530742520&4294967295,s=a+(l<<16&4294967295|l>>>16),l=i+(s^a^e)+n[2]+3299628645&4294967295,i=s+(l<<23&4294967295|l>>>9),l=e+(s^(i|~a))+n[0]+4096336452&4294967295,e=i+(l<<6&4294967295|l>>>26),l=a+(i^(e|~s))+n[7]+1126891415&4294967295,a=e+(l<<10&4294967295|l>>>22),l=s+(e^(a|~i))+n[14]+2878612391&4294967295,s=a+(l<<15&4294967295|l>>>17),l=i+(a^(s|~e))+n[5]+4237533241&4294967295,i=s+(l<<21&4294967295|l>>>11),l=e+(s^(i|~a))+n[12]+1700485571&4294967295,e=i+(l<<6&4294967295|l>>>26),l=a+(i^(e|~s))+n[3]+2399980690&4294967295,a=e+(l<<10&4294967295|l>>>22),l=s+(e^(a|~i))+n[10]+4293915773&4294967295,s=a+(l<<15&4294967295|l>>>17),l=i+(a^(s|~e))+n[1]+2240044497&4294967295,i=s+(l<<21&4294967295|l>>>11),l=e+(s^(i|~a))+n[8]+1873313359&4294967295,e=i+(l<<6&4294967295|l>>>26),l=a+(i^(e|~s))+n[15]+4264355552&4294967295,a=e+(l<<10&4294967295|l>>>22),l=s+(e^(a|~i))+n[6]+2734768916&4294967295,s=a+(l<<15&4294967295|l>>>17),l=i+(a^(s|~e))+n[13]+1309151649&4294967295,i=s+(l<<21&4294967295|l>>>11),l=e+(s^(i|~a))+n[4]+4149444226&4294967295,e=i+(l<<6&4294967295|l>>>26),l=a+(i^(e|~s))+n[11]+3174756917&4294967295,a=e+(l<<10&4294967295|l>>>22),l=s+(e^(a|~i))+n[2]+718787259&4294967295,s=a+(l<<15&4294967295|l>>>17),l=i+(a^(s|~e))+n[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+a&4294967295}zs.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var i=e-this.blockSize,n=this.m,s=this.h,a=0;a<e;){if(s==0)for(;a<=i;)_f(this,t,a),a+=this.blockSize;if(typeof t=="string"){for(;a<e;)if(n[s++]=t.charCodeAt(a++),s==this.blockSize){_f(this,n),s=0;break}}else for(;a<e;)if(n[s++]=t[a++],s==this.blockSize){_f(this,n),s=0;break}}this.h=s,this.i+=e};zs.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var i=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=i&255,i/=256;for(this.j(t),t=Array(16),e=i=0;4>e;++e)for(var n=0;32>n;n+=8)t[i++]=this.g[e]>>>n&255;return t};function ti(t,e){this.h=e;for(var i=[],n=!0,s=t.length-1;0<=s;s--){var a=t[s]|0;n&&a==e||(i[s]=a,n=!1)}this.g=i}var B9={};function Ug(t){return-128<=t&&128>t?WA(t,function(e){return new ti([e|0],0>e?-1:0)}):new ti([t|0],0>t?-1:0)}function qs(t){if(isNaN(t)||!isFinite(t))return Jo;if(0>t)return fn(qs(-t));for(var e=[],i=1,n=0;t>=i;n++)e[n]=t/i|0,i*=Bm;return new ti(e,0)}function P5(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return fn(P5(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=qs(Math.pow(e,8)),n=Jo,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),e);8>a?(a=qs(Math.pow(e,a)),n=n.R(a).add(qs(l))):(n=n.R(i),n=n.add(qs(l)))}return n}var Bm=4294967296,Jo=Ug(0),Lm=Ug(1),ob=Ug(16777216);qe=ti.prototype;qe.ea=function(){if(gs(this))return-fn(this).ea();for(var t=0,e=1,i=0;i<this.g.length;i++){var n=this.D(i);t+=(0<=n?n:Bm+n)*e,e*=Bm}return t};qe.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(yr(this))return"0";if(gs(this))return"-"+fn(this).toString(t);for(var e=qs(Math.pow(t,6)),i=this,n="";;){var s=Kd(i,e).g;i=Gd(i,s.R(e));var a=((0<i.g.length?i.g[0]:i.h)>>>0).toString(t);if(i=s,yr(i))return a+n;for(;6>a.length;)a="0"+a;n=a+n}};qe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function yr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function gs(t){return t.h==-1}qe.X=function(t){return t=Gd(this,t),gs(t)?-1:yr(t)?0:1};function fn(t){for(var e=t.g.length,i=[],n=0;n<e;n++)i[n]=~t.g[n];return new ti(i,~t.h).add(Lm)}qe.abs=function(){return gs(this)?fn(this):this};qe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0,s=0;s<=e;s++){var a=n+(this.D(s)&65535)+(t.D(s)&65535),l=(a>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);n=l>>>16,a&=65535,l&=65535,i[s]=l<<16|a}return new ti(i,i[i.length-1]&-2147483648?-1:0)};function Gd(t,e){return t.add(fn(e))}qe.R=function(t){if(yr(this)||yr(t))return Jo;if(gs(this))return gs(t)?fn(this).R(fn(t)):fn(fn(this).R(t));if(gs(t))return fn(this.R(fn(t)));if(0>this.X(ob)&&0>t.X(ob))return qs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,i=[],n=0;n<2*e;n++)i[n]=0;for(n=0;n<this.g.length;n++)for(var s=0;s<t.g.length;s++){var a=this.D(n)>>>16,l=this.D(n)&65535,p=t.D(s)>>>16,f=t.D(s)&65535;i[2*n+2*s]+=l*f,Pu(i,2*n+2*s),i[2*n+2*s+1]+=a*f,Pu(i,2*n+2*s+1),i[2*n+2*s+1]+=l*p,Pu(i,2*n+2*s+1),i[2*n+2*s+2]+=a*p,Pu(i,2*n+2*s+2)}for(n=0;n<e;n++)i[n]=i[2*n+1]<<16|i[2*n];for(n=e;n<2*e;n++)i[n]=0;return new ti(i,0)};function Pu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function lh(t,e){this.g=t,this.h=e}function Kd(t,e){if(yr(e))throw Error("division by zero");if(yr(t))return new lh(Jo,Jo);if(gs(t))return e=Kd(fn(t),e),new lh(fn(e.g),fn(e.h));if(gs(e))return e=Kd(t,fn(e)),new lh(fn(e.g),e.h);if(30<t.g.length){if(gs(t)||gs(e))throw Error("slowDivide_ only works with positive integers.");for(var i=Lm,n=e;0>=n.X(t);)i=lb(i),n=lb(n);var s=So(i,1),a=So(n,1);for(n=So(n,2),i=So(i,2);!yr(n);){var l=a.add(n);0>=l.X(t)&&(s=s.add(i),a=l),n=So(n,1),i=So(i,1)}return e=Gd(t,s.R(e)),new lh(s,e)}for(s=Jo;0<=t.X(e);){for(i=Math.max(1,Math.floor(t.ea()/e.ea())),n=Math.ceil(Math.log(i)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),a=qs(i),l=a.R(e);gs(l)||0<l.X(t);)i-=n,a=qs(i),l=a.R(e);yr(a)&&(a=Lm),s=s.add(a),t=Gd(t,l)}return new lh(s,t)}qe.gb=function(t){return Kd(this,t).h};qe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)&t.D(n);return new ti(i,this.h&t.h)};qe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)|t.D(n);return new ti(i,this.h|t.h)};qe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)^t.D(n);return new ti(i,this.h^t.h)};function lb(t){for(var e=t.g.length+1,i=[],n=0;n<e;n++)i[n]=t.D(n)<<1|t.D(n-1)>>>31;return new ti(i,t.h)}function So(t,e){var i=e>>5;e%=32;for(var n=t.g.length-i,s=[],a=0;a<n;a++)s[a]=0<e?t.D(a+i)>>>e|t.D(a+i+1)<<32-e:t.D(a+i);return new ti(s,t.h)}Ud.prototype.createWebChannel=Ud.prototype.g;hs.prototype.send=hs.prototype.u;hs.prototype.open=hs.prototype.m;hs.prototype.close=hs.prototype.close;X0.NO_ERROR=0;X0.TIMEOUT=8;X0.HTTP_ERROR=6;XS.COMPLETE="complete";US.EventType=Rc;Rc.OPEN="a";Rc.CLOSE="b";Rc.ERROR="c";Rc.MESSAGE="d";ln.prototype.listen=ln.prototype.O;Ii.prototype.listenOnce=Ii.prototype.P;Ii.prototype.getLastError=Ii.prototype.Sa;Ii.prototype.getLastErrorCode=Ii.prototype.Ia;Ii.prototype.getStatus=Ii.prototype.da;Ii.prototype.getResponseJson=Ii.prototype.Wa;Ii.prototype.getResponseText=Ii.prototype.ja;Ii.prototype.send=Ii.prototype.ha;Ii.prototype.setWithCredentials=Ii.prototype.Oa;zs.prototype.digest=zs.prototype.l;zs.prototype.reset=zs.prototype.reset;zs.prototype.update=zs.prototype.j;ti.prototype.add=ti.prototype.add;ti.prototype.multiply=ti.prototype.R;ti.prototype.modulo=ti.prototype.gb;ti.prototype.compare=ti.prototype.X;ti.prototype.toNumber=ti.prototype.ea;ti.prototype.toString=ti.prototype.toString;ti.prototype.getBits=ti.prototype.D;ti.fromNumber=qs;ti.fromString=P5;var L9=function(){return new Ud},N9=function(){return Y0()},Cf=X0,R9=XS,V9=co,hb={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},O9=jc,Eu=US,j9=Ii,W9=zs,qo=ti;const cb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _n=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new kg("@firebase/firestore");function ub(){return io.logLevel}function lt(t,...e){if(io.logLevel<=Gt.DEBUG){const i=e.map(Gg);io.debug(`Firestore (${jl}): ${t}`,...i)}}function Ar(t,...e){if(io.logLevel<=Gt.ERROR){const i=e.map(Gg);io.error(`Firestore (${jl}): ${t}`,...i)}}function ml(t,...e){if(io.logLevel<=Gt.WARN){const i=e.map(Gg);io.warn(`Firestore (${jl}): ${t}`,...i)}}function Gg(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t="Unexpected state"){const e=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: `+t;throw Ar(e),new Error(e)}function gi(t,e){t||vt()}function kt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let Ze=class extends Rl{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _r=class{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E5=class{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},z9=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(_n.UNAUTHENTICATED))}shutdown(){}},$9=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}},H9=class{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){let n=this.i;const s=f=>this.i!==n?(n=this.i,i(f)):Promise.resolve();let a=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new _r,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},p=f=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(f=>p(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?p(f):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new _r)}},0),l()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(n=>this.i!==e?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(gi(typeof n.accessToken=="string"),new E5(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gi(e===null||typeof e=="string"),new _n(e)}},Y9=class{constructor(e,i,n){this.h=e,this.l=i,this.m=n,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},X9=class{constructor(e,i,n){this.h=e,this.l=i,this.m=n}getToken(){return Promise.resolve(new Y9(this.h,this.l,this.m))}start(e,i){e.enqueueRetryable(()=>i(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}},U9=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},G9=class{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,i){const n=a=>{a.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,lt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?i(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?s(a):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(gi(typeof i.token=="string"),this.T=i.token,new U9(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let n=0;n<t;n++)i[n]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=K9(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<i&&(n+=e.charAt(s[a]%e.length))}return n}}function Kt(t,e){return t<e?-1:t>e?1:0}function gl(t,e,i){return t.length===e.length&&t.every((n,s)=>i(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ln=class Zu{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new Ze(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Ze(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new Ze(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zu.fromMillis(Date.now())}static fromDate(e){return Zu.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*i));return new Zu(i,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Et=class Ju{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ju(e)}static min(){return new Ju(new Ln(0,0))}static max(){return new Ju(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,i,n){i===void 0?i=0:i>e.length&&vt(),n===void 0?n=e.length-i:n>e.length-i&&vt(),this.segments=e,this.offset=i,this.len=n}get length(){return this.len}isEqual(e){return vc.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof vc?e.forEach(n=>{i.push(n)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,n=this.limit();i<n;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const n=Math.min(e.length,i.length);for(let s=0;s<n;s++){const a=e.get(s),l=i.get(s);if(a<l)return-1;if(a>l)return 1}return e.length<i.length?-1:e.length>i.length?1:0}}let Di=class qu extends vc{construct(e,i,n){return new qu(e,i,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const i=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ze(Ie.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);i.push(...n.split("/").filter(s=>s.length>0))}return new qu(i)}static emptyPath(){return new qu([])}};const Q9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let rr=class Mo extends vc{construct(e,i,n){return new Mo(e,i,n)}static isValidIdentifier(e){return Q9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mo(["__name__"])}static fromServerFormat(e){const i=[];let n="",s=0;const a=()=>{if(n.length===0)throw new Ze(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(n),n=""};let l=!1;for(;s<e.length;){const p=e[s];if(p==="\\"){if(s+1===e.length)throw new Ze(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ze(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,s+=2}else p==="`"?(l=!l,s++):p!=="."||l?(n+=p,s++):(a(),s++)}if(a(),l)throw new Ze(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mo(i)}static emptyPath(){return new Mo([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.path=e}static fromPath(e){return new ct(Di.fromString(e))}static fromName(e){return new ct(Di.fromString(e).popFirst(5))}static empty(){return new ct(Di.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Di.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return Di.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new Di(e.slice()))}}function Z9(t,e){const i=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Et.fromTimestamp(n===1e9?new Ln(i+1,0):new Ln(i,n));return new ha(s,ct.empty(),e)}function J9(t){return new ha(t.readTime,t.key,-1)}class ha{constructor(e,i,n){this.readTime=e,this.documentKey=i,this.largestBatchId=n}static min(){return new ha(Et.min(),ct.empty(),-1)}static max(){return new ha(Et.max(),ct.empty(),-1)}}function q9(t,e){let i=t.readTime.compareTo(e.readTime);return i!==0?i:(i=ct.comparator(t.documentKey,e.documentKey),i!==0?i:Kt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t){if(t.code!==Ie.FAILED_PRECONDITION||t.message!==e7)throw t;lt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new $e((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(i,a).next(n,s)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof $e?i:$e.resolve(i)}catch(i){return $e.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):$e.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):$e.reject(i)}static resolve(e){return new $e((i,n)=>{i(e)})}static reject(e){return new $e((i,n)=>{n(e)})}static waitFor(e){return new $e((i,n)=>{let s=0,a=0,l=!1;e.forEach(p=>{++s,p.next(()=>{++a,l&&a===s&&i()},f=>n(f))}),l=!0,a===s&&i()})}static or(e){let i=$e.resolve(!1);for(const n of e)i=i.next(s=>s?$e.resolve(s):n());return i}static forEach(e,i){const n=[];return e.forEach((s,a)=>{n.push(i.call(this,s,a))}),this.waitFor(n)}static mapArray(e,i){return new $e((n,s)=>{const a=e.length,l=new Array(a);let p=0;for(let f=0;f<a;f++){const g=f;i(e[g]).next(m=>{l[g]=m,++p,p===a&&n(l)},m=>s(m))}})}static doWhile(e,i){return new $e((n,s)=>{const a=()=>{e()===!0?i().next(()=>{a()},s):n()};a()})}}function Hc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=n=>this.ot(n),this.ut=n=>i.writeSequenceNumber(n))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Kg.ct=-1;function ep(t){return t==null}function Qd(t){return t===0&&1/t==-1/0}function i7(t){return typeof t=="number"&&Number.isInteger(t)&&!Qd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t){let e=0;for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&e++;return e}function uo(t,e){for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(i,t[i])}function D5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,i){this.comparator=e,this.root=i||sa.EMPTY}insert(e,i){return new Ti(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,sa.BLACK,null,null))}remove(e){return new Ti(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sa.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const n=this.comparator(e,i.key);if(n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}indexOf(e){let i=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return i+n.left.size;s<0?n=n.left:(i+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,n)=>(e(i,n),!1))}toString(){const e=[];return this.inorderTraversal((i,n)=>(e.push(`${i}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Au(this.root,e,this.comparator,!1)}getReverseIterator(){return new Au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Au(this.root,e,this.comparator,!0)}}let Au=class{constructor(e,i,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=i?n(e.key,i):1,i&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sa=class ur{constructor(e,i,n,s,a){this.key=e,this.value=i,this.color=n??ur.RED,this.left=s??ur.EMPTY,this.right=a??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,n,s,a){return new ur(e??this.key,i??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,i,n),null):a===0?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let n,s=this;if(i(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,i),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),i(e,s.key)===0){if(s.right.isEmpty())return ur.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,i))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}};sa.EMPTY=null,sa.RED=!0,sa.BLACK=!1;sa.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(t,e,i,n,s){return this}insert(t,e,i){return new sa(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rs=class Nm{constructor(e){this.comparator=e,this.data=new Ti(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,n)=>(e(i),!1))}forEachInRange(e,i){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;i(s.key)}}forEachWhile(e,i){let n;for(n=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new pb(this.data.getIterator())}getIteratorFrom(e){return new pb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(n=>{i=i.add(n)}),i}isEqual(e){if(!(e instanceof Nm)||this.size!==e.size)return!1;const i=this.data.getIterator(),n=e.data.getIterator();for(;i.hasNext();){const s=i.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new Nm(this.comparator);return i.data=e,i}},pb=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let er=class Rm{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new Rm([])}unionWith(e){let i=new rs(rr.comparator);for(const n of this.fields)i=i.add(n);for(const n of e)i=i.add(n);return new Rm(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,(i,n)=>i.isEqual(n))}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I5=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cs=class Vm{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(n){try{return atob(n)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new I5("Invalid base64 string: "+s):s}}(e);return new Vm(i)}static fromUint8Array(e){const i=function(n){let s="";for(let a=0;a<n.length;++a)s+=String.fromCharCode(n[a]);return s}(e);return new Vm(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};cs.EMPTY_BYTE_STRING=new cs("");const n7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(t){if(gi(!!t),typeof t=="string"){let e=0;const i=n7.exec(t);if(gi(!!i),i[1]){let s=i[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Wi(t.seconds),nanos:Wi(t.nanos)}}function Wi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function no(t){return typeof t=="string"?cs.fromBase64String(t):cs.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t){var e,i;return((i=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||i===void 0?void 0:i.stringValue)==="server_timestamp"}function Qg(t){const e=t.mapValue.fields.__previous_value__;return tp(e)?Qg(e):e}function bc(t){const e=ca(t.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s7=class{constructor(e,i,n,s,a,l,p,f,g){this.databaseId=e,this.appId=i,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=p,this.longPollingOptions=f,this.useFetchStreams=g}},F5=class Om{constructor(e,i){this.projectId=e,this.database=i||"(default)"}static empty(){return new Om("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Om&&e.projectId===this.projectId&&e.database===this.database}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function so(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tp(t)?4:r7(t)?9007199254740991:10:vt()}function ar(t,e){if(t===e)return!0;const i=so(t);if(i!==so(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bc(t).isEqual(bc(e));case 3:return function(n,s){if(typeof n.timestampValue=="string"&&typeof s.timestampValue=="string"&&n.timestampValue.length===s.timestampValue.length)return n.timestampValue===s.timestampValue;const a=ca(n.timestampValue),l=ca(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,s){return no(n.bytesValue).isEqual(no(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,s){return Wi(n.geoPointValue.latitude)===Wi(s.geoPointValue.latitude)&&Wi(n.geoPointValue.longitude)===Wi(s.geoPointValue.longitude)}(t,e);case 2:return function(n,s){if("integerValue"in n&&"integerValue"in s)return Wi(n.integerValue)===Wi(s.integerValue);if("doubleValue"in n&&"doubleValue"in s){const a=Wi(n.doubleValue),l=Wi(s.doubleValue);return a===l?Qd(a)===Qd(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return gl(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:return function(n,s){const a=n.mapValue.fields||{},l=s.mapValue.fields||{};if(db(a)!==db(l))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(l[p]===void 0||!ar(a[p],l[p])))return!1;return!0}(t,e);default:return vt()}}function wc(t,e){return(t.values||[]).find(i=>ar(i,e))!==void 0}function yl(t,e){if(t===e)return 0;const i=so(t),n=so(e);if(i!==n)return Kt(i,n);switch(i){case 0:case 9007199254740991:return 0;case 1:return Kt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Wi(s.integerValue||s.doubleValue),p=Wi(a.integerValue||a.doubleValue);return l<p?-1:l>p?1:l===p?0:isNaN(l)?isNaN(p)?0:-1:1}(t,e);case 3:return fb(t.timestampValue,e.timestampValue);case 4:return fb(bc(t),bc(e));case 5:return Kt(t.stringValue,e.stringValue);case 6:return function(s,a){const l=no(s),p=no(a);return l.compareTo(p)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),p=a.split("/");for(let f=0;f<l.length&&f<p.length;f++){const g=Kt(l[f],p[f]);if(g!==0)return g}return Kt(l.length,p.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=Kt(Wi(s.latitude),Wi(a.latitude));return l!==0?l:Kt(Wi(s.longitude),Wi(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const l=s.values||[],p=a.values||[];for(let f=0;f<l.length&&f<p.length;++f){const g=yl(l[f],p[f]);if(g)return g}return Kt(l.length,p.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===Du.mapValue&&a===Du.mapValue)return 0;if(s===Du.mapValue)return 1;if(a===Du.mapValue)return-1;const l=s.fields||{},p=Object.keys(l),f=a.fields||{},g=Object.keys(f);p.sort(),g.sort();for(let m=0;m<p.length&&m<g.length;++m){const k=Kt(p[m],g[m]);if(k!==0)return k;const T=yl(l[p[m]],f[g[m]]);if(T!==0)return T}return Kt(p.length,g.length)}(t.mapValue,e.mapValue);default:throw vt()}}function fb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Kt(t,e);const i=ca(t),n=ca(e),s=Kt(i.seconds,n.seconds);return s!==0?s:Kt(i.nanos,n.nanos)}function vl(t){return jm(t)}function jm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=ca(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?no(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,ct.fromName(i).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(n){let s="[",a=!0;for(const l of n.values||[])a?a=!1:s+=",",s+=jm(l);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const p of s)l?l=!1:a+=",",a+=`${p}:${jm(n.fields[p])}`;return a+"}"}(t.mapValue):vt();var e,i}function Zd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wm(t){return!!t&&"integerValue"in t}function Zg(t){return!!t&&"arrayValue"in t}function xb(t){return!!t&&"nullValue"in t}function mb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ed(t){return!!t&&"mapValue"in t}function Bh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return uo(t.mapValue.fields,(i,n)=>e.mapValue.fields[i]=Bh(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(t.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Bh(t.arrayValue.values[i]);return e}return Object.assign({},t)}function r7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let n=0;n<e.length-1;++n)if(i=(i.mapValue.fields||{})[e.get(n)],!ed(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bh(i)}setAll(e){let i=rr.emptyPath(),n={},s=[];e.forEach((l,p)=>{if(!i.isImmediateParentOf(p)){const f=this.getFieldsMap(i);this.applyChanges(f,n,s),n={},s=[],i=p.popLast()}l?n[p.lastSegment()]=Bh(l):s.push(p.lastSegment())});const a=this.getFieldsMap(i);this.applyChanges(a,n,s)}delete(e){const i=this.field(e.popLast());ed(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=i.mapValue.fields[e.get(n)];ed(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},i.mapValue.fields[e.get(n)]=s),i=s}return i.mapValue.fields}applyChanges(e,i,n){uo(i,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new $n(Bh(this.value))}}function B5(t){const e=[];return uo(t.fields,(i,n)=>{const s=new rr([i]);if(ed(n)){const a=B5(n.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)}),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,i,n,s,a,l,p){this.key=e,this.documentType=i,this.version=n,this.readTime=s,this.createTime=a,this.data=l,this.documentState=p}static newInvalidDocument(e){return new Sn(e,0,Et.min(),Et.min(),Et.min(),$n.empty(),0)}static newFoundDocument(e,i,n,s){return new Sn(e,1,i,Et.min(),n,s,0)}static newNoDocument(e,i){return new Sn(e,2,i,Et.min(),Et.min(),$n.empty(),0)}static newUnknownDocument(e,i){return new Sn(e,3,i,Et.min(),Et.min(),$n.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,i){this.position=e,this.inclusive=i}}function gb(t,e,i){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?n=ct.comparator(ct.fromName(l.referenceValue),i.key):n=yl(l,i.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function yb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let i=0;i<t.position.length;i++)if(!ar(t.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,i="asc"){this.field=e,this.dir=i}}function a7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{}class Hi extends L5{constructor(e,i,n){super(),this.field=e,this.op=i,this.value=n}static create(e,i,n){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,n):new l7(e,i,n):i==="array-contains"?new u7(e,n):i==="in"?new d7(e,n):i==="not-in"?new p7(e,n):i==="array-contains-any"?new f7(e,n):new Hi(e,i,n)}static createKeyFieldInFilter(e,i,n){return i==="in"?new h7(e,n):new c7(e,n)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(yl(i,this.value)):i!==null&&so(this.value)===so(i)&&this.matchesComparison(yl(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class $s extends L5{constructor(e,i){super(),this.filters=e,this.op=i,this.lt=null}static create(e,i){return new $s(e,i)}matches(e){return N5(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(i=>i.isInequality());return e!==null?e.field:null}ft(e){for(const i of this.getFlattenedFilters())if(e(i))return i;return null}}function N5(t){return t.op==="and"}function R5(t){return o7(t)&&N5(t)}function o7(t){for(const e of t.filters)if(e instanceof $s)return!1;return!0}function zm(t){if(t instanceof Hi)return t.field.canonicalString()+t.op.toString()+vl(t.value);if(R5(t))return t.filters.map(e=>zm(e)).join(",");{const e=t.filters.map(i=>zm(i)).join(",");return`${t.op}(${e})`}}function V5(t,e){return t instanceof Hi?function(i,n){return n instanceof Hi&&i.op===n.op&&i.field.isEqual(n.field)&&ar(i.value,n.value)}(t,e):t instanceof $s?function(i,n){return n instanceof $s&&i.op===n.op&&i.filters.length===n.filters.length?i.filters.reduce((s,a,l)=>s&&V5(a,n.filters[l]),!0):!1}(t,e):void vt()}function O5(t){return t instanceof Hi?function(e){return`${e.field.canonicalString()} ${e.op} ${vl(e.value)}`}(t):t instanceof $s?function(e){return e.op.toString()+" {"+e.getFilters().map(O5).join(" ,")+"}"}(t):"Filter"}class l7 extends Hi{constructor(e,i,n){super(e,i,n),this.key=ct.fromName(n.referenceValue)}matches(e){const i=ct.comparator(e.key,this.key);return this.matchesComparison(i)}}class h7 extends Hi{constructor(e,i){super(e,"in",i),this.keys=j5("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class c7 extends Hi{constructor(e,i){super(e,"not-in",i),this.keys=j5("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function j5(t,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(n=>ct.fromName(n.referenceValue))}class u7 extends Hi{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Zg(i)&&wc(i.arrayValue,this.value)}}class d7 extends Hi{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&wc(this.value.arrayValue,i)}}class p7 extends Hi{constructor(e,i){super(e,"not-in",i)}matches(e){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&!wc(this.value.arrayValue,i)}}class f7 extends Hi{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Zg(i)||!i.arrayValue.values)&&i.arrayValue.values.some(n=>wc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,i=null,n=[],s=[],a=null,l=null,p=null){this.path=e,this.collectionGroup=i,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=l,this.endAt=p,this.dt=null}}function vb(t,e=null,i=[],n=[],s=null,a=null,l=null){return new x7(t,e,i,n,s,a,l)}function Jg(t){const e=kt(t);if(e.dt===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(n=>zm(n)).join(","),i+="|ob:",i+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),ep(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(n=>vl(n)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(n=>vl(n)).join(",")),e.dt=i}return e.dt}function qg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!a7(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(!V5(t.filters[i],e.filters[i]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yb(t.startAt,e.startAt)&&yb(t.endAt,e.endAt)}function $m(t){return ct.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,i=null,n=[],s=[],a=null,l="F",p=null,f=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=l,this.startAt=p,this.endAt=f,this.wt=null,this._t=null,this.startAt,this.endAt}}function m7(t,e,i,n,s,a,l,p){return new _a(t,e,i,n,s,a,l,p)}function ip(t){return new _a(t)}function bb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function e2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function np(t){for(const e of t.filters){const i=e.getFirstInequalityField();if(i!==null)return i}return null}function t2(t){return t.collectionGroup!==null}function Xa(t){const e=kt(t);if(e.wt===null){e.wt=[];const i=np(e),n=e2(e);if(i!==null&&n===null)i.isKeyField()||e.wt.push(new el(i)),e.wt.push(new el(rr.keyField(),"asc"));else{let s=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(s=!0);if(!s){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new el(rr.keyField(),a))}}}return e.wt}function Dr(t){const e=kt(t);if(!e._t)if(e.limitType==="F")e._t=vb(e.path,e.collectionGroup,Xa(e),e.filters,e.limit,e.startAt,e.endAt);else{const i=[];for(const a of Xa(e)){const l=a.dir==="desc"?"asc":"desc";i.push(new el(a.field,l))}const n=e.endAt?new bl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new bl(e.startAt.position,e.startAt.inclusive):null;e._t=vb(e.path,e.collectionGroup,i,e.filters,e.limit,n,s)}return e._t}function Hm(t,e){e.getFirstInequalityField(),np(t);const i=t.filters.concat([e]);return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),i,t.limit,t.limitType,t.startAt,t.endAt)}function Jd(t,e,i){return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,i,t.startAt,t.endAt)}function sp(t,e){return qg(Dr(t),Dr(e))&&t.limitType===e.limitType}function W5(t){return`${Jg(Dr(t))}|lt:${t.limitType}`}function Ym(t){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(n=>O5(n)).join(", ")}]`),ep(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(n=>vl(n)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(n=>vl(n)).join(",")),`Target(${i})`}(Dr(t))}; limitType=${t.limitType})`}function rp(t,e){return e.isFoundDocument()&&function(i,n){const s=n.key.path;return i.collectionGroup!==null?n.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ct.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,n){for(const s of Xa(i))if(!s.field.isKeyField()&&n.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,n){for(const s of i.filters)if(!s.matches(n))return!1;return!0}(t,e)&&function(i,n){return!(i.startAt&&!function(s,a,l){const p=gb(s,a,l);return s.inclusive?p<=0:p<0}(i.startAt,Xa(i),n)||i.endAt&&!function(s,a,l){const p=gb(s,a,l);return s.inclusive?p>=0:p>0}(i.endAt,Xa(i),n))}(t,e)}function g7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function z5(t){return(e,i)=>{let n=!1;for(const s of Xa(t)){const a=y7(s,e,i);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function y7(t,e,i){const n=t.field.isKeyField()?ct.comparator(e.key,i.key):function(s,a,l){const p=a.data.field(s),f=l.data.field(s);return p!==null&&f!==null?yl(p,f):vt()}(t.field,e,i);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),n=this.inner[i];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,i){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,i]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,i]);s.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),n=this.inner[i];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[i]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,(i,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return D5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7=new Ti(ct.comparator);function Ir(){return v7}const $5=new Ti(ct.comparator);function bh(...t){let e=$5;for(const i of t)e=e.insert(i.key,i);return e}function H5(t){let e=$5;return t.forEach((i,n)=>e=e.insert(i,n.overlayedDocument)),e}function ja(){return Lh()}function Y5(){return Lh()}function Lh(){return new Wl(t=>t.toString(),(t,e)=>t.isEqual(e))}const b7=new Ti(ct.comparator),w7=new rs(ct.comparator);function Rt(...t){let e=w7;for(const i of t)e=e.add(i);return e}const _7=new rs(Kt);function C7(){return _7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qd(e)?"-0":e}}function U5(t){return{integerValue:""+t}}function S7(t,e){return i7(e)?U5(e):X5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this._=void 0}}function k7(t,e,i){return t instanceof _c?function(n,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return s&&tp(s)&&(s=Qg(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(i,e):t instanceof wl?K5(t,e):t instanceof Cc?Q5(t,e):function(n,s){const a=G5(n,s),l=wb(a)+wb(n.gt);return Wm(a)&&Wm(n.gt)?U5(l):X5(n.serializer,l)}(t,e)}function T7(t,e,i){return t instanceof wl?K5(t,e):t instanceof Cc?Q5(t,e):i}function G5(t,e){return t instanceof qd?Wm(i=e)||function(n){return!!n&&"doubleValue"in n}(i)?e:{integerValue:0}:null;var i}class _c extends ap{}class wl extends ap{constructor(e){super(),this.elements=e}}function K5(t,e){const i=Z5(e);for(const n of t.elements)i.some(s=>ar(s,n))||i.push(n);return{arrayValue:{values:i}}}class Cc extends ap{constructor(e){super(),this.elements=e}}function Q5(t,e){let i=Z5(e);for(const n of t.elements)i=i.filter(s=>!ar(s,n));return{arrayValue:{values:i}}}class qd extends ap{constructor(e,i){super(),this.serializer=e,this.gt=i}}function wb(t){return Wi(t.integerValue||t.doubleValue)}function Z5(t){return Zg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,i){this.field=e,this.transform=i}}function M7(t,e){return t.field.isEqual(e.field)&&function(i,n){return i instanceof wl&&n instanceof wl||i instanceof Cc&&n instanceof Cc?gl(i.elements,n.elements,ar):i instanceof qd&&n instanceof qd?ar(i.gt,n.gt):i instanceof _c&&n instanceof _c}(t.transform,e.transform)}class P7{constructor(e,i){this.version=e,this.transformResults=i}}class Rs{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Rs}static exists(e){return new Rs(void 0,e)}static updateTime(e){return new Rs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function td(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class op{}function q5(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tk(t.key,Rs.none()):new Yc(t.key,t.data,Rs.none());{const i=t.data,n=$n.empty();let s=new rs(rr.comparator);for(let a of e.fields)if(!s.has(a)){let l=i.field(a);l===null&&a.length>1&&(a=a.popLast(),l=i.field(a)),l===null?n.delete(a):n.set(a,l),s=s.add(a)}return new Ca(t.key,n,new er(s.toArray()),Rs.none())}}function E7(t,e,i){t instanceof Yc?function(n,s,a){const l=n.value.clone(),p=Cb(n.fieldTransforms,s,a.transformResults);l.setAll(p),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,i):t instanceof Ca?function(n,s,a){if(!td(n.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Cb(n.fieldTransforms,s,a.transformResults),p=s.data;p.setAll(ek(n)),p.setAll(l),s.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(t,e,i):function(n,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,i)}function Nh(t,e,i,n){return t instanceof Yc?function(s,a,l,p){if(!td(s.precondition,a))return l;const f=s.value.clone(),g=Sb(s.fieldTransforms,p,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,i,n):t instanceof Ca?function(s,a,l,p){if(!td(s.precondition,a))return l;const f=Sb(s.fieldTransforms,p,a),g=a.data;return g.setAll(ek(s)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,i,n):function(s,a,l){return td(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,i)}function A7(t,e){let i=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=G5(n.transform,s||null);a!=null&&(i===null&&(i=$n.empty()),i.set(n.field,a))}return i||null}function _b(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,n){return i===void 0&&n===void 0||!(!i||!n)&&gl(i,n,(s,a)=>M7(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yc extends op{constructor(e,i,n,s=[]){super(),this.key=e,this.value=i,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ca extends op{constructor(e,i,n,s,a=[]){super(),this.key=e,this.data=i,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ek(t){const e=new Map;return t.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const n=t.data.field(i);e.set(i,n)}}),e}function Cb(t,e,i){const n=new Map;gi(t.length===i.length);for(let s=0;s<i.length;s++){const a=t[s],l=a.transform,p=e.data.field(a.field);n.set(a.field,T7(l,p,i[s]))}return n}function Sb(t,e,i){const n=new Map;for(const s of t){const a=s.transform,l=i.data.field(s.field);n.set(s.field,k7(a,l,e))}return n}class tk extends op{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D7 extends op{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,i,n,s){this.batchId=e,this.localWriteTime=i,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,i){const n=i.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&E7(a,e,n[s])}}applyToLocalView(e,i){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(i=Nh(n,e,i,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(i=Nh(n,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const n=Y5();return this.mutations.forEach(s=>{const a=e.get(s.key),l=a.overlayedDocument;let p=this.applyToLocalView(l,a.mutatedFields);p=i.has(s.key)?null:p;const f=q5(l,p);f!==null&&n.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Et.min())}),n}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),Rt())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,(i,n)=>_b(i,n))&&gl(this.baseMutations,e.baseMutations,(i,n)=>_b(i,n))}}class i2{constructor(e,i,n,s){this.batch=e,this.commitVersion=i,this.mutationResults=n,this.docVersions=s}static from(e,i,n){gi(e.mutations.length===n.length);let s=b7;const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,n[l].version);return new i2(e,i,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oi,zt;function L7(t){switch(t){default:return vt();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function ik(t){if(t===void 0)return Ar("GRPC error has no .code"),Ie.UNKNOWN;switch(t){case Oi.OK:return Ie.OK;case Oi.CANCELLED:return Ie.CANCELLED;case Oi.UNKNOWN:return Ie.UNKNOWN;case Oi.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Oi.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Oi.INTERNAL:return Ie.INTERNAL;case Oi.UNAVAILABLE:return Ie.UNAVAILABLE;case Oi.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Oi.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Oi.NOT_FOUND:return Ie.NOT_FOUND;case Oi.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Oi.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Oi.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Oi.ABORTED:return Ie.ABORTED;case Oi.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Oi.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Oi.DATA_LOSS:return Ie.DATA_LOSS;default:return vt()}}(zt=Oi||(Oi={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Iu}static getOrCreateInstance(){return Iu===null&&(Iu=new n2),Iu}onExistenceFilterMismatch(e){const i=Symbol();return this.onExistenceFilterMismatchCallbacks.set(i,e),()=>this.onExistenceFilterMismatchCallbacks.delete(i)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(i=>i(e))}}let Iu=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7=new qo([4294967295,4294967295],0);function kb(t){const e=N7().encode(t),i=new W9;return i.update(e),new Uint8Array(i.digest())}function Tb(t){const e=new DataView(t.buffer),i=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qo([i,n],0),new qo([s,a],0)]}class s2{constructor(e,i,n){if(this.bitmap=e,this.padding=i,this.hashCount=n,i<0||i>=8)throw new wh(`Invalid padding: ${i}`);if(n<0)throw new wh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new wh(`Invalid hash count: ${n}`);if(e.length===0&&i!==0)throw new wh(`Invalid padding when bitmap length is 0: ${i}`);this.It=8*e.length-i,this.Tt=qo.fromNumber(this.It)}Et(e,i,n){let s=e.add(i.multiply(qo.fromNumber(n)));return s.compare(R7)===1&&(s=new qo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const i=kb(e),[n,s]=Tb(i);for(let a=0;a<this.hashCount;a++){const l=this.Et(n,s,a);if(!this.At(l))return!1}return!0}static create(e,i,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new s2(a,s,i);return n.forEach(p=>l.insert(p)),l}insert(e){if(this.It===0)return;const i=kb(e),[n,s]=Tb(i);for(let a=0;a<this.hashCount;a++){const l=this.Et(n,s,a);this.Rt(l)}}Rt(e){const i=Math.floor(e/8),n=e%8;this.bitmap[i]|=1<<n}}class wh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,i,n,s,a){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,i,n){const s=new Map;return s.set(e,Xc.createSynthesizedTargetChangeForCurrentChange(e,i,n)),new lp(Et.min(),s,new Ti(Kt),Ir(),Rt())}}class Xc{constructor(e,i,n,s,a){this.resumeToken=e,this.current=i,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,i,n){return new Xc(n,i,Rt(),Rt(),Rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,i,n,s){this.Pt=e,this.removedTargetIds=i,this.key=n,this.bt=s}}class nk{constructor(e,i){this.targetId=e,this.Vt=i}}class sk{constructor(e,i,n=cs.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=i,this.resumeToken=n,this.cause=s}}class Mb{constructor(){this.St=0,this.Dt=Eb(),this.Ct=cs.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Rt(),i=Rt(),n=Rt();return this.Dt.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:i=i.add(s);break;case 1:n=n.add(s);break;default:vt()}}),new Xc(this.Ct,this.xt,e,i,n)}Ft(){this.Nt=!1,this.Dt=Eb()}Bt(e,i){this.Nt=!0,this.Dt=this.Dt.insert(e,i)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class V7{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ir(),this.zt=Pb(),this.Wt=new Ti(Kt)}Ht(e){for(const i of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(i,e.bt):this.Yt(i,e.key,e.bt);for(const i of e.removedTargetIds)this.Yt(i,e.key,e.bt)}Xt(e){this.forEachTarget(e,i=>{const n=this.Zt(i);switch(e.state){case 0:this.te(i)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(i);break;case 3:this.te(i)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(i)&&(this.ee(i),n.$t(e.resumeToken));break;default:vt()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.Qt.forEach((n,s)=>{this.te(s)&&i(s)})}ne(e){var i;const n=e.targetId,s=e.Vt.count,a=this.se(n);if(a){const l=a.target;if($m(l))if(s===0){const p=new ct(l.path);this.Yt(n,p,Sn.newNoDocument(p,Et.min()))}else gi(s===1);else{const p=this.ie(n);if(p!==s){const f=this.re(e,p);if(f!==0){this.ee(n);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,g)}(i=n2.instance)===null||i===void 0||i.notifyOnExistenceFilterMismatch(function(g,m,k){var T,A,P,L,W,N;const M={localCacheCount:m,existenceFilterCount:k.count},B=k.unchangedNames;return B&&(M.bloomFilter={applied:g===0,hashCount:(T=B==null?void 0:B.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(L=(P=(A=B==null?void 0:B.bits)===null||A===void 0?void 0:A.bitmap)===null||P===void 0?void 0:P.length)!==null&&L!==void 0?L:0,padding:(N=(W=B==null?void 0:B.bits)===null||W===void 0?void 0:W.padding)!==null&&N!==void 0?N:0}),M}(f,p,e.Vt))}}}}re(e,i){const{unchangedNames:n,count:s}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:p=0}=n;let f,g;try{f=no(a).toUint8Array()}catch(m){if(m instanceof I5)return ml("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw m}try{g=new s2(f,l,p)}catch(m){return ml(m instanceof wh?"BloomFilter error: ":"Applying bloom filter failed: ",m),1}return g.It===0?1:s!==i-this.oe(e.targetId,g)?2:0}oe(e,i){const n=this.Gt.getRemoteKeysForTarget(e);let s=0;return n.forEach(a=>{const l=this.Gt.ue(),p=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;i.vt(p)||(this.Yt(e,a,null),s++)}),s}ce(e){const i=new Map;this.Qt.forEach((a,l)=>{const p=this.se(l);if(p){if(a.current&&$m(p.target)){const f=new ct(p.target.path);this.jt.get(f)!==null||this.ae(l,f)||this.Yt(l,f,Sn.newNoDocument(f,e))}a.Mt&&(i.set(l,a.Ot()),a.Ft())}});let n=Rt();this.zt.forEach((a,l)=>{let p=!0;l.forEachWhile(f=>{const g=this.se(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(n=n.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const s=new lp(e,i,this.Wt,this.jt,n);return this.jt=Ir(),this.zt=Pb(),this.Wt=new Ti(Kt),s}Jt(e,i){if(!this.te(e))return;const n=this.ae(e,i.key)?2:0;this.Zt(e).Bt(i.key,n),this.jt=this.jt.insert(i.key,i),this.zt=this.zt.insert(i.key,this.he(i.key).add(e))}Yt(e,i,n){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,i)?s.Bt(i,1):s.Lt(i),this.zt=this.zt.insert(i,this.he(i).delete(e)),n&&(this.jt=this.jt.insert(i,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const i=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let i=this.Qt.get(e);return i||(i=new Mb,this.Qt.set(e,i)),i}he(e){let i=this.zt.get(e);return i||(i=new rs(Kt),this.zt=this.zt.insert(e,i)),i}te(e){const i=this.se(e)!==null;return i||lt("WatchChangeAggregator","Detected inactive target",e),i}se(e){const i=this.Qt.get(e);return i&&i.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Mb),this.Gt.getRemoteKeysForTarget(e).forEach(i=>{this.Yt(e,i,null)})}ae(e,i){return this.Gt.getRemoteKeysForTarget(e).has(i)}}function Pb(){return new Ti(ct.comparator)}function Eb(){return new Ti(ct.comparator)}const O7={asc:"ASCENDING",desc:"DESCENDING"},j7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W7={and:"AND",or:"OR"};class z7{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Xm(t,e){return t.useProto3Json||ep(e)?e:{value:e}}function e0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $7(t,e){return e0(t,e.toTimestamp())}function sr(t){return gi(!!t),Et.fromTimestamp(function(e){const i=ca(e);return new Ln(i.seconds,i.nanos)}(t))}function r2(t,e){return function(i){return new Di(["projects",i.projectId,"databases",i.database])}(t).child("documents").child(e).canonicalString()}function ak(t){const e=Di.fromString(t);return gi(ck(e)),e}function Um(t,e){return r2(t.databaseId,e.path)}function Sf(t,e){const i=ak(e);if(i.get(1)!==t.databaseId.projectId)throw new Ze(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+t.databaseId.projectId);if(i.get(3)!==t.databaseId.database)throw new Ze(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+t.databaseId.database);return new ct(ok(i))}function Gm(t,e){return r2(t.databaseId,e)}function H7(t){const e=ak(t);return e.length===4?Di.emptyPath():ok(e)}function Km(t){return new Di(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ok(t){return gi(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ab(t,e,i){return{name:Um(t,e),fields:i.value.mapValue.fields}}function Y7(t,e){let i;if("targetChange"in e){e.targetChange;const n=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:vt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,g){return f.useProto3Json?(gi(g===void 0||typeof g=="string"),cs.fromBase64String(g||"")):(gi(g===void 0||g instanceof Uint8Array),cs.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,p=l&&function(f){const g=f.code===void 0?Ie.UNKNOWN:ik(f.code);return new Ze(g,f.message||"")}(l);i=new sk(n,s,a,p||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Sf(t,n.document.name),a=sr(n.document.updateTime),l=n.document.createTime?sr(n.document.createTime):Et.min(),p=new $n({mapValue:{fields:n.document.fields}}),f=Sn.newFoundDocument(s,a,l,p),g=n.targetIds||[],m=n.removedTargetIds||[];i=new id(g,m,f.key,f)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Sf(t,n.document),a=n.readTime?sr(n.readTime):Et.min(),l=Sn.newNoDocument(s,a),p=n.removedTargetIds||[];i=new id([],p,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Sf(t,n.document),a=n.removedTargetIds||[];i=new id([],a,s,null)}else{if(!("filter"in e))return vt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,l=new B7(s,a),p=n.targetId;i=new nk(p,l)}}return i}function X7(t,e){let i;if(e instanceof Yc)i={update:Ab(t,e.key,e.value)};else if(e instanceof tk)i={delete:Um(t,e.key)};else if(e instanceof Ca)i={update:Ab(t,e.key,e.data),updateMask:tD(e.fieldMask)};else{if(!(e instanceof D7))return vt();i={verify:Um(t,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const l=a.transform;if(l instanceof _c)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof wl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Cc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof qd)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw vt()}(0,n))),e.precondition.isNone||(i.currentDocument=function(n,s){return s.updateTime!==void 0?{updateTime:$7(n,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:vt()}(t,e.precondition)),i}function U7(t,e){return t&&t.length>0?(gi(e!==void 0),t.map(i=>function(n,s){let a=n.updateTime?sr(n.updateTime):sr(s);return a.isEqual(Et.min())&&(a=sr(s)),new P7(a,n.transformResults||[])}(i,e))):[]}function G7(t,e){return{documents:[Gm(t,e.path)]}}function K7(t,e){const i={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(i.parent=Gm(t,n),i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i.parent=Gm(t,n.popLast()),i.structuredQuery.from=[{collectionId:n.lastSegment()}]);const s=function(f){if(f.length!==0)return hk($s.create(f,"and"))}(e.filters);s&&(i.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(g=>function(m){return{field:Po(m.field),direction:J7(m.dir)}}(g))}(e.orderBy);a&&(i.structuredQuery.orderBy=a);const l=Xm(t,e.limit);var p;return l!==null&&(i.structuredQuery.limit=l),e.startAt&&(i.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(i.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),i}function Q7(t){let e=H7(t.parent);const i=t.structuredQuery,n=i.from?i.from.length:0;let s=null;if(n>0){gi(n===1);const m=i.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let a=[];i.where&&(a=function(m){const k=lk(m);return k instanceof $s&&R5(k)?k.getFilters():[k]}(i.where));let l=[];i.orderBy&&(l=i.orderBy.map(m=>function(k){return new el(Eo(k.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(m)));let p=null;i.limit&&(p=function(m){let k;return k=typeof m=="object"?m.value:m,ep(k)?null:k}(i.limit));let f=null;i.startAt&&(f=function(m){const k=!!m.before,T=m.values||[];return new bl(T,k)}(i.startAt));let g=null;return i.endAt&&(g=function(m){const k=!m.before,T=m.values||[];return new bl(T,k)}(i.endAt)),m7(e,s,l,a,p,"F",f,g)}function Z7(t,e){const i=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function lk(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Eo(e.unaryFilter.field);return Hi.create(i,"==",{doubleValue:NaN});case"IS_NULL":const n=Eo(e.unaryFilter.field);return Hi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Eo(e.unaryFilter.field);return Hi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Eo(e.unaryFilter.field);return Hi.create(a,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(t):t.fieldFilter!==void 0?function(e){return Hi.create(Eo(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return $s.create(e.compositeFilter.filters.map(i=>lk(i)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return vt()}}(e.compositeFilter.op))}(t):vt()}function J7(t){return O7[t]}function q7(t){return j7[t]}function eD(t){return W7[t]}function Po(t){return{fieldPath:t.canonicalString()}}function Eo(t){return rr.fromServerFormat(t.fieldPath)}function hk(t){return t instanceof Hi?function(e){if(e.op==="=="){if(mb(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NAN"}};if(xb(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(mb(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NOT_NAN"}};if(xb(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(e.field),op:q7(e.op),value:e.value}}}(t):t instanceof $s?function(e){const i=e.getFilters().map(n=>hk(n));return i.length===1?i[0]:{compositeFilter:{op:eD(e.op),filters:i}}}(t):vt()}function tD(t){const e=[];return t.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function ck(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,i,n,s,a=Et.min(),l=Et.min(),p=cs.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=i,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=p,this.expectedCount=f}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.fe=e}}function nD(t){const e=Q7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.rn=new rD}addToCollectionParentIndex(e,i){return this.rn.add(i),$e.resolve()}getCollectionParents(e,i){return $e.resolve(this.rn.getEntries(i))}addFieldIndex(e,i){return $e.resolve()}deleteFieldIndex(e,i){return $e.resolve()}getDocumentsMatchingTarget(e,i){return $e.resolve(null)}getIndexType(e,i){return $e.resolve(0)}getFieldIndexes(e,i){return $e.resolve([])}getNextCollectionGroupToUpdate(e){return $e.resolve(null)}getMinOffset(e,i){return $e.resolve(ha.min())}getMinOffsetFromCollectionGroup(e,i){return $e.resolve(ha.min())}updateCollectionGroup(e,i,n){return $e.resolve()}updateIndexEntries(e,i){return $e.resolve()}}class rD{constructor(){this.index={}}add(e){const i=e.lastSegment(),n=e.popLast(),s=this.index[i]||new rs(Di.comparator),a=!s.has(n);return this.index[i]=s.add(n),a}has(e){const i=e.lastSegment(),n=e.popLast(),s=this.index[i];return s&&s.has(n)}getEntries(e){return(this.index[e]||new rs(Di.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new _l(0)}static Mn(){return new _l(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.changes=new Wl(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const n=this.changes.get(i);return n!==void 0?$e.resolve(n):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,i,n,s){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,i){let n=null;return this.documentOverlayCache.getOverlay(e,i).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,i))).next(s=>(n!==null&&Nh(n.mutation,s,er.empty(),Ln.now()),s))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(n=>this.getLocalViewOfDocuments(e,n,Rt()).next(()=>n))}getLocalViewOfDocuments(e,i,n=Rt()){const s=ja();return this.populateOverlays(e,s,i).next(()=>this.computeViews(e,i,s,n).next(a=>{let l=bh();return a.forEach((p,f)=>{l=l.insert(p,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,i){const n=ja();return this.populateOverlays(e,n,i).next(()=>this.computeViews(e,i,n,Rt()))}populateOverlays(e,i,n){const s=[];return n.forEach(a=>{i.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((l,p)=>{i.set(l,p)})})}computeViews(e,i,n,s){let a=Ir();const l=Lh(),p=Lh();return i.forEach((f,g)=>{const m=n.get(g.key);s.has(g.key)&&(m===void 0||m.mutation instanceof Ca)?a=a.insert(g.key,g):m!==void 0?(l.set(g.key,m.mutation.getFieldMask()),Nh(m.mutation,g,m.mutation.getFieldMask(),Ln.now())):l.set(g.key,er.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((g,m)=>l.set(g,m)),i.forEach((g,m)=>{var k;return p.set(g,new oD(m,(k=l.get(g))!==null&&k!==void 0?k:null))}),p))}recalculateAndSaveOverlays(e,i){const n=Lh();let s=new Ti((l,p)=>l-p),a=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(l=>{for(const p of l)p.keys().forEach(f=>{const g=i.get(f);if(g===null)return;let m=n.get(f)||er.empty();m=p.applyToLocalView(g,m),n.set(f,m);const k=(s.get(p.batchId)||Rt()).add(f);s=s.insert(p.batchId,k)})}).next(()=>{const l=[],p=s.getReverseIterator();for(;p.hasNext();){const f=p.getNext(),g=f.key,m=f.value,k=Y5();m.forEach(T=>{if(!a.has(T)){const A=q5(i.get(T),n.get(T));A!==null&&k.set(T,A),a=a.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,g,k))}return $e.waitFor(l)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,i,n){return function(s){return ct.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):t2(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,n):this.getDocumentsMatchingCollectionQuery(e,i,n)}getNextDocuments(e,i,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,n,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,n.largestBatchId,s-a.size):$e.resolve(ja());let p=-1,f=a;return l.next(g=>$e.forEach(g,(m,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),a.get(m)?$e.resolve():this.remoteDocumentCache.getEntry(e,m).next(T=>{f=f.insert(m,T)}))).next(()=>this.populateOverlays(e,g,a)).next(()=>this.computeViews(e,f,g,Rt())).next(m=>({batchId:p,changes:H5(m)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new ct(i)).next(n=>{let s=bh();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,i,n){const s=i.collectionGroup;let a=bh();return this.indexManager.getCollectionParents(e,s).next(l=>$e.forEach(l,p=>{const f=function(g,m){return new _a(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(i,p.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,n).next(g=>{g.forEach((m,k)=>{a=a.insert(m,k)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,i,n){let s;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,n,s))).next(a=>{s.forEach((p,f)=>{const g=f.getKey();a.get(g)===null&&(a=a.insert(g,Sn.newInvalidDocument(g)))});let l=bh();return a.forEach((p,f)=>{const g=s.get(p);g!==void 0&&Nh(g.mutation,f,er.empty(),Ln.now()),rp(i,f)&&(l=l.insert(p,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,i){return $e.resolve(this.cs.get(i))}saveBundleMetadata(e,i){var n;return this.cs.set(i.id,{id:(n=i).id,version:n.version,createTime:sr(n.createTime)}),$e.resolve()}getNamedQuery(e,i){return $e.resolve(this.hs.get(i))}saveNamedQuery(e,i){return this.hs.set(i.name,function(n){return{name:n.name,query:nD(n.bundledQuery),readTime:sr(n.readTime)}}(i)),$e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.overlays=new Ti(ct.comparator),this.ls=new Map}getOverlay(e,i){return $e.resolve(this.overlays.get(i))}getOverlays(e,i){const n=ja();return $e.forEach(i,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,i,n){return n.forEach((s,a)=>{this.we(e,i,a)}),$e.resolve()}removeOverlaysForBatchId(e,i,n){const s=this.ls.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(n)),$e.resolve()}getOverlaysForCollection(e,i,n){const s=ja(),a=i.length+1,l=new ct(i.child("")),p=this.overlays.getIteratorFrom(l);for(;p.hasNext();){const f=p.getNext().value,g=f.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===a&&f.largestBatchId>n&&s.set(f.getKey(),f)}return $e.resolve(s)}getOverlaysForCollectionGroup(e,i,n,s){let a=new Ti((g,m)=>g-m);const l=this.overlays.getIterator();for(;l.hasNext();){const g=l.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>n){let m=a.get(g.largestBatchId);m===null&&(m=ja(),a=a.insert(g.largestBatchId,m)),m.set(g.getKey(),g)}}const p=ja(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,m)=>p.set(g,m)),!(p.size()>=s)););return $e.resolve(p)}we(e,i,n){const s=this.overlays.get(n.key);if(s!==null){const l=this.ls.get(s.largestBatchId).delete(n.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new F7(i,n));let a=this.ls.get(i);a===void 0&&(a=Rt(),this.ls.set(i,a)),this.ls.set(i,a.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.fs=new rs(tn.ds),this.ws=new rs(tn._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,i){const n=new tn(e,i);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,i){e.forEach(n=>this.addReference(n,i))}removeReference(e,i){this.ys(new tn(e,i))}ps(e,i){e.forEach(n=>this.removeReference(n,i))}Is(e){const i=new ct(new Di([])),n=new tn(i,e),s=new tn(i,e+1),a=[];return this.ws.forEachInRange([n,s],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const i=new ct(new Di([])),n=new tn(i,e),s=new tn(i,e+1);let a=Rt();return this.ws.forEachInRange([n,s],l=>{a=a.add(l.key)}),a}containsKey(e){const i=new tn(e,0),n=this.fs.firstAfterOrEqual(i);return n!==null&&e.isEqual(n.key)}}class tn{constructor(e,i){this.key=e,this.As=i}static ds(e,i){return ct.comparator(e.key,i.key)||Kt(e.As,i.As)}static _s(e,i){return Kt(e.As,i.As)||ct.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.vs=1,this.Rs=new rs(tn.ds)}checkEmpty(e){return $e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,n,s){const a=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new I7(a,i,n,s);this.mutationQueue.push(l);for(const p of s)this.Rs=this.Rs.add(new tn(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return $e.resolve(l)}lookupMutationBatch(e,i){return $e.resolve(this.Ps(i))}getNextMutationBatchAfterBatchId(e,i){const n=i+1,s=this.bs(n),a=s<0?0:s;return $e.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $e.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return $e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const n=new tn(i,0),s=new tn(i,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([n,s],l=>{const p=this.Ps(l.As);a.push(p)}),$e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,i){let n=new rs(Kt);return i.forEach(s=>{const a=new tn(s,0),l=new tn(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],p=>{n=n.add(p.As)})}),$e.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,i){const n=i.path,s=n.length+1;let a=n;ct.isDocumentKey(a)||(a=a.child(""));const l=new tn(new ct(a),0);let p=new rs(Kt);return this.Rs.forEachWhile(f=>{const g=f.key.path;return!!n.isPrefixOf(g)&&(g.length===s&&(p=p.add(f.As)),!0)},l),$e.resolve(this.Vs(p))}Vs(e){const i=[];return e.forEach(n=>{const s=this.Ps(n);s!==null&&i.push(s)}),i}removeMutationBatch(e,i){gi(this.Ss(i.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Rs;return $e.forEach(i.mutations,s=>{const a=new tn(s.key,i.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,i){const n=new tn(i,0),s=this.Rs.firstAfterOrEqual(n);return $e.resolve(i.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$e.resolve()}Ss(e,i){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const i=this.bs(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.Ds=e,this.docs=new Ti(ct.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const n=i.key,s=this.docs.get(n),a=s?s.size:0,l=this.Ds(i);return this.docs=this.docs.insert(n,{document:i.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const n=this.docs.get(i);return $e.resolve(n?n.document.mutableCopy():Sn.newInvalidDocument(i))}getEntries(e,i){let n=Ir();return i.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():Sn.newInvalidDocument(s))}),$e.resolve(n)}getDocumentsMatchingQuery(e,i,n,s){let a=Ir();const l=i.path,p=new ct(l.child("")),f=this.docs.getIteratorFrom(p);for(;f.hasNext();){const{key:g,value:{document:m}}=f.getNext();if(!l.isPrefixOf(g.path))break;g.path.length>l.length+1||q9(J9(m),n)<=0||(s.has(m.key)||rp(i,m))&&(a=a.insert(m.key,m.mutableCopy()))}return $e.resolve(a)}getAllFromCollectionGroup(e,i,n,s){vt()}Cs(e,i){return $e.forEach(this.docs,n=>i(n))}newChangeBuffer(e){return new pD(this)}getSize(e){return $e.resolve(this.size)}}class pD extends aD{constructor(e){super(),this.os=e}applyChanges(e){const i=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?i.push(this.os.addEntry(e,s)):this.os.removeEntry(n)}),$e.waitFor(i)}getFromCache(e,i){return this.os.getEntry(e,i)}getAllFromCache(e,i){return this.os.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.persistence=e,this.xs=new Wl(i=>Jg(i),qg),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ns=0,this.ks=new a2,this.targetCount=0,this.Ms=_l.kn()}forEachTarget(e,i){return this.xs.forEach((n,s)=>i(s)),$e.resolve()}getLastRemoteSnapshotVersion(e){return $e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $e.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),$e.resolve(this.highestTargetId)}setTargetsMetadata(e,i,n){return n&&(this.lastRemoteSnapshotVersion=n),i>this.Ns&&(this.Ns=i),$e.resolve()}Fn(e){this.xs.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Ms=new _l(i),this.highestTargetId=i),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,i){return this.Fn(i),this.targetCount+=1,$e.resolve()}updateTargetData(e,i){return this.Fn(i),$e.resolve()}removeTargetData(e,i){return this.xs.delete(i.target),this.ks.Is(i.targetId),this.targetCount-=1,$e.resolve()}removeTargets(e,i,n){let s=0;const a=[];return this.xs.forEach((l,p)=>{p.sequenceNumber<=i&&n.get(p.targetId)===null&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),s++)}),$e.waitFor(a).next(()=>s)}getTargetCount(e){return $e.resolve(this.targetCount)}getTargetData(e,i){const n=this.xs.get(i)||null;return $e.resolve(n)}addMatchingKeys(e,i,n){return this.ks.gs(i,n),$e.resolve()}removeMatchingKeys(e,i,n){this.ks.ps(i,n);const s=this.persistence.referenceDelegate,a=[];return s&&i.forEach(l=>{a.push(s.markPotentiallyOrphaned(e,l))}),$e.waitFor(a)}removeMatchingKeysForTargetId(e,i){return this.ks.Is(i),$e.resolve()}getMatchingKeysForTargetId(e,i){const n=this.ks.Es(i);return $e.resolve(n)}containsKey(e,i){return $e.resolve(this.ks.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,i){this.$s={},this.overlays={},this.Os=new Kg(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new fD(this),this.indexManager=new sD,this.remoteDocumentCache=function(n){return new dD(n)}(n=>this.referenceDelegate.Ls(n)),this.serializer=new iD(i),this.qs=new hD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new cD,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let n=this.$s[e.toKey()];return n||(n=new uD(i,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,i,n){lt("MemoryPersistence","Starting transaction:",e);const s=new mD(this.Os.next());return this.referenceDelegate.Us(),n(s).next(a=>this.referenceDelegate.Ks(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Gs(e,i){return $e.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,i)))}}class mD extends t7{constructor(e){super(),this.currentSequenceNumber=e}}class o2{constructor(e){this.persistence=e,this.Qs=new a2,this.js=null}static zs(e){return new o2(e)}get Ws(){if(this.js)return this.js;throw vt()}addReference(e,i,n){return this.Qs.addReference(n,i),this.Ws.delete(n.toString()),$e.resolve()}removeReference(e,i,n){return this.Qs.removeReference(n,i),this.Ws.add(n.toString()),$e.resolve()}markPotentiallyOrphaned(e,i){return this.Ws.add(i.toString()),$e.resolve()}removeTarget(e,i){this.Qs.Is(i.targetId).forEach(s=>this.Ws.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,i.targetId).next(s=>{s.forEach(a=>this.Ws.add(a.toString()))}).next(()=>n.removeTargetData(e,i))}Us(){this.js=new Set}Ks(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $e.forEach(this.Ws,n=>{const s=ct.fromPath(n);return this.Hs(e,s).next(a=>{a||i.removeEntry(s,Et.min())})}).next(()=>(this.js=null,i.apply(e)))}updateLimboDocument(e,i){return this.Hs(e,i).next(n=>{n?this.Ws.delete(i.toString()):this.Ws.add(i.toString())})}Ls(e){return 0}Hs(e,i){return $e.or([()=>$e.resolve(this.Qs.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Gs(e,i)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,i,n,s){this.targetId=e,this.fromCache=i,this.Fi=n,this.Bi=s}static Li(e,i){let n=Rt(),s=Rt();for(const a of i.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new l2(e,i.fromCache,n,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.qi=!1}initialize(e,i){this.Ui=e,this.indexManager=i,this.qi=!0}getDocumentsMatchingQuery(e,i,n,s){return this.Ki(e,i).next(a=>a||this.Gi(e,i,s,n)).next(a=>a||this.Qi(e,i))}Ki(e,i){if(bb(i))return $e.resolve(null);let n=Dr(i);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(i.limit!==null&&s===1&&(i=Jd(i,null,"F"),n=Dr(i)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const l=Rt(...a);return this.Ui.getDocuments(e,l).next(p=>this.indexManager.getMinOffset(e,n).next(f=>{const g=this.ji(i,p);return this.zi(i,g,l,f.readTime)?this.Ki(e,Jd(i,null,"F")):this.Wi(e,g,i,f)}))})))}Gi(e,i,n,s){return bb(i)||s.isEqual(Et.min())?this.Qi(e,i):this.Ui.getDocuments(e,n).next(a=>{const l=this.ji(i,a);return this.zi(i,l,n,s)?this.Qi(e,i):(ub()<=Gt.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ym(i)),this.Wi(e,l,i,Z9(s,-1)))})}ji(e,i){let n=new rs(z5(e));return i.forEach((s,a)=>{rp(e,a)&&(n=n.add(a))}),n}zi(e,i,n,s){if(e.limit===null)return!1;if(n.size!==i.size)return!0;const a=e.limitType==="F"?i.last():i.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Qi(e,i){return ub()<=Gt.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",Ym(i)),this.Ui.getDocumentsMatchingQuery(e,i,ha.min())}Wi(e,i,n,s){return this.Ui.getDocumentsMatchingQuery(e,n,s).next(a=>(i.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,i,n,s){this.persistence=e,this.Hi=i,this.serializer=s,this.Ji=new Ti(Kt),this.Yi=new Wl(a=>Jg(a),qg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lD(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Ji))}}function vD(t,e,i,n){return new yD(t,e,i,n)}async function uk(t,e){const i=kt(t);return await i.persistence.runTransaction("Handle user change","readonly",n=>{let s;return i.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,i.tr(e),i.mutationQueue.getAllMutationBatches(n))).next(a=>{const l=[],p=[];let f=Rt();for(const g of s){l.push(g.batchId);for(const m of g.mutations)f=f.add(m.key)}for(const g of a){p.push(g.batchId);for(const m of g.mutations)f=f.add(m.key)}return i.localDocuments.getDocuments(n,f).next(g=>({er:g,removedBatchIds:l,addedBatchIds:p}))})})}function bD(t,e){const i=kt(t);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=i.Zi.newChangeBuffer({trackRemovals:!0});return function(l,p,f,g){const m=f.batch,k=m.keys();let T=$e.resolve();return k.forEach(A=>{T=T.next(()=>g.getEntry(p,A)).next(P=>{const L=f.docVersions.get(A);gi(L!==null),P.version.compareTo(L)<0&&(m.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),g.addEntry(P)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(p,m))}(i,n,e,a).next(()=>a.apply(n)).next(()=>i.mutationQueue.performConsistencyCheck(n)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let p=Rt();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(p=p.add(l.batch.mutations[f].key));return p}(e))).next(()=>i.localDocuments.getDocuments(n,s))})}function dk(t){const e=kt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Bs.getLastRemoteSnapshotVersion(i))}function wD(t,e){const i=kt(t),n=e.snapshotVersion;let s=i.Ji;return i.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=i.Zi.newChangeBuffer({trackRemovals:!0});s=i.Ji;const p=[];e.targetChanges.forEach((m,k)=>{const T=s.get(k);if(!T)return;p.push(i.Bs.removeMatchingKeys(a,m.removedDocuments,k).next(()=>i.Bs.addMatchingKeys(a,m.addedDocuments,k)));let A=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(k)!==null?A=A.withResumeToken(cs.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):m.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(m.resumeToken,n)),s=s.insert(k,A),function(P,L,W){return P.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(T,A,m)&&p.push(i.Bs.updateTargetData(a,A))});let f=Ir(),g=Rt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(a,m))}),p.push(_D(a,l,e.documentUpdates).next(m=>{f=m.nr,g=m.sr})),!n.isEqual(Et.min())){const m=i.Bs.getLastRemoteSnapshotVersion(a).next(k=>i.Bs.setTargetsMetadata(a,a.currentSequenceNumber,n));p.push(m)}return $e.waitFor(p).next(()=>l.apply(a)).next(()=>i.localDocuments.getLocalViewOfDocuments(a,f,g)).next(()=>f)}).then(a=>(i.Ji=s,a))}function _D(t,e,i){let n=Rt(),s=Rt();return i.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let l=Ir();return i.forEach((p,f)=>{const g=a.get(p);f.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(p)),f.isNoDocument()&&f.version.isEqual(Et.min())?(e.removeEntry(p,f.readTime),l=l.insert(p,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(f),l=l.insert(p,f)):lt("LocalStore","Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",f.version)}),{nr:l,sr:s}})}function CD(t,e){const i=kt(t);return i.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function SD(t,e){const i=kt(t);return i.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return i.Bs.getTargetData(n,e).next(a=>a?(s=a,$e.resolve(s)):i.Bs.allocateTargetId(n).next(l=>(s=new Xr(e,l,"TargetPurposeListen",n.currentSequenceNumber),i.Bs.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=i.Ji.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(i.Ji=i.Ji.insert(n.targetId,n),i.Yi.set(e,n.targetId)),n})}async function Qm(t,e,i){const n=kt(t),s=n.Ji.get(e),a=i?"readwrite":"readwrite-primary";try{i||await n.persistence.runTransaction("Release target",a,l=>n.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Hc(l))throw l;lt("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ji=n.Ji.remove(e),n.Yi.delete(s.target)}function Db(t,e,i){const n=kt(t);let s=Et.min(),a=Rt();return n.persistence.runTransaction("Execute query","readonly",l=>function(p,f,g){const m=kt(p),k=m.Yi.get(g);return k!==void 0?$e.resolve(m.Ji.get(k)):m.Bs.getTargetData(f,g)}(n,l,Dr(e)).next(p=>{if(p)return s=p.lastLimboFreeSnapshotVersion,n.Bs.getMatchingKeysForTargetId(l,p.targetId).next(f=>{a=f})}).next(()=>n.Hi.getDocumentsMatchingQuery(l,e,i?s:Et.min(),i?a:Rt())).next(p=>(kD(n,g7(e),p),{documents:p,ir:a})))}function kD(t,e,i){let n=t.Xi.get(e)||Et.min();i.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Xi.set(e,n)}class Ib{constructor(){this.activeTargetIds=C7()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TD{constructor(){this.Hr=new Ib,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,i,n){this.Jr[e]=i}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Ib,Promise.resolve()}handleUserChange(e,i,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fu=null;function kf(){return Fu===null?Fu=268435456+Math.round(2147483648*Math.random()):Fu++,"0x"+Fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class AD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http";this.mo=i+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,i,n,s,a){const l=kf(),p=this.To(e,i);lt("RestConnection",`Sending RPC '${e}' ${l}:`,p,n);const f={};return this.Eo(f,s,a),this.Ao(e,p,f,n).then(g=>(lt("RestConnection",`Received RPC '${e}' ${l}: `,g),g),g=>{throw ml("RestConnection",`RPC '${e}' ${l} failed with error: `,g,"url: ",p,"request:",n),g})}vo(e,i,n,s,a,l){return this.Io(e,i,n,s,a)}Eo(e,i,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+jl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,a)=>e[a]=s),n&&n.headers.forEach((s,a)=>e[a]=s)}To(e,i){const n=PD[e];return`${this.mo}/v1/${i}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,i,n,s){const a=kf();return new Promise((l,p)=>{const f=new j9;f.setWithCredentials(!0),f.listenOnce(R9.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Cf.NO_ERROR:const m=f.getResponseJson();lt(wn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case Cf.TIMEOUT:lt(wn,`RPC '${e}' ${a} timed out`),p(new Ze(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const k=f.getStatus();if(lt(wn,`RPC '${e}' ${a} failed with status:`,k,"response text:",f.getResponseText()),k>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const A=T==null?void 0:T.error;if(A&&A.status&&A.message){const P=function(L){const W=L.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(W)>=0?W:Ie.UNKNOWN}(A.status);p(new Ze(P,A.message))}else p(new Ze(Ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else p(new Ze(Ie.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{lt(wn,`RPC '${e}' ${a} completed.`)}});const g=JSON.stringify(s);lt(wn,`RPC '${e}' ${a} sending request:`,s),f.send(i,"POST",g,n,15)})}Ro(e,i,n){const s=kf(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=L9(),p=N9(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.xmlHttpFactory=new O9({})),this.Eo(f.initMessageHeaders,i,n),f.encodeInitMessageHeaders=!0;const m=a.join("");lt(wn,`Creating RPC '${e}' stream ${s}: ${m}`,f);const k=l.createWebChannel(m,f);let T=!1,A=!1;const P=new ED({ro:W=>{A?lt(wn,`Not sending because RPC '${e}' stream ${s} is closed:`,W):(T||(lt(wn,`Opening RPC '${e}' stream ${s} transport.`),k.open(),T=!0),lt(wn,`RPC '${e}' stream ${s} sending:`,W),k.send(W))},oo:()=>k.close()}),L=(W,N,M)=>{W.listen(N,B=>{try{M(B)}catch(z){setTimeout(()=>{throw z},0)}})};return L(k,Eu.EventType.OPEN,()=>{A||lt(wn,`RPC '${e}' stream ${s} transport opened.`)}),L(k,Eu.EventType.CLOSE,()=>{A||(A=!0,lt(wn,`RPC '${e}' stream ${s} transport closed`),P.wo())}),L(k,Eu.EventType.ERROR,W=>{A||(A=!0,ml(wn,`RPC '${e}' stream ${s} transport errored:`,W),P.wo(new Ze(Ie.UNAVAILABLE,"The operation could not be completed")))}),L(k,Eu.EventType.MESSAGE,W=>{var N;if(!A){const M=W.data[0];gi(!!M);const B=M,z=B.error||((N=B[0])===null||N===void 0?void 0:N.error);if(z){lt(wn,`RPC '${e}' stream ${s} received error:`,z);const G=z.status;let R=function(K){const ae=Oi[K];if(ae!==void 0)return ik(ae)}(G),U=z.message;R===void 0&&(R=Ie.INTERNAL,U="Unknown error status: "+G+" with message "+z.message),A=!0,P.wo(new Ze(R,U)),k.close()}else lt(wn,`RPC '${e}' stream ${s} received:`,M),P._o(M)}}),L(p,V9.STAT_EVENT,W=>{W.stat===hb.PROXY?lt(wn,`RPC '${e}' stream ${s} detected buffering proxy`):W.stat===hb.NOPROXY&&lt(wn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.fo()},0),P}}function Tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){return new z7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,i,n=1e3,s=1.5,a=6e4){this.ii=e,this.timerId=i,this.Po=n,this.bo=s,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const i=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),s=Math.max(0,i-n);s>0&&lt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${i} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,i,n,s,a,l,p,f){this.ii=e,this.$o=n,this.Oo=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=p,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new pk(e,i)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,i){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():i&&i.code===Ie.RESOURCE_EXHAUSTED?(Ar(i.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):i&&i.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(i)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),i=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Fo===i&&this.Zo(n,s)},n=>{e(()=>{const s=new Ze(Ie.UNKNOWN,"Fetching auth token failed: "+n.message);return this.tu(s)})})}Zo(e,i){const n=this.Xo(this.Fo);this.stream=this.eu(e,i),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{n(()=>this.tu(s))}),this.stream.onMessage(s=>{n(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return lt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return i=>{this.ii.enqueueAndForget(()=>this.Fo===e?i():(lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DD extends fk{constructor(e,i,n,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,n,s,l),this.serializer=a}eu(e,i){return this.connection.Ro("Listen",e,i)}onMessage(e){this.qo.reset();const i=Y7(this.serializer,e),n=function(s){if(!("targetChange"in s))return Et.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?sr(a.readTime):Et.min()}(e);return this.listener.nu(i,n)}su(e){const i={};i.database=Km(this.serializer),i.addTarget=function(s,a){let l;const p=a.target;if(l=$m(p)?{documents:G7(s,p)}:{query:K7(s,p)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=rk(s,a.resumeToken);const f=Xm(s,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(Et.min())>0){l.readTime=e0(s,a.snapshotVersion.toTimestamp());const f=Xm(s,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const n=Z7(this.serializer,e);n&&(i.labels=n),this.Wo(i)}iu(e){const i={};i.database=Km(this.serializer),i.removeTarget=e,this.Wo(i)}}class ID extends fk{constructor(e,i,n,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,n,s,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,i){return this.connection.Ro("Write",e,i)}onMessage(e){if(gi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const i=U7(e.writeResults,e.commitTime),n=sr(e.commitTime);return this.listener.cu(n,i)}return gi(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Km(this.serializer),this.Wo(e)}uu(e){const i={streamToken:this.lastStreamToken,writes:e.map(n=>X7(this.serializer,n))};this.Wo(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD extends class{}{constructor(e,i,n,s){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=n,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Ze(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,i,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Io(e,i,n,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ze(Ie.UNKNOWN,s.toString())})}vo(e,i,n,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,i,n,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ze(Ie.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class BD{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ar(i),this.mu=!1):lt("OnlineStateTracker",i)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,i,n,s,a){this.localStore=e,this.datastore=i,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(l=>{n.enqueueAndForget(async()=>{po(this)&&(lt("RemoteStore","Restarting streams for network reachability change."),await async function(p){const f=kt(p);f.vu.add(4),await Uc(f),f.bu.set("Unknown"),f.vu.delete(4),await cp(f)}(this))})}),this.bu=new BD(n,s)}}async function cp(t){if(po(t))for(const e of t.Ru)await e(!0)}async function Uc(t){for(const e of t.Ru)await e(!1)}function xk(t,e){const i=kt(t);i.Au.has(e.targetId)||(i.Au.set(e.targetId,e),u2(i)?c2(i):zl(i).Ko()&&h2(i,e))}function mk(t,e){const i=kt(t),n=zl(i);i.Au.delete(e),n.Ko()&&gk(i,e),i.Au.size===0&&(n.Ko()?n.jo():po(i)&&i.bu.set("Unknown"))}function h2(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const i=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}zl(t).su(e)}function gk(t,e){t.Vu.qt(e),zl(t).iu(e)}function c2(t){t.Vu=new V7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),zl(t).start(),t.bu.gu()}function u2(t){return po(t)&&!zl(t).Uo()&&t.Au.size>0}function po(t){return kt(t).vu.size===0}function yk(t){t.Vu=void 0}async function ND(t){t.Au.forEach((e,i)=>{h2(t,e)})}async function RD(t,e){yk(t),u2(t)?(t.bu.Iu(e),c2(t)):t.bu.set("Unknown")}async function VD(t,e,i){if(t.bu.set("Online"),e instanceof sk&&e.state===2&&e.cause)try{await async function(n,s){const a=s.cause;for(const l of s.targetIds)n.Au.has(l)&&(await n.remoteSyncer.rejectListen(l,a),n.Au.delete(l),n.Vu.removeTarget(l))}(t,e)}catch(n){lt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await t0(t,n)}else if(e instanceof id?t.Vu.Ht(e):e instanceof nk?t.Vu.ne(e):t.Vu.Xt(e),!i.isEqual(Et.min()))try{const n=await dk(t.localStore);i.compareTo(n)>=0&&await function(s,a){const l=s.Vu.ce(a);return l.targetChanges.forEach((p,f)=>{if(p.resumeToken.approximateByteSize()>0){const g=s.Au.get(f);g&&s.Au.set(f,g.withResumeToken(p.resumeToken,a))}}),l.targetMismatches.forEach((p,f)=>{const g=s.Au.get(p);if(!g)return;s.Au.set(p,g.withResumeToken(cs.EMPTY_BYTE_STRING,g.snapshotVersion)),gk(s,p);const m=new Xr(g.target,p,f,g.sequenceNumber);h2(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,i)}catch(n){lt("RemoteStore","Failed to raise snapshot:",n),await t0(t,n)}}async function t0(t,e,i){if(!Hc(e))throw e;t.vu.add(1),await Uc(t),t.bu.set("Offline"),i||(i=()=>dk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{lt("RemoteStore","Retrying IndexedDB access"),await i(),t.vu.delete(1),await cp(t)})}function vk(t,e){return e().catch(i=>t0(t,i,e))}async function up(t){const e=kt(t),i=ua(e);let n=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;OD(e);)try{const s=await CD(e.localStore,n);if(s===null){e.Eu.length===0&&i.jo();break}n=s.batchId,jD(e,s)}catch(s){await t0(e,s)}bk(e)&&wk(e)}function OD(t){return po(t)&&t.Eu.length<10}function jD(t,e){t.Eu.push(e);const i=ua(t);i.Ko()&&i.ou&&i.uu(e.mutations)}function bk(t){return po(t)&&!ua(t).Uo()&&t.Eu.length>0}function wk(t){ua(t).start()}async function WD(t){ua(t).hu()}async function zD(t){const e=ua(t);for(const i of t.Eu)e.uu(i.mutations)}async function $D(t,e,i){const n=t.Eu.shift(),s=i2.from(n,e,i);await vk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await up(t)}async function HD(t,e){e&&ua(t).ou&&await async function(i,n){if(s=n.code,L7(s)&&s!==Ie.ABORTED){const a=i.Eu.shift();ua(i).Qo(),await vk(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,n)),await up(i)}var s}(t,e),bk(t)&&wk(t)}async function Bb(t,e){const i=kt(t);i.asyncQueue.verifyOperationInProgress(),lt("RemoteStore","RemoteStore received new credentials");const n=po(i);i.vu.add(3),await Uc(i),n&&i.bu.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.vu.delete(3),await cp(i)}async function YD(t,e){const i=kt(t);e?(i.vu.delete(2),await cp(i)):e||(i.vu.add(2),await Uc(i),i.bu.set("Unknown"))}function zl(t){return t.Su||(t.Su=function(e,i,n){const s=kt(e);return s.fu(),new DD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{uo:ND.bind(null,t),ao:RD.bind(null,t),nu:VD.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),u2(t)?c2(t):t.bu.set("Unknown")):(await t.Su.stop(),yk(t))})),t.Su}function ua(t){return t.Du||(t.Du=function(e,i,n){const s=kt(e);return s.fu(),new ID(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{uo:WD.bind(null,t),ao:HD.bind(null,t),au:zD.bind(null,t),cu:$D.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await up(t)):(await t.Du.stop(),t.Eu.length>0&&(lt("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,i,n,s,a){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,i,n,s,a){const l=Date.now()+n,p=new d2(e,i,l,s,a);return p.start(n),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function p2(t,e){if(Ar("AsyncQueue",`${e}: ${t}`),Hc(t))return new Ze(Ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.comparator=e?(i,n)=>e(i,n)||ct.comparator(i.key,n.key):(i,n)=>ct.comparator(i.key,n.key),this.keyedMap=bh(),this.sortedSet=new Ti(this.comparator)}static emptySet(e){return new tl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,n)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof tl)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;i.hasNext();){const s=i.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const n=new tl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=i,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.Cu=new Ti(ct.comparator)}track(e){const i=e.doc.key,n=this.Cu.get(i);n?e.type!==0&&n.type===3?this.Cu=this.Cu.insert(i,e):e.type===3&&n.type!==1?this.Cu=this.Cu.insert(i,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Cu=this.Cu.insert(i,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Cu=this.Cu.insert(i,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Cu=this.Cu.remove(i):e.type===1&&n.type===2?this.Cu=this.Cu.insert(i,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Cu=this.Cu.insert(i,{type:2,doc:e.doc}):vt():this.Cu=this.Cu.insert(i,e)}xu(){const e=[];return this.Cu.inorderTraversal((i,n)=>{e.push(n)}),e}}class Cl{constructor(e,i,n,s,a,l,p,f,g){this.query=e,this.docs=i,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=p,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(e,i,n,s,a){const l=[];return i.forEach(p=>{l.push({type:0,doc:p})}),new Cl(e,i,tl.emptySet(i),l,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,n=e.docChanges;if(i.length!==n.length)return!1;for(let s=0;s<i.length;s++)if(i[s].type!==n[s].type||!i[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.Nu=void 0,this.listeners=[]}}class UD{constructor(){this.queries=new Wl(e=>W5(e),sp),this.onlineState="Unknown",this.ku=new Set}}async function f2(t,e){const i=kt(t),n=e.query;let s=!1,a=i.queries.get(n);if(a||(s=!0,a=new XD),s)try{a.Nu=await i.onListen(n)}catch(l){const p=p2(l,`Initialization of query '${Ym(e.query)}' failed`);return void e.onError(p)}i.queries.set(n,a),a.listeners.push(e),e.Mu(i.onlineState),a.Nu&&e.$u(a.Nu)&&m2(i)}async function x2(t,e){const i=kt(t),n=e.query;let s=!1;const a=i.queries.get(n);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),s=a.listeners.length===0)}if(s)return i.queries.delete(n),i.onUnlisten(n)}function GD(t,e){const i=kt(t);let n=!1;for(const s of e){const a=s.query,l=i.queries.get(a);if(l){for(const p of l.listeners)p.$u(s)&&(n=!0);l.Nu=s}}n&&m2(i)}function KD(t,e,i){const n=kt(t),s=n.queries.get(e);if(s)for(const a of s.listeners)a.onError(i);n.queries.delete(e)}function m2(t){t.ku.forEach(e=>{e.next()})}class g2{constructor(e,i,n){this.query=e,this.Ou=i,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Cl(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),i=!0):this.qu(e,this.onlineState)&&(this.Uu(e),i=!0),this.Bu=e,i}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let i=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),i=!0),i}qu(e,i){if(!e.fromCache)return!0;const n=i!=="Offline";return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const i=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}Uu(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.key=e}}class Ck{constructor(e){this.key=e}}class QD{constructor(e,i){this.query=e,this.Yu=i,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Rt(),this.mutatedKeys=Rt(),this.tc=z5(e),this.ec=new tl(this.tc)}get nc(){return this.Yu}sc(e,i){const n=i?i.ic:new Lb,s=i?i.ec:this.ec;let a=i?i.mutatedKeys:this.mutatedKeys,l=s,p=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,k)=>{const T=s.get(m),A=rp(this.query,k)?k:null,P=!!T&&this.mutatedKeys.has(T.key),L=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let W=!1;T&&A?T.data.isEqual(A.data)?P!==L&&(n.track({type:3,doc:A}),W=!0):this.rc(T,A)||(n.track({type:2,doc:A}),W=!0,(f&&this.tc(A,f)>0||g&&this.tc(A,g)<0)&&(p=!0)):!T&&A?(n.track({type:0,doc:A}),W=!0):T&&!A&&(n.track({type:1,doc:T}),W=!0,(f||g)&&(p=!0)),W&&(A?(l=l.add(A),a=L?a.add(m):a.delete(m)):(l=l.delete(m),a=a.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),a=a.delete(m.key),n.track({type:1,doc:m})}return{ec:l,ic:n,zi:p,mutatedKeys:a}}rc(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,n){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((g,m)=>function(k,T){const A=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return A(k)-A(T)}(g.type,m.type)||this.tc(g.doc,m.doc)),this.oc(n);const l=i?this.uc():[],p=this.Zu.size===0&&this.current?1:0,f=p!==this.Xu;return this.Xu=p,a.length!==0||f?{snapshot:new Cl(this.query,e.ec,s,a,e.mutatedKeys,p===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Lb,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(i=>this.Yu=this.Yu.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.Yu=this.Yu.delete(i)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Rt(),this.ec.forEach(n=>{this.ac(n.key)&&(this.Zu=this.Zu.add(n.key))});const i=[];return e.forEach(n=>{this.Zu.has(n)||i.push(new Ck(n))}),this.Zu.forEach(n=>{e.has(n)||i.push(new _k(n))}),i}hc(e){this.Yu=e.ir,this.Zu=Rt();const i=this.sc(e.documents);return this.applyChanges(i,!0)}lc(){return Cl.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class ZD{constructor(e,i,n){this.query=e,this.targetId=i,this.view=n}}class JD{constructor(e){this.key=e,this.fc=!1}}class qD{constructor(e,i,n,s,a,l){this.localStore=e,this.remoteStore=i,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Wl(p=>W5(p),sp),this._c=new Map,this.mc=new Set,this.gc=new Ti(ct.comparator),this.yc=new Map,this.Ic=new a2,this.Tc={},this.Ec=new Map,this.Ac=_l.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function eI(t,e){const i=cI(t);let n,s;const a=i.wc.get(e);if(a)n=a.targetId,i.sharedClientState.addLocalQueryTarget(n),s=a.view.lc();else{const l=await SD(i.localStore,Dr(e)),p=i.sharedClientState.addLocalQueryTarget(l.targetId);n=l.targetId,s=await tI(i,e,n,p==="current",l.resumeToken),i.isPrimaryClient&&xk(i.remoteStore,l)}return s}async function tI(t,e,i,n,s){t.Rc=(k,T,A)=>async function(P,L,W,N){let M=L.view.sc(W);M.zi&&(M=await Db(P.localStore,L.query,!1).then(({documents:G})=>L.view.sc(G,M)));const B=N&&N.targetChanges.get(L.targetId),z=L.view.applyChanges(M,P.isPrimaryClient,B);return Rb(P,L.targetId,z.cc),z.snapshot}(t,k,T,A);const a=await Db(t.localStore,e,!0),l=new QD(e,a.ir),p=l.sc(a.documents),f=Xc.createSynthesizedTargetChangeForCurrentChange(i,n&&t.onlineState!=="Offline",s),g=l.applyChanges(p,t.isPrimaryClient,f);Rb(t,i,g.cc);const m=new ZD(e,i,l);return t.wc.set(e,m),t._c.has(i)?t._c.get(i).push(e):t._c.set(i,[e]),g.snapshot}async function iI(t,e){const i=kt(t),n=i.wc.get(e),s=i._c.get(n.targetId);if(s.length>1)return i._c.set(n.targetId,s.filter(a=>!sp(a,e))),void i.wc.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(n.targetId),i.sharedClientState.isActiveQueryTarget(n.targetId)||await Qm(i.localStore,n.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(n.targetId),mk(i.remoteStore,n.targetId),Zm(i,n.targetId)}).catch($c)):(Zm(i,n.targetId),await Qm(i.localStore,n.targetId,!0))}async function nI(t,e,i){const n=uI(t);try{const s=await function(a,l){const p=kt(a),f=Ln.now(),g=l.reduce((T,A)=>T.add(A.key),Rt());let m,k;return p.persistence.runTransaction("Locally write mutations","readwrite",T=>{let A=Ir(),P=Rt();return p.Zi.getEntries(T,g).next(L=>{A=L,A.forEach((W,N)=>{N.isValidDocument()||(P=P.add(W))})}).next(()=>p.localDocuments.getOverlayedDocuments(T,A)).next(L=>{m=L;const W=[];for(const N of l){const M=A7(N,m.get(N.key).overlayedDocument);M!=null&&W.push(new Ca(N.key,M,B5(M.value.mapValue),Rs.exists(!0)))}return p.mutationQueue.addMutationBatch(T,f,W,l)}).next(L=>{k=L;const W=L.applyToLocalDocumentSet(m,P);return p.documentOverlayCache.saveOverlays(T,L.batchId,W)})}).then(()=>({batchId:k.batchId,changes:H5(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,l,p){let f=a.Tc[a.currentUser.toKey()];f||(f=new Ti(Kt)),f=f.insert(l,p),a.Tc[a.currentUser.toKey()]=f}(n,s.batchId,i),await Gc(n,s.changes),await up(n.remoteStore)}catch(s){const a=p2(s,"Failed to persist write");i.reject(a)}}async function Sk(t,e){const i=kt(t);try{const n=await wD(i.localStore,e);e.targetChanges.forEach((s,a)=>{const l=i.yc.get(a);l&&(gi(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?gi(l.fc):s.removedDocuments.size>0&&(gi(l.fc),l.fc=!1))}),await Gc(i,n,e)}catch(n){await $c(n)}}function Nb(t,e,i){const n=kt(t);if(n.isPrimaryClient&&i===0||!n.isPrimaryClient&&i===1){const s=[];n.wc.forEach((a,l)=>{const p=l.view.Mu(e);p.snapshot&&s.push(p.snapshot)}),function(a,l){const p=kt(a);p.onlineState=l;let f=!1;p.queries.forEach((g,m)=>{for(const k of m.listeners)k.Mu(l)&&(f=!0)}),f&&m2(p)}(n.eventManager,e),s.length&&n.dc.nu(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function sI(t,e,i){const n=kt(t);n.sharedClientState.updateQueryState(e,"rejected",i);const s=n.yc.get(e),a=s&&s.key;if(a){let l=new Ti(ct.comparator);l=l.insert(a,Sn.newNoDocument(a,Et.min()));const p=Rt().add(a),f=new lp(Et.min(),new Map,new Ti(Kt),l,p);await Sk(n,f),n.gc=n.gc.remove(a),n.yc.delete(e),y2(n)}else await Qm(n.localStore,e,!1).then(()=>Zm(n,e,i)).catch($c)}async function rI(t,e){const i=kt(t),n=e.batch.batchId;try{const s=await bD(i.localStore,e);Tk(i,n,null),kk(i,n),i.sharedClientState.updateMutationState(n,"acknowledged"),await Gc(i,s)}catch(s){await $c(s)}}async function aI(t,e,i){const n=kt(t);try{const s=await function(a,l){const p=kt(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return p.mutationQueue.lookupMutationBatch(f,l).next(m=>(gi(m!==null),g=m.keys(),p.mutationQueue.removeMutationBatch(f,m))).next(()=>p.mutationQueue.performConsistencyCheck(f)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(f,g,l)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>p.localDocuments.getDocuments(f,g))})}(n.localStore,e);Tk(n,e,i),kk(n,e),n.sharedClientState.updateMutationState(e,"rejected",i),await Gc(n,s)}catch(s){await $c(s)}}function kk(t,e){(t.Ec.get(e)||[]).forEach(i=>{i.resolve()}),t.Ec.delete(e)}function Tk(t,e,i){const n=kt(t);let s=n.Tc[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(i?a.reject(i):a.resolve(),s=s.remove(e)),n.Tc[n.currentUser.toKey()]=s}}function Zm(t,e,i=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t._c.get(e))t.wc.delete(n),i&&t.dc.Pc(n,i);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(n=>{t.Ic.containsKey(n)||Mk(t,n)})}function Mk(t,e){t.mc.delete(e.path.canonicalString());const i=t.gc.get(e);i!==null&&(mk(t.remoteStore,i),t.gc=t.gc.remove(e),t.yc.delete(i),y2(t))}function Rb(t,e,i){for(const n of i)n instanceof _k?(t.Ic.addReference(n.key,e),oI(t,n)):n instanceof Ck?(lt("SyncEngine","Document no longer in limbo: "+n.key),t.Ic.removeReference(n.key,e),t.Ic.containsKey(n.key)||Mk(t,n.key)):vt()}function oI(t,e){const i=e.key,n=i.path.canonicalString();t.gc.get(i)||t.mc.has(n)||(lt("SyncEngine","New document in limbo: "+i),t.mc.add(n),y2(t))}function y2(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const i=new ct(Di.fromString(e)),n=t.Ac.next();t.yc.set(n,new JD(i)),t.gc=t.gc.insert(i,n),xk(t.remoteStore,new Xr(Dr(ip(i.path)),n,"TargetPurposeLimboResolution",Kg.ct))}}async function Gc(t,e,i){const n=kt(t),s=[],a=[],l=[];n.wc.isEmpty()||(n.wc.forEach((p,f)=>{l.push(n.Rc(f,e,i).then(g=>{if((g||i)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(f.targetId,g!=null&&g.fromCache?"not-current":"current"),g){s.push(g);const m=l2.Li(f.targetId,g);a.push(m)}}))}),await Promise.all(l),n.dc.nu(s),await async function(p,f){const g=kt(p);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>$e.forEach(f,k=>$e.forEach(k.Fi,T=>g.persistence.referenceDelegate.addReference(m,k.targetId,T)).next(()=>$e.forEach(k.Bi,T=>g.persistence.referenceDelegate.removeReference(m,k.targetId,T)))))}catch(m){if(!Hc(m))throw m;lt("LocalStore","Failed to update sequence numbers: "+m)}for(const m of f){const k=m.targetId;if(!m.fromCache){const T=g.Ji.get(k),A=T.snapshotVersion,P=T.withLastLimboFreeSnapshotVersion(A);g.Ji=g.Ji.insert(k,P)}}}(n.localStore,a))}async function lI(t,e){const i=kt(t);if(!i.currentUser.isEqual(e)){lt("SyncEngine","User change. New user:",e.toKey());const n=await uk(i.localStore,e);i.currentUser=e,function(s,a){s.Ec.forEach(l=>{l.forEach(p=>{p.reject(new Ze(Ie.CANCELLED,a))})}),s.Ec.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Gc(i,n.er)}}function hI(t,e){const i=kt(t),n=i.yc.get(e);if(n&&n.fc)return Rt().add(n.key);{let s=Rt();const a=i._c.get(e);if(!a)return s;for(const l of a){const p=i.wc.get(l);s=s.unionWith(p.view.nc)}return s}}function cI(t){const e=kt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sI.bind(null,e),e.dc.nu=GD.bind(null,e.eventManager),e.dc.Pc=KD.bind(null,e.eventManager),e}function uI(t){const e=kt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aI.bind(null,e),e}class Vb{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=hp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,i){return null}createIndexBackfillerScheduler(e,i){return null}createLocalStore(e){return vD(this.persistence,new gD,e.initialUser,this.serializer)}createPersistence(e){return new xD(o2.zs,this.serializer)}createSharedClientState(e){return new TD}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class dI{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Nb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=lI.bind(null,this.syncEngine),await YD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new UD}createDatastore(e){const i=hp(e.databaseInfo.databaseId),n=(s=e.databaseInfo,new AD(s));var s;return function(a,l,p,f){return new FD(a,l,p,f)}(e.authCredentials,e.appCheckCredentials,n,i)}createRemoteStore(e){return i=this.localStore,n=this.datastore,s=e.asyncQueue,a=p=>Nb(this.syncEngine,p,0),l=Fb.D()?new Fb:new MD,new LD(i,n,s,a,l);var i,n,s,a,l}createSyncEngine(e,i){return function(n,s,a,l,p,f,g){const m=new qD(n,s,a,l,p,f);return g&&(m.vc=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return async function(e){const i=kt(e);lt("RemoteStore","RemoteStore shutting down."),i.vu.add(5),await Uc(i),i.Pu.shutdown(),i.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,i){this.muted||setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,i,n,s){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=n,this.databaseInfo=s,this.user=_n.UNAUTHENTICATED,this.clientId=A5.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async a=>{lt("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(lt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ze(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const n=p2(i,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Mf(t,e){t.asyncQueue.verifyOperationInProgress(),lt("FirestoreClient","Initializing OfflineComponentProvider");const i=await t.getConfiguration();await e.initialize(i);let n=i.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await uk(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ob(t,e){t.asyncQueue.verifyOperationInProgress();const i=await xI(t);lt("FirestoreClient","Initializing OnlineComponentProvider");const n=await t.getConfiguration();await e.initialize(i,n),t.setCredentialChangeListener(s=>Bb(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,a)=>Bb(e.remoteStore,a)),t._onlineComponents=e}function fI(t){return t.name==="FirebaseError"?t.code===Ie.FAILED_PRECONDITION||t.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function xI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){lt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mf(t,t._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!fI(i))throw i;ml("Error using user provided cache. Falling back to memory cache: "+i),await Mf(t,new Vb)}}else lt("FirestoreClient","Using default OfflineComponentProvider"),await Mf(t,new Vb);return t._offlineComponents}async function Pk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(lt("FirestoreClient","Using user provided OnlineComponentProvider"),await Ob(t,t._uninitializedComponentsProvider._online)):(lt("FirestoreClient","Using default OnlineComponentProvider"),await Ob(t,new dI))),t._onlineComponents}function mI(t){return Pk(t).then(e=>e.syncEngine)}async function i0(t){const e=await Pk(t),i=e.eventManager;return i.onListen=eI.bind(null,e.syncEngine),i.onUnlisten=iI.bind(null,e.syncEngine),i}function gI(t,e,i={}){const n=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,p,f){const g=new v2({next:k=>{a.enqueueAndForget(()=>x2(s,m));const T=k.docs.has(l);!T&&k.fromCache?f.reject(new Ze(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&k.fromCache&&p&&p.source==="server"?f.reject(new Ze(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(k)},error:k=>f.reject(k)}),m=new g2(ip(l.path),g,{includeMetadataChanges:!0,Ku:!0});return f2(s,m)}(await i0(t),t.asyncQueue,e,i,n)),n.promise}function yI(t,e,i={}){const n=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,p,f){const g=new v2({next:k=>{a.enqueueAndForget(()=>x2(s,m)),k.fromCache&&p.source==="server"?f.reject(new Ze(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(k)},error:k=>f.reject(k)}),m=new g2(l,g,{includeMetadataChanges:!0,Ku:!0});return f2(s,m)}(await i0(t),t.asyncQueue,e,i,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t,e,i){if(!i)throw new Ze(Ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vI(t,e,i,n){if(e===!0&&n===!0)throw new Ze(Ie.INVALID_ARGUMENT,`${t} and ${i} cannot be used together.`)}function Wb(t){if(!ct.isDocumentKey(t))throw new Ze(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zb(t){if(ct.isDocumentKey(t))throw new Ze(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":vt()}function as(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ze(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=dp(t);throw new Ze(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return t}function Dk(t,e){if(e<=0)throw new Ze(Ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){var i,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(i=e.ssl)===null||i===void 0||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ze(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ek((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ze(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ze(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ze(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(i=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,i.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var i,n}}class pp{constructor(e,i,n,s){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $b({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ze(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Ze(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $b(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new z9;switch(i.type){case"firstParty":return new X9(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ze(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=jb.get(e);i&&(lt("ComponentProvider","Removing Datastore"),jb.delete(e),i.terminate())}(this),Promise.resolve()}}function bI(t,e,i,n={}){var s;const a=(t=as(t,pp))._getSettings(),l=`${e}:${i}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),n.mockUserToken){let p,f;if(typeof n.mockUserToken=="string")p=n.mockUserToken,f=_n.MOCK_USER;else{p=xS(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new Ze(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new _n(g)}t._authCredentials=new $9(new E5(p,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,i,n){this.converter=i,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ra(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class Hs{constructor(e,i,n){this.converter=i,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hs(this.firestore,e,this._query)}}class ra extends Hs{constructor(e,i,n){super(e,i,ip(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new ct(e))}withConverter(e){return new ra(this.firestore,e,this._path)}}function ei(t,e,...i){if(t=Zn(t),Ak("collection","path",e),t instanceof pp){const n=Di.fromString(e,...i);return zb(n),new ra(t,null,n)}{if(!(t instanceof An||t instanceof ra))throw new Ze(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Di.fromString(e,...i));return zb(n),new ra(t.firestore,null,n)}}function Mi(t,e,...i){if(t=Zn(t),arguments.length===1&&(e=A5.A()),Ak("doc","path",e),t instanceof pp){const n=Di.fromString(e,...i);return Wb(n),new An(t,null,new ct(n))}{if(!(t instanceof An||t instanceof ra))throw new Ze(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Di.fromString(e,...i));return Wb(n),new An(t.firestore,t instanceof ra?t.converter:null,new ct(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new pk(this,"async_queue_retry"),this.Xc=()=>{const i=Tf();i&&lt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.qo.Mo()};const e=Tf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const i=Tf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const i=new _r;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Hc(e))throw e;lt("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const i=this.Gc.then(()=>(this.Hc=!0,e().catch(n=>{this.Wc=n,this.Hc=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(n);throw Ar("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.Hc=!1,n))));return this.Gc=i,i}enqueueAfterDelay(e,i,n){this.Zc(),this.Yc.indexOf(e)>-1&&(i=0);const s=d2.createAndSchedule(this,e,i,n,a=>this.na(a));return this.zc.push(s),s}Zc(){this.Wc&&vt()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const i of this.zc)if(i.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((i,n)=>i.targetTimeMs-n.targetTimeMs);for(const i of this.zc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const i=this.zc.indexOf(e);this.zc.splice(i,1)}}function Hb(t){return function(e,i){if(typeof e!="object"||e===null)return!1;const n=e;for(const s of i)if(s in n&&typeof n[s]=="function")return!0;return!1}(t,["next","error","complete"])}class da extends pp{constructor(e,i,n,s){super(e,i,n,s),this.type="firestore",this._queue=new wI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ik(this),this._firestoreClient.terminate()}}function _I(t,e){const i=typeof t=="object"?t:kS(),n=typeof t=="string"?t:"(default)",s=_S(i,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=pS("firestore");a&&bI(s,...a)}return s}function fp(t){return t._firestoreClient||Ik(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ik(t){var e,i,n;const s=t._freezeSettings(),a=function(l,p,f,g){return new s7(l,p,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Ek(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new pI(t._authCredentials,t._appCheckCredentials,t._queue,a),!((i=s.cache)===null||i===void 0)&&i._offlineComponentProvider&&(!((n=s.cache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sl(cs.fromBase64String(e))}catch(i){throw new Ze(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Sl(cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new Ze(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new Ze(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new Ze(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=/^__.*__$/;class SI{constructor(e,i,n){this.data=e,this.fieldMask=i,this.fieldTransforms=n}toMutation(e,i){return this.fieldMask!==null?new Ca(e,this.data,this.fieldMask,i,this.fieldTransforms):new Yc(e,this.data,i,this.fieldTransforms)}}class Fk{constructor(e,i,n){this.data=e,this.fieldMask=i,this.fieldTransforms=n}toMutation(e,i){return new Ca(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function Bk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class mp{constructor(e,i,n,s,a,l){this.settings=e,this.databaseId=i,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new mp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var i;const n=(i=this.path)===null||i===void 0?void 0:i.child(e),s=this.aa({path:n,la:!1});return s.fa(e),s}da(e){var i;const n=(i=this.path)===null||i===void 0?void 0:i.child(e),s=this.aa({path:n,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return n0(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(Bk(this.ca)&&CI.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class kI{constructor(e,i,n){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=n||hp(e)}ya(e,i,n,s=!1){return new mp({ca:e,methodName:i,ga:n,path:rr.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qc(t){const e=t._freezeSettings(),i=hp(t._databaseId);return new kI(t._databaseId,!!e.ignoreUndefinedProperties,i)}function Lk(t,e,i,n,s,a={}){const l=t.ya(a.merge||a.mergeFields?2:0,e,i,s);_2("Data must be an object, but it was:",l,n);const p=Rk(n,l);let f,g;if(a.merge)f=new er(l.fieldMask),g=l.fieldTransforms;else if(a.mergeFields){const m=[];for(const k of a.mergeFields){const T=Jm(e,k,i);if(!l.contains(T))throw new Ze(Ie.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Ok(m,T)||m.push(T)}f=new er(m),g=l.fieldTransforms.filter(k=>f.covers(k.field))}else f=null,g=l.fieldTransforms;return new SI(new $n(p),f,g)}class gp extends Kc{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gp}}function TI(t,e,i){return new mp({ca:3,ga:e.settings.ga,methodName:t._methodName,la:i},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class w2 extends Kc{_toFieldTransform(e){return new J5(e.path,new _c)}isEqual(e){return e instanceof w2}}class MI extends Kc{constructor(e,i){super(e),this.pa=i}_toFieldTransform(e){const i=TI(this,e,!0),n=this.pa.map(a=>$l(a,i)),s=new wl(n);return new J5(e.path,s)}isEqual(e){return this===e}}function PI(t,e,i,n){const s=t.ya(1,e,i);_2("Data must be an object, but it was:",s,n);const a=[],l=$n.empty();uo(n,(f,g)=>{const m=C2(e,f,i);g=Zn(g);const k=s.da(m);if(g instanceof gp)a.push(m);else{const T=$l(g,k);T!=null&&(a.push(m),l.set(m,T))}});const p=new er(a);return new Fk(l,p,s.fieldTransforms)}function EI(t,e,i,n,s,a){const l=t.ya(1,e,i),p=[Jm(e,n,i)],f=[s];if(a.length%2!=0)throw new Ze(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)p.push(Jm(e,a[T])),f.push(a[T+1]);const g=[],m=$n.empty();for(let T=p.length-1;T>=0;--T)if(!Ok(g,p[T])){const A=p[T];let P=f[T];P=Zn(P);const L=l.da(A);if(P instanceof gp)g.push(A);else{const W=$l(P,L);W!=null&&(g.push(A),m.set(A,W))}}const k=new er(g);return new Fk(m,k,l.fieldTransforms)}function Nk(t,e,i,n=!1){return $l(i,t.ya(n?4:3,e))}function $l(t,e){if(Vk(t=Zn(t)))return _2("Unsupported field value:",e,t),Rk(t,e);if(t instanceof Kc)return function(i,n){if(!Bk(n.ca))throw n._a(`${i._methodName}() can only be used with update() and set()`);if(!n.path)throw n._a(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(n);s&&n.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(i,n){const s=[];let a=0;for(const l of i){let p=$l(l,n.wa(a));p==null&&(p={nullValue:"NULL_VALUE"}),s.push(p),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,n){if((i=Zn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return S7(n.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ln.fromDate(i);return{timestampValue:e0(n.serializer,s)}}if(i instanceof Ln){const s=new Ln(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:e0(n.serializer,s)}}if(i instanceof b2)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Sl)return{bytesValue:rk(n.serializer,i._byteString)};if(i instanceof An){const s=n.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw n._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:r2(i.firestore._databaseId||n.databaseId,i._key.path)}}throw n._a(`Unsupported field value: ${dp(i)}`)}(t,e)}function Rk(t,e){const i={};return D5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(t,(n,s)=>{const a=$l(s,e.ha(n));a!=null&&(i[n]=a)}),{mapValue:{fields:i}}}function Vk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ln||t instanceof b2||t instanceof Sl||t instanceof An||t instanceof Kc)}function _2(t,e,i){if(!Vk(i)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(i)){const n=dp(i);throw n==="an object"?e._a(t+" a custom object"):e._a(t+" "+n)}}function Jm(t,e,i){if((e=Zn(e))instanceof xp)return e._internalPath;if(typeof e=="string")return C2(t,e);throw n0("Field path arguments must be of type string or ",t,!1,void 0,i)}const AI=new RegExp("[~\\*/\\[\\]]");function C2(t,e,i){if(e.search(AI)>=0)throw n0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,i);try{return new xp(...e.split("."))._internalPath}catch{throw n0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,i)}}function n0(t,e,i,n,s){const a=n&&!n.isEmpty(),l=s!==void 0;let p=`Function ${e}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${n}`),l&&(f+=` in document ${s}`),f+=")"),new Ze(Ie.INVALID_ARGUMENT,p+t+f)}function Ok(t,e){return t.some(i=>i.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,i,n,s,a){this._firestore=e,this._userDataWriter=i,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(yp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class DI extends S2{data(){return super.data()}}function yp(t,e){return typeof e=="string"?C2(t,e):e instanceof xp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ze(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k2{}class Zc extends k2{}function Qn(t,e,...i){let n=[];e instanceof k2&&n.push(e),n=n.concat(i),function(s){const a=s.filter(p=>p instanceof T2).length,l=s.filter(p=>p instanceof vp).length;if(a>1||a>0&&l>0)throw new Ze(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class vp extends Zc{constructor(e,i,n){super(),this._field=e,this._op=i,this._value=n,this.type="where"}static _create(e,i,n){return new vp(e,i,n)}_apply(e){const i=this._parse(e);return zk(e._query,i),new Hs(e.firestore,e.converter,Hm(e._query,i))}_parse(e){const i=Qc(e.firestore);return function(s,a,l,p,f,g,m){let k;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ze(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Xb(m,g);const T=[];for(const A of m)T.push(Yb(p,s,A));k={arrayValue:{values:T}}}else k=Yb(p,s,m)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Xb(m,g),k=Nk(l,a,m,g==="in"||g==="not-in");return Hi.create(f,g,k)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function et(t,e,i){const n=e,s=yp("where",t);return vp._create(s,n,i)}class T2 extends k2{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new T2(e,i)}_parse(e){const i=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return i.length===1?i[0]:$s.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:(function(n,s){let a=n;const l=s.getFlattenedFilters();for(const p of l)zk(a,p),a=Hm(a,p)}(e._query,i),new Hs(e.firestore,e.converter,Hm(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class M2 extends Zc{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new M2(e,i)}_apply(e){const i=function(n,s,a){if(n.startAt!==null)throw new Ze(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new Ze(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new el(s,a);return function(p,f){if(e2(p)===null){const g=np(p);g!==null&&$k(p,g,f.field)}}(n,l),l}(e._query,this._field,this._direction);return new Hs(e.firestore,e.converter,function(n,s){const a=n.explicitOrderBy.concat([s]);return new _a(n.path,n.collectionGroup,a,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,i))}}function Vs(t,e="asc"){const i=e,n=yp("orderBy",t);return M2._create(n,i)}class bp extends Zc{constructor(e,i,n){super(),this.type=e,this._limit=i,this._limitType=n}static _create(e,i,n){return new bp(e,i,n)}_apply(e){return new Hs(e.firestore,e.converter,Jd(e._query,this._limit,this._limitType))}}function or(t){return Dk("limit",t),bp._create("limit",t,"F")}function II(t){return Dk("limitToLast",t),bp._create("limitToLast",t,"L")}class P2 extends Zc{constructor(e,i,n){super(),this.type=e,this._docOrFields=i,this._inclusive=n}static _create(e,i,n){return new P2(e,i,n)}_apply(e){const i=Wk(e,this.type,this._docOrFields,this._inclusive);return new Hs(e.firestore,e.converter,function(n,s){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,s,n.endAt)}(e._query,i))}}function FI(...t){return P2._create("startAfter",t,!1)}class E2 extends Zc{constructor(e,i,n){super(),this.type=e,this._docOrFields=i,this._inclusive=n}static _create(e,i,n){return new E2(e,i,n)}_apply(e){const i=Wk(e,this.type,this._docOrFields,this._inclusive);return new Hs(e.firestore,e.converter,function(n,s){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,s)}(e._query,i))}}function BI(...t){return E2._create("endBefore",t,!1)}function Wk(t,e,i,n){if(i[0]=Zn(i[0]),i[0]instanceof S2)return function(s,a,l,p,f){if(!p)throw new Ze(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const g=[];for(const m of Xa(s))if(m.field.isKeyField())g.push(Zd(a,p.key));else{const k=p.data.field(m.field);if(tp(k))throw new Ze(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(k===null){const T=m.field.canonicalString();throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}g.push(k)}return new bl(g,f)}(t._query,t.firestore._databaseId,e,i[0]._document,n);{const s=Qc(t.firestore);return function(a,l,p,f,g,m){const k=a.explicitOrderBy;if(g.length>k.length)throw new Ze(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let A=0;A<g.length;A++){const P=g[A];if(k[A].field.isKeyField()){if(typeof P!="string")throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof P}`);if(!t2(a)&&P.indexOf("/")!==-1)throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${P}' contains a slash.`);const L=a.path.child(Di.fromString(P));if(!ct.isDocumentKey(L))throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const W=new ct(L);T.push(Zd(l,W))}else{const L=Nk(p,f,P);T.push(L)}}return new bl(T,m)}(t._query,t.firestore._databaseId,s,e,i,n)}}function Yb(t,e,i){if(typeof(i=Zn(i))=="string"){if(i==="")throw new Ze(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t2(e)&&i.indexOf("/")!==-1)throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const n=e.path.child(Di.fromString(i));if(!ct.isDocumentKey(n))throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Zd(t,new ct(n))}if(i instanceof An)return Zd(t,i._key);throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dp(i)}.`)}function Xb(t,e){if(!Array.isArray(t)||t.length===0)throw new Ze(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zk(t,e){if(e.isInequality()){const n=np(t),s=e.field;if(n!==null&&!n.isEqual(s))throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${s.toString()}'`);const a=e2(t);a!==null&&$k(t,s,a)}const i=function(n,s){for(const a of n)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new Ze(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}function $k(t,e,i){if(!i.isEqual(e))throw new Ze(Ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${i.toString()}' instead.`)}class LI{convertValue(e,i="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw vt()}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const n={};return uo(e,(s,a)=>{n[s]=this.convertValue(a,i)}),n}convertGeoPoint(e){return new b2(Wi(e.latitude),Wi(e.longitude))}convertArray(e,i){return(e.values||[]).map(n=>this.convertValue(n,i))}convertServerTimestamp(e,i){switch(i){case"previous":const n=Qg(e);return n==null?null:this.convertValue(n,i);case"estimate":return this.convertTimestamp(bc(e));default:return null}}convertTimestamp(e){const i=ca(e);return new Ln(i.seconds,i.nanos)}convertDocumentKey(e,i){const n=Di.fromString(e);gi(ck(n));const s=new F5(n.get(1),n.get(3)),a=new ct(n.popFirst(5));return s.isEqual(i)||Ar(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(t,e,i){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yk extends S2{constructor(e,i,n,s,a,l){super(e,i,n,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const n=this._document.data.field(yp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,i.serverTimestamps)}}}class nd extends Yk{data(e={}){return super.data(e)}}class Xk{constructor(e,i,n,s){this._firestore=e,this._userDataWriter=i,this._snapshot=s,this.metadata=new _h(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(n=>{e.call(i,new nd(this._firestore,this._userDataWriter,n.key,n,new _h(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Ze(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(n,s){if(n._snapshot.oldDocs.isEmpty()){let a=0;return n._snapshot.docChanges.map(l=>{const p=new nd(n._firestore,n._userDataWriter,l.doc.key,l.doc,new _h(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);return l.doc,{type:"added",doc:p,oldIndex:-1,newIndex:a++}})}{let a=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const p=new nd(n._firestore,n._userDataWriter,l.doc.key,l.doc,new _h(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);let f=-1,g=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),g=a.indexOf(l.doc.key)),{type:NI(l.type),doc:p,oldIndex:f,newIndex:g}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function NI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t){t=as(t,An);const e=as(t.firestore,da);return gI(fp(e),t._key).then(i=>Uk(e,t,i))}class A2 extends LI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sl(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,i)}}function Fi(t){t=as(t,Hs);const e=as(t.firestore,da),i=fp(e),n=new A2(e);return jk(t._query),yI(i,t._query).then(s=>new Xk(e,n,t,s))}function RI(t,e,i){t=as(t,An);const n=as(t.firestore,da),s=Hk(t.converter,e);return I2(n,[Lk(Qc(n),"setDoc",t._key,s,t.converter!==null,i).toMutation(t._key,Rs.none())])}function D2(t,e,i,...n){t=as(t,An);const s=as(t.firestore,da),a=Qc(s);let l;return l=typeof(e=Zn(e))=="string"||e instanceof xp?EI(a,"updateDoc",t._key,e,i,n):PI(a,"updateDoc",t._key,e),I2(s,[l.toMutation(t._key,Rs.exists(!0))])}function VI(t,e){const i=as(t.firestore,da),n=Mi(t),s=Hk(t.converter,e);return I2(i,[Lk(Qc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Rs.exists(!1))]).then(()=>n)}function Jc(t,...e){var i,n,s;t=Zn(t);let a={includeMetadataChanges:!1},l=0;typeof e[l]!="object"||Hb(e[l])||(a=e[l],l++);const p={includeMetadataChanges:a.includeMetadataChanges};if(Hb(e[l])){const k=e[l];e[l]=(i=k.next)===null||i===void 0?void 0:i.bind(k),e[l+1]=(n=k.error)===null||n===void 0?void 0:n.bind(k),e[l+2]=(s=k.complete)===null||s===void 0?void 0:s.bind(k)}let f,g,m;if(t instanceof An)g=as(t.firestore,da),m=ip(t._key.path),f={next:k=>{e[l]&&e[l](Uk(g,t,k))},error:e[l+1],complete:e[l+2]};else{const k=as(t,Hs);g=as(k.firestore,da),m=k._query;const T=new A2(g);f={next:A=>{e[l]&&e[l](new Xk(g,T,k,A))},error:e[l+1],complete:e[l+2]},jk(t._query)}return function(k,T,A,P){const L=new v2(P),W=new g2(T,L,A);return k.asyncQueue.enqueueAndForget(async()=>f2(await i0(k),W)),()=>{L.Dc(),k.asyncQueue.enqueueAndForget(async()=>x2(await i0(k),W))}}(fp(g),m,p,f)}function I2(t,e){return function(i,n){const s=new _r;return i.asyncQueue.enqueueAndForget(async()=>nI(await mI(i),n,s)),s.promise}(fp(t),e)}function Uk(t,e,i){const n=i.docs.get(e._key),s=new A2(t);return new Yk(t,s,e._key,n,new _h(i.hasPendingWrites,i.fromCache),e.converter)}function Ub(){return new w2("serverTimestamp")}function OI(...t){return new MI("arrayUnion",t)}(function(t,e=!0){(function(i){jl=i})(CS),hc(new fl("firestore",(i,{instanceIdentifier:n,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new da(new H9(i.getProvider("auth-internal")),new G9(i.getProvider("app-check-internal")),function(p,f){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ze(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new F5(p.options.projectId,f)}(a,n),a);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),na(cb,"3.13.0",t),na(cb,"3.13.0","esm2017")})();var jI="firebase",WI="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */na(jI,WI,"app");var Gb={};const Kb="@firebase/database",Qb="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gk="";function zI(t){Gk=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,i){i==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xn(i))}get(e){const i=this.domStorage_.getItem(this.prefixedName_(e));return i==null?null:lc(i)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,i){i==null?delete this.cache_[e]:this.cache_[e]=i}get(e){return Lr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $I(e)}}catch{}return new HI},Wa=Kk("localStorage"),YI=Kk("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new kg("@firebase/database"),XI=function(){let t=1;return function(){return t++}}(),Qk=function(t){const e=PE(t),i=new TE;i.update(e);const n=i.digest();return Cg.encodeByteArray(n)},qc=function(...t){let e="";for(let i=0;i<t.length;i++){const n=t[i];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=qc.apply(null,n):typeof n=="object"?e+=xn(n):e+=n,e+=" "}return e};let Rh=null,Zb=!0;const UI=function(t,e){Je(!e,"Can't turn on custom loggers persistently."),il.logLevel=Gt.VERBOSE,Rh=il.log.bind(il)},kn=function(...t){if(Zb===!0&&(Zb=!1,Rh===null&&YI.get("logging_enabled")===!0&&UI()),Rh){const e=qc.apply(null,t);Rh(e)}},eu=function(t){return function(...e){kn(t,...e)}},qm=function(...t){const e="FIREBASE INTERNAL ERROR: "+qc(...t);il.error(e)},Fr=function(...t){const e=`FIREBASE FATAL ERROR: ${qc(...t)}`;throw il.error(e),new Error(e)},os=function(...t){const e="FIREBASE WARNING: "+qc(...t);il.warn(e)},GI=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&os("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Zk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},KI=function(t){if(document.readyState==="complete")t();else{let e=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},kl="[MIN_NAME]",ro="[MAX_NAME]",Hl=function(t,e){if(t===e)return 0;if(t===kl||e===ro)return-1;if(e===kl||t===ro)return 1;{const i=Jb(t),n=Jb(e);return i!==null?n!==null?i-n===0?t.length-e.length:i-n:-1:n!==null?1:t<e?-1:1}},QI=function(t,e){return t===e?0:t<e?-1:1},hh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+xn(e))},F2=function(t){if(typeof t!="object"||t===null)return xn(t);const e=[];for(const n in t)e.push(n);e.sort();let i="{";for(let n=0;n<e.length;n++)n!==0&&(i+=","),i+=xn(e[n]),i+=":",i+=F2(t[e[n]]);return i+="}",i},Jk=function(t,e){const i=t.length;if(i<=e)return[t];const n=[];for(let s=0;s<i;s+=e)s+e>i?n.push(t.substring(s,i)):n.push(t.substring(s,s+e));return n};function Cs(t,e){for(const i in t)t.hasOwnProperty(i)&&e(i,t[i])}const qk=function(t){Je(!Zk(t),"Invalid JSON number");const e=11,i=52,n=(1<<e-1)-1;let s,a,l,p,f;t===0?(a=0,l=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(p=Math.min(Math.floor(Math.log(t)/Math.LN2),n),a=p+n,l=Math.round(t*Math.pow(2,i-p)-Math.pow(2,i))):(a=0,l=Math.round(t/Math.pow(2,1-n-i))));const g=[];for(f=i;f;f-=1)g.push(l%2?1:0),l=Math.floor(l/2);for(f=e;f;f-=1)g.push(a%2?1:0),a=Math.floor(a/2);g.push(s?1:0),g.reverse();const m=g.join("");let k="";for(f=0;f<64;f+=8){let T=parseInt(m.substr(f,8),2).toString(16);T.length===1&&(T="0"+T),k=k+T}return k.toLowerCase()},ZI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},JI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},qI=new RegExp("^-?(0*)\\d{1,10}$"),eF=-2147483648,tF=2147483647,Jb=function(t){if(qI.test(t)){const e=Number(t);if(e>=eF&&e<=tF)return e}return null},tu=function(t){try{t()}catch(e){setTimeout(()=>{const i=e.stack||"";throw os("Exception was thrown by user callback.",i),e},Math.floor(0))}},iF=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Vh=function(t,e){const i=setTimeout(t,e);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e,i){this.appName_=e,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((i,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(i,n):i(null)},0)})}addTokenChangeListener(e){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){os(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e,i,n){this.appName_=e,this.firebaseOptions_=i,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(i=>i&&i.code==="auth/token-not-initialized"?(kn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(i,n):i(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(i=>i.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(i=>i.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',os(e)}}class sd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}sd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="5",e3="v",t3="s",i3="r",n3="f",s3=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,r3="ls",a3="p",e1="ac",o3="websocket",l3="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,i,n,s,a=!1,l="",p=!1,f=!1){this.secure=i,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${i}`}}function rF(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function c3(t,e,i){Je(typeof e=="string","typeof type must == string"),Je(typeof i=="object","typeof params must == object");let n;if(e===o3)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===l3)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);rF(t)&&(i.ns=t.namespace);const s=[];return Cs(i,(a,l)=>{s.push(a+"="+l)}),n+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(){this.counters_={}}incrementCounter(e,i=1){Lr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=i}get(){return hE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf={},Ef={};function L2(t){const e=t.toString();return Pf[e]||(Pf[e]=new aF),Pf[e]}function oF(t,e){const i=t.toString();return Ef[i]||(Ef[i]=e()),Ef[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,i){this.closeAfterResponse=e,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,i){for(this.pendingResponses[e]=i;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<n.length;++s)n[s]&&tu(()=>{this.onMessage_(n[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="start",hF="close",cF="pLPCommand",uF="pRTLPCB",u3="id",d3="pw",p3="ser",dF="cb",pF="seg",fF="ts",xF="d",mF="dframe",f3=1870,x3=30,gF=f3-x3,yF=25e3,vF=3e4;class $o{constructor(e,i,n,s,a,l,p){this.connId=e,this.repoInfo=i,this.applicationId=n,this.appCheckToken=s,this.authToken=a,this.transportSessionId=l,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=eu(e),this.stats_=L2(i),this.urlFn=f=>(this.appCheckToken&&(f[e1]=this.appCheckToken),c3(i,l3,f))}open(e,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new lF(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(vF)),KI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new N2((...a)=>{const[l,p,f,g,m]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===qb)this.id=p,this.password=f;else if(l===hF)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,p]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,p)},()=>{this.onClosed_()},this.urlFn);const n={};n[qb]="t",n[p3]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[dF]=this.scriptTagHolder.uniqueCallbackIdentifier),n[e3]=B2,this.transportSessionId&&(n[t3]=this.transportSessionId),this.lastSessionId&&(n[r3]=this.lastSessionId),this.applicationId&&(n[a3]=this.applicationId),this.appCheckToken&&(n[e1]=this.appCheckToken),typeof location<"u"&&location.hostname&&s3.test(location.hostname)&&(n[i3]=n3);const s=this.urlFn(n);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$o.forceAllow_=!0}static forceDisallow(){$o.forceDisallow_=!0}static isAvailable(){return $o.forceAllow_?!0:!$o.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ZI()&&!JI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const i=xn(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const n=cS(i),s=Jk(n,gF);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(e,i){this.myDisconnFrame=document.createElement("iframe");const n={};n[mF]="t",n[u3]=e,n[d3]=i,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const i=xn(e).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class N2{constructor(e,i,n,s){this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=XI(),window[cF+this.uniqueCallbackIdentifier]=e,window[uF+this.uniqueCallbackIdentifier]=i,this.myIFrame=N2.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(p){kn("frame writing exception"),p.stack&&kn(p.stack),kn(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||kn("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,i){for(this.myID=e,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[u3]=this.myID,e[d3]=this.myPW,e[p3]=this.currentSerial;let i=this.urlFn(e),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+x3+n.length<=f3;){const l=this.pendingSegs.shift();n=n+"&"+pF+s+"="+l.seg+"&"+fF+s+"="+l.ts+"&"+xF+s+"="+l.d,s++}return i=i+n,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(e,i,n){this.pendingSegs.push({seg:e,ts:i,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,i){this.outstandingRequests.add(i);const n=()=>{this.outstandingRequests.delete(i),this.newRequest_()},s=setTimeout(n,Math.floor(yF)),a=()=>{clearTimeout(s),n()};this.addTag(e,a)}addTag(e,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const s=n.readyState;(!s||s==="loaded"||s==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),i())},n.onerror=()=>{kn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=16384,wF=45e3;let s0=null;typeof MozWebSocket<"u"?s0=MozWebSocket:typeof WebSocket<"u"&&(s0=WebSocket);class Is{constructor(e,i,n,s,a,l,p){this.connId=e,this.applicationId=n,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=eu(this.connId),this.stats_=L2(i),this.connURL=Is.connectionURL_(i,l,p,s,n),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,n,s,a){const l={};return l[e3]=B2,typeof location<"u"&&location.hostname&&s3.test(location.hostname)&&(l[i3]=n3),i&&(l[t3]=i),n&&(l[r3]=n),s&&(l[e1]=s),a&&(l[a3]=a),c3(e,o3,l)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wa.set("previous_websocket_failure",!0);try{let n;gS(),this.mySock=new s0(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Is.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(i);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&s0!==null&&!Is.forceDisallow_}static previouslyFailed(){return Wa.isInMemoryStorage||Wa.get("previous_websocket_failure")===!0}markConnectionHealthy(){Wa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const n=lc(i);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Je(this.frames===null,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const n=this.extractFrameCount_(i);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const i=xn(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const n=Jk(i,bF);n.length>1&&this.sendString_(String(n.length));for(let s=0;s<n.length;s++)this.sendString_(n[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(wF))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Is.responsesRequiredToBeHealthy=2;Is.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[$o,Is]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Is&&Is.isAvailable();let n=i&&!Is.previouslyFailed();if(e.webSocketOnly&&(i||os("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Is];else{const s=this.transports_=[];for(const a of Sc.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);Sc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Sc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=6e4,CF=5e3,SF=10*1024,kF=100*1024,Af="t",ew="d",TF="s",tw="r",MF="e",iw="o",nw="a",sw="n",rw="p",PF="h";class EF{constructor(e,i,n,s,a,l,p,f,g,m){this.id=e,this.repoInfo_=i,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=l,this.onReady_=p,this.onDisconnect_=f,this.onKill_=g,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=eu("c:"+this.id+":"),this.transportManager_=new Sc(i),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,n)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Vh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>kF?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>SF?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return i=>{e===this.conn_?this.onConnectionLost_(i):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return i=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(i):e===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(e){const i={t:"d",d:e};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Af in e){const i=e[Af];i===nw?this.upgradeIfSecondaryHealthy_():i===tw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===iw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const i=hh("t",e),n=hh("d",e);if(i==="c")this.onSecondaryControl_(n);else if(i==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:rw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:nw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:sw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const i=hh("t",e),n=hh("d",e);i==="c"?this.onControl_(n):i==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const i=hh(Af,e);if(ew in e){const n=e[ew];if(i===PF){const s=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(i===sw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===TF?this.onConnectionShutdown_(n):i===tw?this.onReset_(n):i===MF?qm("Server Error: "+n):i===iw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qm("Unknown control packet command: "+i)}}onHandshake_(e){const i=e.ts,n=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),B2!==n&&os("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,n),Vh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(_F))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,i){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CF))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:rw,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{put(e,i,n,s){}merge(e,i,n,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,i,n){}onDisconnectMerge(e,i,n){}onDisconnectCancel(e,i){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e){this.allowedEvents_=e,this.listeners_={},Je(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...i){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let s=0;s<n.length;s++)n[s].callback.apply(n[s].context,i)}}on(e,i,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:i,context:n});const s=this.getInitialEvent(e);s&&i.apply(n,s)}off(e,i,n){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let a=0;a<s.length;a++)if(s[a].callback===i&&(!n||n===s[a].context)){s.splice(a,1);return}}validateEventType_(e){Je(this.allowedEvents_.find(i=>i===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends g3{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!mS()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new r0}getInitialEvent(e){return Je(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=32,ow=768;class yi{constructor(e,i){if(i===void 0){this.pieces_=e.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=i}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(e+="/"+this.pieces_[i]);return e||"/"}}function ri(){return new yi("")}function $t(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pa(t){return t.pieces_.length-t.pieceNum_}function fi(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new yi(t.pieces_,e)}function y3(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function AF(t){let e="";for(let i=t.pieceNum_;i<t.pieces_.length;i++)t.pieces_[i]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[i])));return e||"/"}function v3(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function b3(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let i=t.pieceNum_;i<t.pieces_.length-1;i++)e.push(t.pieces_[i]);return new yi(e,0)}function an(t,e){const i=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)i.push(t.pieces_[n]);if(e instanceof yi)for(let n=e.pieceNum_;n<e.pieces_.length;n++)i.push(e.pieces_[n]);else{const n=e.split("/");for(let s=0;s<n.length;s++)n[s].length>0&&i.push(n[s])}return new yi(i,0)}function Ot(t){return t.pieceNum_>=t.pieces_.length}function vs(t,e){const i=$t(t),n=$t(e);if(i===null)return e;if(i===n)return vs(fi(t),fi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function w3(t,e){if(pa(t)!==pa(e))return!1;for(let i=t.pieceNum_,n=e.pieceNum_;i<=t.pieces_.length;i++,n++)if(t.pieces_[i]!==e.pieces_[n])return!1;return!0}function Fs(t,e){let i=t.pieceNum_,n=e.pieceNum_;if(pa(t)>pa(e))return!1;for(;i<t.pieces_.length;){if(t.pieces_[i]!==e.pieces_[n])return!1;++i,++n}return!0}class DF{constructor(e,i){this.errorPrefix_=i,this.parts_=v3(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=N0(this.parts_[n]);_3(this)}}function IF(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=N0(e),_3(t)}function FF(t){const e=t.parts_.pop();t.byteLength_-=N0(e),t.parts_.length>0&&(t.byteLength_-=1)}function _3(t){if(t.byteLength_>ow)throw new Error(t.errorPrefix_+"has a key path longer than "+ow+" bytes ("+t.byteLength_+").");if(t.parts_.length>aw)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+aw+") or object contains a cycle "+Da(t))}function Da(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2 extends g3{constructor(){super(["visible"]);let e,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new R2}getInitialEvent(e){return Je(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=1e3,BF=60*5*1e3,lw=30*1e3,LF=1.3,NF=3e4,RF="server_kill",hw=3;class Cr extends m3{constructor(e,i,n,s,a,l,p,f){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=n,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=p,this.authOverride_=f,this.id=Cr.nextPersistentConnectionId_++,this.log_=eu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ch,this.maxReconnectDelay_=BF,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!gS())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");R2.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&r0.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,n){const s=++this.requestNumber_,a={r:s,a:e,b:i};this.log_(xn(a)),Je(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),n&&(this.requestCBHash_[s]=n)}get(e){this.initConnection_();const i=new Sg,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const p=l.d;l.s==="ok"?i.resolve(p):i.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),i.promise}listen(e,i,n,s){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),Je(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Je(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:n};this.listens.get(l).set(a,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(n)})}sendListen_(e){const i=e.query,n=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+n+" for "+s);const a={p:n},l="q";e.tag&&(a.q=i._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,p=>{const f=p.d,g=p.s;Cr.warnOnListenWarnings_(f,i),(this.listens.get(n)&&this.listens.get(n).get(s))===e&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(n,s),e.onComplete&&e.onComplete(g,f))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&Lr(e,"w")){const n=pl(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();os(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||SE(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=lw)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=CE(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(i,n,s=>{const a=s.s,l=s.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,n=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,n)})}unlisten(e,i){const n=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+s),Je(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,s)&&this.connected_&&this.sendUnlisten_(n,s,e._queryObject,i)}sendUnlisten_(e,i,n,s){this.log_("Unlisten on "+e+" for "+i);const a={p:e},l="n";s&&(a.q=n,a.t=s),this.sendRequest(l,a)}onDisconnectPut(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:n})}onDisconnectMerge(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:n})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,n,s){const a={p:i,d:n};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,i,n,s){this.putInternal("p",e,i,n,s)}merge(e,i,n,s){this.putInternal("m",e,i,n,s)}putInternal(e,i,n,s,a){this.initConnection_();const l={p:i,d:n};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,n,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,n=>{if(n.s!=="ok"){const a=n.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+xn(e));const i=e.r,n=this.requestCBHash_[i];n&&(delete this.requestCBHash_[i],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):qm("Unrecognized action received from server: "+xn(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Je(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ch,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ch,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>NF&&(this.reconnectDelay_=ch),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*LF)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Cr.nextConnectionId_++,a=this.lastSessionId;let l=!1,p=null;const f=function(){p?p.close():(l=!0,n())},g=function(k){Je(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(k)};this.realtime_={close:f,sendRequest:g};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[k,T]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?kn("getToken() completed but was canceled"):(kn("getToken() completed. Creating connection."),this.authToken_=k&&k.accessToken,this.appCheckToken_=T&&T.token,p=new EF(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,n,A=>{os(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(RF)},a))}catch(k){this.log_("Failed to get token: "+k),l||(this.repoInfo_.nodeAdmin&&os(k),f())}}}interrupt(e){kn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){kn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Wv(this.interruptReasons_)&&(this.reconnectDelay_=ch,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let n;i?n=i.map(a=>F2(a)).join("$"):n="default";const s=this.removeListen_(e,n);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const n=new yi(e).toString();let s;if(this.listens.has(n)){const a=this.listens.get(n);s=a.get(i),a.delete(i),a.size===0&&this.listens.delete(n)}else s=void 0;return s}onAuthRevoked_(e,i){kn("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=hw&&(this.reconnectDelay_=lw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){kn("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=hw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";e["sdk."+i+"."+Gk.replace(/\./g,"-")]=1,mS()?e["framework.cordova"]=1:gE()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=r0.getInstance().currentlyOnline();return Wv(this.interruptReasons_)&&e}}Cr.nextPersistentConnectionId_=0;Cr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,i){this.name=e,this.node=i}static Wrap(e,i){return new Ht(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,i){const n=new Ht(kl,e),s=new Ht(kl,i);return this.compare(n,s)!==0}minPost(){return Ht.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu;class C3 extends wp{static get __EMPTY_NODE(){return Bu}static set __EMPTY_NODE(e){Bu=e}compare(e,i){return Hl(e.name,i.name)}isDefinedOn(e){throw Nl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,i){return!1}minPost(){return Ht.MIN}maxPost(){return new Ht(ro,Bu)}makePost(e,i){return Je(typeof e=="string","KeyIndex indexValue must always be a string."),new Ht(e,Bu)}toString(){return".key"}}const nl=new C3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,i,n,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=i?n(e.key,i):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(e.key,e.value):i={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class sn{constructor(e,i,n,s,a){this.key=e,this.value=i,this.color=n??sn.RED,this.left=s??Yn.EMPTY_NODE,this.right=a??Yn.EMPTY_NODE}copy(e,i,n,s,a){return new sn(e??this.key,i??this.value,n??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,n){let s=this;const a=n(e,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(e,i,n),null):a===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,i,n)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let n,s;if(n=this,i(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,i),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),i(e,n.key)===0){if(n.right.isEmpty())return Yn.EMPTY_NODE;s=n.right.min_(),n=n.copy(s.key,s.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,i))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}sn.RED=!0;sn.BLACK=!1;class VF{copy(e,i,n,s,a){return this}insert(e,i,n){return new sn(e,i,null)}remove(e,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Yn{constructor(e,i=Yn.EMPTY_NODE){this.comparator_=e,this.root_=i}insert(e,i){return new Yn(this.comparator_,this.root_.insert(e,i,this.comparator_).copy(null,null,sn.BLACK,null,null))}remove(e){return new Yn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,sn.BLACK,null,null))}get(e){let i,n=this.root_;for(;!n.isEmpty();){if(i=this.comparator_(e,n.key),i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}getPredecessorKey(e){let i,n=this.root_,s=null;for(;!n.isEmpty();)if(i=this.comparator_(e,n.key),i===0){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else i<0?n=n.left:i>0&&(s=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Lu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,i){return new Lu(this.root_,e,this.comparator_,!1,i)}getReverseIteratorFrom(e,i){return new Lu(this.root_,e,this.comparator_,!0,i)}getReverseIterator(e){return new Lu(this.root_,null,this.comparator_,!0,e)}}Yn.EMPTY_NODE=new VF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t,e){return Hl(t.name,e.name)}function V2(t,e){return Hl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t1;function jF(t){t1=t}const S3=function(t){return typeof t=="number"?"number:"+qk(t):"string:"+t},k3=function(t){if(t.isLeafNode()){const e=t.val();Je(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Lr(e,".sv"),"Priority must be a string or number.")}else Je(t===t1||t.isEmpty(),"priority of unexpected type.");Je(t===t1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cw;class en{constructor(e,i=en.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,Je(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),k3(this.priorityNode_)}static set __childrenNodeConstructor(e){cw=e}static get __childrenNodeConstructor(){return cw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new en(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ot(e)?this:$t(e)===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:en.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const n=$t(e);return n===null?i:i.isEmpty()&&n!==".priority"?this:(Je(n!==".priority"||pa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,en.__childrenNodeConstructor.EMPTY_NODE.updateChild(fi(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+S3(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",i==="number"?e+=qk(this.value_):e+=this.value_,this.lazyHash_=Qk(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===en.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof en.__childrenNodeConstructor?-1:(Je(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,n=typeof this.value_,s=en.VALUE_TYPE_ORDER.indexOf(i),a=en.VALUE_TYPE_ORDER.indexOf(n);return Je(s>=0,"Unknown leaf type: "+i),Je(a>=0,"Unknown leaf type: "+n),s===a?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}en.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T3,M3;function WF(t){T3=t}function zF(t){M3=t}class $F extends wp{compare(e,i){const n=e.node.getPriority(),s=i.node.getPriority(),a=n.compareTo(s);return a===0?Hl(e.name,i.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,i){return!e.getPriority().equals(i.getPriority())}minPost(){return Ht.MIN}maxPost(){return new Ht(ro,new en("[PRIORITY-POST]",M3))}makePost(e,i){const n=T3(e);return new Ht(i,new en("[PRIORITY-POST]",n))}toString(){return".priority"}}const Mn=new $F;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=Math.log(2);class YF{constructor(e){const i=a=>parseInt(Math.log(a)/HF,10),n=a=>parseInt(Array(a+1).join("1"),2);this.count=i(e+1),this.current_=this.count-1;const s=n(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const a0=function(t,e,i,n){t.sort(e);const s=function(f,g){const m=g-f;let k,T;if(m===0)return null;if(m===1)return k=t[f],T=i?i(k):k,new sn(T,k.node,sn.BLACK,null,null);{const A=parseInt(m/2,10)+f,P=s(f,A),L=s(A+1,g);return k=t[A],T=i?i(k):k,new sn(T,k.node,sn.BLACK,P,L)}},a=function(f){let g=null,m=null,k=t.length;const T=function(P,L){const W=k-P,N=k;k-=P;const M=s(W+1,N),B=t[W],z=i?i(B):B;A(new sn(z,B.node,L,null,M))},A=function(P){g?(g.left=P,g=P):(m=P,g=P)};for(let P=0;P<f.count;++P){const L=f.nextBitIsOne(),W=Math.pow(2,f.count-(P+1));L?T(W,sn.BLACK):(T(W,sn.BLACK),T(W,sn.RED))}return m},l=new YF(t.length),p=a(l);return new Yn(n||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df;const ko={};class vr{constructor(e,i){this.indexes_=e,this.indexSet_=i}static get Default(){return Je(ko&&Mn,"ChildrenNode.ts has not been loaded"),Df=Df||new vr({".priority":ko},{".priority":Mn}),Df}get(e){const i=pl(this.indexes_,e);if(!i)throw new Error("No index defined for "+e);return i instanceof Yn?i:null}hasIndex(e){return Lr(this.indexSet_,e.toString())}addIndex(e,i){Je(e!==nl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let s=!1;const a=i.getIterator(Ht.Wrap);let l=a.getNext();for(;l;)s=s||e.isDefinedOn(l.node),n.push(l),l=a.getNext();let p;s?p=a0(n,e.getCompare()):p=ko;const f=e.toString(),g=Object.assign({},this.indexSet_);g[f]=e;const m=Object.assign({},this.indexes_);return m[f]=p,new vr(m,g)}addToIndexes(e,i){const n=Wd(this.indexes_,(s,a)=>{const l=pl(this.indexSet_,a);if(Je(l,"Missing index implementation for "+a),s===ko)if(l.isDefinedOn(e.node)){const p=[],f=i.getIterator(Ht.Wrap);let g=f.getNext();for(;g;)g.name!==e.name&&p.push(g),g=f.getNext();return p.push(e),a0(p,l.getCompare())}else return ko;else{const p=i.get(e.name);let f=s;return p&&(f=f.remove(new Ht(e.name,p))),f.insert(e,e.node)}});return new vr(n,this.indexSet_)}removeFromIndexes(e,i){const n=Wd(this.indexes_,s=>{if(s===ko)return s;{const a=i.get(e.name);return a?s.remove(new Ht(e.name,a)):s}});return new vr(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh;class Zt{constructor(e,i,n){this.children_=e,this.priorityNode_=i,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&k3(this.priorityNode_),this.children_.isEmpty()&&Je(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return uh||(uh=new Zt(new Yn(V2),null,vr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uh}updatePriority(e){return this.children_.isEmpty()?this:new Zt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const i=this.children_.get(e);return i===null?uh:i}}getChild(e){const i=$t(e);return i===null?this:this.getImmediateChild(i).getChild(fi(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(Je(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{const n=new Ht(e,i);let s,a;i.isEmpty()?(s=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(n,this.children_)):(s=this.children_.insert(e,i),a=this.indexMap_.addToIndexes(n,this.children_));const l=s.isEmpty()?uh:this.priorityNode_;return new Zt(s,l,a)}}updateChild(e,i){const n=$t(e);if(n===null)return i;{Je($t(e)!==".priority"||pa(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(n).updateChild(fi(e),i);return this.updateImmediateChild(n,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let n=0,s=0,a=!0;if(this.forEachChild(Mn,(l,p)=>{i[l]=p.val(e),n++,a&&Zt.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):a=!1}),!e&&a&&s<2*n){const l=[];for(const p in i)l[p]=i[p];return l}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+S3(this.getPriority().val())+":"),this.forEachChild(Mn,(i,n)=>{const s=n.hash();s!==""&&(e+=":"+i+":"+s)}),this.lazyHash_=e===""?"":Qk(e)}return this.lazyHash_}getPredecessorChildName(e,i,n){const s=this.resolveIndex_(n);if(s){const a=s.getPredecessorKey(new Ht(e,i));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new Ht(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new Ht(i,this.children_.get(i)):null}forEachChild(e,i){const n=this.resolveIndex_(e);return n?n.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ht.Wrap);let a=s.peek();for(;a!=null&&i.compare(a,e)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ht.Wrap);let a=s.peek();for(;a!=null&&i.compare(a,e)>0;)s.getNext(),a=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===iu?-1:0}withIndex(e){if(e===nl||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new Zt(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===nl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const n=this.getIterator(Mn),s=i.getIterator(Mn);let a=n.getNext(),l=s.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=n.getNext(),l=s.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===nl?null:this.indexMap_.get(e.toString())}}Zt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class XF extends Zt{constructor(){super(new Yn(V2),Zt.EMPTY_NODE,vr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Zt.EMPTY_NODE}isEmpty(){return!1}}const iu=new XF;Object.defineProperties(Ht,{MIN:{value:new Ht(kl,Zt.EMPTY_NODE)},MAX:{value:new Ht(ro,iu)}});C3.__EMPTY_NODE=Zt.EMPTY_NODE;en.__childrenNodeConstructor=Zt;jF(iu);zF(iu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=!0;function Tn(t,e=null){if(t===null)return Zt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Je(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const i=t;return new en(i,Tn(e))}if(!(t instanceof Array)&&UF){const i=[];let n=!1;if(Cs(t,(l,p)=>{if(l.substring(0,1)!=="."){const f=Tn(p);f.isEmpty()||(n=n||!f.getPriority().isEmpty(),i.push(new Ht(l,f)))}}),i.length===0)return Zt.EMPTY_NODE;const a=a0(i,OF,l=>l.name,V2);if(n){const l=a0(i,Mn.getCompare());return new Zt(a,Tn(e),new vr({".priority":l},{".priority":Mn}))}else return new Zt(a,Tn(e),vr.Default)}else{let i=Zt.EMPTY_NODE;return Cs(t,(n,s)=>{if(Lr(t,n)&&n.substring(0,1)!=="."){const a=Tn(s);(a.isLeafNode()||!a.isEmpty())&&(i=i.updateImmediateChild(n,a))}}),i.updatePriority(Tn(e))}}WF(Tn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF extends wp{constructor(e){super(),this.indexPath_=e,Je(!Ot(e)&&$t(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,i){const n=this.extractChild(e.node),s=this.extractChild(i.node),a=n.compareTo(s);return a===0?Hl(e.name,i.name):a}makePost(e,i){const n=Tn(e),s=Zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ht(i,s)}maxPost(){const e=Zt.EMPTY_NODE.updateChild(this.indexPath_,iu);return new Ht(ro,e)}toString(){return v3(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF extends wp{compare(e,i){const n=e.node.compareTo(i.node);return n===0?Hl(e.name,i.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,i){return!e.equals(i)}minPost(){return Ht.MIN}maxPost(){return Ht.MAX}makePost(e,i){const n=Tn(e);return new Ht(i,n)}toString(){return".value"}}const QF=new KF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t){return{type:"value",snapshotNode:t}}function JF(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function qF(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function uw(t,e,i){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:i}}function eB(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Je(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Je(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:kl}hasEnd(){return this.endSet_}getIndexEndValue(){return Je(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Je(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ro}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Je(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mn}copy(){const e=new O2;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function dw(t){const e={};if(t.isDefault())return e;let i;if(t.index_===Mn?i="$priority":t.index_===QF?i="$value":t.index_===nl?i="$key":(Je(t.index_ instanceof GF,"Unrecognized index type!"),i=t.index_.toString()),e.orderBy=xn(i),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=xn(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+xn(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=xn(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+xn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function pw(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let i=t.viewFrom_;i===""&&(t.isViewFromLeft()?i="l":i="r"),e.vf=i}return t.index_!==Mn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends m3{constructor(e,i,n,s){super(),this.repoInfo_=e,this.onDataUpdate_=i,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=eu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,i){return i!==void 0?"tag$"+i:(Je(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,i,n,s){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=o0.getListenId_(e,n),p={};this.listens_[l]=p;const f=dw(e._queryParams);this.restRequest_(a+".json",f,(g,m)=>{let k=m;if(g===404&&(k=null,g=null),g===null&&this.onDataUpdate_(a,k,!1,n),pl(this.listens_,l)===p){let T;g?g===401?T="permission_denied":T="rest_error:"+g:T="ok",s(T,null)}})}unlisten(e,i){const n=o0.getListenId_(e,i);delete this.listens_[n]}get(e){const i=dw(e._queryParams),n=e._path.toString(),s=new Sg;return this.restRequest_(n+".json",i,(a,l)=>{let p=l;a===404&&(p=null,a=null),a===null?(this.onDataUpdate_(n,p,!1,null),s.resolve(p)):s.reject(new Error(p))}),s.promise}refreshAuthToken(e){}restRequest_(e,i={},n){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(i.auth=s.accessToken),a&&a.token&&(i.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+kE(i);this.log_("Sending REST request for "+l);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(n&&p.readyState===4){this.log_("REST Response for "+l+" received. status:",p.status,"response:",p.responseText);let f=null;if(p.status>=200&&p.status<300){try{f=lc(p.responseText)}catch{os("Failed to parse JSON response for "+l+": "+p.responseText)}n(null,f)}else p.status!==401&&p.status!==404&&os("Got unsuccessful REST response for "+l+" Status: "+p.status),n(p.status);n=null}},p.open("GET",l,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,i){this.rootNode_=this.rootNode_.updateChild(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(){return{value:null,children:new Map}}function P3(t,e,i){if(Ot(e))t.value=i,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,i);else{const n=$t(e);t.children.has(n)||t.children.set(n,l0());const s=t.children.get(n);e=fi(e),P3(s,e,i)}}function i1(t,e,i){t.value!==null?i(e,t.value):iB(t,(n,s)=>{const a=new yi(e.toString()+"/"+n);i1(s,a,i)})}function iB(t,e){t.children.forEach((i,n)=>{e(n,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),i=Object.assign({},e);return this.last_&&Cs(this.last_,(n,s)=>{i[n]=i[n]-s}),this.last_=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=10*1e3,sB=30*1e3,rB=5*60*1e3;class aB{constructor(e,i){this.server_=i,this.statsToReport_={},this.statsListener_=new nB(e);const n=fw+(sB-fw)*Math.random();Vh(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),i={};let n=!1;Cs(e,(s,a)=>{a>0&&Lr(this.statsToReport_,s)&&(i[s]=a,n=!0)}),n&&this.server_.reportStats(i),Vh(this.reportStats_.bind(this),Math.floor(Math.random()*2*rB))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(tr||(tr={}));function E3(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function A3(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function D3(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,i,n){this.path=e,this.affectedTree=i,this.revert=n,this.type=tr.ACK_USER_WRITE,this.source=E3()}operationForChild(e){if(Ot(this.path)){if(this.affectedTree.value!=null)return Je(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new yi(e));return new h0(ri(),i,this.revert)}}else return Je($t(this.path)===e,"operationForChild called for unrelated child."),new h0(fi(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,i,n){this.source=e,this.path=i,this.snap=n,this.type=tr.OVERWRITE}operationForChild(e){return Ot(this.path)?new ao(this.source,ri(),this.snap.getImmediateChild(e)):new ao(this.source,fi(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,i,n){this.source=e,this.path=i,this.children=n,this.type=tr.MERGE}operationForChild(e){if(Ot(this.path)){const i=this.children.subtree(new yi(e));return i.isEmpty()?null:i.value?new ao(this.source,ri(),i.value):new kc(this.source,ri(),i)}else return Je($t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new kc(this.source,fi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,i,n){this.node_=e,this.fullyInitialized_=i,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ot(e))return this.isFullyInitialized()&&!this.filtered_;const i=$t(e);return this.isCompleteForChild(i)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function oB(t,e,i,n){const s=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(eB(l.childName,l.snapshotNode))}),dh(t,s,"child_removed",e,n,i),dh(t,s,"child_added",e,n,i),dh(t,s,"child_moved",a,n,i),dh(t,s,"child_changed",e,n,i),dh(t,s,"value",e,n,i),s}function dh(t,e,i,n,s,a){const l=n.filter(p=>p.type===i);l.sort((p,f)=>hB(t,p,f)),l.forEach(p=>{const f=lB(t,p,a);s.forEach(g=>{g.respondsTo(p.type)&&e.push(g.createEvent(f,t.query_))})})}function lB(t,e,i){return e.type==="value"||e.type==="child_removed"||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function hB(t,e,i){if(e.childName==null||i.childName==null)throw Nl("Should only compare child_ events.");const n=new Ht(e.childName,e.snapshotNode),s=new Ht(i.childName,i.snapshotNode);return t.index_.compare(n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t,e){return{eventCache:t,serverCache:e}}function Oh(t,e,i,n){return I3(new j2(e,i,n),t.serverCache)}function F3(t,e,i,n){return I3(t.eventCache,new j2(e,i,n))}function n1(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function oo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If;const cB=()=>(If||(If=new Yn(QI)),If);class pi{constructor(e,i=cB()){this.value=e,this.children=i}static fromObject(e){let i=new pi(null);return Cs(e,(n,s)=>{i=i.set(new yi(n),s)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,i){if(this.value!=null&&i(this.value))return{path:ri(),value:this.value};if(Ot(e))return null;{const n=$t(e),s=this.children.get(n);if(s!==null){const a=s.findRootMostMatchingPathAndValue(fi(e),i);return a!=null?{path:an(new yi(n),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ot(e))return this;{const i=$t(e),n=this.children.get(i);return n!==null?n.subtree(fi(e)):new pi(null)}}set(e,i){if(Ot(e))return new pi(i,this.children);{const n=$t(e),a=(this.children.get(n)||new pi(null)).set(fi(e),i),l=this.children.insert(n,a);return new pi(this.value,l)}}remove(e){if(Ot(e))return this.children.isEmpty()?new pi(null):new pi(null,this.children);{const i=$t(e),n=this.children.get(i);if(n){const s=n.remove(fi(e));let a;return s.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,s),this.value===null&&a.isEmpty()?new pi(null):new pi(this.value,a)}else return this}}get(e){if(Ot(e))return this.value;{const i=$t(e),n=this.children.get(i);return n?n.get(fi(e)):null}}setTree(e,i){if(Ot(e))return i;{const n=$t(e),a=(this.children.get(n)||new pi(null)).setTree(fi(e),i);let l;return a.isEmpty()?l=this.children.remove(n):l=this.children.insert(n,a),new pi(this.value,l)}}fold(e){return this.fold_(ri(),e)}fold_(e,i){const n={};return this.children.inorderTraversal((s,a)=>{n[s]=a.fold_(an(e,s),i)}),i(e,this.value,n)}findOnPath(e,i){return this.findOnPath_(e,ri(),i)}findOnPath_(e,i,n){const s=this.value?n(i,this.value):!1;if(s)return s;if(Ot(e))return null;{const a=$t(e),l=this.children.get(a);return l?l.findOnPath_(fi(e),an(i,a),n):null}}foreachOnPath(e,i){return this.foreachOnPath_(e,ri(),i)}foreachOnPath_(e,i,n){if(Ot(e))return this;{this.value&&n(i,this.value);const s=$t(e),a=this.children.get(s);return a?a.foreachOnPath_(fi(e),an(i,s),n):new pi(null)}}foreach(e){this.foreach_(ri(),e)}foreach_(e,i){this.children.inorderTraversal((n,s)=>{s.foreach_(an(e,n),i)}),this.value&&i(e,this.value)}foreachChild(e){this.children.inorderTraversal((i,n)=>{n.value&&e(i,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.writeTree_=e}static empty(){return new Os(new pi(null))}}function jh(t,e,i){if(Ot(e))return new Os(new pi(i));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const s=n.path;let a=n.value;const l=vs(s,e);return a=a.updateChild(l,i),new Os(t.writeTree_.set(s,a))}else{const s=new pi(i),a=t.writeTree_.setTree(e,s);return new Os(a)}}}function xw(t,e,i){let n=t;return Cs(i,(s,a)=>{n=jh(n,an(e,s),a)}),n}function mw(t,e){if(Ot(e))return Os.empty();{const i=t.writeTree_.setTree(e,new pi(null));return new Os(i)}}function s1(t,e){return fo(t,e)!=null}function fo(t,e){const i=t.writeTree_.findRootMostValueAndPath(e);return i!=null?t.writeTree_.get(i.path).getChild(vs(i.path,e)):null}function gw(t){const e=[],i=t.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Mn,(n,s)=>{e.push(new Ht(n,s))}):t.writeTree_.children.inorderTraversal((n,s)=>{s.value!=null&&e.push(new Ht(n,s.value))}),e}function aa(t,e){if(Ot(e))return t;{const i=fo(t,e);return i!=null?new Os(new pi(i)):new Os(t.writeTree_.subtree(e))}}function r1(t){return t.writeTree_.isEmpty()}function Tl(t,e){return B3(ri(),t.writeTree_,e)}function B3(t,e,i){if(e.value!=null)return i.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((s,a)=>{s===".priority"?(Je(a.value!==null,"Priority writes must always be leaf nodes"),n=a.value):i=B3(an(t,s),a,i)}),!i.getChild(t).isEmpty()&&n!==null&&(i=i.updateChild(an(t,".priority"),n)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t,e){return j3(e,t)}function uB(t,e,i,n,s){Je(n>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:i,writeId:n,visible:s}),s&&(t.visibleWrites=jh(t.visibleWrites,e,i)),t.lastWriteId=n}function dB(t,e){for(let i=0;i<t.allWrites.length;i++){const n=t.allWrites[i];if(n.writeId===e)return n}return null}function pB(t,e){const i=t.allWrites.findIndex(p=>p.writeId===e);Je(i>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[i];t.allWrites.splice(i,1);let s=n.visible,a=!1,l=t.allWrites.length-1;for(;s&&l>=0;){const p=t.allWrites[l];p.visible&&(l>=i&&fB(p,n.path)?s=!1:Fs(n.path,p.path)&&(a=!0)),l--}if(s){if(a)return xB(t),!0;if(n.snap)t.visibleWrites=mw(t.visibleWrites,n.path);else{const p=n.children;Cs(p,f=>{t.visibleWrites=mw(t.visibleWrites,an(n.path,f))})}return!0}else return!1}function fB(t,e){if(t.snap)return Fs(t.path,e);for(const i in t.children)if(t.children.hasOwnProperty(i)&&Fs(an(t.path,i),e))return!0;return!1}function xB(t){t.visibleWrites=N3(t.allWrites,mB,ri()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function mB(t){return t.visible}function N3(t,e,i){let n=Os.empty();for(let s=0;s<t.length;++s){const a=t[s];if(e(a)){const l=a.path;let p;if(a.snap)Fs(i,l)?(p=vs(i,l),n=jh(n,p,a.snap)):Fs(l,i)&&(p=vs(l,i),n=jh(n,ri(),a.snap.getChild(p)));else if(a.children){if(Fs(i,l))p=vs(i,l),n=xw(n,p,a.children);else if(Fs(l,i))if(p=vs(l,i),Ot(p))n=xw(n,ri(),a.children);else{const f=pl(a.children,$t(p));if(f){const g=f.getChild(fi(p));n=jh(n,ri(),g)}}}else throw Nl("WriteRecord should have .snap or .children")}}return n}function R3(t,e,i,n,s){if(!n&&!s){const a=fo(t.visibleWrites,e);if(a!=null)return a;{const l=aa(t.visibleWrites,e);if(r1(l))return i;if(i==null&&!s1(l,ri()))return null;{const p=i||Zt.EMPTY_NODE;return Tl(l,p)}}}else{const a=aa(t.visibleWrites,e);if(!s&&r1(a))return i;if(!s&&i==null&&!s1(a,ri()))return null;{const l=function(g){return(g.visible||s)&&(!n||!~n.indexOf(g.writeId))&&(Fs(g.path,e)||Fs(e,g.path))},p=N3(t.allWrites,l,e),f=i||Zt.EMPTY_NODE;return Tl(p,f)}}}function gB(t,e,i){let n=Zt.EMPTY_NODE;const s=fo(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Mn,(a,l)=>{n=n.updateImmediateChild(a,l)}),n;if(i){const a=aa(t.visibleWrites,e);return i.forEachChild(Mn,(l,p)=>{const f=Tl(aa(a,new yi(l)),p);n=n.updateImmediateChild(l,f)}),gw(a).forEach(l=>{n=n.updateImmediateChild(l.name,l.node)}),n}else{const a=aa(t.visibleWrites,e);return gw(a).forEach(l=>{n=n.updateImmediateChild(l.name,l.node)}),n}}function yB(t,e,i,n,s){Je(n||s,"Either existingEventSnap or existingServerSnap must exist");const a=an(e,i);if(s1(t.visibleWrites,a))return null;{const l=aa(t.visibleWrites,a);return r1(l)?s.getChild(i):Tl(l,s.getChild(i))}}function vB(t,e,i,n){const s=an(e,i),a=fo(t.visibleWrites,s);if(a!=null)return a;if(n.isCompleteForChild(i)){const l=aa(t.visibleWrites,s);return Tl(l,n.getNode().getImmediateChild(i))}else return null}function bB(t,e){return fo(t.visibleWrites,e)}function wB(t,e,i,n,s,a,l){let p;const f=aa(t.visibleWrites,e),g=fo(f,ri());if(g!=null)p=g;else if(i!=null)p=Tl(f,i);else return[];if(p=p.withIndex(l),!p.isEmpty()&&!p.isLeafNode()){const m=[],k=l.getCompare(),T=a?p.getReverseIteratorFrom(n,l):p.getIteratorFrom(n,l);let A=T.getNext();for(;A&&m.length<s;)k(A,n)!==0&&m.push(A),A=T.getNext();return m}else return[]}function _B(){return{visibleWrites:Os.empty(),allWrites:[],lastWriteId:-1}}function a1(t,e,i,n){return R3(t.writeTree,t.treePath,e,i,n)}function V3(t,e){return gB(t.writeTree,t.treePath,e)}function yw(t,e,i,n){return yB(t.writeTree,t.treePath,e,i,n)}function c0(t,e){return bB(t.writeTree,an(t.treePath,e))}function CB(t,e,i,n,s,a){return wB(t.writeTree,t.treePath,e,i,n,s,a)}function W2(t,e,i){return vB(t.writeTree,t.treePath,e,i)}function O3(t,e){return j3(an(t.treePath,e),t.writeTree)}function j3(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(){this.changeMap=new Map}trackChildChange(e){const i=e.type,n=e.childName;Je(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),Je(n!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(n);if(s){const a=s.type;if(i==="child_added"&&a==="child_removed")this.changeMap.set(n,uw(n,e.snapshotNode,s.snapshotNode));else if(i==="child_removed"&&a==="child_added")this.changeMap.delete(n);else if(i==="child_removed"&&a==="child_changed")this.changeMap.set(n,qF(n,s.oldSnap));else if(i==="child_changed"&&a==="child_added")this.changeMap.set(n,JF(n,e.snapshotNode));else if(i==="child_changed"&&a==="child_changed")this.changeMap.set(n,uw(n,e.snapshotNode,s.oldSnap));else throw Nl("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{getCompleteChild(e){return null}getChildAfterChild(e,i,n){return null}}const W3=new kB;class z2{constructor(e,i,n=null){this.writes_=e,this.viewCache_=i,this.optCompleteServerCache_=n}getCompleteChild(e){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(e))return i.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new j2(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return W2(this.writes_,e,n)}}getChildAfterChild(e,i,n){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:oo(this.viewCache_),a=CB(this.writes_,s,i,1,n,e);return a.length===0?null:a[0]}}function TB(t,e){Je(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Je(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function MB(t,e,i,n,s){const a=new SB;let l,p;if(i.type===tr.OVERWRITE){const g=i;g.source.fromUser?l=o1(t,e,g.path,g.snap,n,s,a):(Je(g.source.fromServer,"Unknown source."),p=g.source.tagged||e.serverCache.isFiltered()&&!Ot(g.path),l=u0(t,e,g.path,g.snap,n,s,p,a))}else if(i.type===tr.MERGE){const g=i;g.source.fromUser?l=EB(t,e,g.path,g.children,n,s,a):(Je(g.source.fromServer,"Unknown source."),p=g.source.tagged||e.serverCache.isFiltered(),l=l1(t,e,g.path,g.children,n,s,p,a))}else if(i.type===tr.ACK_USER_WRITE){const g=i;g.revert?l=IB(t,e,g.path,n,s,a):l=AB(t,e,g.path,g.affectedTree,n,s,a)}else if(i.type===tr.LISTEN_COMPLETE)l=DB(t,e,i.path,n,a);else throw Nl("Unknown operation type: "+i.type);const f=a.getChanges();return PB(e,l,f),{viewCache:l,changes:f}}function PB(t,e,i){const n=e.eventCache;if(n.isFullyInitialized()){const s=n.getNode().isLeafNode()||n.getNode().isEmpty(),a=n1(t);(i.length>0||!t.eventCache.isFullyInitialized()||s&&!n.getNode().equals(a)||!n.getNode().getPriority().equals(a.getPriority()))&&i.push(ZF(n1(e)))}}function z3(t,e,i,n,s,a){const l=e.eventCache;if(c0(n,i)!=null)return e;{let p,f;if(Ot(i))if(Je(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=oo(e),m=g instanceof Zt?g:Zt.EMPTY_NODE,k=V3(n,m);p=t.filter.updateFullNode(e.eventCache.getNode(),k,a)}else{const g=a1(n,oo(e));p=t.filter.updateFullNode(e.eventCache.getNode(),g,a)}else{const g=$t(i);if(g===".priority"){Je(pa(i)===1,"Can't have a priority with additional path components");const m=l.getNode();f=e.serverCache.getNode();const k=yw(n,i,m,f);k!=null?p=t.filter.updatePriority(m,k):p=l.getNode()}else{const m=fi(i);let k;if(l.isCompleteForChild(g)){f=e.serverCache.getNode();const T=yw(n,i,l.getNode(),f);T!=null?k=l.getNode().getImmediateChild(g).updateChild(m,T):k=l.getNode().getImmediateChild(g)}else k=W2(n,g,e.serverCache);k!=null?p=t.filter.updateChild(l.getNode(),g,k,m,s,a):p=l.getNode()}}return Oh(e,p,l.isFullyInitialized()||Ot(i),t.filter.filtersNodes())}}function u0(t,e,i,n,s,a,l,p){const f=e.serverCache;let g;const m=l?t.filter:t.filter.getIndexedFilter();if(Ot(i))g=m.updateFullNode(f.getNode(),n,null);else if(m.filtersNodes()&&!f.isFiltered()){const A=f.getNode().updateChild(i,n);g=m.updateFullNode(f.getNode(),A,null)}else{const A=$t(i);if(!f.isCompleteForPath(i)&&pa(i)>1)return e;const P=fi(i),W=f.getNode().getImmediateChild(A).updateChild(P,n);A===".priority"?g=m.updatePriority(f.getNode(),W):g=m.updateChild(f.getNode(),A,W,P,W3,null)}const k=F3(e,g,f.isFullyInitialized()||Ot(i),m.filtersNodes()),T=new z2(s,k,a);return z3(t,k,i,s,T,p)}function o1(t,e,i,n,s,a,l){const p=e.eventCache;let f,g;const m=new z2(s,e,a);if(Ot(i))g=t.filter.updateFullNode(e.eventCache.getNode(),n,l),f=Oh(e,g,!0,t.filter.filtersNodes());else{const k=$t(i);if(k===".priority")g=t.filter.updatePriority(e.eventCache.getNode(),n),f=Oh(e,g,p.isFullyInitialized(),p.isFiltered());else{const T=fi(i),A=p.getNode().getImmediateChild(k);let P;if(Ot(T))P=n;else{const L=m.getCompleteChild(k);L!=null?y3(T)===".priority"&&L.getChild(b3(T)).isEmpty()?P=L:P=L.updateChild(T,n):P=Zt.EMPTY_NODE}if(A.equals(P))f=e;else{const L=t.filter.updateChild(p.getNode(),k,P,T,m,l);f=Oh(e,L,p.isFullyInitialized(),t.filter.filtersNodes())}}}return f}function vw(t,e){return t.eventCache.isCompleteForChild(e)}function EB(t,e,i,n,s,a,l){let p=e;return n.foreach((f,g)=>{const m=an(i,f);vw(e,$t(m))&&(p=o1(t,p,m,g,s,a,l))}),n.foreach((f,g)=>{const m=an(i,f);vw(e,$t(m))||(p=o1(t,p,m,g,s,a,l))}),p}function bw(t,e,i){return i.foreach((n,s)=>{e=e.updateChild(n,s)}),e}function l1(t,e,i,n,s,a,l,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,g;Ot(i)?g=n:g=new pi(null).setTree(i,n);const m=e.serverCache.getNode();return g.children.inorderTraversal((k,T)=>{if(m.hasChild(k)){const A=e.serverCache.getNode().getImmediateChild(k),P=bw(t,A,T);f=u0(t,f,new yi(k),P,s,a,l,p)}}),g.children.inorderTraversal((k,T)=>{const A=!e.serverCache.isCompleteForChild(k)&&T.value===null;if(!m.hasChild(k)&&!A){const P=e.serverCache.getNode().getImmediateChild(k),L=bw(t,P,T);f=u0(t,f,new yi(k),L,s,a,l,p)}}),f}function AB(t,e,i,n,s,a,l){if(c0(s,i)!=null)return e;const p=e.serverCache.isFiltered(),f=e.serverCache;if(n.value!=null){if(Ot(i)&&f.isFullyInitialized()||f.isCompleteForPath(i))return u0(t,e,i,f.getNode().getChild(i),s,a,p,l);if(Ot(i)){let g=new pi(null);return f.getNode().forEachChild(nl,(m,k)=>{g=g.set(new yi(m),k)}),l1(t,e,i,g,s,a,p,l)}else return e}else{let g=new pi(null);return n.foreach((m,k)=>{const T=an(i,m);f.isCompleteForPath(T)&&(g=g.set(m,f.getNode().getChild(T)))}),l1(t,e,i,g,s,a,p,l)}}function DB(t,e,i,n,s){const a=e.serverCache,l=F3(e,a.getNode(),a.isFullyInitialized()||Ot(i),a.isFiltered());return z3(t,l,i,n,W3,s)}function IB(t,e,i,n,s,a){let l;if(c0(n,i)!=null)return e;{const p=new z2(n,e,s),f=e.eventCache.getNode();let g;if(Ot(i)||$t(i)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=a1(n,oo(e));else{const k=e.serverCache.getNode();Je(k instanceof Zt,"serverChildren would be complete if leaf node"),m=V3(n,k)}m=m,g=t.filter.updateFullNode(f,m,a)}else{const m=$t(i);let k=W2(n,m,e.serverCache);k==null&&e.serverCache.isCompleteForChild(m)&&(k=f.getImmediateChild(m)),k!=null?g=t.filter.updateChild(f,m,k,fi(i),p,a):e.eventCache.getNode().hasChild(m)?g=t.filter.updateChild(f,m,Zt.EMPTY_NODE,fi(i),p,a):g=f,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=a1(n,oo(e)),l.isLeafNode()&&(g=t.filter.updateFullNode(g,l,a)))}return l=e.serverCache.isFullyInitialized()||c0(n,ri())!=null,Oh(e,g,l,t.filter.filtersNodes())}}function FB(t,e){const i=oo(t.viewCache_);return i&&(t.query._queryParams.loadsAllData()||!Ot(e)&&!i.getImmediateChild($t(e)).isEmpty())?i.getChild(e):null}function ww(t,e,i,n){e.type===tr.MERGE&&e.source.queryId!==null&&(Je(oo(t.viewCache_),"We should always have a full cache before handling merges"),Je(n1(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,a=MB(t.processor_,s,e,i,n);return TB(t.processor_,a.viewCache),Je(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,BB(t,a.changes,a.viewCache.eventCache.getNode())}function BB(t,e,i,n){const s=t.eventRegistrations_;return oB(t.eventGenerator_,e,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _w;function LB(t){Je(!_w,"__referenceConstructor has already been defined"),_w=t}function $2(t,e,i,n){const s=e.source.queryId;if(s!==null){const a=t.views.get(s);return Je(a!=null,"SyncTree gave us an op for an invalid query."),ww(a,e,i,n)}else{let a=[];for(const l of t.views.values())a=a.concat(ww(l,e,i,n));return a}}function H2(t,e){let i=null;for(const n of t.views.values())i=i||FB(n,e);return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cw;function NB(t){Je(!Cw,"__referenceConstructor has already been defined"),Cw=t}class Sw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pi(null),this.pendingWriteTree_=_B(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function RB(t,e,i,n,s){return uB(t.pendingWriteTree_,e,i,n,s),s?Cp(t,new ao(E3(),e,i)):[]}function Ho(t,e,i=!1){const n=dB(t.pendingWriteTree_,e);if(pB(t.pendingWriteTree_,e)){let a=new pi(null);return n.snap!=null?a=a.set(ri(),!0):Cs(n.children,l=>{a=a.set(new yi(l),!0)}),Cp(t,new h0(n.path,a,i))}else return[]}function _p(t,e,i){return Cp(t,new ao(A3(),e,i))}function VB(t,e,i){const n=pi.fromObject(i);return Cp(t,new kc(A3(),e,n))}function OB(t,e,i,n){const s=X3(t,n);if(s!=null){const a=U3(s),l=a.path,p=a.queryId,f=vs(l,e),g=new ao(D3(p),f,i);return G3(t,l,g)}else return[]}function jB(t,e,i,n){const s=X3(t,n);if(s){const a=U3(s),l=a.path,p=a.queryId,f=vs(l,e),g=pi.fromObject(i),m=new kc(D3(p),f,g);return G3(t,l,m)}else return[]}function $3(t,e,i){const s=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(l,p)=>{const f=vs(l,e),g=H2(p,f);if(g)return g});return R3(s,e,a,i,!0)}function Cp(t,e){return H3(e,t.syncPointTree_,null,L3(t.pendingWriteTree_,ri()))}function H3(t,e,i,n){if(Ot(t.path))return Y3(t,e,i,n);{const s=e.get(ri());i==null&&s!=null&&(i=H2(s,ri()));let a=[];const l=$t(t.path),p=t.operationForChild(l),f=e.children.get(l);if(f&&p){const g=i?i.getImmediateChild(l):null,m=O3(n,l);a=a.concat(H3(p,f,g,m))}return s&&(a=a.concat($2(s,t,n,i))),a}}function Y3(t,e,i,n){const s=e.get(ri());i==null&&s!=null&&(i=H2(s,ri()));let a=[];return e.children.inorderTraversal((l,p)=>{const f=i?i.getImmediateChild(l):null,g=O3(n,l),m=t.operationForChild(l);m&&(a=a.concat(Y3(m,p,f,g)))}),s&&(a=a.concat($2(s,t,n,i))),a}function X3(t,e){return t.tagToQueryMap.get(e)}function U3(t){const e=t.indexOf("$");return Je(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new yi(t.substr(0,e))}}function G3(t,e,i){const n=t.syncPointTree_.get(e);Je(n,"Missing sync point for query tag that we're tracking");const s=L3(t.pendingWriteTree_,e);return $2(n,i,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.node_=e}getImmediateChild(e){const i=this.node_.getImmediateChild(e);return new Y2(i)}node(){return this.node_}}class X2{constructor(e,i){this.syncTree_=e,this.path_=i}getImmediateChild(e){const i=an(this.path_,e);return new X2(this.syncTree_,i)}node(){return $3(this.syncTree_,this.path_)}}const WB=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},kw=function(t,e,i){if(!t||typeof t!="object")return t;if(Je(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return zB(t[".sv"],e,i);if(typeof t[".sv"]=="object")return $B(t[".sv"],e);Je(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},zB=function(t,e,i){switch(t){case"timestamp":return i.timestamp;default:Je(!1,"Unexpected server value: "+t)}},$B=function(t,e,i){t.hasOwnProperty("increment")||Je(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&Je(!1,"Unexpected increment value: "+n);const s=e.node();if(Je(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return n;const l=s.getValue();return typeof l!="number"?n:l+n},HB=function(t,e,i,n){return U2(e,new X2(i,t),n)},YB=function(t,e,i){return U2(t,new Y2(e),i)};function U2(t,e,i){const n=t.getPriority().val(),s=kw(n,e.getImmediateChild(".priority"),i);let a;if(t.isLeafNode()){const l=t,p=kw(l.getValue(),e,i);return p!==l.getValue()||s!==l.getPriority().val()?new en(p,Tn(s)):t}else{const l=t;return a=l,s!==l.getPriority().val()&&(a=a.updatePriority(new en(s))),l.forEachChild(Mn,(p,f)=>{const g=U2(f,e.getImmediateChild(p),i);g!==f&&(a=a.updateImmediateChild(p,g))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e="",i=null,n={children:{},childCount:0}){this.name=e,this.parent=i,this.node=n}}function K2(t,e){let i=e instanceof yi?e:new yi(e),n=t,s=$t(i);for(;s!==null;){const a=pl(n.node.children,s)||{children:{},childCount:0};n=new G2(s,n,a),i=fi(i),s=$t(i)}return n}function Yl(t){return t.node.value}function K3(t,e){t.node.value=e,h1(t)}function Q3(t){return t.node.childCount>0}function XB(t){return Yl(t)===void 0&&!Q3(t)}function Sp(t,e){Cs(t.node.children,(i,n)=>{e(new G2(i,t,n))})}function Z3(t,e,i,n){i&&!n&&e(t),Sp(t,s=>{Z3(s,e,!0,n)}),i&&n&&e(t)}function UB(t,e,i){let n=t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function nu(t){return new yi(t.parent===null?t.name:nu(t.parent)+"/"+t.name)}function h1(t){t.parent!==null&&GB(t.parent,t.name,t)}function GB(t,e,i){const n=XB(i),s=Lr(t.node.children,e);n&&s?(delete t.node.children[e],t.node.childCount--,h1(t)):!n&&!s&&(t.node.children[e]=i.node,t.node.childCount++,h1(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB=/[\[\].#$\/\u0000-\u001F\u007F]/,QB=/[\[\].#$\u0000-\u001F\u007F]/,Ff=10*1024*1024,J3=function(t){return typeof t=="string"&&t.length!==0&&!KB.test(t)},ZB=function(t){return typeof t=="string"&&t.length!==0&&!QB.test(t)},JB=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ZB(t)},q3=function(t,e,i){const n=i instanceof yi?new DF(i,t):i;if(e===void 0)throw new Error(t+"contains undefined "+Da(n));if(typeof e=="function")throw new Error(t+"contains a function "+Da(n)+" with contents = "+e.toString());if(Zk(e))throw new Error(t+"contains "+e.toString()+" "+Da(n));if(typeof e=="string"&&e.length>Ff/3&&N0(e)>Ff)throw new Error(t+"contains a string greater than "+Ff+" utf8 bytes "+Da(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,a=!1;if(Cs(e,(l,p)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!J3(l)))throw new Error(t+" contains an invalid key ("+l+") "+Da(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);IF(n,l),q3(t,p,n),FF(n)}),s&&a)throw new Error(t+' contains ".value" child '+Da(n)+" in addition to actual children.")}},qB=function(t,e){const i=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!J3(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!JB(i))throw new Error(ME(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tL(t,e){let i=null;for(let n=0;n<e.length;n++){const s=e[n],a=s.getPath();i!==null&&!w3(a,i.path)&&(t.eventLists_.push(i),i=null),i===null&&(i={events:[],path:a}),i.events.push(s)}i&&t.eventLists_.push(i)}function xo(t,e,i){tL(t,i),iL(t,n=>Fs(n,e)||Fs(e,n))}function iL(t,e){t.recursionDepth_++;let i=!0;for(let n=0;n<t.eventLists_.length;n++){const s=t.eventLists_[n];if(s){const a=s.path;e(a)?(nL(t.eventLists_[n]),t.eventLists_[n]=null):i=!1}}i&&(t.eventLists_=[]),t.recursionDepth_--}function nL(t){for(let e=0;e<t.events.length;e++){const i=t.events[e];if(i!==null){t.events[e]=null;const n=i.getEventRunner();Rh&&kn("event: "+i.toString()),tu(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="repo_interrupt",rL=25;class aL{constructor(e,i,n,s){this.repoInfo_=e,this.forceRestClient_=i,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=l0(),this.transactionQueueTree_=new G2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oL(t,e,i){if(t.stats_=L2(t.repoInfo_),t.forceRestClient_||iF())t.server_=new o0(t.repoInfo_,(n,s,a,l)=>{Tw(t,n,s,a,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Mw(t,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xn(i)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new Cr(t.repoInfo_,e,(n,s,a,l)=>{Tw(t,n,s,a,l)},n=>{Mw(t,n)},n=>{hL(t,n)},t.authTokenProvider_,t.appCheckProvider_,i),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=oF(t.repoInfo_,()=>new aB(t.stats_,t.server_)),t.infoData_=new tB,t.infoSyncTree_=new Sw({startListening:(n,s,a,l)=>{let p=[];const f=t.infoData_.getNode(n._path);return f.isEmpty()||(p=_p(t.infoSyncTree_,n._path,f),setTimeout(()=>{l("ok")},0)),p},stopListening:()=>{}}),Q2(t,"connected",!1),t.serverSyncTree_=new Sw({startListening:(n,s,a,l)=>(t.server_.listen(n,a,s,(p,f)=>{const g=l(p,f);xo(t.eventQueue_,n._path,g)}),[]),stopListening:(n,s)=>{t.server_.unlisten(n,s)}})}function lL(t){const i=t.infoData_.getNode(new yi(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function eT(t){return WB({timestamp:lL(t)})}function Tw(t,e,i,n,s){t.dataUpdateCount++;const a=new yi(e);i=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,i):i;let l=[];if(s)if(n){const f=Wd(i,g=>Tn(g));l=jB(t.serverSyncTree_,a,f,s)}else{const f=Tn(i);l=OB(t.serverSyncTree_,a,f,s)}else if(n){const f=Wd(i,g=>Tn(g));l=VB(t.serverSyncTree_,a,f)}else{const f=Tn(i);l=_p(t.serverSyncTree_,a,f)}let p=a;l.length>0&&(p=J2(t,a)),xo(t.eventQueue_,p,l)}function Mw(t,e){Q2(t,"connected",e),e===!1&&uL(t)}function hL(t,e){Cs(e,(i,n)=>{Q2(t,i,n)})}function Q2(t,e,i){const n=new yi("/.info/"+e),s=Tn(i);t.infoData_.updateSnapshot(n,s);const a=_p(t.infoSyncTree_,n,s);xo(t.eventQueue_,n,a)}function cL(t){return t.nextWriteId_++}function uL(t){tT(t,"onDisconnectEvents");const e=eT(t),i=l0();i1(t.onDisconnect_,ri(),(s,a)=>{const l=HB(s,a,t.serverSyncTree_,e);P3(i,s,l)});let n=[];i1(i,ri(),(s,a)=>{n=n.concat(_p(t.serverSyncTree_,s,a));const l=xL(t,s);J2(t,l)}),t.onDisconnect_=l0(),xo(t.eventQueue_,ri(),n)}function dL(t){t.persistentConnection_&&t.persistentConnection_.interrupt(sL)}function tT(t,...e){let i="";t.persistentConnection_&&(i=t.persistentConnection_.id+":"),kn(i,...e)}function iT(t,e,i){return $3(t.serverSyncTree_,e,i)||Zt.EMPTY_NODE}function Z2(t,e=t.transactionQueueTree_){if(e||kp(t,e),Yl(e)){const i=sT(t,e);Je(i.length>0,"Sending zero length transaction queue"),i.every(s=>s.status===0)&&pL(t,nu(e),i)}else Q3(e)&&Sp(e,i=>{Z2(t,i)})}function pL(t,e,i){const n=i.map(g=>g.currentWriteId),s=iT(t,e,n);let a=s;const l=s.hash();for(let g=0;g<i.length;g++){const m=i[g];Je(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const k=vs(e,m.path);a=a.updateChild(k,m.currentOutputSnapshotRaw)}const p=a.val(!0),f=e;t.server_.put(f.toString(),p,g=>{tT(t,"transaction put response",{path:f.toString(),status:g});let m=[];if(g==="ok"){const k=[];for(let T=0;T<i.length;T++)i[T].status=2,m=m.concat(Ho(t.serverSyncTree_,i[T].currentWriteId)),i[T].onComplete&&k.push(()=>i[T].onComplete(null,!0,i[T].currentOutputSnapshotResolved)),i[T].unwatcher();kp(t,K2(t.transactionQueueTree_,e)),Z2(t,t.transactionQueueTree_),xo(t.eventQueue_,e,m);for(let T=0;T<k.length;T++)tu(k[T])}else{if(g==="datastale")for(let k=0;k<i.length;k++)i[k].status===3?i[k].status=4:i[k].status=0;else{os("transaction at "+f.toString()+" failed: "+g);for(let k=0;k<i.length;k++)i[k].status=4,i[k].abortReason=g}J2(t,e)}},l)}function J2(t,e){const i=nT(t,e),n=nu(i),s=sT(t,i);return fL(t,s,n),n}function fL(t,e,i){if(e.length===0)return;const n=[];let s=[];const l=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const f=e[p],g=vs(i,f.path);let m=!1,k;if(Je(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)m=!0,k=f.abortReason,s=s.concat(Ho(t.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=rL)m=!0,k="maxretry",s=s.concat(Ho(t.serverSyncTree_,f.currentWriteId,!0));else{const T=iT(t,f.path,l);f.currentInputSnapshot=T;const A=e[p].update(T.val());if(A!==void 0){q3("transaction failed: Data returned ",A,f.path);let P=Tn(A);typeof A=="object"&&A!=null&&Lr(A,".priority")||(P=P.updatePriority(T.getPriority()));const W=f.currentWriteId,N=eT(t),M=YB(P,T,N);f.currentOutputSnapshotRaw=P,f.currentOutputSnapshotResolved=M,f.currentWriteId=cL(t),l.splice(l.indexOf(W),1),s=s.concat(RB(t.serverSyncTree_,f.path,M,f.currentWriteId,f.applyLocally)),s=s.concat(Ho(t.serverSyncTree_,W,!0))}else m=!0,k="nodata",s=s.concat(Ho(t.serverSyncTree_,f.currentWriteId,!0))}xo(t.eventQueue_,i,s),s=[],m&&(e[p].status=2,function(T){setTimeout(T,Math.floor(0))}(e[p].unwatcher),e[p].onComplete&&(k==="nodata"?n.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):n.push(()=>e[p].onComplete(new Error(k),!1,null))))}kp(t,t.transactionQueueTree_);for(let p=0;p<n.length;p++)tu(n[p]);Z2(t,t.transactionQueueTree_)}function nT(t,e){let i,n=t.transactionQueueTree_;for(i=$t(e);i!==null&&Yl(n)===void 0;)n=K2(n,i),e=fi(e),i=$t(e);return n}function sT(t,e){const i=[];return rT(t,e,i),i.sort((n,s)=>n.order-s.order),i}function rT(t,e,i){const n=Yl(e);if(n)for(let s=0;s<n.length;s++)i.push(n[s]);Sp(e,s=>{rT(t,s,i)})}function kp(t,e){const i=Yl(e);if(i){let n=0;for(let s=0;s<i.length;s++)i[s].status!==2&&(i[n]=i[s],n++);i.length=n,K3(e,i.length>0?i:void 0)}Sp(e,n=>{kp(t,n)})}function xL(t,e){const i=nu(nT(t,e)),n=K2(t.transactionQueueTree_,e);return UB(n,s=>{Bf(t,s)}),Bf(t,n),Z3(n,s=>{Bf(t,s)}),i}function Bf(t,e){const i=Yl(e);if(i){const n=[];let s=[],a=-1;for(let l=0;l<i.length;l++)i[l].status===3||(i[l].status===1?(Je(a===l-1,"All SENT items should be at beginning of queue."),a=l,i[l].status=3,i[l].abortReason="set"):(Je(i[l].status===0,"Unexpected transaction status in abort"),i[l].unwatcher(),s=s.concat(Ho(t.serverSyncTree_,i[l].currentWriteId,!0)),i[l].onComplete&&n.push(i[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?K3(e,void 0):i.length=a+1,xo(t.eventQueue_,nu(e),s);for(let l=0;l<n.length;l++)tu(n[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){let e="";const i=t.split("/");for(let n=0;n<i.length;n++)if(i[n].length>0){let s=i[n];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function gL(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const i of t.split("&")){if(i.length===0)continue;const n=i.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):os(`Invalid query segment '${i}' in query '${t}'`)}return e}const Pw=function(t,e){const i=yL(t),n=i.namespace;i.domain==="firebase.com"&&Fr(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&i.domain!=="localhost"&&Fr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||GI();const s=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new h3(i.host,i.secure,n,s,e,"",n!==i.subdomain),path:new yi(i.pathString)}},yL=function(t){let e="",i="",n="",s="",a="",l=!0,p="https",f=443;if(typeof t=="string"){let g=t.indexOf("//");g>=0&&(p=t.substring(0,g-1),t=t.substring(g+2));let m=t.indexOf("/");m===-1&&(m=t.length);let k=t.indexOf("?");k===-1&&(k=t.length),e=t.substring(0,Math.min(m,k)),m<k&&(s=mL(t.substring(m,k)));const T=gL(t.substring(Math.min(t.length,k)));g=e.indexOf(":"),g>=0?(l=p==="https"||p==="wss",f=parseInt(e.substring(g+1),10)):g=e.length;const A=e.slice(0,g);if(A.toLowerCase()==="localhost")i="localhost";else if(A.split(".").length<=2)i=A;else{const P=e.indexOf(".");n=e.substring(0,P).toLowerCase(),i=e.substring(P+1),a=n}"ns"in T&&(a=T.ns)}return{host:e,port:f,domain:i,subdomain:n,secure:l,scheme:p,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,i,n,s){this._repo=e,this._path=i,this._queryParams=n,this._orderByCalled=s}get key(){return Ot(this._path)?null:y3(this._path)}get ref(){return new Xl(this._repo,this._path)}get _queryIdentifier(){const e=pw(this._queryParams),i=F2(e);return i==="{}"?"default":i}get _queryObject(){return pw(this._queryParams)}isEqual(e){if(e=Zn(e),!(e instanceof q2))return!1;const i=this._repo===e._repo,n=w3(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return i&&n&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+AF(this._path)}}class Xl extends q2{constructor(e,i){super(e,i,new O2,!1)}get parent(){const e=b3(this._path);return e===null?null:new Xl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function Nn(t,...e){let i=Zn(t);for(const n of e)i=n._apply(i);return i}LB(Xl);NB(Xl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="FIREBASE_DATABASE_EMULATOR_HOST",c1={};let bL=!1;function wL(t,e,i,n){t.repoInfo_=new h3(`${e}:${i}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),n&&(t.authTokenProvider_=n)}function _L(t,e,i,n,s){let a=n||t.options.databaseURL;a===void 0&&(t.options.projectId||Fr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kn("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=Pw(a,s),p=l.repoInfo,f;typeof process<"u"&&Gb&&(f=Gb[vL]),f?(a=`http://${f}?ns=${p.namespace}`,l=Pw(a,s),p=l.repoInfo):l.repoInfo.secure;const g=new sF(t.name,t.options,e);qB("Invalid Firebase Database URL",l),Ot(l.path)||Fr("Database URL must point to the root of a Firebase Database (not including a child path).");const m=SL(p,t,g,new nF(t.name,i));return new kL(m,t)}function CL(t,e){const i=c1[e];(!i||i[t.key]!==t)&&Fr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),dL(t),delete i[t.key]}function SL(t,e,i,n){let s=c1[e.name];s||(s={},c1[e.name]=s);let a=s[t.toURLString()];return a&&Fr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new aL(t,bL,i,n),s[t.toURLString()]=a,a}class kL{constructor(e,i){this._repoInternal=e,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(oL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xl(this._repo,ri())),this._rootInternal}_delete(){return this._rootInternal!==null&&(CL(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Fr("Cannot call "+e+" on a deleted database.")}}function TL(t=kS(),e){const i=_S(t,"database").getImmediate({identifier:e});if(!i._instanceStarted){const n=pS("database");n&&ML(i,...n)}return i}function ML(t,e,i,n={}){t=Zn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Fr("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let a;if(s.repoInfo_.nodeAdmin)n.mockUserToken&&Fr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new sd(sd.OWNER);else if(n.mockUserToken){const l=typeof n.mockUserToken=="string"?n.mockUserToken:xS(n.mockUserToken,t.app.options.projectId);a=new sd(l)}wL(s,e,i,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t){zI(CS),hc(new fl("database",(e,{instanceIdentifier:i})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return _L(n,s,a,i)},"PUBLIC").setMultipleInstances(!0)),na(Kb,Qb,t),na(Kb,Qb,"esm2017")}Cr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Cr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};PL();let EL={apiKey:"AIzaSyBCtuJRMY3TLF0pnWCUSL1jnxFOHJtZ5fE",authDomain:"steeltechiot.firebaseapp.com",databaseURL:"https://steeltechiot-default-rtdb.firebaseio.com",projectId:"steeltechiot",storageBucket:"steeltechiot.appspot.com",messagingSenderId:"918836431428",appId:"1:918836431428:web:ced95dc23e447f30d68a11",measurementId:"G-XE8XTNRSHB"};const aT=SS(EL);TL(aT);const pt=_I(aT);function AL(t){let[e,i]=q.useState(0),[n,s]=q.useState(0),[a,l]=q.useState({product_type:"",thickness:"",product_dimensions:""});return q.useEffect(()=>{let p=ei(pt,"machines");const f=Qn(p,et("machine_no","==",t.machineNo),Vs("unix_time","desc"),or(1));let g=Jc(f,m=>{var T,A,P,L,W,N,M;const k=m.docs.map(B=>({id:B.id,...B.data()}));console.log("updatedData",k),l({product_type:(T=k[0])==null?void 0:T.product_type,thickness:(A=k[0])==null?void 0:A.thickness,product_dimensions:(P=k[0])==null?void 0:P.product_dimensions}),i((L=k[0])!=null&&L.count?(W=k[0])==null?void 0:W.count:0),s(((N=k[0])==null?void 0:N.weight)==""?0:(M=k[0])==null?void 0:M.weight)});return()=>g()},[]),_.jsx("div",{className:`border-[3px]  rounded-lg ${t!=null&&t.active?"border-[#009245]":"border-[#ED1C24]"}`,children:_.jsxs("div",{className:"flex gap-4 justify-between h-full ",children:[_.jsxs("div",{className:"w-full flex flex-col gap-2 justify-between p-3 items-start",children:[_.jsxs("h2",{className:"text-2xl font-semibold",children:["FM ",t.machineNo]}),_.jsxs("button",{className:"flex gap-2 items-center bg-black text-white px-4 py-2 rounded-md",children:[_.jsx("div",{className:`w-4 h-4 rounded-full ${t!=null&&t.active?"bg-[#009245]":"bg-[#ED1C24]"}`}),_.jsx("p",{children:t!=null&&t.active?"Active":"Idle"})]}),_.jsxs("div",{className:"pt-3",children:[_.jsxs("p",{children:["(Last updated ",t.idleTime," ago)"]}),_.jsxs("p",{children:["Total Product: ",e]}),_.jsxs("p",{children:["Total Weight: ",n," kg"]})]})]}),_.jsxs("div",{className:"min-w-[90px]  bg-black/80 text-white flex flex-col justify-between items-center  px-2 py-6",children:[_.jsx("img",{src:aE,alt:"",className:"w-[60px] h-auto"}),_.jsxs("div",{className:"text-center text-xs",children:[_.jsx("p",{children:a==null?void 0:a.product_type}),_.jsx("p",{children:a==null?void 0:a.thickness}),_.jsx("p",{children:a==null?void 0:a.product_dimensions})]})]})]})})}var Xn=function(){return Xn=Object.assign||function(e){for(var i,n=1,s=arguments.length;n<s;n++){i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Xn.apply(this,arguments)};function Tc(t,e,i){if(i||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}var di="-ms-",Wh="-moz-",Qt="-webkit-",oT="comm",Tp="rule",ey="decl",DL="@import",lT="@keyframes",IL="@layer",hT=Math.abs,ty=String.fromCharCode,u1=Object.assign;function FL(t,e){return rn(t,0)^45?(((e<<2^rn(t,0))<<2^rn(t,1))<<2^rn(t,2))<<2^rn(t,3):0}function cT(t){return t.trim()}function fr(t,e){return(t=e.exec(t))?t[0]:t}function Pt(t,e,i){return t.replace(e,i)}function rd(t,e,i){return t.indexOf(e,i)}function rn(t,e){return t.charCodeAt(e)|0}function Ml(t,e,i){return t.slice(e,i)}function Gs(t){return t.length}function uT(t){return t.length}function Ch(t,e){return e.push(t),t}function BL(t,e){return t.map(e).join("")}function Ew(t,e){return t.filter(function(i){return!fr(i,e)})}var Mp=1,Pl=1,dT=0,Ss=0,zi=0,Ul="";function Pp(t,e,i,n,s,a,l,p){return{value:t,root:e,parent:i,type:n,props:s,children:a,line:Mp,column:Pl,length:l,return:"",siblings:p}}function Vr(t,e){return u1(Pp("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function To(t){for(;t.root;)t=Vr(t.root,{children:[t]});Ch(t,t.siblings)}function LL(){return zi}function NL(){return zi=Ss>0?rn(Ul,--Ss):0,Pl--,zi===10&&(Pl=1,Mp--),zi}function js(){return zi=Ss<dT?rn(Ul,Ss++):0,Pl++,zi===10&&(Pl=1,Mp++),zi}function Ua(){return rn(Ul,Ss)}function ad(){return Ss}function Ep(t,e){return Ml(Ul,t,e)}function d1(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function RL(t){return Mp=Pl=1,dT=Gs(Ul=t),Ss=0,[]}function VL(t){return Ul="",t}function Lf(t){return cT(Ep(Ss-1,p1(t===91?t+2:t===40?t+1:t)))}function OL(t){for(;(zi=Ua())&&zi<33;)js();return d1(t)>2||d1(zi)>3?"":" "}function jL(t,e){for(;--e&&js()&&!(zi<48||zi>102||zi>57&&zi<65||zi>70&&zi<97););return Ep(t,ad()+(e<6&&Ua()==32&&js()==32))}function p1(t){for(;js();)switch(zi){case t:return Ss;case 34:case 39:t!==34&&t!==39&&p1(zi);break;case 40:t===41&&p1(t);break;case 92:js();break}return Ss}function WL(t,e){for(;js()&&t+zi!==57;)if(t+zi===84&&Ua()===47)break;return"/*"+Ep(e,Ss-1)+"*"+ty(t===47?t:js())}function zL(t){for(;!d1(Ua());)js();return Ep(t,Ss)}function $L(t){return VL(od("",null,null,null,[""],t=RL(t),0,[0],t))}function od(t,e,i,n,s,a,l,p,f){for(var g=0,m=0,k=l,T=0,A=0,P=0,L=1,W=1,N=1,M=0,B="",z=s,G=a,R=n,U=B;W;)switch(P=M,M=js()){case 40:if(P!=108&&rn(U,k-1)==58){rd(U+=Pt(Lf(M),"&","&\f"),"&\f",hT(g?p[g-1]:0))!=-1&&(N=-1);break}case 34:case 39:case 91:U+=Lf(M);break;case 9:case 10:case 13:case 32:U+=OL(P);break;case 92:U+=jL(ad()-1,7);continue;case 47:switch(Ua()){case 42:case 47:Ch(HL(WL(js(),ad()),e,i,f),f);break;default:U+="/"}break;case 123*L:p[g++]=Gs(U)*N;case 125*L:case 59:case 0:switch(M){case 0:case 125:W=0;case 59+m:N==-1&&(U=Pt(U,/\f/g,"")),A>0&&Gs(U)-k&&Ch(A>32?Dw(U+";",n,i,k-1,f):Dw(Pt(U," ","")+";",n,i,k-2,f),f);break;case 59:U+=";";default:if(Ch(R=Aw(U,e,i,g,m,s,p,B,z=[],G=[],k,a),a),M===123)if(m===0)od(U,e,R,R,z,a,k,p,G);else switch(T===99&&rn(U,3)===110?100:T){case 100:case 108:case 109:case 115:od(t,R,R,n&&Ch(Aw(t,R,R,0,0,s,p,B,s,z=[],k,G),G),s,G,k,p,n?z:G);break;default:od(U,R,R,R,[""],G,0,p,G)}}g=m=A=0,L=N=1,B=U="",k=l;break;case 58:k=1+Gs(U),A=P;default:if(L<1){if(M==123)--L;else if(M==125&&L++==0&&NL()==125)continue}switch(U+=ty(M),M*L){case 38:N=m>0?1:(U+="\f",-1);break;case 44:p[g++]=(Gs(U)-1)*N,N=1;break;case 64:Ua()===45&&(U+=Lf(js())),T=Ua(),m=k=Gs(B=U+=zL(ad())),M++;break;case 45:P===45&&Gs(U)==2&&(L=0)}}return a}function Aw(t,e,i,n,s,a,l,p,f,g,m,k){for(var T=s-1,A=s===0?a:[""],P=uT(A),L=0,W=0,N=0;L<n;++L)for(var M=0,B=Ml(t,T+1,T=hT(W=l[L])),z=t;M<P;++M)(z=cT(W>0?A[M]+" "+B:Pt(B,/&\f/g,A[M])))&&(f[N++]=z);return Pp(t,e,i,s===0?Tp:p,f,g,m,k)}function HL(t,e,i,n){return Pp(t,e,i,oT,ty(LL()),Ml(t,2,-2),0,n)}function Dw(t,e,i,n,s){return Pp(t,e,i,ey,Ml(t,0,n),Ml(t,n+1,-1),n,s)}function pT(t,e,i){switch(FL(t,e)){case 5103:return Qt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qt+t+t;case 4789:return Wh+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Qt+t+Wh+t+di+t+t;case 5936:switch(rn(t,e+11)){case 114:return Qt+t+di+Pt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Qt+t+di+Pt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Qt+t+di+Pt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Qt+t+di+t+t;case 6165:return Qt+t+di+"flex-"+t+t;case 5187:return Qt+t+Pt(t,/(\w+).+(:[^]+)/,Qt+"box-$1$2"+di+"flex-$1$2")+t;case 5443:return Qt+t+di+"flex-item-"+Pt(t,/flex-|-self/g,"")+(fr(t,/flex-|baseline/)?"":di+"grid-row-"+Pt(t,/flex-|-self/g,""))+t;case 4675:return Qt+t+di+"flex-line-pack"+Pt(t,/align-content|flex-|-self/g,"")+t;case 5548:return Qt+t+di+Pt(t,"shrink","negative")+t;case 5292:return Qt+t+di+Pt(t,"basis","preferred-size")+t;case 6060:return Qt+"box-"+Pt(t,"-grow","")+Qt+t+di+Pt(t,"grow","positive")+t;case 4554:return Qt+Pt(t,/([^-])(transform)/g,"$1"+Qt+"$2")+t;case 6187:return Pt(Pt(Pt(t,/(zoom-|grab)/,Qt+"$1"),/(image-set)/,Qt+"$1"),t,"")+t;case 5495:case 3959:return Pt(t,/(image-set\([^]*)/,Qt+"$1$`$1");case 4968:return Pt(Pt(t,/(.+:)(flex-)?(.*)/,Qt+"box-pack:$3"+di+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qt+t+t;case 4200:if(!fr(t,/flex-|baseline/))return di+"grid-column-align"+Ml(t,e)+t;break;case 2592:case 3360:return di+Pt(t,"template-","")+t;case 4384:case 3616:return i&&i.some(function(n,s){return e=s,fr(n.props,/grid-\w+-end/)})?~rd(t+(i=i[e].value),"span",0)?t:di+Pt(t,"-start","")+t+di+"grid-row-span:"+(~rd(i,"span",0)?fr(i,/\d+/):+fr(i,/\d+/)-+fr(t,/\d+/))+";":di+Pt(t,"-start","")+t;case 4896:case 4128:return i&&i.some(function(n){return fr(n.props,/grid-\w+-start/)})?t:di+Pt(Pt(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Pt(t,/(.+)-inline(.+)/,Qt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Gs(t)-1-e>6)switch(rn(t,e+1)){case 109:if(rn(t,e+4)!==45)break;case 102:return Pt(t,/(.+:)(.+)-([^]+)/,"$1"+Qt+"$2-$3$1"+Wh+(rn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~rd(t,"stretch",0)?pT(Pt(t,"stretch","fill-available"),e,i)+t:t}break;case 5152:case 5920:return Pt(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,a,l,p,f,g){return di+s+":"+a+g+(l?di+s+"-span:"+(p?f:+f-+a)+g:"")+t});case 4949:if(rn(t,e+6)===121)return Pt(t,":",":"+Qt)+t;break;case 6444:switch(rn(t,rn(t,14)===45?18:11)){case 120:return Pt(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Qt+(rn(t,14)===45?"inline-":"")+"box$3$1"+Qt+"$2$3$1"+di+"$2box$3")+t;case 100:return Pt(t,":",":"+di)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Pt(t,"scroll-","scroll-snap-")+t}return t}function d0(t,e){for(var i="",n=0;n<t.length;n++)i+=e(t[n],n,t,e)||"";return i}function YL(t,e,i,n){switch(t.type){case IL:if(t.children.length)break;case DL:case ey:return t.return=t.return||t.value;case oT:return"";case lT:return t.return=t.value+"{"+d0(t.children,n)+"}";case Tp:if(!Gs(t.value=t.props.join(",")))return""}return Gs(i=d0(t.children,n))?t.return=t.value+"{"+i+"}":""}function XL(t){var e=uT(t);return function(i,n,s,a){for(var l="",p=0;p<e;p++)l+=t[p](i,n,s,a)||"";return l}}function UL(t){return function(e){e.root||(e=e.return)&&t(e)}}function GL(t,e,i,n){if(t.length>-1&&!t.return)switch(t.type){case ey:t.return=pT(t.value,t.length,i);return;case lT:return d0([Vr(t,{value:Pt(t.value,"@","@"+Qt)})],n);case Tp:if(t.length)return BL(i=t.props,function(s){switch(fr(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":To(Vr(t,{props:[Pt(s,/:(read-\w+)/,":"+Wh+"$1")]})),To(Vr(t,{props:[s]})),u1(t,{props:Ew(i,n)});break;case"::placeholder":To(Vr(t,{props:[Pt(s,/:(plac\w+)/,":"+Qt+"input-$1")]})),To(Vr(t,{props:[Pt(s,/:(plac\w+)/,":"+Wh+"$1")]})),To(Vr(t,{props:[Pt(s,/:(plac\w+)/,di+"input-$1")]})),To(Vr(t,{props:[s]})),u1(t,{props:Ew(i,n)});break}return""})}}var KL={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qn={},El=typeof process<"u"&&qn!==void 0&&(qn.REACT_APP_SC_ATTR||qn.SC_ATTR)||"data-styled",fT="active",xT="data-styled-version",Ap="6.1.13",iy=`/*!sc*/
`,p0=typeof window<"u"&&"HTMLElement"in window,QL=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&qn!==void 0&&qn.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&qn.REACT_APP_SC_DISABLE_SPEEDY!==""?qn.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&qn.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&qn!==void 0&&qn.SC_DISABLE_SPEEDY!==void 0&&qn.SC_DISABLE_SPEEDY!==""&&qn.SC_DISABLE_SPEEDY!=="false"&&qn.SC_DISABLE_SPEEDY),Dp=Object.freeze([]),Al=Object.freeze({});function ZL(t,e,i){return i===void 0&&(i=Al),t.theme!==i.theme&&t.theme||e||i.theme}var mT=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),JL=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,qL=/(^-|-$)/g;function Iw(t){return t.replace(JL,"-").replace(qL,"")}var eN=/(a)(d)/gi,Nu=52,Fw=function(t){return String.fromCharCode(t+(t>25?39:97))};function f1(t){var e,i="";for(e=Math.abs(t);e>Nu;e=e/Nu|0)i=Fw(e%Nu)+i;return(Fw(e%Nu)+i).replace(eN,"$1-$2")}var Nf,gT=5381,Yo=function(t,e){for(var i=e.length;i;)t=33*t^e.charCodeAt(--i);return t},yT=function(t){return Yo(gT,t)};function vT(t){return f1(yT(t)>>>0)}function tN(t){return t.displayName||t.name||"Component"}function Rf(t){return typeof t=="string"&&!0}var bT=typeof Symbol=="function"&&Symbol.for,wT=bT?Symbol.for("react.memo"):60115,iN=bT?Symbol.for("react.forward_ref"):60112,nN={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},sN={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_T={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},rN=((Nf={})[iN]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Nf[wT]=_T,Nf);function Bw(t){return("type"in(e=t)&&e.type.$$typeof)===wT?_T:"$$typeof"in t?rN[t.$$typeof]:nN;var e}var aN=Object.defineProperty,oN=Object.getOwnPropertyNames,Lw=Object.getOwnPropertySymbols,lN=Object.getOwnPropertyDescriptor,hN=Object.getPrototypeOf,Nw=Object.prototype;function CT(t,e,i){if(typeof e!="string"){if(Nw){var n=hN(e);n&&n!==Nw&&CT(t,n,i)}var s=oN(e);Lw&&(s=s.concat(Lw(e)));for(var a=Bw(t),l=Bw(e),p=0;p<s.length;++p){var f=s[p];if(!(f in sN||i&&i[f]||l&&f in l||a&&f in a)){var g=lN(e,f);try{aN(t,f,g)}catch{}}}}return t}function Dl(t){return typeof t=="function"}function ny(t){return typeof t=="object"&&"styledComponentId"in t}function za(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function x1(t,e){if(t.length===0)return"";for(var i=t[0],n=1;n<t.length;n++)i+=t[n];return i}function Mc(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function m1(t,e,i){if(i===void 0&&(i=!1),!i&&!Mc(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var n=0;n<e.length;n++)t[n]=m1(t[n],e[n]);else if(Mc(e))for(var n in e)t[n]=m1(t[n],e[n]);return t}function sy(t,e){Object.defineProperty(t,"toString",{value:e})}function su(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var cN=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var i=0,n=0;n<e;n++)i+=this.groupSizes[n];return i},t.prototype.insertRules=function(e,i){if(e>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,a=s;e>=a;)if((a<<=1)<0)throw su(16,"".concat(e));this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var l=s;l<a;l++)this.groupSizes[l]=0}for(var p=this.indexOfGroup(e+1),f=(l=0,i.length);l<f;l++)this.tag.insertRule(p,i[l])&&(this.groupSizes[e]++,p++)},t.prototype.clearGroup=function(e){if(e<this.length){var i=this.groupSizes[e],n=this.indexOfGroup(e),s=n+i;this.groupSizes[e]=0;for(var a=n;a<s;a++)this.tag.deleteRule(n)}},t.prototype.getGroup=function(e){var i="";if(e>=this.length||this.groupSizes[e]===0)return i;for(var n=this.groupSizes[e],s=this.indexOfGroup(e),a=s+n,l=s;l<a;l++)i+="".concat(this.tag.getRule(l)).concat(iy);return i},t}(),ld=new Map,f0=new Map,hd=1,Ru=function(t){if(ld.has(t))return ld.get(t);for(;f0.has(hd);)hd++;var e=hd++;return ld.set(t,e),f0.set(e,t),e},uN=function(t,e){hd=e+1,ld.set(t,e),f0.set(e,t)},dN="style[".concat(El,"][").concat(xT,'="').concat(Ap,'"]'),pN=new RegExp("^".concat(El,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),fN=function(t,e,i){for(var n,s=i.split(","),a=0,l=s.length;a<l;a++)(n=s[a])&&t.registerName(e,n)},xN=function(t,e){for(var i,n=((i=e.textContent)!==null&&i!==void 0?i:"").split(iy),s=[],a=0,l=n.length;a<l;a++){var p=n[a].trim();if(p){var f=p.match(pN);if(f){var g=0|parseInt(f[1],10),m=f[2];g!==0&&(uN(m,g),fN(t,m,f[3]),t.getTag().insertRules(g,s)),s.length=0}else s.push(p)}}},Rw=function(t){for(var e=document.querySelectorAll(dN),i=0,n=e.length;i<n;i++){var s=e[i];s&&s.getAttribute(El)!==fT&&(xN(t,s),s.parentNode&&s.parentNode.removeChild(s))}};function mN(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var ST=function(t){var e=document.head,i=t||e,n=document.createElement("style"),s=function(p){var f=Array.from(p.querySelectorAll("style[".concat(El,"]")));return f[f.length-1]}(i),a=s!==void 0?s.nextSibling:null;n.setAttribute(El,fT),n.setAttribute(xT,Ap);var l=mN();return l&&n.setAttribute("nonce",l),i.insertBefore(n,a),n},gN=function(){function t(e){this.element=ST(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var n=document.styleSheets,s=0,a=n.length;s<a;s++){var l=n[s];if(l.ownerNode===i)return l}throw su(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,i){try{return this.sheet.insertRule(i,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var i=this.sheet.cssRules[e];return i&&i.cssText?i.cssText:""},t}(),yN=function(){function t(e){this.element=ST(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,i){if(e<=this.length&&e>=0){var n=document.createTextNode(i);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),vN=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,i){return e<=this.length&&(this.rules.splice(e,0,i),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),Vw=p0,bN={isServer:!p0,useCSSOMInjection:!QL},kT=function(){function t(e,i,n){e===void 0&&(e=Al),i===void 0&&(i={});var s=this;this.options=Xn(Xn({},bN),e),this.gs=i,this.names=new Map(n),this.server=!!e.isServer,!this.server&&p0&&Vw&&(Vw=!1,Rw(this)),sy(this,function(){return function(a){for(var l=a.getTag(),p=l.length,f="",g=function(k){var T=function(N){return f0.get(N)}(k);if(T===void 0)return"continue";var A=a.names.get(T),P=l.getGroup(k);if(A===void 0||!A.size||P.length===0)return"continue";var L="".concat(El,".g").concat(k,'[id="').concat(T,'"]'),W="";A!==void 0&&A.forEach(function(N){N.length>0&&(W+="".concat(N,","))}),f+="".concat(P).concat(L,'{content:"').concat(W,'"}').concat(iy)},m=0;m<p;m++)g(m);return f}(s)})}return t.registerId=function(e){return Ru(e)},t.prototype.rehydrate=function(){!this.server&&p0&&Rw(this)},t.prototype.reconstructWithOptions=function(e,i){return i===void 0&&(i=!0),new t(Xn(Xn({},this.options),e),this.gs,i&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(i){var n=i.useCSSOMInjection,s=i.target;return i.isServer?new vN(s):n?new gN(s):new yN(s)}(this.options),new cN(e)));var e},t.prototype.hasNameForId=function(e,i){return this.names.has(e)&&this.names.get(e).has(i)},t.prototype.registerName=function(e,i){if(Ru(e),this.names.has(e))this.names.get(e).add(i);else{var n=new Set;n.add(i),this.names.set(e,n)}},t.prototype.insertRules=function(e,i,n){this.registerName(e,i),this.getTag().insertRules(Ru(e),n)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Ru(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),wN=/&/g,_N=/^\s*\/\/.*$/gm;function TT(t,e){return t.map(function(i){return i.type==="rule"&&(i.value="".concat(e," ").concat(i.value),i.value=i.value.replaceAll(",",",".concat(e," ")),i.props=i.props.map(function(n){return"".concat(e," ").concat(n)})),Array.isArray(i.children)&&i.type!=="@keyframes"&&(i.children=TT(i.children,e)),i})}function CN(t){var e,i,n,s=Al,a=s.options,l=a===void 0?Al:a,p=s.plugins,f=p===void 0?Dp:p,g=function(T,A,P){return P.startsWith(i)&&P.endsWith(i)&&P.replaceAll(i,"").length>0?".".concat(e):T},m=f.slice();m.push(function(T){T.type===Tp&&T.value.includes("&")&&(T.props[0]=T.props[0].replace(wN,i).replace(n,g))}),l.prefix&&m.push(GL),m.push(YL);var k=function(T,A,P,L){A===void 0&&(A=""),P===void 0&&(P=""),L===void 0&&(L="&"),e=L,i=A,n=new RegExp("\\".concat(i,"\\b"),"g");var W=T.replace(_N,""),N=$L(P||A?"".concat(P," ").concat(A," { ").concat(W," }"):W);l.namespace&&(N=TT(N,l.namespace));var M=[];return d0(N,XL(m.concat(UL(function(B){return M.push(B)})))),M};return k.hash=f.length?f.reduce(function(T,A){return A.name||su(15),Yo(T,A.name)},gT).toString():"",k}var SN=new kT,g1=CN(),MT=ns.createContext({shouldForwardProp:void 0,styleSheet:SN,stylis:g1});MT.Consumer;ns.createContext(void 0);function Ow(){return q.useContext(MT)}var PT=function(){function t(e,i){var n=this;this.inject=function(s,a){a===void 0&&(a=g1);var l=n.name+a.hash;s.hasNameForId(n.id,l)||s.insertRules(n.id,l,a(n.rules,l,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=i,sy(this,function(){throw su(12,String(n.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=g1),this.name+e.hash},t}(),kN=function(t){return t>="A"&&t<="Z"};function jw(t){for(var e="",i=0;i<t.length;i++){var n=t[i];if(i===1&&n==="-"&&t[0]==="-")return t;kN(n)?e+="-"+n.toLowerCase():e+=n}return e.startsWith("ms-")?"-"+e:e}var ET=function(t){return t==null||t===!1||t===""},AT=function(t){var e,i,n=[];for(var s in t){var a=t[s];t.hasOwnProperty(s)&&!ET(a)&&(Array.isArray(a)&&a.isCss||Dl(a)?n.push("".concat(jw(s),":"),a,";"):Mc(a)?n.push.apply(n,Tc(Tc(["".concat(s," {")],AT(a),!1),["}"],!1)):n.push("".concat(jw(s),": ").concat((e=s,(i=a)==null||typeof i=="boolean"||i===""?"":typeof i!="number"||i===0||e in KL||e.startsWith("--")?String(i).trim():"".concat(i,"px")),";")))}return n};function Ga(t,e,i,n){if(ET(t))return[];if(ny(t))return[".".concat(t.styledComponentId)];if(Dl(t)){if(!Dl(a=t)||a.prototype&&a.prototype.isReactComponent||!e)return[t];var s=t(e);return Ga(s,e,i,n)}var a;return t instanceof PT?i?(t.inject(i,n),[t.getName(n)]):[t]:Mc(t)?AT(t):Array.isArray(t)?Array.prototype.concat.apply(Dp,t.map(function(l){return Ga(l,e,i,n)})):[t.toString()]}function TN(t){for(var e=0;e<t.length;e+=1){var i=t[e];if(Dl(i)&&!ny(i))return!1}return!0}var MN=yT(Ap),PN=function(){function t(e,i,n){this.rules=e,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&TN(e),this.componentId=i,this.baseHash=Yo(MN,i),this.baseStyle=n,kT.registerId(i)}return t.prototype.generateAndInjectStyles=function(e,i,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,i,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&i.hasNameForId(this.componentId,this.staticRulesId))s=za(s,this.staticRulesId);else{var a=x1(Ga(this.rules,e,i,n)),l=f1(Yo(this.baseHash,a)>>>0);if(!i.hasNameForId(this.componentId,l)){var p=n(a,".".concat(l),void 0,this.componentId);i.insertRules(this.componentId,l,p)}s=za(s,l),this.staticRulesId=l}else{for(var f=Yo(this.baseHash,n.hash),g="",m=0;m<this.rules.length;m++){var k=this.rules[m];if(typeof k=="string")g+=k;else if(k){var T=x1(Ga(k,e,i,n));f=Yo(f,T+m),g+=T}}if(g){var A=f1(f>>>0);i.hasNameForId(this.componentId,A)||i.insertRules(this.componentId,A,n(g,".".concat(A),void 0,this.componentId)),s=za(s,A)}}return s},t}(),DT=ns.createContext(void 0);DT.Consumer;var Vf={};function EN(t,e,i){var n=ny(t),s=t,a=!Rf(t),l=e.attrs,p=l===void 0?Dp:l,f=e.componentId,g=f===void 0?function(z,G){var R=typeof z!="string"?"sc":Iw(z);Vf[R]=(Vf[R]||0)+1;var U="".concat(R,"-").concat(vT(Ap+R+Vf[R]));return G?"".concat(G,"-").concat(U):U}(e.displayName,e.parentComponentId):f,m=e.displayName,k=m===void 0?function(z){return Rf(z)?"styled.".concat(z):"Styled(".concat(tN(z),")")}(t):m,T=e.displayName&&e.componentId?"".concat(Iw(e.displayName),"-").concat(e.componentId):e.componentId||g,A=n&&s.attrs?s.attrs.concat(p).filter(Boolean):p,P=e.shouldForwardProp;if(n&&s.shouldForwardProp){var L=s.shouldForwardProp;if(e.shouldForwardProp){var W=e.shouldForwardProp;P=function(z,G){return L(z,G)&&W(z,G)}}else P=L}var N=new PN(i,T,n?s.componentStyle:void 0);function M(z,G){return function(R,U,K){var ae=R.attrs,Q=R.componentStyle,se=R.defaultProps,ge=R.foldedComponentIds,ue=R.styledComponentId,Le=R.target,Oe=ns.useContext(DT),Ue=Ow(),tt=R.shouldForwardProp||Ue.shouldForwardProp,Pe=ZL(U,Oe,se)||Al,Ne=function(oe,fe,ve){for(var Se,Ee=Xn(Xn({},fe),{className:void 0,theme:ve}),it=0;it<oe.length;it+=1){var st=Dl(Se=oe[it])?Se(Ee):Se;for(var mt in st)Ee[mt]=mt==="className"?za(Ee[mt],st[mt]):mt==="style"?Xn(Xn({},Ee[mt]),st[mt]):st[mt]}return fe.className&&(Ee.className=za(Ee.className,fe.className)),Ee}(ae,U,Pe),Be=Ne.as||Le,X={};for(var _e in Ne)Ne[_e]===void 0||_e[0]==="$"||_e==="as"||_e==="theme"&&Ne.theme===Pe||(_e==="forwardedAs"?X.as=Ne.forwardedAs:tt&&!tt(_e,Be)||(X[_e]=Ne[_e]));var me=function(oe,fe){var ve=Ow(),Se=oe.generateAndInjectStyles(fe,ve.styleSheet,ve.stylis);return Se}(Q,Ne),$=za(ge,ue);return me&&($+=" "+me),Ne.className&&($+=" "+Ne.className),X[Rf(Be)&&!mT.has(Be)?"class":"className"]=$,X.ref=K,q.createElement(Be,X)}(B,z,G)}M.displayName=k;var B=ns.forwardRef(M);return B.attrs=A,B.componentStyle=N,B.displayName=k,B.shouldForwardProp=P,B.foldedComponentIds=n?za(s.foldedComponentIds,s.styledComponentId):"",B.styledComponentId=T,B.target=n?s.target:t,Object.defineProperty(B,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(z){this._foldedDefaultProps=n?function(G){for(var R=[],U=1;U<arguments.length;U++)R[U-1]=arguments[U];for(var K=0,ae=R;K<ae.length;K++)m1(G,ae[K],!0);return G}({},s.defaultProps,z):z}}),sy(B,function(){return".".concat(B.styledComponentId)}),a&&CT(B,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),B}function Ww(t,e){for(var i=[t[0]],n=0,s=e.length;n<s;n+=1)i.push(e[n],t[n+1]);return i}var zw=function(t){return Object.assign(t,{isCss:!0})};function IT(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(Dl(t)||Mc(t))return zw(Ga(Ww(Dp,Tc([t],e,!0))));var n=t;return e.length===0&&n.length===1&&typeof n[0]=="string"?Ga(n):zw(Ga(Ww(n,e)))}function y1(t,e,i){if(i===void 0&&(i=Al),!e)throw su(1,e);var n=function(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];return t(e,i,IT.apply(void 0,Tc([s],a,!1)))};return n.attrs=function(s){return y1(t,e,Xn(Xn({},i),{attrs:Array.prototype.concat(i.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return y1(t,e,Xn(Xn({},i),s))},n}var FT=function(t){return y1(EN,t)},mo=FT;mT.forEach(function(t){mo[t]=FT(t)});function ry(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=x1(IT.apply(void 0,Tc([t],e,!1))),s=vT(n);return new PT(s,n)}const AN="#4fa94d",DN={"aria-busy":!0,role:"progressbar"},IN=mo.div`
  display: ${t=>t.$visible?"flex":"none"};
`,FN="http://www.w3.org/2000/svg",Ms=242.776657104492,BN=1.6,LN=ry`
12.5% {
  stroke-dasharray: ${Ms*.14}px, ${Ms}px;
  stroke-dashoffset: -${Ms*.11}px;
}
43.75% {
  stroke-dasharray: ${Ms*.35}px, ${Ms}px;
  stroke-dashoffset: -${Ms*.35}px;
}
100% {
  stroke-dasharray: ${Ms*.01}px, ${Ms}px;
  stroke-dashoffset: -${Ms*.99}px;
}
`;mo.path`
  stroke-dasharray: ${Ms*.01}px, ${Ms};
  stroke-dashoffset: 0;
  animation: ${LN} ${BN}s linear infinite;
`;const NN=ry`
to {
   transform: rotate(360deg);
 }
`;mo.svg`
  animation: ${NN} 0.75s steps(12, end) infinite;
  animation-duration: 0.75s;
`;mo.polyline`
  stroke-width: ${t=>t.width}px;
  stroke-linecap: round;

  &:nth-child(12n + 0) {
    stroke-opacity: 0.08;
  }

  &:nth-child(12n + 1) {
    stroke-opacity: 0.17;
  }

  &:nth-child(12n + 2) {
    stroke-opacity: 0.25;
  }

  &:nth-child(12n + 3) {
    stroke-opacity: 0.33;
  }

  &:nth-child(12n + 4) {
    stroke-opacity: 0.42;
  }

  &:nth-child(12n + 5) {
    stroke-opacity: 0.5;
  }

  &:nth-child(12n + 6) {
    stroke-opacity: 0.58;
  }

  &:nth-child(12n + 7) {
    stroke-opacity: 0.66;
  }

  &:nth-child(12n + 8) {
    stroke-opacity: 0.75;
  }

  &:nth-child(12n + 9) {
    stroke-opacity: 0.83;
  }

  &:nth-child(12n + 11) {
    stroke-opacity: 0.92;
  }
`;const RN="-3 -4 39 39",VN="16,0 32,32 0,32",ON=ry`
to {
   stroke-dashoffset: 136;
 }
`,jN=mo.polygon`
  stroke-dasharray: 17;
  animation: ${ON} 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;
`,WN=mo.svg`
  transform-origin: 50% 65%;
`,ay=({height:t=80,width:e=80,color:i=AN,ariaLabel:n="triangle-loading",wrapperStyle:s,wrapperClass:a,visible:l=!0})=>_.jsx(IN,{style:s,$visible:l,className:`${a}`,"data-testid":"triangle-loading","aria-label":n,...DN,children:_.jsx(WN,{id:"triangle",width:e,height:t,xmlns:FN,viewBox:RN,"data-testid":"triangle-svg",children:_.jsx(jN,{fill:"transparent",stroke:i,strokeWidth:"1",points:VN})})});function zN(){var g,m;let[t,e]=q.useState(!1),[i,n]=q.useState(!1),[s,a]=q.useState([]),[l,p]=q.useState("all");async function f(){const k=Mi(pt,"information","info");return(await hn(k)).data()}return q.useEffect(()=>{f().then(T=>{const A=ei(pt,"machineLatestStatus");let P=(T==null?void 0:T.forming_machine)||[],L=P.length,W=0;if(L===0){e(!0),n(!1);return}P.sort((N,M)=>parseInt(N,10)-parseInt(M,10)),P.forEach(N=>{const M=Qn(A,et("machine_no","==",N),Vs("time_end","desc"),or(1));Fi(M).then(B=>{let z=!1,G="N/A";B.forEach(R=>{let U=R.data(),K=Math.floor(new Date().getTime()/1e3)-(U==null?void 0:U.time_end),ae=Math.floor(K/3600),Q=Math.floor(K%3600/60),se=K%60;G=`${ae?`${ae}h`:""}${Q?` ${Q}m`:""} ${se}s`,K<=600&&(z=!0)}),a(R=>[...R,{meta:"forming",machineNo:`${N}`,active:z,idleTime:G}]),W+=1,W===L&&(e(!0),n(P.length!==0))})})})},[]),console.log("formingMachine",s),_.jsxs("div",{className:"",children:[_.jsx(rE,{setPortion:p,portion:l}),t?i?_.jsx(_.Fragment,{children:_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2",children:(m=(g=s==null?void 0:s.slice(0,16))==null?void 0:g.filter(k=>l==="all"?k:l==="active"?k==null?void 0:k.active:!(k!=null&&k.active)))==null?void 0:m.map(k=>_.jsx(AL,{meta:"forming",machineNo:k==null?void 0:k.machineNo,active:k==null?void 0:k.active,idleTime:k==null?void 0:k.idleTime}))})}):_.jsx("h1",{children:"Please Wait"}):_.jsx("div",{className:"min-w-screen min-h-screen flex justify-center items-center",children:_.jsx(ay,{height:"80",width:"80",color:"#4fa94d",ariaLabel:"triangle-loading",visible:!0})})]})}const BT="/assets/Steeltech_Logo-BG1Fi9AY.svg",x0="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.54688%2010.2188C7.54688%209.95987%207.75674%209.75%208.01562%209.75H10.5938C10.6863%209.75%2010.7768%209.77739%2010.8538%209.82873L12%2010.5929L13.1462%209.82873C13.2232%209.77739%2013.3137%209.75%2013.4062%209.75H15.9844C16.2433%209.75%2016.4531%209.95987%2016.4531%2010.2188C16.4531%2010.4776%2016.2433%2010.6875%2015.9844%2010.6875H13.5482L12.26%2011.5463C12.1026%2011.6512%2011.8974%2011.6512%2011.74%2011.5463L10.4518%2010.6875H8.01562C7.75674%2010.6875%207.54688%2010.4776%207.54688%2010.2188Z'%20fill='black'/%3e%3cpath%20d='M13.1484%2019.3125C12.8896%2019.3125%2012.6797%2019.5224%2012.6797%2019.7812C12.6797%2020.0401%2012.8896%2020.25%2013.1484%2020.25H15.2578C15.5167%2020.25%2015.7266%2020.0401%2015.7266%2019.7812C15.7266%2019.5224%2015.5167%2019.3125%2015.2578%2019.3125H13.1484Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.2734%2017.4375C11.0146%2017.4375%2010.8047%2017.6474%2010.8047%2017.9062V21.6562C10.8047%2021.9151%2011.0146%2022.125%2011.2734%2022.125H17.1328C17.3917%2022.125%2017.6016%2021.9151%2017.6016%2021.6562V17.9062C17.6016%2017.6474%2017.3917%2017.4375%2017.1328%2017.4375H11.2734ZM11.7422%2021.1875V18.375H16.6641V21.1875H11.7422Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M7.89844%200C7.63955%200%207.42969%200.209867%207.42969%200.46875V1.28906H2.74219C2.4833%201.28906%202.27344%201.49893%202.27344%201.75781V3.63281C2.27344%203.8917%202.4833%204.10156%202.74219%204.10156H4.5V14.1562C4.5%2014.4151%204.70987%2014.625%204.96875%2014.625H5.67188V15.5625H4.96875C4.70987%2015.5625%204.5%2015.7724%204.5%2016.0312V23.5312C4.5%2023.7901%204.70987%2024%204.96875%2024H19.0312C19.2901%2024%2019.5%2023.7901%2019.5%2023.5312V16.0312C19.5%2015.7724%2019.2901%2015.5625%2019.0312%2015.5625H18.3281V14.625H19.0312C19.2901%2014.625%2019.5%2014.4151%2019.5%2014.1562V4.10156H21.2578C21.5167%204.10156%2021.7266%203.8917%2021.7266%203.63281V1.75781C21.7266%201.49893%2021.5167%201.28906%2021.2578%201.28906H16.5703V0.46875C16.5703%200.209867%2016.3604%200%2016.1016%200H7.89844ZM18.5625%204.10156H16.5703V4.92188C16.5703%205.18076%2016.3604%205.39062%2016.1016%205.39062H13.875V7.45312C13.875%207.57745%2013.8256%207.69667%2013.7377%207.78458L12.3315%209.19083C12.1484%209.37389%2011.8516%209.37389%2011.6685%209.19083L10.2623%207.78458C10.1744%207.69667%2010.125%207.57745%2010.125%207.45312V5.39062H7.89844C7.63955%205.39062%207.42969%205.18076%207.42969%204.92188V4.10156H5.4375V13.6875H7.54688V12.5156C7.54688%2012.2567%207.75674%2012.0469%208.01562%2012.0469H10.5938C10.6863%2012.0469%2010.7768%2012.0743%2010.8538%2012.1256L12%2012.8898L13.1462%2012.1256C13.2232%2012.0743%2013.3137%2012.0469%2013.4062%2012.0469H15.9844C16.2433%2012.0469%2016.4531%2012.2567%2016.4531%2012.5156V13.6875H18.5625V4.10156ZM20.7891%203.16406V2.22656H16.5703V3.16406H20.7891ZM15.6328%200.9375H8.36719V4.45312H15.6328V0.9375ZM7.42969%203.16406V2.22656H3.21094V3.16406H7.42969ZM12.9375%205.39062H11.0625V7.25896L12%208.19646L12.9375%207.25896V5.39062ZM15.5156%2012.9844H13.5482L12.26%2013.8431C12.1026%2013.9481%2011.8974%2013.9481%2011.74%2013.8431L10.4518%2012.9844H8.48438V15.5625H15.5156V12.9844ZM17.3906%2014.625H16.4531V15.5625H17.3906V14.625ZM6.60938%2015.5625H7.54688V14.625H6.60938V15.5625ZM5.4375%2016.5V23.0625H18.5625V16.5H5.4375Z'%20fill='black'/%3e%3c/svg%3e",$N="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_818_5583)'%3e%3cpath%20d='M8.15625%2011.25H3.09375C1.38783%2011.25%200%209.86217%200%208.15625V3.09375C0%201.38783%201.38783%200%203.09375%200H8.15625C9.86217%200%2011.25%201.38783%2011.25%203.09375V8.15625C11.25%209.86217%209.86217%2011.25%208.15625%2011.25ZM3.09375%201.5C2.21494%201.5%201.5%202.21494%201.5%203.09375V8.15625C1.5%209.03506%202.21494%209.75%203.09375%209.75H8.15625C9.03506%209.75%209.75%209.03506%209.75%208.15625V3.09375C9.75%202.21494%209.03506%201.5%208.15625%201.5H3.09375ZM20.9062%2011.25H15.8438C14.1378%2011.25%2012.75%209.86217%2012.75%208.15625V3.09375C12.75%201.38783%2014.1378%200%2015.8438%200H20.9062C22.6122%200%2024%201.38783%2024%203.09375V8.15625C24%209.86217%2022.6122%2011.25%2020.9062%2011.25ZM15.8438%201.5C14.9649%201.5%2014.25%202.21494%2014.25%203.09375V8.15625C14.25%209.03506%2014.9649%209.75%2015.8438%209.75H20.9062C21.7851%209.75%2022.5%209.03506%2022.5%208.15625V3.09375C22.5%202.21494%2021.7851%201.5%2020.9062%201.5H15.8438ZM18.375%2024C15.2734%2024%2012.75%2021.4766%2012.75%2018.375C12.75%2015.2734%2015.2734%2012.75%2018.375%2012.75C21.4766%2012.75%2024%2015.2734%2024%2018.375C24%2021.4766%2021.4766%2024%2018.375%2024ZM18.375%2014.25C16.1005%2014.25%2014.25%2016.1005%2014.25%2018.375C14.25%2020.6495%2016.1005%2022.5%2018.375%2022.5C20.6495%2022.5%2022.5%2020.6495%2022.5%2018.375C22.5%2016.1005%2020.6495%2014.25%2018.375%2014.25ZM8.15625%2024H3.09375C1.38783%2024%200%2022.6122%200%2020.9062V15.8438C0%2014.1378%201.38783%2012.75%203.09375%2012.75H8.15625C9.86217%2012.75%2011.25%2014.1378%2011.25%2015.8438V20.9062C11.25%2022.6122%209.86217%2024%208.15625%2024ZM3.09375%2014.25C2.21494%2014.25%201.5%2014.9649%201.5%2015.8438V20.9062C1.5%2021.7851%202.21494%2022.5%203.09375%2022.5H8.15625C9.03506%2022.5%209.75%2021.7851%209.75%2020.9062V15.8438C9.75%2014.9649%209.03506%2014.25%208.15625%2014.25H3.09375Z'%20fill='black'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_818_5583'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",HN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_818_5582)'%3e%3cpath%20d='M8.15625%2011.25H3.09375C1.38783%2011.25%200%209.86217%200%208.15625V3.09375C0%201.38783%201.38783%200%203.09375%200H8.15625C9.86217%200%2011.25%201.38783%2011.25%203.09375V8.15625C11.25%209.86217%209.86217%2011.25%208.15625%2011.25ZM3.09375%201.5C2.21494%201.5%201.5%202.21494%201.5%203.09375V8.15625C1.5%209.03506%202.21494%209.75%203.09375%209.75H8.15625C9.03506%209.75%209.75%209.03506%209.75%208.15625V3.09375C9.75%202.21494%209.03506%201.5%208.15625%201.5H3.09375ZM20.9062%2011.25H15.8438C14.1378%2011.25%2012.75%209.86217%2012.75%208.15625V3.09375C12.75%201.38783%2014.1378%200%2015.8438%200H20.9062C22.6122%200%2024%201.38783%2024%203.09375V8.15625C24%209.86217%2022.6122%2011.25%2020.9062%2011.25ZM15.8438%201.5C14.9649%201.5%2014.25%202.21494%2014.25%203.09375V8.15625C14.25%209.03506%2014.9649%209.75%2015.8438%209.75H20.9062C21.7851%209.75%2022.5%209.03506%2022.5%208.15625V3.09375C22.5%202.21494%2021.7851%201.5%2020.9062%201.5H15.8438ZM18.375%2024C15.2734%2024%2012.75%2021.4766%2012.75%2018.375C12.75%2015.2734%2015.2734%2012.75%2018.375%2012.75C21.4766%2012.75%2024%2015.2734%2024%2018.375C24%2021.4766%2021.4766%2024%2018.375%2024ZM18.375%2014.25C16.1005%2014.25%2014.25%2016.1005%2014.25%2018.375C14.25%2020.6495%2016.1005%2022.5%2018.375%2022.5C20.6495%2022.5%2022.5%2020.6495%2022.5%2018.375C22.5%2016.1005%2020.6495%2014.25%2018.375%2014.25ZM8.15625%2024H3.09375C1.38783%2024%200%2022.6122%200%2020.9062V15.8438C0%2014.1378%201.38783%2012.75%203.09375%2012.75H8.15625C9.86217%2012.75%2011.25%2014.1378%2011.25%2015.8438V20.9062C11.25%2022.6122%209.86217%2024%208.15625%2024ZM3.09375%2014.25C2.21494%2014.25%201.5%2014.9649%201.5%2015.8438V20.9062C1.5%2021.7851%202.21494%2022.5%203.09375%2022.5H8.15625C9.03506%2022.5%209.75%2021.7851%209.75%2020.9062V15.8438C9.75%2014.9649%209.03506%2014.25%208.15625%2014.25H3.09375Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_818_5582'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",YN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.25%2015H12.75V18H11.25V15ZM15%2013.5H16.5V18H15V13.5ZM7.5%2010.5H9V18H7.5V10.5Z'%20fill='black'/%3e%3cpath%20d='M18.75%203.75H16.5V3C16.5%202.60218%2016.342%202.22064%2016.0607%201.93934C15.7794%201.65804%2015.3978%201.5%2015%201.5H9C8.60218%201.5%208.22064%201.65804%207.93934%201.93934C7.65804%202.22064%207.5%202.60218%207.5%203V3.75H5.25C4.85218%203.75%204.47064%203.90804%204.18934%204.18934C3.90804%204.47064%203.75%204.85218%203.75%205.25V21C3.75%2021.3978%203.90804%2021.7794%204.18934%2022.0607C4.47064%2022.342%204.85218%2022.5%205.25%2022.5H18.75C19.1478%2022.5%2019.5294%2022.342%2019.8107%2022.0607C20.092%2021.7794%2020.25%2021.3978%2020.25%2021V5.25C20.25%204.85218%2020.092%204.47064%2019.8107%204.18934C19.5294%203.90804%2019.1478%203.75%2018.75%203.75ZM9%203H15V6H9V3ZM18.75%2021H5.25V5.25H7.5V7.5H16.5V5.25H18.75V21Z'%20fill='black'/%3e%3c/svg%3e",XN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.25%2015H12.75V18H11.25V15ZM15%2013.5H16.5V18H15V13.5ZM7.5%2010.5H9V18H7.5V10.5Z'%20fill='black'/%3e%3cpath%20d='M18.75%203.75H16.5V3C16.5%202.60218%2016.342%202.22064%2016.0607%201.93934C15.7794%201.65804%2015.3978%201.5%2015%201.5H9C8.60218%201.5%208.22064%201.65804%207.93934%201.93934C7.65804%202.22064%207.5%202.60218%207.5%203V3.75H5.25C4.85218%203.75%204.47064%203.90804%204.18934%204.18934C3.90804%204.47064%203.75%204.85218%203.75%205.25V21C3.75%2021.3978%203.90804%2021.7794%204.18934%2022.0607C4.47064%2022.342%204.85218%2022.5%205.25%2022.5H18.75C19.1478%2022.5%2019.5294%2022.342%2019.8107%2022.0607C20.092%2021.7794%2020.25%2021.3978%2020.25%2021V5.25C20.25%204.85218%2020.092%204.47064%2019.8107%204.18934C19.5294%203.90804%2019.1478%203.75%2018.75%203.75ZM9%203H15V6H9V3ZM18.75%2021H5.25V5.25H7.5V7.5H16.5V5.25H18.75V21Z'%20fill='black'/%3e%3c/svg%3e",$w="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.54688%2010.2188C7.54688%209.95987%207.75674%209.75%208.01562%209.75H10.5938C10.6863%209.75%2010.7768%209.77739%2010.8538%209.82873L12%2010.5929L13.1462%209.82873C13.2232%209.77739%2013.3137%209.75%2013.4062%209.75H15.9844C16.2433%209.75%2016.4531%209.95987%2016.4531%2010.2188C16.4531%2010.4776%2016.2433%2010.6875%2015.9844%2010.6875H13.5482L12.26%2011.5463C12.1026%2011.6512%2011.8974%2011.6512%2011.74%2011.5463L10.4518%2010.6875H8.01562C7.75674%2010.6875%207.54688%2010.4776%207.54688%2010.2188Z'%20fill='white'/%3e%3cpath%20d='M13.1484%2019.3125C12.8896%2019.3125%2012.6797%2019.5224%2012.6797%2019.7812C12.6797%2020.0401%2012.8896%2020.25%2013.1484%2020.25H15.2578C15.5167%2020.25%2015.7266%2020.0401%2015.7266%2019.7812C15.7266%2019.5224%2015.5167%2019.3125%2015.2578%2019.3125H13.1484Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.2734%2017.4375C11.0146%2017.4375%2010.8047%2017.6474%2010.8047%2017.9062V21.6562C10.8047%2021.9151%2011.0146%2022.125%2011.2734%2022.125H17.1328C17.3917%2022.125%2017.6016%2021.9151%2017.6016%2021.6562V17.9062C17.6016%2017.6474%2017.3917%2017.4375%2017.1328%2017.4375H11.2734ZM11.7422%2021.1875V18.375H16.6641V21.1875H11.7422Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M7.89844%200C7.63955%200%207.42969%200.209867%207.42969%200.46875V1.28906H2.74219C2.4833%201.28906%202.27344%201.49893%202.27344%201.75781V3.63281C2.27344%203.8917%202.4833%204.10156%202.74219%204.10156H4.5V14.1562C4.5%2014.4151%204.70987%2014.625%204.96875%2014.625H5.67188V15.5625H4.96875C4.70987%2015.5625%204.5%2015.7724%204.5%2016.0312V23.5312C4.5%2023.7901%204.70987%2024%204.96875%2024H19.0312C19.2901%2024%2019.5%2023.7901%2019.5%2023.5312V16.0312C19.5%2015.7724%2019.2901%2015.5625%2019.0312%2015.5625H18.3281V14.625H19.0312C19.2901%2014.625%2019.5%2014.4151%2019.5%2014.1562V4.10156H21.2578C21.5167%204.10156%2021.7266%203.8917%2021.7266%203.63281V1.75781C21.7266%201.49893%2021.5167%201.28906%2021.2578%201.28906H16.5703V0.46875C16.5703%200.209867%2016.3604%200%2016.1016%200H7.89844ZM18.5625%204.10156H16.5703V4.92188C16.5703%205.18076%2016.3604%205.39062%2016.1016%205.39062H13.875V7.45312C13.875%207.57745%2013.8256%207.69667%2013.7377%207.78458L12.3315%209.19083C12.1484%209.37389%2011.8516%209.37389%2011.6685%209.19083L10.2623%207.78458C10.1744%207.69667%2010.125%207.57745%2010.125%207.45312V5.39062H7.89844C7.63955%205.39062%207.42969%205.18076%207.42969%204.92188V4.10156H5.4375V13.6875H7.54688V12.5156C7.54688%2012.2567%207.75674%2012.0469%208.01562%2012.0469H10.5938C10.6863%2012.0469%2010.7768%2012.0743%2010.8538%2012.1256L12%2012.8898L13.1462%2012.1256C13.2232%2012.0743%2013.3137%2012.0469%2013.4062%2012.0469H15.9844C16.2433%2012.0469%2016.4531%2012.2567%2016.4531%2012.5156V13.6875H18.5625V4.10156ZM20.7891%203.16406V2.22656H16.5703V3.16406H20.7891ZM15.6328%200.9375H8.36719V4.45312H15.6328V0.9375ZM7.42969%203.16406V2.22656H3.21094V3.16406H7.42969ZM12.9375%205.39062H11.0625V7.25896L12%208.19646L12.9375%207.25896V5.39062ZM15.5156%2012.9844H13.5482L12.26%2013.8431C12.1026%2013.9481%2011.8974%2013.9481%2011.74%2013.8431L10.4518%2012.9844H8.48438V15.5625H15.5156V12.9844ZM17.3906%2014.625H16.4531V15.5625H17.3906V14.625ZM6.60938%2015.5625H7.54688V14.625H6.60938V15.5625ZM5.4375%2016.5V23.0625H18.5625V16.5H5.4375Z'%20fill='white'/%3e%3c/svg%3e",Hw="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M2.25%2021H22.5V19.5H3V0H1.5V20.25L2.25%2021ZM4.5%2017.25V5.25L5.25%204.5H8.25L9%205.25V17.25L8.25%2018H5.25L4.5%2017.25ZM7.5%2016.5V6H6V16.5H7.5ZM16.5%202.25V17.25L17.25%2018H20.25L21%2017.25V2.25L20.25%201.5H17.25L16.5%202.25ZM19.5%203V16.5H18V3H19.5ZM10.5%2017.25V8.25L11.25%207.5H14.25L15%208.25V17.25L14.25%2018H11.25L10.5%2017.25ZM13.5%2016.5V9H12V16.5H13.5Z'%20fill='black'/%3e%3c/svg%3e",UN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%207C4%204.23858%206.23858%202%209%202C11.7614%202%2014%204.23858%2014%207C14%209.76142%2011.7614%2012%209%2012C6.23858%2012%204%209.76142%204%207ZM9%204C7.34315%204%206%205.34315%206%207C6%208.65685%207.34315%2010%209%2010C10.6569%2010%2012%208.65685%2012%207C12%205.34315%2010.6569%204%209%204Z'%20fill='black'/%3e%3cpath%20d='M2.46447%2015.4645C3.40215%2014.5268%204.67392%2014%206%2014H12C13.3261%2014%2014.5979%2014.5268%2015.5355%2015.4645C16.4732%2016.4021%2017%2017.6739%2017%2019V21C17%2021.5523%2016.5523%2022%2016%2022C15.4477%2022%2015%2021.5523%2015%2021V19C15%2018.2043%2014.6839%2017.4413%2014.1213%2016.8787C13.5587%2016.3161%2012.7957%2016%2012%2016H6C5.20435%2016%204.44129%2016.3161%203.87868%2016.8787C3.31607%2017.4413%203%2018.2043%203%2019V21C3%2021.5523%202.55228%2022%202%2022C1.44772%2022%201%2021.5523%201%2021V19C1%2017.6739%201.52678%2016.4021%202.46447%2015.4645Z'%20fill='black'/%3e%3cpath%20d='M16.248%202.16125C15.713%202.02427%2015.1682%202.34694%2015.0313%202.88197C14.8943%203.41699%2015.2169%203.96177%2015.752%204.09875C16.3973%204.26398%2016.9692%204.63928%2017.3777%205.16549C17.7861%205.6917%2018.0078%206.33888%2018.0078%207.00501C18.0078%207.67113%2017.7861%208.31831%2017.3777%208.84452C16.9692%209.37073%2016.3973%209.74603%2015.752%209.91125C15.2169%2010.0482%2014.8943%2010.593%2015.0313%2011.128C15.1682%2011.6631%2015.713%2011.9857%2016.248%2011.8488C17.3236%2011.5734%2018.2768%2010.9479%2018.9576%2010.0709C19.6383%209.19386%2020.0078%208.11522%2020.0078%207.00501C20.0078%205.89479%2019.6383%204.81615%2018.9576%203.93914C18.2768%203.06213%2017.3236%202.43663%2016.248%202.16125Z'%20fill='black'/%3e%3cpath%20d='M19.25%2014.1618C18.7153%2014.0237%2018.1698%2014.3453%2018.0318%2014.88C17.8937%2015.4148%2018.2153%2015.9602%2018.75%2016.0983C19.3936%2016.2644%2019.9638%2016.6396%2020.371%2017.165C20.7782%2017.6902%2020.9994%2018.3358%2021%2019.0003L21%2019.0008L21%2021C21%2021.5523%2021.4477%2022%2022%2022C22.5523%2022%2023%2021.5523%2023%2021V18.9993C22.9992%2017.8914%2022.6305%2016.8152%2021.9517%2015.9397C21.273%2015.0641%2020.3227%2014.4387%2019.25%2014.1618Z'%20fill='black'/%3e%3c/svg%3e",GN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%207C4%204.23857%206.23858%202%209%202C11.7614%202%2014%204.23857%2014%207C14%209.76142%2011.7614%2012%209%2012C6.23858%2012%204%209.76142%204%207ZM9%204C7.34315%204%206%205.34314%206%207C6%208.65685%207.34315%2010%209%2010C10.6569%2010%2012%208.65685%2012%207C12%205.34314%2010.6569%204%209%204Z'%20fill='white'/%3e%3cpath%20d='M2.46447%2015.4645C3.40215%2014.5268%204.67392%2014%206%2014H12C13.3261%2014%2014.5979%2014.5268%2015.5355%2015.4645C16.4732%2016.4021%2017%2017.6739%2017%2019V21C17%2021.5523%2016.5523%2022%2016%2022C15.4477%2022%2015%2021.5523%2015%2021V19C15%2018.2043%2014.6839%2017.4413%2014.1213%2016.8787C13.5587%2016.3161%2012.7957%2016%2012%2016H6C5.20435%2016%204.44129%2016.3161%203.87868%2016.8787C3.31607%2017.4413%203%2018.2043%203%2019V21C3%2021.5523%202.55228%2022%202%2022C1.44772%2022%201%2021.5523%201%2021V19C1%2017.6739%201.52678%2016.4021%202.46447%2015.4645Z'%20fill='white'/%3e%3cpath%20d='M16.248%202.16125C15.713%202.02426%2015.1682%202.34694%2015.0313%202.88196C14.8943%203.41699%2015.2169%203.96176%2015.752%204.09875C16.3973%204.26398%2016.9692%204.63928%2017.3777%205.16549C17.7861%205.69169%2018.0078%206.33888%2018.0078%207.005C18.0078%207.67113%2017.7861%208.31831%2017.3777%208.84452C16.9692%209.37073%2016.3973%209.74603%2015.752%209.91125C15.2169%2010.0482%2014.8943%2010.593%2015.0313%2011.128C15.1682%2011.6631%2015.713%2011.9857%2016.248%2011.8488C17.3236%2011.5734%2018.2768%2010.9479%2018.9576%2010.0709C19.6383%209.19385%2020.0078%208.11522%2020.0078%207.005C20.0078%205.89479%2019.6383%204.81615%2018.9576%203.93914C18.2768%203.06213%2017.3236%202.43663%2016.248%202.16125Z'%20fill='white'/%3e%3cpath%20d='M19.25%2014.1618C18.7153%2014.0237%2018.1698%2014.3453%2018.0318%2014.88C17.8937%2015.4148%2018.2153%2015.9602%2018.75%2016.0982C19.3936%2016.2644%2019.9638%2016.6396%2020.371%2017.165C20.7782%2017.6902%2020.9994%2018.3358%2021%2019.0003L21%2019.0007L21%2021C21%2021.5523%2021.4477%2022%2022%2022C22.5523%2022%2023%2021.5523%2023%2021V18.9993C22.9992%2017.8914%2022.6305%2016.8152%2021.9517%2015.9397C21.273%2015.0641%2020.3227%2014.4387%2019.25%2014.1618Z'%20fill='white'/%3e%3c/svg%3e",KN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_818_5611)'%3e%3cpath%20d='M22.6931%2012.8403V8.54585L20.0971%207.92779C19.9797%207.58452%2019.8406%207.24909%2019.6805%206.92355L21.0794%204.65025L18.0428%201.61361L15.7695%203.01259C15.4439%202.85249%2015.1085%202.71334%2014.7653%202.59599L14.1472%20-3.57628e-07H9.85282L9.23471%202.59599C8.89145%202.71334%208.55604%202.85249%208.23051%203.01259L5.95721%201.61361L2.92052%204.65025L4.31946%206.92355C4.15937%207.24909%204.02022%207.58452%203.90286%207.92779L1.30692%208.54581V12.8402L3.90291%2013.4583C4.02027%2013.8016%204.15942%2014.137%204.31951%2014.4626L2.91396%2016.7466L5.0195%2018.7633C4.79521%2019.4357%204.68096%2020.14%204.68117%2020.8488V24H19.4138V20.8488C19.4138%2020.1594%2019.3058%2019.4801%2019.0974%2018.8321L21.0691%2016.7191L19.6805%2014.4626C19.8406%2014.1371%2019.9797%2013.8017%2020.0971%2013.4584L22.6931%2012.8403ZM17.9881%2022.5743H6.10692V20.8488C6.10692%2019.86%206.38864%2018.8971%206.92168%2018.0643C7.87588%2016.5733%209.50237%2015.6832%2011.2725%2015.6832H12.8225C14.5927%2015.6832%2016.2191%2016.5733%2017.1733%2018.0642C17.7058%2018.8953%2017.9886%2019.8617%2017.9881%2020.8488V22.5743ZM12.0475%2014.198C10.2295%2014.198%208.75048%2012.719%208.75048%2010.901C8.75048%209.08303%2010.2295%207.60396%2012.0475%207.60396C13.8655%207.60396%2015.3445%209.08303%2015.3445%2010.901C15.3445%2012.719%2013.8655%2014.198%2012.0475%2014.198ZM19.2853%2016.5408L18.4564%2017.4292C18.4293%2017.3846%2018.4024%2017.3397%2018.3742%2017.2957C17.5565%2016.0181%2016.3517%2015.087%2014.9646%2014.6127C16.0634%2013.7472%2016.7702%2012.4051%2016.7702%2010.901C16.7702%208.29687%2014.6516%206.17822%2012.0475%206.17822C9.44334%206.17822%207.32469%208.29687%207.32469%2010.901C7.32469%2012.4051%208.03148%2013.7472%209.13034%2014.6127C7.74324%2015.087%206.53839%2016.0181%205.72073%2017.2957C5.69877%2017.33%205.6781%2017.365%205.65681%2017.3996L4.7315%2016.5133L5.96425%2014.5101L5.03181%2012.2616L2.73266%2011.7141V9.67195L5.03186%209.12451L5.96429%206.87602L4.72494%204.86211L6.16898%203.41807L8.18294%204.65743L10.4314%203.72499L10.9789%201.42574H13.0211L13.5685%203.72494L15.817%204.65743L17.8309%203.41807L19.275%204.86211L18.0356%206.87602L18.9681%209.12451L21.2673%209.67195V11.7141L18.9681%2012.2616L18.0356%2014.5101L19.2853%2016.5408Z'%20fill='black'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_818_5611'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",QN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_818_5610)'%3e%3cpath%20d='M22.6931%2012.8403V8.54585L20.0971%207.92779C19.9797%207.58452%2019.8406%207.24909%2019.6805%206.92355L21.0794%204.65025L18.0428%201.61361L15.7695%203.01259C15.4439%202.85249%2015.1085%202.71334%2014.7653%202.59599L14.1472%20-3.57628e-07H9.85282L9.23471%202.59599C8.89145%202.71334%208.55604%202.85249%208.23051%203.01259L5.95721%201.61361L2.92052%204.65025L4.31946%206.92355C4.15937%207.24909%204.02022%207.58452%203.90286%207.92779L1.30692%208.54581V12.8402L3.90291%2013.4583C4.02027%2013.8016%204.15942%2014.137%204.31951%2014.4626L2.91396%2016.7466L5.0195%2018.7633C4.79521%2019.4357%204.68096%2020.14%204.68117%2020.8488V24H19.4138V20.8488C19.4138%2020.1594%2019.3058%2019.4801%2019.0974%2018.8321L21.0691%2016.7191L19.6805%2014.4626C19.8406%2014.1371%2019.9797%2013.8017%2020.0971%2013.4584L22.6931%2012.8403ZM17.9881%2022.5743H6.10692V20.8488C6.10692%2019.86%206.38864%2018.8971%206.92168%2018.0643C7.87588%2016.5733%209.50237%2015.6832%2011.2725%2015.6832H12.8225C14.5927%2015.6832%2016.2191%2016.5733%2017.1733%2018.0642C17.7058%2018.8953%2017.9886%2019.8617%2017.9881%2020.8488V22.5743ZM12.0475%2014.198C10.2295%2014.198%208.75048%2012.719%208.75048%2010.901C8.75048%209.08303%2010.2295%207.60396%2012.0475%207.60396C13.8655%207.60396%2015.3445%209.08303%2015.3445%2010.901C15.3445%2012.719%2013.8655%2014.198%2012.0475%2014.198ZM19.2853%2016.5408L18.4564%2017.4292C18.4293%2017.3846%2018.4024%2017.3397%2018.3742%2017.2957C17.5565%2016.0181%2016.3517%2015.087%2014.9646%2014.6127C16.0634%2013.7472%2016.7702%2012.4051%2016.7702%2010.901C16.7702%208.29687%2014.6516%206.17822%2012.0475%206.17822C9.44334%206.17822%207.32469%208.29687%207.32469%2010.901C7.32469%2012.4051%208.03148%2013.7472%209.13034%2014.6127C7.74324%2015.087%206.53839%2016.0181%205.72073%2017.2957C5.69877%2017.33%205.6781%2017.365%205.65681%2017.3996L4.7315%2016.5133L5.96425%2014.5101L5.03181%2012.2616L2.73266%2011.7141V9.67195L5.03186%209.12451L5.96429%206.87602L4.72494%204.86211L6.16898%203.41807L8.18294%204.65743L10.4314%203.72499L10.9789%201.42574H13.0211L13.5685%203.72494L15.817%204.65743L17.8309%203.41807L19.275%204.86211L18.0356%206.87602L18.9681%209.12451L21.2673%209.67195V11.7141L18.9681%2012.2616L18.0356%2014.5101L19.2853%2016.5408Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_818_5610'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",ZN="/assets/Tare___Coil_White-CRe1WiRM.svg",JN="/assets/Tare___Coil_Black-Cfz74l6R.svg",qN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.2222%2011.994C10.7484%2012.3456%2011.3671%2012.5333%2012%2012.5333C12.8482%2012.5316%2013.6611%2012.1938%2014.2608%2011.5941C14.8605%2010.9944%2015.1982%2010.1815%2015.2%209.33332C15.2%208.70042%2015.0123%208.08173%2014.6607%207.55549C14.3091%207.02925%2013.8093%206.6191%2013.2246%206.3769C12.6399%206.1347%2011.9965%206.07133%2011.3757%206.1948C10.755%206.31828%2010.1848%206.62305%209.73727%207.07057C9.28974%207.5181%208.98497%208.08829%208.8615%208.70903C8.73803%209.32977%208.8014%209.97318%209.0436%2010.5579C9.2858%2011.1426%209.69595%2011.6424%2010.2222%2011.994ZM11.0111%207.8533C11.3038%207.65771%2011.648%207.55332%2012%207.55332V7.55998C12.4709%207.55998%2012.9227%207.7466%2013.2563%208.07897C13.5899%208.41135%2013.7782%208.86239%2013.78%209.33332C13.78%209.68537%2013.6756%2010.0295%2013.48%2010.3222C13.2844%2010.615%2013.0064%2010.8431%2012.6812%2010.9778C12.3559%2011.1125%2011.998%2011.1478%2011.6528%2011.0791C11.3075%2011.0104%2010.9903%2010.8409%2010.7414%2010.592C10.4924%2010.343%2010.3229%2010.0259%2010.2542%209.68058C10.1855%209.33529%2010.2208%208.97739%2010.3555%208.65214C10.4902%208.32689%2010.7184%208.04889%2011.0111%207.8533Z'%20fill='black'/%3e%3cpath%20d='M14.8467%2016.4467H16.2667C16.2649%2015.6928%2015.9642%2014.9705%2015.4306%2014.4381C14.8969%2013.9056%2014.1738%2013.6066%2013.42%2013.6066H10.5733C9.82013%2013.6066%209.09776%2013.9059%208.56516%2014.4385C8.03256%2014.9711%207.73334%2015.6934%207.73334%2016.4467H9.15334C9.15334%2016.07%209.30295%2015.7089%209.56925%2015.4426C9.83555%2015.1763%2010.1967%2015.0266%2010.5733%2015.0266H13.4267C13.8027%2015.0284%2014.1629%2015.1786%2014.4288%2015.4445C14.6948%2015.7104%2014.8449%2016.0706%2014.8467%2016.4467Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.68%2022.5933C11.7795%2022.6423%2011.8891%2022.6674%2012%2022.6666C12.1069%2022.6633%2012.2117%2022.636%2012.3067%2022.5867L15.5533%2020.9667C17.093%2020.2042%2018.3881%2019.0255%2019.2919%2017.5644C20.1957%2016.1032%2020.672%2014.4181%2020.6667%2012.7V4.60665C20.6668%204.5101%2020.6473%204.41454%2020.6094%204.32574C20.5715%204.23695%2020.5159%204.15678%2020.4461%204.09009C20.3763%204.02339%2020.2937%203.97156%2020.2032%203.93774C20.1128%203.90392%2020.0165%203.88881%2019.92%203.89332H17.6067C16.6604%203.88832%2015.7352%203.61308%2014.94%203.09998L12.36%201.44665C12.2455%201.37367%2012.1125%201.3349%2011.9767%201.3349C11.8409%201.3349%2011.7079%201.37367%2011.5933%201.44665L9.01335%203.09998C8.21819%203.61308%207.293%203.88832%206.34668%203.89332H4.03335C3.84648%203.89681%203.66845%203.9735%203.53754%204.1069C3.40663%204.2403%203.33331%204.41975%203.33335%204.60665V12.7C3.32559%2014.4178%203.79927%2016.1034%204.70069%2017.5657C5.60211%2019.028%206.8952%2020.2085%208.43334%2020.9733L11.68%2022.5933ZM4.74668%2012.7V5.33332H6.34668C7.57546%205.32926%208.77692%204.97044%209.80668%204.29998L12%202.88665L14.1933%204.31332C15.2245%204.97907%2016.4259%205.33323%2017.6533%205.33332H19.2533V12.7C19.2574%2014.1534%2018.8542%2015.579%2018.0895%2016.815C17.3248%2018.0511%2016.2291%2019.0482%2014.9267%2019.6933L12%2021.16L9.07335%2019.6933C7.7709%2019.0482%206.67523%2018.0511%205.91051%2016.815C5.14579%2015.579%204.74262%2014.1534%204.74668%2012.7Z'%20fill='black'/%3e%3c/svg%3e",eR="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.2222%2011.994C10.7484%2012.3456%2011.3671%2012.5333%2012%2012.5333C12.8482%2012.5316%2013.6611%2012.1938%2014.2608%2011.5941C14.8605%2010.9944%2015.1982%2010.1815%2015.2%209.33332C15.2%208.70042%2015.0123%208.08173%2014.6607%207.55549C14.3091%207.02925%2013.8093%206.6191%2013.2246%206.3769C12.6399%206.1347%2011.9965%206.07133%2011.3757%206.1948C10.755%206.31828%2010.1848%206.62305%209.73727%207.07057C9.28974%207.5181%208.98497%208.08829%208.8615%208.70903C8.73803%209.32977%208.8014%209.97318%209.0436%2010.5579C9.2858%2011.1426%209.69595%2011.6424%2010.2222%2011.994ZM11.0111%207.8533C11.3038%207.65771%2011.648%207.55332%2012%207.55332V7.55998C12.4709%207.55998%2012.9227%207.7466%2013.2563%208.07897C13.5899%208.41135%2013.7782%208.86239%2013.78%209.33332C13.78%209.68537%2013.6756%2010.0295%2013.48%2010.3222C13.2844%2010.615%2013.0064%2010.8431%2012.6812%2010.9778C12.3559%2011.1125%2011.998%2011.1478%2011.6528%2011.0791C11.3075%2011.0104%2010.9903%2010.8409%2010.7414%2010.592C10.4924%2010.343%2010.3229%2010.0259%2010.2542%209.68058C10.1855%209.33529%2010.2208%208.97739%2010.3555%208.65214C10.4902%208.32689%2010.7184%208.04889%2011.0111%207.8533Z'%20fill='white'/%3e%3cpath%20d='M14.8467%2016.4467H16.2667C16.2649%2015.6928%2015.9642%2014.9705%2015.4306%2014.4381C14.8969%2013.9056%2014.1738%2013.6066%2013.42%2013.6066H10.5733C9.82013%2013.6066%209.09776%2013.9059%208.56516%2014.4385C8.03256%2014.9711%207.73334%2015.6934%207.73334%2016.4467H9.15334C9.15334%2016.07%209.30295%2015.7089%209.56925%2015.4426C9.83555%2015.1763%2010.1967%2015.0266%2010.5733%2015.0266H13.4267C13.8027%2015.0284%2014.1629%2015.1786%2014.4288%2015.4445C14.6948%2015.7104%2014.8449%2016.0706%2014.8467%2016.4467Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.68%2022.5933C11.7795%2022.6423%2011.8891%2022.6674%2012%2022.6666C12.1069%2022.6633%2012.2117%2022.636%2012.3067%2022.5867L15.5533%2020.9667C17.093%2020.2042%2018.3881%2019.0255%2019.2919%2017.5644C20.1957%2016.1032%2020.672%2014.4181%2020.6667%2012.7V4.60665C20.6668%204.5101%2020.6473%204.41454%2020.6094%204.32574C20.5715%204.23695%2020.5159%204.15678%2020.4461%204.09009C20.3763%204.02339%2020.2937%203.97156%2020.2032%203.93774C20.1128%203.90392%2020.0165%203.88881%2019.92%203.89332H17.6067C16.6604%203.88832%2015.7352%203.61308%2014.94%203.09998L12.36%201.44665C12.2455%201.37367%2012.1125%201.3349%2011.9767%201.3349C11.8409%201.3349%2011.7079%201.37367%2011.5933%201.44665L9.01335%203.09998C8.21819%203.61308%207.293%203.88832%206.34668%203.89332H4.03335C3.84648%203.89681%203.66845%203.9735%203.53754%204.1069C3.40663%204.2403%203.33331%204.41975%203.33335%204.60665V12.7C3.32559%2014.4178%203.79927%2016.1034%204.70069%2017.5657C5.60211%2019.028%206.8952%2020.2085%208.43334%2020.9733L11.68%2022.5933ZM4.74668%2012.7V5.33332H6.34668C7.57546%205.32926%208.77692%204.97044%209.80668%204.29998L12%202.88665L14.1933%204.31332C15.2245%204.97907%2016.4259%205.33323%2017.6533%205.33332H19.2533V12.7C19.2574%2014.1534%2018.8542%2015.579%2018.0895%2016.815C17.3248%2018.0511%2016.2291%2019.0482%2014.9267%2019.6933L12%2021.16L9.07335%2019.6933C7.7709%2019.0482%206.67523%2018.0511%205.91051%2016.815C5.14579%2015.579%204.74262%2014.1534%204.74668%2012.7Z'%20fill='white'/%3e%3c/svg%3e";var LT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Yw=ns.createContext&&ns.createContext(LT),tR=["attr","size","title"];function iR(t,e){if(t==null)return{};var i=nR(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nR(t,e){if(t==null)return{};var i={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;i[n]=t[n]}return i}function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},m0.apply(this,arguments)}function Xw(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function g0(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Xw(Object(i),!0).forEach(function(n){sR(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Xw(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function sR(t,e,i){return e=rR(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function rR(t){var e=aR(t,"string");return typeof e=="symbol"?e:e+""}function aR(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NT(t){return t&&t.map((e,i)=>ns.createElement(e.tag,g0({key:i},e.attr),NT(e.child)))}function ru(t){return e=>ns.createElement(oR,m0({attr:g0({},t.attr)},e),NT(t.child))}function oR(t){var e=i=>{var{attr:n,size:s,title:a}=t,l=iR(t,tR),p=s||i.size||"1em",f;return i.className&&(f=i.className),t.className&&(f=(f?f+" ":"")+t.className),ns.createElement("svg",m0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},i.attr,n,l,{className:f,style:g0(g0({color:t.color||i.color},i.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),a&&ns.createElement("title",null,a),t.children)};return Yw!==void 0?ns.createElement(Yw.Consumer,null,i=>e(i)):e(LT)}function oy(t){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Circle_Plus"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M15,12.5H12.5V15a.5.5,0,0,1-1,0V12.5H9a.5.5,0,0,1,0-1h2.5V9a.5.5,0,0,1,1,0v2.5H15A.5.5,0,0,1,15,12.5Z"},child:[]},{tag:"path",attr:{d:"M12,21.932A9.934,9.934,0,1,1,21.932,12,9.944,9.944,0,0,1,12,21.932ZM12,3.065A8.934,8.934,0,1,0,20.932,12,8.944,8.944,0,0,0,12,3.065Z"},child:[]}]}]}]})(t)}function Uw(t){return ru({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"},child:[]}]})(t)}function Gw(t){return ru({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"},child:[]}]})(t)}function Gl(t){return ru({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(t)}function lR(){let[t,e]=q.useState(!1),[i,n]=q.useState(!1);return _.jsxs("div",{className:"w-full md:max-w-[240px] md:min-w-[240px] w-full md:min-h-screen border-r border-r-gray-500",children:[_.jsx("div",{className:"w-full py-4 ",children:_.jsx("img",{src:BT,alt:"",className:"mx-auto"})}),_.jsxs("div",{className:"flex flex-col gap-4 px-4 mt-6",children:[_.jsx(li,{to:"/",className:({isActive:s})=>s?"bg-primary rounded-md hidden":"block",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:$N,alt:""}),_.jsx("p",{className:"",children:"Overview"})]})}),_.jsx(li,{to:"/",className:({isActive:s})=>s?"bg-primary rounded-md block text-white":"hidden",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:HN,alt:""}),_.jsx("p",{className:"",children:"Overview"})]})}),_.jsx(li,{to:"/machines",className:({isActive:s})=>s?"bg-primary rounded-md hidden":"block",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:x0,alt:""}),_.jsx("p",{className:"",children:"Forming Machine"})]})}),_.jsx(li,{to:"/machines",className:({isActive:s})=>s?"bg-primary rounded-md block text-white":"hidden",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:$w,alt:""}),_.jsx("p",{className:"",children:"Forming Machine"})]})}),_.jsx(li,{to:"/graph-charts",className:({isActive:s})=>s?"bg-primary rounded-md block text-white":"hidden",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:Hw,alt:""}),_.jsx("p",{className:"",children:"Graphs & Charts"})]})}),_.jsx(li,{to:"/graph-charts",className:({isActive:s})=>s?"bg-primary rounded-md hidden":"block",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:Hw,alt:""}),_.jsx("p",{className:"",children:"Graphs & Charts"})]})}),_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",onClick:()=>n(!i),children:[_.jsx("img",{src:YN,alt:""}),_.jsx("p",{className:"",children:"Reports"}),i?_.jsx(Gw,{}):_.jsx(Uw,{})]}),i&&_.jsxs("div",{className:"flex flex-col gap-3 pl-8",children:[_.jsx(li,{to:"/reports/realtime-reports",className:({isActive:s})=>s?"bg-primary rounded-md":"",children:_.jsx("p",{className:"p-2 ",children:"Realtime Report"})}),_.jsx(li,{to:"/reports/daily-reports",className:({isActive:s})=>s?"bg-primary rounded-md":"",children:_.jsx("p",{className:"p-2 ",children:"Daily Report"})}),_.jsx(li,{to:"/reports/weekly-reports",className:({isActive:s})=>s?"bg-primary rounded-md":"",children:_.jsx("p",{className:"p-2 ",children:"Weekly Report"})}),_.jsx(li,{to:"/reports/monthly-reports",className:({isActive:s})=>s?"bg-primary rounded-md":"",children:_.jsx("p",{className:"p-2 ",children:"Monthly Report"})}),_.jsx(li,{to:"/reports/quarterly-reports",className:({isActive:s})=>s?"bg-primary rounded-md":"",children:_.jsx("p",{className:"p-2 ",children:"Quarterly Report"})}),_.jsx(li,{to:"/reports/machine-efficiency",className:({isActive:s})=>s?"bg-primary rounded-md":"",children:_.jsx("p",{className:"p-2 ",children:"Machine Efficiency"})})]}),_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",onClick:()=>e(!t),children:[_.jsx("img",{src:XN,alt:""}),_.jsx("p",{className:"",children:"Manage Products"}),t?_.jsx(Gw,{}):_.jsx(Uw,{})]}),t&&_.jsxs("div",{className:"flex flex-col gap-3 pl-8",children:[_.jsx(li,{to:"/manage/products",className:({isActive:s})=>s?"bg-primary rounded-md":"",children:_.jsx("p",{className:"p-2 ",children:"All Products"})}),_.jsx(li,{to:"/products/add-product",className:({isActive:s})=>s?"bg-primary rounded-md":"",children:_.jsx("p",{className:"p-2 ",children:"Add Product"})}),_.jsx(li,{to:"/products/add-shift",className:({isActive:s})=>s?"bg-primary rounded-md":"",children:_.jsx("p",{className:"p-2 ",children:"Add Shift"})}),_.jsx(li,{to:"/products/add-damaged-product",className:({isActive:s})=>s?"bg-primary rounded-md":"",children:_.jsx("p",{className:"p-2 ",children:"Add Damaged Product"})})]}),_.jsx(li,{to:"/manage/all-machines",className:({isActive:s})=>s?"bg-primary rounded-md hidden":"block",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:x0,alt:""}),_.jsx("p",{className:"",children:"All Machines"})]})}),_.jsx(li,{to:"/manage/all-machines",className:({isActive:s})=>s?"bg-primary rounded-md block text-white":"hidden",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:$w,alt:""}),_.jsx("p",{className:"",children:"All Machines"})]})}),_.jsx(li,{to:"/manage/users",className:({isActive:s})=>s?"bg-primary rounded-md hidden":"block",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:UN,alt:""}),_.jsx("p",{className:"",children:"Manage Users"})]})}),_.jsx(li,{to:"/manage/users",className:({isActive:s})=>s?"bg-primary rounded-md block text-white":"hidden",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:GN,alt:""}),_.jsx("p",{className:"",children:"Manage Users"})]})}),_.jsx(li,{to:"/incharge",className:({isActive:s})=>s?"bg-primary rounded-md hidden":"block",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:KN,alt:""}),_.jsx("p",{className:"",children:"Incharge Section"})]})}),_.jsx(li,{to:"/incharge",className:({isActive:s})=>s?"bg-primary rounded-md block text-white":"hidden",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:QN,alt:""}),_.jsx("p",{className:"",children:"Incharge Section"})]})}),_.jsx(li,{to:"/tare-crain-updates",className:({isActive:s})=>s?"bg-primary rounded-md hidden":"block",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:JN,alt:""}),_.jsx("p",{className:"",children:"Tare & Coil Changing "})]})}),_.jsx(li,{to:"/tare-crain-updates",className:({isActive:s})=>s?"bg-primary rounded-md block text-white":"hidden",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:ZN,alt:""}),_.jsx("p",{className:"",children:"Tare & Coil Changing "})]})}),_.jsx(li,{to:"/admin/machine-production",className:({isActive:s})=>s?"bg-primary rounded-md hidden":"block",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:qN,alt:""}),_.jsx("p",{className:"",children:"Admin"})]})}),_.jsx(li,{to:"/admin/machine-production",className:({isActive:s})=>s?"bg-primary rounded-md block text-white":"hidden",children:_.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[_.jsx("img",{src:eR,alt:""}),_.jsx("p",{className:"",children:"Admin"})]})})]})]})}async function Ip(t,e,i){const n=ei(pt,t),s=Qn(n,et("email","==",e),et("password","==",i),or(1)),a=await Fi(s);let l=[];return a.forEach(p=>{l.push(p.data())}),[l.length!==0,l]}async function Fp(t,e=-1){const i=ei(pt,t);let n=null;e!==-1?n=Qn(i,Vs("creatingDate","desc"),or(e)):n=Qn(i,Vs("creatingDate","desc"));const s=await Fi(n);let a=[];return s.forEach(l=>{a.push({id:l==null?void 0:l.id,...l.data()})}),a}const Bs=t=>{const[e,i]=q.useState(!1),[n,s]=q.useReducer(cR,hR),a=ei(pt,t),l=g=>{e||s(g)},p=async g=>{s("IS_LOADING");try{const m=await VI(a,{...g,creatingDate:Ub()});l({type:"ADD_DOCUMENT",payload:m})}catch(m){s({type:"ERROR",payload:m.message})}},f=async(g,m)=>{s({type:"IS_PENDING"});let k={...m,updatedDate:Ub()};const T=Mi(a,g);try{const A=await D2(T,k);l({type:"UPDATE_DOCUMENT",payload:A})}catch(A){s({type:"ERROR",payload:A.message}),RI(T,m)}};return q.useEffect(()=>()=>i(!0),[]),{addDocument:p,response:n,updateDocument:f}},hR={document:null,error:null,isLoading:null,success:null},cR=(t,{type:e,payload:i})=>{switch(e){case"IS_LOADING":return{document:null,error:null,isLoading:!0,success:null};case"ADD_DOCUMENT":return{document:i,error:null,isLoading:!1,success:!0};case"UPDATE_DOCUMENT":return{document:i,error:null,isLoading:!1,success:!0};case"ERROR":return{document:null,error:i,isLoading:!1,success:!1};default:return t}};var RT={exports:{}};function uR(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Of={exports:{}};const dR={},pR=Object.freeze(Object.defineProperty({__proto__:null,default:dR},Symbol.toStringTag,{value:"Module"})),fR=XT(pR);var Kw;function jt(){return Kw||(Kw=1,function(t,e){(function(i,n){t.exports=n()})(Dt,function(){var i=i||function(n,s){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof Dt<"u"&&Dt.crypto&&(a=Dt.crypto),!a&&typeof uR=="function")try{a=fR}catch{}var l=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},p=Object.create||function(){function M(){}return function(B){var z;return M.prototype=B,z=new M,M.prototype=null,z}}(),f={},g=f.lib={},m=g.Base=function(){return{extend:function(M){var B=p(this);return M&&B.mixIn(M),(!B.hasOwnProperty("init")||this.init===B.init)&&(B.init=function(){B.$super.init.apply(this,arguments)}),B.init.prototype=B,B.$super=this,B},create:function(){var M=this.extend();return M.init.apply(M,arguments),M},init:function(){},mixIn:function(M){for(var B in M)M.hasOwnProperty(B)&&(this[B]=M[B]);M.hasOwnProperty("toString")&&(this.toString=M.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),k=g.WordArray=m.extend({init:function(M,B){M=this.words=M||[],B!=s?this.sigBytes=B:this.sigBytes=M.length*4},toString:function(M){return(M||A).stringify(this)},concat:function(M){var B=this.words,z=M.words,G=this.sigBytes,R=M.sigBytes;if(this.clamp(),G%4)for(var U=0;U<R;U++){var K=z[U>>>2]>>>24-U%4*8&255;B[G+U>>>2]|=K<<24-(G+U)%4*8}else for(var ae=0;ae<R;ae+=4)B[G+ae>>>2]=z[ae>>>2];return this.sigBytes+=R,this},clamp:function(){var M=this.words,B=this.sigBytes;M[B>>>2]&=4294967295<<32-B%4*8,M.length=n.ceil(B/4)},clone:function(){var M=m.clone.call(this);return M.words=this.words.slice(0),M},random:function(M){for(var B=[],z=0;z<M;z+=4)B.push(l());return new k.init(B,M)}}),T=f.enc={},A=T.Hex={stringify:function(M){for(var B=M.words,z=M.sigBytes,G=[],R=0;R<z;R++){var U=B[R>>>2]>>>24-R%4*8&255;G.push((U>>>4).toString(16)),G.push((U&15).toString(16))}return G.join("")},parse:function(M){for(var B=M.length,z=[],G=0;G<B;G+=2)z[G>>>3]|=parseInt(M.substr(G,2),16)<<24-G%8*4;return new k.init(z,B/2)}},P=T.Latin1={stringify:function(M){for(var B=M.words,z=M.sigBytes,G=[],R=0;R<z;R++){var U=B[R>>>2]>>>24-R%4*8&255;G.push(String.fromCharCode(U))}return G.join("")},parse:function(M){for(var B=M.length,z=[],G=0;G<B;G++)z[G>>>2]|=(M.charCodeAt(G)&255)<<24-G%4*8;return new k.init(z,B)}},L=T.Utf8={stringify:function(M){try{return decodeURIComponent(escape(P.stringify(M)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(M){return P.parse(unescape(encodeURIComponent(M)))}},W=g.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new k.init,this._nDataBytes=0},_append:function(M){typeof M=="string"&&(M=L.parse(M)),this._data.concat(M),this._nDataBytes+=M.sigBytes},_process:function(M){var B,z=this._data,G=z.words,R=z.sigBytes,U=this.blockSize,K=U*4,ae=R/K;M?ae=n.ceil(ae):ae=n.max((ae|0)-this._minBufferSize,0);var Q=ae*U,se=n.min(Q*4,R);if(Q){for(var ge=0;ge<Q;ge+=U)this._doProcessBlock(G,ge);B=G.splice(0,Q),z.sigBytes-=se}return new k.init(B,se)},clone:function(){var M=m.clone.call(this);return M._data=this._data.clone(),M},_minBufferSize:0});g.Hasher=W.extend({cfg:m.extend(),init:function(M){this.cfg=this.cfg.extend(M),this.reset()},reset:function(){W.reset.call(this),this._doReset()},update:function(M){return this._append(M),this._process(),this},finalize:function(M){M&&this._append(M);var B=this._doFinalize();return B},blockSize:16,_createHelper:function(M){return function(B,z){return new M.init(z).finalize(B)}},_createHmacHelper:function(M){return function(B,z){return new N.HMAC.init(M,z).finalize(B)}}});var N=f.algo={};return f}(Math);return i})}(Of)),Of.exports}var jf={exports:{}},Qw;function Bp(){return Qw||(Qw=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(n){var s=i,a=s.lib,l=a.Base,p=a.WordArray,f=s.x64={};f.Word=l.extend({init:function(g,m){this.high=g,this.low=m}}),f.WordArray=l.extend({init:function(g,m){g=this.words=g||[],m!=n?this.sigBytes=m:this.sigBytes=g.length*8},toX32:function(){for(var g=this.words,m=g.length,k=[],T=0;T<m;T++){var A=g[T];k.push(A.high),k.push(A.low)}return p.create(k,this.sigBytes)},clone:function(){for(var g=l.clone.call(this),m=g.words=this.words.slice(0),k=m.length,T=0;T<k;T++)m[T]=m[T].clone();return g}})}(),i})}(jf)),jf.exports}var Wf={exports:{}},Zw;function xR(){return Zw||(Zw=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(){if(typeof ArrayBuffer=="function"){var n=i,s=n.lib,a=s.WordArray,l=a.init,p=a.init=function(f){if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),(f instanceof Int8Array||typeof Uint8ClampedArray<"u"&&f instanceof Uint8ClampedArray||f instanceof Int16Array||f instanceof Uint16Array||f instanceof Int32Array||f instanceof Uint32Array||f instanceof Float32Array||f instanceof Float64Array)&&(f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength)),f instanceof Uint8Array){for(var g=f.byteLength,m=[],k=0;k<g;k++)m[k>>>2]|=f[k]<<24-k%4*8;l.call(this,m,g)}else l.apply(this,arguments)};p.prototype=a}}(),i.lib.WordArray})}(Wf)),Wf.exports}var zf={exports:{}},Jw;function mR(){return Jw||(Jw=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=n.enc;l.Utf16=l.Utf16BE={stringify:function(f){for(var g=f.words,m=f.sigBytes,k=[],T=0;T<m;T+=2){var A=g[T>>>2]>>>16-T%4*8&65535;k.push(String.fromCharCode(A))}return k.join("")},parse:function(f){for(var g=f.length,m=[],k=0;k<g;k++)m[k>>>1]|=f.charCodeAt(k)<<16-k%2*16;return a.create(m,g*2)}},l.Utf16LE={stringify:function(f){for(var g=f.words,m=f.sigBytes,k=[],T=0;T<m;T+=2){var A=p(g[T>>>2]>>>16-T%4*8&65535);k.push(String.fromCharCode(A))}return k.join("")},parse:function(f){for(var g=f.length,m=[],k=0;k<g;k++)m[k>>>1]|=p(f.charCodeAt(k)<<16-k%2*16);return a.create(m,g*2)}};function p(f){return f<<8&4278255360|f>>>8&16711935}}(),i.enc.Utf16})}(zf)),zf.exports}var $f={exports:{}},qw;function go(){return qw||(qw=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=n.enc;l.Base64={stringify:function(f){var g=f.words,m=f.sigBytes,k=this._map;f.clamp();for(var T=[],A=0;A<m;A+=3)for(var P=g[A>>>2]>>>24-A%4*8&255,L=g[A+1>>>2]>>>24-(A+1)%4*8&255,W=g[A+2>>>2]>>>24-(A+2)%4*8&255,N=P<<16|L<<8|W,M=0;M<4&&A+M*.75<m;M++)T.push(k.charAt(N>>>6*(3-M)&63));var B=k.charAt(64);if(B)for(;T.length%4;)T.push(B);return T.join("")},parse:function(f){var g=f.length,m=this._map,k=this._reverseMap;if(!k){k=this._reverseMap=[];for(var T=0;T<m.length;T++)k[m.charCodeAt(T)]=T}var A=m.charAt(64);if(A){var P=f.indexOf(A);P!==-1&&(g=P)}return p(f,g,k)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function p(f,g,m){for(var k=[],T=0,A=0;A<g;A++)if(A%4){var P=m[f.charCodeAt(A-1)]<<A%4*2,L=m[f.charCodeAt(A)]>>>6-A%4*2,W=P|L;k[T>>>2]|=W<<24-T%4*8,T++}return a.create(k,T)}}(),i.enc.Base64})}($f)),$f.exports}var Hf={exports:{}},e_;function gR(){return e_||(e_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=n.enc;l.Base64url={stringify:function(f,g){g===void 0&&(g=!0);var m=f.words,k=f.sigBytes,T=g?this._safe_map:this._map;f.clamp();for(var A=[],P=0;P<k;P+=3)for(var L=m[P>>>2]>>>24-P%4*8&255,W=m[P+1>>>2]>>>24-(P+1)%4*8&255,N=m[P+2>>>2]>>>24-(P+2)%4*8&255,M=L<<16|W<<8|N,B=0;B<4&&P+B*.75<k;B++)A.push(T.charAt(M>>>6*(3-B)&63));var z=T.charAt(64);if(z)for(;A.length%4;)A.push(z);return A.join("")},parse:function(f,g){g===void 0&&(g=!0);var m=f.length,k=g?this._safe_map:this._map,T=this._reverseMap;if(!T){T=this._reverseMap=[];for(var A=0;A<k.length;A++)T[k.charCodeAt(A)]=A}var P=k.charAt(64);if(P){var L=f.indexOf(P);L!==-1&&(m=L)}return p(f,m,T)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function p(f,g,m){for(var k=[],T=0,A=0;A<g;A++)if(A%4){var P=m[f.charCodeAt(A-1)]<<A%4*2,L=m[f.charCodeAt(A)]>>>6-A%4*2,W=P|L;k[T>>>2]|=W<<24-T%4*8,T++}return a.create(k,T)}}(),i.enc.Base64url})}(Hf)),Hf.exports}var Yf={exports:{}},t_;function yo(){return t_||(t_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(n){var s=i,a=s.lib,l=a.WordArray,p=a.Hasher,f=s.algo,g=[];(function(){for(var L=0;L<64;L++)g[L]=n.abs(n.sin(L+1))*4294967296|0})();var m=f.MD5=p.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(L,W){for(var N=0;N<16;N++){var M=W+N,B=L[M];L[M]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}var z=this._hash.words,G=L[W+0],R=L[W+1],U=L[W+2],K=L[W+3],ae=L[W+4],Q=L[W+5],se=L[W+6],ge=L[W+7],ue=L[W+8],Le=L[W+9],Oe=L[W+10],Ue=L[W+11],tt=L[W+12],Pe=L[W+13],Ne=L[W+14],Be=L[W+15],X=z[0],_e=z[1],me=z[2],$=z[3];X=k(X,_e,me,$,G,7,g[0]),$=k($,X,_e,me,R,12,g[1]),me=k(me,$,X,_e,U,17,g[2]),_e=k(_e,me,$,X,K,22,g[3]),X=k(X,_e,me,$,ae,7,g[4]),$=k($,X,_e,me,Q,12,g[5]),me=k(me,$,X,_e,se,17,g[6]),_e=k(_e,me,$,X,ge,22,g[7]),X=k(X,_e,me,$,ue,7,g[8]),$=k($,X,_e,me,Le,12,g[9]),me=k(me,$,X,_e,Oe,17,g[10]),_e=k(_e,me,$,X,Ue,22,g[11]),X=k(X,_e,me,$,tt,7,g[12]),$=k($,X,_e,me,Pe,12,g[13]),me=k(me,$,X,_e,Ne,17,g[14]),_e=k(_e,me,$,X,Be,22,g[15]),X=T(X,_e,me,$,R,5,g[16]),$=T($,X,_e,me,se,9,g[17]),me=T(me,$,X,_e,Ue,14,g[18]),_e=T(_e,me,$,X,G,20,g[19]),X=T(X,_e,me,$,Q,5,g[20]),$=T($,X,_e,me,Oe,9,g[21]),me=T(me,$,X,_e,Be,14,g[22]),_e=T(_e,me,$,X,ae,20,g[23]),X=T(X,_e,me,$,Le,5,g[24]),$=T($,X,_e,me,Ne,9,g[25]),me=T(me,$,X,_e,K,14,g[26]),_e=T(_e,me,$,X,ue,20,g[27]),X=T(X,_e,me,$,Pe,5,g[28]),$=T($,X,_e,me,U,9,g[29]),me=T(me,$,X,_e,ge,14,g[30]),_e=T(_e,me,$,X,tt,20,g[31]),X=A(X,_e,me,$,Q,4,g[32]),$=A($,X,_e,me,ue,11,g[33]),me=A(me,$,X,_e,Ue,16,g[34]),_e=A(_e,me,$,X,Ne,23,g[35]),X=A(X,_e,me,$,R,4,g[36]),$=A($,X,_e,me,ae,11,g[37]),me=A(me,$,X,_e,ge,16,g[38]),_e=A(_e,me,$,X,Oe,23,g[39]),X=A(X,_e,me,$,Pe,4,g[40]),$=A($,X,_e,me,G,11,g[41]),me=A(me,$,X,_e,K,16,g[42]),_e=A(_e,me,$,X,se,23,g[43]),X=A(X,_e,me,$,Le,4,g[44]),$=A($,X,_e,me,tt,11,g[45]),me=A(me,$,X,_e,Be,16,g[46]),_e=A(_e,me,$,X,U,23,g[47]),X=P(X,_e,me,$,G,6,g[48]),$=P($,X,_e,me,ge,10,g[49]),me=P(me,$,X,_e,Ne,15,g[50]),_e=P(_e,me,$,X,Q,21,g[51]),X=P(X,_e,me,$,tt,6,g[52]),$=P($,X,_e,me,K,10,g[53]),me=P(me,$,X,_e,Oe,15,g[54]),_e=P(_e,me,$,X,R,21,g[55]),X=P(X,_e,me,$,ue,6,g[56]),$=P($,X,_e,me,Be,10,g[57]),me=P(me,$,X,_e,se,15,g[58]),_e=P(_e,me,$,X,Pe,21,g[59]),X=P(X,_e,me,$,ae,6,g[60]),$=P($,X,_e,me,Ue,10,g[61]),me=P(me,$,X,_e,U,15,g[62]),_e=P(_e,me,$,X,Le,21,g[63]),z[0]=z[0]+X|0,z[1]=z[1]+_e|0,z[2]=z[2]+me|0,z[3]=z[3]+$|0},_doFinalize:function(){var L=this._data,W=L.words,N=this._nDataBytes*8,M=L.sigBytes*8;W[M>>>5]|=128<<24-M%32;var B=n.floor(N/4294967296),z=N;W[(M+64>>>9<<4)+15]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,W[(M+64>>>9<<4)+14]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,L.sigBytes=(W.length+1)*4,this._process();for(var G=this._hash,R=G.words,U=0;U<4;U++){var K=R[U];R[U]=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360}return G},clone:function(){var L=p.clone.call(this);return L._hash=this._hash.clone(),L}});function k(L,W,N,M,B,z,G){var R=L+(W&N|~W&M)+B+G;return(R<<z|R>>>32-z)+W}function T(L,W,N,M,B,z,G){var R=L+(W&M|N&~M)+B+G;return(R<<z|R>>>32-z)+W}function A(L,W,N,M,B,z,G){var R=L+(W^N^M)+B+G;return(R<<z|R>>>32-z)+W}function P(L,W,N,M,B,z,G){var R=L+(N^(W|~M))+B+G;return(R<<z|R>>>32-z)+W}s.MD5=p._createHelper(m),s.HmacMD5=p._createHmacHelper(m)}(Math),i.MD5})}(Yf)),Yf.exports}var Xf={exports:{}},i_;function VT(){return i_||(i_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=s.Hasher,p=n.algo,f=[],g=p.SHA1=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(m,k){for(var T=this._hash.words,A=T[0],P=T[1],L=T[2],W=T[3],N=T[4],M=0;M<80;M++){if(M<16)f[M]=m[k+M]|0;else{var B=f[M-3]^f[M-8]^f[M-14]^f[M-16];f[M]=B<<1|B>>>31}var z=(A<<5|A>>>27)+N+f[M];M<20?z+=(P&L|~P&W)+1518500249:M<40?z+=(P^L^W)+1859775393:M<60?z+=(P&L|P&W|L&W)-1894007588:z+=(P^L^W)-899497514,N=W,W=L,L=P<<30|P>>>2,P=A,A=z}T[0]=T[0]+A|0,T[1]=T[1]+P|0,T[2]=T[2]+L|0,T[3]=T[3]+W|0,T[4]=T[4]+N|0},_doFinalize:function(){var m=this._data,k=m.words,T=this._nDataBytes*8,A=m.sigBytes*8;return k[A>>>5]|=128<<24-A%32,k[(A+64>>>9<<4)+14]=Math.floor(T/4294967296),k[(A+64>>>9<<4)+15]=T,m.sigBytes=k.length*4,this._process(),this._hash},clone:function(){var m=l.clone.call(this);return m._hash=this._hash.clone(),m}});n.SHA1=l._createHelper(g),n.HmacSHA1=l._createHmacHelper(g)}(),i.SHA1})}(Xf)),Xf.exports}var Uf={exports:{}},n_;function ly(){return n_||(n_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(n){var s=i,a=s.lib,l=a.WordArray,p=a.Hasher,f=s.algo,g=[],m=[];(function(){function A(N){for(var M=n.sqrt(N),B=2;B<=M;B++)if(!(N%B))return!1;return!0}function P(N){return(N-(N|0))*4294967296|0}for(var L=2,W=0;W<64;)A(L)&&(W<8&&(g[W]=P(n.pow(L,1/2))),m[W]=P(n.pow(L,1/3)),W++),L++})();var k=[],T=f.SHA256=p.extend({_doReset:function(){this._hash=new l.init(g.slice(0))},_doProcessBlock:function(A,P){for(var L=this._hash.words,W=L[0],N=L[1],M=L[2],B=L[3],z=L[4],G=L[5],R=L[6],U=L[7],K=0;K<64;K++){if(K<16)k[K]=A[P+K]|0;else{var ae=k[K-15],Q=(ae<<25|ae>>>7)^(ae<<14|ae>>>18)^ae>>>3,se=k[K-2],ge=(se<<15|se>>>17)^(se<<13|se>>>19)^se>>>10;k[K]=Q+k[K-7]+ge+k[K-16]}var ue=z&G^~z&R,Le=W&N^W&M^N&M,Oe=(W<<30|W>>>2)^(W<<19|W>>>13)^(W<<10|W>>>22),Ue=(z<<26|z>>>6)^(z<<21|z>>>11)^(z<<7|z>>>25),tt=U+Ue+ue+m[K]+k[K],Pe=Oe+Le;U=R,R=G,G=z,z=B+tt|0,B=M,M=N,N=W,W=tt+Pe|0}L[0]=L[0]+W|0,L[1]=L[1]+N|0,L[2]=L[2]+M|0,L[3]=L[3]+B|0,L[4]=L[4]+z|0,L[5]=L[5]+G|0,L[6]=L[6]+R|0,L[7]=L[7]+U|0},_doFinalize:function(){var A=this._data,P=A.words,L=this._nDataBytes*8,W=A.sigBytes*8;return P[W>>>5]|=128<<24-W%32,P[(W+64>>>9<<4)+14]=n.floor(L/4294967296),P[(W+64>>>9<<4)+15]=L,A.sigBytes=P.length*4,this._process(),this._hash},clone:function(){var A=p.clone.call(this);return A._hash=this._hash.clone(),A}});s.SHA256=p._createHelper(T),s.HmacSHA256=p._createHmacHelper(T)}(Math),i.SHA256})}(Uf)),Uf.exports}var Gf={exports:{}},s_;function yR(){return s_||(s_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),ly())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=n.algo,p=l.SHA256,f=l.SHA224=p.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var g=p._doFinalize.call(this);return g.sigBytes-=4,g}});n.SHA224=p._createHelper(f),n.HmacSHA224=p._createHmacHelper(f)}(),i.SHA224})}(Gf)),Gf.exports}var Kf={exports:{}},r_;function OT(){return r_||(r_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),Bp())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.Hasher,l=n.x64,p=l.Word,f=l.WordArray,g=n.algo;function m(){return p.create.apply(p,arguments)}var k=[m(1116352408,3609767458),m(1899447441,602891725),m(3049323471,3964484399),m(3921009573,2173295548),m(961987163,4081628472),m(1508970993,3053834265),m(2453635748,2937671579),m(2870763221,3664609560),m(3624381080,2734883394),m(310598401,1164996542),m(607225278,1323610764),m(1426881987,3590304994),m(1925078388,4068182383),m(2162078206,991336113),m(2614888103,633803317),m(3248222580,3479774868),m(3835390401,2666613458),m(4022224774,944711139),m(264347078,2341262773),m(604807628,2007800933),m(770255983,1495990901),m(1249150122,1856431235),m(1555081692,3175218132),m(1996064986,2198950837),m(2554220882,3999719339),m(2821834349,766784016),m(2952996808,2566594879),m(3210313671,3203337956),m(3336571891,1034457026),m(3584528711,2466948901),m(113926993,3758326383),m(338241895,168717936),m(666307205,1188179964),m(773529912,1546045734),m(1294757372,1522805485),m(1396182291,2643833823),m(1695183700,2343527390),m(1986661051,1014477480),m(2177026350,1206759142),m(2456956037,344077627),m(2730485921,1290863460),m(2820302411,3158454273),m(3259730800,3505952657),m(3345764771,106217008),m(3516065817,3606008344),m(3600352804,1432725776),m(4094571909,1467031594),m(275423344,851169720),m(430227734,3100823752),m(506948616,1363258195),m(659060556,3750685593),m(883997877,3785050280),m(958139571,3318307427),m(1322822218,3812723403),m(1537002063,2003034995),m(1747873779,3602036899),m(1955562222,1575990012),m(2024104815,1125592928),m(2227730452,2716904306),m(2361852424,442776044),m(2428436474,593698344),m(2756734187,3733110249),m(3204031479,2999351573),m(3329325298,3815920427),m(3391569614,3928383900),m(3515267271,566280711),m(3940187606,3454069534),m(4118630271,4000239992),m(116418474,1914138554),m(174292421,2731055270),m(289380356,3203993006),m(460393269,320620315),m(685471733,587496836),m(852142971,1086792851),m(1017036298,365543100),m(1126000580,2618297676),m(1288033470,3409855158),m(1501505948,4234509866),m(1607167915,987167468),m(1816402316,1246189591)],T=[];(function(){for(var P=0;P<80;P++)T[P]=m()})();var A=g.SHA512=a.extend({_doReset:function(){this._hash=new f.init([new p.init(1779033703,4089235720),new p.init(3144134277,2227873595),new p.init(1013904242,4271175723),new p.init(2773480762,1595750129),new p.init(1359893119,2917565137),new p.init(2600822924,725511199),new p.init(528734635,4215389547),new p.init(1541459225,327033209)])},_doProcessBlock:function(P,L){for(var W=this._hash.words,N=W[0],M=W[1],B=W[2],z=W[3],G=W[4],R=W[5],U=W[6],K=W[7],ae=N.high,Q=N.low,se=M.high,ge=M.low,ue=B.high,Le=B.low,Oe=z.high,Ue=z.low,tt=G.high,Pe=G.low,Ne=R.high,Be=R.low,X=U.high,_e=U.low,me=K.high,$=K.low,oe=ae,fe=Q,ve=se,Se=ge,Ee=ue,it=Le,st=Oe,mt=Ue,at=tt,nt=Pe,ze=Ne,It=Be,ht=X,Gi=_e,On=me,Pi=$,dn=0;dn<80;dn++){var wi,Ki,Qi=T[dn];if(dn<16)Ki=Qi.high=P[L+dn*2]|0,wi=Qi.low=P[L+dn*2+1]|0;else{var ka=T[dn-15],Nt=ka.high,Yi=ka.low,Jn=(Nt>>>1|Yi<<31)^(Nt>>>8|Yi<<24)^Nt>>>7,lr=(Yi>>>1|Nt<<31)^(Yi>>>8|Nt<<24)^(Yi>>>7|Nt<<25),fs=T[dn-2],ii=fs.high,Tt=fs.low,Ri=(ii>>>19|Tt<<13)^(ii<<3|Tt>>>29)^ii>>>6,Ta=(Tt>>>19|ii<<13)^(Tt<<3|ii>>>29)^(Tt>>>6|ii<<26),Ma=T[dn-7],vo=Ma.high,F=Ma.low,j=T[dn-16],Z=j.high,Ce=j.low;wi=lr+F,Ki=Jn+vo+(wi>>>0<lr>>>0?1:0),wi=wi+Ta,Ki=Ki+Ri+(wi>>>0<Ta>>>0?1:0),wi=wi+Ce,Ki=Ki+Z+(wi>>>0<Ce>>>0?1:0),Qi.high=Ki,Qi.low=wi}var Re=at&ze^~at&ht,je=nt&It^~nt&Gi,ke=oe&ve^oe&Ee^ve&Ee,ut=fe&Se^fe&it^Se&it,Mt=(oe>>>28|fe<<4)^(oe<<30|fe>>>2)^(oe<<25|fe>>>7),ot=(fe>>>28|oe<<4)^(fe<<30|oe>>>2)^(fe<<25|oe>>>7),_i=(at>>>14|nt<<18)^(at>>>18|nt<<14)^(at<<23|nt>>>9),Ut=(nt>>>14|at<<18)^(nt>>>18|at<<14)^(nt<<23|at>>>9),ci=k[dn],re=ci.high,pe=ci.low,ye=Pi+Ut,xe=On+_i+(ye>>>0<Pi>>>0?1:0),ye=ye+je,xe=xe+Re+(ye>>>0<je>>>0?1:0),ye=ye+pe,xe=xe+re+(ye>>>0<pe>>>0?1:0),ye=ye+wi,xe=xe+Ki+(ye>>>0<wi>>>0?1:0),Ve=ot+ut,r=Mt+ke+(Ve>>>0<ot>>>0?1:0);On=ht,Pi=Gi,ht=ze,Gi=It,ze=at,It=nt,nt=mt+ye|0,at=st+xe+(nt>>>0<mt>>>0?1:0)|0,st=Ee,mt=it,Ee=ve,it=Se,ve=oe,Se=fe,fe=ye+Ve|0,oe=xe+r+(fe>>>0<ye>>>0?1:0)|0}Q=N.low=Q+fe,N.high=ae+oe+(Q>>>0<fe>>>0?1:0),ge=M.low=ge+Se,M.high=se+ve+(ge>>>0<Se>>>0?1:0),Le=B.low=Le+it,B.high=ue+Ee+(Le>>>0<it>>>0?1:0),Ue=z.low=Ue+mt,z.high=Oe+st+(Ue>>>0<mt>>>0?1:0),Pe=G.low=Pe+nt,G.high=tt+at+(Pe>>>0<nt>>>0?1:0),Be=R.low=Be+It,R.high=Ne+ze+(Be>>>0<It>>>0?1:0),_e=U.low=_e+Gi,U.high=X+ht+(_e>>>0<Gi>>>0?1:0),$=K.low=$+Pi,K.high=me+On+($>>>0<Pi>>>0?1:0)},_doFinalize:function(){var P=this._data,L=P.words,W=this._nDataBytes*8,N=P.sigBytes*8;L[N>>>5]|=128<<24-N%32,L[(N+128>>>10<<5)+30]=Math.floor(W/4294967296),L[(N+128>>>10<<5)+31]=W,P.sigBytes=L.length*4,this._process();var M=this._hash.toX32();return M},clone:function(){var P=a.clone.call(this);return P._hash=this._hash.clone(),P},blockSize:1024/32});n.SHA512=a._createHelper(A),n.HmacSHA512=a._createHmacHelper(A)}(),i.SHA512})}(Kf)),Kf.exports}var Qf={exports:{}},a_;function vR(){return a_||(a_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),Bp(),OT())})(Dt,function(i){return function(){var n=i,s=n.x64,a=s.Word,l=s.WordArray,p=n.algo,f=p.SHA512,g=p.SHA384=f.extend({_doReset:function(){this._hash=new l.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var m=f._doFinalize.call(this);return m.sigBytes-=16,m}});n.SHA384=f._createHelper(g),n.HmacSHA384=f._createHmacHelper(g)}(),i.SHA384})}(Qf)),Qf.exports}var Zf={exports:{}},o_;function bR(){return o_||(o_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),Bp())})(Dt,function(i){return function(n){var s=i,a=s.lib,l=a.WordArray,p=a.Hasher,f=s.x64,g=f.Word,m=s.algo,k=[],T=[],A=[];(function(){for(var W=1,N=0,M=0;M<24;M++){k[W+5*N]=(M+1)*(M+2)/2%64;var B=N%5,z=(2*W+3*N)%5;W=B,N=z}for(var W=0;W<5;W++)for(var N=0;N<5;N++)T[W+5*N]=N+(2*W+3*N)%5*5;for(var G=1,R=0;R<24;R++){for(var U=0,K=0,ae=0;ae<7;ae++){if(G&1){var Q=(1<<ae)-1;Q<32?K^=1<<Q:U^=1<<Q-32}G&128?G=G<<1^113:G<<=1}A[R]=g.create(U,K)}})();var P=[];(function(){for(var W=0;W<25;W++)P[W]=g.create()})();var L=m.SHA3=p.extend({cfg:p.cfg.extend({outputLength:512}),_doReset:function(){for(var W=this._state=[],N=0;N<25;N++)W[N]=new g.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(W,N){for(var M=this._state,B=this.blockSize/2,z=0;z<B;z++){var G=W[N+2*z],R=W[N+2*z+1];G=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var U=M[z];U.high^=R,U.low^=G}for(var K=0;K<24;K++){for(var ae=0;ae<5;ae++){for(var Q=0,se=0,ge=0;ge<5;ge++){var U=M[ae+5*ge];Q^=U.high,se^=U.low}var ue=P[ae];ue.high=Q,ue.low=se}for(var ae=0;ae<5;ae++)for(var Le=P[(ae+4)%5],Oe=P[(ae+1)%5],Ue=Oe.high,tt=Oe.low,Q=Le.high^(Ue<<1|tt>>>31),se=Le.low^(tt<<1|Ue>>>31),ge=0;ge<5;ge++){var U=M[ae+5*ge];U.high^=Q,U.low^=se}for(var Pe=1;Pe<25;Pe++){var Q,se,U=M[Pe],Ne=U.high,Be=U.low,X=k[Pe];X<32?(Q=Ne<<X|Be>>>32-X,se=Be<<X|Ne>>>32-X):(Q=Be<<X-32|Ne>>>64-X,se=Ne<<X-32|Be>>>64-X);var _e=P[T[Pe]];_e.high=Q,_e.low=se}var me=P[0],$=M[0];me.high=$.high,me.low=$.low;for(var ae=0;ae<5;ae++)for(var ge=0;ge<5;ge++){var Pe=ae+5*ge,U=M[Pe],oe=P[Pe],fe=P[(ae+1)%5+5*ge],ve=P[(ae+2)%5+5*ge];U.high=oe.high^~fe.high&ve.high,U.low=oe.low^~fe.low&ve.low}var U=M[0],Se=A[K];U.high^=Se.high,U.low^=Se.low}},_doFinalize:function(){var W=this._data,N=W.words;this._nDataBytes*8;var M=W.sigBytes*8,B=this.blockSize*32;N[M>>>5]|=1<<24-M%32,N[(n.ceil((M+1)/B)*B>>>5)-1]|=128,W.sigBytes=N.length*4,this._process();for(var z=this._state,G=this.cfg.outputLength/8,R=G/8,U=[],K=0;K<R;K++){var ae=z[K],Q=ae.high,se=ae.low;Q=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360,se=(se<<8|se>>>24)&16711935|(se<<24|se>>>8)&4278255360,U.push(se),U.push(Q)}return new l.init(U,G)},clone:function(){for(var W=p.clone.call(this),N=W._state=this._state.slice(0),M=0;M<25;M++)N[M]=N[M].clone();return W}});s.SHA3=p._createHelper(L),s.HmacSHA3=p._createHmacHelper(L)}(Math),i.SHA3})}(Zf)),Zf.exports}var Jf={exports:{}},l_;function wR(){return l_||(l_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=i,a=s.lib,l=a.WordArray,p=a.Hasher,f=s.algo,g=l.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),m=l.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),k=l.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),T=l.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),A=l.create([0,1518500249,1859775393,2400959708,2840853838]),P=l.create([1352829926,1548603684,1836072691,2053994217,0]),L=f.RIPEMD160=p.extend({_doReset:function(){this._hash=l.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(R,U){for(var K=0;K<16;K++){var ae=U+K,Q=R[ae];R[ae]=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360}var se=this._hash.words,ge=A.words,ue=P.words,Le=g.words,Oe=m.words,Ue=k.words,tt=T.words,Pe,Ne,Be,X,_e,me,$,oe,fe,ve;me=Pe=se[0],$=Ne=se[1],oe=Be=se[2],fe=X=se[3],ve=_e=se[4];for(var Se,K=0;K<80;K+=1)Se=Pe+R[U+Le[K]]|0,K<16?Se+=W(Ne,Be,X)+ge[0]:K<32?Se+=N(Ne,Be,X)+ge[1]:K<48?Se+=M(Ne,Be,X)+ge[2]:K<64?Se+=B(Ne,Be,X)+ge[3]:Se+=z(Ne,Be,X)+ge[4],Se=Se|0,Se=G(Se,Ue[K]),Se=Se+_e|0,Pe=_e,_e=X,X=G(Be,10),Be=Ne,Ne=Se,Se=me+R[U+Oe[K]]|0,K<16?Se+=z($,oe,fe)+ue[0]:K<32?Se+=B($,oe,fe)+ue[1]:K<48?Se+=M($,oe,fe)+ue[2]:K<64?Se+=N($,oe,fe)+ue[3]:Se+=W($,oe,fe)+ue[4],Se=Se|0,Se=G(Se,tt[K]),Se=Se+ve|0,me=ve,ve=fe,fe=G(oe,10),oe=$,$=Se;Se=se[1]+Be+fe|0,se[1]=se[2]+X+ve|0,se[2]=se[3]+_e+me|0,se[3]=se[4]+Pe+$|0,se[4]=se[0]+Ne+oe|0,se[0]=Se},_doFinalize:function(){var R=this._data,U=R.words,K=this._nDataBytes*8,ae=R.sigBytes*8;U[ae>>>5]|=128<<24-ae%32,U[(ae+64>>>9<<4)+14]=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360,R.sigBytes=(U.length+1)*4,this._process();for(var Q=this._hash,se=Q.words,ge=0;ge<5;ge++){var ue=se[ge];se[ge]=(ue<<8|ue>>>24)&16711935|(ue<<24|ue>>>8)&4278255360}return Q},clone:function(){var R=p.clone.call(this);return R._hash=this._hash.clone(),R}});function W(R,U,K){return R^U^K}function N(R,U,K){return R&U|~R&K}function M(R,U,K){return(R|~U)^K}function B(R,U,K){return R&K|U&~K}function z(R,U,K){return R^(U|~K)}function G(R,U){return R<<U|R>>>32-U}s.RIPEMD160=p._createHelper(L),s.HmacRIPEMD160=p._createHmacHelper(L)}(),i.RIPEMD160})}(Jf)),Jf.exports}var qf={exports:{}},h_;function hy(){return h_||(h_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){(function(){var n=i,s=n.lib,a=s.Base,l=n.enc,p=l.Utf8,f=n.algo;f.HMAC=a.extend({init:function(g,m){g=this._hasher=new g.init,typeof m=="string"&&(m=p.parse(m));var k=g.blockSize,T=k*4;m.sigBytes>T&&(m=g.finalize(m)),m.clamp();for(var A=this._oKey=m.clone(),P=this._iKey=m.clone(),L=A.words,W=P.words,N=0;N<k;N++)L[N]^=1549556828,W[N]^=909522486;A.sigBytes=P.sigBytes=T,this.reset()},reset:function(){var g=this._hasher;g.reset(),g.update(this._iKey)},update:function(g){return this._hasher.update(g),this},finalize:function(g){var m=this._hasher,k=m.finalize(g);m.reset();var T=m.finalize(this._oKey.clone().concat(k));return T}})})()})}(qf)),qf.exports}var ex={exports:{}},c_;function _R(){return c_||(c_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),ly(),hy())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.Base,l=s.WordArray,p=n.algo,f=p.SHA256,g=p.HMAC,m=p.PBKDF2=a.extend({cfg:a.extend({keySize:128/32,hasher:f,iterations:25e4}),init:function(k){this.cfg=this.cfg.extend(k)},compute:function(k,T){for(var A=this.cfg,P=g.create(A.hasher,k),L=l.create(),W=l.create([1]),N=L.words,M=W.words,B=A.keySize,z=A.iterations;N.length<B;){var G=P.update(T).finalize(W);P.reset();for(var R=G.words,U=R.length,K=G,ae=1;ae<z;ae++){K=P.finalize(K),P.reset();for(var Q=K.words,se=0;se<U;se++)R[se]^=Q[se]}L.concat(G),M[0]++}return L.sigBytes=B*4,L}});n.PBKDF2=function(k,T,A){return m.create(A).compute(k,T)}}(),i.PBKDF2})}(ex)),ex.exports}var tx={exports:{}},u_;function Sa(){return u_||(u_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),VT(),hy())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.Base,l=s.WordArray,p=n.algo,f=p.MD5,g=p.EvpKDF=a.extend({cfg:a.extend({keySize:128/32,hasher:f,iterations:1}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,k){for(var T,A=this.cfg,P=A.hasher.create(),L=l.create(),W=L.words,N=A.keySize,M=A.iterations;W.length<N;){T&&P.update(T),T=P.update(m).finalize(k),P.reset();for(var B=1;B<M;B++)T=P.finalize(T),P.reset();L.concat(T)}return L.sigBytes=N*4,L}});n.EvpKDF=function(m,k,T){return g.create(T).compute(m,k)}}(),i.EvpKDF})}(tx)),tx.exports}var ix={exports:{}},d_;function un(){return d_||(d_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),Sa())})(Dt,function(i){i.lib.Cipher||function(n){var s=i,a=s.lib,l=a.Base,p=a.WordArray,f=a.BufferedBlockAlgorithm,g=s.enc;g.Utf8;var m=g.Base64,k=s.algo,T=k.EvpKDF,A=a.Cipher=f.extend({cfg:l.extend(),createEncryptor:function(Q,se){return this.create(this._ENC_XFORM_MODE,Q,se)},createDecryptor:function(Q,se){return this.create(this._DEC_XFORM_MODE,Q,se)},init:function(Q,se,ge){this.cfg=this.cfg.extend(ge),this._xformMode=Q,this._key=se,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(Q){return this._append(Q),this._process()},finalize:function(Q){Q&&this._append(Q);var se=this._doFinalize();return se},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Q(se){return typeof se=="string"?ae:R}return function(se){return{encrypt:function(ge,ue,Le){return Q(ue).encrypt(se,ge,ue,Le)},decrypt:function(ge,ue,Le){return Q(ue).decrypt(se,ge,ue,Le)}}}}()});a.StreamCipher=A.extend({_doFinalize:function(){var Q=this._process(!0);return Q},blockSize:1});var P=s.mode={},L=a.BlockCipherMode=l.extend({createEncryptor:function(Q,se){return this.Encryptor.create(Q,se)},createDecryptor:function(Q,se){return this.Decryptor.create(Q,se)},init:function(Q,se){this._cipher=Q,this._iv=se}}),W=P.CBC=function(){var Q=L.extend();Q.Encryptor=Q.extend({processBlock:function(ge,ue){var Le=this._cipher,Oe=Le.blockSize;se.call(this,ge,ue,Oe),Le.encryptBlock(ge,ue),this._prevBlock=ge.slice(ue,ue+Oe)}}),Q.Decryptor=Q.extend({processBlock:function(ge,ue){var Le=this._cipher,Oe=Le.blockSize,Ue=ge.slice(ue,ue+Oe);Le.decryptBlock(ge,ue),se.call(this,ge,ue,Oe),this._prevBlock=Ue}});function se(ge,ue,Le){var Oe,Ue=this._iv;Ue?(Oe=Ue,this._iv=n):Oe=this._prevBlock;for(var tt=0;tt<Le;tt++)ge[ue+tt]^=Oe[tt]}return Q}(),N=s.pad={},M=N.Pkcs7={pad:function(Q,se){for(var ge=se*4,ue=ge-Q.sigBytes%ge,Le=ue<<24|ue<<16|ue<<8|ue,Oe=[],Ue=0;Ue<ue;Ue+=4)Oe.push(Le);var tt=p.create(Oe,ue);Q.concat(tt)},unpad:function(Q){var se=Q.words[Q.sigBytes-1>>>2]&255;Q.sigBytes-=se}};a.BlockCipher=A.extend({cfg:A.cfg.extend({mode:W,padding:M}),reset:function(){var Q;A.reset.call(this);var se=this.cfg,ge=se.iv,ue=se.mode;this._xformMode==this._ENC_XFORM_MODE?Q=ue.createEncryptor:(Q=ue.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Q?this._mode.init(this,ge&&ge.words):(this._mode=Q.call(ue,this,ge&&ge.words),this._mode.__creator=Q)},_doProcessBlock:function(Q,se){this._mode.processBlock(Q,se)},_doFinalize:function(){var Q,se=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(se.pad(this._data,this.blockSize),Q=this._process(!0)):(Q=this._process(!0),se.unpad(Q)),Q},blockSize:128/32});var B=a.CipherParams=l.extend({init:function(Q){this.mixIn(Q)},toString:function(Q){return(Q||this.formatter).stringify(this)}}),z=s.format={},G=z.OpenSSL={stringify:function(Q){var se,ge=Q.ciphertext,ue=Q.salt;return ue?se=p.create([1398893684,1701076831]).concat(ue).concat(ge):se=ge,se.toString(m)},parse:function(Q){var se,ge=m.parse(Q),ue=ge.words;return ue[0]==1398893684&&ue[1]==1701076831&&(se=p.create(ue.slice(2,4)),ue.splice(0,4),ge.sigBytes-=16),B.create({ciphertext:ge,salt:se})}},R=a.SerializableCipher=l.extend({cfg:l.extend({format:G}),encrypt:function(Q,se,ge,ue){ue=this.cfg.extend(ue);var Le=Q.createEncryptor(ge,ue),Oe=Le.finalize(se),Ue=Le.cfg;return B.create({ciphertext:Oe,key:ge,iv:Ue.iv,algorithm:Q,mode:Ue.mode,padding:Ue.padding,blockSize:Q.blockSize,formatter:ue.format})},decrypt:function(Q,se,ge,ue){ue=this.cfg.extend(ue),se=this._parse(se,ue.format);var Le=Q.createDecryptor(ge,ue).finalize(se.ciphertext);return Le},_parse:function(Q,se){return typeof Q=="string"?se.parse(Q,this):Q}}),U=s.kdf={},K=U.OpenSSL={execute:function(Q,se,ge,ue,Le){if(ue||(ue=p.random(64/8)),Le)var Oe=T.create({keySize:se+ge,hasher:Le}).compute(Q,ue);else var Oe=T.create({keySize:se+ge}).compute(Q,ue);var Ue=p.create(Oe.words.slice(se),ge*4);return Oe.sigBytes=se*4,B.create({key:Oe,iv:Ue,salt:ue})}},ae=a.PasswordBasedCipher=R.extend({cfg:R.cfg.extend({kdf:K}),encrypt:function(Q,se,ge,ue){ue=this.cfg.extend(ue);var Le=ue.kdf.execute(ge,Q.keySize,Q.ivSize,ue.salt,ue.hasher);ue.iv=Le.iv;var Oe=R.encrypt.call(this,Q,se,Le.key,ue);return Oe.mixIn(Le),Oe},decrypt:function(Q,se,ge,ue){ue=this.cfg.extend(ue),se=this._parse(se,ue.format);var Le=ue.kdf.execute(ge,Q.keySize,Q.ivSize,se.salt,ue.hasher);ue.iv=Le.iv;var Oe=R.decrypt.call(this,Q,se,Le.key,ue);return Oe}})}()})}(ix)),ix.exports}var nx={exports:{}},p_;function CR(){return p_||(p_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){return i.mode.CFB=function(){var n=i.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(a,l){var p=this._cipher,f=p.blockSize;s.call(this,a,l,f,p),this._prevBlock=a.slice(l,l+f)}}),n.Decryptor=n.extend({processBlock:function(a,l){var p=this._cipher,f=p.blockSize,g=a.slice(l,l+f);s.call(this,a,l,f,p),this._prevBlock=g}});function s(a,l,p,f){var g,m=this._iv;m?(g=m.slice(0),this._iv=void 0):g=this._prevBlock,f.encryptBlock(g,0);for(var k=0;k<p;k++)a[l+k]^=g[k]}return n}(),i.mode.CFB})}(nx)),nx.exports}var sx={exports:{}},f_;function SR(){return f_||(f_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){return i.mode.CTR=function(){var n=i.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(a,l){var p=this._cipher,f=p.blockSize,g=this._iv,m=this._counter;g&&(m=this._counter=g.slice(0),this._iv=void 0);var k=m.slice(0);p.encryptBlock(k,0),m[f-1]=m[f-1]+1|0;for(var T=0;T<f;T++)a[l+T]^=k[T]}});return n.Decryptor=s,n}(),i.mode.CTR})}(sx)),sx.exports}var rx={exports:{}},x_;function kR(){return x_||(x_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return i.mode.CTRGladman=function(){var n=i.lib.BlockCipherMode.extend();function s(p){if((p>>24&255)===255){var f=p>>16&255,g=p>>8&255,m=p&255;f===255?(f=0,g===255?(g=0,m===255?m=0:++m):++g):++f,p=0,p+=f<<16,p+=g<<8,p+=m}else p+=1<<24;return p}function a(p){return(p[0]=s(p[0]))===0&&(p[1]=s(p[1])),p}var l=n.Encryptor=n.extend({processBlock:function(p,f){var g=this._cipher,m=g.blockSize,k=this._iv,T=this._counter;k&&(T=this._counter=k.slice(0),this._iv=void 0),a(T);var A=T.slice(0);g.encryptBlock(A,0);for(var P=0;P<m;P++)p[f+P]^=A[P]}});return n.Decryptor=l,n}(),i.mode.CTRGladman})}(rx)),rx.exports}var ax={exports:{}},m_;function TR(){return m_||(m_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){return i.mode.OFB=function(){var n=i.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(a,l){var p=this._cipher,f=p.blockSize,g=this._iv,m=this._keystream;g&&(m=this._keystream=g.slice(0),this._iv=void 0),p.encryptBlock(m,0);for(var k=0;k<f;k++)a[l+k]^=m[k]}});return n.Decryptor=s,n}(),i.mode.OFB})}(ax)),ax.exports}var ox={exports:{}},g_;function MR(){return g_||(g_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){return i.mode.ECB=function(){var n=i.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,a){this._cipher.encryptBlock(s,a)}}),n.Decryptor=n.extend({processBlock:function(s,a){this._cipher.decryptBlock(s,a)}}),n}(),i.mode.ECB})}(ox)),ox.exports}var lx={exports:{}},y_;function PR(){return y_||(y_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){return i.pad.AnsiX923={pad:function(n,s){var a=n.sigBytes,l=s*4,p=l-a%l,f=a+p-1;n.clamp(),n.words[f>>>2]|=p<<24-f%4*8,n.sigBytes+=p},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},i.pad.Ansix923})}(lx)),lx.exports}var hx={exports:{}},v_;function ER(){return v_||(v_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){return i.pad.Iso10126={pad:function(n,s){var a=s*4,l=a-n.sigBytes%a;n.concat(i.lib.WordArray.random(l-1)).concat(i.lib.WordArray.create([l<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},i.pad.Iso10126})}(hx)),hx.exports}var cx={exports:{}},b_;function AR(){return b_||(b_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){return i.pad.Iso97971={pad:function(n,s){n.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(n,s)},unpad:function(n){i.pad.ZeroPadding.unpad(n),n.sigBytes--}},i.pad.Iso97971})}(cx)),cx.exports}var ux={exports:{}},w_;function DR(){return w_||(w_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){return i.pad.ZeroPadding={pad:function(n,s){var a=s*4;n.clamp(),n.sigBytes+=a-(n.sigBytes%a||a)},unpad:function(n){for(var s=n.words,a=n.sigBytes-1,a=n.sigBytes-1;a>=0;a--)if(s[a>>>2]>>>24-a%4*8&255){n.sigBytes=a+1;break}}},i.pad.ZeroPadding})}(ux)),ux.exports}var dx={exports:{}},__;function IR(){return __||(__=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){return i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding})}(dx)),dx.exports}var px={exports:{}},C_;function FR(){return C_||(C_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),un())})(Dt,function(i){return function(n){var s=i,a=s.lib,l=a.CipherParams,p=s.enc,f=p.Hex,g=s.format;g.Hex={stringify:function(m){return m.ciphertext.toString(f)},parse:function(m){var k=f.parse(m);return l.create({ciphertext:k})}}}(),i.format.Hex})}(px)),px.exports}var fx={exports:{}},S_;function BR(){return S_||(S_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),go(),yo(),Sa(),un())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.BlockCipher,l=n.algo,p=[],f=[],g=[],m=[],k=[],T=[],A=[],P=[],L=[],W=[];(function(){for(var B=[],z=0;z<256;z++)z<128?B[z]=z<<1:B[z]=z<<1^283;for(var G=0,R=0,z=0;z<256;z++){var U=R^R<<1^R<<2^R<<3^R<<4;U=U>>>8^U&255^99,p[G]=U,f[U]=G;var K=B[G],ae=B[K],Q=B[ae],se=B[U]*257^U*16843008;g[G]=se<<24|se>>>8,m[G]=se<<16|se>>>16,k[G]=se<<8|se>>>24,T[G]=se;var se=Q*16843009^ae*65537^K*257^G*16843008;A[U]=se<<24|se>>>8,P[U]=se<<16|se>>>16,L[U]=se<<8|se>>>24,W[U]=se,G?(G=K^B[B[B[Q^K]]],R^=B[B[R]]):G=R=1}})();var N=[0,1,2,4,8,16,32,64,128,27,54],M=l.AES=a.extend({_doReset:function(){var B;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var z=this._keyPriorReset=this._key,G=z.words,R=z.sigBytes/4,U=this._nRounds=R+6,K=(U+1)*4,ae=this._keySchedule=[],Q=0;Q<K;Q++)Q<R?ae[Q]=G[Q]:(B=ae[Q-1],Q%R?R>6&&Q%R==4&&(B=p[B>>>24]<<24|p[B>>>16&255]<<16|p[B>>>8&255]<<8|p[B&255]):(B=B<<8|B>>>24,B=p[B>>>24]<<24|p[B>>>16&255]<<16|p[B>>>8&255]<<8|p[B&255],B^=N[Q/R|0]<<24),ae[Q]=ae[Q-R]^B);for(var se=this._invKeySchedule=[],ge=0;ge<K;ge++){var Q=K-ge;if(ge%4)var B=ae[Q];else var B=ae[Q-4];ge<4||Q<=4?se[ge]=B:se[ge]=A[p[B>>>24]]^P[p[B>>>16&255]]^L[p[B>>>8&255]]^W[p[B&255]]}}},encryptBlock:function(B,z){this._doCryptBlock(B,z,this._keySchedule,g,m,k,T,p)},decryptBlock:function(B,z){var G=B[z+1];B[z+1]=B[z+3],B[z+3]=G,this._doCryptBlock(B,z,this._invKeySchedule,A,P,L,W,f);var G=B[z+1];B[z+1]=B[z+3],B[z+3]=G},_doCryptBlock:function(B,z,G,R,U,K,ae,Q){for(var se=this._nRounds,ge=B[z]^G[0],ue=B[z+1]^G[1],Le=B[z+2]^G[2],Oe=B[z+3]^G[3],Ue=4,tt=1;tt<se;tt++){var Pe=R[ge>>>24]^U[ue>>>16&255]^K[Le>>>8&255]^ae[Oe&255]^G[Ue++],Ne=R[ue>>>24]^U[Le>>>16&255]^K[Oe>>>8&255]^ae[ge&255]^G[Ue++],Be=R[Le>>>24]^U[Oe>>>16&255]^K[ge>>>8&255]^ae[ue&255]^G[Ue++],X=R[Oe>>>24]^U[ge>>>16&255]^K[ue>>>8&255]^ae[Le&255]^G[Ue++];ge=Pe,ue=Ne,Le=Be,Oe=X}var Pe=(Q[ge>>>24]<<24|Q[ue>>>16&255]<<16|Q[Le>>>8&255]<<8|Q[Oe&255])^G[Ue++],Ne=(Q[ue>>>24]<<24|Q[Le>>>16&255]<<16|Q[Oe>>>8&255]<<8|Q[ge&255])^G[Ue++],Be=(Q[Le>>>24]<<24|Q[Oe>>>16&255]<<16|Q[ge>>>8&255]<<8|Q[ue&255])^G[Ue++],X=(Q[Oe>>>24]<<24|Q[ge>>>16&255]<<16|Q[ue>>>8&255]<<8|Q[Le&255])^G[Ue++];B[z]=Pe,B[z+1]=Ne,B[z+2]=Be,B[z+3]=X},keySize:256/32});n.AES=a._createHelper(M)}(),i.AES})}(fx)),fx.exports}var xx={exports:{}},k_;function LR(){return k_||(k_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),go(),yo(),Sa(),un())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=s.BlockCipher,p=n.algo,f=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],m=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],k=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],T=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],A=p.DES=l.extend({_doReset:function(){for(var N=this._key,M=N.words,B=[],z=0;z<56;z++){var G=f[z]-1;B[z]=M[G>>>5]>>>31-G%32&1}for(var R=this._subKeys=[],U=0;U<16;U++){for(var K=R[U]=[],ae=m[U],z=0;z<24;z++)K[z/6|0]|=B[(g[z]-1+ae)%28]<<31-z%6,K[4+(z/6|0)]|=B[28+(g[z+24]-1+ae)%28]<<31-z%6;K[0]=K[0]<<1|K[0]>>>31;for(var z=1;z<7;z++)K[z]=K[z]>>>(z-1)*4+3;K[7]=K[7]<<5|K[7]>>>27}for(var Q=this._invSubKeys=[],z=0;z<16;z++)Q[z]=R[15-z]},encryptBlock:function(N,M){this._doCryptBlock(N,M,this._subKeys)},decryptBlock:function(N,M){this._doCryptBlock(N,M,this._invSubKeys)},_doCryptBlock:function(N,M,B){this._lBlock=N[M],this._rBlock=N[M+1],P.call(this,4,252645135),P.call(this,16,65535),L.call(this,2,858993459),L.call(this,8,16711935),P.call(this,1,1431655765);for(var z=0;z<16;z++){for(var G=B[z],R=this._lBlock,U=this._rBlock,K=0,ae=0;ae<8;ae++)K|=k[ae][((U^G[ae])&T[ae])>>>0];this._lBlock=U,this._rBlock=R^K}var Q=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Q,P.call(this,1,1431655765),L.call(this,8,16711935),L.call(this,2,858993459),P.call(this,16,65535),P.call(this,4,252645135),N[M]=this._lBlock,N[M+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function P(N,M){var B=(this._lBlock>>>N^this._rBlock)&M;this._rBlock^=B,this._lBlock^=B<<N}function L(N,M){var B=(this._rBlock>>>N^this._lBlock)&M;this._lBlock^=B,this._rBlock^=B<<N}n.DES=l._createHelper(A);var W=p.TripleDES=l.extend({_doReset:function(){var N=this._key,M=N.words;if(M.length!==2&&M.length!==4&&M.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var B=M.slice(0,2),z=M.length<4?M.slice(0,2):M.slice(2,4),G=M.length<6?M.slice(0,2):M.slice(4,6);this._des1=A.createEncryptor(a.create(B)),this._des2=A.createEncryptor(a.create(z)),this._des3=A.createEncryptor(a.create(G))},encryptBlock:function(N,M){this._des1.encryptBlock(N,M),this._des2.decryptBlock(N,M),this._des3.encryptBlock(N,M)},decryptBlock:function(N,M){this._des3.decryptBlock(N,M),this._des2.encryptBlock(N,M),this._des1.decryptBlock(N,M)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=l._createHelper(W)}(),i.TripleDES})}(xx)),xx.exports}var mx={exports:{}},T_;function NR(){return T_||(T_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),go(),yo(),Sa(),un())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.StreamCipher,l=n.algo,p=l.RC4=a.extend({_doReset:function(){for(var m=this._key,k=m.words,T=m.sigBytes,A=this._S=[],P=0;P<256;P++)A[P]=P;for(var P=0,L=0;P<256;P++){var W=P%T,N=k[W>>>2]>>>24-W%4*8&255;L=(L+A[P]+N)%256;var M=A[P];A[P]=A[L],A[L]=M}this._i=this._j=0},_doProcessBlock:function(m,k){m[k]^=f.call(this)},keySize:256/32,ivSize:0});function f(){for(var m=this._S,k=this._i,T=this._j,A=0,P=0;P<4;P++){k=(k+1)%256,T=(T+m[k])%256;var L=m[k];m[k]=m[T],m[T]=L,A|=m[(m[k]+m[T])%256]<<24-P*8}return this._i=k,this._j=T,A}n.RC4=a._createHelper(p);var g=l.RC4Drop=p.extend({cfg:p.cfg.extend({drop:192}),_doReset:function(){p._doReset.call(this);for(var m=this.cfg.drop;m>0;m--)f.call(this)}});n.RC4Drop=a._createHelper(g)}(),i.RC4})}(mx)),mx.exports}var gx={exports:{}},M_;function RR(){return M_||(M_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),go(),yo(),Sa(),un())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.StreamCipher,l=n.algo,p=[],f=[],g=[],m=l.Rabbit=a.extend({_doReset:function(){for(var T=this._key.words,A=this.cfg.iv,P=0;P<4;P++)T[P]=(T[P]<<8|T[P]>>>24)&16711935|(T[P]<<24|T[P]>>>8)&4278255360;var L=this._X=[T[0],T[3]<<16|T[2]>>>16,T[1],T[0]<<16|T[3]>>>16,T[2],T[1]<<16|T[0]>>>16,T[3],T[2]<<16|T[1]>>>16],W=this._C=[T[2]<<16|T[2]>>>16,T[0]&4294901760|T[1]&65535,T[3]<<16|T[3]>>>16,T[1]&4294901760|T[2]&65535,T[0]<<16|T[0]>>>16,T[2]&4294901760|T[3]&65535,T[1]<<16|T[1]>>>16,T[3]&4294901760|T[0]&65535];this._b=0;for(var P=0;P<4;P++)k.call(this);for(var P=0;P<8;P++)W[P]^=L[P+4&7];if(A){var N=A.words,M=N[0],B=N[1],z=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,G=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,R=z>>>16|G&4294901760,U=G<<16|z&65535;W[0]^=z,W[1]^=R,W[2]^=G,W[3]^=U,W[4]^=z,W[5]^=R,W[6]^=G,W[7]^=U;for(var P=0;P<4;P++)k.call(this)}},_doProcessBlock:function(T,A){var P=this._X;k.call(this),p[0]=P[0]^P[5]>>>16^P[3]<<16,p[1]=P[2]^P[7]>>>16^P[5]<<16,p[2]=P[4]^P[1]>>>16^P[7]<<16,p[3]=P[6]^P[3]>>>16^P[1]<<16;for(var L=0;L<4;L++)p[L]=(p[L]<<8|p[L]>>>24)&16711935|(p[L]<<24|p[L]>>>8)&4278255360,T[A+L]^=p[L]},blockSize:128/32,ivSize:64/32});function k(){for(var T=this._X,A=this._C,P=0;P<8;P++)f[P]=A[P];A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<f[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<f[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<f[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<f[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<f[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<f[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<f[6]>>>0?1:0)|0,this._b=A[7]>>>0<f[7]>>>0?1:0;for(var P=0;P<8;P++){var L=T[P]+A[P],W=L&65535,N=L>>>16,M=((W*W>>>17)+W*N>>>15)+N*N,B=((L&4294901760)*L|0)+((L&65535)*L|0);g[P]=M^B}T[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,T[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,T[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,T[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,T[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,T[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,T[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,T[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}n.Rabbit=a._createHelper(m)}(),i.Rabbit})}(gx)),gx.exports}var yx={exports:{}},P_;function VR(){return P_||(P_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),go(),yo(),Sa(),un())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.StreamCipher,l=n.algo,p=[],f=[],g=[],m=l.RabbitLegacy=a.extend({_doReset:function(){var T=this._key.words,A=this.cfg.iv,P=this._X=[T[0],T[3]<<16|T[2]>>>16,T[1],T[0]<<16|T[3]>>>16,T[2],T[1]<<16|T[0]>>>16,T[3],T[2]<<16|T[1]>>>16],L=this._C=[T[2]<<16|T[2]>>>16,T[0]&4294901760|T[1]&65535,T[3]<<16|T[3]>>>16,T[1]&4294901760|T[2]&65535,T[0]<<16|T[0]>>>16,T[2]&4294901760|T[3]&65535,T[1]<<16|T[1]>>>16,T[3]&4294901760|T[0]&65535];this._b=0;for(var W=0;W<4;W++)k.call(this);for(var W=0;W<8;W++)L[W]^=P[W+4&7];if(A){var N=A.words,M=N[0],B=N[1],z=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,G=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,R=z>>>16|G&4294901760,U=G<<16|z&65535;L[0]^=z,L[1]^=R,L[2]^=G,L[3]^=U,L[4]^=z,L[5]^=R,L[6]^=G,L[7]^=U;for(var W=0;W<4;W++)k.call(this)}},_doProcessBlock:function(T,A){var P=this._X;k.call(this),p[0]=P[0]^P[5]>>>16^P[3]<<16,p[1]=P[2]^P[7]>>>16^P[5]<<16,p[2]=P[4]^P[1]>>>16^P[7]<<16,p[3]=P[6]^P[3]>>>16^P[1]<<16;for(var L=0;L<4;L++)p[L]=(p[L]<<8|p[L]>>>24)&16711935|(p[L]<<24|p[L]>>>8)&4278255360,T[A+L]^=p[L]},blockSize:128/32,ivSize:64/32});function k(){for(var T=this._X,A=this._C,P=0;P<8;P++)f[P]=A[P];A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<f[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<f[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<f[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<f[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<f[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<f[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<f[6]>>>0?1:0)|0,this._b=A[7]>>>0<f[7]>>>0?1:0;for(var P=0;P<8;P++){var L=T[P]+A[P],W=L&65535,N=L>>>16,M=((W*W>>>17)+W*N>>>15)+N*N,B=((L&4294901760)*L|0)+((L&65535)*L|0);g[P]=M^B}T[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,T[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,T[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,T[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,T[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,T[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,T[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,T[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}n.RabbitLegacy=a._createHelper(m)}(),i.RabbitLegacy})}(yx)),yx.exports}var vx={exports:{}},E_;function OR(){return E_||(E_=1,function(t,e){(function(i,n,s){t.exports=n(jt(),go(),yo(),Sa(),un())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.BlockCipher,l=n.algo;const p=16,f=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],g=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var m={pbox:[],sbox:[]};function k(W,N){let M=N>>24&255,B=N>>16&255,z=N>>8&255,G=N&255,R=W.sbox[0][M]+W.sbox[1][B];return R=R^W.sbox[2][z],R=R+W.sbox[3][G],R}function T(W,N,M){let B=N,z=M,G;for(let R=0;R<p;++R)B=B^W.pbox[R],z=k(W,B)^z,G=B,B=z,z=G;return G=B,B=z,z=G,z=z^W.pbox[p],B=B^W.pbox[p+1],{left:B,right:z}}function A(W,N,M){let B=N,z=M,G;for(let R=p+1;R>1;--R)B=B^W.pbox[R],z=k(W,B)^z,G=B,B=z,z=G;return G=B,B=z,z=G,z=z^W.pbox[1],B=B^W.pbox[0],{left:B,right:z}}function P(W,N,M){for(let U=0;U<4;U++){W.sbox[U]=[];for(let K=0;K<256;K++)W.sbox[U][K]=g[U][K]}let B=0;for(let U=0;U<p+2;U++)W.pbox[U]=f[U]^N[B],B++,B>=M&&(B=0);let z=0,G=0,R=0;for(let U=0;U<p+2;U+=2)R=T(W,z,G),z=R.left,G=R.right,W.pbox[U]=z,W.pbox[U+1]=G;for(let U=0;U<4;U++)for(let K=0;K<256;K+=2)R=T(W,z,G),z=R.left,G=R.right,W.sbox[U][K]=z,W.sbox[U][K+1]=G;return!0}var L=l.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var W=this._keyPriorReset=this._key,N=W.words,M=W.sigBytes/4;P(m,N,M)}},encryptBlock:function(W,N){var M=T(m,W[N],W[N+1]);W[N]=M.left,W[N+1]=M.right},decryptBlock:function(W,N){var M=A(m,W[N],W[N+1]);W[N]=M.left,W[N+1]=M.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=a._createHelper(L)}(),i.Blowfish})}(vx)),vx.exports}(function(t,e){(function(i,n,s){t.exports=n(jt(),Bp(),xR(),mR(),go(),gR(),yo(),VT(),ly(),yR(),OT(),vR(),bR(),wR(),hy(),_R(),Sa(),un(),CR(),SR(),kR(),TR(),MR(),PR(),ER(),AR(),DR(),IR(),FR(),BR(),LR(),NR(),RR(),VR(),OR())})(Dt,function(i){return i})})(RT);var jR=RT.exports;const v1=b1(jR);function A_(t,e,i){const n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);let s="expires="+n.toUTCString();e=v1.AES.encrypt(e,"@#$ *IlO0Oo0_-"),document.cookie=t+"="+e+"; "+s+"; SameSite=None; Secure; path=/"}function Il(t){let e=t+"=",i=document.cookie.split(";");for(let n=0;n<i.length;n++){let s=i[n];for(;s.charAt(0)===" ";)s=s.substring(1);if(s.indexOf(e)===0){let a=s.substring(e.length,s.length);return a=v1.AES.decrypt(a,"@#$ *IlO0Oo0_-").toString(v1.enc.Utf8),a}}return""}const WR=()=>{let[t,e]=q.useState(""),[i,n]=q.useState(""),[s,a]=q.useState("");const l=p=>{if(p.preventDefault(),t===""||i===""){a("Can't login with empty credentials!");return}Ip("users",t,i).then(f=>{f[0]?(A_("email",t,30),A_("pswd",i,30),window.location.reload()):a("Wrong Credentials!")})};return _.jsx("div",{className:"max-w-[500px] mx-auto min-h-screen p-20 flex justify-center items-center",children:_.jsxs("form",{className:"w-full",children:[_.jsx("div",{className:" pb-10",children:_.jsx("img",{src:BT,alt:"",className:"w-[250px] mx-auto"})}),_.jsxs("div",{className:"loginDivCont",children:[_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("label",{children:"Employee ID"}),_.jsx("input",{type:"text",placeholder:"Your Email",className:"p-2 rounded-full bg-gray-200 outline-none focus:outline-none border border-gray-400",value:t,onChange:p=>e(p.target.value),required:!0})," "]}),_.jsx("br",{}),_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("label",{children:"Password"}),_.jsx("input",{placeholder:"Your Password",type:"password",className:"p-2 rounded-full bg-gray-200 outline-none focus:outline-none border border-gray-400",value:i,onChange:p=>n(p.target.value),required:!0})]}),_.jsx("br",{}),_.jsx("button",{className:"btn-primary mx-auto",onClick:l,children:"LOG IN"}),_.jsx("p",{className:"loginMsg",children:s})]})]})})};function zR(){let[t,e]=q.useState("unknown"),[i,n]=q.useState(_.jsx(_.Fragment,{}));return q.useEffect(()=>{Ip("users",Il("email"),Il("pswd")).then(s=>{s[0]?(e("is_user"),console.log("response[0]",s)):e("not_user")})},[]),q.useEffect(()=>{t==="unknown"?n(_.jsx("div",{className:"min-h-screen flex justify-center items-center",children:_.jsx(ay,{height:"80",width:"80",color:"#4fa94d",ariaLabel:"triangle-loading",visible:!0})})):t==="not_user"&&n(_.jsx(WR,{}))},[t]),console.log("isUser",t),t!=="is_user"?_.jsx(_.Fragment,{children:i}):_.jsxs("div",{className:"flex gap-6 flex-col md:flex-row",children:[_.jsx(lR,{}),_.jsx("div",{className:"container mx-auto w-full p-4",children:_.jsx(LP,{})})]})}function jT(t){const e=new Date(t*1e3),i={year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0};return e.toLocaleString("en-US",i)}function $R({ReportData:t}){return _.jsxs("div",{className:"border border-gray-600 rounded-t-lg",children:[_.jsxs("div",{className:"border flex gap-4 items-center justify-between p-4 bg-primary text-white rounded-t-lg",children:[_.jsx("p",{className:"w-full",children:"ID"}),_.jsx("p",{className:"w-full",children:"Machine Number"}),_.jsx("p",{className:"w-full",children:"Tared On"})]}),t.map((e,i)=>_.jsxs("div",{className:"border border-gray-600 flex gap-4 items-center justify-between p-4",children:[_.jsx("p",{className:"w-full",children:i+1}),_.jsxs("p",{className:"w-full",children:["FM ",e==null?void 0:e.machine_no]}),_.jsx("p",{className:"w-full",children:jT(e==null?void 0:e.unix_time)})]},e.id))]})}function HR({coilWeight:t,ReportData:e,handleWeightChange:i,handleUpdate:n}){return _.jsxs("div",{className:"border border-gray-600 rounded-t-lg",children:[_.jsxs("div",{className:"border flex gap-4 items-center justify-between p-4 bg-primary text-white rounded-t-lg",children:[_.jsx("p",{className:"w-full",children:"ID"}),_.jsx("p",{className:"w-full",children:"Machine Number"}),_.jsx("p",{className:"w-full",children:"Changed On"}),_.jsx("p",{className:"w-full",children:"Coil Weight"}),_.jsx("p",{className:"w-full",children:"Coil Weight"})]}),e.map((s,a)=>_.jsxs("div",{className:"border border-gray-600 flex gap-4 items-center justify-between p-4",children:[_.jsx("p",{className:"w-full",children:a+1}),_.jsxs("p",{className:"w-full",children:["FM ",s==null?void 0:s.machine_no]}),_.jsx("p",{className:"w-full",children:jT(s==null?void 0:s.unix_time)}),_.jsx("div",{className:"w-full",children:_.jsx("input",{className:" border px-4 py-2 rounded-md border-gray-500 outline-none focus:outline-none",type:"text",placeholder:"Enter coil weight",value:t[s.id]||"",onChange:l=>i(s.id,l.target.value)})}),_.jsx("p",{className:"w-full",children:_.jsx("button",{onClick:l=>n(l,s.id),className:"bg-primary px-4 py-2 rounded-md text-white",children:"Update"})})]},s.id))]})}function YR(){let[t,e]=q.useState([]),[i,n]=q.useState(!0),[s,a]=q.useState(!1),[l,p]=q.useState({});q.useEffect(()=>{a(!1);const m=ei(pt,i?"tareUpdates":"coilChangeUpdate"),k=Qn(m,Vs("unix_time","desc"),or(50));Jc(k,T=>{let A=[];T.forEach(P=>{A.push({id:P.id,...P.data()}),i||p(L=>({...L,[P.id]:P.data().weight}))}),e(A),a(!0)})},[i]);const f=async(m,k)=>{const T=Mi(pt,"coilChangeUpdate",k),A=l[k];if(console.log(k,A),A)try{m.target.innerText="wait...",await D2(T,{weight:parseFloat(A)}),m.target.innerText="Updated"}catch{m.target.innerText="error!"}else m.target.innerText="Invalid!";setTimeout(()=>{m.target.innerText="Update"},1500)},g=(m,k)=>{p(T=>({...T,[m]:k}))};return _.jsxs("div",{children:[_.jsxs("div",{className:"flex  flex-col gap-10 pb-6",children:[_.jsx("h2",{className:"text-4xl font-sans font-medium",children:"Tare and Coil Changing Updates"}),_.jsxs("div",{className:"flex gap-8 items-center text-white",children:[_.jsx("button",{className:`px-6 py-2 rounded-md ${i?"bg-primary":"text-black bg-primary/20"}`,onClick:()=>n(!0),children:"Tare Updates"}),_.jsx("button",{className:`px-6 py-2 rounded-md ${i?"text-black bg-primary/20":"bg-primary"}`,onClick:()=>n(!1),children:"Coil Changing Updates"})]})]}),i?s&&_.jsx($R,{ReportData:t}):s&&_.jsx("div",{children:_.jsx(HR,{ReportData:t,handleUpdate:f,handleWeightChange:g,coilWeight:l})})]})}const XR="/assets/realtime_reports-CvrCL2Xo.svg",UR="/assets/daily_report-ChCnQ_ll.svg",GR="/assets/Weekly_Report-Cg7tGW6d.svg",KR="/assets/Monthly_Report-DcZqTp8z.svg",QR="/assets/Quarterly_Report-B3UWh9YE.svg",ZR="/assets/Yearly_Report-Dkqe5c6n.svg",JR="/assets/Machine_Efficiency-DTJmyKtf.svg";function qR(){return _.jsxs("div",{className:"py-4",children:[_.jsx("h2",{className:"text-3xl py-10 font-bold ",children:"Reports"}),_.jsxs("div",{className:"grid grid-cols1 md:grid-cols-4 gap-x-10 gap-y-20",children:[_.jsx(pr,{to:"/reports/realtime-reports",children:_.jsxs("div",{className:"rounded-lg shadow-xl cursor-pointer px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[_.jsx("img",{src:XR,alt:"",className:"h-[100px] w-auto"}),_.jsx("p",{className:"text-2xl",children:"Realtime Report "})]})}),_.jsx(pr,{to:"/reports/daily-reports",children:_.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[_.jsx("img",{src:UR,alt:"",className:"h-[100px] w-auto"}),_.jsx("p",{className:"text-2xl",children:"Daily Report "})]})}),_.jsx(pr,{to:"/reports/weekly-reports",children:_.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[_.jsx("img",{src:GR,alt:"",className:"h-[100px] w-auto"}),_.jsx("p",{className:"text-2xl",children:"Weekly Report "})]})}),_.jsx(pr,{to:"/reports/monthly-reports",children:_.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[_.jsx("img",{src:KR,alt:"",className:"h-[100px] w-auto"}),_.jsx("p",{className:"text-2xl",children:"Monthly Report "})]})}),_.jsx(pr,{to:"/reports/quarterly-reports",children:_.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[_.jsx("img",{src:QR,alt:"",className:"h-[100px] w-auto"}),_.jsx("p",{className:"text-2xl",children:"Quarterly Report "})]})}),_.jsx(pr,{to:"/reports/yearly-reports",children:_.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[_.jsx("img",{src:ZR,alt:"",className:"h-[100px] w-auto"}),_.jsx("p",{className:"text-2xl",children:"Yearly Report "})]})}),_.jsx(pr,{to:"/reports/machine-efficiency",children:_.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[_.jsx("img",{src:JR,alt:"",className:"h-[100px] w-auto"}),_.jsx("p",{className:"text-2xl",children:"Machine Efficiency "})]})})]})]})}function eV({ReportData:t,startIndex:e}){return _.jsx(_.Fragment,{children:_.jsx("div",{className:"w-full relative overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:_.jsxs("tr",{className:" rounded-tl-lg",children:[_.jsx("th",{className:"border border-black p-2",children:"ID"}),_.jsx("th",{className:"border border-black p-2",children:"Machine Number"}),_.jsx("th",{className:"border border-black p-2",children:"Product Type"}),_.jsx("th",{className:"border border-black p-2",children:"Thickness"}),_.jsx("th",{className:"border border-black p-2",children:"Product Count"}),_.jsx("th",{className:"border border-black p-2",children:"Total weight"}),_.jsx("th",{className:"border border-black p-2",children:"Shift"}),_.jsx("th",{className:"border border-black p-2",children:"Last Production Time"})]})}),_.jsx("tbody",{children:t.map((i,n)=>_.jsxs("tr",{className:` ${(i==null?void 0:i.status)=="new"?"bg-green-100":""}`,children:[_.jsx("td",{class:"border border-black p-4 text-center",children:n+1+parseInt(e)}),_.jsx("td",{class:"border border-black p-4 text-center",children:i==null?void 0:i.machine_no}),_.jsx("td",{class:"border border-black p-4 text-center",children:i==null?void 0:i.product_type}),_.jsx("td",{class:"border border-black p-4 text-center",children:i==null?void 0:i.thickness}),_.jsxs("td",{class:"border border-black p-4 text-center",children:[i==null?void 0:i.count," "]}),_.jsxs("td",{class:"border border-black p-4 text-center",children:[i==null?void 0:i.weight," KG"]}),_.jsx("td",{class:"border border-black p-4 text-center",children:i==null?void 0:i.shift}),_.jsxs("td",{className:"border border-black p-4 text-center",children:[i.date," ",`${i.time.toString().slice(0,2)}:${i.time.toString().slice(2,4)}:${i.time.toString().slice(4,6)}`]})]},i.id))})]})})})}function tV(){let[t,e]=q.useState([]),[i,n]=q.useState(null),[s,a]=q.useState(0),[l,p]=q.useState(0);const f=30,g="machines";q.useEffect(()=>{const A=ei(pt,g),P=Qn(A,Vs("unix_time","desc"),or(f));m(P,0)},[]);const m=(A,P)=>{Jc(A,L=>{e(W=>{let N=[];return L.forEach(M=>{const B={id:M==null?void 0:M.id,...M==null?void 0:M.data()},z=W.some(G=>G.id==B.id);B.status=(W==null?void 0:W.length)===0||z?"old":"new",N.push(B)}),N.length>0&&(n(L),p(N.length),a(M=>M+P)),N})})},k=()=>{if(!i){console.error("Snapshot is not available yet.");return}console.log("CLicked");let A=ei(pt,g);const P=Qn(A,Vs("unix_time","desc"),FI(i.docs[t.length-1]),or(f));m(P,1)},T=()=>{if(!i){console.error("Snapshot is not available yet.");return}let A=ei(pt,g);const P=Qn(A,Vs("unix_time","desc"),BI(i.docs[0]),II(f));m(P,-1)};return _.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold py-8",children:"Realtime Report "}),_.jsx(eV,{ReportData:t,startIndex:s*f}),_.jsxs("div",{className:"flex justify-center items-center py-20 gap-10",children:[_.jsx("button",{className:`px-6 py-2 rounded-full text-xl ${s===0?"bg-gray-500":"bg-yellow-500"}`,onClick:T,disabled:s===0,children:"Previous"}),_.jsx("button",{className:`px-6 py-2 rounded-full  text-xl ${l<f?"bg-gray-500":"bg-yellow-500"}`,onClick:k,disabled:l<f,children:"Next"})]})]})}const us=["Round Pipe","Rectangular Pipe","Square Pipe","Design Pipe","Spiral Pipe","Half Round Pipe","Schedule Pipe"],cd=["Morning","Night"],iV=["manager","admin","owner","in-charge","machine-operator"],Zs=["0.4mm","0.5mm","0.6mm","0.7mm","0.8mm","1.0mm","1.2mm","1.5mm","2.0mm","2.5mm"],nV=["3/8 inch","5/8 inch","1 inch","11/2 inch","21/2 inch","3/8 inch x 3/8 inch","1/2 inch x 3/4 inch","1/2 inchx11/2 inch","5/8 inch x 5/8 inch","3/4 inch x 11/2 inch","1 inch x 11/2 inch","11/2 inch x 11/2 inch","2 inch x 1 inch","21/2 inch x 1 inch","3 inch x 1 inch","3 inch x 2 inch","3 inch x 3 inch","3 inch x 11/2 inch","1/2 inch","3/4 inch","11/4 inch","2 inch","3 inch","4 inch","1/2 inch x 1/2 inch","1/2 inch x 1 inch","1/2 inch x 2 inch","3/4 inch x 3/4 inch","1 inch x 1 inch","11/4 inch x 11/4 inch","11/2 inch x 2 inch","2 inch x 2 inch","21/2 inch x 11/2 inch","3 inch x 11/4 inch","61 inch x 29.5 inch","4 inch x 2 inch"];function sV(){const t="machinesIndividual",e="damagedProducts";let i=q.useRef(null),n=q.useRef(null),s=q.useRef(null),[a,l]=q.useState(!0),[p,f]=q.useState(new Set([]));q.useEffect(()=>{n.current.valueAsDate=new Date;let T=new Set([]);const A=Mi(pt,"information","info");hn(A).then(P=>{let L=P.data();L.forming_machine.forEach(W=>{T.add(W)}),L.polish_machine.forEach(W=>{T.add(W)}),f(T)})},[]);function g(){let T=0,A=new Date(i.current.value),P=new Date(n.current.value);if(i.current.value===""||n.current.value==="")return m("Invalid Parameters!"),null;if(A.getTime()>P.getTime())return m("Start date should be less than End Date"),null;m("Please be Patient ..."),l(!1);async function L(W){let N=new Date(W);N.setHours(0),N.setMinutes(0),N.setSeconds(0);let M=new Date(W);M.setHours(23),M.setMinutes(59),M.setSeconds(59);let B=ei(pt,t);Array.from(p).map((z,G)=>{us.map((R,U)=>{let K=0,ae=0,Q=0,se=0,ge=0,ue=0,Le=0,Oe=0,Ue=0,tt=Nn(B,et("unix_time",">=",Math.floor(N.getTime()/1e3)),et("unix_time","<=",Math.floor(M.getTime()/1e3)),et("machine_no","==",z),et("product_type","==",R));Fi(tt).then(Pe=>{Pe.forEach(X=>{Le++,T++;const _e=X.data();_e.shift==="Morning"?parseFloat(_e.weight)>0&&(K+=Math.abs(parseInt(_e.count)),ae+=parseFloat(_e.weight)):parseFloat(_e.weight)>0&&(Q+=Math.abs(parseInt(_e.count)),se+=parseFloat(_e.weight))}),ge=(K+Q).toFixed(2),ue=(se+ae).toFixed(2);let Ne=ei(pt,e),Be=Nn(Ne,et("unix_time",">=",Math.floor(N.getTime()/1e3)),et("unix_time","<=",Math.floor(M.getTime()/1e3)),et("machine_no","==",z),et("product_type","==",R));Fi(Be).then(X=>{X.forEach(_e=>{const me=_e.data();me.shift==="Morning"?Oe+=parseInt(me.damagedProductCount):Ue+=parseInt(me.damagedProductCount)}),Le!==0&&k(`${N.getDate()}/${N.getMonth()+1}/${N.getFullYear()}`,z,R,Oe,K,ae.toFixed(2),K-Oe,Ue,Q,se.toFixed(2),Q-Ue,ge-Oe-Ue,ue),(G+1)*(U+1)===p.size*us.length&&(T===0&&m("No Data Available in this Date Range"),l(!0))})})})})}for(;L(P),A.getTime()!==P.getTime();)P.setDate(P.getDate()-1)}const m=T=>{s.current.innerHTML=`<tr id="reportStatus" >
              <td class="border border-gray-500 text-center py-4 " colSpan="13">
                ${T}
            </td>
        </tr>`},k=(T,A,P,L,W,N,M,B,z,G,R,U,K)=>{const ae=document.createElement("tr");ae.innerHTML=`
      <tr>
        <td class="border border-black p-4 text-center">${T}</td>
        <td class="border border-black p-4 text-center">${A}</td>
        <td class="border border-black p-4 text-center">${P}</td>
        
        <td class="border border-black p-4 text-center">${W}</td>
        <td class="border border-black p-4 text-center">${L}</td>
        <td class="border border-black p-4 text-center">${M}</td>
        <td class="border border-black p-4 text-center">${N}</td>
        
        <td class="border border-black p-4 text-center">${z}</td>
        <td class="border border-black p-4 text-center">${B}</td>
        <td class="border border-black p-4 text-center">${R}</td>
        <td class="border border-black p-4 text-center">${G}</td>
        
        <td class="border border-black p-4 text-center">${U}</td>
        <td class="border border-black p-4 text-center">${K}</td>
      </tr>
    `;let Q=document.getElementById("reportStatus");Q!==null&&Q.remove(),s.current.appendChild(ae)};return _.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold py-8",children:"Daily Report "}),_.jsxs("div",{className:"container mx-auto flex gap-4 flex-col md:flex-row justify-center items-center mb-10",children:[_.jsxs("div",{className:"flex gap-4 flex-col md:flex-row items-center",children:[_.jsx("h2",{children:"From"}),_.jsx("input",{type:"date",ref:i,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",placeholder:"From"})," ",_.jsx("h2",{children:"To"}),_.jsx("input",{type:"date",ref:n,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",placeholder:"To"})]}),_.jsx("button",{onClick:g,disabled:!a,className:"px-6 py-2 rounded-full bg-black text-white",children:a?"Generate":"Please Wait ..."}),_.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),_.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",_.jsx(Gl,{})]})]}),_.jsx("div",{className:"w-full relative overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsxs("thead",{className:"bg-primary text-white font-light rounded-lg",children:[_.jsxs("tr",{className:" rounded-tl-lg",children:[_.jsx("th",{rowSpan:"2",className:"border border-black",children:"Date"}),_.jsx("th",{rowSpan:"2",className:"border border-black",children:"Machine No."}),_.jsx("th",{rowSpan:"2",className:"border border-black",children:"Product Type"}),_.jsx("th",{colSpan:"4",className:"border border-black",children:"Morning"}),_.jsx("th",{colSpan:"4",className:"border border-black",children:"Night"}),_.jsx("th",{rowSpan:"2",className:"border border-black",children:"Total Product"}),_.jsx("th",{rowSpan:"2",className:"border border-black",children:"Total Weight"})]}),_.jsxs("tr",{className:"border border-black",children:[_.jsx("th",{className:"border border-black",children:"Total"}),_.jsx("th",{style:{color:"#bd0000"},className:"border border-black",children:"Damaged"}),_.jsx("th",{className:"border border-black",children:"Net"}),_.jsx("th",{className:"border border-black",children:"Weight"}),_.jsx("th",{className:"border border-black",children:"Total"}),_.jsx("th",{style:{color:"#bd0000"},className:"border border-black",children:"Damaged"}),_.jsx("th",{className:"border border-black",children:"Net"}),_.jsx("th",{className:"border border-black",children:"Weight"})]})]}),_.jsx("tbody",{ref:s,children:_.jsx("tr",{children:_.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}function rV(){const t="machinesIndividual",e="damagedProducts";let i=q.useRef(null),n=q.useRef(null),s=q.useRef(null),[a,l]=q.useState(!0),[p,f]=q.useState(new Set([]));q.useEffect(()=>{n.current.valueAsDate=new Date;let T=new Set([]);const A=Mi(pt,"information","info");hn(A).then(P=>{let L=P.data();L.forming_machine.forEach(W=>{T.add(W)}),L.polish_machine.forEach(W=>{T.add(W)}),f(T)})},[]);const g=()=>{let T=0,A=new Date(n.current.value);A.setHours(0),A.setMinutes(0),A.setMilliseconds(0),A.setSeconds(0);let P=parseInt(i.current.value);if(i.current.value===""||i.current.value<=0)return m("Week Range cannot be empty"),null;if(n.current.value==="")return m("Date is Empty!"),null;m("Please be Patient ..."),l(!1);async function L(W,N=!1){let M=new Date(W);M.setHours(23),M.setMinutes(59),M.setSeconds(59);let B=new Date(W);B.setDate(B.getDate()-6),B.setHours(0),B.setMinutes(0),B.setSeconds(0),console.log(M,B);let z=ei(pt,t);Array.from(p).map((G,R)=>{us.map((U,K)=>{let ae=0,Q=0,se=0,ge=0,ue=0,Le=Nn(z,et("unix_time",">=",Math.floor(B.getTime()/1e3)),et("unix_time","<=",Math.floor(M.getTime()/1e3)),et("machine_no","==",G),et("product_type","==",U));Fi(Le).then(Oe=>{Oe.forEach(Pe=>{se++,T++;const Ne=Pe.data();parseFloat(Ne.weight)>0&&(Q+=parseFloat(Ne.weight),ae+=Math.abs(parseInt(Ne.count)))});let Ue=ei(pt,e),tt=Nn(Ue,et("unix_time",">=",Math.floor(B.getTime()/1e3)),et("unix_time","<=",Math.floor(M.getTime()/1e3)),et("machine_no","==",G),et("product_type","==",U));Fi(tt).then(Pe=>{Pe.forEach(Ne=>{const Be=Ne.data();Be.shift==="Morning"?ge+=parseInt(Be.damagedProductCount):ue+=parseInt(Be.damagedProductCount),console.log("Morning Damaged",ge,"Night Damaged",ue)}),se!==0&&k(`${M.getDate()}/${M.getMonth()+1}/${M.getFullYear()} - 
                                      ${B.getDate()}/${B.getMonth()+1}/${B.getFullYear()}`,G,U,ge+ue,ae,ae-ge-ue,parseFloat(Q).toFixed(2)),(R+1)*(K+1)===p.size*us.length&&(T===0&&m("No Data Available in this Date Range"),l(!0))})})})})}for(let W=0;W<P;W++)L(A,W+1===P),A.setDate(A.getDate()-7)},m=T=>{s.current.innerHTML=`<tr>
              <td class="border border-black p-4 text-center" id='reportStatus' colSpan="9">
                  ${T}
              </td>
          </tr>`},k=(T,A,P,L,W,N,M)=>{const B=document.createElement("tr");B.innerHTML=`<tr>
          <td class="border border-black p-4 text-center">${T}</td>
          <td class="border border-black p-4 text-center">${A}</td>
          <td class="border border-black p-4 text-center">${P}</td>
          <td class="border border-black p-4 text-center">${L}</td>
          <td class="border border-black p-4 text-center">${W}</td>
          <td class="border border-black p-4 text-center">${N}</td>
          <td class="border border-black p-4 text-center">${M}</td>
          </tr>`;let z=document.getElementById("reportStatus");z&&z.remove(),s.current.appendChild(B)};return _.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold py-8",children:"Weekly Report "}),_.jsxs("div",{className:"container mx-auto flex gap-4 flex-col md:flex-row justify-center items-center mb-10",children:[_.jsxs("div",{className:"flex gap-4 flex-col md:flex-row items-center",children:[_.jsx("h2",{children:"Date"}),_.jsx("input",{type:"number",ref:i,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",placeholder:"Weeks"})," ",_.jsx("h2",{children:"To"}),_.jsx("input",{type:"date",ref:n,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",placeholder:"To"})]}),_.jsx("button",{onClick:g,disabled:!a,className:"px-6 py-2 rounded-full bg-black text-white",children:a?"Generate":"Please Wait ..."}),_.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),_.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",_.jsx(Gl,{})]})]}),_.jsx("div",{className:"w-full relative overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:_.jsxs("tr",{children:[_.jsx("th",{className:"border border-black p-2",children:"Week"}),_.jsx("th",{className:"border border-black p-2",children:"Machine No."}),_.jsx("th",{className:"border border-black p-2",children:"Product Type"}),_.jsx("th",{style:{color:"#bd0000"},className:"border border-black p-2",children:"Damaged Product"}),_.jsx("th",{className:"border border-black p-2",children:"Total Product"}),_.jsx("th",{className:"border border-black p-2",children:"Net"}),_.jsx("th",{className:"border border-black p-2",children:"Total Weight"})]})}),_.jsx("tbody",{ref:s,children:_.jsx("tr",{children:_.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}function aV(){const t="machinesIndividual",e="damagedProducts";let i=q.useRef(null),n=q.useRef(null),s=q.useRef(null),a=q.useRef(null);const l=parseInt(new Date().getFullYear());let[p,f]=q.useState(!0),[g,m]=q.useState(new Set([]));q.useEffect(()=>{let P=new Set([]);const L=Mi(pt,"information","info");hn(L).then(W=>{let N=W.data();N.forming_machine.forEach(M=>{P.add(M)}),N.polish_machine.forEach(M=>{P.add(M)}),m(P)})},[]);function k(){let P=new Date;P.setMilliseconds(0),P.setSeconds(0),P.setMinutes(0),P.setHours(0),P.setDate(1),P.setMonth(parseInt(s.current.value)),P.setFullYear(parseInt(n.current.value));let L=0;if(a.current.value===""||s.current.value==="")return T("Month Range cannot be empty!"),null;if(a.current.value<s.current.value)return T("Start month should be less than end month!"),null;T("Please Be Patient ..."),f(!1);const W=N=>{let M=new Date(N),B=new Date(n.current.value,M.getMonth()+1,0);B.setHours(23),B.setMinutes(59),B.setSeconds(59);const z=ei(pt,t);Array.from(g).map((G,R)=>{us.map((U,K)=>{let ae=0,Q=0,se=0,ge=0,ue=0;const Le=Nn(z,et("unix_time",">=",Math.floor(M.getTime()/1e3)),et("unix_time","<=",Math.floor(B.getTime()/1e3)),et("machine_no","==",G),et("product_type","==",U));Fi(Le).then(Oe=>{Oe.forEach(Pe=>{se++,L++;const Ne=Pe.data();parseFloat(Ne.weight)>0&&(Q+=parseFloat(Ne.weight),ae+=Math.abs(parseInt(Ne.count)))});let Ue=ei(pt,e),tt=Nn(Ue,et("unix_time",">=",Math.floor(M.getTime()/1e3)),et("unix_time","<=",Math.floor(B.getTime()/1e3)),et("machine_no","==",G),et("product_type","==",U));Fi(tt).then(Pe=>{Pe.forEach(Ne=>{const Be=Ne.data();Be.shift==="Morning"?ge+=parseInt(Be.damagedProductCount):ue+=parseInt(Be.damagedProductCount),console.log("Morning Damaged",ge,"Night Damaged",ue)}),se!==0&&A(M.toLocaleString("default",{month:"long"}),G,U,ge+ue,ae,ae-ge-ue,parseFloat(Q).toFixed(2)),(R+1)*(K+1)===g.size*us.length&&(L===0&&T("No Data Available in this Date Range"),f(!0))})})})})};for(;P.getMonth()<=a.current.value;)W(P),P.setMonth(P.getMonth()+1)}const T=P=>{i.current.innerHTML=`<tr>
              <td class='border border-black text-center py-4' id='reportStatus' colSpan="9">
                  ${P}
              </td>
          </tr>`},A=(P,L,W,N,M,B,z)=>{const G=document.createElement("tr");G.innerHTML=`<tr>
          <td class="border border-black p-4 text-center">${P}</td>
          <td class="border border-black p-4 text-center">${L}</td>
          <td class="border border-black p-4 text-center">${W}</td>
          <td class="border border-black p-4 text-center">${N}</td>
          <td class="border border-black p-4 text-center">${M}</td>
          <td class="border border-black p-4 text-center">${B}</td>
          <td class="border border-black p-4 text-center">${z}</td>
          </tr>`;let R=document.getElementById("reportStatus");R&&R.remove(),i.current.appendChild(G)};return _.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold py-8",children:"Monthly Report "}),_.jsxs("div",{className:"container mx-auto flex gap-4 flex-col md:flex-row justify-center items-center mb-10",children:[_.jsx("h2",{children:"Date"}),_.jsxs("select",{ref:n,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[_.jsx("option",{value:l,children:l}),_.jsx("option",{value:l-1,children:l-1}),_.jsx("option",{value:l-2,children:l-2}),_.jsx("option",{value:l-3,children:l-3}),_.jsx("option",{value:l-4,children:l-4})]}),_.jsxs("select",{ref:s,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"From"}),_.jsx("option",{value:0,children:"January"}),_.jsx("option",{value:1,children:"February"}),_.jsx("option",{value:2,children:"March"}),_.jsx("option",{value:3,children:"April"}),_.jsx("option",{value:4,children:"May"}),_.jsx("option",{value:5,children:"June"}),_.jsx("option",{value:6,children:"July"}),_.jsx("option",{value:7,children:"August"}),_.jsx("option",{value:8,children:"September"}),_.jsx("option",{value:9,children:"October"}),_.jsx("option",{value:10,children:"November"}),_.jsx("option",{value:11,children:"December"})]}),_.jsxs("select",{ref:a,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"To"}),_.jsx("option",{value:0,children:"January"}),_.jsx("option",{value:1,children:"February"}),_.jsx("option",{value:2,children:"March"}),_.jsx("option",{value:3,children:"April"}),_.jsx("option",{value:4,children:"May"}),_.jsx("option",{value:5,children:"June"}),_.jsx("option",{value:6,children:"July"}),_.jsx("option",{value:7,children:"August"}),_.jsx("option",{value:8,children:"September"}),_.jsx("option",{value:9,children:"October"}),_.jsx("option",{value:10,children:"November"}),_.jsx("option",{value:11,children:"December"})]}),_.jsx("button",{onClick:k,disabled:!p,className:"px-6 py-2 rounded-full bg-black text-white",children:p?"Generate":"Please Wait ..."}),_.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),_.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",_.jsx(Gl,{})]})]}),_.jsx("div",{className:"w-full relative overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:_.jsxs("tr",{children:[_.jsx("th",{className:"border border-black p-2",children:"Week"}),_.jsx("th",{className:"border border-black p-2",children:"Machine No."}),_.jsx("th",{className:"border border-black p-2",children:"Product Type"}),_.jsx("th",{style:{color:"#bd0000"},className:"border border-black p-2",children:"Damaged Product"}),_.jsx("th",{className:"border border-black p-2",children:"Total Product"}),_.jsx("th",{className:"border border-black p-2",children:"Net"}),_.jsx("th",{className:"border border-black p-2",children:"Total Weight"})]})}),_.jsx("tbody",{ref:i,children:_.jsx("tr",{children:_.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}function oV(){const t="damagedProducts",e="machinesIndividual";let i=q.useRef(null),n=q.useRef(null),s=q.useRef(null),a=q.useRef(null);const l=parseInt(new Date().getFullYear());let[p,f]=q.useState(!0),[g,m]=q.useState(new Set([]));q.useEffect(()=>{let P=new Set([]);const L=Mi(pt,"information","info");hn(L).then(W=>{let N=W.data();N.forming_machine.forEach(M=>{P.add(M)}),N.polish_machine.forEach(M=>{P.add(M)}),m(P)})},[]);const k=()=>{let P=0,L=new Date;if(L.setDate(1),L.setHours(0),L.setMinutes(0),L.setMilliseconds(0),L.setSeconds(0),L.setMonth(n.current.value),L.setFullYear(s.current.value),i.current.value===""||i.current.value<=0)return T("Quarter Range cannot be empty!"),null;if(n.current.value==="")return T("Start month cannot be empty!"),null;T("Please Be Patient ..."),f(!1);const W=N=>{let M=new Date(N),B=new Date(N);B.setSeconds(59),B.setHours(23),B.setMinutes(59),B.setDate(0),B.setMonth(B.getMonth()+4);const z=ei(pt,e);Array.from(g).map((G,R)=>{us.map((U,K)=>{let ae=0,Q=0,se=0,ge=0,ue=0;const Le=Nn(z,et("unix_time",">=",Math.floor(M.getTime()/1e3)),et("unix_time","<=",Math.floor(B.getTime()/1e3)),et("machine_no","==",G),et("product_type","==",U));Fi(Le).then(Oe=>{Oe.forEach(Pe=>{se++,P++;const Ne=Pe.data();parseFloat(Ne.weight)>0&&(Q+=parseFloat(Ne.weight),ae+=Math.abs(parseInt(Ne.count)))});let Ue=ei(pt,t),tt=Nn(Ue,et("unix_time",">=",Math.floor(M.getTime()/1e3)),et("unix_time","<=",Math.floor(B.getTime()/1e3)),et("machine_no","==",G),et("product_type","==",U));Fi(tt).then(Pe=>{Pe.forEach(Ne=>{const Be=Ne.data();Be.shift==="Morning"?ge+=parseInt(Be.damagedProductCount):ue+=parseInt(Be.damagedProductCount),console.log("Morning Damaged",ge,"Night Damaged",ue)}),se!==0&&A(`${M.toLocaleString("default",{month:"long"})}, ${M.getFullYear()} - 
                                      ${B.toLocaleString("default",{month:"long"})}, ${B.getFullYear()}`,G,U,ge+ue,ae,ae-ge-ue,parseFloat(Q).toFixed(2)),(R+1)*(K+1)===g.size*us.length&&(P===0&&T("No Data Available in this Date Range"),f(!0))})})})})};for(let N=0;N<i.current.value;N++)W(L),L.setMonth(L.getMonth()+4)},T=P=>{a.current.innerHTML=`<tr>
              <td class="border border-black p-2" id='reportStatus' colSpan="9">
                  ${P}
              </td>
          </tr>`},A=(P,L,W,N,M,B,z)=>{const G=document.createElement("tr");G.innerHTML=`<tr>
          <td  class="border border-black p-4 text-center">${P}</td>
          <td  class="border border-black p-4 text-center">${L}</td>
          <td  class="border border-black p-4 text-center">${W}</td>
          <td  class="border border-black p-4 text-center">${N}</td>
          <td  class="border border-black p-4 text-center">${M}</td>
          <td  class="border border-black p-4 text-center">${B}</td>
          <td  class="border border-black p-4 text-center">${z}</td>
          </tr>`;let R=document.getElementById("reportStatus");R&&R.remove(),a.current.appendChild(G)};return _.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold py-8",children:"Quarterly Report "}),_.jsxs("div",{className:"container mx-auto flex gap-4 flex-col md:flex-row justify-center items-center mb-10",children:[_.jsx("h2",{children:"Date"}),_.jsx("input",{type:"number",ref:i,placeholder:"Quarters",style:{width:"9rem"},className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400"}),"From",_.jsxs("select",{ref:n,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Start Month"}),_.jsx("option",{value:0,children:"January"}),_.jsx("option",{value:1,children:"February"}),_.jsx("option",{value:2,children:"March"}),_.jsx("option",{value:3,children:"April"}),_.jsx("option",{value:4,children:"May"}),_.jsx("option",{value:5,children:"June"}),_.jsx("option",{value:6,children:"July"}),_.jsx("option",{value:7,children:"August"}),_.jsx("option",{value:8,children:"September"}),_.jsx("option",{value:9,children:"October"}),_.jsx("option",{value:10,children:"November"}),_.jsx("option",{value:11,children:"December"})]}),_.jsxs("select",{ref:s,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[_.jsx("option",{value:l,children:l}),_.jsx("option",{value:l-1,children:l-1}),_.jsx("option",{value:l-2,children:l-2}),_.jsx("option",{value:l-3,children:l-3}),_.jsx("option",{value:l-4,children:l-4})]}),_.jsx("button",{onClick:k,disabled:!p,className:"px-6 py-2 rounded-full bg-black text-white",children:p?"Generate":"Please Wait ..."}),_.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),_.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",_.jsx(Gl,{})]})]}),_.jsx("div",{className:"w-full relative overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:_.jsxs("tr",{children:[_.jsx("th",{className:"border border-black p-2",children:"Quarter"}),_.jsx("th",{className:"border border-black p-2",children:"Machine No."}),_.jsx("th",{className:"border border-black p-2",children:"Product Type"}),_.jsx("th",{style:{color:"#bd0000"},className:"border border-black p-2",children:"Damaged Product"}),_.jsx("th",{className:"border border-black p-2",children:"Total Product"}),_.jsx("th",{className:"border border-black p-2",children:"Net"}),_.jsx("th",{className:"border border-black p-2",children:"Total Weight"})]})}),_.jsx("tbody",{ref:a,children:_.jsx("tr",{children:_.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}function lV(){const t="machinesIndividual",e="damagedProducts";let i=q.useRef(null);const n=parseInt(new Date().getFullYear());let s=q.useRef(null),a=q.useRef(null),[l,p]=q.useState(!0),[f,g]=q.useState(new Set([]));q.useEffect(()=>{let A=new Set([]);const P=Mi(pt,"information","info");hn(P).then(L=>{let W=L.data();W.forming_machine.forEach(N=>{A.add(N)}),W.polish_machine.forEach(N=>{A.add(N)}),g(A)})},[]);const m=()=>{let A=0,P=new Date;P.setMilliseconds(0),P.setSeconds(0),P.setHours(0),P.setMinutes(0),P.setDate(1),P.setMonth(0),P.setFullYear(s.current.value),k("Please Be Patient ..."),p(!1);const L=W=>{let N=new Date(W);N.setHours(0),N.setMinutes(0),N.setSeconds(0);let M=new Date(W);M.setMonth(11),M.setDate(31),M.setHours(23),M.setMinutes(59),M.setSeconds(59),console.log(N,M);const B=ei(pt,t);Array.from(f).map((z,G)=>{us.map((R,U)=>{let K=0,ae=0,Q=0,se=0,ge=0,ue=0,Le=0,Oe=0,Ue=0;const tt=Nn(B,et("unix_time",">=",Math.floor(N.getTime()/1e3)),et("unix_time","<=",Math.floor(M.getTime()/1e3)),et("machine_no","==",z),et("product_type","==",R));Fi(tt).then(Pe=>{Pe.forEach(X=>{Le++,A++;const _e=X.data();_e.shift==="Morning"?parseFloat(_e.weight)>0&&(K+=Math.abs(parseInt(_e.count)),ae+=parseFloat(_e.weight)):parseFloat(_e.weight)>0&&(Q+=Math.abs(parseInt(_e.count)),se+=parseFloat(_e.weight))}),ge=K+Q,ue=(se+ae).toFixed(2);let Ne=ei(pt,e),Be=Nn(Ne,et("unix_time",">=",Math.floor(N.getTime()/1e3)),et("unix_time","<=",Math.floor(M.getTime()/1e3)),et("machine_no","==",z),et("product_type","==",R));Fi(Be).then(X=>{X.forEach(_e=>{const me=_e.data();me.shift==="Morning"?Oe+=parseInt(me.damagedProductCount):Ue+=parseInt(me.damagedProductCount)}),Le!==0&&T(N.getFullYear(),z,R,Oe,K,ae.toFixed(2),K-Oe,Ue,Q,se.toFixed(2),Q-Ue,ge-Oe-Ue,ue),(G+1)*(U+1)===f.size*us.length&&(A===0&&k("No Data Available in this Date Range"),p(!0))})})})})};for(let W=0;W<a.current.value-s.current.value+1;W++)L(P),P.setFullYear(P.getFullYear()+1)},k=A=>{i.current.innerHTML=`<tr>
              <td class="border border-black p-2 text-center" id='reportStatus' colSpan="13">
                  ${A}
              </td>
          </tr>`},T=(A,P,L,W,N,M,B,z,G,R,U,K,ae)=>{const Q=document.createElement("tr");Q.innerHTML=`<tr>
          <td class="border border-black p-2 text-center">${A}</td>
          <td class="border border-black p-2 text-center">${P}</td>
          <td class="border border-black p-2 text-center">${L}</td>

          <td class="border border-black p-2 text-center">${N}</td>
          <td class="border border-black p-2 text-center">${W}</td>
          <td class="border border-black p-2 text-center">${B}</td>
          <td class="border border-black p-2 text-center">${M}</td>

          <td class="border border-black p-2 text-center">${G}</td>
          <td class="border border-black p-2 text-center">${z}</td>
          <td class="border border-black p-2 text-center">${U}</td>
          <td class="border border-black p-2 text-center">${R}</td>

          <td class="border border-black p-2 text-center">${K}</td>
          <td class="border border-black p-2 text-center">${ae}</td>
          </tr>`;let se=document.getElementById("reportStatus");se!==null&&se.remove(),i.current.appendChild(Q)};return _.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold py-8",children:"Yearly Report "}),_.jsxs("div",{className:"container mx-auto flex gap-4 justify-center items-center mb-10",children:[_.jsx("h2",{children:"From"}),_.jsxs("select",{ref:s,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[_.jsx("option",{value:n,children:n}),_.jsx("option",{value:n-1,children:n-1}),_.jsx("option",{value:n-2,children:n-2}),_.jsx("option",{value:n-3,children:n-3}),_.jsx("option",{value:n-4,children:n-4})]}),"to",_.jsxs("select",{ref:a,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[_.jsx("option",{value:n,children:n}),_.jsx("option",{value:n-1,children:n-1}),_.jsx("option",{value:n-2,children:n-2}),_.jsx("option",{value:n-3,children:n-3}),_.jsx("option",{value:n-4,children:n-4})]}),_.jsx("button",{onClick:m,disabled:!l,className:"px-6 py-2 rounded-full bg-black text-white",children:l?"Generate":"Please Wait ..."}),_.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),_.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",_.jsx(Gl,{})]})]}),_.jsx("div",{className:"w-full",children:_.jsxs("table",{id:"table-to-xls",className:"w-full",children:[_.jsxs("thead",{className:"bg-primary text-white font-light rounded-lg",children:[_.jsxs("tr",{children:[_.jsx("th",{className:"border border-black p-2",rowSpan:"2",children:"Date"}),_.jsx("th",{className:"border border-black p-2",rowSpan:"2",children:"Machine No."}),_.jsx("th",{className:"border border-black p-2",rowSpan:"2",children:"Product Type"}),_.jsx("th",{className:"border border-black p-2",colSpan:"4",children:"Morning"}),_.jsx("th",{className:"border border-black p-2",colSpan:"4",children:"Night"}),_.jsx("th",{className:"border border-black p-2",rowSpan:"2",children:"Total Product"}),_.jsx("th",{className:"border border-black p-2",rowSpan:"2",children:"Total Weight"})]}),_.jsxs("tr",{children:[_.jsx("th",{className:"border border-black p-2",children:"Total"}),_.jsx("th",{style:{color:"#bd0000"},className:"border border-black p-2",children:"Damaged"}),_.jsx("th",{className:"border border-black p-2",children:"Net"}),_.jsx("th",{className:"border border-black p-2",children:"Weight"}),_.jsx("th",{className:"border border-black p-2",children:"Total"}),_.jsx("th",{style:{color:"#bd0000"},className:"border border-black p-2",children:"Damaged"}),_.jsx("th",{className:"border border-black p-2",children:"Net"}),_.jsx("th",{className:"border border-black p-2",children:"Weight"})]})]}),_.jsx("tbody",{ref:i,children:_.jsx("tr",{children:_.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}function hV(){const t="machinesIndividual";let e=q.useRef(null),i=q.useRef(null),n=q.useRef(null),s=q.useRef(null),[a,l]=q.useState(new Set([])),[p,f]=q.useState(!0);q.useEffect(()=>{i.current.valueAsDate=new Date;let A='<th class="border border-black p-2">Machine Name</th>',P=new Set([]);const L=Mi(pt,"information","info");hn(L).then(W=>{let N=W.data();N.forming_machine.forEach(M=>{P.add(M)}),N.polish_machine.forEach(M=>{P.add(M)}),l(P),Zs.forEach(M=>{A+=`<th class="border border-black p-2">${M}</th>`}),s.current.innerHTML=`<tr>
      ${A}<tr>`})},[]);const g=()=>{let A=new Date(e.current.value);A.setHours(0),A.setMinutes(0),A.setSeconds(1),A.setMilliseconds(0);let P=new Date(i.current.value);if(P.setHours(23),P.setMinutes(59),P.setMilliseconds(99),P.setSeconds(59),i.current.value===""||e.current.value==="")return m("Date Ranges cannot be empty!"),null;if(A.getTime()>P.getTime())return m("Start date should be less than end date"),null;m("Please be Patient ..."),f(!1),k(A,P)},m=A=>{n.current.innerHTML=`<tr>
              <td class='border border-black p-2' id='reportStatus' colSpan=${Zs.length+1}>
                  ${A}
              </td>
          </tr>`};async function k(A,P){const L=ei(pt,"machineStatus"),W=ei(pt,t);Array.from(a).forEach((N,M)=>{let B=0,z=Nn(L,et("time_start",">=",Math.floor(A.getTime()/1e3)),et("time_start","<=",Math.floor(P.getTime()/1e3)),et("machine_no","==",`${N}`),et("isRunning","==",!0));Fi(z).then(G=>{N==="03"&&console.log("03",Math.floor(A.getTime()/1e3),Math.floor(P.getTime()/1e3)),G.forEach(U=>{B+=U.data().time_end-U.data().time_start,console.log("-------------------"),console.log(U.data())});let R=[];for(const U of Zs){let K=0;z=Nn(W,et("unix_time",">=",Math.floor(A.getTime()/1e3)),et("unix_time","<=",Math.floor(P.getTime()/1e3)),et("machine_no","==",`${N}`),et("thickness","==",U)),Fi(z).then(ae=>{ae.forEach(Q=>{K+=parseInt(Q.data().count)}),K!==0?R.push(`${(B/K).toFixed(2)} sec`):R.push("N/A"),R.length===Zs.length&&T(N,R),M+1===a.size&&R.length===Zs.length&&f(!0)})}})})}const T=(A,P)=>{let L=P.map(M=>`<td>${M}</td>`);L=L.join("");const W=document.createElement("tr");W.innerHTML=`<tr class="border border-black p-2">
          <td class="border border-black p-2 text-center"><b>FM ${A}</b></td>
          ${L}
          </tr>`;let N=document.getElementById("reportStatus");N&&N.remove(),n.current.appendChild(W)};return _.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold py-8",children:"Machine Efficiency "}),_.jsxs("div",{className:"container mx-auto flex gap-4 flex-col md:flex-row justify-center items-center mb-10",children:[_.jsx("h2",{children:"From"}),_.jsx("input",{type:"date",ref:e,placeholder:"Quarters",style:{width:"9rem"},className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400"}),"To",_.jsx("input",{type:"date",ref:i,placeholder:"Quarters",style:{width:"9rem"},className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400"}),_.jsx("button",{onClick:g,disabled:!p,className:"px-6 py-2 rounded-full bg-black text-white",children:p?"Generate":"Please Wait ..."}),_.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),_.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",_.jsx(Gl,{})]})]}),_.jsx("div",{className:"w-full relative overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",ref:s}),_.jsx("tbody",{ref:n,children:_.jsx("tr",{children:_.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}const cV="/assets/avatar-DIZPfZ2F.jpg";function uV(){let[t,e]=q.useState({});return q.useEffect(()=>{Ip("users",Il("email"),Il("pswd")).then(i=>{i[0]?(e(i[1][0]),console.log("response[0]",i[1][0])):e("not_user")})},[]),console.log("user",t),_.jsxs("div",{className:"flex gap-4 justify-between items-center",children:[_.jsxs("h2",{className:"text-xl",children:["Welcome Back, ",_.jsxs("span",{className:"text-primary",children:[t==null?void 0:t.username," !"]})]}),_.jsxs("div",{className:" flex gap-4 items-center",children:[_.jsx("img",{src:cV,alt:"",className:"w-10 h-10 rounded-full"}),_.jsx("p",{children:t==null?void 0:t.username})]})]})}function dV(){let[t,e]=q.useState(!1),[i,n]=q.useState(!1),[s,a]=q.useState([]),[l,p]=q.useState([]),[f,g]=q.useState([]);q.useState("all");async function m(){const k=Mi(pt,"information","info");return(await hn(k)).data()}return q.useEffect(()=>{m().then(T=>{const A=ei(pt,"machineStatus");let P=(T==null?void 0:T.forming_machine)||[],L=P.length,W=0;if(L===0){e(!0),n(!1);return}P.sort((N,M)=>parseInt(N,10)-parseInt(M,10)),P.forEach(N=>{const M=Nn(A,et("machine_no","==",N),Vs("time_end","desc"),or(1));Fi(M).then(B=>{let z=!1,G="N/A";B.forEach(R=>{let U=R.data(),K=Math.floor(new Date().getTime()/1e3)-(U==null?void 0:U.time_end),ae=Math.floor(K/3600),Q=Math.floor(K%3600/60),se=K%60;G=`${ae?`${ae}h`:""}${Q?` ${Q}m`:""} ${se}s`,K<=600&&(z=!0)}),a(R=>[...R,{meta:"forming",machineNo:`${N}`,active:z,idleTime:G}]),W+=1,W===L&&(e(!0),n(P.length!==0))})})})},[]),q.useEffect(()=>{var A,P,L,W;let k=(P=(A=s==null?void 0:s.slice(0,16))==null?void 0:A.filter(N=>N==null?void 0:N.active))==null?void 0:P.length,T=(W=(L=s==null?void 0:s.slice(0,16))==null?void 0:L.filter(N=>!(N!=null&&N.active)))==null?void 0:W.length;p(k),g(T)},[s]),_.jsxs("div",{className:"py-10 flex flex-col md:flex-row gap-10 items-center",children:[_.jsxs("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] w-full p-4 rounded-lg flex flex-col gap-6",children:[_.jsx("div",{className:"flex gap-4 justify-between items-center",children:_.jsx("p",{children:"Active Machines"})}),_.jsxs("div",{className:"flex gap-4 items-end  justify-between",children:[_.jsxs("h2",{children:[_.jsx("span",{className:"text-2xl font-bold",children:l})," Machines Active"]}),_.jsx("img",{src:x0,alt:"",className:"w-[60px] h-auto "})]})]}),_.jsxs("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] w-full p-4 rounded-lg flex flex-col gap-6",children:[_.jsx("div",{className:"flex gap-4 justify-between items-center",children:_.jsx("p",{children:"Idle Machines"})}),_.jsxs("div",{className:"flex gap-4 items-end  justify-between",children:[_.jsxs("h2",{children:[_.jsx("span",{className:"text-2xl font-bold",children:f})," ","Machines Idle"]}),_.jsx("img",{src:x0,alt:"",className:"w-[60px] h-auto "})]})]})]})}const WT="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M20.125%2027.25C20.125%2026.5596%2020.6846%2026%2021.375%2026H28.25C28.4968%2026%2028.738%2026.073%2028.9434%2026.2099L32%2028.2477L35.0566%2026.2099C35.262%2026.073%2035.5032%2026%2035.75%2026H42.625C43.3154%2026%2043.875%2026.5596%2043.875%2027.25C43.875%2027.9404%2043.3154%2028.5%2042.625%2028.5H36.1285L32.6934%2030.7901C32.2735%2031.07%2031.7265%2031.07%2031.3066%2030.7901L27.8715%2028.5H21.375C20.6846%2028.5%2020.125%2027.9404%2020.125%2027.25Z'%20fill='black'/%3e%3cpath%20d='M35.0625%2051.5C34.3721%2051.5%2033.8125%2052.0596%2033.8125%2052.75C33.8125%2053.4404%2034.3721%2054%2035.0625%2054H40.6875C41.3779%2054%2041.9375%2053.4404%2041.9375%2052.75C41.9375%2052.0596%2041.3779%2051.5%2040.6875%2051.5H35.0625Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M30.0625%2046.5C29.3721%2046.5%2028.8125%2047.0596%2028.8125%2047.75V57.75C28.8125%2058.4404%2029.3721%2059%2030.0625%2059H45.6875C46.3779%2059%2046.9375%2058.4404%2046.9375%2057.75V47.75C46.9375%2047.0596%2046.3779%2046.5%2045.6875%2046.5H30.0625ZM31.3125%2056.5V49H44.4375V56.5H31.3125Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M21.0625%200C20.3721%200%2019.8125%200.559644%2019.8125%201.25V3.4375H7.3125C6.62214%203.4375%206.0625%203.99714%206.0625%204.6875V9.6875C6.0625%2010.3779%206.62214%2010.9375%207.3125%2010.9375H12V37.75C12%2038.4404%2012.5596%2039%2013.25%2039H15.125V41.5H13.25C12.5596%2041.5%2012%2042.0596%2012%2042.75V62.75C12%2063.4404%2012.5596%2064%2013.25%2064H50.75C51.4404%2064%2052%2063.4404%2052%2062.75V42.75C52%2042.0596%2051.4404%2041.5%2050.75%2041.5H48.875V39H50.75C51.4404%2039%2052%2038.4404%2052%2037.75V10.9375H56.6875C57.3779%2010.9375%2057.9375%2010.3779%2057.9375%209.6875V4.6875C57.9375%203.99714%2057.3779%203.4375%2056.6875%203.4375H44.1875V1.25C44.1875%200.559644%2043.6279%200%2042.9375%200H21.0625ZM49.5%2010.9375H44.1875V13.125C44.1875%2013.8154%2043.6279%2014.375%2042.9375%2014.375H37V19.875C37%2020.2065%2036.8683%2020.5245%2036.6339%2020.7589L32.8839%2024.5089C32.3957%2024.997%2031.6043%2024.997%2031.1161%2024.5089L27.3661%2020.7589C27.1317%2020.5245%2027%2020.2065%2027%2019.875V14.375H21.0625C20.3721%2014.375%2019.8125%2013.8154%2019.8125%2013.125V10.9375H14.5V36.5H20.125V33.375C20.125%2032.6846%2020.6846%2032.125%2021.375%2032.125H28.25C28.4968%2032.125%2028.738%2032.198%2028.9434%2032.3349L32%2034.3727L35.0566%2032.3349C35.262%2032.198%2035.5032%2032.125%2035.75%2032.125H42.625C43.3154%2032.125%2043.875%2032.6846%2043.875%2033.375V36.5H49.5V10.9375ZM55.4375%208.4375V5.9375H44.1875V8.4375H55.4375ZM41.6875%202.5H22.3125V11.875H41.6875V2.5ZM19.8125%208.4375V5.9375H8.5625V8.4375H19.8125ZM34.5%2014.375H29.5V19.3572L32%2021.8572L34.5%2019.3572V14.375ZM41.375%2034.625H36.1285L32.6934%2036.9151C32.2735%2037.195%2031.7265%2037.195%2031.3066%2036.9151L27.8715%2034.625H22.625V41.5H41.375V34.625ZM46.375%2039H43.875V41.5H46.375V39ZM17.625%2041.5H20.125V39H17.625V41.5ZM14.5%2044V61.5H49.5V44H14.5Z'%20fill='black'/%3e%3c/g%3e%3c/svg%3e";function pV(){var a;let[t,e]=q.useState([]);const i=30,n="machines";q.useEffect(()=>{const l=ei(pt,n),p=Nn(l,Vs("unix_time","desc"),or(i));s(p)},[]);const s=(l,p)=>{Jc(l,f=>{e(g=>{let m=[];return f.forEach(k=>{const T={id:k==null?void 0:k.id,...k==null?void 0:k.data()},A=g.some(P=>P.id==T.id);T.status=(g==null?void 0:g.length)===0||A?"old":"new",m.push(T)}),m})})};return _.jsxs("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] p-8 rounded-lg",children:[_.jsx("h2",{className:"text-3xl",children:"Real-Time Machine Data"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 items-center gap-6 bg-primary md:rounded-full p-4 text-white mt-6",children:[_.jsx("p",{children:"Machine Names"}),_.jsx("p",{children:"Status"}),_.jsx("p",{children:"Shift"}),_.jsx("p",{children:"Product Type"}),_.jsx("p",{children:"Production weight"}),_.jsx("p",{children:"Production Count"})]}),(a=t==null?void 0:t.slice(0,5))==null?void 0:a.map(l=>_.jsxs("div",{className:`grid  grid-cols-1 md:grid-cols-6 items-center gap-6  rounded-md p-2 text-black mt-6 border md:border-none ${(l==null?void 0:l.status)=="new"?"bg-green-100":""}`,children:[_.jsxs("p",{className:"flex gap-2 items-center",children:[_.jsx("img",{src:WT,alt:"",className:"w-10 h-10"}),"FM ",l==null?void 0:l.machine_no]}),_.jsx("p",{children:"Active"}),_.jsx("p",{children:l==null?void 0:l.shift}),_.jsxs("p",{children:[l==null?void 0:l.product_type,", ",l==null?void 0:l.product_dimensions]}),_.jsxs("p",{children:[l==null?void 0:l.weight," KG"]}),_.jsx("p",{children:l==null?void 0:l.count})]}))]})}var zT={exports:{}};(function(t){(function(){function e(F,j){F.prototype=i(j.prototype),F.prototype.constructor=F,F.base=j.prototype}function i(F){function j(){}return j.prototype=F,new j}function n(F,j,Z){return Z==="millisecond"?F.setMilliseconds(F.getMilliseconds()+1*j):Z==="second"?F.setSeconds(F.getSeconds()+1*j):Z==="minute"?F.setMinutes(F.getMinutes()+1*j):Z==="hour"?F.setHours(F.getHours()+1*j):Z==="day"?F.setDate(F.getDate()+1*j):Z==="week"?F.setDate(F.getDate()+7*j):Z==="month"?F.setMonth(F.getMonth()+1*j):Z==="year"&&F.setFullYear(F.getFullYear()+1*j),F}function s(F,j){var Z=!1;for(0>F&&(Z=!0,F*=-1),F=""+F,j=j||1;F.length<j;)F="0"+F;return Z?"-"+F:F}function a(F){if(!F)return F;F=F.replace(/^\s\s*/,"");for(var j=/\s/,Z=F.length;j.test(F.charAt(--Z)););return F.slice(0,Z+1)}function l(F){F.roundRect=function(j,Z,Ce,Re,je,ke,ut,Mt){ut&&(this.fillStyle=ut),Mt&&(this.strokeStyle=Mt),typeof je>"u"&&(je=5),this.lineWidth=ke,this.beginPath(),this.moveTo(j+je,Z),this.lineTo(j+Ce-je,Z),this.quadraticCurveTo(j+Ce,Z,j+Ce,Z+je),this.lineTo(j+Ce,Z+Re-je),this.quadraticCurveTo(j+Ce,Z+Re,j+Ce-je,Z+Re),this.lineTo(j+je,Z+Re),this.quadraticCurveTo(j,Z+Re,j,Z+Re-je),this.lineTo(j,Z+je),this.quadraticCurveTo(j,Z,j+je,Z),this.closePath(),ut&&this.fill(),Mt&&0<ke&&this.stroke()}}function p(F,j){return F-j}function f(F){var j=((F&16711680)>>16).toString(16),Z=((F&65280)>>8).toString(16);return F=((F&255)>>0).toString(16),j=2>j.length?"0"+j:j,Z=2>Z.length?"0"+Z:Z,F=2>F.length?"0"+F:F,"#"+j+Z+F}function g(F,j){var Z=this.length>>>0,Ce=Number(j)||0,Ce=0>Ce?Math.ceil(Ce):Math.floor(Ce);for(0>Ce&&(Ce+=Z);Ce<Z;Ce++)if(Ce in this&&this[Ce]===F)return Ce;return-1}function m(F){return F===null||typeof F>"u"}function k(F){return F.indexOf||(F.indexOf=g),F}function T(F){Be.fSDec&&F[Ri("`eeDwdouMhrudods")](Ri("e`u`@ohl`uhnoHuds`uhnoDoe"),function(){Be._fTWm&&Be._fTWm(F)})}function A(F,j,Z){Z=Z||"normal";var Ce=F+"_"+j+"_"+Z,Re=On[Ce];if(isNaN(Re)){try{if(!Pi){var je=document.body;Pi=document.createElement("span"),Pi.innerHTML="";var ke=document.createTextNode("Mpgyi");Pi.appendChild(ke),je.appendChild(Pi)}Pi.style.display="",R(Pi,{position:"absolute",left:"0px",top:"-20000px",padding:"0px",margin:"0px",border:"none",whiteSpace:"pre",lineHeight:"normal",fontFamily:F,fontSize:j+"px",fontWeight:Z}),Re=Math.round(Pi.offsetHeight),Pi.style.display="none"}catch{Re=Math.ceil(1.1*j)}Re=Math.max(Re,j),On[Ce]=Re}return Re}function P(F,j){var Z=[];if(Z={solid:[],shortDash:[3,1],shortDot:[1,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],dot:[1,2],dash:[4,2],dashDot:[4,2,1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2]}[F||"solid"])for(var Ce=0;Ce<Z.length;Ce++)Z[Ce]*=j;else Z=[];return Z}function L(F,j,Z,Ce,Re){return Ce=Ce||[],Re=m(Re)?Gi?{passive:!1,capture:!1}:!1:Re,Ce.push([F,j,Z,Re]),F.addEventListener?(F.addEventListener(j,Z,Re),Z):F.attachEvent?(Ce=function(je){je=je||window.event,je.preventDefault=je.preventDefault||function(){je.returnValue=!1},je.stopPropagation=je.stopPropagation||function(){je.cancelBubble=!0},Z.call(F,je)},F.attachEvent("on"+j,Ce),Ce):!1}function W(F){if(F._menuButton)F.exportEnabled?(R(F._menuButton,{backgroundColor:F.toolbar.itemBackgroundColor,color:F.toolbar.fontColor}),K(F._menuButton),U(F,F._menuButton,"menu"),0>=navigator.userAgent.search("MSIE")&&F._menuButton.childNodes[0]&&R(F._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"})):ae(F._menuButton);else if(F.exportEnabled&&X){var j=!1;F._menuButton=document.createElement("button"),U(F,F._menuButton,"menu"),F._toolBar.appendChild(F._menuButton),L(F._menuButton,"touchstart",function(je){j=!0},F.allDOMEventHandlers),L(F._menuButton,"click",function(){F._dropdownMenu.style.display!=="none"||F._dropDownCloseTime&&500>=new Date().getTime()-F._dropDownCloseTime.getTime()||(F._dropdownMenu.style.display="block",F._menuButton.blur(),F._dropdownMenu.focus())},F.allDOMEventHandlers,!0),L(F._menuButton,"mousemove",function(){j||(R(F._menuButton,{backgroundColor:F.toolbar.itemBackgroundColorOnHover,color:F.toolbar.fontColorOnHover}),0>=navigator.userAgent.search("MSIE")&&R(F._menuButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},F.allDOMEventHandlers,!0),L(F._menuButton,"mouseout",function(){j||(R(F._menuButton,{backgroundColor:F.toolbar.itemBackgroundColor,color:F.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&R(F._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},F.allDOMEventHandlers,!0)}if(F.exportEnabled&&F._dropdownMenu){var Z=F.theme&&F.theme.indexOf("dark")!==-1?"black":"#888888";R(F._dropdownMenu,{backgroundColor:F.toolbar.itemBackgroundColor,color:F.toolbar.fontColor,boxShadow:"2px 2px 10px "+Z});for(var Z=F._dropdownMenu.childNodes,Ce=[F._cultureInfo.printText,F._cultureInfo.saveJPGText,F._cultureInfo.savePNGText],Re=0;Re<Ce.length;Re++)R(Z[Re],{backgroundColor:F.toolbar.itemBackgroundColor,color:F.toolbar.fontColor}),Z[Re].innerHTML=Ce[Re]}else!F._dropdownMenu&&F.exportEnabled&&X&&(j=!1,F._dropdownMenu=document.createElement("div"),F._dropdownMenu.setAttribute("tabindex",-1),Z=F.theme&&F.theme.indexOf("dark")!==-1?"black":"#888888",R(F._dropdownMenu,{position:"absolute",zIndex:1,userSelect:"none",MozUserSeelct:"none",WebkitUserSelect:"none",msUserSelect:"none",cursor:"pointer",right:"0px",top:"25px",minWidth:"120px",outline:0,fontSize:"14px",fontFamily:"Arial, Helvetica, sans-serif",padding:"5px 0px 5px 0px",textAlign:"left",lineHeight:"10px",backgroundColor:F.toolbar.itemBackgroundColor,boxShadow:"2px 2px 10px "+Z}),F._dropdownMenu.style.display="none",F._toolBar.appendChild(F._dropdownMenu),L(F._dropdownMenu,"blur",function(){ae(F._dropdownMenu),F._dropDownCloseTime=new Date},F.allDOMEventHandlers,!0),Z=document.createElement("div"),R(Z,{padding:"12px 8px 12px 8px"}),Z.innerHTML=F._cultureInfo.printText,Z.style.backgroundColor=F.toolbar.itemBackgroundColor,Z.style.color=F.toolbar.fontColor,F._dropdownMenu.appendChild(Z),L(Z,"touchstart",function(je){j=!0},F.allDOMEventHandlers),L(Z,"mousemove",function(){j||(this.style.backgroundColor=F.toolbar.itemBackgroundColorOnHover,this.style.color=F.toolbar.fontColorOnHover)},F.allDOMEventHandlers,!0),L(Z,"mouseout",function(){j||(this.style.backgroundColor=F.toolbar.itemBackgroundColor,this.style.color=F.toolbar.fontColor)},F.allDOMEventHandlers,!0),L(Z,"click",function(){F.print(),ae(F._dropdownMenu)},F.allDOMEventHandlers,!0),Z=document.createElement("div"),R(Z,{padding:"12px 8px 12px 8px"}),Z.innerHTML=F._cultureInfo.saveJPGText,Z.style.backgroundColor=F.toolbar.itemBackgroundColor,Z.style.color=F.toolbar.fontColor,F._dropdownMenu.appendChild(Z),L(Z,"touchstart",function(je){j=!0},F.allDOMEventHandlers),L(Z,"mousemove",function(){j||(this.style.backgroundColor=F.toolbar.itemBackgroundColorOnHover,this.style.color=F.toolbar.fontColorOnHover)},F.allDOMEventHandlers,!0),L(Z,"mouseout",function(){j||(this.style.backgroundColor=F.toolbar.itemBackgroundColor,this.style.color=F.toolbar.fontColor)},F.allDOMEventHandlers,!0),L(Z,"click",function(){F.exportChart({format:"jpeg",fileName:F.exportFileName}),ae(F._dropdownMenu)},F.allDOMEventHandlers,!0),Z=document.createElement("div"),R(Z,{padding:"12px 8px 12px 8px"}),Z.innerHTML=F._cultureInfo.savePNGText,Z.style.backgroundColor=F.toolbar.itemBackgroundColor,Z.style.color=F.toolbar.fontColor,F._dropdownMenu.appendChild(Z),L(Z,"touchstart",function(je){j=!0},F.allDOMEventHandlers),L(Z,"mousemove",function(){j||(this.style.backgroundColor=F.toolbar.itemBackgroundColorOnHover,this.style.color=F.toolbar.fontColorOnHover)},F.allDOMEventHandlers,!0),L(Z,"mouseout",function(){j||(this.style.backgroundColor=F.toolbar.itemBackgroundColor,this.style.color=F.toolbar.fontColor)},F.allDOMEventHandlers,!0),L(Z,"click",function(){F.exportChart({format:"png",fileName:F.exportFileName}),ae(F._dropdownMenu)},F.allDOMEventHandlers,!0))}function N(F,j,Z){for(F*=ii,j*=ii,F=Z.getImageData(F,j,2,2).data,j=!0,Z=0;4>Z;Z++)if(F[Z]!==F[Z+4]|F[Z]!==F[Z+8]|F[Z]!==F[Z+12]){j=!1;break}return j?F[0]<<16|F[1]<<8|F[2]:0}function M(F,j,Z){return F in j?j[F]:Z[F]}function B(F,j,Z,Ce){X&&Jn?(Ce=!m(Ce)&&Ce?F.getContext("2d",{willReadFrequently:!0}):F.getContext("2d"),fs=Ce.webkitBackingStorePixelRatio||Ce.mozBackingStorePixelRatio||Ce.msBackingStorePixelRatio||Ce.oBackingStorePixelRatio||Ce.backingStorePixelRatio||1,ii=lr/fs,F.width=j*ii,F.height=Z*ii,lr!==fs&&(F.style.width=j+"px",F.style.height=Z+"px",Ce.scale(ii,ii))):(F.width=j,F.height=Z)}function z(F){if(!Ta){var j=!1,Z=!1;typeof _e.Chart.creditHref>"u"?(F.creditHref=Ri("iuuqr;..b`ow`rkr/bnl."),F.creditText=Ri("B`ow`rKR/bnl")):(j=F.updateOption("creditText"),Z=F.updateOption("creditHref")),F.creditHref&&F.creditText&&(F._creditLink||(F._creditLink=document.createElement("a"),F._creditLink.setAttribute("class","canvasjs-chart-credit"),F._creditLink.setAttribute("title","JavaScript Charts"),R(F._creditLink,{outline:"none",margin:"0px",position:"absolute",right:"2px",top:F.height-14+"px",color:"dimgrey",textDecoration:"none",fontSize:"11px",fontFamily:"Calibri, Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"}),F._creditLink.setAttribute("tabIndex",-1),F._creditLink.setAttribute("target","_blank")),(F.renderCount===0||j||Z)&&(F._creditLink.setAttribute("href",F.creditHref),F._creditLink.innerHTML=F.creditText),F._creditLink&&F.creditHref&&F.creditText?(F._creditLink.parentElement||F._canvasJSContainer.appendChild(F._creditLink),F._creditLink.style.top=F.height-14+"px"):F._creditLink.parentElement&&F._canvasJSContainer.removeChild(F._creditLink))}}function G(F,j,Z){var Ce=document.createElement("canvas");return Ce.setAttribute("class","canvasjs-chart-canvas"),B(Ce,F,j,Z),X||typeof G_vmlCanvasManager>"u"||G_vmlCanvasManager.initElement(Ce),Ce}function R(F,j){for(var Z in j)F.style[Z]=j[Z]}function U(F,j,Z){j.getAttribute("state")||(j.style.backgroundColor=F.toolbar.itemBackgroundColor,j.style.color=F.toolbar.fontColor,j.style.border="none",R(j,{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"})),j.getAttribute("state")!==Z&&(j.setAttribute("state",Z),j.setAttribute("type","button"),R(j,{padding:"5px 12px",cursor:"pointer",float:"left",width:"40px",height:"25px",outline:"0px",verticalAlign:"baseline",lineHeight:"0"}),j.innerHTML="<img src='"+Ma[Z].image+"' alt='"+F._cultureInfo[Z+"Text"]+"' />",R(j.childNodes[0],{height:"95%",pointerEvents:"none"})),j.setAttribute("title",F._cultureInfo[Z+"Text"])}function K(){for(var F=null,j=0;j<arguments.length;j++)F=arguments[j],F.style&&(F.style.display="inline")}function ae(){for(var F=null,j=0;j<arguments.length;j++)(F=arguments[j])&&F.style&&(F.style.display="none")}function Q(F,j,Z,Ce,Re){return F===null||typeof F>"u"?typeof Z>"u"?j:Z:(F=parseFloat(F.toString())*(0<=F.toString().indexOf("%")?j/100:1),typeof Ce<"u"&&(F=Math.min(Ce,F),typeof Re<"u"&&(F=Math.max(Re,F))),!isNaN(F)&&F<=j&&0<=F?F:typeof Z>"u"?j:Z)}function se(F,j,Z,Ce,Re){this._defaultsKey=F,this._themeOptionsKey=j,this._index=Ce,this.parent=Re,this._eventListeners=[],F={},this.theme&&m(this.parent)&&m(j)&&m(Ce)?F=m(this.predefinedThemes[this.theme])?this.predefinedThemes.light1:this.predefinedThemes[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[j]&&(Ce===null?F=this.parent.themeOptions[j]:0<this.parent.themeOptions[j].length&&(Ce=Math.min(this.parent.themeOptions[j].length-1,Ce),F=this.parent.themeOptions[j][Ce])),this.themeOptions=F,this.options=Z||{_isPlaceholder:!0},this.setOptions(this.options,F)}function ge(F,j,Z,Ce,Re){typeof Re>"u"&&(Re=0),this._padding=Re,this._x1=F,this._y1=j,this._x2=Z,this._y2=Ce,this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding}function ue(F,j){ue.base.constructor.call(this,"TextBlock",null,j,null,null),this.ctx=F,this._isDirty=!0,this._wrappedText=null,this._initialize()}function Le(F,j){Le.base.constructor.call(this,"Toolbar","toolbar",j,null,F),this.chart=F,this.canvas=F.canvas,this.ctx=this.chart.ctx,this.optionsName="toolbar"}function Oe(F,j){if(Oe.base.constructor.call(this,"Title","title",j,null,F),this.chart=F,this.canvas=F.canvas,this.ctx=this.chart.ctx,this.optionsName="title",m(this.options.margin)&&F.options.subtitles){for(var Z=F.options.subtitles,Ce=0;Ce<Z.length;Ce++)if((m(Z[Ce].horizontalAlign)&&this.horizontalAlign==="center"||Z[Ce].horizontalAlign===this.horizontalAlign)&&(m(Z[Ce].verticalAlign)&&this.verticalAlign==="top"||Z[Ce].verticalAlign===this.verticalAlign)&&!Z[Ce].dockInsidePlotArea==!this.dockInsidePlotArea){this.margin=0;break}}typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function Ue(F,j,Z){Ue.base.constructor.call(this,"Subtitle","subtitles",j,Z,F),this.chart=F,this.canvas=F.canvas,this.ctx=this.chart.ctx,this.optionsName="subtitles",this.isOptionsInArray=!0,typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function tt(){this.pool=[]}function Pe(F){var j;F&&me[F]&&(j=me[F]),Pe.base.constructor.call(this,"CultureInfo",null,j,null,null)}var Ne=!1,Be={},X=!!document.createElement("canvas").getContext,_e={Chart:{width:500,height:400,zoomEnabled:!1,zoomType:"x",backgroundColor:"white",theme:"light1",animationEnabled:!1,animationDuration:1200,dataPointWidth:null,dataPointMinWidth:null,dataPointMaxWidth:null,colorSet:"colorSet1",culture:"en",creditText:"CanvasJS",interactivityEnabled:!0,exportEnabled:!1,exportFileName:"Chart",rangeChanging:null,rangeChanged:null,publicProperties:{title:"readWrite",subtitles:"readWrite",toolbar:"readWrite",toolTip:"readWrite",legend:"readWrite",axisX:"readWrite",axisY:"readWrite",axisX2:"readWrite",axisY2:"readWrite",data:"readWrite",options:"readWrite",bounds:"readOnly",container:"readOnly",selectedColorSet:"readOnly"}},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:X?"transparent":null,margin:5,wrap:!0,maxWidth:null,textAlign:"center",dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Subtitle:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:14,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:2,wrap:!0,maxWidth:null,textAlign:"center",dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white",publicProperties:{options:"readWrite",chart:"readOnly"}},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null,dockInsidePlotArea:!1,reversed:!1,backgroundColor:X?"transparent":null,borderColor:X?"transparent":null,borderThickness:0,cornerRadius:0,maxWidth:null,maxHeight:null,markerMargin:null,itemMaxWidth:null,itemWidth:null,itemWrap:!0,itemTextFormatter:null,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},ToolTip:{enabled:!0,shared:!1,animationEnabled:!0,content:null,contentFormatter:null,reversed:!1,backgroundColor:X?"rgba(255,255,255,.9)":"rgb(255,255,255)",borderColor:null,borderThickness:2,cornerRadius:5,fontSize:14,fontColor:"black",fontFamily:"Calibri, Arial, Georgia, serif;",fontWeight:"normal",fontStyle:"italic",updated:null,hidden:null,publicProperties:{options:"readWrite",chart:"readOnly"}},Axis:{minimum:null,maximum:null,viewportMinimum:null,viewportMaximum:null,interval:null,intervalType:null,reversed:!1,logarithmic:!1,logarithmBase:10,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",titleWrap:!0,titleMaxWidth:null,titleBackgroundColor:X?"transparent":null,titleBorderColor:X?"transparent":null,titleBorderThickness:0,titleCornerRadius:0,titleTextAlign:"left",labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!0,labelWrap:!0,labelMaxWidth:null,labelFormatter:null,labelBackgroundColor:X?"transparent":null,labelBorderColor:X?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelPlacement:"outside",labelTextAlign:"left",prefix:"",suffix:"",includeZero:!1,tickLength:5,tickColor:"black",tickThickness:1,tickPlacement:"outside",lineColor:"black",lineThickness:1,lineDashType:"solid",gridColor:"#A0A0A0",gridThickness:0,gridDashType:"solid",interlacedColor:X?"transparent":null,valueFormatString:null,margin:2,publicProperties:{options:"readWrite",stripLines:"readWrite",scaleBreaks:"readWrite",crosshair:"readWrite",bounds:"readOnly",chart:"readOnly"}},StripLine:{value:null,startValue:null,endValue:null,color:"orange",opacity:null,thickness:2,lineDashType:"solid",label:"",labelPlacement:"inside",labelAlign:"far",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:null,labelBorderColor:X?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,labelTextAlign:"left",showOnTop:!1,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},ScaleBreaks:{autoCalculate:!1,collapsibleThreshold:"25%",maxNumberOfAutoBreaks:2,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",customBreaks:"readWrite",axis:"readOnly",autoBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Break:{startValue:null,endValue:null,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",scaleBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Crosshair:{enabled:!1,snapToDataPoint:!1,color:"grey",opacity:null,thickness:2,lineDashType:"solid",label:"",labelWrap:!0,labelMaxWidth:null,labelTextAlign:"left",labelBackgroundColor:X?"grey":null,labelBorderColor:X?"grey":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:X?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:12,labelFontColor:"#fff",labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,valueFormatString:null,updated:null,hidden:null,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,highlightEnabled:!0,cursor:"default",indexLabel:"",indexLabelPlacement:"auto",indexLabelOrientation:"horizontal",indexLabelTextAlign:"left",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelBorderColor:null,indexLabelBorderThickness:0,indexLabelLineColor:"gray",indexLabelLineThickness:1,indexLabelLineDashType:"solid",indexLabelMaxWidth:null,indexLabelWrap:!0,indexLabelFormatter:null,lineThickness:2,lineDashType:"solid",connectNullData:!1,nullDataLineDashType:"dash",color:null,lineColor:null,risingColor:"white",fallingColor:"red",fillOpacity:null,startAngle:0,radius:null,innerRadius:null,explodeOnClick:!0,neckHeight:null,neckWidth:null,reversed:!1,valueRepresents:null,linkedDataSeriesIndex:null,whiskerThickness:2,whiskerDashType:"solid",whiskerColor:null,whiskerLength:null,stemThickness:2,stemColor:null,stemDashType:"solid",upperBoxColor:"white",lowerBoxColor:"white",type:"column",xValueType:"number",axisXType:"primary",axisYType:"primary",axisXIndex:0,axisYIndex:0,xValueFormatString:null,yValueFormatString:null,zValueFormatString:null,percentFormatString:null,showInLegend:!1,legendMarkerType:null,legendMarkerColor:null,legendText:null,legendMarkerBorderColor:X?"transparent":null,legendMarkerBorderThickness:0,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:X?"transparent":null,markerBorderThickness:0,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0,publicProperties:{options:"readWrite",axisX:"readWrite",axisY:"readWrite",chart:"readOnly"}},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",textAlign:"left",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",menuText:"More Options",saveJPGText:"Save as JPEG",savePNGText:"Save as PNG",printText:"Print",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")}},me={en:{}},$=X?"Trebuchet MS, Helvetica, sans-serif":"Arial",oe=X?"Impact, Charcoal, sans-serif":"Arial",fe={colorSet1:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #7F6084 #77A033 #33558B #E59566".split(" "),colorSet2:"#6D78AD #51CDA0 #DF7970 #4C9CA0 #AE7D99 #C9D45C #5592AD #DF874D #52BCA8 #8E7AA3 #E3CB64 #C77B85 #C39762 #8DD17E #B57952 #FCC26C".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},ve,Se,Ee,it,st;Se="#333333",Ee="#000000",ve="#666666",st=it="#000000";var nt=20,ze=14,mt={colorSet:"colorSet1",backgroundColor:"#FFFFFF",title:{fontFamily:oe,fontSize:32,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:oe,fontSize:ze,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:$,indexLabelFontSize:ze,indexLabelFontColor:Se,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Se,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:0,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Se,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:0,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Se,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:1,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Se,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:1,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:$,fontSize:14,fontColor:Se,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:$,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1},toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white"}};Ee=Se="#F5F5F5",ve="#FFFFFF",it="#40BAF1",st="#F5F5F5";var nt=20,ze=14,at={colorSet:"colorSet2",title:{fontFamily:$,fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},subtitles:[{fontFamily:$,fontSize:ze,fontColor:"#3A3A3A",fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:$,indexLabelFontSize:ze,indexLabelFontColor:"#666666",indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickThickness:1,tickColor:"#BBBBBB",gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:$,fontSize:14,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:$,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1},toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white"}};Ee=Se="#F5F5F5",ve="#FFFFFF",it="#40BAF1",st="#F5F5F5",nt=20,ze=14,oe={colorSet:"colorSet1",backgroundColor:"#2A2A2A",title:{fontFamily:oe,fontSize:32,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:oe,fontSize:ze,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{itemBackgroundColor:"#666666",itemBackgroundColorOnHover:"#FF7372",buttonBorderColor:"#FF7372",buttonBorderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:$,indexLabelFontSize:ze,indexLabelFontColor:Ee,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:0,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:0,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:1,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:1,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:$,fontSize:14,fontColor:Se,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:$,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:Ee,backgroundColor:"rgba(0, 0, 0, .7)"}},ve="#FFFFFF",Ee=Se="#FAFAFA",it="#40BAF1",st="#F5F5F5";var nt=20,ze=14,It={light1:mt,light2:at,dark1:oe,dark2:{colorSet:"colorSet2",backgroundColor:"#32373A",title:{fontFamily:$,fontSize:32,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:$,fontSize:ze,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{itemBackgroundColor:"#666666",itemBackgroundColorOnHover:"#FF7372",buttonBorderColor:"#FF7372",buttonBorderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:$,indexLabelFontSize:ze,indexLabelFontColor:Ee,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:0,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:0,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:0,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:1,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:$,titleFontSize:nt,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:$,labelFontSize:ze,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:0,lineColor:ve,tickThickness:1,tickColor:ve,gridThickness:1,gridColor:ve,stripLines:[{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:$,labelFontSize:ze,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:st,color:it,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:$,fontSize:14,fontColor:Se,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:$,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:Ee,backgroundColor:"rgba(0, 0, 0, .7)"}},theme1:mt,theme2:at,theme3:mt},ht={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")};(function(){Be.fSDec=function(F){for(var j="",Z=0;Z<F.length;Z++)j+=String.fromCharCode(Math.ceil(F.length/57/5)^F.charCodeAt(Z));return j},delete _e[Be.fSDec("Bi`su")][Be.fSDec("bsdehuIsdg")],Be.pro={sCH:_e[Be.fSDec("Bi`su")][Be.fSDec("bsdehuIsdg")]}})();var Gi=function(){var F=!1;try{var j=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){return F=!0,!1}});window.addEventListener&&(window.addEventListener("test",null,j),window.removeEventListener("test",null,j))}catch{F=!1}return F}(),On={},Pi=null,dn=function(){this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height))},wi=function(F){F.width=1,F.height=1,F.getContext("2d")&&F.getContext("2d").clearRect(0,0,1,1)},Ki=function(F,j,Z){return j=Math.min(this.width,this.height),Math.max(this.theme==="theme4"?0:300<=j?12:11,Math.round(j*(F/400)))},Qi=function(){var F=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,j="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Z="Sun Mon Tue Wed Thu Fri Sat".split(" "),Ce="January February March April May June July August September October November December".split(" "),Re="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),je=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,ke=/[^-+\dA-Z]/g;return function(ut,Mt,ot){var _i=ot?ot.days:j,Ut=ot?ot.months:Ce,ci=ot?ot.shortDays:Z,re=ot?ot.shortMonths:Re;ot="";var pe=!1;if(ut=ut&&ut.getTime?ut:ut?new Date(ut):new Date,isNaN(ut))throw SyntaxError("invalid date");Mt.slice(0,4)==="UTC:"&&(Mt=Mt.slice(4),pe=!0),ot=pe?"getUTC":"get";var ye=ut[ot+"Date"](),xe=ut[ot+"Day"](),Ve=ut[ot+"Month"](),r=ut[ot+"FullYear"](),d=ut[ot+"Hours"](),h=ut[ot+"Minutes"](),o=ut[ot+"Seconds"](),c=ut[ot+"Milliseconds"](),x=pe?0:ut.getTimezoneOffset();return ot=Mt.replace(F,function(y){switch(y){case"D":return ye;case"DD":return s(ye,2);case"DDD":return ci[xe];case"DDDD":return _i[xe];case"M":return Ve+1;case"MM":return s(Ve+1,2);case"MMM":return re[Ve];case"MMMM":return Ut[Ve];case"Y":return parseInt(String(r).slice(-2));case"YY":return s(String(r).slice(-2),2);case"YYY":return s(String(r).slice(-3),3);case"YYYY":return s(r,4);case"h":return d%12||12;case"hh":return s(d%12||12,2);case"H":return d;case"HH":return s(d,2);case"m":return h;case"mm":return s(h,2);case"s":return o;case"ss":return s(o,2);case"f":return s(String(c),3).slice(0,1);case"ff":return s(String(c),3).slice(0,2);case"fff":return s(String(c),3).slice(0,3);case"t":return 12>d?"a":"p";case"tt":return 12>d?"am":"pm";case"T":return 12>d?"A":"P";case"TT":return 12>d?"AM":"PM";case"K":return pe?"UTC":(String(ut).match(je)||[""]).pop().replace(ke,"");case"z":return(0<x?"-":"+")+Math.floor(Math.abs(x)/60);case"zz":return(0<x?"-":"+")+s(Math.floor(Math.abs(x)/60),2);case"zzz":return(0<x?"-":"+")+s(Math.floor(Math.abs(x)/60),2)+s(Math.abs(x)%60,2);default:return y.slice(1,y.length-1)}})}}(),ka=function(F){var j=0>F;if(1>Math.abs(F)){var Z=parseInt(F.toString().split("e-")[1]);Z&&(F=(j?-1*F:F)*Math.pow(10,Z-1),F="0."+Array(Z).join("0")+F.toString().substring(2),F=j?"-"+F:F)}else Z=parseInt(F.toString().split("+")[1]),20<Z&&(Z-=20,F/=Math.pow(10,Z),F=F.toString()+Array(Z+1).join("0"));return String(F)},Nt=function(F,j,Z){if(F===null)return"";if(!isFinite(F))return F;F=Number(F);var Ce=0>F;Ce&&(F*=-1);var Re=Z?Z.decimalSeparator:".",je=Z?Z.digitGroupSeparator:",",ke="";j=String(j);var ke=1,ye=Z="",ut=-1,Mt=[],ot=[],_i=0,Ut=0,ci=0,re=!1,pe=0,ye=j.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);j=null;for(var xe=0;ye&&xe<ye.length;xe++)if(j=ye[xe],j==="."&&0>ut)ut=xe;else{if(j==="%")ke*=100;else if(j==="‰"){ke*=1e3;continue}else if(j[0]===","&&j[j.length-1]==="."){ke/=Math.pow(1e3,j.length-1),ut=xe+j.length-1;continue}else j[0]!=="E"&&j[0]!=="e"||j[j.length-1]!=="0"||(re=!0);0>ut?(Mt.push(j),j==="#"||j==="0"?_i++:j===","&&ci++):(ot.push(j),j!=="#"&&j!=="0"||Ut++)}for(re&&(j=Math.floor(F),ye=-Math.floor(Math.log(F)/Math.LN10+1),pe=F===0?0:j===0?-(_i+ye):ka(j).length-_i,ke/=Math.pow(10,pe)),0>ut&&(ut=xe),ke=(F*ke).toFixed(Ut),j=ke.split("."),ke=(j[0]+"").split(""),F=(j[1]+"").split(""),ke&&ke[0]==="0"&&ke.shift(),re=ye=xe=Ut=ut=0;0<Mt.length;)if(j=Mt.pop(),j==="#"||j==="0")if(ut++,ut===_i){var Ve=ke,ke=[];if(j==="0")for(j=_i-Ut-(Ve?Ve.length:0);0<j;)Ve.unshift("0"),j--;for(;0<Ve.length;)Z=Ve.pop()+Z,re++,re%ye===0&&xe===ci&&0<Ve.length&&(Z=je+Z)}else 0<ke.length?(Z=ke.pop()+Z,Ut++,re++):j==="0"&&(Z="0"+Z,Ut++,re++),re%ye===0&&xe===ci&&0<ke.length&&(Z=je+Z);else j[0]!=="E"&&j[0]!=="e"||j[j.length-1]!=="0"||!/[eE][+-]*[0]+/.test(j)?j===","?(xe++,ye=re,re=0,0<ke.length&&(Z=je+Z)):Z=1<j.length&&(j[0]==='"'&&j[j.length-1]==='"'||j[0]==="'"&&j[j.length-1]==="'")?j.slice(1,j.length-1)+Z:j+Z:(j=0>pe?j.replace("+","").replace("-",""):j.replace("-",""),Z+=j.replace(/[0]+/,function(r){return s(pe,r.length)}));for(je="",Mt=!1;0<ot.length;)j=ot.shift(),j==="#"||j==="0"?0<F.length&&Number(F.join(""))!==0?(je+=F.shift(),Mt=!0):j==="0"&&(je+="0",Mt=!0):1<j.length&&(j[0]==='"'&&j[j.length-1]==='"'||j[0]==="'"&&j[j.length-1]==="'")?je+=j.slice(1,j.length-1):j[0]!=="E"&&j[0]!=="e"||j[j.length-1]!=="0"||!/[eE][+-]*[0]+/.test(j)?je+=j:(j=0>pe?j.replace("+","").replace("-",""):j.replace("-",""),je+=j.replace(/[0]+/,function(r){return s(pe,r.length)}));return Z+=(Mt?Re:"")+je,Ce?"-"+Z:Z},Yi=function(F){var j=0,Z=0;return F=F||window.event,F.offsetX||F.offsetX===0?(j=F.offsetX,Z=F.offsetY):F.layerX||F.layerX==0?(j=F.layerX,Z=F.layerY):(j=F.pageX-F.target.offsetLeft,Z=F.pageY-F.target.offsetTop),{x:j,y:Z}},Jn=!0,lr=window.devicePixelRatio||1,fs=1,ii=lr/fs,Tt=function(F,j,Z,Ce,Re,je,ke,ut,Mt,ot,_i,Ut,ci){typeof ci>"u"&&(ci=1),ke=ke||0,ut=ut||"black";var re=15<Ce-j&&15<Re-Z?8:.35*Math.min(Ce-j,Re-Z);F.beginPath(),F.moveTo(j,Z),F.save(),F.fillStyle=je,F.globalAlpha=ci,F.fillRect(j,Z,Ce-j,Re-Z),F.globalAlpha=1,0<ke&&(ci=ke%2===0?0:.5,F.beginPath(),F.lineWidth=ke,F.strokeStyle=ut,F.moveTo(j,Z),F.rect(j-ci,Z-ci,Ce-j+2*ci,Re-Z+2*ci),F.stroke()),F.restore(),Mt===!0&&(F.save(),F.beginPath(),F.moveTo(j,Z),F.lineTo(j+re,Z+re),F.lineTo(Ce-re,Z+re),F.lineTo(Ce,Z),F.closePath(),ke=F.createLinearGradient((Ce+j)/2,Z+re,(Ce+j)/2,Z),ke.addColorStop(0,je),ke.addColorStop(1,"rgba(255, 255, 255, .4)"),F.fillStyle=ke,F.fill(),F.restore()),ot===!0&&(F.save(),F.beginPath(),F.moveTo(j,Re),F.lineTo(j+re,Re-re),F.lineTo(Ce-re,Re-re),F.lineTo(Ce,Re),F.closePath(),ke=F.createLinearGradient((Ce+j)/2,Re-re,(Ce+j)/2,Re),ke.addColorStop(0,je),ke.addColorStop(1,"rgba(255, 255, 255, .4)"),F.fillStyle=ke,F.fill(),F.restore())},Ri=function(F){for(var j="",Z=0;Z<F.length;Z++)j+=String.fromCharCode(Math.ceil(F.length/57/5)^F.charCodeAt(Z));return j},Ta=window&&window[Ri("mnb`uhno")]&&window[Ri("mnb`uhno")].href&&window[Ri("mnb`uhno")].href.indexOf&&(window[Ri("mnb`uhno")].href.indexOf(Ri("b`ow`rkr/bnl"))!==-1||window[Ri("mnb`uhno")].href.indexOf(Ri("gdonqhy/bnl"))!==-1||window[Ri("mnb`uhno")].href.indexOf(Ri("gheemd"))!==-1)&&window[Ri("mnb`uhno")].href.indexOf(Ri("gheemd"))===-1,Ma={reset:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAeCAYAAABJ/8wUAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPjSURBVFhHxVdJaFNRFP1J/jwkP5MxsbaC1WJEglSxOFAXIsFpVRE3ggi1K90obioRRBA33XXnQnciirhQcMCdorgQxBkXWlREkFKsWkv5npvckp/XnzRpKh64kLw733fffe9L/wrL0+mVUdO8uTSZ3MBL/we2qg4rkuSpodCELstXE46ziVkLQ6FQcGOmeSSq6wd4aV50d3drWjj8kQKZJTUc9kxFGenv79dZrDksTSTWWJp2QYtEPiErysyzdX0LsxsCQR8keX8gs6RHIk8ysdgKFg2G53mhuOPsshTlBjKaFo1g7SqLNoShKLdFXT8huQ/paLSbxatYnc2mHMM4hr18Vi8TIvCmXF3vYrW6cF23gGTOk0M1wA4RKvOmq6vLZRVJipvmSWT6tZ6CSEYkco5V50VPT4+D7RwOqi6RiSZm0fJ+vggSqkeoypdsNmuyelNwbXsbgvkWYMtzDWNvWaijoyOBqE+hVK8abcssUeXQ/YfKyi0gFYv1Ipgfoj34fYGTJLOYJA0ODirok32GLN8XhUWCwSes1hIwBg6LydJ/tEeRRapAdUp+wSAiZchtZZWWgAZ+JNpD8peYXQVK9UwUxNpzOK8pq97kURZhYTCKBwPD7h2zK+js7Myi7D8Fod+0TkMI8+EMAngLGc/WtBFWawkFHFnoj/t9KLgGmF0B3QfkxC+EarxkdhnFYlFLY06USqUwL7UMjICHfh/wOc2sCqhpxGbCkLvL7EUDbF73+6DkmVWB6zi7xUDQSLeYvWjAILvm9zEnkJhlbRcDQZcv6Kg2AipyT/Axw6wKlqVSqxDdjF8Izfod13qURdrG/nxehY+xGh+h0CSzKygGvSNQIcc097BI24jb9hax6kj2E7OrMFX1il+ICEf2NrPbhiXLl+fYl+U7zK4iYdsDcyLGf+ofFlkwcN+s10KhmpuYhhtm0hCLVIFL0MDsqNlDIqy9x2CLs1jL6OvrI7vPRbtohXG6eFmsFnHDGAp6n9AgyuVySRZrGvROxRgIfLXhzjrNYnNBUxNX/dMgRWT1mt4XLDovaApD53E9W3ilNX5M55LJHpRtIsgAvciR4WWcgK2Dvb1YqgXevmF8z2zEBTcKG39EfSKsT9EbhVUaI2FZO+oZIqImxol6j66/hcAu4sSN4vc1ZPoKeoE6RGhYL2YYA+ymOSSi0Z0wWntbtkGUWCvfSDXIxONraZ/FY90KUfNTpfC5spnNLgxoYNnR9RO4F8ofXEHOgogCQE99w+fF2Xw+b7O59rEOsyRqGEfpVoaDMQQ1CZrG46bcM6AZ0C/wPqNfHliqejyTySxh9TqQpL+xmbIlkB9SlAAAAABJRU5ErkJggg=="},pan:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAICSURBVEhLxZbPahNRGMUn/5MpuAiBEAIufQGfzr5E40YptBXajYzudCEuGqS+gGlrFwquDGRTutBdYfydzJ3LzeQmJGZue+Dw/Z17Mnfmu5Pof9Hr9Z61Wq0bWZMKj263O6xWq99wU9lOpzPMKgEhEcRucNOcioOK+0RzBhNvt9tPV4nmVF19+OWhVqt9xXgFXZq+8lCv119UKpUJ7iX2FmvFTKz8RH34YdBsNk8wVtjE4fGYwm8wrrDi3WBG5oKXZGRSS9hGuNFojLTe2lFz5xThWZIktayyiE2FdT3rzXBXz7krKiL8c17wAKFDjCus2AvW+YGZ9y2JF0VFRuMPfI//rsCE/C+s26s4gQu9ul7r4NteKx7H8XOC724xNNGbaNu++IrBqbOV7Tj3FgMRvc/YKOr3+3sE47wgEt/Bl/gaK5cHbNU11vYSXylfpK7XOvjuumPp4Wcoipu30Qsez2uMXYz4lfI+mOmwothY+SLiXJy7mKVpWs3Si0CoOMfeI9Od43Wic+jO+ZVv+crsm9QSNhUW9LXSeoPBYLXopthGuFQgdIxxhY+UDwlt1x5CZ1hX+NTUdt/OIvjKaDSmuOJfaIVNPKX+W18j/PLA2/kR44p5Sd8HbHngT/yTfNRWUXX14ZcL3wmX0+TLf8YO7CGT8yFE5zB3/gney25/OETRP9CtPDFe5jShAAAAAElFTkSuQmCC"},zoom:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALWSURBVEhLvZZLaBNRFIabyftBIgEfqCCBoCC6MYqiXYiIj4U76U4X7sUHbhQhUBfixhZEUBDB16YuFERaUaQLK7ooCOJj4UKtYEFU0EptShO/A9Ph3js3k8lo/eHnP7n3nP/M3LlzMz1hkUwmNziOcyKRSFyFt+LxeD/c2Wq1Ym7Kv0M2m11Os1OxWGycn1OwZXCGuXfwIhezkd9/jRgNT2L4ldhs1pbkX5OLJe4euVxuGQaPCa3mnUjtJx7BDuKusJTCV6jVVGHTMuYRjxma7yIOhTgFY6jNaAKew2xPKpVay9ganmkvj+M448/MfJdT5K5Gg4HJacRngPFgqVRaRNwW1B4i7yehWfsEDdz1K+A01AoxPIqGAiuwGfkOTY8+1A6u7AyiFTB2Hu0KPIrdiOnzHLWDybeImvy+Wq2mZa5bUHsD0Zpz+KxHdWQymV6kAb1ElqeORgJLvgnRdj1+R1AfzkIvSUjxVjQSarVakrueIPT8+H1F5jSUy+WXiJrUYBVWyVxU4PEU8TzhfaijUqnMIWrjaY492eWRwdKOIqrnIxnXwLLeRLwk2GQzrEMjg0avEbXxkIxr4OoOImpj2QwyFgms1koa/SZUG8s+0iGnEhNfCNXEhzIXBVz0McTzEvJ+70P9oNFtxEzei3aFYrFYxmuSUPWSv9Yi9IMm2xE1We56Mp1OV4nDwqFmBDV9gk9AEh4gZtFHNt8W4kAUCoXF5MorY9Z/kDni9nDv7hc0i2fhgLvTtX8a99PoMPPagTFPxofRzmDJ9yM+AyEmTfgGysYbQcfhDzPPJDmX0c7gDg4gs9BqFIWhm/Nct5H8gtBq1I7UfIbtvmIuoaGQcp+fdpbbSM43eEH5wrwLbXmhm/fU63VHXjcuok7hEByFY/AeHGC8L5/PL3HT5xGH1uYwfPOICGo+CBcU0vwO1BqzUqILDl/z/9VYIMfpddiAc47jDP8BsUpb13wOLRwAAAAASUVORK5CYII="},menu:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAeCAYAAABE4bxTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADoSURBVFhH7dc9CsJAFATgRxIIBCwCqZKATX5sbawsY2MvWOtF9AB6AU8gguAJbD2AnZ2VXQT/Ko2TYGCL2OYtYQc+BuYA+1hCtnCVwMm27SGaXpDJIAiCvCkVR05hGOZNN3HkFMdx3nQRR06+76/R1IcFLJlNQEWlmWlBTwJtKLKHynehZqnjOGM0PYWRVXk61C37p7xlZ3Hk5HneCk1dmMH811xGoKLSzDiQwIBZB4ocoPJdqNkDt2yKlueWRVGUtzy3rPwo3sWRU3nLjuLI6OO67oZM00wMw3hrmpZx0XU9syxrR0T0BeMpb9dneSR2AAAAAElFTkSuQmCC"}};se.prototype.setOptions=function(F,j){if(_e[this._defaultsKey]){var Z=_e[this._defaultsKey],Ce;for(Ce in Z)Ce!=="publicProperties"&&Z.hasOwnProperty(Ce)&&(this[Ce]=F&&Ce in F?F[Ce]:j&&Ce in j?j[Ce]:Z[Ce])}},se.prototype.get=function(F){var j=_e[this._defaultsKey];if(F==="options")return this.options&&this.options._isPlaceholder?null:this.options;if(j.hasOwnProperty(F)||j.publicProperties&&j.publicProperties.hasOwnProperty(F))return this[F];window.console&&window.console.log('Property "'+F+`" doesn't exist. Please check for typo.`)},se.prototype.set=function(F,j,Z){Z=typeof Z>"u"?!0:Z;var Ce=_e[this._defaultsKey];if(F==="options")this.createUserOptions(j);else if(Ce.hasOwnProperty(F)||Ce.publicProperties&&Ce.publicProperties.hasOwnProperty(F)&&Ce.publicProperties[F]==="readWrite")this.options._isPlaceholder&&this.createUserOptions(),this.options[F]=j;else{window.console&&(Ce.publicProperties&&Ce.publicProperties.hasOwnProperty(F)&&Ce.publicProperties[F]==="readOnly"?window.console.log('Property "'+F+'" is read-only.'):window.console.log('Property "'+F+`" doesn't exist. Please check for typo.`));return}Z&&(this.stockChart||this.chart||this).render()},se.prototype.addTo=function(F,j,Z,Ce){Ce=typeof Ce>"u"?!0:Ce;var Re=_e[this._defaultsKey];Re.hasOwnProperty(F)||Re.publicProperties&&Re.publicProperties.hasOwnProperty(F)&&Re.publicProperties[F]==="readWrite"?(this.options._isPlaceholder&&this.createUserOptions(),typeof this.options[F]>"u"&&(this.options[F]=[]),F=this.options[F],Z=typeof Z>"u"||Z===null?F.length:Z,F.splice(Z,0,j),Ce&&(this.stockChart||this.chart||this).render()):window.console&&(Re.publicProperties&&Re.publicProperties.hasOwnProperty(F)&&Re.publicProperties[F]==="readOnly"?window.console.log('Property "'+F+'" is read-only.'):window.console.log('Property "'+F+`" doesn't exist. Please check for typo.`))},se.prototype.createUserOptions=function(F){if(typeof F<"u"||this.options._isPlaceholder)if(this.parent&&this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.isOptionsInArray){this.parent.options[this.optionsName]||(this.parent.options[this.optionsName]=[]);var j=this.parent.options[this.optionsName],Z=j.length;this.options._isPlaceholder||(k(j),Z=j.indexOf(this.options)),this.options=typeof F>"u"?{}:F,j[Z]=this.options}else this.options=typeof F>"u"?{}:F,this.parent&&(F=this.parent.options,this.optionsName?j=this.optionsName:(j=this._defaultsKey)&&j.length!==0?(Z=j.charAt(0).toLowerCase(),1<j.length&&(Z=Z.concat(j.slice(1))),j=Z):j=void 0,F[j]=this.options)},se.prototype.remove=function(F){if(F=typeof F>"u"?!0:F,this.isOptionsInArray){var j=this.parent.options[this.optionsName];k(j);var Z=j.indexOf(this.options);0<=Z&&j.splice(Z,1)}else delete this.parent.options[this.optionsName];F&&(this.stockChart||this.chart||this).render()},se.prototype.updateOption=function(F){!_e[this._defaultsKey]&&Ne&&console.log("defaults not set");var j=_e[this._defaultsKey],Z={},Ce=this[F],Re=this._themeOptionsKey,je=this._index;return this.theme&&m(this.parent)&&m(Re)&&m(je)?Z=m(this.predefinedThemes[this.theme])?this.predefinedThemes.light1:this.predefinedThemes[this.theme]:this.parent&&this.parent.themeOptions&&(this.options.theme?this._defaultsKey==="Chart"&&It[this.options.theme]?Z=It[this.options.theme]:stockThemes[this.options.theme]&&(Z=stockThemes[this.options.theme][Re]):this.parent.themeOptions[Re]&&(je===null?Z=this.parent.themeOptions[Re]:0<this.parent.themeOptions[Re].length&&(Z=Math.min(this.parent.themeOptions[Re].length-1,je),Z=this.parent.themeOptions[Re][Z]))),this.themeOptions=Z,F in j&&(Ce=F in this.options?this.options[F]:Z&&F in Z?Z[F]:j[F]),Ce===this[F]?!1:(this[F]=Ce,!0)},se.prototype.trackChanges=function(F){if(!this.sessionVariables)throw"Session Variable Store not set";this.sessionVariables[F]=this.options[F]},se.prototype.isBeingTracked=function(F){return this.options._oldOptions||(this.options._oldOptions={}),!!this.options._oldOptions[F]},se.prototype.hasOptionChanged=function(F){if(!this.sessionVariables)throw"Session Variable Store not set";return this.sessionVariables[F]!==this.options[F]},se.prototype.addEventListener=function(F,j,Z){F&&j&&(this._eventListeners[F]=this._eventListeners[F]||[],this._eventListeners[F].push({context:Z||this,eventHandler:j}))},se.prototype.removeEventListener=function(F,j){if(F&&j&&this._eventListeners[F]){for(var Z=this._eventListeners[F],Ce=0;Ce<Z.length;Ce++)if(Z[Ce].eventHandler===j){Z[Ce].splice(Ce,1);break}}},se.prototype.removeAllEventListeners=function(){this._eventListeners=[]},se.prototype.dispatchEvent=function(F,j,Z){if(F&&this._eventListeners[F]){j=j||{};for(var Ce=this._eventListeners[F],Re=0;Re<Ce.length;Re++)Ce[Re].eventHandler.call(Ce[Re].context,j)}typeof this[F]=="function"&&this[F].call(Z||this.chart,j)},ge.prototype.registerSpace=function(F,j){F==="top"?this._topOccupied+=j.height:F==="bottom"?this._bottomOccupied+=j.height:F==="left"?this._leftOccupied+=j.width:F==="right"&&(this._rightOccupied+=j.width)},ge.prototype.unRegisterSpace=function(F,j){F==="top"?this._topOccupied-=j.height:F==="bottom"?this._bottomOccupied-=j.height:F==="left"?this._leftOccupied-=j.width:F==="right"&&(this._rightOccupied-=j.width)},ge.prototype.getFreeSpace=function(){return{x1:this._x1+this._leftOccupied,y1:this._y1+this._topOccupied,x2:this._x2-this._rightOccupied,y2:this._y2-this._bottomOccupied,width:this._x2-this._x1-this._rightOccupied-this._leftOccupied,height:this._y2-this._y1-this._bottomOccupied-this._topOccupied}},ge.prototype.reset=function(){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding},e(ue,se),ue.prototype._initialize=function(){m(this.padding)||typeof this.padding!="object"?this.topPadding=this.rightPadding=this.bottomPadding=this.leftPadding=Number(this.padding)|0:(this.topPadding=m(this.padding.top)?0:Number(this.padding.top)|0,this.rightPadding=m(this.padding.right)?0:Number(this.padding.right)|0,this.bottomPadding=m(this.padding.bottom)?0:Number(this.padding.bottom)|0,this.leftPadding=m(this.padding.left)?0:Number(this.padding.left)|0)},ue.prototype.render=function(F){if(this.fontSize!==0){F&&this.ctx.save();var j=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var Z=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+Z),this.textBaseline==="middle"&&(Z=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var Ce=0,Re=this.topPadding,je=null;for(this.ctx.roundRect||l(this.ctx),(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,Z,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,Z=0;Z<this._wrappedText.lines.length;Z++)je=this._wrappedText.lines[Z],this.textAlign==="right"?Ce=this.width-je.width-this.rightPadding:this.textAlign==="left"?Ce=this.leftPadding:this.textAlign==="center"&&(Ce=(this.width-(this.leftPadding+this.rightPadding))/2-je.width/2+this.leftPadding),this.ctx.fillText(je.text,Ce,Re),Re+=je.height;this.ctx.font=j,F&&this.ctx.restore()}},ue.prototype.setText=function(F){this.text=F,this._isDirty=!0,this._wrappedText=null},ue.prototype.measureText=function(){if(this._lineHeight=A(this.fontFamily,this.fontSize,this.fontWeight),this.maxWidth===null)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},ue.prototype._getLineWithWidth=function(F,j,Z){if(F=String(F),!F)return{text:"",width:0};var Ce=Z=0,Re=F.length-1,je=1/0;for(this.ctx.font=this._getFontString();Ce<=Re;){var je=Math.floor((Ce+Re)/2),ke=F.substr(0,je+1);if(Z=this.ctx.measureText(ke).width,Z<j)Ce=je+1;else if(Z>j)Re=je-1;else break}return Z>j&&1<ke.length&&(ke=ke.substr(0,ke.length-1),Z=this.ctx.measureText(ke).width),j=!0,(ke.length===F.length||F[ke.length]===" ")&&(j=!1),j&&(F=ke.split(" "),1<F.length&&F.pop(),ke=F.join(" "),Z=this.ctx.measureText(ke).width),{text:ke,width:Z}},ue.prototype._wrapText=function(){var F=new String(a(String(this.text))),j=[],Z=this.ctx.font,Ce=0,Re=0;if(this.ctx.font=this._getFontString(),this.frontSize===0)Re=Ce=0;else for(;0<F.length;){var je=this.maxHeight-(this.topPadding+this.bottomPadding),ke=this._getLineWithWidth(F,this.maxWidth-(this.leftPadding+this.rightPadding),!1);ke.height=this._lineHeight,j.push(ke);var ut=Re,Re=Math.max(Re,ke.width),Ce=Ce+ke.height,F=a(F.slice(ke.text.length,F.length));je&&Ce>je&&(ke=j.pop(),Ce-=ke.height,Re=ut)}this._wrappedText={lines:j,width:Re,height:Ce},this.width=Re+(this.leftPadding+this.rightPadding),this.height=Ce+(this.topPadding+this.bottomPadding),this.ctx.font=Z},ue.prototype._getFontString=function(){var F;F=this.fontStyle?this.fontStyle+" ":"",F+=this.fontWeight?this.fontWeight+" ":"",F+=this.fontSize?this.fontSize+"px ":"";var j=this.fontFamily?this.fontFamily+"":"";return!X&&j&&(j=j.split(",")[0],j[0]!=="'"&&j[0]!=='"'&&(j="'"+j+"'")),F+=j},e(Le,se),e(Oe,se),Oe.prototype.setLayout=function(){if(this.text){var F=this.dockInsidePlotArea?this.chart.plotArea:this.chart,j=F.layoutManager.getFreeSpace(),Z=j.x1,Ce=j.y1,Re=0,je=0,ke=this.chart._menuButton&&this.chart.exportEnabled&&this.verticalAlign==="top"?40:0,ut,Mt;this.textAlign=m(this.options.textAlign)?this.horizontalAlign:this.textAlign,this.verticalAlign==="top"||this.verticalAlign==="bottom"?(this.maxWidth===null&&(this.maxWidth=j.width-4-ke*(this.horizontalAlign==="center"?2:1)),je=.5*j.height-this.margin-2,Re=0):this.verticalAlign==="center"&&(this.horizontalAlign==="left"||this.horizontalAlign==="right"?(this.maxWidth===null&&(this.maxWidth=j.height-4),je=.5*j.width-this.margin-2):this.horizontalAlign==="center"&&(this.maxWidth===null&&(this.maxWidth=j.width-4),je=.5*j.height-4));var ot;m(this.padding)||typeof this.padding!="number"?m(this.padding)||typeof this.padding!="object"||(ot=this.padding.top?this.padding.top:this.padding.bottom?this.padding.bottom:0,ot+=this.padding.bottom?this.padding.bottom:this.padding.top?this.padding.top:0):ot=2*this.padding,this.wrap||(je=Math.min(je,1.5*this.fontSize+ot)),je=new ue(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,textAlign:this.textAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:this.maxWidth,maxHeight:je,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"middle"}),ot=je.measureText(),this.verticalAlign==="top"||this.verticalAlign==="bottom"?(this.verticalAlign==="top"?(Ce=j.y1+2+this.fontSize/2+4,Mt="top"):this.verticalAlign==="bottom"&&(Ce=j.y2-2-ot.height+this.fontSize/2+4,Mt="bottom"),this.horizontalAlign==="left"?Z=j.x1+2:this.horizontalAlign==="center"?Z=j.x1+j.width/2-ot.width/2:this.horizontalAlign==="right"&&(Z=j.x2-2-ot.width-ke),ut=this.horizontalAlign,this.width=ot.width,this.height=ot.height):this.verticalAlign==="center"&&(this.horizontalAlign==="left"?(Z=j.x1+2+(this.fontSize/2+4),Ce=j.y2-2-(this.maxWidth/2-ot.width/2),Re=-90,Mt="left",this.width=ot.height,this.height=ot.width):this.horizontalAlign==="right"?(Z=j.x2-2-(this.fontSize/2+4),Ce=j.y1+2+(this.maxWidth/2-ot.width/2),Re=90,Mt="right",this.width=ot.height,this.height=ot.width):this.horizontalAlign==="center"&&(Ce=F.y1+(F.height/2-ot.height/2)+this.fontSize/2+4,Z=F.x1+(F.width/2-ot.width/2),Mt="center",this.width=ot.width,this.height=ot.height),ut="center"),je.x=Z,je.y=Ce,je.angle=Re,je.horizontalAlign=ut,this._textBlock=je,F.layoutManager.registerSpace(Mt,{width:this.width+(Mt==="left"||Mt==="right"?this.margin+2:0),height:this.height+(Mt==="top"||Mt==="bottom"?this.margin+2:0)}),this.bounds={x1:Z,y1:Ce,x2:Z+this.width,y2:Ce+this.height},this.ctx.textBaseline="top"}},Oe.prototype.render=function(){this._textBlock&&this._textBlock.render(!0)},e(Ue,se),Ue.prototype.setLayout=Oe.prototype.setLayout,Ue.prototype.render=Oe.prototype.render,tt.prototype.get=function(F,j){var Z=null;return 0<this.pool.length?(Z=this.pool.pop(),B(Z,F,j)):Z=G(F,j),Z},tt.prototype.release=function(F){this.pool.push(F)},e(Pe,se);var vo={addTheme:function(F,j){It[F]=j},addColorSet:function(F,j){fe[F]=j},addCultureInfo:function(F,j){me[F]=j},formatNumber:function(F,j,Z){if(Z=Z||"en",me[Z])return Nt(F,j||"#,##0.##",new Pe(Z));throw"Unknown Culture Name"},formatDate:function(F,j,Z){if(Z=Z||"en",me[Z])return Qi(F,j||"DD MMM YYYY",new Pe(Z));throw"Unknown Culture Name"}};t.exports=vo,$=vo.Chart=function(){function F(r,d){return r.x-d.x}function j(r,d,h){d=d||{},m(h)?(this.predefinedThemes=It,this.optionsName=this.parent=this.index=null):(this.parent=h.parent,this.index=h.index,this.predefinedThemes=h.predefinedThemes,this.optionsName=h.optionsName,this.stockChart=h.stockChart,this.panel=r,this.isOptionsInArray=h.isOptionsInArray),this.theme=m(d.theme)||m(this.predefinedThemes[d.theme])?"light1":d.theme,j.base.constructor.call(this,"Chart",this.optionsName,d,this.index,this.parent);var o=this;this._containerId=r,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.isAnimating=!1,this.renderCount=0,this.disableToolTip=this.animatedRender=!1,this.canvasPool=new tt,this.allDOMEventHandlers=[],this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],(this.container=typeof this._containerId=="string"?document.getElementById(this._containerId):this._containerId)?(this.container.innerHTML="",d=r=0,r=this.options.width?this.width:0<this.container.clientWidth?this.container.clientWidth:this.width,d=h&&h.height?h.height:this.options.height?this.height:0<this.container.clientHeight?this.container.clientHeight:this.height,this.width=r,this.height=d,this.x1=this.y1=0,this.x2=this.width,this.y2=this.height,this.selectedColorSet=typeof fe[this.colorSet]<"u"?fe[this.colorSet]:fe.colorSet1,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",this._canvasJSContainer.style.textAlign="left",this._canvasJSContainer.style.cursor="auto",this._canvasJSContainer.style.direction="ltr",X||(this._canvasJSContainer.style.height="0px"),this.container.appendChild(this._canvasJSContainer),this.canvas=G(r,d),this._preRenderCanvas=G(r,d),this.canvas.style.position="absolute",this.canvas.style.WebkitUserSelect="none",this.canvas.style.MozUserSelect="none",this.canvas.style.msUserSelect="none",this.canvas.style.userSelect="none",this.canvas.getContext&&(this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",l(this.ctx),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this._preRenderCtx.textBaseline="top",l(this._preRenderCtx),X?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=G(r,d),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=G(r,d),this.overlaidCanvas.style.position="absolute",this.overlaidCanvas.style.webkitTapHighlightColor="transparent",this.overlaidCanvas.style.WebkitUserSelect="none",this.overlaidCanvas.style.MozUserSelect="none",this.overlaidCanvas.style.msUserSelect="none",this.overlaidCanvas.style.userSelect="none",this.overlaidCanvas.getContext&&(this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",l(this.overlaidCanvasCtx)),this._eventManager=new ci(this),this.windowResizeHandler=L(window,"resize",function(){o._updateSize()&&(o.render(),o.isNavigator&&o.stockChart&&o.stockChart.navigator&&o.stockChart.navigator.enabled&&o.stockChart.navigator._updateSlider(o.stockChart._axisXMin,o.stockChart._axisXMax))},this.allDOMEventHandlers),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),R(this._toolBar,{position:"absolute",right:"1px",top:"1px"}),this._canvasJSContainer.appendChild(this._toolBar),this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},L(this.overlaidCanvas,"click",function(c){o._mouseEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mousemove",function(c){o._mouseEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mouseup",function(c){o._mouseEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mousedown",function(c){o._mouseEventHandler(c),ae(o._dropdownMenu)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mouseout",function(c){o._mouseEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(c){o._touchEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(c){o._touchEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(c){o._touchEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(c){o._touchEventHandler(c)},this.allDOMEventHandlers),this.toolTip=new Ut(this,this.options.toolTip),this.data=null,this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this.sessionVariables={axisX:[],axisX2:[],axisY:[],axisY2:[]})):window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function Z(r,d){for(var h=[],o,c=0;c<r.length;c++)if(c==0)h.push(r[0]);else{var x,y,S;S=c-1,x=S===0?0:S-1,y=S===r.length-1?S:S+1,o=Math.abs((r[y].x-r[x].x)/(r[y].x-r[S].x===0?.01:r[y].x-r[S].x))*(d-1)/2+1;var E=(r[y].x-r[x].x)/o;o=(r[y].y-r[x].y)/o,h[h.length]=r[S].x>r[x].x&&0<E||r[S].x<r[x].x&&0>E?{x:r[S].x+E/3,y:r[S].y+o/3}:{x:r[S].x,y:r[S].y+(h.length===1?0:o/9)},S=c,x=S===0?0:S-1,y=S===r.length-1?S:S+1,o=Math.abs((r[y].x-r[x].x)/(r[S].x-r[x].x===0?.01:r[S].x-r[x].x))*(d-1)/2+1,E=(r[y].x-r[x].x)/o,o=(r[y].y-r[x].y)/o,h[h.length]=r[S].x>r[x].x&&0<E||r[S].x<r[x].x&&0>E?{x:r[S].x-E/3,y:r[S].y-o/3}:{x:r[S].x,y:r[S].y-o/9},h[h.length]=r[c]}return h}function Ce(r,d,h,o,c,x,y,S,E,w){var v=0;w?(y.color=x,S.color=x):w=1,v=Math.abs(E?c-h:o-d),v=0<y.trimLength?Math.abs(v*y.trimLength/100):Math.abs(v-y.length),E?(h+=v/2,c-=v/2):(d+=v/2,o-=v/2);var v=Math.round(y.thickness)%2===1?.5:0,b=Math.round(S.thickness)%2===1?.5:0;r.save(),r.globalAlpha=w,r.strokeStyle=S.color||x,r.lineWidth=S.thickness||2,r.setLineDash&&r.setLineDash(P(S.dashType,S.thickness)),r.beginPath(),E&&0<S.thickness?(r.moveTo(o-y.thickness/2,Math.round((h+c)/2)-b),r.lineTo(d+y.thickness/2,Math.round((h+c)/2)-b)):0<S.thickness&&(r.moveTo(Math.round((d+o)/2)-b,h+y.thickness/2),r.lineTo(Math.round((d+o)/2)-b,c-y.thickness/2)),r.stroke(),r.strokeStyle=y.color||x,r.lineWidth=y.thickness||2,r.setLineDash&&r.setLineDash(P(y.dashType,y.thickness)),r.beginPath(),E&&0<y.thickness?(r.moveTo(o-v,h),r.lineTo(o-v,c),r.moveTo(d+v,h),r.lineTo(d+v,c)):0<y.thickness&&(r.moveTo(d,h+v),r.lineTo(o,h+v),r.moveTo(d,c-v),r.lineTo(o,c-v)),r.stroke(),r.restore()}function Re(r,d){Re.base.constructor.call(this,"Legend","legend",d,null,r),this.chart=r,this.canvas=r.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.optionsName="legend",this.height=this.width=0,this.orientation=null,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=A(this.fontFamily,this.fontSize,this.fontWeight),this.horizontalSpacing=this.fontSize}function je(r,d,h,o){for(je.base.constructor.call(this,"DataSeries","data",d,h,r),this.chart=r,this.canvas=r.canvas,this._ctx=r.canvas.ctx,this.index=h,this.noDataPointsInPlotArea=0,this.id=o,this.chart._eventManager.objectMap[o]={id:o,objectType:"dataSeries",dataSeriesIndex:h},r=d.dataPoints?d.dataPoints.length:0,this.dataPointEOs=[],d=0;d<r;d++)this.dataPointEOs[d]={};this.dataPointIds=[],this.plotUnit=[],this.axisY=this.axisX=null,this.optionsName="data",this.isOptionsInArray=!0,this.fillOpacity===null&&(this.type.match(/area/i)?this.fillOpacity=.7:this.fillOpacity=1),this.axisPlacement=this.getDefaultAxisPlacement(),typeof this.options.indexLabelFontSize>"u"&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function ke(r,d,h,o,c,x){if(ke.base.constructor.call(this,"Axis",d,h,o,r),this.chart=r,this.canvas=r.canvas,this.ctx=r.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this.dataSeries=[],this._stripLineLabels=this._ticks=this._labels=null,this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},this.isOptionsInArray=!0,c==="axisX"?(x==="left"||x==="bottom"?(this.optionsName="axisX",m(this.chart.sessionVariables.axisX[o])&&(this.chart.sessionVariables.axisX[o]={}),this.sessionVariables=this.chart.sessionVariables.axisX[o]):(this.optionsName="axisX2",m(this.chart.sessionVariables.axisX2[o])&&(this.chart.sessionVariables.axisX2[o]={}),this.sessionVariables=this.chart.sessionVariables.axisX2[o]),this.options.interval||(this.intervalType=null)):x==="left"||x==="bottom"?(this.optionsName="axisY",m(this.chart.sessionVariables.axisY[o])&&(this.chart.sessionVariables.axisY[o]={}),this.sessionVariables=this.chart.sessionVariables.axisY[o]):(this.optionsName="axisY2",m(this.chart.sessionVariables.axisY2[o])&&(this.chart.sessionVariables.axisY2[o]={}),this.sessionVariables=this.chart.sessionVariables.axisY2[o]),typeof this.options.titleFontSize>"u"&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),typeof this.options.labelFontSize>"u"&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=c,c!=="axisX"||h&&typeof h.gridThickness<"u"||(this.gridThickness=0),this._position=x,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this.options.scaleBreaks&&(this.scaleBreaks=new ut(this.chart,this.options.scaleBreaks,++this.chart._eventManager.lastObjectId,this)),this.stripLines=[],this.options.stripLines&&0<this.options.stripLines.length)for(r=0;r<this.options.stripLines.length;r++)this.stripLines.push(new ot(this.chart,this.options.stripLines[r],r,++this.chart._eventManager.lastObjectId,this));this.options.crosshair&&(this.crosshair=new _i(this.chart,this.options.crosshair,this),this.crosshair._updatedValue=m(this.sessionVariables.crosshairValue)?null:this.sessionVariables.crosshairValue),this._titleTextBlock=null,this.hasOptionChanged("viewportMinimum")&&this.viewportMinimum===null&&(this.options.viewportMinimum=void 0,this.sessionVariables.viewportMinimum=null),this.hasOptionChanged("viewportMinimum")||isNaN(this.sessionVariables.newViewportMinimum)||this.sessionVariables.newViewportMinimum===null?this.sessionVariables.newViewportMinimum=null:this.viewportMinimum=this.sessionVariables.newViewportMinimum,this.hasOptionChanged("viewportMaximum")&&this.viewportMaximum===null&&(this.options.viewportMaximum=void 0,this.sessionVariables.viewportMaximum=null),this.hasOptionChanged("viewportMaximum")||isNaN(this.sessionVariables.newViewportMaximum)||this.sessionVariables.newViewportMaximum===null?this.sessionVariables.newViewportMaximum=null:this.viewportMaximum=this.sessionVariables.newViewportMaximum,this.minimum!==null&&this.viewportMinimum!==null&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),this.maximum!==null&&this.viewportMaximum!==null&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.trackChanges("viewportMinimum"),this.trackChanges("viewportMaximum")}function ut(r,d,h,o){if(ut.base.constructor.call(this,"ScaleBreaks","scaleBreaks",d,null,o),this.id=h,this.chart=r,this.ctx=this.chart.ctx,this.axis=o,this.optionsName="scaleBreaks",this.isOptionsInArray=!1,this._appliedBreaks=[],this.customBreaks=[],this.autoBreaks=[],typeof this.spacing=="string"?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?8:(10<this.spacing?10:this.spacing)+"%"):typeof this.spacing!="number"&&(this.spacing=8),this.autoCalculate&&(this.maxNumberOfAutoBreaks=Math.min(this.maxNumberOfAutoBreaks,5)),this.options.customBreaks&&0<this.options.customBreaks.length){for(r=0;r<this.options.customBreaks.length;r++)this.customBreaks.push(new Mt(this.chart,"customBreaks",this.options.customBreaks[r],r,++this.chart._eventManager.lastObjectId,this)),typeof this.customBreaks[r].startValue=="number"&&typeof this.customBreaks[r].endValue=="number"&&this.customBreaks[r].endValue!==this.customBreaks[r].startValue&&this._appliedBreaks.push(this.customBreaks[r]);for(this._appliedBreaks.sort(function(c,x){return c.startValue-x.startValue}),r=0;r<this._appliedBreaks.length-1;r++)this._appliedBreaks[r].endValue>=this._appliedBreaks[r+1].startValue&&(this._appliedBreaks[r].endValue=Math.max(this._appliedBreaks[r].endValue,this._appliedBreaks[r+1].endValue),window.console&&window.console.log("CanvasJS Error: Breaks "+r+" and "+(r+1)+" are overlapping."),this._appliedBreaks.splice(r,2),r--)}}function Mt(r,d,h,o,c,x){Mt.base.constructor.call(this,"Break",d,h,o,x),this.id=c,this.chart=r,this.ctx=this.chart.ctx,this.scaleBreaks=x,this.optionsName=d,this.isOptionsInArray=!0,this.type=h.type?this.type:x.type,this.fillOpacity=m(h.fillOpacity)?x.fillOpacity:this.fillOpacity,this.lineThickness=m(h.lineThickness)?x.lineThickness:this.lineThickness,this.color=h.color?this.color:x.color,this.lineColor=h.lineColor?this.lineColor:x.lineColor,this.lineDashType=h.lineDashType?this.lineDashType:x.lineDashType,!m(this.startValue)&&this.startValue.getTime&&(this.startValue=this.startValue.getTime()),!m(this.endValue)&&this.endValue.getTime&&(this.endValue=this.endValue.getTime()),typeof this.startValue=="number"&&typeof this.endValue=="number"&&this.endValue<this.startValue&&(r=this.startValue,this.startValue=this.endValue,this.endValue=r),this.spacing=typeof h.spacing>"u"?x.spacing:h.spacing,typeof this.options.spacing=="string"?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?0:(10<this.spacing?10:this.spacing)+"%"):typeof this.options.spacing!="number"&&(this.spacing=x.spacing),this.size=x.parent.logarithmic?1:0}function ot(r,d,h,o,c){ot.base.constructor.call(this,"StripLine","stripLines",d,h,c),this.id=o,this.chart=r,this.ctx=this.chart.ctx,this.label=this.label,this.axis=c,this.optionsName="stripLines",this.isOptionsInArray=!0,this._thicknessType="pixel",this.startValue!==null&&this.endValue!==null&&(this.value=c.logarithmic?Math.sqrt((this.startValue.getTime?this.startValue.getTime():this.startValue)*(this.endValue.getTime?this.endValue.getTime():this.endValue)):((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this._thicknessType=null)}function _i(r,d,h){_i.base.constructor.call(this,"Crosshair","crosshair",d,null,h),this.chart=r,this.ctx=this.chart.ctx,this.axis=h,this.optionsName="crosshair",this._thicknessType="pixel"}function Ut(r,d){Ut.base.constructor.call(this,"ToolTip","toolTip",d,null,r),this.chart=r,this.canvas=r.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,this.containerTransitionDuration=.1,this.mozContainerTransition=this.getContainerTransition(this.containerTransitionDuration),this.optionsName="toolTip",this._initialize()}function ci(r){this.chart=r,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=G(this.chart.width,this.chart.height,!0),this.ghostCtx=this.ghostCanvas.getContext("2d"),this.mouseoveredObjectMaps=[]}function re(r){this.chart=r,this.ctx=this.chart.plotArea.ctx,this.animations=[],this.animationRequestId=null}e(j,se),j.prototype.destroy=function(){var r=this.allDOMEventHandlers;this._animator&&this._animator.cancelAllAnimations(),this._panTimerId&&clearTimeout(this._panTimerId);for(var d=0;d<r.length;d++){var h=r[d][0],o=r[d][1],c=r[d][2],x=r[d][3],x=x||!1;h.removeEventListener?h.removeEventListener(o,c,x):h.detachEvent&&h.detachEvent("on"+o,c)}for(this.allDOMEventHandlers=[],this.removeAllEventListeners();this._canvasJSContainer&&this._canvasJSContainer.hasChildNodes();)this._canvasJSContainer.removeChild(this._canvasJSContainer.lastChild);for(;this.container&&this.container.hasChildNodes();)this.container.removeChild(this.container.lastChild);for(;this._dropdownMenu&&this._dropdownMenu.hasChildNodes();)this._dropdownMenu.removeChild(this._dropdownMenu.lastChild);this.container=this._canvasJSContainer=null,this.toolTip.container=null,this.canvas&&wi(this.canvas),this.overlaidCanvas&&wi(this.overlaidCanvas),this._preRenderCanvas&&wi(this._preRenderCanvas),this._breaksCanvas&&wi(this._breaksCanvas),this._eventManager&&this._eventManager.ghostCanvas&&wi(this._eventManager.ghostCanvas),this._toolBar=this._dropdownMenu=this._menuButton=this._resetButton=this._zoomButton=null},j.prototype._updateOptions=function(){var r=this;if(this.updateOption("width"),this.updateOption("height"),this.updateOption("dataPointWidth"),this.updateOption("dataPointMinWidth"),this.updateOption("dataPointMaxWidth"),this.updateOption("interactivityEnabled"),this.updateOption("theme"),this.stockChart&&this.stockChart.options&&typeof this.stockChart.options.theme<"u"&&m(this.options.theme)?this.theme=this.stockChart.theme:m(this.stockChart)&&m(this.theme)&&(this.theme="light1"),this.updateOption("colorSet")&&(this.selectedColorSet=typeof fe[this.colorSet]<"u"?fe[this.colorSet]:fe.colorSet1),this.updateOption("backgroundColor"),this.stockChart&&this.stockChart.options&&typeof this.stockChart.options.backgroundColor<"u"&&m(this.options.backgroundColor)&&(this.backgroundColor=this.stockChart.backgroundColor),this.backgroundColor||(this.backgroundColor="rgba(0,0,0,0)"),this.updateOption("culture"),this.stockChart&&m(this.options.culture)&&(this.culture=this.stockChart.culture),this._cultureInfo=new Pe(this.culture),this.updateOption("animationEnabled"),this.animationEnabled=this.animationEnabled&&X,this.updateOption("animationDuration"),this.updateOption("rangeChanging"),this.updateOption("rangeChanged"),this.updateOption("exportEnabled"),this.updateOption("exportFileName"),this.updateOption("zoomType"),this.toolbar=new Le(this,this.options.toolbar),this.stockChart&&this.stockChart.options&&this.stockChart.options.toolbar&&!this.options.toolbar)for(var d in this.stockChart.options.toolbar)this.toolbar[d]=this.stockChart.options.toolbar[d];if(this.options.zoomEnabled||this.panEnabled){if(this._zoomButton)R(this._zoomButton,{borderRight:this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&this._zoomButton.childNodes[0]&&R(this._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"});else{var h=!1;ae(this._zoomButton=document.createElement("button")),U(this,this._zoomButton,"pan"),this._toolBar.appendChild(this._zoomButton),this._zoomButton.style.borderRight=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,L(this._zoomButton,"touchstart",function(o){h=!0},this.allDOMEventHandlers),L(this._zoomButton,"click",function(){r.zoomEnabled?(r.zoomEnabled=!1,r.panEnabled=!0,U(r,r._zoomButton,"zoom")):(r.zoomEnabled=!0,r.panEnabled=!1,U(r,r._zoomButton,"pan")),r.render()},this.allDOMEventHandlers),L(this._zoomButton,"mousemove",function(){h?h=!1:(R(r._zoomButton,{backgroundColor:r.toolbar.itemBackgroundColorOnHover,color:r.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&R(r._zoomButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers),L(this._zoomButton,"mouseout",function(){h||(R(r._zoomButton,{backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&R(r._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers)}this._resetButton?(R(this._resetButton,{borderRight:this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&this._resetButton.childNodes[0]&&R(this._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}),this._resetButton.title=this._cultureInfo.resetText):(h=!1,ae(this._resetButton=document.createElement("button")),U(this,this._resetButton,"reset"),this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.buttonBorderThickness:0)+"px solid "+this.toolbar.buttonBorderColor,this._toolBar.appendChild(this._resetButton),L(this._resetButton,"touchstart",function(o){h=!0},this.allDOMEventHandlers),L(this._resetButton,"click",function(){if(r.toolTip.hide(),r.toolTip&&r.toolTip.enabled&&r.toolTip.dispatchEvent("hidden",{chart:r,toolTip:r.toolTip},r.toolTip),r.zoomEnabled||r.panEnabled?(r.zoomEnabled=!0,r.panEnabled=!1,U(r,r._zoomButton,"pan"),r._defaultCursor="default",r.overlaidCanvas.style.cursor=r._defaultCursor):(r.zoomEnabled=!1,r.panEnabled=!1),r.sessionVariables.axisX)for(var o=0;o<r.sessionVariables.axisX.length;o++)r.sessionVariables.axisX[o].newViewportMinimum=null,r.sessionVariables.axisX[o].newViewportMaximum=null;if(r.sessionVariables.axisX2)for(o=0;o<r.sessionVariables.axisX2.length;o++)r.sessionVariables.axisX2[o].newViewportMinimum=null,r.sessionVariables.axisX2[o].newViewportMaximum=null;if(r.sessionVariables.axisY)for(o=0;o<r.sessionVariables.axisY.length;o++)r.sessionVariables.axisY[o].newViewportMinimum=null,r.sessionVariables.axisY[o].newViewportMaximum=null;if(r.sessionVariables.axisY2)for(o=0;o<r.sessionVariables.axisY2.length;o++)r.sessionVariables.axisY2[o].newViewportMinimum=null,r.sessionVariables.axisY2[o].newViewportMaximum=null;r.resetOverlayedCanvas(),0>=navigator.userAgent.search("MSIE")&&R(r._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}),ae(r._zoomButton,r._resetButton),r.stockChart&&(r.stockChart._rangeEventParameter={stockChart:r.stockChart,source:"chart",index:r.stockChart.charts.indexOf(r),minimum:null,maximum:null}),r._dispatchRangeEvent("rangeChanging","reset"),r.stockChart&&(r.stockChart._rangeEventParameter.type="rangeChanging",r.stockChart.dispatchEvent("rangeChanging",r.stockChart._rangeEventParameter,r.stockChart)),r.render(),r.syncCharts&&r.stockChart&&(r.stockChart.rangeUpdatedBy=!r.stockChart.navigator.slider||m(r.stockChart.navigator.slider.options.minimum)&&m(r.stockChart.navigator.slider.options.maximum)?!r.stockChart.rangeSelector.enabled||!r.stockChart.rangeSelector.inputFields.enabled||m(r.stockChart.rangeSelector.inputFields.options.startValue)&&m(r.stockChart.rangeSelector.inputFields.options.endValue)?null:"inputFields":"navigator",m(r.stockChart._selectedRangeButtonIndex)||(r.stockChart.rangeUpdatedBy="rangeButton"),r.syncCharts(null,null),r.stockChart.rangeUpdatedBy==="rangeButton"&&r.stockChart.rangeSelector.selectedRangeButtonIndex<r.stockChart.rangeSelector.buttons.length&&(o=r.stockChart.rangeSelector.buttons[r.stockChart._selectedRangeButtonIndex],o.enabled&&(o.state="on",o.textBlock.fontWeight="bold",o.textBlock.fontColor=r.stockChart.rangeSelector.buttonStyle.labelFontColorOnHover,o.textBlock.backgroundColor=r.stockChart.rangeSelector.buttonStyle.backgroundColorOnSelect,r.stockChart.rangeSelector.sessionVariables._clickedRangeButtonIndex=null,o.render()))),r._dispatchRangeEvent("rangeChanged","reset"),r.stockChart&&(r.stockChart._rangeEventParameter.type="rangeChanged",r.stockChart.dispatchEvent("rangeChanged",r.stockChart._rangeEventParameter,r.stockChart))},this.allDOMEventHandlers),L(this._resetButton,"mousemove",function(){h||(R(r._resetButton,{backgroundColor:r.toolbar.itemBackgroundColorOnHover,color:r.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&R(r._resetButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers),L(this._resetButton,"mouseout",function(){h||(R(r._resetButton,{backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&R(r._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers),this.overlaidCanvas.style.cursor=r._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(r._zoomButton.getAttribute("state")===r._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),K(r._zoomButton,r._resetButton)):(this.zoomEnabled=!0,this.panEnabled=!1))}else this.panEnabled=this.zoomEnabled=!1;W(this),this._toolBar.style.display!=="none"&&this._zoomButton&&(this.panEnabled?U(r,r._zoomButton,"zoom"):U(r,r._zoomButton,"pan"),r._resetButton.getAttribute("state")!==r._cultureInfo.resetText&&U(r,r._resetButton,"reset")),this.options.toolTip&&this.toolTip.options!==this.options.toolTip&&(this.toolTip.options=this.options.toolTip);for(d in this.toolTip.options)this.toolTip.options.hasOwnProperty(d)&&this.toolTip.updateOption(d)},j.prototype._updateSize=function(){var r;r=[this.canvas,this.overlaidCanvas,this._eventManager.ghostCanvas];var d=0,h=0;if(this.options.width?d=this.width:this.width=d=0<this.container.clientWidth?this.container.clientWidth:this.width,m(this.stockChart)||m(this.index)?this.options.height?h=this.height:this.height=h=0<this.container.clientHeight?this.container.clientHeight:this.height:h=this.height=this.stockChart._chartsHeight[this.index],this.canvas.width!==d*ii||this.canvas.height!==h*ii){for(var o=0;o<r.length;o++)B(r[o],d,h);this.bounds={x1:0,y1:0,x2:this.width,y2:this.height,width:this.width,height:this.height},r=!0}else r=!1;return r},j.prototype._initialize=function(){this.isNavigator=!(m(this.parent)||m(this.parent._defaultsKey)||this.parent._defaultsKey!=="Navigator"),this._animator?this._animator.cancelAllAnimations():this._animator=new re(this),this.removeAllEventListeners(),this.disableToolTip=!1,this._axes=[],this.funnelPyramidClickHandler=this.pieDoughnutClickHandler=null,this._updateOptions(),this.animatedRender=X&&this.animationEnabled&&this.renderCount===0,this._updateSize(),this.clearCanvas(),this.ctx.beginPath(),this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,plotTypes:[]},this.layoutManager=new ge(0,0,this.width,this.height,this.isNavigator?0:2),this.plotArea.layoutManager&&this.plotArea.layoutManager.reset(),this.data=[],this.title=null,this.subtitles=[];var r=0,d=null;if(this.options.data){for(var h=0;h<this.options.data.length;h++)if(r++,!this.options.data[h].type||0<=j._supportedChartTypes.indexOf(this.options.data[h].type)){var o=new je(this,this.options.data[h],r-1,++this._eventManager.lastObjectId);if(!m(o)&&o.dataPoints){for(var c=0;c<o.dataPoints.length;c++)if(o.dataPoints[c].x&&o.dataPoints[c].x.getTime){o.xValueType="dateTime";break}}o.type==="error"&&(o.linkedDataSeriesIndex=m(this.options.data[h].linkedDataSeriesIndex)?h-1:this.options.data[h].linkedDataSeriesIndex,0>o.linkedDataSeriesIndex||o.linkedDataSeriesIndex>=this.options.data.length||typeof o.linkedDataSeriesIndex!="number"||this.options.data[o.linkedDataSeriesIndex].type==="error")&&(o.linkedDataSeriesIndex=null),o.name===null&&(o.name="DataSeries "+r),o.color===null?1<this.options.data.length?(o._colorSet=[this.selectedColorSet[o.index%this.selectedColorSet.length]],o.color=this.selectedColorSet[o.index%this.selectedColorSet.length]):o._colorSet=o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="stackedArea"||o.type==="stackedArea100"||o.type==="rangeArea"||o.type==="rangeSplineArea"||o.type==="candlestick"||o.type==="ohlc"||o.type==="waterfall"||o.type==="boxAndWhisker"?[this.selectedColorSet[0]]:this.selectedColorSet:o._colorSet=[o.color],o.markerSize===null&&((o.type==="line"||o.type==="stepLine"||o.type==="spline"||0<=o.type.toLowerCase().indexOf("area"))&&o.dataPoints&&o.dataPoints.length<this.width/16||o.type==="scatter")&&(o.markerSize=8),o.type!=="bubble"&&o.type!=="scatter"||!o.dataPoints||(o.dataPoints.some?o.dataPoints.some(function(S){return S.x})&&o.dataPoints.sort(F):o.dataPoints.sort(F)),this.data.push(o);var c=o.axisPlacement,d=d||c,x;if(c==="normal"?this.plotInfo.axisPlacement==="xySwapped"?x='You cannot combine "'+o.type+'" with bar chart':this.plotInfo.axisPlacement==="none"?x='You cannot combine "'+o.type+'" with pie chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="normal"):c==="xySwapped"?this.plotInfo.axisPlacement==="normal"?x='You cannot combine "'+o.type+'" with line, area, column or pie chart':this.plotInfo.axisPlacement==="none"?x='You cannot combine "'+o.type+'" with pie chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="xySwapped"):c==="none"?this.plotInfo.axisPlacement==="normal"?x='You cannot combine "'+o.type+'" with line, area, column or bar chart':this.plotInfo.axisPlacement==="xySwapped"?x='You cannot combine "'+o.type+'" with bar chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="none"):c===null&&this.plotInfo.axisPlacement==="none"&&(x='You cannot combine "'+o.type+'" with pie chart'),x&&window.console){window.console.log(x);return}}for(h=0;h<this.data.length;h++){if(d=="none"&&this.data[h].type==="error"&&window.console){window.console.log('You cannot combine "'+o.type+'" with error chart');return}this.data[h].type==="error"&&(this.data[h].axisPlacement=this.plotInfo.axisPlacement=d||"normal",this.data[h]._linkedSeries=this.data[h].linkedDataSeriesIndex===null?null:this.data[this.data[h].linkedDataSeriesIndex])}}this._objectsInitialized=!0,this._plotAreaElements=[]},j._supportedChartTypes=k("line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 candlestick ohlc boxAndWhisker rangeColumn error rangeBar rangeArea rangeSplineArea pie doughnut funnel pyramid waterfall".split(" ")),j.prototype.setLayout=function(){for(var r=this._plotAreaElements,d=0;d<this.data.length;d++)if(this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped"){if(!this.data[d].axisYType||this.data[d].axisYType==="primary")if(this.options.axisY&&0<this.options.axisY.length){if(!this.axisY.length)for(var h=0;h<this.options.axisY.length;h++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY[h]=new ke(this,"axisY",this.options.axisY[h],h,"axisY","left")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY[h]=new ke(this,"axisY",this.options.axisY[h],h,"axisY","bottom"));this.data[d].axisY=this.axisY[0<=this.data[d].axisYIndex&&this.data[d].axisYIndex<this.axisY.length?this.data[d].axisYIndex:0],this.axisY[0<=this.data[d].axisYIndex&&this.data[d].axisYIndex<this.axisY.length?this.data[d].axisYIndex:0].dataSeries.push(this.data[d])}else this.axisY.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY[0]=new ke(this,"axisY",this.options.axisY,0,"axisY","left")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY[0]=new ke(this,"axisY",this.options.axisY,0,"axisY","bottom"))),this.data[d].axisY=this.axisY[0],this.axisY[0].dataSeries.push(this.data[d]);if(this.data[d].axisYType==="secondary")if(this.options.axisY2&&0<this.options.axisY2.length){if(!this.axisY2.length)for(h=0;h<this.options.axisY2.length;h++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY2[h]=new ke(this,"axisY2",this.options.axisY2[h],h,"axisY","right")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY2[h]=new ke(this,"axisY2",this.options.axisY2[h],h,"axisY","top"));this.data[d].axisY=this.axisY2[0<=this.data[d].axisYIndex&&this.data[d].axisYIndex<this.axisY2.length?this.data[d].axisYIndex:0],this.axisY2[0<=this.data[d].axisYIndex&&this.data[d].axisYIndex<this.axisY2.length?this.data[d].axisYIndex:0].dataSeries.push(this.data[d])}else this.axisY2.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY2[0]=new ke(this,"axisY2",this.options.axisY2,0,"axisY","right")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY2[0]=new ke(this,"axisY2",this.options.axisY2,0,"axisY","top"))),this.data[d].axisY=this.axisY2[0],this.axisY2[0].dataSeries.push(this.data[d]);if(!this.data[d].axisXType||this.data[d].axisXType==="primary")if(this.options.axisX&&0<this.options.axisX.length){if(!this.axisX.length)for(h=0;h<this.options.axisX.length;h++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX[h]=new ke(this,"axisX",this.options.axisX[h],h,"axisX","bottom")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX[h]=new ke(this,"axisX",this.options.axisX[h],h,"axisX","left"));this.data[d].axisX=this.axisX[0<=this.data[d].axisXIndex&&this.data[d].axisXIndex<this.axisX.length?this.data[d].axisXIndex:0],this.axisX[0<=this.data[d].axisXIndex&&this.data[d].axisXIndex<this.axisX.length?this.data[d].axisXIndex:0].dataSeries.push(this.data[d])}else this.axisX.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX[0]=new ke(this,"axisX",this.options.axisX,0,"axisX","bottom")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX[0]=new ke(this,"axisX",this.options.axisX,0,"axisX","left"))),this.data[d].axisX=this.axisX[0],this.axisX[0].dataSeries.push(this.data[d]);if(this.data[d].axisXType==="secondary")if(this.options.axisX2&&0<this.options.axisX2.length){if(!this.axisX2.length)for(h=0;h<this.options.axisX2.length;h++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX2[h]=new ke(this,"axisX2",this.options.axisX2[h],h,"axisX","top")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX2[h]=new ke(this,"axisX2",this.options.axisX2[h],h,"axisX","right"));this.data[d].axisX=this.axisX2[0<=this.data[d].axisXIndex&&this.data[d].axisXIndex<this.axisX2.length?this.data[d].axisXIndex:0],this.axisX2[0<=this.data[d].axisXIndex&&this.data[d].axisXIndex<this.axisX2.length?this.data[d].axisXIndex:0].dataSeries.push(this.data[d])}else this.axisX2.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX2[0]=new ke(this,"axisX2",this.options.axisX2,0,"axisX","top")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX2[0]=new ke(this,"axisX2",this.options.axisX2,0,"axisX","right"))),this.data[d].axisX=this.axisX2[0],this.axisX2[0].dataSeries.push(this.data[d])}if(this.axisY){for(h=1;h<this.axisY.length;h++)typeof this.axisY[h].options.gridThickness>"u"&&(this.axisY[h].gridThickness=0);for(h=0;h<this.axisY.length-1;h++)typeof this.axisY[h].options.margin>"u"&&(this.axisY[h].margin=10)}if(this.axisY2){for(h=1;h<this.axisY2.length;h++)typeof this.axisY2[h].options.gridThickness>"u"&&(this.axisY2[h].gridThickness=0);for(h=0;h<this.axisY2.length-1;h++)typeof this.axisY2[h].options.margin>"u"&&(this.axisY2[h].margin=10)}if(this.axisY&&0<this.axisY.length&&this.axisY2&&0<this.axisY2.length&&(0<this.axisY[0].gridThickness&&typeof this.axisY2[0].options.gridThickness>"u"?this.axisY2[0].gridThickness=0:0<this.axisY2[0].gridThickness&&typeof this.axisY[0].options.gridThickness>"u"&&(this.axisY[0].gridThickness=0)),this.axisX)for(h=0;h<this.axisX.length;h++)typeof this.axisX[h].options.gridThickness>"u"&&(this.axisX[h].gridThickness=0);if(this.axisX2)for(h=0;h<this.axisX2.length;h++)typeof this.axisX2[h].options.gridThickness>"u"&&(this.axisX2[h].gridThickness=0);if(this.axisX&&0<this.axisX.length&&this.axisX2&&0<this.axisX2.length&&(0<this.axisX[0].gridThickness&&typeof this.axisX2[0].options.gridThickness>"u"?this.axisX2[0].gridThickness=0:0<this.axisX2[0].gridThickness&&typeof this.axisX[0].options.gridThickness>"u"&&(this.axisX[0].gridThickness=0)),h=!1,0<this._axes.length&&this.options.zoomEnabled&&(this.zoomEnabled||this.panEnabled)){for(d=0;d<this._axes.length;d++)if(!m(this._axes[d].viewportMinimum)||!m(this._axes[d].viewportMaximum)){h=!0;break}}if(h?(K(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,this._zoomButton.style.borderRight=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.buttonBorderThickness:0)+"px solid "+this.toolbar.buttonBorderColor):(ae(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.buttonBorderThickness+"px solid transparent",this.options.zoomEnabled&&(this.zoomEnabled=!0,this.panEnabled=!1)),T(this),this._processData(),this.options.title&&(this.title=new Oe(this,this.options.title),this.title.dockInsidePlotArea?r.push(this.title):this.title.setLayout()),this.options.subtitles)for(d=0;d<this.options.subtitles.length;d++)h=new Ue(this,this.options.subtitles[d],d),this.subtitles.push(h),h.dockInsidePlotArea?r.push(h):h.setLayout();for(this.legend=new Re(this,this.options.legend),d=0;d<this.data.length;d++)(this.data[d].showInLegend||this.data[d].type==="pie"||this.data[d].type==="doughnut"||this.data[d].type==="funnel"||this.data[d].type==="pyramid")&&this.legend.dataSeries.push(this.data[d]);for(this.legend.dockInsidePlotArea?r.push(this.legend):this.legend.setLayout(),d=0;d<this._axes.length;d++)if(this._axes[d].scaleBreaks&&this._axes[d].scaleBreaks._appliedBreaks.length){X?(this._breaksCanvas=G(this.width,this.height,!0),this._breaksCanvasCtx=this._breaksCanvas.getContext("2d")):(this._breaksCanvas=this.canvas,this._breaksCanvasCtx=this.ctx);break}this._preRenderCanvas=G(this.width,this.height),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this.plotInfo.axisPlacement!=="normal"&&this.plotInfo.axisPlacement!=="xySwapped"||ke.setLayout(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace())},j.prototype.renderElements=function(){if(this.height&&this.width){var o=this._plotAreaElements;this.title&&!this.title.dockInsidePlotArea&&this.title.render();for(var r=0;r<this.subtitles.length;r++)this.subtitles[r].dockInsidePlotArea||this.subtitles[r].render();if(this.legend.dockInsidePlotArea||this.legend.render(),this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped")ke.render(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement);else if(this.plotInfo.axisPlacement==="none")this.preparePlotArea();else return;for(r=0;r<o.length;r++)o[r].setLayout(),o[r].render();var d=[];if(this.animatedRender){var h=G(this.width,this.height);h.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height)}z(this);var o=this.ctx.miterLimit,c;for(this.ctx.miterLimit=3,X&&this._breaksCanvas&&(this._preRenderCtx.drawImage(this.canvas,0,0,this.width,this.height),this._preRenderCtx.drawImage(this._breaksCanvas,0,0,this.width,this.height),this._breaksCanvasCtx.globalCompositeOperation="source-atop",this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),this._preRenderCtx.clearRect(0,0,this.width,this.height)),r=0;r<this.plotInfo.plotTypes.length;r++)for(var x=this.plotInfo.plotTypes[r],y=0;y<x.plotUnits.length;y++){var S=x.plotUnits[y],E=null;S.targetCanvas&&wi(S.targetCanvas),S.targetCanvas=null,this.animatedRender&&(S.targetCanvas=G(this.width,this.height),S.targetCanvasCtx=S.targetCanvas.getContext("2d"),c=S.targetCanvasCtx.miterLimit,S.targetCanvasCtx.miterLimit=3),S.type==="line"?E=this.renderLine(S):S.type==="stepLine"?E=this.renderStepLine(S):S.type==="spline"?E=this.renderSpline(S):S.type==="column"?E=this.renderColumn(S):S.type==="bar"?E=this.renderBar(S):S.type==="area"?E=this.renderArea(S):S.type==="stepArea"?E=this.renderStepArea(S):S.type==="splineArea"?E=this.renderSplineArea(S):S.type==="stackedColumn"?E=this.renderStackedColumn(S):S.type==="stackedColumn100"?E=this.renderStackedColumn100(S):S.type==="stackedBar"?E=this.renderStackedBar(S):S.type==="stackedBar100"?E=this.renderStackedBar100(S):S.type==="stackedArea"?E=this.renderStackedArea(S):S.type==="stackedArea100"?E=this.renderStackedArea100(S):S.type==="bubble"?E=E=this.renderBubble(S):S.type==="scatter"?E=this.renderScatter(S):S.type==="pie"?this.renderPie(S):S.type==="doughnut"?this.renderPie(S):S.type==="funnel"?E=this.renderFunnel(S):S.type==="pyramid"?E=this.renderFunnel(S):S.type==="candlestick"?E=this.renderCandlestick(S):S.type==="ohlc"?E=this.renderCandlestick(S):S.type==="rangeColumn"?E=this.renderRangeColumn(S):S.type==="error"?E=this.renderError(S):S.type==="rangeBar"?E=this.renderRangeBar(S):S.type==="rangeArea"?E=this.renderRangeArea(S):S.type==="rangeSplineArea"?E=this.renderRangeSplineArea(S):S.type==="waterfall"?E=this.renderWaterfall(S):S.type==="boxAndWhisker"&&(E=this.renderBoxAndWhisker(S));for(var w=0;w<S.dataSeriesIndexes.length;w++)this._dataInRenderedOrder.push(this.data[S.dataSeriesIndexes[w]]);this.animatedRender&&(S.targetCanvasCtx.miterLimit=c,E&&d.push(E))}this.ctx.miterLimit=o,this.animatedRender&&this._breaksCanvasCtx&&d.push({source:this._breaksCanvasCtx,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0,startTimePercent:.7}),this.animatedRender&&0<this._indexLabels.length&&(c=G(this.width,this.height).getContext("2d"),l(c),d.push(this.renderIndexLabels(c)));var v=this;if(0<d.length)v.disableToolTip=!0,v._animator.animate(200,v.animationDuration,function(b){v.ctx.clearRect(0,0,v.width,v.height),v.ctx.drawImage(h,0,0,Math.floor(v.width*ii),Math.floor(v.height*ii),0,0,v.width,v.height);for(var C=0;C<d.length;C++)E=d[C],1>b&&typeof E.startTimePercent<"u"?b>=E.startTimePercent&&E.animationCallback(E.easingFunction(b-E.startTimePercent,0,1,1-E.startTimePercent),E):E.animationCallback(E.easingFunction(b,0,1,1),E);v.dispatchEvent("dataAnimationIterationEnd",{chart:v})},function(){d=[];for(var b=0;b<v.plotInfo.plotTypes.length;b++)for(var C=v.plotInfo.plotTypes[b],u=0;u<C.plotUnits.length;u++){var I=C.plotUnits[u];I.targetCanvas&&wi(I.targetCanvas),I.targetCanvas=null}h=null,v.disableToolTip=!1,v.dispatchEvent("dataAnimationEnd",{chart:v})});else{if(v._breaksCanvas)if(X)v.plotArea.ctx.drawImage(v._breaksCanvas,0,0,this.width,this.height);else for(w=0;w<v._axes.length;w++)v._axes[w].createMask();0<v._indexLabels.length&&v.renderIndexLabels(),v.dispatchEvent("dataAnimationIterationEnd",{chart:v}),v.dispatchEvent("dataAnimationEnd",{chart:v})}for(this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||!this._zoomButton||this._zoomButton.style.display==="none"||ae(this._zoomButton,this._resetButton),m(this.toolTip._xValue)||m(this.toolTip._dataSeriesIndex)||this.toolTip.showAtX(this.toolTip._xValue,this.toolTip._dataSeriesIndex),this.toolTip._updateToolTip(),this.renderCount++,this._breaksCanvas&&(delete this._breaksCanvas,delete this._breaksCanvasCtx),w=0;w<this._axes.length;w++)this._axes[w].maskCanvas&&(delete this._axes[w].maskCanvas,delete this._axes[w].maskCtx)}},j.prototype.render=function(r){r&&(this.options=r),this._initialize(),this.setLayout(),this.renderElements(),this._preRenderCanvas&&wi(this._preRenderCanvas)},j.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},j.prototype.categoriseDataSeries=function(){for(var r="",d=0;d<this.data.length;d++)if(r=this.data[d],r.dataPoints&&r.dataPoints.length!==0&&r.visible&&0<=j._supportedChartTypes.indexOf(r.type)){for(var h=null,o=!1,c=null,x=!1,y=0;y<this.plotInfo.plotTypes.length;y++)if(this.plotInfo.plotTypes[y].type===r.type){o=!0,h=this.plotInfo.plotTypes[y];break}for(o||(h={type:r.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(h)),y=0;y<h.plotUnits.length;y++)if(h.plotUnits[y].axisYType===r.axisYType&&h.plotUnits[y].axisXType===r.axisXType&&h.plotUnits[y].axisYIndex===r.axisYIndex&&h.plotUnits[y].axisXIndex===r.axisXIndex){x=!0,c=h.plotUnits[y];break}x||(c={type:r.type,previousDataSeriesCount:0,index:h.plotUnits.length,plotType:h,axisXType:r.axisXType,axisYType:r.axisYType,axisYIndex:r.axisYIndex,axisXIndex:r.axisXIndex,axisY:r.axisYType==="primary"?this.axisY[0<=r.axisYIndex&&r.axisYIndex<this.axisY.length?r.axisYIndex:0]:this.axisY2[0<=r.axisYIndex&&r.axisYIndex<this.axisY2.length?r.axisYIndex:0],axisX:r.axisXType==="primary"?this.axisX[0<=r.axisXIndex&&r.axisXIndex<this.axisX.length?r.axisXIndex:0]:this.axisX2[0<=r.axisXIndex&&r.axisXIndex<this.axisX2.length?r.axisXIndex:0],dataSeriesIndexes:[],yTotals:[],yAbsTotals:[]},h.plotUnits.push(c)),h.totalDataSeries++,c.dataSeriesIndexes.push(d),r.plotUnit=c}for(d=0;d<this.plotInfo.plotTypes.length;d++)for(h=this.plotInfo.plotTypes[d],y=r=0;y<h.plotUnits.length;y++)h.plotUnits[y].previousDataSeriesCount=r,r+=h.plotUnits[y].dataSeriesIndexes.length},j.prototype.assignIdToDataPoints=function(){for(var r=0;r<this.data.length;r++){var d=this.data[r];if(d.dataPoints)for(var h=d.dataPoints.length,o=0;o<h;o++)d.dataPointIds[o]=++this._eventManager.lastObjectId}},j.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var r=0;r<this.plotInfo.plotTypes.length;r++)for(var d=this.plotInfo.plotTypes[r],h=0;h<d.plotUnits.length;h++){var o=d.plotUnits[h];o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="column"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="bar"||o.type==="bubble"||o.type==="scatter"?this._processMultiseriesPlotUnit(o):o.type==="stackedColumn"||o.type==="stackedBar"||o.type==="stackedArea"?this._processStackedPlotUnit(o):o.type==="stackedColumn100"||o.type==="stackedBar100"||o.type==="stackedArea100"?this._processStacked100PlotUnit(o):o.type==="candlestick"||o.type==="ohlc"||o.type==="rangeColumn"||o.type==="rangeBar"||o.type==="rangeArea"||o.type==="rangeSplineArea"||o.type==="error"||o.type==="boxAndWhisker"?this._processMultiYPlotUnit(o):o.type==="waterfall"&&this._processSpecificPlotUnit(o)}this.calculateAutoBreaks()},j.prototype._processMultiseriesPlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length))for(var d=r.axisY.dataInfo,h=r.axisX.dataInfo,o,c,x=!1,y=0;y<r.dataSeriesIndexes.length;y++){var S=this.data[r.dataSeriesIndexes[y]],E=0,w=!1,v=!1,b;if(S.axisPlacement==="normal"||S.axisPlacement==="xySwapped")var C=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:r.axisX.logarithmic?0:-1/0,u=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((S.dataPoints[E].x&&S.dataPoints[E].x.getTime||S.xValueType==="dateTime")&&(x=!0),E=0;E<S.dataPoints.length;E++){if(typeof S.dataPoints[E].x>"u"&&(S.dataPoints[E].x=E+(r.axisX.logarithmic?1:0)),S.dataPoints[E].x.getTime?(x=!0,o=S.dataPoints[E].x.getTime()):o=S.dataPoints[E].x,c=S.dataPoints[E].y,o<h.min&&(h.min=o),o>h.max&&(h.max=o),c<d.min&&typeof c=="number"&&(d.min=c),c>d.max&&typeof c=="number"&&(d.max=c),0<E){if(r.axisX.logarithmic){var I=o/S.dataPoints[E-1].x;1>I&&(I=1/I),h.minDiff>I&&I!==1&&(h.minDiff=I)}else I=o-S.dataPoints[E-1].x,0>I&&(I*=-1),h.minDiff>I&&I!==0&&(h.minDiff=I);c!==null&&S.dataPoints[E-1].y!==null&&(r.axisY.logarithmic?(I=c/S.dataPoints[E-1].y,1>I&&(I=1/I),d.minDiff>I&&I!==1&&(d.minDiff=I)):(I=c-S.dataPoints[E-1].y,0>I&&(I*=-1),d.minDiff>I&&I!==0&&(d.minDiff=I)))}if(o<C&&!w)c!==null&&(b=o);else{if(!w&&(w=!0,0<E)){E-=2;continue}if(o>u&&!v)v=!0;else if(o>u&&v)continue;S.dataPoints[E].label&&(r.axisX.labels[o]=S.dataPoints[E].label),o<h.viewPortMin&&(h.viewPortMin=o),o>h.viewPortMax&&(h.viewPortMax=o),c===null?h.viewPortMin===o&&b<o&&(h.viewPortMin=b):(c<d.viewPortMin&&typeof c=="number"&&(d.viewPortMin=c),c>d.viewPortMax&&typeof c=="number"&&(d.viewPortMax=c))}}S.axisX.valueType=S.xValueType=x?"dateTime":"number"}},j.prototype._processStackedPlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length)){for(var d=r.axisY.dataInfo,h=r.axisX.dataInfo,o,c,x=!1,y=[],S=[],E=1/0,w=-1/0,v={},b=0;b<r.dataSeriesIndexes.length;b++){var C=this.data[r.dataSeriesIndexes[b]],u=0,I=!1,V=!1,H;if(C.axisPlacement==="normal"||C.axisPlacement==="xySwapped")var D=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:-1/0,Y=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((C.dataPoints[u].x&&C.dataPoints[u].x.getTime||C.xValueType==="dateTime")&&(x=!0),u=0;u<C.dataPoints.length;u++){if(typeof C.dataPoints[u].x>"u"&&(C.dataPoints[u].x=u+(r.axisX.logarithmic?1:0)),C.dataPoints[u].x.getTime?(x=!0,o=C.dataPoints[u].x.getTime()):o=C.dataPoints[u].x,c=m(C.dataPoints[u].y)?0:C.dataPoints[u].y,o<h.min&&(h.min=o),o>h.max&&(h.max=o),0<u){if(r.axisX.logarithmic){var O=o/C.dataPoints[u-1].x;1>O&&(O=1/O),h.minDiff>O&&O!==1&&(h.minDiff=O)}else O=o-C.dataPoints[u-1].x,0>O&&(O*=-1),h.minDiff>O&&O!==0&&(h.minDiff=O);c!==null&&C.dataPoints[u-1].y!==null&&(r.axisY.logarithmic?0<c&&(O=c/C.dataPoints[u-1].y,1>O&&(O=1/O),d.minDiff>O&&O!==1&&(d.minDiff=O)):(O=c-C.dataPoints[u-1].y,0>O&&(O*=-1),d.minDiff>O&&O!==0&&(d.minDiff=O)))}if(o<D&&!I)C.dataPoints[u].y!==null&&(H=o);else{if(!I&&(I=!0,0<u)){u-=2;continue}if(o>Y&&!V)V=!0;else if(o>Y&&V)continue;C.dataPoints[u].label&&(r.axisX.labels[o]=C.dataPoints[u].label),o<h.viewPortMin&&(h.viewPortMin=o),o>h.viewPortMax&&(h.viewPortMax=o),C.dataPoints[u].y===null?h.viewPortMin===o&&H<o&&(h.viewPortMin=H):(v[o]=(v[o]||0)+C.dataPoints[u].y,C.dataPointEOs[u].cumulativeY=v[o],r.yTotals[o]=(r.yTotals[o]?r.yTotals[o]:0)+c,r.yAbsTotals[o]=(r.yAbsTotals[o]?r.yAbsTotals[o]:0)+Math.abs(c),0<=c?y[o]?y[o]+=c:(y[o]=c,E=Math.min(c,E)):S[o]?S[o]+=c:(S[o]=c,w=Math.max(c,w)))}}r.axisY.scaleBreaks&&r.axisY.scaleBreaks.autoCalculate&&1<=r.axisY.scaleBreaks.maxNumberOfAutoBreaks&&(d.dataPointYPositiveSums?(d.dataPointYPositiveSums.push.apply(d.dataPointYPositiveSums,y),d.dataPointYNegativeSums.push.apply(d.dataPointYPositiveSums,S)):(d.dataPointYPositiveSums=y,d.dataPointYNegativeSums=S)),C.axisX.valueType=C.xValueType=x?"dateTime":"number"}for(u in y)y.hasOwnProperty(u)&&!isNaN(u)&&(r=y[u],r<d.min&&(d.min=Math.min(r,E)),r>d.max&&(d.max=r),u<h.viewPortMin||u>h.viewPortMax||(r<d.viewPortMin&&(d.viewPortMin=Math.min(r,E)),r>d.viewPortMax&&(d.viewPortMax=r)));for(u in S)S.hasOwnProperty(u)&&!isNaN(u)&&(r=S[u],r<d.min&&(d.min=r),r>d.max&&(d.max=Math.max(r,w)),u<h.viewPortMin||u>h.viewPortMax||(r<d.viewPortMin&&(d.viewPortMin=r),r>d.viewPortMax&&(d.viewPortMax=Math.max(r,w))))}},j.prototype._processStacked100PlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length)){for(var d=r.axisY.dataInfo,h=r.axisX.dataInfo,o,c,x=!1,y=!1,S=!1,E={},w=[],v=0;v<r.dataSeriesIndexes.length;v++){var b=this.data[r.dataSeriesIndexes[v]],C=0,u=!1,I=!1,V;if(b.axisPlacement==="normal"||b.axisPlacement==="xySwapped")var H=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:-1/0,D=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((b.dataPoints[C].x&&b.dataPoints[C].x.getTime||b.xValueType==="dateTime")&&(x=!0),C=0;C<b.dataPoints.length;C++){if(typeof b.dataPoints[C].x>"u"&&(b.dataPoints[C].x=C+(r.axisX.logarithmic?1:0)),b.dataPoints[C].x.getTime?(x=!0,o=b.dataPoints[C].x.getTime()):o=b.dataPoints[C].x,c=m(b.dataPoints[C].y)?null:b.dataPoints[C].y,o<h.min&&(h.min=o),o>h.max&&(h.max=o),0<C){if(r.axisX.logarithmic){var Y=o/b.dataPoints[C-1].x;1>Y&&(Y=1/Y),h.minDiff>Y&&Y!==1&&(h.minDiff=Y)}else Y=o-b.dataPoints[C-1].x,0>Y&&(Y*=-1),h.minDiff>Y&&Y!==0&&(h.minDiff=Y);m(c)||b.dataPoints[C-1].y===null||(r.axisY.logarithmic?0<c&&(Y=c/b.dataPoints[C-1].y,1>Y&&(Y=1/Y),d.minDiff>Y&&Y!==1&&(d.minDiff=Y)):(Y=c-b.dataPoints[C-1].y,0>Y&&(Y*=-1),d.minDiff>Y&&Y!==0&&(d.minDiff=Y)))}if(o<H&&!u)c!==null&&(V=o);else{if(!u&&(u=!0,0<C)){C-=2;continue}if(o>D&&!I)I=!0;else if(o>D&&I)continue;b.dataPoints[C].label&&(r.axisX.labels[o]=b.dataPoints[C].label),o<h.viewPortMin&&(h.viewPortMin=o),o>h.viewPortMax&&(h.viewPortMax=o),c===null?h.viewPortMin===o&&V<o&&(h.viewPortMin=V):(E[o]=(E[o]||0)+b.dataPoints[C].y,b.dataPointEOs[C].cumulativeY=E[o],r.yTotals[o]=(r.yTotals[o]?r.yTotals[o]:0)+c,r.yAbsTotals[o]=(r.yAbsTotals[o]?r.yAbsTotals[o]:0)+Math.abs(c),0<=c?y=!0:0>c&&(S=!0),w[o]=w[o]?w[o]+Math.abs(c):Math.abs(c))}}b.axisX.valueType=b.xValueType=x?"dateTime":"number"}r.axisY.logarithmic?(d.max=m(d.viewPortMax)?99*Math.pow(r.axisY.logarithmBase,-.05):Math.max(d.viewPortMax,99*Math.pow(r.axisY.logarithmBase,-.05)),d.min=m(d.viewPortMin)?1:Math.min(d.viewPortMin,1)):y&&!S?(d.max=m(d.viewPortMax)?99:Math.max(d.viewPortMax,99),d.min=m(d.viewPortMin)?1:Math.min(d.viewPortMin,1)):y&&S?(d.max=m(d.viewPortMax)?99:Math.max(d.viewPortMax,99),d.min=m(d.viewPortMin)?-99:Math.min(d.viewPortMin,-99)):!y&&S&&(d.max=m(d.viewPortMax)?-1:Math.max(d.viewPortMax,-1),d.min=m(d.viewPortMin)?-99:Math.min(d.viewPortMin,-99)),d.viewPortMin=d.min,d.viewPortMax=d.max,r.dataPointYSums=w}},j.prototype._processMultiYPlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length))for(var d=r.axisY.dataInfo,h=r.axisX.dataInfo,o,c,x,y,S=!1,E=0;E<r.dataSeriesIndexes.length;E++){var w=this.data[r.dataSeriesIndexes[E]],v=0,b=!1,C=!1,u,I,V;if(w.axisPlacement==="normal"||w.axisPlacement==="xySwapped")var H=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:r.axisX.logarithmic?0:-1/0,D=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((w.dataPoints[v].x&&w.dataPoints[v].x.getTime||w.xValueType==="dateTime")&&(S=!0),v=0;v<w.dataPoints.length;v++){if(typeof w.dataPoints[v].x>"u"&&(w.dataPoints[v].x=v+(r.axisX.logarithmic?1:0)),w.dataPoints[v].x.getTime?(S=!0,o=w.dataPoints[v].x.getTime()):o=w.dataPoints[v].x,(c=w.dataPoints[v].y)&&c.length){x=Math.min.apply(null,c),y=Math.max.apply(null,c),I=!0;for(var Y=0;Y<c.length;Y++)c.k===null&&(I=!1);I&&(b||(V=u),u=o)}if(o<h.min&&(h.min=o),o>h.max&&(h.max=o),x<d.min&&(d.min=x),y>d.max&&(d.max=y),0<v&&(r.axisX.logarithmic?(I=o/w.dataPoints[v-1].x,1>I&&(I=1/I),h.minDiff>I&&I!==1&&(h.minDiff=I)):(I=o-w.dataPoints[v-1].x,0>I&&(I*=-1),h.minDiff>I&&I!==0&&(h.minDiff=I)),c&&c[0]!==null&&w.dataPoints[v-1].y&&w.dataPoints[v-1].y[0]!==null&&(r.axisY.logarithmic?(I=c[0]/w.dataPoints[v-1].y[0],1>I&&(I=1/I),d.minDiff>I&&I!==1&&(d.minDiff=I)):(I=c[0]-w.dataPoints[v-1].y[0],0>I&&(I*=-1),d.minDiff>I&&I!==0&&(d.minDiff=I)))),!(o<H)||b){if(!b&&(b=!0,0<v)){v-=2,u=V;continue}if(o>D&&!C)C=!0;else if(o>D&&C)continue;if(w.dataPoints[v].label&&(r.axisX.labels[o]=w.dataPoints[v].label),o<h.viewPortMin&&(h.viewPortMin=o),o>h.viewPortMax&&(h.viewPortMax=o),h.viewPortMin===o&&c){for(Y=0;Y<c.length;Y++)if(c[Y]===null&&u<o){h.viewPortMin=u;break}}c===null?h.viewPortMin===o&&u<o&&(h.viewPortMin=u):(x<d.viewPortMin&&(d.viewPortMin=x),y>d.viewPortMax&&(d.viewPortMax=y))}}w.axisX.valueType=w.xValueType=S?"dateTime":"number"}},j.prototype._processSpecificPlotUnit=function(r){if(r.type==="waterfall"&&r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length))for(var d=r.axisY.dataInfo,h=r.axisX.dataInfo,o,c,x=!1,y=0;y<r.dataSeriesIndexes.length;y++){var S=this.data[r.dataSeriesIndexes[y]],E=0,w=!1,v=!1,b=o=0;if(S.axisPlacement==="normal"||S.axisPlacement==="xySwapped")var C=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:r.axisX.logarithmic?0:-1/0,u=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((S.dataPoints[E].x&&S.dataPoints[E].x.getTime||S.xValueType==="dateTime")&&(x=!0),E=0;E<S.dataPoints.length;E++)typeof S.dataPoints[E].isCumulativeSum<"u"&&S.dataPoints[E].isCumulativeSum===!0?(S.dataPointEOs[E].cumulativeSumYStartValue=0,S.dataPointEOs[E].cumulativeSum=E===0?0:S.dataPointEOs[E-1].cumulativeSum,S.dataPoints[E].y=E===0?0:S.dataPointEOs[E-1].cumulativeSum):typeof S.dataPoints[E].isIntermediateSum<"u"&&S.dataPoints[E].isIntermediateSum===!0?(S.dataPointEOs[E].cumulativeSumYStartValue=b,S.dataPointEOs[E].cumulativeSum=E===0?0:S.dataPointEOs[E-1].cumulativeSum,S.dataPoints[E].y=E===0?0:o,b=E===0?0:S.dataPointEOs[E-1].cumulativeSum,o=0):(c=typeof S.dataPoints[E].y!="number"?0:S.dataPoints[E].y,S.dataPointEOs[E].cumulativeSumYStartValue=E===0?0:S.dataPointEOs[E-1].cumulativeSum,S.dataPointEOs[E].cumulativeSum=E===0?c:S.dataPointEOs[E-1].cumulativeSum+c,o+=c);for(E=0;E<S.dataPoints.length;E++)if(typeof S.dataPoints[E].x>"u"&&(S.dataPoints[E].x=E+(r.axisX.logarithmic?1:0)),S.dataPoints[E].x.getTime?(x=!0,o=S.dataPoints[E].x.getTime()):o=S.dataPoints[E].x,c=S.dataPoints[E].y,o<h.min&&(h.min=o),o>h.max&&(h.max=o),S.dataPointEOs[E].cumulativeSum<d.min&&(d.min=S.dataPointEOs[E].cumulativeSum),S.dataPointEOs[E].cumulativeSum>d.max&&(d.max=S.dataPointEOs[E].cumulativeSum),0<E&&(r.axisX.logarithmic?(b=o/S.dataPoints[E-1].x,1>b&&(b=1/b),h.minDiff>b&&b!==1&&(h.minDiff=b)):(b=o-S.dataPoints[E-1].x,0>b&&(b*=-1),h.minDiff>b&&b!==0&&(h.minDiff=b)),c!==null&&S.dataPoints[E-1].y!==null&&(r.axisY.logarithmic?(c=S.dataPointEOs[E].cumulativeSum/S.dataPointEOs[E-1].cumulativeSum,1>c&&(c=1/c),d.minDiff>c&&c!==1&&(d.minDiff=c)):(c=S.dataPointEOs[E].cumulativeSum-S.dataPointEOs[E-1].cumulativeSum,0>c&&(c*=-1),d.minDiff>c&&c!==0&&(d.minDiff=c)))),!(o<C)||w){if(!w&&(w=!0,0<E)){E-=2;continue}if(o>u&&!v)v=!0;else if(o>u&&v)continue;S.dataPoints[E].label&&(r.axisX.labels[o]=S.dataPoints[E].label),o<h.viewPortMin&&(h.viewPortMin=o),o>h.viewPortMax&&(h.viewPortMax=o),0<E&&(S.dataPointEOs[E-1].cumulativeSum<d.viewPortMin&&(d.viewPortMin=S.dataPointEOs[E-1].cumulativeSum),S.dataPointEOs[E-1].cumulativeSum>d.viewPortMax&&(d.viewPortMax=S.dataPointEOs[E-1].cumulativeSum)),S.dataPointEOs[E].cumulativeSum<d.viewPortMin&&(d.viewPortMin=S.dataPointEOs[E].cumulativeSum),S.dataPointEOs[E].cumulativeSum>d.viewPortMax&&(d.viewPortMax=S.dataPointEOs[E].cumulativeSum)}S.axisX.valueType=S.xValueType=x?"dateTime":"number"}},j.prototype.calculateAutoBreaks=function(){function r(I,V,H,D){return D?(H=Math.pow(Math.min(H*I/V,V/I),.2),1>=H&&(H=Math.pow(1>I?1/I:Math.min(V/I,I),.25)),{startValue:I*H,endValue:V/H}):(H=.2*Math.min(H-V+I,V-I),0>=H&&(H=.25*Math.min(V-I,Math.abs(I))),{startValue:I+H,endValue:V-H})}function d(I){if(I.dataSeriesIndexes&&!(1>I.dataSeriesIndexes.length)){var V=I.axisX.scaleBreaks&&I.axisX.scaleBreaks.autoCalculate&&1<=I.axisX.scaleBreaks.maxNumberOfAutoBreaks,H=I.axisY.scaleBreaks&&I.axisY.scaleBreaks.autoCalculate&&1<=I.axisY.scaleBreaks.maxNumberOfAutoBreaks;if(V||H)for(var be=I.axisY.dataInfo,J=I.axisX.dataInfo,D,Y=J.min,O=J.max,te=be.min,ie=be.max,J=J._dataRanges,be=be._dataRanges,Me,he=0,de=0;de<I.dataSeriesIndexes.length;de++){var ce=c.data[I.dataSeriesIndexes[de]];if(!(4>ce.dataPoints.length)){for(he=0;he<ce.dataPoints.length;he++)if(V&&(Me=(O+1-Y)*Math.max(parseFloat(I.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,D=ce.dataPoints[he].x.getTime?ce.dataPoints[he].x.getTime():ce.dataPoints[he].x,Me=Math.floor((D-Y)/Me),D<J[Me].min&&(J[Me].min=D),D>J[Me].max&&(J[Me].max=D)),H){var le=(ie+1-te)*Math.max(parseFloat(I.axisY.scaleBreaks.collapsibleThreshold)||10,10)/100;if((D=I.type==="waterfall"?ce.dataPointEOs[he].cumulativeSum:ce.dataPoints[he].y)&&D.length)for(var ee=0;ee<D.length;ee++)Me=Math.floor((D[ee]-te)/le),D[ee]<be[Me].min&&(be[Me].min=D[ee]),D[ee]>be[Me].max&&(be[Me].max=D[ee]);else m(D)||(Me=Math.floor((D-te)/le),D<be[Me].min&&(be[Me].min=D),D>be[Me].max&&(be[Me].max=D))}}}}}function h(I){if(I.dataSeriesIndexes&&!(1>I.dataSeriesIndexes.length)&&I.axisX.scaleBreaks&&I.axisX.scaleBreaks.autoCalculate&&1<=I.axisX.scaleBreaks.maxNumberOfAutoBreaks)for(var V=I.axisX.dataInfo,H=V.min,D=V.max,Y=V._dataRanges,O,te=0,ie=0;ie<I.dataSeriesIndexes.length;ie++){var J=c.data[I.dataSeriesIndexes[ie]];if(!(4>J.dataPoints.length))for(te=0;te<J.dataPoints.length;te++)O=(D+1-H)*Math.max(parseFloat(I.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,V=J.dataPoints[te].x.getTime?J.dataPoints[te].x.getTime():J.dataPoints[te].x,O=Math.floor((V-H)/O),V<Y[O].min&&(Y[O].min=V),V>Y[O].max&&(Y[O].max=V)}}for(var o,c=this,x=!1,y=0;y<this._axes.length;y++)if(this._axes[y].scaleBreaks&&this._axes[y].scaleBreaks.autoCalculate&&1<=this._axes[y].scaleBreaks.maxNumberOfAutoBreaks){x=!0,this._axes[y].dataInfo._dataRanges=[];for(var S=0;S<100/Math.max(parseFloat(this._axes[y].scaleBreaks.collapsibleThreshold)||10,10);S++)this._axes[y].dataInfo._dataRanges.push({min:1/0,max:-1/0})}if(x){for(y=0;y<this.plotInfo.plotTypes.length;y++)for(x=this.plotInfo.plotTypes[y],S=0;S<x.plotUnits.length;S++)o=x.plotUnits[S],o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="column"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="bar"||o.type==="bubble"||o.type==="scatter"||o.type==="candlestick"||o.type==="ohlc"||o.type==="rangeColumn"||o.type==="rangeBar"||o.type==="rangeArea"||o.type==="rangeSplineArea"||o.type==="waterfall"||o.type==="error"||o.type==="boxAndWhisker"?d(o):0<=o.type.indexOf("stacked")&&h(o);for(y=0;y<this._axes.length;y++)if(this._axes[y].dataInfo._dataRanges){var E=this._axes[y].dataInfo.min;o=(this._axes[y].dataInfo.max+1-E)*Math.max(parseFloat(this._axes[y].scaleBreaks.collapsibleThreshold)||10,10)/100;var w=this._axes[y].dataInfo._dataRanges,v,b,x=[];if(this._axes[y].dataInfo.dataPointYPositiveSums){var C=this._axes[y].dataInfo.dataPointYPositiveSums;v=w;for(S in C)if(C.hasOwnProperty(S)&&!isNaN(S)&&(b=C[S],!m(b))){var u=Math.floor((b-E)/o);b<v[u].min&&(v[u].min=b),b>v[u].max&&(v[u].max=b)}delete this._axes[y].dataInfo.dataPointYPositiveSums}if(this._axes[y].dataInfo.dataPointYNegativeSums){C=this._axes[y].dataInfo.dataPointYNegativeSums,v=w;for(S in C)C.hasOwnProperty(S)&&!isNaN(S)&&(b=-1*C[S],m(b)||(u=Math.floor((b-E)/o),b<v[u].min&&(v[u].min=b),b>v[u].max&&(v[u].max=b)));delete this._axes[y].dataInfo.dataPointYNegativeSums}for(S=0;S<w.length-1;S++)if(v=w[S].max,isFinite(v))for(;S<w.length-1;)if(E=w[S+1].min,isFinite(E)){b=E-v,b>o&&x.push({diff:b,start:v,end:E});break}else S++;if(this._axes[y].scaleBreaks.customBreaks)for(S=0;S<this._axes[y].scaleBreaks.customBreaks.length;S++)for(o=0;o<x.length;o++)(this._axes[y].scaleBreaks.customBreaks[S].startValue<=x[o].start&&x[o].start<=this._axes[y].scaleBreaks.customBreaks[S].endValue||this._axes[y].scaleBreaks.customBreaks[S].startValue<=x[o].start&&x[o].start<=this._axes[y].scaleBreaks.customBreaks[S].endValue||x[o].start<=this._axes[y].scaleBreaks.customBreaks[S].startValue&&this._axes[y].scaleBreaks.customBreaks[S].startValue<=x[o].end||x[o].start<=this._axes[y].scaleBreaks.customBreaks[S].endValue&&this._axes[y].scaleBreaks.customBreaks[S].endValue<=x[o].end)&&(x.splice(o,1),o--);for(x.sort(function(V,H){return H.diff-V.diff}),S=0;S<Math.min(x.length,this._axes[y].scaleBreaks.maxNumberOfAutoBreaks);S++)o=r(x[S].start,x[S].end,this._axes[y].logarithmic?this._axes[y].dataInfo.max/this._axes[y].dataInfo.min:this._axes[y].dataInfo.max-this._axes[y].dataInfo.min,this._axes[y].logarithmic),this._axes[y].scaleBreaks.autoBreaks.push(new Mt(this,"autoBreaks",o,S,++this._eventManager.lastObjectId,this._axes[y].scaleBreaks)),this._axes[y].scaleBreaks._appliedBreaks.push(this._axes[y].scaleBreaks.autoBreaks[this._axes[y].scaleBreaks.autoBreaks.length-1]);this._axes[y].scaleBreaks._appliedBreaks.sort(function(V,H){return V.startValue-H.startValue})}}},j.prototype.renderCrosshairs=function(r,d){for(var h=0;h<this.axisX.length;h++)this.axisX[h]!=r&&this.axisX[h].crosshair&&this.axisX[h].crosshair.enabled&&!this.axisX[h].crosshair._hidden&&(d&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisX[h].crosshair.render(null,this.sessionVariables.mouseY,this.axisX[h].convertPixelToValue(this.sessionVariables.mouseY)):this.axisX[h].crosshair.render(this.sessionVariables.mouseX,null,this.axisX[h].convertPixelToValue(this.sessionVariables.mouseX)):d||this.axisX[h].showCrosshair(this.axisX[h].crosshair._updatedValue));for(h=0;h<this.axisX2.length;h++)this.axisX2[h]!=r&&this.axisX2[h].crosshair&&this.axisX2[h].crosshair.enabled&&!this.axisX2[h].crosshair._hidden&&(d&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisX2[h].crosshair.render(null,this.sessionVariables.mouseY,this.axisX2[h].convertPixelToValue(this.sessionVariables.mouseY)):this.axisX2[h].crosshair.render(this.sessionVariables.mouseX,null,this.axisX2[h].convertPixelToValue(this.sessionVariables.mouseX)):d||this.axisX2[h].showCrosshair(this.axisX2[h].crosshair._updatedValue));for(h=0;h<this.axisY.length;h++)this.axisY[h]!=r&&this.axisY[h].crosshair&&this.axisY[h].crosshair.enabled&&!this.axisY[h].crosshair._hidden&&(d&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisY[h].crosshair.render(this.sessionVariables.mouseX,null,this.axisY[h].convertPixelToValue(this.sessionVariables.mouseX)):this.axisY[h].crosshair.render(null,this.sessionVariables.mouseY,this.axisY[h].convertPixelToValue(this.sessionVariables.mouseY)):d||this.axisY[h].showCrosshair(this.axisY[h].crosshair._updatedValue));for(h=0;h<this.axisY2.length;h++)this.axisY2[h]!=r&&this.axisY2[h].crosshair&&this.axisY2[h].crosshair.enabled&&!this.axisY2[h].crosshair._hidden&&(d&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisY2[h].crosshair.render(this.sessionVariables.mouseX,null,this.axisY2[h].convertPixelToValue(this.sessionVariables.mouseX)):this.axisY2[h].crosshair.render(null,this.sessionVariables.mouseY,this.axisY2[h].convertPixelToValue(this.sessionVariables.mouseY)):d||this.axisY2[h].showCrosshair(this.axisY2[h].crosshair._updatedValue))},j.prototype.getDataPointAtXY=function(r,d,h){h=h||!1;for(var o=[],c=this._dataInRenderedOrder.length-1;0<=c;c--){var x=null;(x=this._dataInRenderedOrder[c].getDataPointAtXY(r,d,h))&&o.push(x)}for(r=null,d=!1,h=0;h<o.length;h++)if((o[h].dataSeries.type==="line"||o[h].dataSeries.type==="stepLine"||o[h].dataSeries.type==="area"||o[h].dataSeries.type==="stepArea")&&(c=M("markerSize",o[h].dataPoint,o[h].dataSeries)||8,o[h].distance<=c/2)){d=!0;break}for(h=0;h<o.length;h++)d&&o[h].dataSeries.type!=="line"&&o[h].dataSeries.type!=="stepLine"&&o[h].dataSeries.type!=="area"&&o[h].dataSeries.type!=="stepArea"||(r?o[h].distance<=r.distance&&(r=o[h]):r=o[h]);return r},j.prototype.getObjectAtXY=function(r,d,h){var o=null;if(h=this.getDataPointAtXY(r,d,h||!1))o=h.dataSeries.dataPointIds[h.dataPointIndex];else if(X)o=N(r,d,this._eventManager.ghostCtx);else for(h=0;h<this.legend.items.length;h++){var c=this.legend.items[h];r>=c.x1&&r<=c.x2&&d>=c.y1&&d<=c.y2&&(o=c.id)}return o},j.prototype.getAutoFontSize=Ki,j.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},j.prototype.clearCanvas=dn,j.prototype.attachEvent=function(r){this._events.push(r)},j.prototype._touchEventHandler=function(r){if(r.changedTouches&&this.interactivityEnabled){var d=[],h=r.changedTouches,o=h?h[0]:r,c=null;switch(r.type){case"touchstart":case"MSPointerDown":d=["mousemove","mousedown"],this._lastTouchData=Yi(o),this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":d=["mousemove"];break;case"touchend":case"MSPointerUp":var x=this._lastTouchData&&this._lastTouchData.time?new Date-this._lastTouchData.time:0,d=this._lastTouchEventType==="touchstart"||this._lastTouchEventType==="MSPointerDown"||300>x?["mouseup","click"]:["mouseup"];break;default:return}if(!(h&&1<h.length)){c=Yi(o),c.time=new Date;try{var y=c.y-this._lastTouchData.y,x=c.time-this._lastTouchData.time;(1<Math.abs(y)&&this._lastTouchData.scroll||5<Math.abs(y)&&250>x)&&(this._lastTouchData.scroll=!0,this.stockChart&&(this.stockChart._chartScroll=!0))}catch{}if(this._lastTouchEventType=r.type,this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(h=0;h<d.length;h++)c=d[h],y=document.createEvent("MouseEvent"),y.initMouseEvent(c,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(y),(!m(this._lastTouchData.scroll)&&!this._lastTouchData.scroll||!this._lastTouchData.scroll&&250<x||c==="click")&&(r.preventManipulation&&r.preventManipulation(),r.preventDefault&&r.cancelable&&r.preventDefault(),this.stockChart&&(this.stockChart._chartScroll=null))}}},j.prototype._dispatchRangeEvent=function(r,d){var h={chart:this};h.type=r,h.trigger=d;var o=[];this.axisX&&0<this.axisX.length&&o.push("axisX"),this.axisX2&&0<this.axisX2.length&&o.push("axisX2"),this.axisY&&0<this.axisY.length&&o.push("axisY"),this.axisY2&&0<this.axisY2.length&&o.push("axisY2");for(var c=0;c<o.length;c++)if(m(h[o[c]])&&(h[o[c]]=[]),o[c]==="axisY")for(var x=0;x<this.axisY.length;x++)h[o[c]].push({viewportMinimum:this[o[c]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[c]][x].sessionVariables.newViewportMaximum});else if(o[c]==="axisY2")for(x=0;x<this.axisY2.length;x++)h[o[c]].push({viewportMinimum:this[o[c]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[c]][x].sessionVariables.newViewportMaximum});else if(o[c]==="axisX")for(x=0;x<this.axisX.length;x++)h[o[c]].push({viewportMinimum:this[o[c]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[c]][x].sessionVariables.newViewportMaximum});else if(o[c]==="axisX2")for(x=0;x<this.axisX2.length;x++)h[o[c]].push({viewportMinimum:this[o[c]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[c]][x].sessionVariables.newViewportMaximum});this.dispatchEvent(r,h,this)},j.prototype._mouseEventHandler=function(r){function d(){j.capturedEventParam&&(c=j.capturedEventParam,y=c.bounds,o==="mouseup"&&(j.capturedEventParam=null,c.chart.overlaidCanvas.releaseCapture?c.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",c.chart._mouseEventHandler,!1)),c.hasOwnProperty(o)&&(o!=="mouseup"||c.chart.overlaidCanvas.releaseCapture?r.target!==c.chart.overlaidCanvas&&X||c[o].call(c.context,h.x,h.y):r.target!==c.chart.overlaidCanvas&&(c.chart.isDrag=!1)))}typeof r.target>"u"&&r.srcElement&&(r.target=r.srcElement);var h=Yi(r),o=r.type,c,x;if(r.which?x=r.which==3:r.button&&(x=r.button==2),this._ignoreNextEvent)d(),this._ignoreNextEvent=!1;else if(d(),this.interactivityEnabled){r.preventManipulation&&r.preventManipulation(),r.preventDefault&&r.preventDefault();var y;if(!x){if(!j.capturedEventParam&&this._events){for(x=0;x<this._events.length;x++)if(this._events[x].hasOwnProperty(o))if(c=this._events[x],y=c.bounds,h.x>=y.x1&&h.x<=y.x2&&h.y>=y.y1&&h.y<=y.y2){c[o].call(c.context,h.x,h.y),o==="mousedown"&&c.capture===!0?(j.capturedEventParam=c,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.documentElement.addEventListener("mouseup",this._mouseEventHandler,!1)):o==="mouseup"&&(c.chart.overlaidCanvas.releaseCapture?c.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",this._mouseEventHandler,!1));break}else c=null;r.target.style.cursor=c&&c.cursor?c.cursor:this._defaultCursor}if(x=this.plotArea,h.x<x.x1||h.x>x.x2||h.y<x.y1||h.y>x.y2){for(this.toolTip&&this.toolTip.enabled?(this.toolTip.hide(),this.toolTip.dispatchEvent("hidden",{chart:this,toolTip:this.toolTip},this.toolTip)):this.resetOverlayedCanvas(),x=0;x<this.axisX.length;x++)this.axisX[x].crosshair&&this.axisX[x].crosshair.enabled&&(this.axisX[x].crosshair.hide(),this.axisX[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX[x].options},this.axisX[x].crosshair));for(x=0;x<this.axisX2.length;x++)this.axisX2[x].crosshair&&this.axisX2[x].crosshair.enabled&&(this.axisX2[x].crosshair.hide(),this.axisX2[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX2[x].options},this.axisX2[x].crosshair));for(x=0;x<this.axisY.length;x++)this.axisY[x].crosshair&&this.axisY[x].crosshair.enabled&&(this.axisY[x].crosshair.hide(),this.axisY[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY[x].options},this.axisY[x].crosshair));for(x=0;x<this.axisY2.length;x++)this.axisY2[x].crosshair&&this.axisY2[x].crosshair.enabled&&(this.axisY2[x].crosshair.hide(),this.axisY2[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY2[x].options},this.axisY2[x].crosshair))}this.sessionVariables.mouseX=h.x,this.sessionVariables.mouseY=h.y,this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(r)}}},j.prototype._plotAreaMouseDown=function(r,d){this.isDrag=!0,this.dragStartPoint={x:r,y:d}},j.prototype._plotAreaMouseUp=function(r,d){if((this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped")&&this.isDrag){var h=d-this.dragStartPoint.y,o=r-this.dragStartPoint.x,S=0<=this.zoomType.indexOf("x"),y=0<=this.zoomType.indexOf("y"),c=!1;if(this.resetOverlayedCanvas(),this.plotInfo.axisPlacement==="xySwapped")var x=y,y=S,S=x;if(this.panEnabled||this.zoomEnabled){if(this.panEnabled)for(S=y=0;S<this._axes.length;S++)h=this._axes[S],h.logarithmic?h.viewportMinimum<h.minimum?(y=h.minimum/h.viewportMinimum,h.sessionVariables.newViewportMinimum=h.viewportMinimum*y,h.sessionVariables.newViewportMaximum=h.viewportMaximum*y,c=!0):h.viewportMaximum>h.maximum&&(y=h.viewportMaximum/h.maximum,h.sessionVariables.newViewportMinimum=h.viewportMinimum/y,h.sessionVariables.newViewportMaximum=h.viewportMaximum/y,c=!0):h.viewportMinimum<h.minimum?(y=h.minimum-h.viewportMinimum,h.sessionVariables.newViewportMinimum=h.viewportMinimum+y,h.sessionVariables.newViewportMaximum=h.viewportMaximum+y,c=!0):h.viewportMaximum>h.maximum&&(y=h.viewportMaximum-h.maximum,h.sessionVariables.newViewportMinimum=h.viewportMinimum-y,h.sessionVariables.newViewportMaximum=h.viewportMaximum-y,c=!0);else if((!S||2<Math.abs(o))&&(!y||2<Math.abs(h))&&this.zoomEnabled){if(!this.dragStartPoint)return;h=S?this.dragStartPoint.x:this.plotArea.x1,o=y?this.dragStartPoint.y:this.plotArea.y1,S=S?r:this.plotArea.x2,y=y?d:this.plotArea.y2,2<Math.abs(h-S)&&2<Math.abs(o-y)&&this._zoomPanToSelectedRegion(h,o,S,y)&&(c=!0)}c&&(this._ignoreNextEvent=!0,this._dispatchRangeEvent("rangeChanging","zoom"),this.stockChart&&(this.stockChart._rangeEventParameter||(this.stockChart._rangeEventParameter={stockChart:this.stockChart,source:"chart",index:this.stockChart.charts.indexOf(this),minimum:this.stockChart.sessionVariables._axisXMin,maximum:this.stockChart.sessionVariables._axisXMax}),this.stockChart._rangeEventParameter.type="rangeChanging",this.stockChart.dispatchEvent("rangeChanging",this.stockChart._rangeEventParameter,this.stockChart)),this.render(),this._dispatchRangeEvent("rangeChanged","zoom"),this.stockChart&&(this.stockChart.rangeUpdatedBy="chart",this.stockChart._rangeEventParameter.type="rangeChanged",this.stockChart.dispatchEvent("rangeChanged",this.stockChart._rangeEventParameter,this.stockChart)),c&&this.zoomEnabled&&this._zoomButton.style.display==="none"&&(K(this._zoomButton,this._resetButton),U(this,this._zoomButton,"pan"),U(this,this._resetButton,"reset")))}}if(this.isDrag=!1,this.plotInfo.axisPlacement!=="none"){if(this.resetOverlayedCanvas(),this.axisX&&0<this.axisX.length)for(c=0;c<this.axisX.length;c++)this.axisX[c].crosshair&&this.axisX[c].crosshair.enabled&&this.axisX[c].renderCrosshair(r,d);if(this.axisX2&&0<this.axisX2.length)for(c=0;c<this.axisX2.length;c++)this.axisX2[c].crosshair&&this.axisX2[c].crosshair.enabled&&this.axisX2[c].renderCrosshair(r,d);if(this.axisY&&0<this.axisY.length)for(c=0;c<this.axisY.length;c++)this.axisY[c].crosshair&&this.axisY[c].crosshair.enabled&&this.axisY[c].renderCrosshair(r,d);if(this.axisY2&&0<this.axisY2.length)for(c=0;c<this.axisY2.length;c++)this.axisY2[c].crosshair&&this.axisY2[c].crosshair.enabled&&this.axisY2[c].renderCrosshair(r,d);if(this.axisX&&0<this.axisX.length)for(c=0;c<this.axisX.length;c++)this.axisX[c].crosshair&&this.axisX[c].crosshair.enabled&&this.axisX[c].crosshair.renderLabel();if(this.axisX2&&0<this.axisX2.length)for(c=0;c<this.axisX2.length;c++)this.axisX2[c].crosshair&&this.axisX2[c].crosshair.enabled&&this.axisX2[c].crosshair.renderLabel();if(this.axisY&&0<this.axisY.length)for(c=0;c<this.axisY.length;c++)this.axisY[c].crosshair&&this.axisY[c].crosshair.enabled&&this.axisY[c].crosshair.renderLabel();if(this.axisY2&&0<this.axisY2.length)for(c=0;c<this.axisY2.length;c++)this.axisY2[c].crosshair&&this.axisY2[c].crosshair.enabled&&this.axisY2[c].crosshair.renderLabel()}},j.prototype._plotAreaMouseMove=function(r,d){if(this.isDrag&&this.plotInfo.axisPlacement!=="none"){var h=0,o=0,c=h=null,c=0<=this.zoomType.indexOf("x"),x=0<=this.zoomType.indexOf("y"),y=this;if(this.plotInfo.axisPlacement==="xySwapped"&&(h=x,x=c,c=h),h=this.dragStartPoint.x-r,o=this.dragStartPoint.y-d,2<Math.abs(h)&&8>Math.abs(h)&&(this.panEnabled||this.zoomEnabled)){this.toolTip.hide(),this.toolTip&&this.toolTip.enabled&&this.toolTip.dispatchEvent("hidden",{chart:this,toolTip:this.toolTip},this.toolTip);for(var S=0;S<this.axisX.length;S++)this.axisX[S].crosshair&&this.axisX[S].crosshair.enabled&&(this.axisX[S].crosshair.hide(),this.axisX[S].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX[S].options},this.axisX[S].crosshair));for(S=0;S<this.axisX2.length;S++)this.axisX2[S].crosshair&&this.axisX2[S].crosshair.enabled&&(this.axisX2[S].crosshair.hide(),this.axisX2[S].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX2[S].options},this.axisX2[S].crosshair));for(S=0;S<this.axisY.length;S++)this.axisY[S].crosshair&&this.axisY[S].crosshair.enabled&&(this.axisY[S].crosshair.hide(),this.axisY[S].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY[S].options},this.axisY[S].crosshair));for(S=0;S<this.axisY2.length;S++)this.axisY2[S].crosshair&&this.axisY2[S].crosshair.enabled&&(this.axisY2[S].crosshair.hide(),this.axisY2[S].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY2[S].options},this.axisY2[S].crosshair))}else this.panEnabled||this.zoomEnabled||this.toolTip.mouseMoveHandler(r,d);if((!c||2<Math.abs(h)||!x||2<Math.abs(o))&&(this.panEnabled||this.zoomEnabled)){if(this.panEnabled)c={x1:c?this.plotArea.x1+h:this.plotArea.x1,y1:x?this.plotArea.y1+o:this.plotArea.y1,x2:c?this.plotArea.x2+h:this.plotArea.x2,y2:x?this.plotArea.y2+o:this.plotArea.y2},clearTimeout(y._panTimerId),y._panTimerId=setTimeout(function(v,b,C,u){return function(){y._zoomPanToSelectedRegion(v,b,C,u,!0)&&(y._dispatchRangeEvent("rangeChanging","pan"),y.stockChart&&(y.stockChart._rangeEventParameter.type="rangeChanging",y.stockChart.dispatchEvent("rangeChanging",y.stockChart._rangeEventParameter,y.stockChart)),y.render(),y._dispatchRangeEvent("rangeChanged","pan"),y.stockChart&&(y.stockChart._rangeEventParameter.type="rangeChanged",y.stockChart.dispatchEvent("rangeChanged",y.stockChart._rangeEventParameter,y.stockChart)),y.dragStartPoint.x=r,y.dragStartPoint.y=d)}}(c.x1,c.y1,c.x2,c.y2),0);else if(this.zoomEnabled){this.resetOverlayedCanvas(),h=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.fillStyle="#A89896";var o=c?this.dragStartPoint.x:this.plotArea.x1,S=x?this.dragStartPoint.y:this.plotArea.y1,E=c?r-this.dragStartPoint.x:this.plotArea.x2-this.plotArea.x1,w=x?d-this.dragStartPoint.y:this.plotArea.y2-this.plotArea.y1;this.validateRegion(o,S,c?r:this.plotArea.x2-this.plotArea.x1,x?d:this.plotArea.y2-this.plotArea.y1,this.zoomType!=="xy").isValid&&(this.resetOverlayedCanvas(),this.overlaidCanvasCtx.fillStyle="#99B2B5"),this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillRect(o,S,E,w),this.overlaidCanvasCtx.globalAlpha=h}}}else if(this.toolTip.mouseMoveHandler(r,d),this.plotInfo.axisPlacement!=="none"){if(this.sessionVariables.crosshairShownByPixel=!0,this.axisX&&0<this.axisX.length)for(c=0;c<this.axisX.length;c++)this.axisX[c].crosshair&&this.axisX[c].crosshair.enabled&&this.axisX[c].renderCrosshair(r,d);if(this.axisX2&&0<this.axisX2.length)for(c=0;c<this.axisX2.length;c++)this.axisX2[c].crosshair&&this.axisX2[c].crosshair.enabled&&this.axisX2[c].renderCrosshair(r,d);if(this.axisY&&0<this.axisY.length)for(c=0;c<this.axisY.length;c++)this.axisY[c].crosshair&&this.axisY[c].crosshair.enabled&&this.axisY[c].renderCrosshair(r,d);if(this.axisY2&&0<this.axisY2.length)for(c=0;c<this.axisY2.length;c++)this.axisY2[c].crosshair&&this.axisY2[c].crosshair.enabled&&this.axisY2[c].renderCrosshair(r,d);if(this.axisX&&0<this.axisX.length)for(c=0;c<this.axisX.length;c++)this.axisX[c].crosshair&&this.axisX[c].crosshair.enabled&&this.axisX[c].crosshair.renderLabel();if(this.axisX2&&0<this.axisX2.length)for(c=0;c<this.axisX2.length;c++)this.axisX2[c].crosshair&&this.axisX2[c].crosshair.enabled&&this.axisX2[c].crosshair.renderLabel();if(this.axisY&&0<this.axisY.length)for(c=0;c<this.axisY.length;c++)this.axisY[c].crosshair&&this.axisY[c].crosshair.enabled&&this.axisY[c].crosshair.renderLabel();if(this.axisY2&&0<this.axisY2.length)for(c=0;c<this.axisY2.length;c++)this.axisY2[c].crosshair&&this.axisY2[c].crosshair.enabled&&this.axisY2[c].crosshair.renderLabel()}},j.prototype._zoomPanToSelectedRegion=function(r,d,h,o,c){if(r=this.validateRegion(r,d,h,o,c),d=r.axesWithValidRange,h=r.axesRanges,r.isValid)for(o=0;o<d.length;o++)c=h[o],d[o].setViewPortRange(c.val1,c.val2),this.syncCharts&&this.zoomType!="y"&&this.syncCharts(c.val1,c.val2),this.stockChart&&(this.stockChart._rangeEventParameter={stockChart:this.stockChart,source:"chart",index:this.stockChart.charts.indexOf(this),minimum:c.val1,maximum:c.val2});return r.isValid},j.prototype.validateRegion=function(r,d,h,o,c){c=c||!1;for(var x=0<=this.zoomType.indexOf("x"),y=0<=this.zoomType.indexOf("y"),S=!1,E=[],w=[],v=[],b=0;b<this._axes.length;b++)(this._axes[b].type==="axisX"&&x||this._axes[b].type==="axisY"&&y)&&w.push(this._axes[b]);for(y=0;y<w.length;y++){var b=w[y],x=!1,I=b.convertPixelToValue({x:r,y:d}),u=b.convertPixelToValue({x:h,y:o});if(I>u)var C=u,u=I,I=C;if(b.scaleBreaks)for(C=0;!x&&C<b.scaleBreaks._appliedBreaks.length;C++)x=b.scaleBreaks._appliedBreaks[C].startValue<=I&&b.scaleBreaks._appliedBreaks[C].endValue>=u;if(isFinite(b.dataInfo.minDiff)){if(C=b.getApparentDifference(I,u,null,!0),!(x||!(this.panEnabled&&b.scaleBreaks&&b.scaleBreaks._appliedBreaks.length)&&(b.logarithmic&&C<Math.pow(b.dataInfo.minDiff,3)||!b.logarithmic&&C<3*Math.abs(b.dataInfo.minDiff))||I<b.minimum||u>b.maximum))E.push(b),v.push({val1:I,val2:u}),S=!0;else if(!c){S=!1;break}}}return{isValid:S,axesWithValidRange:E,axesRanges:v}},j.prototype.preparePlotArea=function(){var r=this.plotArea;if(!X&&(0<r.x1||0<r.y1)&&r.ctx.translate(r.x1,r.y1),(this.axisX[0]||this.axisX2[0])&&(this.axisY[0]||this.axisY2[0])){var d=this.axisX[0]?this.axisX[0].lineCoordinates:this.axisX2[0].lineCoordinates;if(this.axisY&&0<this.axisY.length&&this.axisY[0]){var h=this.axisY[0];r.x1=d.x1<d.x2?d.x1:h.lineCoordinates.x1,r.y1=d.y1<h.lineCoordinates.y1?d.y1:h.lineCoordinates.y1,r.x2=d.x2>h.lineCoordinates.x2?d.x2:h.lineCoordinates.x2,r.y2=d.y1>h.lineCoordinates.y2?d.y1:h.lineCoordinates.y2,r.width=r.x2-r.x1,r.height=r.y2-r.y1}this.axisY2&&0<this.axisY2.length&&this.axisY2[0]&&(h=this.axisY2[0],r.x1=d.x1<d.x2?d.x1:h.lineCoordinates.x1,r.y1=d.y1<h.lineCoordinates.y1?d.y1:h.lineCoordinates.y1,r.x2=d.x2>h.lineCoordinates.x2?d.x2:h.lineCoordinates.x2,r.y2=d.y2>h.lineCoordinates.y2?d.y2:h.lineCoordinates.y2,r.width=r.x2-r.x1,r.height=r.y2-r.y1)}else d=this.layoutManager.getFreeSpace(),r.x1=d.x1,r.x2=d.x2,r.y1=d.y1,r.y2=d.y2,r.width=d.width,r.height=d.height;X||(r.canvas.width=r.width,r.canvas.height=r.height,r.canvas.style.left=r.x1+"px",r.canvas.style.top=r.y1+"px",(0<r.x1||0<r.y1)&&r.ctx.translate(-r.x1,-r.y1)),r.layoutManager=new ge(r.x1,r.y1,r.x2,r.y2,2)},j.prototype.renderIndexLabels=function(r){var d=r||this.plotArea.ctx,h=this.plotArea,o=0,c=0,x=0,y=c=x=0,S=0,E=o=0,w=0;for(r=0;r<this._indexLabels.length;r++){var v=this._indexLabels[r],b=v.chartType.toLowerCase(),C,u,S=M("indexLabelFontColor",v.dataPoint,v.dataSeries),I=M("indexLabelFontSize",v.dataPoint,v.dataSeries),E=M("indexLabelFontFamily",v.dataPoint,v.dataSeries),w=M("indexLabelFontStyle",v.dataPoint,v.dataSeries);C=M("indexLabelFontWeight",v.dataPoint,v.dataSeries);var V=M("indexLabelBackgroundColor",v.dataPoint,v.dataSeries);u=M("indexLabelBorderColor",v.dataPoint,v.dataSeries);var x=M("indexLabelBorderThickness",v.dataPoint,v.dataSeries),c=M("indexLabelMaxWidth",v.dataPoint,v.dataSeries),y=M("indexLabelWrap",v.dataPoint,v.dataSeries),H=M("indexLabelLineDashType",v.dataPoint,v.dataSeries),D=M("indexLabelLineColor",v.dataPoint,v.dataSeries),Y=m(v.dataPoint.indexLabelLineThickness)?m(v.dataSeries.options.indexLabelLineThickness)?0:v.dataSeries.options.indexLabelLineThickness:v.dataPoint.indexLabelLineThickness,o=0<Y?Math.min(10,(this.plotInfo.axisPlacement==="normal"?this.plotArea.height:this.plotArea.width)<<0):0,O={percent:null,total:null},te=null;(0<=v.dataSeries.type.indexOf("stacked")||v.dataSeries.type==="pie"||v.dataSeries.type==="doughnut")&&(O=this.getPercentAndTotal(v.dataSeries,v.dataPoint)),(v.dataSeries.indexLabelFormatter||v.dataPoint.indexLabelFormatter)&&(te={chart:this,dataSeries:v.dataSeries,dataPoint:v.dataPoint,index:v.indexKeyword,total:O.total,percent:O.percent});var ie=v.dataPoint.indexLabelFormatter?v.dataPoint.indexLabelFormatter(te):v.dataPoint.indexLabel?this.replaceKeywordsWithValue(v.dataPoint.indexLabel,v.dataPoint,v.dataSeries,null,v.indexKeyword):v.dataSeries.indexLabelFormatter?v.dataSeries.indexLabelFormatter(te):v.dataSeries.indexLabel?this.replaceKeywordsWithValue(v.dataSeries.indexLabel,v.dataPoint,v.dataSeries,null,v.indexKeyword):null;if(ie!==null&&ie!==""){var O=M("indexLabelPlacement",v.dataPoint,v.dataSeries),te=M("indexLabelOrientation",v.dataPoint,v.dataSeries),J=M("indexLabelTextAlign",v.dataPoint,v.dataSeries),be=v.direction,Me=v.dataSeries.axisX,he=v.dataSeries.axisY,de=!1,V=new ue(d,{x:0,y:0,maxWidth:c||.5*this.width,maxHeight:y?5*I:1.5*I,angle:te==="horizontal"?0:-90,text:ie,padding:0,backgroundColor:V,borderColor:u,borderThickness:x,textAlign:J,fontSize:I,fontFamily:E,fontWeight:C,fontColor:S,fontStyle:w,textBaseline:"middle"});if(V.measureText(),v.dataSeries.indexLabelMaxWidth=V.maxWidth,b==="stackedarea100"){if(v.point.x<h.x1||v.point.x>h.x2||v.point.y<h.y1-1||v.point.y>h.y2+1)continue}else if(b==="rangearea"||b==="rangesplinearea"){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||Math.max.apply(null,v.dataPoint.y)<he.viewportMinimum||Math.min.apply(null,v.dataPoint.y)>he.viewportMaximum)continue}else if(0<=b.indexOf("line")||0<=b.indexOf("area")||0<=b.indexOf("bubble")||0<=b.indexOf("scatter")){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||v.dataPoint.y<he.viewportMinimum||v.dataPoint.y>he.viewportMaximum)continue}else if(0<=b.indexOf("column")){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||(0<v.dataPoint.y.length?Math.max.apply(null,v.dataPoint.y):v.dataPoint.y)<he.viewportMinimum||(0<v.dataPoint.y.length?Math.max.apply(null,v.dataPoint.y):v.dataPoint.y)>he.viewportMaximum)continue}else if(b==="waterfall"||b==="error"&&!v.axisSwapped){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||v.bounds.y1>h.y2||v.bounds.y2<h.y1)continue}else if(0<=b.indexOf("bar")||b==="error"){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||v.bounds.x1>h.x2||v.bounds.x2<h.x1)continue}else if(b==="candlestick"||b==="ohlc"){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||Math.max.apply(null,v.dataPoint.y)<he.viewportMinimum||Math.min.apply(null,v.dataPoint.y)>he.viewportMaximum)continue}else if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum)continue;y=S=2,te==="horizontal"?(E=V.width,w=V.height):(w=V.width,E=V.height),this.plotInfo.axisPlacement==="normal"?(0<=b.indexOf("line")||0<=b.indexOf("area")?(O="auto",S=4):0<=b.indexOf("stacked")?O==="auto"&&(O="inside"):(b==="bubble"||b==="scatter")&&(O="inside"),C=v.point.x-E/2+(te==="horizontal"?0:V._lineHeight/2),O!=="inside"?(c=h.y1,x=h.y2,0<be?(u=v.point.y+V._lineHeight/2-w-S-o,u<c&&(u=O==="auto"?Math.max(v.point.y,c)+V._lineHeight/2+S+o:c+V._lineHeight/2+S+o,de=u+(te==="horizontal"?w-V._lineHeight/2:0)>v.point.y,!de||0<=b.indexOf("line")||0<=b.indexOf("area")||(u-=o))):(u=v.point.y+V._lineHeight/2+S+o,u>x-w+V._lineHeight/2-S&&(u=O==="auto"?Math.min(v.point.y,x)+V._lineHeight/2-w-S-o:x+V._lineHeight/2-w-S-o,de=u-(te==="horizontal"?V._lineHeight/2:w)<v.point.y,!de||0<=b.indexOf("line")||0<=b.indexOf("area")||(u+=o)))):(Math.max(v.bounds.y1,h.y1),x=Math.min(v.bounds.y2,h.y2)-w+V._lineHeight/2,o=0<=b.indexOf("range")||b==="error"?0<be?Math.max(v.bounds.y1,h.y1)+V._lineHeight/2+S:Math.min(v.bounds.y2,h.y2)+V._lineHeight/2-w-S:(Math.max(v.bounds.y1,h.y1)+Math.min(v.bounds.y2,h.y2))/2-w/2+V._lineHeight/2,0<be?(u=o,(b==="bubble"||b==="scatter")&&(u=v.point.y-w/2+V._lineHeight/2,w>v.bounds.y2-v.bounds.y1&&(u-=w/2+S),0>u-V._lineHeight/2&&(u+=Math.abs(u-V._lineHeight/2)<=(v.bounds.y2-v.bounds.y1)/2+S?Math.abs(u-V._lineHeight/2):(v.bounds.y2-v.bounds.y1)/2+S))):(u=Math.min(v.point.y,o),u>x-w-S&&(b==="bubble"||b==="scatter")&&(u=Math.min(v.point.y+S,h.y2-w-S))),u=Math.min(u,x))):(0<=b.indexOf("line")||0<=b.indexOf("area")||0<=b.indexOf("scatter")?(O="auto",y=4):0<=b.indexOf("stacked")?O==="auto"&&(O="inside"):b==="bubble"&&(O="inside"),u=v.point.y+V._lineHeight/2-w/2,O!=="inside"?(x=h.x1,c=h.x2,0>be?(C=v.point.x-E+(te==="horizontal"?0:V._lineHeight/2)-y-o,(te==="horizontal"?C:C-V._lineHeight/2)<x&&(C=O==="auto"?Math.max(v.point.x,x)+(te==="horizontal"?0:V._lineHeight/2)+S+o:x+(te==="horizontal"?0:V._lineHeight/2)+y,(de=C+E-(te==="horizontal"?0:V._lineHeight/2)>v.point.x)&&(C-=o))):(C=v.point.x+(te==="horizontal"?0:V._lineHeight/2)+y+o,(te==="horizontal"?C:C-V._lineHeight/2)>c-E-y-o&&(C=O==="auto"?Math.min(v.point.x,c)-(te==="horizontal"?E:E-V._lineHeight/2)-y-o:c-E-y+(te==="horizontal"?0:V._lineHeight/2),(de=C-(te==="horizontal"?0:V._lineHeight/2)<v.point.x)&&(C+=o)))):(x=Math.max(v.bounds.x1,h.x1),Math.min(v.bounds.x2,h.x2),o=0<=b.indexOf("range")||b==="error"?0>be?Math.max(v.bounds.x1,h.x1):Math.min(v.bounds.x2,h.x2)-E-y+(te==="horizontal"?0:V._lineHeight/2):(Math.max(v.bounds.x1,h.x1)+Math.min(v.bounds.x2,h.x2))/2-E/2+(te==="horizontal"?0:V._lineHeight/2),C=0>be?o:Math.min(v.point.x,o),C=Math.max(C,x+(te==="horizontal"?0:V._lineHeight/2+S)))),te==="vertical"&&(u+=w-V._lineHeight/2,0<="ohlc candlestick boxandwhisker column rangecolumn stackedcolumn stackedcolumn100 error".split(" ").indexOf(b)&&(de=0<be?u+(te==="horizontal"?w-V._lineHeight/2:0)>v.point.y:u-(te==="horizontal"?V._lineHeight/2:w)<v.point.y),b==="bubble"||b==="scatter")&&(C+=V._lineHeight/2-I/2),V.x=C,V.y=u,V.render(!0),Y&&O!=="inside"&&(0>b.indexOf("bar")&&(b!=="error"||!v.axisSwapped)&&v.point.x>h.x1&&v.point.x<h.x2||!de)&&("ohlc candlestick boxandwhisker column rangecolumn stackedcolumn stackedcolumn100 error".split(" ").indexOf(b)===-1&&(b!=="error"||v.axisSwapped)&&v.point.y>h.y1&&v.point.y<h.y2||!de)&&(d.lineWidth=Y,d.strokeStyle=D||"gray",d.setLineDash&&d.setLineDash(P(H,Y)),d.beginPath(),d.moveTo(v.point.x,v.point.y),0<=b.indexOf("bar")||b==="error"&&v.axisSwapped?d.lineTo(C+(0<v.direction?0:E)+(te==="vertical"?-V._lineHeight/2:0),u+(te==="vertical"?-w/2:w/2-V._lineHeight/2)):0<=b.indexOf("column")||b==="error"&&!v.axisSwapped?d.lineTo(C+E/2-(te==="horizontal"?0:V._lineHeight/2),u+(te==="vertical"?u-w<v.point.y?0:-w:(u-V._lineHeight/2<v.point.y?w:0)-V._lineHeight/2)):0<=b.indexOf("waterfall")?d.lineTo(C+E/2-(te==="horizontal"?0:V._lineHeight/2),te==="vertical"?0<be&&u<v.point.y?u:0>be&&u-w>v.point.y?u-w:v.point.y:0<be&&u+w-V._lineHeight/2<v.point.y?u+w-V._lineHeight/2:0>be&&u-V._lineHeight/2>v.point.y?u-V._lineHeight/2:v.point.y):d.lineTo(C+E/2-(te==="horizontal"?0:V._lineHeight/2),u+(te==="vertical"?u-w<v.point.y?0:-w:(u+w-V._lineHeight/2<v.point.y?w:0)-V._lineHeight/2)),d.stroke())}}for(d={source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0,startTimePercent:.7},r=0;r<this._indexLabels.length;r++)v=this._indexLabels[r],V=M("indexLabelBackgroundColor",v.dataPoint,v.dataSeries),v.dataSeries.indexLabelBackgroundColor=m(V)?X?"transparent":null:V;return d},j.prototype.renderLine=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx;h.save();var c=this.plotArea;h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip();for(var x=[],y,S=0;S<r.dataSeriesIndexes.length;S++){var E=r.dataSeriesIndexes[S],w=this.data[E];h.lineWidth=w.lineThickness;var v=w.dataPoints,b="solid";if(h.setLineDash){var C=P(w.nullDataLineDashType,w.lineThickness),b=w.lineDashType,u=P(b,w.lineThickness);h.setLineDash(u)}var I=w.id;this._eventManager.objectMap[I]={objectType:"dataSeries",dataSeriesIndex:E},I=f(I),o.strokeStyle=I,o.lineWidth=0<w.lineThickness?Math.max(w.lineThickness,4):0;var I=w._colorSet,V=I=w.lineColor=w.options.lineColor?w.options.lineColor:I[0];h.strokeStyle=I;var H=!0,D=0,Y,O;if(h.beginPath(),0<v.length){for(var te=!1,D=0;D<v.length;D++)if(Y=v[D].x.getTime?v[D].x.getTime():v[D].x,!(Y<r.axisX.dataInfo.viewPortMin||Y>r.axisX.dataInfo.viewPortMax&&(!w.connectNullData||!te)))if(typeof v[D].y!="number")0<D&&!(w.connectNullData||te||H)&&(h.stroke(),X&&o.stroke()),te=!0;else{Y=r.axisX.convertValueToPixel(Y),O=r.axisY.convertValueToPixel(v[D].y);var ie=w.dataPointIds[D];if(this._eventManager.objectMap[ie]={id:ie,objectType:"dataPoint",dataSeriesIndex:E,dataPointIndex:D,x1:Y,y1:O},H||te?(!H&&w.connectNullData?(h.setLineDash&&(w.options.nullDataLineDashType||b===w.lineDashType&&w.lineDashType!==w.nullDataLineDashType)&&(h.stroke(),h.beginPath(),h.moveTo(y.x,y.y),b=w.nullDataLineDashType,h.setLineDash(C)),h.lineTo(Y,O),X&&o.lineTo(Y,O)):(h.beginPath(),h.moveTo(Y,O),X&&(o.beginPath(),o.moveTo(Y,O))),te=H=!1):(h.lineTo(Y,O),X&&o.lineTo(Y,O),D%500==0&&(h.stroke(),h.beginPath(),h.moveTo(Y,O),X&&(o.stroke(),o.beginPath(),o.moveTo(Y,O)))),y={x:Y,y:O},D<v.length-1&&(V!==(v[D].lineColor||I)||b!==(v[D].lineDashType||w.lineDashType))&&(h.stroke(),h.beginPath(),h.moveTo(Y,O),V=v[D].lineColor||I,h.strokeStyle=V,h.setLineDash&&(v[D].lineDashType?(b=v[D].lineDashType,h.setLineDash(P(b,w.lineThickness))):(b=w.lineDashType,h.setLineDash(u)))),v[D].markerSize!==0&&(0<v[D].markerSize||0<w.markerSize)){var J=w.getMarkerProperties(D,Y,O,h);x.push(J),ie=f(ie),X&&x.push({x:Y,y:O,ctx:o,type:J.type,size:J.size,color:ie,borderColor:ie,borderThickness:J.borderThickness})}(v[D].indexLabel||w.indexLabel||v[D].indexLabelFormatter||w.indexLabelFormatter)&&this._indexLabels.push({chartType:"line",dataPoint:v[D],dataSeries:w,point:{x:Y,y:O},direction:0>v[D].y===r.axisY.reversed?1:-1,color:I})}h.stroke(),X&&o.stroke()}}return Ve.drawMarkers(x),X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),o.beginPath()),h.restore(),h.beginPath(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},j.prototype.renderStepLine=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx;h.save();var c=this.plotArea;h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip();for(var x=[],y,S=0;S<r.dataSeriesIndexes.length;S++){var E=r.dataSeriesIndexes[S],w=this.data[E];h.lineWidth=w.lineThickness;var v=w.dataPoints,b="solid";if(h.setLineDash){var C=P(w.nullDataLineDashType,w.lineThickness),b=w.lineDashType,u=P(b,w.lineThickness);h.setLineDash(u)}var I=w.id;this._eventManager.objectMap[I]={objectType:"dataSeries",dataSeriesIndex:E},I=f(I),o.strokeStyle=I,o.lineWidth=0<w.lineThickness?Math.max(w.lineThickness,4):0;var I=w._colorSet,V=I=w.lineColor=w.options.lineColor?w.options.lineColor:I[0];h.strokeStyle=I;var H=!0,D=0,Y,O;if(h.beginPath(),0<v.length){for(var te=!1,D=0;D<v.length;D++)if(Y=v[D].getTime?v[D].x.getTime():v[D].x,!(Y<r.axisX.dataInfo.viewPortMin||Y>r.axisX.dataInfo.viewPortMax&&(!w.connectNullData||!te)))if(typeof v[D].y!="number")0<D&&!(w.connectNullData||te||H)&&(h.stroke(),X&&o.stroke()),te=!0;else{var ie=O;Y=r.axisX.convertValueToPixel(Y),O=r.axisY.convertValueToPixel(v[D].y);var J=w.dataPointIds[D];this._eventManager.objectMap[J]={id:J,objectType:"dataPoint",dataSeriesIndex:E,dataPointIndex:D,x1:Y,y1:O},H||te?(!H&&w.connectNullData?(h.setLineDash&&(w.options.nullDataLineDashType||b===w.lineDashType&&w.lineDashType!==w.nullDataLineDashType)&&(h.stroke(),h.beginPath(),h.moveTo(y.x,y.y),b=w.nullDataLineDashType,h.setLineDash(C)),h.lineTo(Y,ie),h.lineTo(Y,O),X&&(o.lineTo(Y,ie),o.lineTo(Y,O))):(h.beginPath(),h.moveTo(Y,O),X&&(o.beginPath(),o.moveTo(Y,O))),te=H=!1):(h.lineTo(Y,ie),X&&o.lineTo(Y,ie),h.lineTo(Y,O),X&&o.lineTo(Y,O),D%500==0&&(h.stroke(),h.beginPath(),h.moveTo(Y,O),X&&(o.stroke(),o.beginPath(),o.moveTo(Y,O)))),y={x:Y,y:O},D<v.length-1&&(V!==(v[D].lineColor||I)||b!==(v[D].lineDashType||w.lineDashType))&&(h.stroke(),h.beginPath(),h.moveTo(Y,O),V=v[D].lineColor||I,h.strokeStyle=V,h.setLineDash&&(v[D].lineDashType?(b=v[D].lineDashType,h.setLineDash(P(b,w.lineThickness))):(b=w.lineDashType,h.setLineDash(u)))),v[D].markerSize!==0&&(0<v[D].markerSize||0<w.markerSize)&&(ie=w.getMarkerProperties(D,Y,O,h),x.push(ie),J=f(J),X&&x.push({x:Y,y:O,ctx:o,type:ie.type,size:ie.size,color:J,borderColor:J,borderThickness:ie.borderThickness})),(v[D].indexLabel||w.indexLabel||v[D].indexLabelFormatter||w.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepLine",dataPoint:v[D],dataSeries:w,point:{x:Y,y:O},direction:0>v[D].y===r.axisY.reversed?1:-1,color:I})}h.stroke(),X&&o.stroke()}}return Ve.drawMarkers(x),X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),o.beginPath()),h.restore(),h.beginPath(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},j.prototype.renderSpline=function(r){function d(J){if(J=Z(J,2),0<J.length){o.beginPath(),X&&c.beginPath(),o.moveTo(J[0].x,J[0].y),J[0].newStrokeStyle&&(o.strokeStyle=J[0].newStrokeStyle),J[0].newLineDashArray&&o.setLineDash(J[0].newLineDashArray),X&&c.moveTo(J[0].x,J[0].y);for(var be=0;be<J.length-3;be+=3)o.bezierCurveTo(J[be+1].x,J[be+1].y,J[be+2].x,J[be+2].y,J[be+3].x,J[be+3].y),X&&c.bezierCurveTo(J[be+1].x,J[be+1].y,J[be+2].x,J[be+2].y,J[be+3].x,J[be+3].y),(0<be&&be%3e3===0||J[be+3].newStrokeStyle||J[be+3].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(J[be+3].x,J[be+3].y),J[be+3].newStrokeStyle&&(o.strokeStyle=J[be+3].newStrokeStyle),J[be+3].newLineDashArray&&o.setLineDash(J[be+3].newLineDashArray),X&&(c.stroke(),c.beginPath(),c.moveTo(J[be+3].x,J[be+3].y)));o.stroke(),X&&c.stroke()}}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx;o.save();var x=this.plotArea;o.beginPath(),o.rect(x.x1,x.y1,x.width,x.height),o.clip();for(var y=[],S=0;S<r.dataSeriesIndexes.length;S++){var E=r.dataSeriesIndexes[S],w=this.data[E];o.lineWidth=w.lineThickness;var v=w.dataPoints,b="solid";if(o.setLineDash){var C=P(w.nullDataLineDashType,w.lineThickness),b=w.lineDashType,u=P(b,w.lineThickness);o.setLineDash(u)}var I=w.id;this._eventManager.objectMap[I]={objectType:"dataSeries",dataSeriesIndex:E},I=f(I),c.strokeStyle=I,c.lineWidth=0<w.lineThickness?Math.max(w.lineThickness,4):0;var I=w._colorSet,V=I=w.lineColor=w.options.lineColor?w.options.lineColor:I[0];o.strokeStyle=I;var H=0,D,Y,O=[];if(o.beginPath(),0<v.length){for(Y=!1,H=0;H<v.length;H++)if(D=v[H].getTime?v[H].x.getTime():v[H].x,!(D<r.axisX.dataInfo.viewPortMin||D>r.axisX.dataInfo.viewPortMax&&(!w.connectNullData||!Y)))if(typeof v[H].y!="number")0<H&&!Y&&(w.connectNullData?o.setLineDash&&0<O.length&&(w.options.nullDataLineDashType||!v[H-1].lineDashType)&&(O[O.length-1].newLineDashArray=C,b=w.nullDataLineDashType):(d(O),O=[])),Y=!0;else{D=r.axisX.convertValueToPixel(D),Y=r.axisY.convertValueToPixel(v[H].y);var te=w.dataPointIds[H];if(this._eventManager.objectMap[te]={id:te,objectType:"dataPoint",dataSeriesIndex:E,dataPointIndex:H,x1:D,y1:Y},O[O.length]={x:D,y:Y},H<v.length-1&&(V!==(v[H].lineColor||I)||b!==(v[H].lineDashType||w.lineDashType))&&(V=v[H].lineColor||I,O[O.length-1].newStrokeStyle=V,o.setLineDash&&(v[H].lineDashType?(b=v[H].lineDashType,O[O.length-1].newLineDashArray=P(b,w.lineThickness)):(b=w.lineDashType,O[O.length-1].newLineDashArray=u))),v[H].markerSize!==0&&(0<v[H].markerSize||0<w.markerSize)){var ie=w.getMarkerProperties(H,D,Y,o);y.push(ie),te=f(te),X&&y.push({x:D,y:Y,ctx:c,type:ie.type,size:ie.size,color:te,borderColor:te,borderThickness:ie.borderThickness})}(v[H].indexLabel||w.indexLabel||v[H].indexLabelFormatter||w.indexLabelFormatter)&&this._indexLabels.push({chartType:"spline",dataPoint:v[H],dataSeries:w,point:{x:D,y:Y},direction:0>v[H].y===r.axisY.reversed?1:-1,color:I}),Y=!1}}d(O)}return Ve.drawMarkers(y),X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(x.x1,x.y1,x.width,x.height),c.beginPath()),o.restore(),o.beginPath(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},j.prototype.renderColumn=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,w=0,x,y,S,E=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),w=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,v=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/r.plotType.totalDataSeries))<<0,b=r.axisX.dataInfo.minDiff;for(isFinite(b)||(b=.3*Math.abs(r.axisX.range)),b=this.dataPointWidth=this.options.dataPointWidth?this.dataPointWidth:.9*(c.width*(r.axisX.logarithmic?Math.log(b)/Math.log(r.axisX.range):Math.abs(b)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&w>v&&(w=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,v)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&v<w&&(v=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,w)),b<w&&(b=w),b>v&&(b=v),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),v=0;v<r.dataSeriesIndexes.length;v++){var C=r.dataSeriesIndexes[v],u=this.data[C],I=u.dataPoints;if(0<I.length){for(var V=!!(5<b&&u.bevelEnabled),w=0;w<I.length;w++)if(I[w].getTime?S=I[w].x.getTime():S=I[w].x,!(S<r.axisX.dataInfo.viewPortMin||S>r.axisX.dataInfo.viewPortMax)&&typeof I[w].y=="number"){x=r.axisX.convertValueToPixel(S),y=r.axisY.convertValueToPixel(I[w].y),x=r.axisX.reversed?x+r.plotType.totalDataSeries*b/2-(r.previousDataSeriesCount+v)*b<<0:x-r.plotType.totalDataSeries*b/2+(r.previousDataSeriesCount+v)*b<<0;var H=r.axisX.reversed?x-b<<0:x+b<<0,D;0<=I[w].y?D=E:(D=y,y=E),y>D&&(o=y,y=D,D=o),o=I[w].color?I[w].color:u._colorSet[w%u._colorSet.length],Tt(h,r.axisX.reversed?H:x,y,r.axisX.reversed?x:H,D,o,0,null,V&&(r.axisY.reversed?0>I[w].y:0<=I[w].y),(r.axisY.reversed?0<=I[w].y:0>I[w].y)&&V,!1,!1,u.fillOpacity),o=u.dataPointIds[w],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:w,x1:x,y1:y,x2:H,y2:D},o=f(o),X&&Tt(this._eventManager.ghostCtx,r.axisX.reversed?H:x,y,r.axisX.reversed?x:H,D,o,0,null,!1,!1),(I[w].indexLabel||u.indexLabel||I[w].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"column",dataPoint:I[w],dataSeries:u,point:{x:x+(H-x)/2,y:0>I[w].y===r.axisY.reversed?y:D},direction:0>I[w].y===r.axisY.reversed?1:-1,bounds:{x1:x,y1:Math.min(y,D),x2:H,y2:Math.max(y,D)},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.yScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:E<r.axisY.bounds.y1?r.axisY.bounds.y1:E>r.axisY.bounds.y2?r.axisY.bounds.y2:E}}},j.prototype.renderStackedColumn=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,x=[],y=[],S=[],E=[],C=0,w,v,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0,I=r.axisX.dataInfo.minDiff;for(isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.9*(c.width*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),u=0;u<r.dataSeriesIndexes.length;u++){var V=r.dataSeriesIndexes[u],H=this.data[V],D=H.dataPoints;if(0<D.length){var Y=!!(5<I&&H.bevelEnabled);for(h.strokeStyle="#4572A7 ",C=0;C<D.length;C++)if(o=D[C].x.getTime?D[C].x.getTime():D[C].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof D[C].y=="number"){w=r.axisX.convertValueToPixel(o),w=w-r.plotType.plotUnits.length*I/2+r.index*I<<0;var O=w+I<<0,te;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<D[C].y)S[o]=D[C].y+(S[o]?S[o]:0),0<S[o]&&(v=r.axisY.convertValueToPixel(S[o]),te=typeof x[o]<"u"?x[o]:b,x[o]=v);else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=D[C].y)E[o]=D[C].y+(E[o]?E[o]:0),te=r.axisY.convertValueToPixel(E[o]),v=typeof y[o]<"u"?y[o]:b,y[o]=te;else if(v=r.axisY.convertValueToPixel(D[C].y),0<=D[C].y){var ie=typeof x[o]<"u"?x[o]:0;v-=ie,te=b-ie,x[o]=ie+(te-v)}else ie=y[o]?y[o]:0,te=v+ie,v=b+ie,y[o]=ie+(te-v);o=D[C].color?D[C].color:H._colorSet[C%H._colorSet.length],Tt(h,w,r.axisY.reversed?te:v,O,r.axisY.reversed?v:te,o,0,null,Y&&(r.axisY.reversed?0>D[C].y:0<=D[C].y),(r.axisY.reversed?0<=D[C].y:0>D[C].y)&&Y,!1,!1,H.fillOpacity),o=H.dataPointIds[C],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:V,dataPointIndex:C,x1:w,y1:v,x2:O,y2:te},o=f(o),X&&Tt(this._eventManager.ghostCtx,w,v,O,te,o,0,null,!1,!1),(D[C].indexLabel||H.indexLabel||D[C].indexLabelFormatter||H.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:D[C],dataSeries:H,point:{x:w+(O-w)/2,y:0<=D[C].y?v:te},direction:0>D[C].y===r.axisY.reversed?1:-1,bounds:{x1:w,y1:Math.min(v,te),x2:O,y2:Math.max(v,te)},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.yScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.y1?r.axisY.bounds.y1:b>r.axisY.bounds.y2?r.axisY.bounds.y2:b}}},j.prototype.renderStackedColumn100=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,x=[],y=[],S=[],E=[],C=0,w,v,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0,I=r.axisX.dataInfo.minDiff;for(isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.9*(c.width*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),u=0;u<r.dataSeriesIndexes.length;u++){var V=r.dataSeriesIndexes[u],H=this.data[V],D=H.dataPoints;if(0<D.length){for(var Y=!!(5<I&&H.bevelEnabled),C=0;C<D.length;C++)if(o=D[C].x.getTime?D[C].x.getTime():D[C].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof D[C].y=="number"){w=r.axisX.convertValueToPixel(o),v=r.dataPointYSums[o]!==0?100*(D[C].y/r.dataPointYSums[o]):0,w=w-r.plotType.plotUnits.length*I/2+r.index*I<<0;var O=w+I<<0,te;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<D[C].y){if(S[o]=v+(typeof S[o]<"u"?S[o]:0),0>=S[o])continue;v=r.axisY.convertValueToPixel(S[o]),te=x[o]?x[o]:b,x[o]=v}else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=D[C].y)E[o]=v+(typeof E[o]<"u"?E[o]:0),te=r.axisY.convertValueToPixel(E[o]),v=y[o]?y[o]:b,y[o]=te;else if(v=r.axisY.convertValueToPixel(v),0<=D[C].y){var ie=typeof x[o]<"u"?x[o]:0;v-=ie,te=b-ie,r.dataSeriesIndexes.length-1===u&&1>=Math.abs(c.y1-v)&&(v=c.y1),x[o]=ie+(te-v)}else ie=typeof y[o]<"u"?y[o]:0,te=v+ie,v=b+ie,r.dataSeriesIndexes.length-1===u&&1>=Math.abs(c.y2-te)&&(te=c.y2),y[o]=ie+(te-v);o=D[C].color?D[C].color:H._colorSet[C%H._colorSet.length],Tt(h,w,r.axisY.reversed?te:v,O,r.axisY.reversed?v:te,o,0,null,Y&&(r.axisY.reversed?0>D[C].y:0<=D[C].y),(r.axisY.reversed?0<=D[C].y:0>D[C].y)&&Y,!1,!1,H.fillOpacity),o=H.dataPointIds[C],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:V,dataPointIndex:C,x1:w,y1:v,x2:O,y2:te},o=f(o),X&&Tt(this._eventManager.ghostCtx,w,v,O,te,o,0,null,!1,!1),(D[C].indexLabel||H.indexLabel||D[C].indexLabelFormatter||H.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:D[C],dataSeries:H,point:{x:w+(O-w)/2,y:0<=D[C].y?v:te},direction:0>D[C].y===r.axisY.reversed?1:-1,bounds:{x1:w,y1:Math.min(v,te),x2:O,y2:Math.max(v,te)},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.yScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.y1?r.axisY.bounds.y1:b>r.axisY.bounds.y2?r.axisY.bounds.y2:b}}},j.prototype.renderBar=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,w=0,x,y,S,E=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),w=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,v=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/r.plotType.totalDataSeries))<<0,b=r.axisX.dataInfo.minDiff;for(isFinite(b)||(b=.3*Math.abs(r.axisX.range)),b=this.options.dataPointWidth?this.dataPointWidth:.9*(c.height*(r.axisX.logarithmic?Math.log(b)/Math.log(r.axisX.range):Math.abs(b)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&w>v&&(w=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,v)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&v<w&&(v=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,w)),b<w&&(b=w),b>v&&(b=v),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),v=0;v<r.dataSeriesIndexes.length;v++){var C=r.dataSeriesIndexes[v],u=this.data[C],I=u.dataPoints;if(0<I.length){var V=!!(5<b&&u.bevelEnabled);for(h.strokeStyle="#4572A7 ",w=0;w<I.length;w++)if(I[w].getTime?S=I[w].x.getTime():S=I[w].x,!(S<r.axisX.dataInfo.viewPortMin||S>r.axisX.dataInfo.viewPortMax)&&typeof I[w].y=="number"){y=r.axisX.convertValueToPixel(S),x=r.axisY.convertValueToPixel(I[w].y),y=r.axisX.reversed?y+r.plotType.totalDataSeries*b/2-(r.previousDataSeriesCount+v)*b<<0:y-r.plotType.totalDataSeries*b/2+(r.previousDataSeriesCount+v)*b<<0;var H=r.axisX.reversed?y-b<<0:y+b<<0,D;0<=I[w].y?D=E:(D=x,x=E),o=I[w].color?I[w].color:u._colorSet[w%u._colorSet.length],Tt(h,r.axisY.reversed?x:D,r.axisX.reversed?H:y,r.axisY.reversed?D:x,r.axisX.reversed?y:H,o,0,null,V,!1,!1,!1,u.fillOpacity),o=u.dataPointIds[w],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:w,x1:D,y1:y,x2:x,y2:H},o=f(o),X&&Tt(this._eventManager.ghostCtx,D,r.axisX.reversed?H:y,x,r.axisX.reversed?y:H,o,0,null,!1,!1),(I[w].indexLabel||u.indexLabel||I[w].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"bar",dataPoint:I[w],dataSeries:u,point:{x:0<=I[w].y?x:D,y:y+(H-y)/2},direction:0>I[w].y===r.axisY.reversed?1:-1,bounds:{x1:Math.min(D,x),y1:y,x2:Math.max(D,x),y2:H},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.xScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:E<r.axisY.bounds.x1?r.axisY.bounds.x1:E>r.axisY.bounds.x2?r.axisY.bounds.x2:E}}},j.prototype.renderStackedBar=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,x=[],y=[],S=[],E=[],C=0,w,v,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0,I=r.axisX.dataInfo.minDiff;for(isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.9*(c.height*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),u=0;u<r.dataSeriesIndexes.length;u++){var V=r.dataSeriesIndexes[u],H=this.data[V],D=H.dataPoints;if(0<D.length){var Y=!!(5<I&&H.bevelEnabled);for(h.strokeStyle="#4572A7 ",C=0;C<D.length;C++)if(o=D[C].x.getTime?D[C].x.getTime():D[C].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof D[C].y=="number"){v=r.axisX.convertValueToPixel(o),v=v-r.plotType.plotUnits.length*I/2+r.index*I<<0;var O=v+I<<0,te;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<D[C].y)S[o]=D[C].y+(S[o]?S[o]:0),0<S[o]&&(te=x[o]?x[o]:b,x[o]=w=r.axisY.convertValueToPixel(S[o]));else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=D[C].y)E[o]=D[C].y+(E[o]?E[o]:0),w=y[o]?y[o]:b,y[o]=te=r.axisY.convertValueToPixel(E[o]);else if(w=r.axisY.convertValueToPixel(D[C].y),0<=D[C].y){var ie=x[o]?x[o]:0;te=b+ie,w+=ie,x[o]=ie+(w-te)}else ie=y[o]?y[o]:0,te=w-ie,w=b-ie,y[o]=ie+(w-te);o=D[C].color?D[C].color:H._colorSet[C%H._colorSet.length],Tt(h,r.axisY.reversed?w:te,v,r.axisY.reversed?te:w,O,o,0,null,Y,!1,!1,!1,H.fillOpacity),o=H.dataPointIds[C],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:V,dataPointIndex:C,x1:te,y1:v,x2:w,y2:O},o=f(o),X&&Tt(this._eventManager.ghostCtx,te,v,w,O,o,0,null,!1,!1),(D[C].indexLabel||H.indexLabel||D[C].indexLabelFormatter||H.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar",dataPoint:D[C],dataSeries:H,point:{x:0<=D[C].y?w:te,y:v+(O-v)/2},direction:0>D[C].y===r.axisY.reversed?1:-1,bounds:{x1:Math.min(te,w),y1:v,x2:Math.max(te,w),y2:O},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.xScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.x1?r.axisY.bounds.x1:b>r.axisY.bounds.x2?r.axisY.bounds.x2:b}}},j.prototype.renderStackedBar100=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,x=[],y=[],S=[],E=[],C=0,w,v,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0,I=r.axisX.dataInfo.minDiff;for(isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.9*(c.height*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),u=0;u<r.dataSeriesIndexes.length;u++){var V=r.dataSeriesIndexes[u],H=this.data[V],D=H.dataPoints;if(0<D.length){var Y=!!(5<I&&H.bevelEnabled);for(h.strokeStyle="#4572A7 ",C=0;C<D.length;C++)if(o=D[C].x.getTime?D[C].x.getTime():D[C].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof D[C].y=="number"){v=r.axisX.convertValueToPixel(o);var O;O=r.dataPointYSums[o]!==0?100*(D[C].y/r.dataPointYSums[o]):0,v=v-r.plotType.plotUnits.length*I/2+r.index*I<<0;var te=v+I<<0;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<D[C].y){if(S[o]=O+(S[o]?S[o]:0),0>=S[o])continue;O=x[o]?x[o]:b,x[o]=w=r.axisY.convertValueToPixel(S[o])}else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=D[C].y)E[o]=O+(E[o]?E[o]:0),w=y[o]?y[o]:b,y[o]=O=r.axisY.convertValueToPixel(E[o]);else if(w=r.axisY.convertValueToPixel(O),0<=D[C].y){var ie=x[o]?x[o]:0;O=b+ie,w+=ie,r.dataSeriesIndexes.length-1===u&&1>=Math.abs(c.x2-w)&&(w=c.x2),x[o]=ie+(w-O)}else ie=y[o]?y[o]:0,O=w-ie,w=b-ie,r.dataSeriesIndexes.length-1===u&&1>=Math.abs(c.x1-O)&&(O=c.x1),y[o]=ie+(w-O);o=D[C].color?D[C].color:H._colorSet[C%H._colorSet.length],Tt(h,r.axisY.reversed?w:O,v,r.axisY.reversed?O:w,te,o,0,null,Y,!1,!1,!1,H.fillOpacity),o=H.dataPointIds[C],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:V,dataPointIndex:C,x1:O,y1:v,x2:w,y2:te},o=f(o),X&&Tt(this._eventManager.ghostCtx,O,v,w,te,o,0,null,!1,!1),(D[C].indexLabel||H.indexLabel||D[C].indexLabelFormatter||H.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar100",dataPoint:D[C],dataSeries:H,point:{x:0<=D[C].y?w:O,y:v+(te-v)/2},direction:0>D[C].y===r.axisY.reversed?1:-1,bounds:{x1:Math.min(O,w),y1:v,x2:Math.max(O,w),y2:te},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.xScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.x1?r.axisY.bounds.x1:b>r.axisY.bounds.x2?r.axisY.bounds.x2:b}}},j.prototype.renderArea=function(r){var d,h;function o(){ie&&(0<u.lineThickness&&x.stroke(),r.axisY.logarithmic||0>=r.axisY.viewportMinimum&&0<=r.axisY.viewportMaximum?te=O:0>r.axisY.viewportMaximum?te=S.y1:0<r.axisY.viewportMinimum&&(te=O),x.lineTo(H,te),x.lineTo(ie.x,te),x.closePath(),x.globalAlpha=u.fillOpacity,x.fill(),x.globalAlpha=1,X&&(y.lineTo(H,te),y.lineTo(ie.x,te),y.closePath(),y.fill()),x.beginPath(),x.moveTo(H,D),y.beginPath(),y.moveTo(H,D),ie={x:H,y:D})}var c=r.targetCanvasCtx||this.plotArea.ctx,x=X?this._preRenderCtx:c;if(!(0>=r.dataSeriesIndexes.length)){var y=this._eventManager.ghostCtx,S=r.axisY.lineCoordinates,E=[],w=this.plotArea,v;x.save(),X&&y.save(),x.beginPath(),x.rect(w.x1,w.y1,w.width,w.height),x.clip(),X&&(y.beginPath(),y.rect(w.x1,w.y1,w.width,w.height),y.clip());for(var b=0;b<r.dataSeriesIndexes.length;b++){var C=r.dataSeriesIndexes[b],u=this.data[C],I=u.dataPoints,E=u.id;this._eventManager.objectMap[E]={objectType:"dataSeries",dataSeriesIndex:C},E=f(E),y.fillStyle=E,E=[],d=!0;var V=0,H,D,Y,O=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),te,ie=null;if(0<I.length){var J=u._colorSet[V%u._colorSet.length],be=u.lineColor=u.options.lineColor||J,Me=be;if(x.fillStyle=J,x.strokeStyle=be,x.lineWidth=u.lineThickness,h="solid",x.setLineDash){var he=P(u.nullDataLineDashType,u.lineThickness);h=u.lineDashType;var de=P(h,u.lineThickness);x.setLineDash(de)}for(var ce=!0;V<I.length;V++)if(Y=I[V].x.getTime?I[V].x.getTime():I[V].x,!(Y<r.axisX.dataInfo.viewPortMin||Y>r.axisX.dataInfo.viewPortMax&&(!u.connectNullData||!ce)))if(typeof I[V].y!="number")u.connectNullData||ce||d||o(),ce=!0;else{H=r.axisX.convertValueToPixel(Y),D=r.axisY.convertValueToPixel(I[V].y),d||ce?(!d&&u.connectNullData?(x.setLineDash&&(u.options.nullDataLineDashType||h===u.lineDashType&&u.lineDashType!==u.nullDataLineDashType)&&(d=H,h=D,H=v.x,D=v.y,o(),x.moveTo(v.x,v.y),H=d,D=h,ie=v,h=u.nullDataLineDashType,x.setLineDash(he)),x.lineTo(H,D),X&&y.lineTo(H,D)):(x.beginPath(),x.moveTo(H,D),X&&(y.beginPath(),y.moveTo(H,D)),ie={x:H,y:D}),ce=d=!1):(x.lineTo(H,D),X&&y.lineTo(H,D),V%250==0&&o()),v={x:H,y:D},V<I.length-1&&(Me!==(I[V].lineColor||be)||h!==(I[V].lineDashType||u.lineDashType))&&(o(),Me=I[V].lineColor||be,x.strokeStyle=Me,x.setLineDash&&(I[V].lineDashType?(h=I[V].lineDashType,x.setLineDash(P(h,u.lineThickness))):(h=u.lineDashType,x.setLineDash(de))));var le=u.dataPointIds[V];this._eventManager.objectMap[le]={id:le,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:V,x1:H,y1:D},I[V].markerSize!==0&&(0<I[V].markerSize||0<u.markerSize)&&(Y=u.getMarkerProperties(V,H,D,x),E.push(Y),le=f(le),X&&E.push({x:H,y:D,ctx:y,type:Y.type,size:Y.size,color:le,borderColor:le,borderThickness:Y.borderThickness})),(I[V].indexLabel||u.indexLabel||I[V].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"area",dataPoint:I[V],dataSeries:u,point:{x:H,y:D},direction:0>I[V].y===r.axisY.reversed?1:-1,color:J})}o(),Ve.drawMarkers(E)}}return X&&(c.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&x.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&x.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.clearRect(w.x1,w.y1,w.width,w.height),this._eventManager.ghostCtx.restore()),x.restore(),{source:c,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},j.prototype.renderSplineArea=function(r){function d(){var ce=Z(Y,2);if(0<ce.length){if(0<v.lineThickness){o.beginPath(),o.moveTo(ce[0].x,ce[0].y),ce[0].newStrokeStyle&&(o.strokeStyle=ce[0].newStrokeStyle),ce[0].newLineDashArray&&o.setLineDash(ce[0].newLineDashArray);for(var le=0;le<ce.length-3;le+=3)o.bezierCurveTo(ce[le+1].x,ce[le+1].y,ce[le+2].x,ce[le+2].y,ce[le+3].x,ce[le+3].y),X&&c.bezierCurveTo(ce[le+1].x,ce[le+1].y,ce[le+2].x,ce[le+2].y,ce[le+3].x,ce[le+3].y),(ce[le+3].newStrokeStyle||ce[le+3].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(ce[le+3].x,ce[le+3].y),ce[le+3].newStrokeStyle&&(o.strokeStyle=ce[le+3].newStrokeStyle),ce[le+3].newLineDashArray&&o.setLineDash(ce[le+3].newLineDashArray));o.stroke()}for(o.beginPath(),o.moveTo(ce[0].x,ce[0].y),X&&(c.beginPath(),c.moveTo(ce[0].x,ce[0].y)),le=0;le<ce.length-3;le+=3)o.bezierCurveTo(ce[le+1].x,ce[le+1].y,ce[le+2].x,ce[le+2].y,ce[le+3].x,ce[le+3].y),X&&c.bezierCurveTo(ce[le+1].x,ce[le+1].y,ce[le+2].x,ce[le+2].y,ce[le+3].x,ce[le+3].y);r.axisY.logarithmic||0>=r.axisY.viewportMinimum&&0<=r.axisY.viewportMaximum?H=V:0>r.axisY.viewportMaximum?H=x.y1:0<r.axisY.viewportMinimum&&(H=V),D={x:ce[0].x,y:ce[0].y},o.lineTo(ce[ce.length-1].x,H),o.lineTo(D.x,H),o.closePath(),o.globalAlpha=v.fillOpacity,o.fill(),o.globalAlpha=1,X&&(c.lineTo(ce[ce.length-1].x,H),c.lineTo(D.x,H),c.closePath(),c.fill())}}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx,x=r.axisY.lineCoordinates,y=[],S=this.plotArea;o.save(),X&&c.save(),o.beginPath(),o.rect(S.x1,S.y1,S.width,S.height),o.clip(),X&&(c.beginPath(),c.rect(S.x1,S.y1,S.width,S.height),c.clip());for(var E=0;E<r.dataSeriesIndexes.length;E++){var w=r.dataSeriesIndexes[E],v=this.data[w],b=v.dataPoints,y=v.id;this._eventManager.objectMap[y]={objectType:"dataSeries",dataSeriesIndex:w},y=f(y),c.fillStyle=y;var y=[],C=0,u,I,V=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),H,D=null,Y=[];if(0<b.length){var O=v._colorSet[C%v._colorSet.length],te=v.lineColor=v.options.lineColor||O,ie=te;o.fillStyle=O,o.strokeStyle=te,o.lineWidth=v.lineThickness;var J="solid";if(o.setLineDash){var be=P(v.nullDataLineDashType,v.lineThickness),J=v.lineDashType,Me=P(J,v.lineThickness);o.setLineDash(Me)}for(I=!1;C<b.length;C++)if(u=b[C].x.getTime?b[C].x.getTime():b[C].x,!(u<r.axisX.dataInfo.viewPortMin||u>r.axisX.dataInfo.viewPortMax&&(!v.connectNullData||!I)))if(typeof b[C].y!="number")0<C&&!I&&(v.connectNullData?o.setLineDash&&0<Y.length&&(v.options.nullDataLineDashType||!b[C-1].lineDashType)&&(Y[Y.length-1].newLineDashArray=be,J=v.nullDataLineDashType):(d(),Y=[])),I=!0;else{u=r.axisX.convertValueToPixel(u),I=r.axisY.convertValueToPixel(b[C].y);var he=v.dataPointIds[C];if(this._eventManager.objectMap[he]={id:he,objectType:"dataPoint",dataSeriesIndex:w,dataPointIndex:C,x1:u,y1:I},Y[Y.length]={x:u,y:I},C<b.length-1&&(ie!==(b[C].lineColor||te)||J!==(b[C].lineDashType||v.lineDashType))&&(ie=b[C].lineColor||te,Y[Y.length-1].newStrokeStyle=ie,o.setLineDash&&(b[C].lineDashType?(J=b[C].lineDashType,Y[Y.length-1].newLineDashArray=P(J,v.lineThickness)):(J=v.lineDashType,Y[Y.length-1].newLineDashArray=Me))),b[C].markerSize!==0&&(0<b[C].markerSize||0<v.markerSize)){var de=v.getMarkerProperties(C,u,I,o);y.push(de),he=f(he),X&&y.push({x:u,y:I,ctx:c,type:de.type,size:de.size,color:he,borderColor:he,borderThickness:de.borderThickness})}(b[C].indexLabel||v.indexLabel||b[C].indexLabelFormatter||v.indexLabelFormatter)&&this._indexLabels.push({chartType:"splineArea",dataPoint:b[C],dataSeries:v,point:{x:u,y:I},direction:0>b[C].y===r.axisY.reversed?1:-1,color:O}),I=!1}d(),Ve.drawMarkers(y)}}return X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(S.x1,S.y1,S.width,S.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},j.prototype.renderStepArea=function(r){var d,h;function o(){ie&&(0<u.lineThickness&&x.stroke(),r.axisY.logarithmic||0>=r.axisY.viewportMinimum&&0<=r.axisY.viewportMaximum?te=O:0>r.axisY.viewportMaximum?te=S.y1:0<r.axisY.viewportMinimum&&(te=O),x.lineTo(H,te),x.lineTo(ie.x,te),x.closePath(),x.globalAlpha=u.fillOpacity,x.fill(),x.globalAlpha=1,X&&(y.lineTo(H,te),y.lineTo(ie.x,te),y.closePath(),y.fill()),x.beginPath(),x.moveTo(H,D),y.beginPath(),y.moveTo(H,D),ie={x:H,y:D})}var c=r.targetCanvasCtx||this.plotArea.ctx,x=X?this._preRenderCtx:c;if(!(0>=r.dataSeriesIndexes.length)){var y=this._eventManager.ghostCtx,S=r.axisY.lineCoordinates,E=[],w=this.plotArea,v;x.save(),X&&y.save(),x.beginPath(),x.rect(w.x1,w.y1,w.width,w.height),x.clip(),X&&(y.beginPath(),y.rect(w.x1,w.y1,w.width,w.height),y.clip());for(var b=0;b<r.dataSeriesIndexes.length;b++){var C=r.dataSeriesIndexes[b],u=this.data[C],I=u.dataPoints,E=u.id;this._eventManager.objectMap[E]={objectType:"dataSeries",dataSeriesIndex:C},E=f(E),y.fillStyle=E,E=[],d=!0;var V=0,H,D,Y,O=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),te,ie=null;if(h=!1,0<I.length){var J=u._colorSet[V%u._colorSet.length],be=u.lineColor=u.options.lineColor||J,Me=be;x.fillStyle=J,x.strokeStyle=be,x.lineWidth=u.lineThickness;var he="solid";if(x.setLineDash){var de=P(u.nullDataLineDashType,u.lineThickness),he=u.lineDashType,ce=P(he,u.lineThickness);x.setLineDash(ce)}for(;V<I.length;V++)if(Y=I[V].x.getTime?I[V].x.getTime():I[V].x,!(Y<r.axisX.dataInfo.viewPortMin||Y>r.axisX.dataInfo.viewPortMax&&(!u.connectNullData||!h))){var le=D;typeof I[V].y!="number"?(u.connectNullData||h||d||o(),h=!0):(H=r.axisX.convertValueToPixel(Y),D=r.axisY.convertValueToPixel(I[V].y),d||h?(!d&&u.connectNullData?(x.setLineDash&&(u.options.nullDataLineDashType||he===u.lineDashType&&u.lineDashType!==u.nullDataLineDashType)&&(d=H,h=D,H=v.x,D=v.y,o(),x.moveTo(v.x,v.y),H=d,D=h,ie=v,he=u.nullDataLineDashType,x.setLineDash(de)),x.lineTo(H,le),x.lineTo(H,D),X&&(y.lineTo(H,le),y.lineTo(H,D))):(x.beginPath(),x.moveTo(H,D),X&&(y.beginPath(),y.moveTo(H,D)),ie={x:H,y:D}),h=d=!1):(x.lineTo(H,le),X&&y.lineTo(H,le),x.lineTo(H,D),X&&y.lineTo(H,D),V%250==0&&o()),v={x:H,y:D},V<I.length-1&&(Me!==(I[V].lineColor||be)||he!==(I[V].lineDashType||u.lineDashType))&&(o(),Me=I[V].lineColor||be,x.strokeStyle=Me,x.setLineDash&&(I[V].lineDashType?(he=I[V].lineDashType,x.setLineDash(P(he,u.lineThickness))):(he=u.lineDashType,x.setLineDash(ce)))),Y=u.dataPointIds[V],this._eventManager.objectMap[Y]={id:Y,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:V,x1:H,y1:D},I[V].markerSize!==0&&(0<I[V].markerSize||0<u.markerSize)&&(le=u.getMarkerProperties(V,H,D,x),E.push(le),Y=f(Y),X&&E.push({x:H,y:D,ctx:y,type:le.type,size:le.size,color:Y,borderColor:Y,borderThickness:le.borderThickness})),(I[V].indexLabel||u.indexLabel||I[V].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepArea",dataPoint:I[V],dataSeries:u,point:{x:H,y:D},direction:0>I[V].y===r.axisY.reversed?1:-1,color:J}))}o(),Ve.drawMarkers(E)}}return X&&(c.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&x.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&x.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.clearRect(w.x1,w.y1,w.width,w.height),this._eventManager.ghostCtx.restore()),x.restore(),{source:c,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},j.prototype.renderStackedArea=function(r){function d(){if(!(1>w.length)){for(0<J.lineThickness&&o.stroke();0<w.length;){var ne=w.pop();o.lineTo(ne.x,ne.y),X&&H.lineTo(ne.x,ne.y)}o.closePath(),o.globalAlpha=J.fillOpacity,o.fill(),o.globalAlpha=1,o.beginPath(),X&&(H.closePath(),H.fill(),H.beginPath()),w=[]}}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=null,x=null,y=[],S=this.plotArea,E=[],w=[],v=[],b=[],C=0,u,I,V=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),H=this._eventManager.ghostCtx,D,Y,O;X&&H.beginPath(),o.save(),X&&H.save(),o.beginPath(),o.rect(S.x1,S.y1,S.width,S.height),o.clip(),X&&(H.beginPath(),H.rect(S.x1,S.y1,S.width,S.height),H.clip());for(var c=[],te=0;te<r.dataSeriesIndexes.length;te++){var ie=r.dataSeriesIndexes[te],J=this.data[ie],be=J.dataPoints;for(J.dataPointIndexes=[],C=0;C<be.length;C++)ie=be[C].x.getTime?be[C].x.getTime():be[C].x,J.dataPointIndexes[ie]=C,c[ie]||(v.push(ie),c[ie]=!0);v.sort(p)}for(te=0;te<r.dataSeriesIndexes.length;te++){if(ie=r.dataSeriesIndexes[te],J=this.data[ie],be=J.dataPoints,Y=!0,w=[],C=J.id,this._eventManager.objectMap[C]={objectType:"dataSeries",dataSeriesIndex:ie},C=f(C),H.fillStyle=C,0<v.length){var c=J._colorSet[0],Me=J.lineColor=J.options.lineColor||c,he=Me;if(o.fillStyle=c,o.strokeStyle=Me,o.lineWidth=J.lineThickness,O="solid",o.setLineDash){var de=P(J.nullDataLineDashType,J.lineThickness);O=J.lineDashType;var ce=P(O,J.lineThickness);o.setLineDash(ce)}for(var le=!0,C=0;C<v.length;C++){var x=v[C],ee=null,ee=0<=J.dataPointIndexes[x]?be[J.dataPointIndexes[x]]:{x,y:null};if(!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax&&(!J.connectNullData||!le)))if(typeof ee.y!="number")J.connectNullData||le||Y||d(),le=!0;else{u=r.axisX.convertValueToPixel(x);var we=E[x]?E[x]:0;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length){if(b[x]=ee.y+(b[x]?b[x]:0),0>=b[x]&&r.axisY.logarithmic)continue;I=r.axisY.convertValueToPixel(b[x])}else I=r.axisY.convertValueToPixel(ee.y),I-=we;if(w.push({x:u,y:V-we}),E[x]=V-I,Y||le?(!Y&&J.connectNullData?(o.setLineDash&&(J.options.nullDataLineDashType||O===J.lineDashType&&J.lineDashType!==J.nullDataLineDashType)&&(Y=w.pop(),O=w[w.length-1],d(),o.moveTo(D.x,D.y),w.push(O),w.push(Y),O=J.nullDataLineDashType,o.setLineDash(de)),o.lineTo(u,I),X&&H.lineTo(u,I)):(o.beginPath(),o.moveTo(u,I),X&&(H.beginPath(),H.moveTo(u,I))),le=Y=!1):(o.lineTo(u,I),X&&H.lineTo(u,I),C%250==0&&(d(),o.moveTo(u,I),X&&H.moveTo(u,I),w.push({x:u,y:V-we}))),D={x:u,y:I},C<be.length-1&&(he!==(be[C].lineColor||Me)||O!==(be[C].lineDashType||J.lineDashType))&&(d(),o.beginPath(),o.moveTo(u,I),w.push({x:u,y:V-we}),he=be[C].lineColor||Me,o.strokeStyle=he,o.setLineDash&&(be[C].lineDashType?(O=be[C].lineDashType,o.setLineDash(P(O,J.lineThickness))):(O=J.lineDashType,o.setLineDash(ce)))),0<=J.dataPointIndexes[x]){var Ae=J.dataPointIds[J.dataPointIndexes[x]];this._eventManager.objectMap[Ae]={id:Ae,objectType:"dataPoint",dataSeriesIndex:ie,dataPointIndex:J.dataPointIndexes[x],x1:u,y1:I}}0<=J.dataPointIndexes[x]&&ee.markerSize!==0&&(0<ee.markerSize||0<J.markerSize)&&(we=J.getMarkerProperties(J.dataPointIndexes[x],u,I,o),y.push(we),x=f(Ae),X&&y.push({x:u,y:I,ctx:H,type:we.type,size:we.size,color:x,borderColor:x,borderThickness:we.borderThickness})),(ee.indexLabel||J.indexLabel||ee.indexLabelFormatter||J.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:ee,dataSeries:J,point:{x:u,y:I},direction:0>ee.y===r.axisY.reversed?1:-1,color:c})}}d(),o.moveTo(u,I),X&&H.moveTo(u,I)}delete J.dataPointIndexes}return Ve.drawMarkers(y),X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(S.x1,S.y1,S.width,S.height),H.restore()),o.restore(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},j.prototype.renderStackedArea100=function(r){function d(){for(0<J.lineThickness&&o.stroke();0<w.length;){var ft=w.pop();o.lineTo(ft.x,ft.y),X&&O.lineTo(ft.x,ft.y)}o.closePath(),o.globalAlpha=J.fillOpacity,o.fill(),o.globalAlpha=1,o.beginPath(),X&&(O.closePath(),O.fill(),O.beginPath()),w=[]}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=null,x=null,y=this.plotArea,S=[],E=[],w=[],v=[],b=[],C=0,u,I,V,H,D,Y=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),O=this._eventManager.ghostCtx;o.save(),X&&O.save(),o.beginPath(),o.rect(y.x1,y.y1,y.width,y.height),o.clip(),X&&(O.beginPath(),O.rect(y.x1,y.y1,y.width,y.height),O.clip());for(var c=[],te=0;te<r.dataSeriesIndexes.length;te++){var ie=r.dataSeriesIndexes[te],J=this.data[ie],be=J.dataPoints;for(J.dataPointIndexes=[],C=0;C<be.length;C++)ie=be[C].x.getTime?be[C].x.getTime():be[C].x,J.dataPointIndexes[ie]=C,c[ie]||(v.push(ie),c[ie]=!0);v.sort(p)}for(te=0;te<r.dataSeriesIndexes.length;te++){if(ie=r.dataSeriesIndexes[te],J=this.data[ie],be=J.dataPoints,H=!0,c=J.id,this._eventManager.objectMap[c]={objectType:"dataSeries",dataSeriesIndex:ie},c=f(c),O.fillStyle=c,w=[],0<v.length){var c=J._colorSet[C%J._colorSet.length],Me=J.lineColor=J.options.lineColor||c,he=Me;if(o.fillStyle=c,o.strokeStyle=Me,o.lineWidth=J.lineThickness,D="solid",o.setLineDash){var de=P(J.nullDataLineDashType,J.lineThickness);D=J.lineDashType;var ce=P(D,J.lineThickness);o.setLineDash(ce)}for(var le=!0,C=0;C<v.length;C++){var x=v[C],ee=null,ee=0<=J.dataPointIndexes[x]?be[J.dataPointIndexes[x]]:{x,y:null};if(!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax&&(!J.connectNullData||!le)))if(typeof ee.y!="number")J.connectNullData||le||H||d(),le=!0;else{var we;we=r.dataPointYSums[x]!==0?100*(ee.y/r.dataPointYSums[x]):0,u=r.axisX.convertValueToPixel(x);var Ae=E[x]?E[x]:0;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length){if(b[x]=we+(b[x]?b[x]:0),0>=b[x]&&r.axisY.logarithmic)continue;I=r.axisY.convertValueToPixel(b[x])}else I=r.axisY.convertValueToPixel(we),I-=Ae;if(w.push({x:u,y:Y-Ae}),E[x]=Y-I,H||le?(!H&&J.connectNullData?(o.setLineDash&&(J.options.nullDataLineDashType||D===J.lineDashType&&J.lineDashType!==J.nullDataLineDashType)&&(H=w.pop(),D=w[w.length-1],d(),o.moveTo(V.x,V.y),w.push(D),w.push(H),D=J.nullDataLineDashType,o.setLineDash(de)),o.lineTo(u,I),X&&O.lineTo(u,I)):(o.beginPath(),o.moveTo(u,I),X&&(O.beginPath(),O.moveTo(u,I))),le=H=!1):(o.lineTo(u,I),X&&O.lineTo(u,I),C%250==0&&(d(),o.moveTo(u,I),X&&O.moveTo(u,I),w.push({x:u,y:Y-Ae}))),V={x:u,y:I},C<be.length-1&&(he!==(be[C].lineColor||Me)||D!==(be[C].lineDashType||J.lineDashType))&&(d(),o.beginPath(),o.moveTo(u,I),w.push({x:u,y:Y-Ae}),he=be[C].lineColor||Me,o.strokeStyle=he,o.setLineDash&&(be[C].lineDashType?(D=be[C].lineDashType,o.setLineDash(P(D,J.lineThickness))):(D=J.lineDashType,o.setLineDash(ce)))),0<=J.dataPointIndexes[x]){var ne=J.dataPointIds[J.dataPointIndexes[x]];this._eventManager.objectMap[ne]={id:ne,objectType:"dataPoint",dataSeriesIndex:ie,dataPointIndex:J.dataPointIndexes[x],x1:u,y1:I}}0<=J.dataPointIndexes[x]&&ee.markerSize!==0&&(0<ee.markerSize||0<J.markerSize)&&(Ae=J.getMarkerProperties(J.dataPointIndexes[x],u,I,o),S.push(Ae),x=f(ne),X&&S.push({x:u,y:I,ctx:O,type:Ae.type,size:Ae.size,color:x,borderColor:x,borderThickness:Ae.borderThickness})),(ee.indexLabel||J.indexLabel||ee.indexLabelFormatter||J.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:ee,dataSeries:J,point:{x:u,y:I},direction:0>ee.y===r.axisY.reversed?1:-1,color:c})}}d(),o.moveTo(u,I),X&&O.moveTo(u,I)}delete J.dataPointIndexes}return Ve.drawMarkers(S),X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(y.x1,y.y1,y.width,y.height),O.restore()),o.restore(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},j.prototype.renderBubble=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=this.plotArea,c=0,x,y;h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(o.x1,o.y1,o.width,o.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip());for(var S=-1/0,E=1/0,w=0;w<r.dataSeriesIndexes.length;w++)for(var v=r.dataSeriesIndexes[w],b=this.data[v],C=b.dataPoints,u=0,c=0;c<C.length;c++)x=C[c].getTime?x=C[c].x.getTime():x=C[c].x,x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax||typeof C[c].z>"u"||(u=C[c].z,u>S&&(S=u),u<E&&(E=u));for(var I=25*Math.PI,V=Math.max(Math.pow(.25*Math.min(o.height,o.width)/2,2)*Math.PI,I),w=0;w<r.dataSeriesIndexes.length;w++)if(v=r.dataSeriesIndexes[w],b=this.data[v],C=b.dataPoints,0<C.length){for(h.strokeStyle="#4572A7 ",c=0;c<C.length;c++)if(x=C[c].getTime?x=C[c].x.getTime():x=C[c].x,!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax)&&typeof C[c].y=="number"){x=r.axisX.convertValueToPixel(x),y=r.axisY.convertValueToPixel(C[c].y);var u=C[c].z,H=2*Math.max(Math.sqrt((S===E?V/2:I+(V-I)/(S-E)*(u-E))/Math.PI)<<0,1),u=b.getMarkerProperties(c,h);u.size=H,h.globalAlpha=b.fillOpacity,Ve.drawMarker(x,y,h,u.type,u.size,u.color,u.borderColor,u.borderThickness),h.globalAlpha=1;var D=b.dataPointIds[c];this._eventManager.objectMap[D]={id:D,objectType:"dataPoint",dataSeriesIndex:v,dataPointIndex:c,x1:x,y1:y,size:H},H=f(D),X&&Ve.drawMarker(x,y,this._eventManager.ghostCtx,u.type,u.size,H,H,u.borderThickness),(C[c].indexLabel||b.indexLabel||C[c].indexLabelFormatter||b.indexLabelFormatter)&&this._indexLabels.push({chartType:"bubble",dataPoint:C[c],dataSeries:b,point:{x,y},direction:1,bounds:{x1:x-u.size/2,y1:y-u.size/2,x2:x+u.size/2,y2:y+u.size/2},color:null})}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},j.prototype.renderScatter=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=this.plotArea,c=0,x,y;h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(o.x1,o.y1,o.width,o.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip());for(var S=0;S<r.dataSeriesIndexes.length;S++){var E=r.dataSeriesIndexes[S],w=this.data[E],v=w.dataPoints;if(0<v.length){h.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(o.height,o.width)/2,2);for(var b=0,C=0,c=0;c<v.length;c++)if(x=v[c].getTime?x=v[c].x.getTime():x=v[c].x,!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax)&&typeof v[c].y=="number"){x=r.axisX.convertValueToPixel(x),y=r.axisY.convertValueToPixel(v[c].y);var u=w.getMarkerProperties(c,x,y,h);h.globalAlpha=w.fillOpacity,Ve.drawMarker(u.x,u.y,u.ctx,u.type,u.size,u.color,u.borderColor,u.borderThickness),h.globalAlpha=1,Math.sqrt((b-x)*(b-x)+(C-y)*(C-y))<Math.min(u.size,5)&&v.length>Math.min(this.plotArea.width,this.plotArea.height)||(b=w.dataPointIds[c],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:E,dataPointIndex:c,x1:x,y1:y},b=f(b),X&&Ve.drawMarker(u.x,u.y,this._eventManager.ghostCtx,u.type,u.size,b,b,u.borderThickness),(v[c].indexLabel||w.indexLabel||v[c].indexLabelFormatter||w.indexLabelFormatter)&&this._indexLabels.push({chartType:"scatter",dataPoint:v[c],dataSeries:w,point:{x,y},direction:1,bounds:{x1:x-u.size/2,y1:y-u.size/2,x2:x+u.size/2,y2:y+u.size/2},color:null}),b=x,C=y)}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},j.prototype.renderCandlestick=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d,o=this._eventManager.ghostCtx;if(!(0>=r.dataSeriesIndexes.length)){var C=null,u=null,c=this.plotArea,x=0,y,S,E,w,v,b,C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,I=r.axisX.dataInfo.minDiff;isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.7*c.width*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&o.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(o.beginPath(),o.rect(c.x1,c.y1,c.width,c.height),o.clip());for(var V=0;V<r.dataSeriesIndexes.length;V++){var H=r.dataSeriesIndexes[V],D=this.data[H],Y=D.dataPoints;if(0<Y.length){for(var O=!!(5<I&&D.bevelEnabled),x=0;x<Y.length;x++)if(Y[x].getTime?b=Y[x].x.getTime():b=Y[x].x,!(b<r.axisX.dataInfo.viewPortMin||b>r.axisX.dataInfo.viewPortMax)&&!m(Y[x].y)&&Y[x].y.length&&typeof Y[x].y[0]=="number"&&typeof Y[x].y[1]=="number"&&typeof Y[x].y[2]=="number"&&typeof Y[x].y[3]=="number"){y=r.axisX.convertValueToPixel(b),S=r.axisY.convertValueToPixel(Y[x].y[0]),E=r.axisY.convertValueToPixel(Y[x].y[1]),w=r.axisY.convertValueToPixel(Y[x].y[2]),v=r.axisY.convertValueToPixel(Y[x].y[3]);var te=y-I/2<<0,ie=te+I<<0,u=D.options.fallingColor?D.fallingColor:D._colorSet[0],C=Y[x].color?Y[x].color:D._colorSet[0],J=Math.round(Math.max(1,.15*I)),be=J%2===0?0:.5,Me=D.dataPointIds[x];this._eventManager.objectMap[Me]={id:Me,objectType:"dataPoint",dataSeriesIndex:H,dataPointIndex:x,x1:te,y1:S,x2:ie,y2:E,x3:y,y3:w,x4:y,y4:v,borderThickness:J,color:C},h.strokeStyle=C,h.beginPath(),h.lineWidth=J,o.lineWidth=Math.max(J,4),D.type==="candlestick"?(h.moveTo(y-be,E),h.lineTo(y-be,Math.min(S,v)),h.stroke(),h.moveTo(y-be,Math.max(S,v)),h.lineTo(y-be,w),h.stroke(),Tt(h,te,Math.min(S,v),ie,Math.max(S,v),Y[x].y[0]<=Y[x].y[3]?D.risingColor:u,J,C,O,O,!1,!1,D.fillOpacity),X&&(C=f(Me),o.strokeStyle=C,o.moveTo(y-be,E),o.lineTo(y-be,Math.min(S,v)),o.stroke(),o.moveTo(y-be,Math.max(S,v)),o.lineTo(y-be,w),o.stroke(),Tt(o,te,Math.min(S,v),ie,Math.max(S,v),C,0,null,!1,!1))):D.type==="ohlc"&&(h.moveTo(y-be,E),h.lineTo(y-be,w),h.stroke(),h.beginPath(),h.moveTo(y,S),h.lineTo(te,S),h.stroke(),h.beginPath(),h.moveTo(y,v),h.lineTo(ie,v),h.stroke(),X&&(C=f(Me),o.strokeStyle=C,o.moveTo(y-be,E),o.lineTo(y-be,w),o.stroke(),o.beginPath(),o.moveTo(y,S),o.lineTo(te,S),o.stroke(),o.beginPath(),o.moveTo(y,v),o.lineTo(ie,v),o.stroke())),(Y[x].indexLabel||D.indexLabel||Y[x].indexLabelFormatter||D.indexLabelFormatter)&&this._indexLabels.push({chartType:D.type,dataPoint:Y[x],dataSeries:D,point:{x:te+(ie-te)/2,y:r.axisY.reversed?w:E},direction:1,bounds:{x1:te,y1:Math.min(E,w),x2:ie,y2:Math.max(E,w)},color:C})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),o.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},j.prototype.renderBoxAndWhisker=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d,o=this._eventManager.ghostCtx;if(!(0>=r.dataSeriesIndexes.length)){var C=null,c=this.plotArea,u=0,x,y,S,E,w,v,b,C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,I=r.axisX.dataInfo.minDiff;isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.7*c.width*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&o.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(o.beginPath(),o.rect(c.x1,c.y1,c.width,c.height),o.clip());for(var V=!1,V=!!r.axisY.reversed,H=0;H<r.dataSeriesIndexes.length;H++){var D=r.dataSeriesIndexes[H],Y=this.data[D],O=Y.dataPoints;if(0<O.length){for(var te=!!(5<I&&Y.bevelEnabled),u=0;u<O.length;u++)if(O[u].getTime?b=O[u].x.getTime():b=O[u].x,!(b<r.axisX.dataInfo.viewPortMin||b>r.axisX.dataInfo.viewPortMax)&&!m(O[u].y)&&O[u].y.length&&typeof O[u].y[0]=="number"&&typeof O[u].y[1]=="number"&&typeof O[u].y[2]=="number"&&typeof O[u].y[3]=="number"&&typeof O[u].y[4]=="number"&&O[u].y.length===5){x=r.axisX.convertValueToPixel(b),y=r.axisY.convertValueToPixel(O[u].y[0]),S=r.axisY.convertValueToPixel(O[u].y[1]),E=r.axisY.convertValueToPixel(O[u].y[2]),w=r.axisY.convertValueToPixel(O[u].y[3]),v=r.axisY.convertValueToPixel(O[u].y[4]);var ie=x-I/2<<0,J=x+I/2<<0,C=O[u].color?O[u].color:Y._colorSet[0],be=Math.round(Math.max(1,.15*I)),Me=be%2===0?0:.5,he=O[u].whiskerColor?O[u].whiskerColor:O[u].color?Y.whiskerColor?Y.whiskerColor:O[u].color:Y.whiskerColor?Y.whiskerColor:C,de=typeof O[u].whiskerThickness=="number"?O[u].whiskerThickness:typeof Y.options.whiskerThickness=="number"?Y.whiskerThickness:be,ce=O[u].whiskerDashType?O[u].whiskerDashType:Y.whiskerDashType,le=m(O[u].whiskerLength)?m(Y.options.whiskerLength)?I:Y.whiskerLength:O[u].whiskerLength,le=typeof le=="number"?0>=le?0:le>=I?I:le:typeof le=="string"?parseInt(le)*I/100>I?I:parseInt(le)*I/100:I,ee=Math.round(de)%2===1?.5:0,we=O[u].stemColor?O[u].stemColor:O[u].color?Y.stemColor?Y.stemColor:O[u].color:Y.stemColor?Y.stemColor:C,Ae=typeof O[u].stemThickness=="number"?O[u].stemThickness:typeof Y.options.stemThickness=="number"?Y.stemThickness:be,ne=Math.round(Ae)%2===1?.5:0,ft=O[u].stemDashType?O[u].stemDashType:Y.stemDashType,gt=O[u].lineColor?O[u].lineColor:O[u].color?Y.lineColor?Y.lineColor:O[u].color:Y.lineColor?Y.lineColor:C,Ft=typeof O[u].lineThickness=="number"?O[u].lineThickness:typeof Y.options.lineThickness=="number"?Y.lineThickness:be,At=O[u].lineDashType?O[u].lineDashType:Y.lineDashType,Ke=Math.round(Ft)%2===1?.5:0,ai=Y.upperBoxColor,Ct=Y.lowerBoxColor,bt=m(Y.options.fillOpacity)?1:Y.fillOpacity,Ye=Y.dataPointIds[u];this._eventManager.objectMap[Ye]={id:Ye,objectType:"dataPoint",dataSeriesIndex:D,dataPointIndex:u,x1:ie,y1:y,x2:J,y2:S,x3:x,y3:E,x4:x,y4:w,y5:v,borderThickness:be,color:C,stemThickness:Ae,stemColor:we,whiskerThickness:de,whiskerLength:le,whiskerColor:he,lineThickness:Ft,lineColor:gt},h.save(),0<Ae&&(h.beginPath(),h.strokeStyle=we,h.lineWidth=Ae,h.setLineDash&&h.setLineDash(P(ft,Ae)),h.moveTo(x-ne,S),h.lineTo(x-ne,y),h.stroke(),h.moveTo(x-ne,w),h.lineTo(x-ne,E),h.stroke()),h.restore(),o.lineWidth=Math.max(be,4),h.beginPath(),Tt(h,ie,Math.min(v,S),J,Math.max(S,v),Ct,0,C,V?te:!1,V?!1:te,!1,!1,bt),h.beginPath(),Tt(h,ie,Math.min(E,v),J,Math.max(v,E),ai,0,C,V?!1:te,V?te:!1,!1,!1,bt),h.beginPath(),h.lineWidth=be,h.strokeStyle=C,h.rect(ie-Me,Math.min(S,E)-Me,J-ie+2*Me,Math.max(S,E)-Math.min(S,E)+2*Me),h.stroke(),h.save(),0<Ft&&(h.beginPath(),h.globalAlpha=1,h.setLineDash&&h.setLineDash(P(At,Ft)),h.strokeStyle=gt,h.lineWidth=Ft,h.moveTo(ie,v-Ke),h.lineTo(J,v-Ke),h.stroke()),h.restore(),h.save(),0<de&&(h.beginPath(),h.setLineDash&&h.setLineDash(P(ce,de)),h.strokeStyle=he,h.lineWidth=de,h.moveTo(x-le/2<<0,w-ee),h.lineTo(x+le/2<<0,w-ee),h.stroke(),h.moveTo(x-le/2<<0,y+ee),h.lineTo(x+le/2<<0,y+ee),h.stroke()),h.restore(),X&&(C=f(Ye),o.strokeStyle=C,o.lineWidth=Ae,0<Ae&&(o.moveTo(x-Me-ne,S),o.lineTo(x-Me-ne,Math.max(y,w)),o.stroke(),o.moveTo(x-Me-ne,Math.min(y,w)),o.lineTo(x-Me-ne,E),o.stroke()),Tt(o,ie,Math.max(S,E),J,Math.min(S,E),C,0,null,!1,!1),0<de&&(o.beginPath(),o.lineWidth=de,o.moveTo(x+le/2,w-ee),o.lineTo(x-le/2,w-ee),o.stroke(),o.moveTo(x+le/2,y+ee),o.lineTo(x-le/2,y+ee),o.stroke())),(O[u].indexLabel||Y.indexLabel||O[u].indexLabelFormatter||Y.indexLabelFormatter)&&this._indexLabels.push({chartType:Y.type,dataPoint:O[u],dataSeries:Y,point:{x:ie+(J-ie)/2,y:r.axisY.reversed?y:w},direction:1,bounds:{x1:ie,y1:Math.min(y,w),x2:J,y2:Math.max(y,w)},color:C})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),o.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},j.prototype.renderRangeColumn=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,E=0,x,y,S,E=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;x=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.03*this.width;var w=r.axisX.dataInfo.minDiff;isFinite(w)||(w=.3*Math.abs(r.axisX.range)),w=this.options.dataPointWidth?this.dataPointWidth:.9*(c.width*(r.axisX.logarithmic?Math.log(w)/Math.log(r.axisX.range):Math.abs(w)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&E>x&&(E=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,x)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&x<E&&(x=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,E)),w<E&&(w=E),w>x&&(w=x),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip());for(var v=0;v<r.dataSeriesIndexes.length;v++){var b=r.dataSeriesIndexes[v],C=this.data[b],u=C.dataPoints;if(0<u.length){for(var I=!!(5<w&&C.bevelEnabled),E=0;E<u.length;E++)if(u[E].getTime?S=u[E].x.getTime():S=u[E].x,!(S<r.axisX.dataInfo.viewPortMin||S>r.axisX.dataInfo.viewPortMax)&&!m(u[E].y)&&u[E].y.length&&typeof u[E].y[0]=="number"&&typeof u[E].y[1]=="number"){o=r.axisX.convertValueToPixel(S),x=r.axisY.convertValueToPixel(u[E].y[0]),y=r.axisY.convertValueToPixel(u[E].y[1]);var V=r.axisX.reversed?o+r.plotType.totalDataSeries*w/2-(r.previousDataSeriesCount+v)*w<<0:o-r.plotType.totalDataSeries*w/2+(r.previousDataSeriesCount+v)*w<<0,H=r.axisX.reversed?V-w<<0:V+w<<0,o=u[E].color?u[E].color:C._colorSet[E%C._colorSet.length];if(x>y){var D=x;x=y,y=D}D=C.dataPointIds[E],this._eventManager.objectMap[D]={id:D,objectType:"dataPoint",dataSeriesIndex:b,dataPointIndex:E,x1:V,y1:x,x2:H,y2:y},Tt(h,r.axisX.reversed?H:V,x,r.axisX.reversed?V:H,y,o,0,o,I,I,!1,!1,C.fillOpacity),o=f(D),X&&Tt(this._eventManager.ghostCtx,r.axisX.reversed?H:V,x,r.axisX.reversed?V:H,y,o,0,null,!1,!1),(u[E].indexLabel||C.indexLabel||u[E].indexLabelFormatter||C.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeColumn",dataPoint:u[E],dataSeries:C,indexKeyword:0,point:{x:V+(H-V)/2,y:u[E].y[1]>=u[E].y[0]?y:x},direction:u[E].y[1]>=u[E].y[0]?-1:1,bounds:{x1:V,y1:Math.min(x,y),x2:H,y2:Math.max(x,y)},color:o}),this._indexLabels.push({chartType:"rangeColumn",dataPoint:u[E],dataSeries:C,indexKeyword:1,point:{x:V+(H-V)/2,y:u[E].y[1]>=u[E].y[0]?x:y},direction:u[E].y[1]>=u[E].y[0]?1:-1,bounds:{x1:V,y1:Math.min(x,y),x2:H,y2:Math.max(x,y)},color:o}))}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},j.prototype.renderError=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d,o=r.axisY._position?!(r.axisY._position==="left"||r.axisY._position==="right"):!1;if(!(0>=r.dataSeriesIndexes.length)){var c=null,x=!1,y=this.plotArea,S=0,E,w,v,b,C,u,I,V=r.axisX.dataInfo.minDiff;isFinite(V)||(V=.3*Math.abs(r.axisX.range)),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(y.x1,y.y1,y.width,y.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(y.x1,y.y1,y.width,y.height),this._eventManager.ghostCtx.clip());for(var H=0,D=0;D<this.data.length;D++)!this.data[D].type.match(/(bar|column)/ig)||!this.data[D].visible||this.data[D].type.match(/(stacked)/ig)&&H||H++;for(var Y=0;Y<r.dataSeriesIndexes.length;Y++){var O=r.dataSeriesIndexes[Y],te=this.data[O],ie=te.dataPoints,J=m(te._linkedSeries)?!1:!!(te._linkedSeries.type.match(/(bar|column)/ig)&&te._linkedSeries.visible),be=0;if(J)for(c=te._linkedSeries.id,D=0;D<c;D++)!this.data[D].type.match(/(bar|column)/ig)||!this.data[D].visible||this.data[D].type.match(/(stacked)/ig)&&be||(this.data[D].type.match(/(range)/ig)&&(x=!0),be++);if(c=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,S=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:o?Math.min(.15*this.height,.9*(this.plotArea.height/(J?H:1)))<<0:.3*this.width,x&&(S=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:o?Math.min(.15*this.height,.9*(this.plotArea.height/(J?H:1)))<<0:.03*this.width),D=this.options.dataPointWidth?this.dataPointWidth:.9*((o?y.height:y.width)*(r.axisX.logarithmic?Math.log(V)/Math.log(r.axisX.range):Math.abs(V)/Math.abs(r.axisX.range))/(J?H:1))<<0,this.dataPointMaxWidth&&c>S&&(c=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,S)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&S<c&&(S=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,c)),D<c&&(D=c),D>S&&(D=S),0<ie.length)for(var Me=te._colorSet,S=0;S<ie.length;S++){var c=te.lineColor=te.options.color?te.options.color:Me[0],he={color:ie[S].whiskerColor?ie[S].whiskerColor:ie[S].color?te.whiskerColor?te.whiskerColor:ie[S].color:te.whiskerColor?te.whiskerColor:c,thickness:m(ie[S].whiskerThickness)?te.whiskerThickness:ie[S].whiskerThickness,dashType:ie[S].whiskerDashType?ie[S].whiskerDashType:te.whiskerDashType,length:m(ie[S].whiskerLength)?m(te.options.whiskerLength)?D:te.options.whiskerLength:ie[S].whiskerLength,trimLength:m(ie[S].whiskerLength)&&m(te.options.whiskerLength)?50:0};he.length=typeof he.length=="number"?0>=he.length?0:he.length>=D?D:he.length:typeof he.length=="string"?parseInt(he.length)*D/100>D?D:parseInt(he.length)*D/100>D:D,he.thickness=typeof he.thickness=="number"?0>he.thickness?0:Math.round(he.thickness):2;var de={color:ie[S].stemColor?ie[S].stemColor:ie[S].color?te.stemColor?te.stemColor:ie[S].color:te.stemColor?te.stemColor:c,thickness:ie[S].stemThickness?ie[S].stemThickness:te.stemThickness,dashType:ie[S].stemDashType?ie[S].stemDashType:te.stemDashType};if(de.thickness=typeof de.thickness=="number"?0>de.thickness?0:Math.round(de.thickness):2,ie[S].getTime?I=ie[S].x.getTime():I=ie[S].x,!(I<r.axisX.dataInfo.viewPortMin||I>r.axisX.dataInfo.viewPortMax)&&!m(ie[S].y)&&ie[S].y.length&&typeof ie[S].y[0]=="number"&&typeof ie[S].y[1]=="number"){var ce=r.axisX.convertValueToPixel(I);o?w=ce:E=ce,ce=r.axisY.convertValueToPixel(ie[S].y[0]),o?v=ce:C=ce,ce=r.axisY.convertValueToPixel(ie[S].y[1]),o?b=ce:u=ce,o?(C=r.axisX.reversed?w+(J?H:1)*D/2-(J?be-1:0)*D<<0:w-(J?H:1)*D/2+(J?be-1:0)*D<<0,u=r.axisX.reversed?C-D<<0:C+D<<0):(v=r.axisX.reversed?E+(J?H:1)*D/2-(J?be-1:0)*D<<0:E-(J?H:1)*D/2+(J?be-1:0)*D<<0,b=r.axisX.reversed?v-D<<0:v+D<<0),!o&&C>u&&(ce=C,C=u,u=ce),o&&v>b&&(ce=v,v=b,b=ce),ce=te.dataPointIds[S],this._eventManager.objectMap[ce]={id:ce,objectType:"dataPoint",dataSeriesIndex:O,dataPointIndex:S,x1:Math.min(v,b),y1:Math.min(C,u),x2:Math.max(b,v),y2:Math.max(u,C),isXYSwapped:o,stemProperties:de,whiskerProperties:he},Ce(h,Math.min(v,b),Math.min(C,u),Math.max(b,v),Math.max(u,C),c,he,de,o),X&&Ce(this._eventManager.ghostCtx,v,C,b,u,c,he,de,o),(ie[S].indexLabel||te.indexLabel||ie[S].indexLabelFormatter||te.indexLabelFormatter)&&(this._indexLabels.push({chartType:"error",dataPoint:ie[S],dataSeries:te,indexKeyword:0,point:{x:o?ie[S].y[1]>=ie[S].y[0]?v:b:v+(b-v)/2,y:o?C+(u-C)/2:ie[S].y[1]>=ie[S].y[0]?u:C},direction:ie[S].y[1]>=ie[S].y[0]?-1:1,bounds:{x1:o?Math.min(v,b):v,y1:o?C:Math.min(C,u),x2:o?Math.max(v,b):b,y2:o?u:Math.max(C,u)},color:c,axisSwapped:o}),this._indexLabels.push({chartType:"error",dataPoint:ie[S],dataSeries:te,indexKeyword:1,point:{x:o?ie[S].y[1]>=ie[S].y[0]?b:v:v+(b-v)/2,y:o?C+(u-C)/2:ie[S].y[1]>=ie[S].y[0]?C:u},direction:ie[S].y[1]>=ie[S].y[0]?1:-1,bounds:{x1:o?Math.min(v,b):v,y1:o?C:Math.min(C,u),x2:o?Math.max(v,b):b,y2:o?u:Math.max(C,u)},color:c,axisSwapped:o}))}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(y.x1,y.y1,y.width,y.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},j.prototype.renderRangeBar=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,w=0,x,y,S,E,w=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;x=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/r.plotType.totalDataSeries))<<0;var v=r.axisX.dataInfo.minDiff;isFinite(v)||(v=.3*Math.abs(r.axisX.range)),v=this.options.dataPointWidth?this.dataPointWidth:.9*(c.height*(r.axisX.logarithmic?Math.log(v)/Math.log(r.axisX.range):Math.abs(v)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&w>x&&(w=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,x)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&x<w&&(x=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,w)),v<w&&(v=w),v>x&&(v=x),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip());for(var b=0;b<r.dataSeriesIndexes.length;b++){var C=r.dataSeriesIndexes[b],u=this.data[C],I=u.dataPoints;if(0<I.length){var V=!!(5<v&&u.bevelEnabled);for(h.strokeStyle="#4572A7 ",w=0;w<I.length;w++)if(I[w].getTime?E=I[w].x.getTime():E=I[w].x,!(E<r.axisX.dataInfo.viewPortMin||E>r.axisX.dataInfo.viewPortMax)&&!m(I[w].y)&&I[w].y.length&&typeof I[w].y[0]=="number"&&typeof I[w].y[1]=="number"){x=r.axisY.convertValueToPixel(I[w].y[0]),y=r.axisY.convertValueToPixel(I[w].y[1]),S=r.axisX.convertValueToPixel(E),S=r.axisX.reversed?S+r.plotType.totalDataSeries*v/2-(r.previousDataSeriesCount+b)*v<<0:S-r.plotType.totalDataSeries*v/2+(r.previousDataSeriesCount+b)*v<<0;var H=r.axisX.reversed?S-v<<0:S+v<<0;x>y&&(o=x,x=y,y=o),o=I[w].color?I[w].color:u._colorSet[w%u._colorSet.length],Tt(h,x,r.axisX.reversed?H:S,y,r.axisX.reversed?S:H,o,0,null,V,!1,!1,!1,u.fillOpacity),o=u.dataPointIds[w],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:w,x1:x,y1:S,x2:y,y2:H},o=f(o),X&&Tt(this._eventManager.ghostCtx,x,r.axisX.reversed?H:S,y,r.axisX.reversed?S:H,o,0,null,!1,!1),(I[w].indexLabel||u.indexLabel||I[w].indexLabelFormatter||u.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeBar",dataPoint:I[w],dataSeries:u,indexKeyword:0,point:{x:I[w].y[1]>=I[w].y[0]?x:y,y:S+(H-S)/2},direction:I[w].y[1]>=I[w].y[0]?-1:1,bounds:{x1:Math.min(x,y),y1:S,x2:Math.max(x,y),y2:H},color:o}),this._indexLabels.push({chartType:"rangeBar",dataPoint:I[w],dataSeries:u,indexKeyword:1,point:{x:I[w].y[1]>=I[w].y[0]?y:x,y:S+(H-S)/2},direction:I[w].y[1]>=I[w].y[0]?1:-1,bounds:{x1:Math.min(x,y),y1:S,x2:Math.max(x,y),y2:H},color:o}))}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},j.prototype.renderRangeArea=function(r){function d(){if(Y){for(var le=null,ee=E.length-1;0<=ee;ee--)le=E[ee],o.lineTo(le.x,le.y2),c.lineTo(le.x,le.y2);if(o.closePath(),o.globalAlpha=v.fillOpacity,o.fill(),o.globalAlpha=1,c.fill(),0<v.lineThickness){for(o.beginPath(),o.moveTo(le.x,le.y2),ee=0;ee<E.length;ee++)le=E[ee],o.lineTo(le.x,le.y2);for(o.moveTo(E[0].x,E[0].y1),ee=0;ee<E.length;ee++)le=E[ee],o.lineTo(le.x,le.y1);o.stroke()}o.beginPath(),o.moveTo(I,V),c.beginPath(),c.moveTo(I,V),Y={x:I,y:V},E=[],E.push({x:I,y1:V,y2:H})}}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx,x=[],y=this.plotArea;o.save(),X&&c.save(),o.beginPath(),o.rect(y.x1,y.y1,y.width,y.height),o.clip(),X&&(c.beginPath(),c.rect(y.x1,y.y1,y.width,y.height),c.clip());for(var S=0;S<r.dataSeriesIndexes.length;S++){var E=[],w=r.dataSeriesIndexes[S],v=this.data[w],b=v.dataPoints,x=v.id;this._eventManager.objectMap[x]={objectType:"dataSeries",dataSeriesIndex:w},x=f(x),c.fillStyle=x;var x=[],C=!0,u=0,I,V,H,D,Y=null;if(0<b.length){var O=v._colorSet[u%v._colorSet.length],te=v.lineColor=v.options.lineColor||O,ie=te;o.fillStyle=O,o.strokeStyle=te,o.lineWidth=v.lineThickness;var J="solid";if(o.setLineDash){var be=P(v.nullDataLineDashType,v.lineThickness),J=v.lineDashType,Me=P(J,v.lineThickness);o.setLineDash(Me)}for(var he=!0;u<b.length;u++)if(D=b[u].x.getTime?b[u].x.getTime():b[u].x,!(D<r.axisX.dataInfo.viewPortMin||D>r.axisX.dataInfo.viewPortMax&&(!v.connectNullData||!he)))if(b[u].y!==null&&b[u].y.length&&typeof b[u].y[0]=="number"&&typeof b[u].y[1]=="number"){if(I=r.axisX.convertValueToPixel(D),V=r.axisY.convertValueToPixel(b[u].y[0]),H=r.axisY.convertValueToPixel(b[u].y[1]),C||he?(v.connectNullData&&!C?(o.setLineDash&&(v.options.nullDataLineDashType||J===v.lineDashType&&v.lineDashType!==v.nullDataLineDashType)&&(E[E.length-1].newLineDashArray=Me,J=v.nullDataLineDashType,o.setLineDash(be)),o.lineTo(I,V),X&&c.lineTo(I,V),E.push({x:I,y1:V,y2:H})):(o.beginPath(),o.moveTo(I,V),Y={x:I,y:V},E=[],E.push({x:I,y1:V,y2:H}),X&&(c.beginPath(),c.moveTo(I,V))),he=C=!1):(o.lineTo(I,V),E.push({x:I,y1:V,y2:H}),X&&c.lineTo(I,V),u%250==0&&d()),D=v.dataPointIds[u],this._eventManager.objectMap[D]={id:D,objectType:"dataPoint",dataSeriesIndex:w,dataPointIndex:u,x1:I,y1:V,y2:H},u<b.length-1&&(ie!==(b[u].lineColor||te)||J!==(b[u].lineDashType||v.lineDashType))&&(d(),ie=b[u].lineColor||te,E[E.length-1].newStrokeStyle=ie,o.strokeStyle=ie,o.setLineDash&&(b[u].lineDashType?(J=b[u].lineDashType,E[E.length-1].newLineDashArray=P(J,v.lineThickness),o.setLineDash(E[E.length-1].newLineDashArray)):(J=v.lineDashType,E[E.length-1].newLineDashArray=Me,o.setLineDash(Me)))),b[u].markerSize!==0&&(0<b[u].markerSize||0<v.markerSize)){var de=v.getMarkerProperties(u,I,H,o);x.push(de);var ce=f(D);X&&x.push({x:I,y:H,ctx:c,type:de.type,size:de.size,color:ce,borderColor:ce,borderThickness:de.borderThickness}),de=v.getMarkerProperties(u,I,V,o),x.push(de),ce=f(D),X&&x.push({x:I,y:V,ctx:c,type:de.type,size:de.size,color:ce,borderColor:ce,borderThickness:de.borderThickness})}(b[u].indexLabel||v.indexLabel||b[u].indexLabelFormatter||v.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeArea",dataPoint:b[u],dataSeries:v,indexKeyword:0,point:{x:I,y:V},direction:b[u].y[0]>b[u].y[1]===r.axisY.reversed?-1:1,color:O}),this._indexLabels.push({chartType:"rangeArea",dataPoint:b[u],dataSeries:v,indexKeyword:1,point:{x:I,y:H},direction:b[u].y[0]>b[u].y[1]===r.axisY.reversed?1:-1,color:O}))}else he||C||d(),he=!0;d(),Ve.drawMarkers(x)}}return X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(y.x1,y.y1,y.width,y.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},j.prototype.renderRangeSplineArea=function(r){function d(de,ce){var le=Z(V,2);if(0<le.length){if(0<w.lineThickness){o.strokeStyle=ce,o.setLineDash&&o.setLineDash(de),o.beginPath(),o.moveTo(le[0].x,le[0].y);for(var ee=0;ee<le.length-3;ee+=3)(le[ee].newStrokeStyle||le[ee].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(le[ee].x,le[ee].y),le[ee].newStrokeStyle&&(o.strokeStyle=le[ee].newStrokeStyle),le[ee].newLineDashArray&&o.setLineDash(le[ee].newLineDashArray)),o.bezierCurveTo(le[ee+1].x,le[ee+1].y,le[ee+2].x,le[ee+2].y,le[ee+3].x,le[ee+3].y)}for(o.beginPath(),o.moveTo(le[0].x,le[0].y),X&&(c.beginPath(),c.moveTo(le[0].x,le[0].y)),ee=0;ee<le.length-3;ee+=3)o.bezierCurveTo(le[ee+1].x,le[ee+1].y,le[ee+2].x,le[ee+2].y,le[ee+3].x,le[ee+3].y),X&&c.bezierCurveTo(le[ee+1].x,le[ee+1].y,le[ee+2].x,le[ee+2].y,le[ee+3].x,le[ee+3].y);for(le=Z(H,2),o.lineTo(H[H.length-1].x,H[H.length-1].y),ee=le.length-1;2<ee;ee-=3)o.bezierCurveTo(le[ee-1].x,le[ee-1].y,le[ee-2].x,le[ee-2].y,le[ee-3].x,le[ee-3].y),X&&c.bezierCurveTo(le[ee-1].x,le[ee-1].y,le[ee-2].x,le[ee-2].y,le[ee-3].x,le[ee-3].y);if(o.closePath(),o.globalAlpha=w.fillOpacity,o.fill(),X&&(c.closePath(),c.fill()),o.globalAlpha=1,0<w.lineThickness){o.strokeStyle=ce,o.setLineDash&&o.setLineDash(de),o.beginPath(),o.moveTo(le[0].x,le[0].y);for(var we=ee=0;ee<le.length-3;ee+=3,we++)(V[we].newStrokeStyle||V[we].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(le[ee].x,le[ee].y),V[we].newStrokeStyle&&(o.strokeStyle=V[we].newStrokeStyle),V[we].newLineDashArray&&o.setLineDash(V[we].newLineDashArray)),o.bezierCurveTo(le[ee+1].x,le[ee+1].y,le[ee+2].x,le[ee+2].y,le[ee+3].x,le[ee+3].y);for(le=Z(V,2),o.moveTo(le[0].x,le[0].y),we=ee=0;ee<le.length-3;ee+=3,we++)(V[we].newStrokeStyle||V[we].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(le[ee].x,le[ee].y),V[we].newStrokeStyle&&(o.strokeStyle=V[we].newStrokeStyle),V[we].newLineDashArray&&o.setLineDash(V[we].newLineDashArray)),o.bezierCurveTo(le[ee+1].x,le[ee+1].y,le[ee+2].x,le[ee+2].y,le[ee+3].x,le[ee+3].y);o.stroke()}o.beginPath()}}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx,x=[],y=this.plotArea;o.save(),X&&c.save(),o.beginPath(),o.rect(y.x1,y.y1,y.width,y.height),o.clip(),X&&(c.beginPath(),c.rect(y.x1,y.y1,y.width,y.height),c.clip());for(var S=0;S<r.dataSeriesIndexes.length;S++){var E=r.dataSeriesIndexes[S],w=this.data[E],v=w.dataPoints,x=w.id;this._eventManager.objectMap[x]={objectType:"dataSeries",dataSeriesIndex:E},x=f(x),c.fillStyle=x;var x=[],b=0,C,u,I,V=[],H=[];if(0<v.length){var D=w._colorSet[b%w._colorSet.length],Y=w.lineColor=w.options.lineColor||D,O=Y;o.fillStyle=D,o.lineWidth=w.lineThickness;var te="solid",ie;if(o.setLineDash){var J=P(w.nullDataLineDashType,w.lineThickness),te=w.lineDashType;ie=P(te,w.lineThickness)}for(u=!1;b<v.length;b++)if(C=v[b].x.getTime?v[b].x.getTime():v[b].x,!(C<r.axisX.dataInfo.viewPortMin||C>r.axisX.dataInfo.viewPortMax&&(!w.connectNullData||!u)))if(v[b].y!==null&&v[b].y.length&&typeof v[b].y[0]=="number"&&typeof v[b].y[1]=="number"){C=r.axisX.convertValueToPixel(C),u=r.axisY.convertValueToPixel(v[b].y[0]),I=r.axisY.convertValueToPixel(v[b].y[1]);var be=w.dataPointIds[b];if(this._eventManager.objectMap[be]={id:be,objectType:"dataPoint",dataSeriesIndex:E,dataPointIndex:b,x1:C,y1:u,y2:I},V[V.length]={x:C,y:u},H[H.length]={x:C,y:I},b<v.length-1&&(O!==(v[b].lineColor||Y)||te!==(v[b].lineDashType||w.lineDashType))&&(O=v[b].lineColor||Y,V[V.length-1].newStrokeStyle=O,o.setLineDash&&(v[b].lineDashType?(te=v[b].lineDashType,V[V.length-1].newLineDashArray=P(te,w.lineThickness)):(te=w.lineDashType,V[V.length-1].newLineDashArray=ie))),v[b].markerSize!==0&&(0<v[b].markerSize||0<w.markerSize)){var Me=w.getMarkerProperties(b,C,u,o);x.push(Me);var he=f(be);X&&x.push({x:C,y:u,ctx:c,type:Me.type,size:Me.size,color:he,borderColor:he,borderThickness:Me.borderThickness}),Me=w.getMarkerProperties(b,C,I,o),x.push(Me),he=f(be),X&&x.push({x:C,y:I,ctx:c,type:Me.type,size:Me.size,color:he,borderColor:he,borderThickness:Me.borderThickness})}(v[b].indexLabel||w.indexLabel||v[b].indexLabelFormatter||w.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:v[b],dataSeries:w,indexKeyword:0,point:{x:C,y:u},direction:v[b].y[0]<=v[b].y[1]?-1:1,color:D}),this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:v[b],dataSeries:w,indexKeyword:1,point:{x:C,y:I},direction:v[b].y[0]<=v[b].y[1]?1:-1,color:D})),u=!1}else 0<b&&!u&&(w.connectNullData?o.setLineDash&&0<V.length&&(w.options.nullDataLineDashType||!v[b-1].lineDashType)&&(V[V.length-1].newLineDashArray=J,te=w.nullDataLineDashType):(d(ie,Y),V=[],H=[])),u=!0;d(ie,Y),Ve.drawMarkers(x)}}return X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(y.x1,y.y1,y.width,y.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},j.prototype.renderWaterfall=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx,c=null,x=this.plotArea,b=0,y,S,E,w,v=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),b=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;S=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/r.plotType.totalDataSeries))<<0;var C=r.axisX.dataInfo.minDiff;isFinite(C)||(C=.3*Math.abs(r.axisX.range)),C=this.options.dataPointWidth?this.dataPointWidth:.6*(x.width*(r.axisX.logarithmic?Math.log(C)/Math.log(r.axisX.range):Math.abs(C)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&b>S&&(b=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,S)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&S<b&&(S=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,b)),C<b&&(C=b),C>S&&(C=S),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(x.x1,x.y1,x.width,x.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(x.x1,x.y1,x.width,x.height),this._eventManager.ghostCtx.clip());for(var u=0;u<r.dataSeriesIndexes.length;u++){var I=r.dataSeriesIndexes[u],V=this.data[I],H=V.dataPoints,c=V._colorSet[0];V.risingColor=V.options.risingColor?V.options.risingColor:c,V.fallingColor=V.options.fallingColor?V.options.fallingColor:"#e40a0a";var D=typeof V.options.lineThickness=="number"?Math.round(V.lineThickness):1,Y=Math.round(D)%2===1?-.5:0;if(0<H.length)for(var O=!!(5<C&&V.bevelEnabled),te=!1,ie=null,J=null,b=0;b<H.length;b++)if(H[b].getTime?w=H[b].x.getTime():w=H[b].x,typeof H[b].y!="number"){if(0<b&&!te&&V.connectNullData)var be=V.options.nullDataLineDashType||!H[b-1].lineDashType?V.nullDataLineDashType:H[b-1].lineDashType;te=!0}else{y=r.axisX.convertValueToPixel(w),S=V.dataPointEOs[b].cumulativeSum===0?v:r.axisY.convertValueToPixel(V.dataPointEOs[b].cumulativeSum),E=V.dataPointEOs[b].cumulativeSumYStartValue===0?v:r.axisY.convertValueToPixel(V.dataPointEOs[b].cumulativeSumYStartValue),y=r.axisX.reversed?y+r.plotType.totalDataSeries*C/2-(r.previousDataSeriesCount+u)*C<<0:y-r.plotType.totalDataSeries*C/2+(r.previousDataSeriesCount+u)*C<<0;var Me=r.axisX.reversed?y-C<<0:y+C<<0;S>E&&(c=S,S=E,E=c),r.axisY.reversed&&(c=S,S=E,E=c),c=V.dataPointIds[b],this._eventManager.objectMap[c]={id:c,objectType:"dataPoint",dataSeriesIndex:I,dataPointIndex:b,x1:y,y1:S,x2:Me,y2:E};var de=H[b].color?H[b].color:0<H[b].y?V.risingColor:V.fallingColor;Tt(h,r.axisX.reversed?Me:y,r.axisY.reversed?E:S,r.axisX.reversed?y:Me,r.axisY.reversed?S:E,de,0,de,O,O,!1,!1,V.fillOpacity),c=f(c),X&&Tt(this._eventManager.ghostCtx,r.axisX.reversed?Me:y,S,r.axisX.reversed?y:Me,E,c,0,null,!1,!1);var he,de=y;he=typeof H[b].isIntermediateSum<"u"&&H[b].isIntermediateSum===!0||typeof H[b].isCumulativeSum<"u"&&H[b].isCumulativeSum===!0?0<H[b].y?S:E:0<H[b].y?E:S,0<b&&ie&&(!te||V.connectNullData)&&(te&&h.setLineDash&&h.setLineDash(P(be,D)),h.beginPath(),h.moveTo(ie,J-Y),h.lineTo(de,he-Y),0<D&&h.stroke(),X&&(o.beginPath(),o.moveTo(ie,J-Y),o.lineTo(de,he-Y),0<D&&o.stroke())),te=!1,ie=Me,J=0<H[b].y?S:E,de=H[b].lineDashType?H[b].lineDashType:V.options.lineDashType?V.options.lineDashType:"shortDash",h.strokeStyle=H[b].lineColor?H[b].lineColor:V.options.lineColor?V.options.lineColor:"#9e9e9e",h.lineWidth=D,h.setLineDash&&(de=P(de,D),h.setLineDash(de)),(H[b].indexLabel||V.indexLabel||H[b].indexLabelFormatter||V.indexLabelFormatter)&&this._indexLabels.push({chartType:"waterfall",dataPoint:H[b],dataSeries:V,point:{x:y+(Me-y)/2,y:0<=H[b].y?S:E},direction:0>H[b].y===r.axisY.reversed?1:-1,bounds:{x1:y,y1:Math.min(S,E),x2:Me,y2:Math.max(S,E)},color:c})}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(x.x1,x.y1,x.width,x.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}};var pe=function(r,d,h,o,c,x,y,S,E){if(!(0>h)){if(typeof S>"u"&&(S=1),!X){var w=Number((y%(2*Math.PI)).toFixed(8));Number((x%(2*Math.PI)).toFixed(8))===w&&(y-=1e-4)}r.save(),r.globalAlpha=S,c==="pie"?(r.beginPath(),r.moveTo(d.x,d.y),r.arc(d.x,d.y,h,x,y,!1),r.fillStyle=o,r.strokeStyle="white",r.lineWidth=2,r.closePath(),r.fill()):c==="doughnut"&&(r.beginPath(),r.arc(d.x,d.y,h,x,y,!1),0<=E&&r.arc(d.x,d.y,E*h,y,x,!0),r.closePath(),r.fillStyle=o,r.strokeStyle="white",r.lineWidth=2,r.fill()),r.globalAlpha=1,r.restore()}};j.prototype.renderPie=function(r){function d(){if(w&&v){var he=0,de=0,ce=0,le=0;m(w.options.indexLabelMaxWidth)&&(w.indexLabelMaxWidth=.33*C.width);for(var ee=0;ee<v.length;ee++){var we=v[ee],Ae=w.dataPointIds[ee];u[ee].id=Ae,u[ee].objectType="dataPoint",u[ee].dataPointIndex=ee,u[ee].dataSeriesIndex=0;var ne=u[ee],gt={percent:null,total:null},ft=null,gt=E.getPercentAndTotal(w,we);(w.indexLabelFormatter||we.indexLabelFormatter)&&(ft={chart:E.options,dataSeries:w,dataPoint:we,total:gt.total,percent:gt.percent}),gt=we.indexLabelFormatter?we.indexLabelFormatter(ft):we.indexLabel?E.replaceKeywordsWithValue(we.indexLabel,we,w,ee):w.indexLabelFormatter?w.indexLabelFormatter(ft):w.indexLabel?E.replaceKeywordsWithValue(w.indexLabel,we,w,ee):we.label?we.label:"",E._eventManager.objectMap[Ae]=ne,ne.center={x:O.x,y:O.y},ne.y=we.y,ne.radius=J,ne.percentInnerRadius=Me,ne.indexLabelText=gt,ne.indexLabelPlacement=w.indexLabelPlacement,ne.indexLabelLineColor=we.indexLabelLineColor?we.indexLabelLineColor:w.options.indexLabelLineColor?w.options.indexLabelLineColor:we.color?we.color:w._colorSet[ee%w._colorSet.length],ne.indexLabelLineThickness=m(we.indexLabelLineThickness)?w.indexLabelLineThickness:we.indexLabelLineThickness,ne.indexLabelLineDashType=we.indexLabelLineDashType?we.indexLabelLineDashType:w.indexLabelLineDashType,ne.indexLabelFontColor=we.indexLabelFontColor?we.indexLabelFontColor:w.indexLabelFontColor,ne.indexLabelFontStyle=we.indexLabelFontStyle?we.indexLabelFontStyle:w.indexLabelFontStyle,ne.indexLabelFontWeight=we.indexLabelFontWeight?we.indexLabelFontWeight:w.indexLabelFontWeight,ne.indexLabelFontSize=m(we.indexLabelFontSize)?w.indexLabelFontSize:we.indexLabelFontSize,ne.indexLabelFontFamily=we.indexLabelFontFamily?we.indexLabelFontFamily:w.indexLabelFontFamily,ne.indexLabelBackgroundColor=we.indexLabelBackgroundColor?we.indexLabelBackgroundColor:w.options.indexLabelBackgroundColor?w.options.indexLabelBackgroundColor:w.indexLabelBackgroundColor,ne.indexLabelBorderColor=we.indexLabelBorderColor?we.indexLabelBorderColor:w.options.indexLabelBorderColor?w.options.indexLabelBorderColor:w.indexLabelBorderColor,ne.indexLabelBorderThickness=we.indexLabelBorderThickness?we.indexLabelBorderThickness:w.options.indexLabelBorderThickness?w.options.indexLabelBorderThickness:w.indexLabelBorderThickness,ne.indexLabelMaxWidth=we.indexLabelMaxWidth?we.indexLabelMaxWidth:w.indexLabelMaxWidth,ne.indexLabelWrap=typeof we.indexLabelWrap<"u"?we.indexLabelWrap:w.indexLabelWrap,ne.indexLabelTextAlign=we.indexLabelTextAlign?we.indexLabelTextAlign:w.indexLabelTextAlign?w.indexLabelTextAlign:"left",ne.startAngle=ee===0?w.startAngle?w.startAngle/180*Math.PI:0:u[ee-1].endAngle,ne.startAngle=(ne.startAngle+2*Math.PI)%(2*Math.PI),ne.endAngle=ne.startAngle+2*Math.PI/te*Math.abs(we.y),we=(ne.endAngle+ne.startAngle)/2,we=(we+2*Math.PI)%(2*Math.PI),ne.midAngle=we,ne.midAngle>Math.PI/2-D&&ne.midAngle<Math.PI/2+D?((he===0||u[ce].midAngle>ne.midAngle)&&(ce=ee),he++):ne.midAngle>3*Math.PI/2-D&&ne.midAngle<3*Math.PI/2+D&&((de===0||u[le].midAngle>ne.midAngle)&&(le=ee),de++),ne.hemisphere=we>Math.PI/2&&we<=3*Math.PI/2?"left":"right",ne.indexLabelTextBlock=new ue(E.plotArea.ctx,{fontSize:ne.indexLabelFontSize,fontFamily:ne.indexLabelFontFamily,fontColor:ne.indexLabelFontColor,fontStyle:ne.indexLabelFontStyle,fontWeight:ne.indexLabelFontWeight,textAlign:ne.indexLabelTextAlign,backgroundColor:ne.indexLabelBackgroundColor,borderColor:ne.indexLabelBorderColor,borderThickness:ne.indexLabelBorderThickness,maxWidth:ne.indexLabelMaxWidth,maxHeight:ne.indexLabelWrap?5*ne.indexLabelFontSize:1.5*ne.indexLabelFontSize,text:ne.indexLabelText,padding:0,textBaseline:"middle"}),ne.indexLabelTextBlock.measureText()}for(Ae=we=0,gt=!1,ee=0;ee<v.length;ee++)ne=u[(ce+ee)%v.length],1<he&&ne.midAngle>Math.PI/2-D&&ne.midAngle<Math.PI/2+D&&(we<=he/2&&!gt?(ne.hemisphere="right",we++):(ne.hemisphere="left",gt=!0));for(gt=!1,ee=0;ee<v.length;ee++)ne=u[(le+ee)%v.length],1<de&&ne.midAngle>3*Math.PI/2-D&&ne.midAngle<3*Math.PI/2+D&&(Ae<=de/2&&!gt?(ne.hemisphere="left",Ae++):(ne.hemisphere="right",gt=!0))}}function h(he,de){var ce=E.plotArea.ctx;for(ce.clearRect(C.x1,C.y1,C.width,C.height),ce.fillStyle=E.backgroundColor,ce.fillRect(C.x1,C.y1,C.width,C.height),ce=0;ce<v.length;ce++){var le=u[ce].startAngle,ee=u[ce].endAngle;if(ee>le){var we=.07*J*Math.cos(u[ce].midAngle),Ae=.07*J*Math.sin(u[ce].midAngle),ne=!1;v[ce].exploded?(1e-9<Math.abs(u[ce].center.x-(O.x+we))||1e-9<Math.abs(u[ce].center.y-(O.y+Ae)))&&(u[ce].center.x=O.x+we*he,u[ce].center.y=O.y+Ae*he,ne=!0):(0<Math.abs(u[ce].center.x-O.x)||0<Math.abs(u[ce].center.y-O.y))&&(u[ce].center.x=O.x+we*(1-he),u[ce].center.y=O.y+Ae*(1-he),ne=!0),ne&&de&&(we={},we.dataSeries=w,we.dataPoint=w.dataPoints[ce],we.index=ce,E.toolTip.highlightObjects([we])),pe(E.plotArea.ctx,u[ce].center,u[ce].radius,v[ce].color?v[ce].color:w._colorSet[ce%w._colorSet.length],w.type,le,ee,w.fillOpacity,u[ce].percentInnerRadius)}}for(ce=E.plotArea.ctx,ce.save(),ce.fillStyle="black",ce.strokeStyle="grey",ce.textBaseline="middle",ce.lineJoin="round",le=le=0;le<v.length;le++)ee=u[le],ee.indexLabelText&&(ee.indexLabelTextBlock.y-=ee.indexLabelTextBlock.height/2-ee.indexLabelTextBlock.fontSize/2,we=0,we=ee.hemisphere==="left"?w.indexLabelPlacement!=="inside"?-(ee.indexLabelTextBlock.width+b):-ee.indexLabelTextBlock.width/2:w.indexLabelPlacement!=="inside"?b:-ee.indexLabelTextBlock.width/2,ee.indexLabelTextBlock.x+=we,ee.indexLabelTextBlock.render(!0),ee.indexLabelTextBlock.x-=we,ee.indexLabelTextBlock.y+=ee.indexLabelTextBlock.height/2-ee.indexLabelTextBlock.fontSize/2,ee.indexLabelPlacement!=="inside"&&0<ee.indexLabelLineThickness&&(we=ee.center.x+J*Math.cos(ee.midAngle),Ae=ee.center.y+J*Math.sin(ee.midAngle),ce.strokeStyle=ee.indexLabelLineColor,ce.lineWidth=ee.indexLabelLineThickness,ce.setLineDash&&ce.setLineDash(P(ee.indexLabelLineDashType,ee.indexLabelLineThickness)),ce.beginPath(),ce.moveTo(we,Ae),ce.lineTo(ee.indexLabelTextBlock.x,ee.indexLabelTextBlock.y),ce.lineTo(ee.indexLabelTextBlock.x+(ee.hemisphere==="left"?-b:b),ee.indexLabelTextBlock.y),ce.stroke()),ce.lineJoin="miter");ce.save()}function o(he,de){var ce=0,ce=he.indexLabelTextBlock.y-he.indexLabelTextBlock.height/2,le=he.indexLabelTextBlock.y+he.indexLabelTextBlock.height/2,ee=de.indexLabelTextBlock.y-de.indexLabelTextBlock.height/2,we=de.indexLabelTextBlock.y+de.indexLabelTextBlock.height/2;return ce=de.indexLabelTextBlock.y>he.indexLabelTextBlock.y?ee-le:ce-we}function c(he){for(var de=null,ce=1;ce<v.length;ce++)if(de=(he+ce+u.length)%u.length,u[de].hemisphere!==u[he].hemisphere){de=null;break}else{if(u[de].indexLabelText&&de!==he&&(0>o(u[de],u[he])||(u[he].hemisphere==="right"?u[de].indexLabelTextBlock.y>=u[he].indexLabelTextBlock.y:u[de].indexLabelTextBlock.y<=u[he].indexLabelTextBlock.y)))break;de=null}return de}function x(he,de,ce){if(ce=(ce||0)+1,1e3<ce)return 0;de=de||0;var le=0,ee=O.y-1*V,we=O.y+1*V;if(0<=he&&he<v.length){var Ae=u[he];if(0>de&&Ae.indexLabelTextBlock.y<ee||0<de&&Ae.indexLabelTextBlock.y>we)return 0;var ne=0,ft=0,ft=ne=ne=0;for(0>de?Ae.indexLabelTextBlock.y-Ae.indexLabelTextBlock.height/2>ee&&Ae.indexLabelTextBlock.y-Ae.indexLabelTextBlock.height/2+de<ee&&(de=-(ee-(Ae.indexLabelTextBlock.y-Ae.indexLabelTextBlock.height/2+de))):Ae.indexLabelTextBlock.y+Ae.indexLabelTextBlock.height/2<ee&&Ae.indexLabelTextBlock.y+Ae.indexLabelTextBlock.height/2+de>we&&(de=Ae.indexLabelTextBlock.y+Ae.indexLabelTextBlock.height/2+de-we),de=Ae.indexLabelTextBlock.y+de,ee=0,ee=Ae.hemisphere==="right"?O.x+Math.sqrt(Math.pow(V,2)-Math.pow(de-O.y,2)):O.x-Math.sqrt(Math.pow(V,2)-Math.pow(de-O.y,2)),ft=O.x+J*Math.cos(Ae.midAngle),ne=O.y+J*Math.sin(Ae.midAngle),ne=Math.sqrt(Math.pow(ee-ft,2)+Math.pow(de-ne,2)),ft=Math.acos(J/V),ne=Math.acos((V*V+J*J-ne*ne)/(2*J*V)),de=ne<ft?de-Ae.indexLabelTextBlock.y:0,ee=null,we=1;we<v.length;we++)if(ee=(he-we+u.length)%u.length,u[ee].hemisphere!==u[he].hemisphere){ee=null;break}else{if(u[ee].indexLabelText&&u[ee].hemisphere===u[he].hemisphere&&ee!==he&&(0>o(u[ee],u[he])||(u[he].hemisphere==="right"?u[ee].indexLabelTextBlock.y<=u[he].indexLabelTextBlock.y:u[ee].indexLabelTextBlock.y>=u[he].indexLabelTextBlock.y)))break;ee=null}ft=ee,ne=c(he),we=ee=0,0>de?(we=Ae.hemisphere==="right"?ft:ne,le=de,we!==null&&(ft=-de,de=Ae.indexLabelTextBlock.y-Ae.indexLabelTextBlock.height/2-(u[we].indexLabelTextBlock.y+u[we].indexLabelTextBlock.height/2),de-ft<I&&(ee=-ft,we=x(we,ee,ce+1),+we.toFixed(Y)>+ee.toFixed(Y)&&(le=de>I?-(de-I):-(ft-(we-ee)))))):0<de&&(we=Ae.hemisphere==="right"?ne:ft,le=de,we!==null&&(ft=de,de=u[we].indexLabelTextBlock.y-u[we].indexLabelTextBlock.height/2-(Ae.indexLabelTextBlock.y+Ae.indexLabelTextBlock.height/2),de-ft<I&&(ee=ft,we=x(we,ee,ce+1),+we.toFixed(Y)<+ee.toFixed(Y)&&(le=de>I?de-I:ft-(ee-we))))),le&&(ce=Ae.indexLabelTextBlock.y+le,de=0,de=Ae.hemisphere==="right"?O.x+Math.sqrt(Math.pow(V,2)-Math.pow(ce-O.y,2)):O.x-Math.sqrt(Math.pow(V,2)-Math.pow(ce-O.y,2)),Ae.midAngle>Math.PI/2-D&&Ae.midAngle<Math.PI/2+D?(ee=(he-1+u.length)%u.length,ee=u[ee],he=u[(he+1+u.length)%u.length],Ae.hemisphere==="left"&&ee.hemisphere==="right"&&de>ee.indexLabelTextBlock.x?de=ee.indexLabelTextBlock.x-15:Ae.hemisphere==="right"&&he.hemisphere==="left"&&de<he.indexLabelTextBlock.x&&(de=he.indexLabelTextBlock.x+15)):Ae.midAngle>3*Math.PI/2-D&&Ae.midAngle<3*Math.PI/2+D&&(ee=(he-1+u.length)%u.length,ee=u[ee],he=u[(he+1+u.length)%u.length],Ae.hemisphere==="right"&&ee.hemisphere==="left"&&de<ee.indexLabelTextBlock.x?de=ee.indexLabelTextBlock.x+15:Ae.hemisphere==="left"&&he.hemisphere==="right"&&de>he.indexLabelTextBlock.x&&(de=he.indexLabelTextBlock.x-15)),Ae.indexLabelTextBlock.y=ce,Ae.indexLabelTextBlock.x=de,Ae.indexLabelAngle=Math.atan2(Ae.indexLabelTextBlock.y-O.y,Ae.indexLabelTextBlock.x-O.x))}return le}function y(){var he=E.plotArea.ctx;he.fillStyle="grey",he.strokeStyle="grey",he.font="16px Arial",he.textBaseline="middle";for(var le=he=0,de=0,ce=!0,le=0;10>le&&(1>le||0<de);le++){if((w.radius||!w.radius&&typeof w.innerRadius<"u"&&w.innerRadius!==null&&J-de<=be)&&(ce=!1),ce&&(J-=de),de=0,w.indexLabelPlacement!=="inside"){for(V=J*H,he=0;he<v.length;he++){var ee=u[he];ee.indexLabelTextBlock.x=O.x+V*Math.cos(ee.midAngle),ee.indexLabelTextBlock.y=O.y+V*Math.sin(ee.midAngle),ee.indexLabelAngle=ee.midAngle,ee.radius=J,ee.percentInnerRadius=Me}for(var we,Ae,he=0;he<v.length;he++){var ee=u[he],ne=c(he);if(ne!==null){we=u[he],Ae=u[ne];var ft=0,ft=o(we,Ae)-I;if(0>ft){for(var Ft=Ae=0,gt=0;gt<v.length;gt++)gt!==he&&u[gt].hemisphere===ee.hemisphere&&(u[gt].indexLabelTextBlock.y<ee.indexLabelTextBlock.y?Ae++:Ft++);Ae=ft/(Ae+Ft||1)*Ft;var Ft=-1*(ft-Ae),At=gt=0;ee.hemisphere==="right"?(gt=x(he,Ae),Ft=-1*(ft-gt),At=x(ne,Ft),+At.toFixed(Y)<+Ft.toFixed(Y)&&+gt.toFixed(Y)<=+Ae.toFixed(Y)&&x(he,-(Ft-At))):(gt=x(ne,Ae),Ft=-1*(ft-gt),At=x(he,Ft),+At.toFixed(Y)<+Ft.toFixed(Y)&&+gt.toFixed(Y)<=+Ae.toFixed(Y)&&x(ne,-(Ft-At)))}}}}else for(he=0;he<v.length;he++)ee=u[he],V=w.type==="pie"?.7*J:.85*J,ne=O.x+V*Math.cos(ee.midAngle),Ae=O.y+V*Math.sin(ee.midAngle),ee.indexLabelTextBlock.x=ne,ee.indexLabelTextBlock.y=Ae;for(he=0;he<v.length;he++)ee=u[he],ne=ee.indexLabelTextBlock.measureText(),ne.height!==0&&ne.width!==0&&(ne=ne=0,ee.hemisphere==="right"?(ne=C.x2-(ee.indexLabelTextBlock.x+ee.indexLabelTextBlock.width+b),ne*=-1):ne=C.x1-(ee.indexLabelTextBlock.x-ee.indexLabelTextBlock.width-b),0<ne&&(!ce&&ee.indexLabelText&&(Ae=ee.hemisphere==="right"?C.x2-ee.indexLabelTextBlock.x:ee.indexLabelTextBlock.x-C.x1,.3*ee.indexLabelTextBlock.maxWidth>Ae?ee.indexLabelText="":ee.indexLabelTextBlock.maxWidth=.85*Ae,.3*ee.indexLabelTextBlock.maxWidth<Ae&&(ee.indexLabelTextBlock.x-=ee.hemisphere==="right"?2:-2)),Math.abs(ee.indexLabelTextBlock.y-ee.indexLabelTextBlock.height/2-O.y)<J||Math.abs(ee.indexLabelTextBlock.y+ee.indexLabelTextBlock.height/2-O.y)<J)&&(ne/=Math.abs(Math.cos(ee.indexLabelAngle)),9<ne&&(ne*=.3),ne>de&&(de=ne)),ne=ne=0,0<ee.indexLabelAngle&&ee.indexLabelAngle<Math.PI?(ne=C.y2-(ee.indexLabelTextBlock.y+ee.indexLabelTextBlock.height/2+5),ne*=-1):ne=C.y1-(ee.indexLabelTextBlock.y-ee.indexLabelTextBlock.height/2-5),0<ne&&(!ce&&ee.indexLabelText&&(Ae=0<ee.indexLabelAngle&&ee.indexLabelAngle<Math.PI?-1:1,x(he,ne*Ae)===0&&x(he,2*Ae)),Math.abs(ee.indexLabelTextBlock.x-O.x)<J&&(ne/=Math.abs(Math.sin(ee.indexLabelAngle)),9<ne&&(ne*=.3),ne>de&&(de=ne))));var Ke=function(ai,Ct,bt){for(var Ye=[],Jt=0;Ye.push(u[Ct]),Ct!==bt;Ct=(Ct+1+v.length)%v.length);for(Ye.sort(function(jn,Bi){return jn.y-Bi.y}),Ct=0;Ct<Ye.length&&(bt=Ye[Ct],Jt<.7*ai);Ct++)Jt+=bt.indexLabelTextBlock.height,bt.indexLabelTextBlock.text="",bt.indexLabelText="",bt.indexLabelTextBlock.measureText()};(function(){for(var ai=-1,Ct=-1,bt=0,Ye=!1,Jt=0;Jt<v.length;Jt++)if(Ye=!1,we=u[Jt],we.indexLabelText){var jn=c(Jt);if(jn!==null){var Bi=u[jn];ft=0,ft=o(we,Bi);var Ys;if(Ys=0>ft){Ys=we.indexLabelTextBlock.x;var ks=we.indexLabelTextBlock.y-we.indexLabelTextBlock.height/2,Te=we.indexLabelTextBlock.y+we.indexLabelTextBlock.height/2,Kl=Bi.indexLabelTextBlock.y-Bi.indexLabelTextBlock.height/2,Li=Bi.indexLabelTextBlock.x+Bi.indexLabelTextBlock.width,bo=Bi.indexLabelTextBlock.y+Bi.indexLabelTextBlock.height/2;Ys=!(we.indexLabelTextBlock.x+we.indexLabelTextBlock.width<Bi.indexLabelTextBlock.x-b||Ys>Li+b||ks>bo+b||Te<Kl-b)}Ys?(0>ai&&(ai=Jt),jn!==ai&&(Ct=jn,bt+=-ft),Jt%Math.max(v.length/10,3)===0&&(Ye=!0)):Ye=!0,Ye&&0<bt&&0<=ai&&0<=Ct&&(Ke(bt,ai,Ct),Ct=ai=-1,bt=0)}}0<bt&&Ke(bt,ai,Ct)})()}}function S(){if(E.plotArea.layoutManager.reset(),E.title&&(E.title.dockInsidePlotArea||E.title.horizontalAlign==="center"&&E.title.verticalAlign==="center")&&E.title.render(),E.subtitles)for(var he=0;he<E.subtitles.length;he++){var de=E.subtitles[he];(de.dockInsidePlotArea||de.horizontalAlign==="center"&&de.verticalAlign==="center")&&de.render()}E.legend&&(E.legend.dockInsidePlotArea||E.legend.horizontalAlign==="center"&&E.legend.verticalAlign==="center")&&(E.legend.setLayout(),E.legend.render())}var E=this;if(!(0>=r.dataSeriesIndexes.length)){var w=this.data[r.dataSeriesIndexes[0]],v=w.dataPoints,b=10,C=this.plotArea,u=w.dataPointEOs,I=2,V,H=1.3,D=20/180*Math.PI,Y=6,O={x:(C.x2+C.x1)/2,y:(C.y2+C.y1)/2},te=0;r=!1;for(var ie=0;ie<v.length;ie++)te+=Math.abs(v[ie].y),!r&&typeof v[ie].indexLabel<"u"&&v[ie].indexLabel!==null&&0<v[ie].indexLabel.toString().length&&(r=!0),!r&&typeof v[ie].label<"u"&&v[ie].label!==null&&0<v[ie].label.toString().length&&(r=!0);if(te!==0){r=r||typeof w.indexLabel<"u"&&w.indexLabel!==null&&0<w.indexLabel.toString().length;var J=w.indexLabelPlacement!=="inside"&&r?.75*Math.min(C.width,C.height)/2:.92*Math.min(C.width,C.height)/2;w.radius&&(J=Q(w.radius,J));var be=typeof w.innerRadius<"u"&&w.innerRadius!==null?Q(w.innerRadius,J):.7*J,Me=Math.min(be/J,(J-1)/J);this.pieDoughnutClickHandler=function(he){E.isAnimating||!m(this.explodeOnClick)&&!this.explodeOnClick||(he=he.dataPoint,he.exploded=!he.exploded,1<this.dataPoints.length&&E._animator.animate(0,500,function(de){h(de,!0),S(),E.dispatchEvent("dataAnimationIterationEnd",{chart:E}),E.dispatchEvent("dataAnimationEnd",{chart:E})}))},d(),y(),y(),y(),y(),this.disableToolTip=!0,this._animator.animate(0,this.animatedRender?this.animationDuration:0,function(he){var de=E.plotArea.ctx;de.clearRect(C.x1,C.y1,C.width,C.height),de.fillStyle=E.backgroundColor,de.fillRect(C.x1,C.y1,C.width,C.height);for(var de=u[0].startAngle+2*Math.PI*he,ce=0;ce<v.length;ce++){var le=ce===0?u[ce].startAngle:ee,ee=le+(u[ce].endAngle-u[ce].startAngle),we=!1;ee>de&&(ee=de,we=!0);var Ae=v[ce].color?v[ce].color:w._colorSet[ce%w._colorSet.length];if(ee>le&&pe(E.plotArea.ctx,u[ce].center,u[ce].radius,Ae,w.type,le,ee,w.fillOpacity,u[ce].percentInnerRadius),we)break}S(),E.dispatchEvent("dataAnimationIterationEnd",{chart:E}),1<=he&&E.dispatchEvent("dataAnimationEnd",{chart:E})},function(){E.disableToolTip=!1,E._animator.animate(0,E.animatedRender?500:0,function(he){h(he,!1),S(),E.dispatchEvent("dataAnimationIterationEnd",{chart:E})}),E.dispatchEvent("dataAnimationEnd",{chart:E})}),w.radius=J,w.type==="doughnut"&&(w.innerRadius=be)}}};var ye=function(r,d,h,o){typeof h>"u"&&(h=1),0>=Math.round(d.y4-d.y1)||(r.save(),r.globalAlpha=h,r.beginPath(),r.moveTo(Math.round(d.x1),Math.round(d.y1)),r.lineTo(Math.round(d.x2),Math.round(d.y2)),r.lineTo(Math.round(d.x3),Math.round(d.y3)),r.lineTo(Math.round(d.x4),Math.round(d.y4)),d.x5!=="undefined"&&(r.lineTo(Math.round(d.x5),Math.round(d.y5)),r.lineTo(Math.round(d.x6),Math.round(d.y6))),r.closePath(),r.fillStyle=o||d.color,r.fill(),r.globalAplha=1,r.restore())};j.prototype.renderFunnel=function(r){function d(){for(var Fe=0,De=[],He=0;He<Y.length;He++){if(typeof Y[He].y>"u")return-1;Y[He].y=typeof Y[He].y=="number"?Y[He].y:0,Fe+=Math.abs(Y[He].y)}if(Fe===0)return-1;for(He=De[0]=0;He<Y.length;He++)De.push(Math.abs(Y[He].y)*be/Fe);return De}function h(){var Fe=gt,De=Ft,He=Ke,xt=ai,Xe,wt;Xe=le,wt=ee-Ae,xt=Math.abs((wt-Xe)*(De-Fe+(xt-He))/2),He=ai-Ke,Xe=wt-Xe,wt=He*(wt-ee),wt=Math.abs(wt),wt=xt+wt;for(var xt=[],Zi=0,Wt=0;Wt<Y.length;Wt++){if(typeof Y[Wt].y>"u")return-1;Y[Wt].y=typeof Y[Wt].y=="number"?Y[Wt].y:0,Zi+=Math.abs(Y[Wt].y)}if(Zi===0)return-1;for(var Vt=xt[0]=0,Ge=0,oi,Ei,De=De-Fe,Vt=!1,Wt=0;Wt<Y.length;Wt++)Fe=Math.abs(Y[Wt].y)*wt/Zi,Vt?oi=Number(He.toFixed(3))==0?0:Fe/He:(Ei=Bi*Bi*De*De-4*Math.abs(Bi)*Fe,0>Ei?(Ei=He,Vt=(De+Ei)*(Xe-Ge)/2,Fe-=Vt,oi=Xe-Ge,Ge+=Xe-Ge,oi+=Ei==0?0:Fe/Ei,Ge+=Fe/Ei,Vt=!0):(oi=(Math.abs(Bi)*De-Math.sqrt(Ei))/2,Ei=De-2*oi/Math.abs(Bi),Ge+=oi,Ge>Xe&&(Ge-=oi,Ei=He,Vt=(De+Ei)*(Xe-Ge)/2,Fe-=Vt,oi=Xe-Ge,Ge+=Xe-Ge,oi+=Fe/Ei,Ge+=Fe/Ei,Vt=!0),De=Ei)),xt.push(oi);return xt}function o(){if(D&&Y){for(var Fe,De,He,xt,Xe,wt,Zi,Wt,Ge,oi,Ei,Vt,dt,yt,Qe,Xt,ni,Vi=[],Ji=[],hr={percent:null,total:null},qi=null,St=0;St<Y.length;St++)ni=Ye[St],ni=typeof ni.x5<"u"?(ni.y2+ni.y4)/2:(ni.y2+ni.y3)/2,ni=u(ni).x2+1,Vi[St]=ce-(isNaN(ni)?0:ni)-ft;ni=.5*ft;for(var St=0,au=Y.length-1;St<Y.length||0<=au;St++,au--)De=D.reversed?Y[au]:Y[St],Fe=De.color?De.color:D.reversed?D._colorSet[(Y.length-1-St)%D._colorSet.length]:D._colorSet[St%D._colorSet.length],He=De.indexLabelPlacement||D.indexLabelPlacement||"outside",Xt=De.indexLabelTextAlign||D.indexLabelTextAlign||"left",xt=De.indexLabelBackgroundColor||D.indexLabelBackgroundColor||(X?"transparent":null),Xe=De.indexLabelBorderColor||D.indexLabelBorderColor||(X?"transparent":null),wt=m(De.indexLabelBorderThickness)?D.indexLabelBorderThickness:De.indexLabelBorderThickness,Zi=De.indexLabelFontColor||D.indexLabelFontColor||"#979797",Wt=m(De.indexLabelFontSize)?D.indexLabelFontSize:De.indexLabelFontSize,Ge=De.indexLabelFontStyle||D.indexLabelFontStyle||"normal",oi=De.indexLabelFontFamily||D.indexLabelFontFamily||"arial",Ei=De.indexLabelFontWeight||D.indexLabelFontWeight||"normal",Fe=De.indexLabelLineColor||D.options.indexLabelLineColor||Fe,Vt=typeof De.indexLabelLineThickness=="number"?De.indexLabelLineThickness:typeof D.indexLabelLineThickness=="number"?D.indexLabelLineThickness:2,dt=De.indexLabelLineDashType||D.indexLabelLineDashType||"solid",yt=typeof De.indexLabelWrap<"u"?De.indexLabelWrap:typeof D.indexLabelWrap<"u"?D.indexLabelWrap:!0,Qe=D.dataPointIds[St],H._eventManager.objectMap[Qe]={id:Qe,objectType:"dataPoint",dataPointIndex:St,dataSeriesIndex:0,funnelSection:Ye[D.reversed?Y.length-1-St:St]},D.indexLabelPlacement==="inside"&&(Vi[St]=St!==jn?D.reversed?Ye[St].x2-Ye[St].x1:Ye[St].x3-Ye[St].x4:Ye[St].x3-Ye[St].x6,20>Vi[St]&&(Vi[St]=St!==jn&&D.reversed?Ye[St].x3-Ye[St].x4:Ye[St].x2-Ye[St].x1,Vi[St]/=2)),Qe=De.indexLabelMaxWidth?De.indexLabelMaxWidth:D.options.indexLabelMaxWidth?D.indexLabelMaxWidth:Vi[St],(Qe>Vi[St]||0>Qe)&&(Qe=Vi[St]),Ji[St]=D.indexLabelPlacement==="inside"?yt?Math.max(Ye[St].height,Wt):1.5*Wt:!1,hr=H.getPercentAndTotal(D,De),(D.indexLabelFormatter||De.indexLabelFormatter)&&(qi={chart:H.options,dataSeries:D,dataPoint:De,total:hr.total,percent:hr.percent}),De=De.indexLabelFormatter?De.indexLabelFormatter(qi):De.indexLabel?H.replaceKeywordsWithValue(De.indexLabel,De,D,St):D.indexLabelFormatter?D.indexLabelFormatter(qi):D.indexLabel?H.replaceKeywordsWithValue(D.indexLabel,De,D,St):De.label?De.label:"",0>=Vt&&(Vt=0),1e3>Qe&&1e3-Qe<ni&&(Qe+=1e3-Qe),m(D.options.indexLabelMaxWidth)&&(D.indexLabelMaxWidth=m(D.indexLabelMaxWidth)?Qe:Math.max(Qe,D.indexLabelMaxWidth)),we.roundRect||l(we),He=new ue(we,{fontSize:Wt,fontFamily:oi,fontColor:Zi,fontStyle:Ge,fontWeight:Ei,horizontalAlign:He,textAlign:Xt,backgroundColor:xt,borderColor:Xe,borderThickness:wt,maxWidth:Qe,maxHeight:Ji[St]===!1?yt?4.28571429*Wt:1.5*Wt:Ji[St],text:De,padding:ks,textBaseline:"middle"}),He.measureText(),He.height=He.height===2*He.padding?0:He.height,He.width=He.width===2*He.padding?0:He.width,Te.push({textBlock:He,id:D.reversed?au:St,isDirty:!1,lineColor:Fe,lineThickness:Vt,lineDashType:dt,height:He.height<He.maxHeight?He.height:He.maxHeight,width:He.width<He.maxWidth?He.width:He.maxWidth})}}function c(){var Fe,De,He,xt,Xe,wt=[];Xe=!1,He=0;for(var Zi,Wt=ce-Ft-ft/2,Wt=D.options.indexLabelMaxWidth?D.indexLabelMaxWidth>Wt?Wt:D.indexLabelMaxWidth:Wt,Ge=Te.length-1;0<=Ge;Ge--)Zi=Y[Te[Ge].id],He=Te[Ge],xt=He.textBlock,De=(Fe=C(Ge)<Ye.length?Te[C(Ge)]:null)?Fe.textBlock:null,He=He.height,Fe&&xt.y+He+ks>De.y&&(Xe=!0),He=Zi.indexLabelMaxWidth||Wt,(He>Wt||0>He)&&(He=Wt),wt.push(He);if(Xe)for(Ge=Te.length-1;0<=Ge;Ge--)Fe=Ye[Ge],Te[Ge].textBlock.maxWidth=wt[wt.length-(Ge+1)],Te[Ge].textBlock.measureText(),Te[Ge].textBlock.height=Te[Ge].textBlock.height===2*Te[Ge].textBlock.padding?0:Te[Ge].textBlock.height,Te[Ge].textBlock.width=Te[Ge].textBlock.width===2*Te[Ge].textBlock.padding?0:Te[Ge].textBlock.width,Te[Ge].textBlock.x=ce-Wt,He=Te[Ge].textBlock.height<Te[Ge].textBlock.maxHeight?Te[Ge].textBlock.height:Te[Ge].textBlock.maxHeight,Xe=Te[Ge].textBlock.width<Te[Ge].textBlock.maxWidth?Te[Ge].textBlock.width:Te[Ge].textBlock.maxWidth,Te[Ge].height=He,Te[Ge].width=Xe,He=typeof Fe.x5<"u"?(Fe.y2+Fe.y4)/2:(Fe.y2+Fe.y3)/2,Te[Ge].textBlock.y=He-Te[Ge].height/2,D.reversed?(Te[Ge].textBlock.y+Te[Ge].height>At+te&&(Te[Ge].textBlock.y=At+te-Te[Ge].height),Te[Ge].textBlock.y<bt-te&&(Te[Ge].textBlock.y=bt-te)):(Te[Ge].textBlock.y<At-te&&(Te[Ge].textBlock.y=At-te),Te[Ge].textBlock.y+Te[Ge].height>bt+te&&(Te[Ge].textBlock.y=bt+te-Te[Ge].height))}function x(){var Fe,De,He,xt;if(D.indexLabelPlacement!=="inside")for(var Xe=0;Xe<Ye.length;Xe++)Te[Xe].textBlock.text.length==0?Te[Xe].isDirty=!0:(Fe=Ye[Xe],He=typeof Fe.x5<"u"?(Fe.y2+Fe.y4)/2:(Fe.y2+Fe.y3)/2,De=D.reversed?typeof Fe.x5<"u"&&He>Ct?u(He).x2+1:(Fe.x2+Fe.x3)/2+1:typeof Fe.x5<"u"?He<Ct?u(He).x2+1:(Fe.x4+Fe.x3)/2+1:(Fe.x2+Fe.x3)/2+1,Te[Xe].textBlock.x=De+ft,Te[Xe].textBlock.y=He-Te[Xe].height/2,D.reversed?(Te[Xe].textBlock.y+Te[Xe].height>At+te&&(Te[Xe].textBlock.y=At+te-Te[Xe].height),Te[Xe].textBlock.y<bt-te&&(Te[Xe].textBlock.y=bt-te)):(Te[Xe].textBlock.y<At-te&&(Te[Xe].textBlock.y=At-te),Te[Xe].textBlock.y+Te[Xe].height>bt+te&&(Te[Xe].textBlock.y=bt+te-Te[Xe].height)));else for(Xe=0;Xe<Ye.length;Xe++)Te[Xe].textBlock.text.length==0?Te[Xe].isDirty=!0:(Fe=Ye[Xe],De=Fe.height,He=Te[Xe].height,xt=Te[Xe].width,De>=He?(De=Xe!=jn?(Fe.x4+Fe.x3)/2-xt/2:(Fe.x5+Fe.x4)/2-xt/2,He=Xe!=jn?(Fe.y1+Fe.y3)/2-He/2:(Fe.y1+Fe.y4)/2-He/2,Te[Xe].textBlock.x=De,Te[Xe].textBlock.y=He):Te[Xe].isDirty=!0)}function y(){function Fe(dt,yt){var Qe;if(0>dt||dt>=Te.length)return 0;var Xt,ni=Te[dt].textBlock;return 0>yt?(yt*=-1,Xt=b(dt),Qe=S(Xt,dt),Qe>=yt?(ni.y-=yt,yt):dt==0?(0<Qe&&(ni.y-=Qe),Qe):(Qe+=Fe(Xt,-(yt-Qe)),0<Qe&&(ni.y-=Qe),Qe)):(Xt=C(dt),Qe=S(dt,Xt),Qe>=yt?(ni.y+=yt,yt):dt==Ye.length-1?(0<Qe&&(ni.y+=Qe),Qe):(Qe+=Fe(Xt,yt-Qe),0<Qe&&(ni.y+=Qe),Qe))}function De(){var dt,yt,Qe,Xt,ni=0,Vi;Xt=(ee-le+2*te)/oi,Vi=oi;for(var Ji,hr=1;hr<Vi;hr++){Qe=hr*Xt;for(var qi=Te.length-1;0<=qi;qi--)!Te[qi].isDirty&&Te[qi].textBlock.y<Qe&&Te[qi].textBlock.y+Te[qi].height>Qe&&(Ji=C(qi),!(Ji>=Te.length-1)&&Te[qi].textBlock.y+Te[qi].height+ks>Te[Ji].textBlock.y&&(Te[qi].textBlock.y=Te[qi].textBlock.y+Te[qi].height-Qe>Qe-Te[qi].textBlock.y?Qe+1:Qe-Te[qi].height-1))}for(Ji=Ye.length-1;0<Ji;Ji--)if(!Te[Ji].isDirty){if(Qe=b(Ji),0>Qe&&(Qe=0,Te[Qe].isDirty))break;if(Te[Ji].textBlock.y<Te[Qe].textBlock.y+Te[Qe].height){for(yt=yt||Ji,Xt=Ji,Vi=0;Te[Xt].textBlock.y<Te[Qe].textBlock.y+Te[Qe].height+ks;){if(dt=dt||Te[Xt].textBlock.y+Te[Xt].height,Vi+=Te[Xt].height,Vi+=ks,Xt=Qe,0>=Xt){Xt=0,Vi+=Te[Xt].height;break}if(Qe=b(Xt),0>Qe){Xt=0,Vi+=Te[Xt].height;break}}if(Xt!=Ji){ni=Te[Xt].textBlock.y,dt-=ni,dt=Vi-dt,ni=He(dt,yt,Xt);break}}}return ni}function He(dt,yt,Qe){var Xt=[],ni=0,Vi=0;for(dt=Math.abs(dt);Qe<=yt;Qe++)Xt.push(Ye[Qe]);for(Xt.sort(function(Ji,hr){return Ji.height-hr.height}),Qe=0;Qe<Xt.length&&(yt=Xt[Qe],ni<dt);Qe++)Vi++,ni+=Te[yt.id].height+ks,Te[yt.id].textBlock.text="",Te[yt.id].indexLabelText="",Te[yt.id].isDirty=!0,Te[yt.id].textBlock.measureText();return Vi}for(var xt,Xe,wt,Zi,Wt,Ge,oi=1,Ei=0;Ei<2*oi;Ei++){for(var Vt=Te.length-1;0<=Vt&&(0<=b(Vt)&&b(Vt),wt=Te[Vt],Zi=wt.textBlock,Ge=(Wt=C(Vt)<Ye.length?Te[C(Vt)]:null)?Wt.textBlock:null,xt=+wt.height.toFixed(6),Xe=+Zi.y.toFixed(6),!(!wt.isDirty&&Wt&&Xe+xt+ks>+Ge.y.toFixed(6)&&(xt=Zi.y+xt+ks-Ge.y,Xe=Fe(Vt,-xt),Xe<xt&&(0<Xe&&(xt-=Xe),Xe=Fe(C(Vt),xt),Xe!=xt))));Vt--);De()}}function S(Fe,De){return(De<Ye.length?Te[De].textBlock.y:D.reversed?At+te:bt+te)-(0>Fe?D.reversed?bt-te:At-te:Te[Fe].textBlock.y+Te[Fe].height+ks)}function E(Fe,De,He){var xt,Xe,wt,Zi=[],Wt=te,Ge=[];if(De!==-1&&(0<=Li.indexOf(De)?(Xe=Li.indexOf(De),Li.splice(Xe,1)):(Li.push(De),Li=Li.sort(function(Vt,dt){return Vt-dt}))),Li.length===0)Zi=bo;else{Xe=te*(Li.length!=1||Li[0]!=0&&Li[0]!=Ye.length-1?2:1)/w();for(var oi=0;oi<Ye.length;oi++){if(Li.length==1&&Li[0]==0){if(oi===0){Zi.push(bo[oi]),xt=Wt;continue}}else oi===0&&(xt=-1*Wt);Zi.push(bo[oi]+xt),(0<=Li.indexOf(oi)||oi<Ye.length&&0<=Li.indexOf(oi+1))&&(xt+=Xe)}}wt=function(){for(var Vt=[],dt=0;dt<Ye.length;dt++)Vt.push(Zi[dt]-Ye[dt].y1);return Vt}();var Ei={startTime:new Date().getTime(),duration:He||500,easingFunction:function(Vt,dt,yt,Qe){return xe.easing.easeOutQuart(Vt,dt,yt,Qe)},changeSection:function(Vt){for(var dt,yt,Qe=0;Qe<Ye.length;Qe++)dt=wt[Qe],yt=Ye[Qe],dt*=Vt,typeof Ge[Qe]>"u"&&(Ge[Qe]=0),0>Ge&&(Ge*=-1),yt.y1+=dt-Ge[Qe],yt.y2+=dt-Ge[Qe],yt.y3+=dt-Ge[Qe],yt.y4+=dt-Ge[Qe],yt.y5&&(yt.y5+=dt-Ge[Qe],yt.y6+=dt-Ge[Qe]),Ge[Qe]=dt}};Fe._animator.animate(0,He,function(Vt){var dt=Fe.plotArea.ctx||Fe.ctx;Kl=!0,dt.clearRect(O.x1,O.y1,O.x2-O.x1,O.y2-O.y1),dt.fillStyle=Fe.backgroundColor,dt.fillRect(O.x1,O.y1,O.width,O.height),Ei.changeSection(Vt,De);var yt={};for(yt.dataSeries=D,yt.dataPoint=D.reversed?D.dataPoints[Y.length-1-De]:D.dataPoints[De],yt.index=D.reversed?Y.length-1-De:De,Fe.toolTip.highlightObjects([yt]),yt=0;yt<Ye.length;yt++)ye(dt,Ye[yt],D.fillOpacity);V(dt),he&&(D.indexLabelPlacement!=="inside"?v(dt):x(),I(dt)),1<=Vt&&(Kl=!1)},null,xe.easing.easeOutQuart)}function w(){for(var Fe=0,De=0;De<Ye.length-1;De++)(0<=Li.indexOf(De)||0<=Li.indexOf(De+1))&&Fe++;return Fe}function v(Fe){for(var De,He,xt,Xe,wt=0;wt<Ye.length;wt++)Xe=Te[wt].lineThickness%2===1?.5:0,He=((Ye[wt].y2+Ye[wt].y4)/2<<0)+Xe,De=u(He).x2-1,isNaN(De)&&Math.round(Ye[wt].x1)===Math.round(Ye[wt].x4)&&Math.round(Ye[wt].x2)===Math.round(Ye[wt].x3)&&(De=Ye[wt].x2),xt=Te[wt].textBlock.x,Xe=(Te[wt].textBlock.y+Te[wt].height/2<<0)+Xe,Te[wt].isDirty||Te[wt].lineThickness==0||(Fe.strokeStyle=Te[wt].lineColor,Fe.lineWidth=Te[wt].lineThickness,Fe.setLineDash&&Fe.setLineDash(P(Te[wt].lineDashType,Te[wt].lineThickness)),Fe.beginPath(),Fe.moveTo(De,He),Fe.lineTo(xt,Xe),Fe.stroke())}function b(Fe){for(Fe-=1;-1<=Fe&&Fe!=-1&&Te[Fe].isDirty;Fe--);return Fe}function C(Fe){for(Fe+=1;Fe<=Ye.length&&Fe!=Ye.length&&Te[Fe].isDirty;Fe++);return Fe}function u(Fe){for(var De,He=0;He<Y.length;He++)if(Ye[He].y1<Fe&&Ye[He].y4>Fe){De=Ye[He];break}return De?(Fe=De.y6&&Fe>De.y6?De.x3+(De.x4-De.x3)/(De.y4-De.y3)*(Fe-De.y3):De.x2+(De.x3-De.x2)/(De.y3-De.y2)*(Fe-De.y2),{x1:Fe,x2:Fe}):-1}function I(Fe){for(var De=0;De<Ye.length;De++)Te[De].isDirty||(Fe&&(Te[De].textBlock.ctx=Fe),Te[De].textBlock.y+=Te[De].textBlock._lineHeight/2,Te[De].textBlock.render(!0),Te[De].textBlock.y-=Te[De].textBlock._lineHeight/2)}function V(Fe){if(H.plotArea.layoutManager.reset(),Fe.roundRect||l(Fe),H.title&&(H.title.dockInsidePlotArea||H.title.horizontalAlign==="center"&&H.title.verticalAlign==="center")&&(H.title.ctx=Fe,H.title.render()),H.subtitles)for(var De=0;De<H.subtitles.length;De++){var He=H.subtitles[De];(He.dockInsidePlotArea||He.horizontalAlign==="center"&&He.verticalAlign==="center")&&(H.subtitles.ctx=Fe,He.render())}H.legend&&(H.legend.dockInsidePlotArea||H.legend.horizontalAlign==="center"&&H.legend.verticalAlign==="center")&&(H.legend.ctx=Fe,H.legend.setLayout(),H.legend.render()),Be.fNg&&Be.fNg(H)}var H=this;if(!(0>=r.dataSeriesIndexes.length)){for(var D=this.data[r.dataSeriesIndexes[0]],Y=D.dataPoints,O=this.plotArea,te=.025*O.width,ie=.01*O.width,J=0,be=O.height-2*te,Me=Math.min(O.width-2*ie,2.8*O.height),he=!1,de=0;de<Y.length;de++)!he&&typeof Y[de].indexLabel<"u"&&Y[de].indexLabel!==null&&0<Y[de].indexLabel.toString().length&&(he=!0),!he&&typeof Y[de].label<"u"&&Y[de].label!==null&&0<Y[de].label.toString().length&&(he=!0),(!he&&typeof D.indexLabelFormatter=="function"||typeof Y[de].indexLabelFormatter=="function")&&(he=!0);he=he||typeof D.indexLabel<"u"&&D.indexLabel!==null&&0<D.indexLabel.toString().length,D.indexLabelPlacement!=="inside"&&he||(ie=(O.width-.75*Me)/2);var de=O.x1+ie,ce=O.x2-ie,le=O.y1+te,ee=O.y2-te,we=r.targetCanvasCtx||this.plotArea.ctx||this.ctx;if(D.length!=0&&D.dataPoints&&D.visible&&Y.length!==0){var Ae,ne;r=75*Me/100;var ft=30*(ce-r)/100;D.type==="funnel"?(Ae=m(D.options.neckHeight)?.35*be:D.neckHeight,ne=m(D.options.neckWidth)?.25*r:D.neckWidth,typeof Ae=="string"&&Ae.match(/%$/)?(Ae=parseInt(Ae),Ae=Ae*be/100):Ae=parseInt(Ae),typeof ne=="string"&&ne.match(/%$/)?(ne=parseInt(ne),ne=ne*r/100):ne=parseInt(ne),Ae>be?Ae=be:0>=Ae&&(Ae=0),ne>r?ne=r-.5:0>=ne&&(ne=0)):D.type==="pyramid"&&(ne=Ae=0,D.reversed=!D.reversed);var ie=de+r/2,gt=de,Ft=de+r,At=D.reversed?ee:le,Ke=ie-ne/2,ai=ie+ne/2,Ct=D.reversed?le+Ae:ee-Ae,bt=D.reversed?le:ee;ne=D.valueRepresents=D.valueRepresents?D.valueRepresents:"height",de=[],r=[];var Ye=[],ie=[],Jt=le,jn,Bi=(Ct-At)/(Ke-gt),Ys=-Bi,Me=ne==="area"?h():d();if(Me!==-1){if(D.reversed)for(ie.push(Jt),ne=Me.length-1;0<ne;ne--)Jt+=Me[ne],ie.push(Math.round(Jt));else for(ne=0;ne<Me.length;ne++)Jt+=Me[ne],ie.push(Math.round(Jt));if(D.reversed)for(ne=0;ne<Me.length;ne++)ie[ne]<Ct?(de.push(Ke),r.push(ai),jn=ne):(de.push((ie[ne]-At+Bi*gt)/Bi),r.push((ie[ne]-At+Ys*Ft)/Ys));else for(ne=0;ne<Me.length;ne++)ie[ne]<Ct?(de.push((ie[ne]-At+Bi*gt)/Bi),r.push((ie[ne]-At+Ys*Ft)/Ys),jn=ne):(de.push(Ke),r.push(ai));for(ne=0;ne<Me.length-1;ne++)Jt=D.reversed?Y[Y.length-1-ne].color?Y[Y.length-1-ne].color:D._colorSet[(Y.length-1-ne)%D._colorSet.length]:Y[ne].color?Y[ne].color:D._colorSet[ne%D._colorSet.length],ne===jn?Ye.push({x1:de[ne],y1:ie[ne],x2:r[ne],y2:ie[ne],x3:ai,y3:Ct,x4:r[ne+1],y4:ie[ne+1],x5:de[ne+1],y5:ie[ne+1],x6:Ke,y6:Ct,id:ne,height:ie[ne+1]-ie[ne],color:Jt}):Ye.push({x1:de[ne],y1:ie[ne],x2:r[ne],y2:ie[ne],x3:r[ne+1],y3:ie[ne+1],x4:de[ne+1],y4:ie[ne+1],id:ne,height:ie[ne+1]-ie[ne],color:Jt}),D.dataPointEOs[ne]&&Ye[ne]&&(D.dataPointEOs[ne].sectionsofFunnel=Ye[ne]);var ks=2,Te=[],Kl=!1,Li=[],bo=[],de=!1;for(r=r=0,k(Li),ne=0;ne<Y.length;ne++)Y[ne].exploded&&(de=!0,D.reversed?Li.push(Y.length-1-ne):Li.push(ne));if(we.clearRect(O.x1,O.y1,O.width,O.height),we.fillStyle=H.backgroundColor,we.fillRect(O.x1,O.y1,O.width,O.height),he&&D.visible&&(o(),x(),D.indexLabelPlacement!=="inside")){for(c(),y(),ne=0;ne<Y.length;ne++)Te[ne].isDirty||(r=Te[ne].textBlock.x+Te[ne].width,r=(ce-r)/2,ne==0&&(J=r),J>r&&(J=r));for(ne=0;ne<Ye.length;ne++)Ye[ne].x1+=J,Ye[ne].x2+=J,Ye[ne].x3+=J,Ye[ne].x4+=J,Ye[ne].x5&&(Ye[ne].x5+=J,Ye[ne].x6+=J),Te[ne].textBlock.x+=J}for(ne=0;ne<Ye.length;ne++)J=Ye[ne],ye(we,J,D.fillOpacity),bo.push(J.y1);if(V(we),he&&D.visible&&(D.indexLabelPlacement==="inside"||H.animationEnabled||v(we),H.animationEnabled||I()),!he)for(ne=0;ne<Y.length;ne++)J=D.dataPointIds[ne],r={id:J,objectType:"dataPoint",dataPointIndex:ne,dataSeriesIndex:0,funnelSection:Ye[D.reversed?Y.length-1-ne:ne]},H._eventManager.objectMap[J]=r;return(!H.animationEnabled&&de||H.animationEnabled&&!H.animatedRender)&&E(H,-1,0),this.funnelPyramidClickHandler=function(xt){var Xe=-1;!Kl&&!H.isAnimating&&(m(xt.dataSeries.explodeOnClick)||xt.dataSeries.explodeOnClick)&&(Xe=D.reversed?Y.length-1-xt.dataPointIndex:xt.dataPointIndex,0<=Xe)&&(xt=Xe,(D.type==="funnel"||D.type==="pyramid")&&(D.reversed?Y[Y.length-1-xt].exploded=!Y[Y.length-1-xt].exploded:Y[xt].exploded=!Y[xt].exploded),E(H,Xe,500))},{source:we,dest:this.plotArea.ctx,animationCallback:function(xt,Xe){xe.fadeInAnimation(xt,Xe),1<=xt&&(E(H,-1,500),V(H.plotArea.ctx||H.ctx))},easingFunction:xe.easing.easeInQuad,animationBase:0}}}}},j.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r){window.setTimeout(r,1e3/60)}}(),j.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,j.prototype.set=function(r,d,h){h=typeof h>"u"?!0:h,r==="options"?(this.options=d,h&&this.render()):j.base.set.call(this,r,d,h)},j.prototype.exportChart=function(r){r=typeof r>"u"?{}:r;var d=r.format?r.format:"png",h=r.fileName?r.fileName:this.exportFileName;if(r.toDataURL)return this.canvas.toDataURL("image/"+d);var o=this.canvas;if(o&&d&&h){h=h+"."+d,r="image/"+d;var o=o.toDataURL(r),c=!1,x=document.createElement("a");if(x.download=h,x.href=o,typeof Blob<"u"&&new Blob){for(var y=o.replace(/^data:[a-z\/]*;base64,/,""),y=atob(y),S=new ArrayBuffer(y.length),S=new Uint8Array(S),E=0;E<y.length;E++)S[E]=y.charCodeAt(E);d=new Blob([S.buffer],{type:"image/"+d});try{window.navigator.msSaveBlob(d,h),c=!0}catch{x.dataset.downloadurl=[r,x.download,x.href].join(":"),x.href=window.URL.createObjectURL(d)}}if(!c)try{event=document.createEvent("MouseEvents"),event.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),x.dispatchEvent?x.dispatchEvent(event):x.fireEvent&&x.fireEvent("onclick")}catch{d=window.open(),d.document.write("<img src='"+o+"'></img><div>Please right click on the image and save it to your device</div>"),d.document.close()}}},j.prototype.print=function(){var r=this.exportChart({toDataURL:!0}),d=document.createElement("iframe");d.setAttribute("class","canvasjs-chart-print-frame"),R(d,{position:"absolute",width:"100%",border:"0px",margin:"0px 0px 0px 0px",padding:"0px 0px 0px 0px"}),d.style.height=this.height+"px",this._canvasJSContainer.appendChild(d);var h=this,o=d.contentWindow||d.contentDocument.document||d.contentDocument;o.document.open(),o.document.write(`<!DOCTYPE HTML>
<html><body><img src="`+r+'"/><body/></html>'),o.document.body&&o.document.body.style&&(o.document.body.style.margin="0px 0px 0px 0px",o.document.body.style.padding="0px 0px 0px 0px"),o.document.close(),setTimeout(function(){o.focus(),o.print(),setTimeout(function(){h._canvasJSContainer.removeChild(d)},1e3)},500)},j.prototype.getPercentAndTotal=function(r,d){var h=null,o=null,c=h=null;if(0<=r.type.indexOf("stacked"))o=0,h=d.x.getTime?d.x.getTime():d.x,h in r.plotUnit.yTotals&&(o=r.plotUnit.yTotals[h],h=r.plotUnit.yAbsTotals[h],c=isNaN(d.y)||h===0?0:100*(d.y/h));else if(r.type==="pie"||r.type==="doughnut"||r.type==="funnel"||r.type==="pyramid"){for(h=o=0;h<r.dataPoints.length;h++)isNaN(r.dataPoints[h].y)||(o+=r.dataPoints[h].y);c=isNaN(d.y)?0:100*(d.y/o)}return{percent:c,total:o}},j.prototype.replaceKeywordsWithValue=function(r,d,h,o,c){var x=this;if(c=typeof c>"u"?0:c,(0<=h.type.indexOf("stacked")||h.type==="pie"||h.type==="doughnut"||h.type==="funnel"||h.type==="pyramid")&&(0<=r.indexOf("#percent")||0<=r.indexOf("#total"))){var E="#percent",S="#total",y=this.getPercentAndTotal(h,d),S=isNaN(y.total)?S:y.total,E=isNaN(y.percent)?E:y.percent;do{if(y="",h.percentFormatString)y=h.percentFormatString;else{var y="#,##0.",w=Math.max(Math.ceil(Math.log(1/Math.abs(E))/Math.LN10),2);(isNaN(w)||!isFinite(w))&&(w=2);for(var v=0;v<w;v++)y+="#";h.percentFormatString=y}r=r.replace("#percent",Nt(E,y,x._cultureInfo)),r=r.replace("#total",Nt(S,h.yValueFormatString?h.yValueFormatString:"#,##0.########",x._cultureInfo))}while(0<=r.indexOf("#percent")||0<=r.indexOf("#total"))}return r.replace(/\{.*?\}|"[^"]*"|'[^']*'/g,function(b){if(b[0]==='"'&&b[b.length-1]==='"'||b[0]==="'"&&b[b.length-1]==="'")return b.slice(1,b.length-1);b=a(b.slice(1,b.length-1)),b=b.replace("#index",c);var C=null;try{var u=b.match(/(.*?)\s*\[\s*(.*?)\s*\]/);u&&0<u.length&&(C=a(u[2]),b=a(u[1]))}catch{}if(u=null,b==="color")return h.type==="waterfall"?d.color?d.color:0<d.y?h.risingColor:h.fallingColor:h.type==="error"?h.color?h.color:h._colorSet[C%h._colorSet.length]:d.color?d.color:h.color?h.color:h._colorSet[o%h._colorSet.length];if(d.hasOwnProperty(b))u=d;else if(h.hasOwnProperty(b))u=h;else return"";return u=u[b],C!==null&&(u=u[C]),b==="x"?(h.axisX&&h.axisX.valueType==="dateTime"||h.xValueType==="dateTime"||d.x&&d.x.getTime)&&!h.axisX.logarithmic?Qi(u,d.xValueFormatString?d.xValueFormatString:h.xValueFormatString?h.xValueFormatString:h.xValueFormatString=x.axisX&&x.axisX.autoValueFormatString?x.axisX.autoValueFormatString:"DD MMM YY",x._cultureInfo):Nt(u,d.xValueFormatString?d.xValueFormatString:h.xValueFormatString?h.xValueFormatString:h.xValueFormatString="#,##0.########",x._cultureInfo):b==="y"?Nt(u,d.yValueFormatString?d.yValueFormatString:h.yValueFormatString?h.yValueFormatString:h.yValueFormatString="#,##0.########",x._cultureInfo):b==="z"?Nt(u,d.zValueFormatString?d.zValueFormatString:h.zValueFormatString?h.zValueFormatString:h.zValueFormatString="#,##0.########",x._cultureInfo):u})},e(Re,se),Re.prototype.setLayout=function(){var r=this.dockInsidePlotArea?this.chart.plotArea:this.chart,d=r.layoutManager.getFreeSpace(),h=null,o=0,c=0,x=0,y=0,S=this.markerMargin=this.chart.options.legend&&!m(this.chart.options.legend.markerMargin)?this.chart.options.legend.markerMargin:.3*this.fontSize;this.height=0;var E=[],w=[];this.verticalAlign==="top"||this.verticalAlign==="bottom"?(this.orientation="horizontal",h=this.verticalAlign,x=this.maxWidth=this.maxWidth!==null?this.maxWidth:d.width,y=this.maxHeight=this.maxHeight!==null?this.maxHeight:.5*d.height):this.verticalAlign==="center"&&(this.orientation="vertical",(this.horizontalAlign==="left"||this.horizontalAlign==="center"||this.horizontalAlign==="right")&&(h=this.horizontalAlign),x=this.maxWidth=this.maxWidth!==null?this.maxWidth:.5*d.width,y=this.maxHeight=this.maxHeight!==null?this.maxHeight:d.height),this.errorMarkerColor=[];for(var v=0;v<this.dataSeries.length;v++){var b=this.dataSeries[v];if(b.dataPoints&&b.dataPoints.length){if(b.type!=="pie"&&b.type!=="doughnut"&&b.type!=="funnel"&&b.type!=="pyramid"){var C=b.legendMarkerType=b.legendMarkerType?b.legendMarkerType:b.type!=="line"&&b.type!=="stepLine"&&b.type!=="spline"&&b.type!=="scatter"&&b.type!=="bubble"||!b.markerType?b.type==="error"&&b._linkedSeries?b._linkedSeries.legendMarkerType?b._linkedSeries.legendMarkerType:je.getDefaultLegendMarker(b._linkedSeries.type):je.getDefaultLegendMarker(b.type):b.markerType,u=b.legendText?b.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:b,dataPoint:null}):b.name,I=b.legendMarkerColor=b.legendMarkerColor?b.legendMarkerColor:b.markerColor?b.markerColor:b.type==="error"?m(b.whiskerColor)?b._colorSet[0]:b.whiskerColor:b._colorSet[0],V=b.markerSize||b.type!=="line"&&b.type!=="stepLine"&&b.type!=="spline"?.75*this.lineHeight:0,H=b.legendMarkerBorderColor?b.legendMarkerBorderColor:b.markerBorderColor,D=b.legendMarkerBorderThickness?b.legendMarkerBorderThickness:b.markerBorderThickness?Math.max(1,Math.round(.2*V)):0;b.type==="error"&&this.errorMarkerColor.push(I),u=b.legendText=this.chart.replaceKeywordsWithValue(u,b.dataPoints[0],b,v),C={markerType:C,markerColor:I,text:u,textBlock:null,chartType:b.type,markerSize:V,lineColor:b._colorSet[0],dataSeriesIndex:b.index,dataPointIndex:null,markerBorderColor:H,markerBorderThickness:D},E.push(C)}else for(var Y=0;Y<b.dataPoints.length;Y++){var O=b.dataPoints[Y],C=O.legendMarkerType?O.legendMarkerType:b.legendMarkerType?b.legendMarkerType:je.getDefaultLegendMarker(b.type),u=O.legendText?O.legendText:b.legendText?b.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:b,dataPoint:O}):O.name?O.name:"DataPoint: "+(Y+1),I=O.legendMarkerColor?O.legendMarkerColor:b.legendMarkerColor?b.legendMarkerColor:O.color?O.color:b.color?b.color:b._colorSet[Y%b._colorSet.length],V=.75*this.lineHeight,H=O.legendMarkerBorderColor?O.legendMarkerBorderColor:b.legendMarkerBorderColor?b.legendMarkerBorderColor:O.markerBorderColor?O.markerBorderColor:b.markerBorderColor,D=O.legendMarkerBorderThickness?O.legendMarkerBorderThickness:b.legendMarkerBorderThickness?b.legendMarkerBorderThickness:O.markerBorderThickness||b.markerBorderThickness?Math.max(1,Math.round(.2*V)):0,u=this.chart.replaceKeywordsWithValue(u,O,b,Y),C={markerType:C,markerColor:I,text:u,textBlock:null,chartType:b.type,markerSize:V,dataSeriesIndex:v,dataPointIndex:Y,markerBorderColor:H,markerBorderThickness:D};(O.showInLegend||b.showInLegend&&O.showInLegend!==!1)&&E.push(C)}m(b.legendText)&&(b.legendText=b.name)}}if(this.reversed===!0&&E.reverse(),0<E.length){for(b=null,u=O=Y=0,O=this.itemWidth!==null?this.itemMaxWidth!==null?Math.min(this.itemWidth,this.itemMaxWidth,x):this.itemMaxWidth=Math.min(this.itemWidth,x):this.itemMaxWidth!==null?Math.min(this.itemMaxWidth,x):this.itemMaxWidth=x,V=V===0?.75*this.lineHeight:V,O=(this.itemMaxWidth?this.itemMaxWidth:O)-(V+S),v=0;v<E.length;v++)C=E[v],I=O,(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine")&&(I-=2*.1*this.lineHeight),0>=y||typeof y>"u"||0>=I||typeof I>"u"||(this.orientation==="horizontal"?(C.textBlock=new ue(this.ctx,{x:0,y:0,maxWidth:I,maxHeight:this.itemWrap?y:this.lineHeight,angle:0,text:C.text,textAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),C.textBlock.measureText(),this.itemWidth!==null&&(C.textBlock.width=this.itemWidth-(V+S+(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine"?2*.1*this.lineHeight:0))),(!b||b.width+Math.round(C.textBlock.width+V+S+(b.width===0?0:this.horizontalSpacing)+(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine"?2*.1*this.lineHeight:0))>x)&&(b={items:[],width:0},w.push(b),this.height+=u,u=0),u=Math.max(u,C.textBlock.height?C.textBlock.height:this.lineHeight),C.textBlock.x=b.width,C.textBlock.y=0,b.width+=Math.round(C.textBlock.width+V+S+(b.width===0?0:this.horizontalSpacing)+(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine"?2*.1*this.lineHeight:0)),b.items.push(C),this.width=Math.max(b.width,this.width)):(C.textBlock=new ue(this.ctx,{x:0,y:0,maxWidth:O,maxHeight:this.itemWrap===!0?y:1.5*this.fontSize,angle:0,text:C.text,textAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),C.textBlock.measureText(),this.itemWidth!==null&&(C.textBlock.width=this.itemWidth-(V+S+(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine"?2*.1*this.lineHeight:0))),this.height<y-this.lineHeight?(b={items:[],width:0},w.push(b)):(b=w[Y],Y=(Y+1)%w.length),b&&(this.height+=C.textBlock.height?C.textBlock.height:this.lineHeight,C.textBlock.x=b.width,C.textBlock.y=0,b.width+=Math.round(C.textBlock.width+V+S+(b.width===0?0:this.horizontalSpacing)+(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine"?2*.1*this.lineHeight:0)),b.items.push(C),this.width=Math.max(b.width,this.width))));this.height=this.itemWrap===!1?w.length*this.lineHeight:this.height+u,this.height=Math.min(y,this.height),this.width=Math.min(x,this.width)}for(this.verticalAlign==="top"?(c=this.horizontalAlign==="left"?d.x1:this.horizontalAlign==="right"?d.x2-this.width:d.x1+d.width/2-this.width/2,o=d.y1):this.verticalAlign==="center"?(c=this.horizontalAlign==="left"?d.x1:this.horizontalAlign==="right"?d.x2-this.width:d.x1+d.width/2-this.width/2,o=d.y1+d.height/2-this.height/2):this.verticalAlign==="bottom"&&(c=this.horizontalAlign==="left"?d.x1:this.horizontalAlign==="right"?d.x2-this.width:d.x1+d.width/2-this.width/2,o=d.y2-this.height),this.items=E,v=0;v<this.items.length;v++)C=E[v],C.id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[C.id]={id:C.id,objectType:"legendItem",legendItemIndex:v,dataSeriesIndex:C.dataSeriesIndex,dataPointIndex:C.dataPointIndex};this.markerSize=V,this.rows=w,0<E.length&&r.layoutManager.registerSpace(h,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:c,y1:o,x2:c+this.width,y2:o+this.height}},Re.prototype.render=function(){var r=this.bounds.x1,d=this.bounds.y1,h=this.markerMargin,o=this.maxWidth,c=this.maxHeight,x=this.markerSize,y=this.rows;(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(r,d,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor);for(var S=0,E=0;E<y.length;E++){for(var w=y[E],v=0,b=0;b<w.items.length;b++){var C=w.items[b],u=C.textBlock.x+r+(b===0?.2*x:this.horizontalSpacing),I=d+S,V=u;if(this.chart.data[C.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(r,d,o,Math.max(c-c%this.lineHeight,0)),this.ctx.clip(),(C.chartType==="line"||C.chartType==="stepLine"||C.chartType==="spline")&&(this.ctx.strokeStyle=C.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(u-.1*this.lineHeight,I+this.lineHeight/2),this.ctx.lineTo(u+.85*this.lineHeight,I+this.lineHeight/2),this.ctx.stroke(),V-=.1*this.lineHeight),C.chartType==="error"){this.ctx.strokeStyle=this.errorMarkerColor[0],this.ctx.lineWidth=x/8,this.ctx.beginPath();var H=u-.08*this.lineHeight+.1*this.lineHeight,D=I+.15*this.lineHeight,Y=.7*this.lineHeight,O=Y+.02*this.lineHeight;this.ctx.moveTo(H,D),this.ctx.lineTo(H+Y,D),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(H+Y/2,D),this.ctx.lineTo(H+Y/2,D+O),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(H,D+O),this.ctx.lineTo(H+Y,D+O),this.ctx.stroke(),this.errorMarkerColor.shift()}Ve.drawMarker(u+x/2,I+this.lineHeight/2,this.ctx,C.markerType,C.chartType==="error"||C.chartType==="line"||C.chartType==="spline"?C.markerSize/2:C.markerSize,C.markerColor,C.markerBorderColor,C.markerBorderThickness),C.textBlock.x=u+h+x,(C.chartType==="line"||C.chartType==="stepLine"||C.chartType==="spline")&&(C.textBlock.x+=.1*this.lineHeight),C.textBlock.y=Math.round(I+this.lineHeight/2),C.textBlock.render(!0),this.ctx.restore(),v=0<b?Math.max(v,C.textBlock.height?C.textBlock.height:this.lineHeight):C.textBlock.height?C.textBlock.height:this.lineHeight,this.chart.data[C.dataSeriesIndex].visible||(this.ctx.globalAlpha=1),u=f(C.id),this.ghostCtx.fillStyle=u,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(V,C.textBlock.y-this.lineHeight/2,C.textBlock.x+C.textBlock.width-V,C.textBlock.height?C.textBlock.height:this.lineHeight),C.x1=this.chart._eventManager.objectMap[C.id].x1=V,C.y1=this.chart._eventManager.objectMap[C.id].y1=C.textBlock.y-this.lineHeight/2,C.x2=this.chart._eventManager.objectMap[C.id].x2=C.textBlock.x+C.textBlock.width,C.y2=this.chart._eventManager.objectMap[C.id].y2=C.textBlock.y+(C.textBlock.height?C.textBlock.height:this.lineHeight)-this.lineHeight/2}S+=v}},e(je,se),je.prototype.getDefaultAxisPlacement=function(){var r=this.type;return r==="column"||r==="line"||r==="stepLine"||r==="spline"||r==="area"||r==="stepArea"||r==="splineArea"||r==="stackedColumn"||r==="stackedLine"||r==="bubble"||r==="scatter"||r==="stackedArea"||r==="stackedColumn100"||r==="stackedLine100"||r==="stackedArea100"||r==="candlestick"||r==="ohlc"||r==="rangeColumn"||r==="rangeArea"||r==="rangeSplineArea"||r==="boxAndWhisker"||r==="waterfall"?"normal":r==="bar"||r==="stackedBar"||r==="stackedBar100"||r==="rangeBar"?"xySwapped":r==="pie"||r==="doughnut"||r==="funnel"||r==="pyramid"?"none":(r!=="error"&&window.console.log("Unknown Chart Type: "+r),null)},je.getDefaultLegendMarker=function(r){return r==="column"||r==="stackedColumn"||r==="stackedLine"||r==="bar"||r==="stackedBar"||r==="stackedBar100"||r==="bubble"||r==="scatter"||r==="stackedColumn100"||r==="stackedLine100"||r==="stepArea"||r==="candlestick"||r==="ohlc"||r==="rangeColumn"||r==="rangeBar"||r==="rangeArea"||r==="rangeSplineArea"||r==="boxAndWhisker"||r==="waterfall"?"square":r==="line"||r==="stepLine"||r==="spline"||r==="pie"||r==="doughnut"?"circle":r==="area"||r==="splineArea"||r==="stackedArea"||r==="stackedArea100"||r==="funnel"||r==="pyramid"?"triangle":r==="error"?"none":(window.console.log("Unknown Chart Type: "+r),null)},je.prototype.getDataPointAtX=function(r,d){if(!this.dataPoints||this.dataPoints.length===0)return null;var h={dataPoint:null,distance:1/0,index:NaN},o=null,c=0,x=0,y=1,S=1/0,E=0,w=0,v=0;for(this.chart.plotInfo.axisPlacement!=="none"&&(this.axisX.logarithmic?(v=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x),v=1<v?Math.min(Math.max((this.dataPoints.length-1)/v*Math.log(r/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0):(v=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,v=0<v?Math.min(Math.max((this.dataPoints.length-1)/v*(r-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0));;){if(x=0<y?v+c:v-c,0<=x&&x<this.dataPoints.length){var o=this.dataPoints[x],b=this.axisX&&this.axisX.logarithmic?o.x>r?o.x/r:r/o.x:Math.abs(o.x-r);if(b<h.distance&&(h.dataPoint=o,h.distance=b,h.index=x),o=b,o<=S?S=o:0<y?E++:w++,1e3<E&&1e3<w)break}else if(0>v-c&&v+c>=this.dataPoints.length)break;y===-1?(c++,y=1):y=-1}return d||(h.dataPoint.x.getTime?h.dataPoint.x.getTime():h.dataPoint.x)!==(r.getTime?r.getTime():r)?d&&h.dataPoint!==null?h:null:h},je.prototype.getDataPointAtXY=function(r,d,h){if(!this.dataPoints||this.dataPoints.length===0||r<this.chart.plotArea.x1||r>this.chart.plotArea.x2||d<this.chart.plotArea.y1||d>this.chart.plotArea.y2)return null;h=h||!1;var o=[],c=0,x=0,y=1,S=!1,E=1/0,w=0,v=0,C=0;if(this.chart.plotInfo.axisPlacement!=="none")if(C=(this.chart.axisX[0]?this.chart.axisX[0]:this.chart.axisX2[0]).getXValueAt({x:r,y:d}),this.axisX.logarithmic)var b=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x),C=1<b?Math.min(Math.max((this.dataPoints.length-1)/b*Math.log(C/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0;else b=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,C=0<b?Math.min(Math.max((this.dataPoints.length-1)/b*(C-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0;for(;;){if(x=0<y?C+c:C-c,0<=x&&x<this.dataPoints.length){var b=this.chart._eventManager.objectMap[this.dataPointIds[x]],u=this.dataPoints[x],I=null;if(b){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":case"rangeColumn":case"rangeBar":case"waterfall":case"error":r>=b.x1&&r<=b.x2&&d>=b.y1&&d<=b.y2&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y1-d),Math.abs(b.y2-d))}),S=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var V=M("markerSize",u,this)||4,H=h?20:V,I=Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y1-d,2));I<=H&&o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:I}),b=Math.abs(b.x1-r),b<=E?E=b:0<y?w++:v++,I<=V/2&&(S=!0);break;case"rangeArea":case"rangeSplineArea":V=M("markerSize",u,this)||4,H=h?20:V,I=Math.min(Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y1-d,2)),Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y2-d,2))),I<=H&&o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:I}),b=Math.abs(b.x1-r),b<=E?E=b:0<y?w++:v++,I<=V/2&&(S=!0);break;case"bubble":V=b.size,I=Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y1-d,2)),I<=V/2&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:I}),S=!0);break;case"pie":case"doughnut":V=b.center,H=this.type==="doughnut"?b.percentInnerRadius*b.radius:0,I=Math.sqrt(Math.pow(V.x-r,2)+Math.pow(V.y-d,2)),I<b.radius&&I>H&&(I=Math.atan2(d-V.y,r-V.x),0>I&&(I+=2*Math.PI),I=Number(((180*(I/Math.PI)%360+360)%360).toFixed(12)),V=Number(((180*(b.startAngle/Math.PI)%360+360)%360).toFixed(12)),H=Number(((180*(b.endAngle/Math.PI)%360+360)%360).toFixed(12)),H===0&&1<b.endAngle&&(H=360),V>=H&&u.y!==0&&!m(u.y)&&(H+=360,I<V&&(I+=360)),I>V&&I<H&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:0}),S=!0));break;case"funnel":case"pyramid":I=b.funnelSection,d>I.y1&&d<I.y4&&(I.y6?d>I.y6?(x=I.x6+(I.x5-I.x6)/(I.y5-I.y6)*(d-I.y6),I=I.x3+(I.x4-I.x3)/(I.y4-I.y3)*(d-I.y3)):(x=I.x1+(I.x6-I.x1)/(I.y6-I.y1)*(d-I.y1),I=I.x2+(I.x3-I.x2)/(I.y3-I.y2)*(d-I.y2)):(x=I.x1+(I.x4-I.x1)/(I.y4-I.y1)*(d-I.y1),I=I.x2+(I.x3-I.x2)/(I.y3-I.y2)*(d-I.y2)),r>x&&r<I&&(o.push({dataPoint:u,dataPointIndex:b.dataPointIndex,dataSeries:this,distance:0}),S=!0));break;case"boxAndWhisker":(r>=b.x1-b.borderThickness/2&&r<=b.x2+b.borderThickness/2&&d>=b.y4-b.borderThickness/2&&d<=b.y1+b.borderThickness/2||Math.abs(b.x2-r+b.x1-r)<b.borderThickness&&d>=b.y1&&d<=b.y4)&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y2-d),Math.abs(b.y3-d))}),S=!0);break;case"candlestick":(r>=b.x1-b.borderThickness/2&&r<=b.x2+b.borderThickness/2&&d>=b.y2-b.borderThickness/2&&d<=b.y3+b.borderThickness/2||Math.abs(b.x2-r+b.x1-r)<b.borderThickness&&d>=b.y1&&d<=b.y4)&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y2-d),Math.abs(b.y3-d))}),S=!0);break;case"ohlc":(Math.abs(b.x2-r+b.x1-r)<b.borderThickness&&d>=b.y2&&d<=b.y3||r>=b.x1&&r<=(b.x2+b.x1)/2&&d>=b.y1-b.borderThickness/2&&d<=b.y1+b.borderThickness/2||r>=(b.x1+b.x2)/2&&r<=b.x2&&d>=b.y4-b.borderThickness/2&&d<=b.y4+b.borderThickness/2)&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y2-d),Math.abs(b.y3-d))}),S=!0)}if(S||1e3<w&&1e3<v)break}}else if(0>C-c&&C+c>=this.dataPoints.length)break;y===-1?(c++,y=1):y=-1}for(r=null,d=0;d<o.length;d++)r?o[d].distance<=r.distance&&(r=o[d]):r=o[d];return r},je.prototype.getMarkerProperties=function(r,d,h,o){var c=this.dataPoints,x=c[r].markerColor?c[r].markerColor:this.markerColor?this.markerColor:c[r].color?c[r].color:this.color?this.color:this._colorSet[r%this._colorSet.length],y=c[r].markerBorderColor?c[r].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,S=m(c[r].markerBorderThickness)?this.markerBorderThickness?this.markerBorderThickness:null:c[r].markerBorderThickness,E=c[r].markerType?c[r].markerType:this.markerType;return r=m(c[r].markerSize)?this.markerSize:c[r].markerSize,{x:d,y:h,ctx:o,type:E,size:r,color:x,borderColor:y,borderThickness:S}},e(ke,se),ke.prototype.createExtraLabelsForLog=function(r){if(r=(r||0)+1,!(5<r)){var d=this.logLabelValues[0]||this.intervalStartPosition;if(Math.log(this.range)/Math.log(d/this.viewportMinimum)<this.noTicks-1){for(var h=ke.getNiceNumber((d-this.viewportMinimum)/Math.min(Math.max(2,this.noTicks-this.logLabelValues.length),3),!0),o=Math.ceil(this.viewportMinimum/h)*h;o<d;o+=h)o<this.viewportMinimum||this.logLabelValues.push(o);this.logLabelValues.sort(p),this.createExtraLabelsForLog(r)}}},ke.prototype.createLabels=function(){var r,d,h=0,y=0,o,c=0,x=0,y=0,y=this.interval,S=0,E,w=.6*this.chart.height,v;r=!1;var b=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],C=b.length?m(this.scaleBreaks.firstBreakIndex)?0:this.scaleBreaks.firstBreakIndex:0;if(this.type!=="axisX"||this.valueType!=="dateTime"||this.logarithmic){if(o=this.viewportMaximum,this.labels){r=Math.ceil(y);for(var y=Math.ceil(this.intervalStartPosition),u=!1,h=y;h<this.viewportMaximum;h+=r)if(this.labels[h])u=!0;else{u=!1;break}u&&(this.interval=r,this.intervalStartPosition=y)}if(this.logarithmic&&!this.equidistantInterval)for(this.logLabelValues||(this.logLabelValues=[],this.createExtraLabelsForLog()),y=0,u=C;y<this.logLabelValues.length;y++)if(h=this.logLabelValues[y],h<this.viewportMinimum)y++;else{for(;u<b.length&&h>b[u].endValue;u++);r=u<b.length&&h>=b[u].startValue&&h<=b[u].endValue,v=h,r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:v,label:this.labels[v]?this.labels[v]:null}):this.type==="axisX"&&this.labels[v]?this.labels[v]:Nt(v,this.valueFormatString,this.chart._cultureInfo),r=new ue(this.ctx,{x:0,y:0,maxWidth:c,maxHeight:x,angle:this.labelAngle,text:this.prefix+r+this.suffix,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,cornerRadius:this.labelCornerRadius,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:this.labelBorderThickness}),this._labels.push({position:v,textBlock:r,effectiveHeight:null}))}for(u=C,h=this.intervalStartPosition;h<=o;h=parseFloat(1e-12>this.interval?this.logarithmic&&this.equidistantInterval?h*Math.pow(this.logarithmBase,this.interval):h+this.interval:(this.logarithmic&&this.equidistantInterval?h*Math.pow(this.logarithmBase,this.interval):h+this.interval).toFixed(12))){for(;u<b.length&&h>b[u].endValue;u++);r=u<b.length&&h>=b[u].startValue&&h<=b[u].endValue,v=h,r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:v,label:this.labels[v]?this.labels[v]:null}):this.type==="axisX"&&this.labels[v]?this.labels[v]:Nt(v,this.valueFormatString,this.chart._cultureInfo),r=new ue(this.ctx,{x:0,y:0,maxWidth:c,maxHeight:x,angle:this.labelAngle,text:this.prefix+r+this.suffix,textAlign:this.labelTextAlign,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:v,textBlock:r,effectiveHeight:null}))}}else for(this.intervalStartPosition=this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval),o=n(new Date(this.viewportMaximum),this.interval,this.intervalType),u=C,h=this.intervalStartPosition;h<o;n(h,y,this.intervalType)){for(r=h.getTime();u<b.length&&r>b[u].endValue;u++);v=r,r=u<b.length&&r>=b[u].startValue&&r<=b[u].endValue,r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:new Date(v),label:this.labels[v]?this.labels[v]:null}):this.type==="axisX"&&this.labels[v]?this.labels[v]:Qi(v,this.valueFormatString,this.chart._cultureInfo),r=new ue(this.ctx,{x:0,y:0,maxWidth:c,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxHeight:x,angle:this.labelAngle,text:this.prefix+r+this.suffix,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:v,textBlock:r,effectiveHeight:null,breaksLabelType:void 0}))}for(this._position==="bottom"||this._position==="top"?(S=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.width*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.width/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*ht[this.intervalType+"Duration"]*this.interval,c=typeof this.options.labelMaxWidth>"u"?.5*this.chart.width>>0:this.options.labelMaxWidth,this.chart.panEnabled||(x=typeof this.options.labelWrap>"u"||this.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize)):(this._position==="left"||this._position==="right")&&(S=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.height*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.height/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*ht[this.intervalType+"Duration"]*this.interval,this.chart.panEnabled||(c=typeof this.options.labelMaxWidth>"u"?.3*this.chart.width>>0:this.options.labelMaxWidth),x=typeof this.options.labelWrap>"u"||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize),y=0;y<this._labels.length;y++){r=this._labels[y].textBlock,r.maxWidth=c,r.maxHeight=x;var I=r.measureText();E=I.height}if(o=[],C=b=0,this.labelAutoFit||this.options.labelAutoFit){if(m(this.labelAngle)||(this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360)),this._position==="bottom"||this._position==="top")if(c=Math.floor(.9*S),C=0,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=c,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,h=0;h<this._labels.length;h++)if(!this._labels[h].breaksLabelType){r=this._labels[h].textBlock;for(var V,u=r.text.split(" "),y=0;y<u.length;y++)v=u[y],this.ctx.font=r.fontStyle+" "+r.fontWeight+" "+r.fontSize+"px "+r.fontFamily,v=this.ctx.measureText(v),v.width>C&&(V=h,C=v.width)}for(h=0,h=this.intervalStartPosition<this.viewportMinimum?1:0;h<this._labels.length;h++)if(!this._labels[h].breaksLabelType){for(r=this._labels[h].textBlock,I=r.measureText(),u=h+1;u<this._labels.length;u++)if(!this._labels[u].breaksLabelType){d=this._labels[u].textBlock,d=d.measureText();break}if(o.push(r.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,o),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),y=c*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(x-r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),m(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&this.options.labelAngle!==0){if(this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:Math.min((y-c*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),y),v=(w-(E+r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(-25)))/Math.sin(Math.PI/180*Math.abs(-25)),!m(this.options.labelWrap))this.labelWrap?m(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=Math.min(Math.max(c,C),v),this.sessionVariables.labelWrap=this.labelWrap,d&&I.width+d.width>>0>2*c&&(this.sessionVariables.labelAngle=-25)):(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>c?-25:this.sessionVariables.labelAngle):m(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelMaxWidth=c,d&&I.width+d.width>>0>2*c&&(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=v)):(this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>c?-25:this.sessionVariables.labelAngle,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelWrap=this.labelWrap);else if(m(this.options.labelWrap)){if(!m(this.options.labelMaxWidth))this.options.labelMaxWidth<c?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=y):(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=x);else if(!m(d)){if(y=I.width+d.width>>0,u=this.labelFontSize,C<c)y-2*c>b&&(b=y-2*c,y>=2*c&&y<2.2*c?(this.sessionVariables.labelMaxWidth=c,m(this.options.labelFontSize)&&12<u&&(u=Math.floor(12/13*u),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?u:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):y>=2.2*c&&y<2.8*c?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelFontSize=u):y>=2.8*c&&y<3.2*c?(this.sessionVariables.labelMaxWidth=Math.max(c,C),this.sessionVariables.labelWrap=!0,m(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?u:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):y>=3.2*c&&y<3.6*c?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelFontSize=this.labelFontSize):y>3.6*c&&y<5*c?(m(this.options.labelFontSize)&&12<u&&(u=Math.floor(12/13*u),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?u:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=v):y>5*c&&(this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=c,this.sessionVariables.labelFontSize=u,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=this.labelAngle));else if(V===h&&(V===0&&C+this._labels[V+1].textBlock.measureText().width-2*c>b||V===this._labels.length-1&&C+this._labels[V-1].textBlock.measureText().width-2*c>b||0<V&&V<this._labels.length-1&&C+this._labels[V+1].textBlock.measureText().width-2*c>b&&C+this._labels[V-1].textBlock.measureText().width-2*c>b))b=V===0?C+this._labels[V+1].textBlock.measureText().width-2*c:C+this._labels[V-1].textBlock.measureText().width-2*c,this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?u:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=v;else if(b===0)for(this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?u:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,y=0;y<this._labels.length;y++)r=this._labels[y].textBlock,r.maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(c,C),v),I=r.measureText(),y<this._labels.length-1&&(u=y+1,d=this._labels[u].textBlock,d.maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(c,C),v),d=d.measureText(),I.width+d.width>>0>2*c&&(this.sessionVariables.labelAngle=-25))}}}else this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:Math.min((y-c*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),y),v=this.labelAngle!=0?(w-(E+r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)):c,this.sessionVariables.labelMaxHeight=this.labelWrap?(w-v*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)):1.5*this.labelFontSize,m(this.options.labelWrap)?m(this.options.labelWrap)&&(this.labelWrap&&!m(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:v,this.sessionVariables.labelMaxHeight=x):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelMaxHeight=y<.9*S?.9*S:y,this.sessionVariables.labelWrap=this.labelWrap)):(this.options.labelWrap?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:v):(m(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:v,this.sessionVariables.labelWrap=this.labelWrap),this.sessionVariables.labelMaxHeight=x)}for(y=0;y<this._labels.length;y++)r=this._labels[y].textBlock,r.maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,r.fontSize=this.sessionVariables.labelFontSize,r.angle=this.labelAngle=this.sessionVariables.labelAngle,r.wrap=this.labelWrap=this.sessionVariables.labelWrap,r.maxHeight=this.sessionVariables.labelMaxHeight,r.measureText()}else for(h=0;h<this._labels.length;h++)r=this._labels[h].textBlock,r.maxWidth=this.labelMaxWidth=m(this.options.labelMaxWidth)?m(this.sessionVariables.labelMaxWidth)?this.sessionVariables.labelMaxWidth=c:this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,r.fontSize=this.labelFontSize=m(this.options.labelFontSize)?m(this.sessionVariables.labelFontSize)?this.sessionVariables.labelFontSize=this.labelFontSize:this.sessionVariables.labelFontSize:this.options.labelFontSize,r.angle=this.labelAngle=m(this.options.labelAngle)?m(this.sessionVariables.labelAngle)?this.sessionVariables.labelAngle=this.labelAngle:this.sessionVariables.labelAngle:this.labelAngle,r.wrap=this.labelWrap=m(this.options.labelWrap)?m(this.sessionVariables.labelWrap)?this.sessionVariables.labelWrap=this.labelWrap:this.sessionVariables.labelWrap:this.options.labelWrap,r.maxHeight=m(this.sessionVariables.labelMaxHeight)?this.sessionVariables.labelMaxHeight=x:this.sessionVariables.labelMaxHeight,r.measureText();else if(this._position==="left"||this._position==="right")if(c=m(this.options.labelMaxWidth)?.3*this.chart.width>>0:this.options.labelMaxWidth,x=typeof this.options.labelWrap>"u"||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=c,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=m(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,h=0;h<this._labels.length;h++)if(!this._labels[h].breaksLabelType){for(r=this._labels[h].textBlock,I=r.measureText(),u=h+1;u<this._labels.length;u++)if(!this._labels[u].breaksLabelType){d=this._labels[u].textBlock,d=d.measureText();break}o.push(r.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,o),y=c*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(x-r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),m(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&this.options.labelAngle!==0?m(this.options.labelWrap)?m(this.options.labelWrap)&&(m(this.options.labelMaxWidth)?m(d)||(S=I.height+d.height>>0,S-2*x>C&&(C=S-2*x,S>=2*x&&S<2.4*x?(m(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize):S>=2.4*x&&S<2.8*x?(this.sessionVariables.labelMaxHeight=y,this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelWrap=!0):S>=2.8*x&&S<3.2*x?(this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelWrap=!0,m(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelAngle=m(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):S>=3.2*x&&S<3.6*x?(this.sessionVariables.labelMaxHeight=y,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelFontSize=this.labelFontSize):S>3.6*x&&S<10*x?(m(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxWidth=c,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=m(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):S>10*x&&S<50*x&&(m(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelMaxWidth=c,this.sessionVariables.labelAngle=m(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle))):(this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth)):(this.sessionVariables.labelMaxWidth=this.labelWrap?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:this.labelMaxWidth?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:c,this.sessionVariables.labelMaxHeight=x):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=this.labelAngle===0?c:Math.min((y-x*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)),x),m(this.options.labelWrap)?m(this.options.labelWrap)&&(this.labelWrap&&!m(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=y):(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:c,this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:y,m(this.options.labelMaxWidth)&&(this.sessionVariables.labelAngle=this.labelAngle))):this.options.labelWrap?(this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:y,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=c):(this.sessionVariables.labelMaxHeight=x,m(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap))}for(y=0;y<this._labels.length;y++)r=this._labels[y].textBlock,r.maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,r.fontSize=this.labelFontSize=this.sessionVariables.labelFontSize,r.angle=this.labelAngle=this.sessionVariables.labelAngle,r.wrap=this.labelWrap=this.sessionVariables.labelWrap,r.maxHeight=this.sessionVariables.labelMaxHeight,r.measureText()}else for(m(this.chart.stockChart)||this.chart.isNavigator||(this.sessionVariables.labelMaxHeight=x),h=0;h<this._labels.length;h++)r=this._labels[h].textBlock,r.maxWidth=this.labelMaxWidth=m(this.options.labelMaxWidth)?m(this.sessionVariables.labelMaxWidth)?this.sessionVariables.labelMaxWidth=c:this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,r.fontSize=this.labelFontSize=m(this.options.labelFontSize)?m(this.sessionVariables.labelFontSize)?this.sessionVariables.labelFontSize=this.labelFontSize:this.sessionVariables.labelFontSize:this.options.labelFontSize,r.angle=this.labelAngle=m(this.options.labelAngle)?m(this.sessionVariables.labelAngle)?this.sessionVariables.labelAngle=this.labelAngle:this.sessionVariables.labelAngle:this.labelAngle,r.wrap=this.labelWrap=m(this.options.labelWrap)?m(this.sessionVariables.labelWrap)?this.sessionVariables.labelWrap=this.labelWrap:this.sessionVariables.labelWrap:this.options.labelWrap,r.maxHeight=m(this.sessionVariables.labelMaxHeight)?this.sessionVariables.labelMaxHeight=x:this.sessionVariables.labelMaxHeight,r.measureText()}for(h=0;h<this.stripLines.length;h++){var c=this.stripLines[h],H;c.labelPlacement==="outside"?(x=this.sessionVariables.labelMaxWidth,(this._position==="bottom"||this._position==="top")&&(m(c.options.labelWrap)&&!m(this.sessionVariables.stripLineLabelMaxHeight)?H=this.sessionVariables.stripLineLabelMaxHeight:this.sessionVariables.stripLineLabelMaxHeight=H=c.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize),(this._position==="left"||this._position==="right")&&(m(c.options.labelWrap)&&!m(this.sessionVariables.stripLineLabelMaxHeight)?H=this.sessionVariables.stripLineLabelMaxHeight:this.sessionVariables.stripLineLabelMaxHeight=H=c.labelWrap?.8*this.chart.width>>0:1.5*this.labelFontSize),m(c.labelBackgroundColor)&&(c.labelBackgroundColor="#EEEEEE")):(x=this._position==="bottom"||this._position==="top"?.9*this.chart.width>>0:.9*this.chart.height>>0,H=m(c.options.labelWrap)||c.labelWrap?this._position==="bottom"||this._position==="top"?.8*this.chart.width>>0:.8*this.chart.height>>0:1.5*this.labelFontSize,m(c.labelBackgroundColor)&&(m(c.startValue)&&c.startValue!==0?c.labelBackgroundColor=X?"transparent":null:c.labelBackgroundColor="#EEEEEE")),c.labelFontSize=c.labelPlacement==="outside"&&m(c.options.labelFontSize)?this.labelFontSize:c.labelFontSize,c.labelFontFamily=c.labelPlacement==="outside"&&m(c.options.labelFontFamily)?this.labelFontFamily:c.labelFontFamily,c.labelFontWeight=c.labelPlacement==="outside"&&m(c.options.labelFontWeight)?this.labelFontWeight:c.labelFontWeight,c.labelFontStyle=c.labelPlacement==="outside"&&m(c.options.labelFontStyle)?this.labelFontStyle:c.labelFontStyle,r=new ue(this.ctx,{x:0,y:0,backgroundColor:c.labelBackgroundColor,borderColor:c.labelBorderColor,borderThickness:c.labelBorderThickness,cornerRadius:c.labelCornerRadius,maxWidth:c.options.labelMaxWidth?c.options.labelMaxWidth:x,maxHeight:H,angle:this.labelAngle,text:c.labelFormatter?c.labelFormatter({chart:this.chart,axis:this,stripLine:c}):c.label,textAlign:c.labelTextAlign,fontSize:c.labelFontSize,fontFamily:c.labelFontFamily,fontWeight:c.labelFontWeight,fontColor:c.labelFontColor||c.color,fontStyle:c.labelFontStyle,textBaseline:"middle"}),this._stripLineLabels.push({position:c.value,textBlock:r,effectiveHeight:null,stripLine:c})}},ke.prototype.createLabelsAndCalculateWidth=function(){var r=0,d=0;this._labels=[],this._stripLineLabels=[];var h=this.chart.isNavigator?0:5;if(this._position==="left"||this._position==="right"){if(this.createLabels(),this.labelPlacement!="inside"||this.labelPlacement==="inside"&&0<this._index)for(d=0;d<this._labels.length;d++){var o=this._labels[d].textBlock,o=o.measureText(),c=0,c=this.labelAngle===0?o.width:o.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+o.height*Math.sin(Math.PI/180*Math.abs(this.labelAngle));r<c&&(this.labelEffectiveWidth=r=c),this._labels[d].effectiveWidth=c}for(d=0;d<this._stripLineLabels.length;d++)this._stripLineLabels[d].stripLine.labelPlacement==="outside"&&this._stripLineLabels[d].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[d].stripLine.value<=this.viewportMaximum&&(o=this._stripLineLabels[d].textBlock,o=o.measureText(),c=this.labelAngle===0?o.width:o.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+o.height*Math.sin(Math.PI/180*Math.abs(this.labelAngle)),this.tickPlacement==="inside"&&(c+=this.tickLength),this.labelPlacement==="inside"&&(r+=0<this._index?c:0),r<c&&(r=c),this.stripLineLabelEffectiveWidth=this._stripLineLabels[d].effectiveWidth=c)}return(this.title?this._titleTextBlock.measureText().height+2:0)+r+(this.tickPlacement==="inside"?0<this._index?this.tickLength:0:this.tickLength)+h},ke.prototype.createLabelsAndCalculateHeight=function(){var r=0;this._labels=[],this._stripLineLabels=[];var d,h=0,o=this.chart.isNavigator?0:5;if(this._position==="bottom"||this._position==="top"){if(this.createLabels(),this.labelPlacement!="inside"||this.labelPlacement==="inside"&&0<this._index)for(h=0;h<this._labels.length;h++){d=this._labels[h].textBlock,d=d.measureText();var c=0,c=this.labelAngle===0?d.height:d.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+d.height*Math.cos(Math.PI/180*Math.abs(this.labelAngle));r<c&&(this.labelEffectiveHeight=r=c),this._labels[h].effectiveHeight=c}for(h=0;h<this._stripLineLabels.length;h++)this._stripLineLabels[h].stripLine.labelPlacement==="outside"&&this._stripLineLabels[h].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[h].stripLine.value<=this.viewportMaximum&&(d=this._stripLineLabels[h].textBlock,d=d.measureText(),c=this.labelAngle===0?d.height:d.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+d.height*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),this.tickPlacement==="inside"&&(c+=this.tickLength),this.labelPlacement==="inside"&&(r+=0<this._index?c:0),r<c&&(r=c),this.stripLineLabelEffectiveHeight=this._stripLineLabels[h].effectiveHeight=c)}return(this.title?this._titleTextBlock.measureText().height+2:0)+r+(this.tickPlacement==="inside"?0<this._index?this.tickLength:0:this.tickLength)+o},ke.setLayout=function(r,d,h,o,c,x){var y,S,E,w,v=r[0]?r[0].chart:d[0].chart,b=v.isNavigator?0:10,C=v._axes;if(r&&0<r.length)for(var u=0;u<r.length;u++)r[u]&&r[u].calculateAxisParameters();if(d&&0<d.length)for(u=0;u<d.length;u++)d[u].calculateAxisParameters();if(h&&0<h.length)for(u=0;u<h.length;u++)h[u].calculateAxisParameters();if(o&&0<o.length)for(u=0;u<o.length;u++)o[u].calculateAxisParameters();for(u=0;u<C.length;u++)if(C[u]&&C[u].scaleBreaks&&C[u].scaleBreaks._appliedBreaks.length)for(var I=C[u].scaleBreaks._appliedBreaks,V=0;V<I.length&&!(I[V].startValue>C[u].viewportMaximum);V++)I[V].endValue<C[u].viewportMinimum||(m(C[u].scaleBreaks.firstBreakIndex)&&(C[u].scaleBreaks.firstBreakIndex=V),I[V].startValue>=C[u].viewPortMinimum&&(C[u].scaleBreaks.lastBreakIndex=V));for(var H=V=0,D=0,Y=0,O=0,te=0,ie=0,J,be,Me=S=0,he,de,ce,I=he=de=ce=!1,u=0;u<C.length;u++)C[u]&&C[u].title&&(C[u]._titleTextBlock=new ue(C[u].ctx,{text:C[u].title,fontSize:C[u].titleFontSize,fontFamily:C[u].titleFontFamily,fontWeight:C[u].titleFontWeight,fontColor:C[u].titleFontColor,fontStyle:C[u].titleFontStyle,borderColor:C[u].titleBorderColor,borderThickness:C[u].titleBorderThickness,backgroundColor:C[u].titleBackgroundColor,cornerRadius:C[u].titleCornerRadius,textBaseline:"middle",textAlign:C[u].titleTextAlign}));for(u=0;u<C.length;u++)if(C[u].title)switch(C[u]._position){case"left":C[u]._titleTextBlock.maxWidth=C[u].titleMaxWidth||x.height,C[u]._titleTextBlock.maxHeight=C[u].titleWrap?.8*x.width:1.5*C[u].titleFontSize,C[u]._titleTextBlock.angle=-90;break;case"right":C[u]._titleTextBlock.maxWidth=C[u].titleMaxWidth||x.height,C[u]._titleTextBlock.maxHeight=C[u].titleWrap?.8*x.width:1.5*C[u].titleFontSize,C[u]._titleTextBlock.angle=90;break;default:C[u]._titleTextBlock.maxWidth=C[u].titleMaxWidth||x.width,C[u]._titleTextBlock.maxHeight=C[u].titleWrap?.8*x.height:1.5*C[u].titleFontSize,C[u]._titleTextBlock.angle=0}if(c==="normal"){for(var Y=[],O=[],te=[],ie=[],le=[],ee=[],we=[],Ae=[];4>V;){var ne=0,ft=0,gt=0,Ft=0,At=c=0,Ke=0,ai=0,Ct=0,bt=0,Ye=0,Jt=0;if(h&&0<h.length)for(te=[],u=Ye=0;u<h.length;u++)te.push(Math.ceil(h[u]?h[u].createLabelsAndCalculateWidth():0)),Ye+=te[u],Ke+=h[u]&&!v.isNavigator?h[u].margin:0;else te.push(Math.ceil(h[0]?h[0].createLabelsAndCalculateWidth():0));if(we.push(te),o&&0<o.length)for(ie=[],u=Jt=0;u<o.length;u++)ie.push(Math.ceil(o[u]?o[u].createLabelsAndCalculateWidth():0)),Jt+=ie[u],ai+=o[u]?o[u].margin:0;else ie.push(Math.ceil(o[0]?o[0].createLabelsAndCalculateWidth():0));if(Ae.push(ie),y=Math.round(x.x1+Ye+Ke),E=Math.round(x.x2-Jt-ai>v.width-b?v.width-b:x.x2-Jt-ai),r&&0<r.length)for(Y=[],u=Ct=0;u<r.length;u++)r[u]&&(r[u].lineCoordinates={}),r[u].lineCoordinates.width=Math.abs(E-y),r[u].title&&(r[u]._titleTextBlock.maxWidth=0<r[u].titleMaxWidth&&r[u].titleMaxWidth<r[u].lineCoordinates.width?r[u].titleMaxWidth:r[u].lineCoordinates.width),Y.push(Math.ceil(r[u]?r[u].createLabelsAndCalculateHeight():0)),Ct+=Y[u],c+=r[u]&&!v.isNavigator?r[u].margin:0;else Y.push(Math.ceil(r[0]?r[0].createLabelsAndCalculateHeight():0));if(le.push(Y),d&&0<d.length)for(O=[],u=bt=0;u<d.length;u++)d[u]&&(d[u].lineCoordinates={}),d[u].lineCoordinates.width=Math.abs(E-y),d[u].title&&(d[u]._titleTextBlock.maxWidth=0<d[u].titleMaxWidth&&d[u].titleMaxWidth<d[u].lineCoordinates.width?d[u].titleMaxWidth:d[u].lineCoordinates.width),O.push(Math.ceil(d[u]?d[u].createLabelsAndCalculateHeight():0)),bt+=O[u],At+=d[u]&&!v.isNavigator?d[u].margin:0;else O.push(Math.ceil(d[0]?d[0].createLabelsAndCalculateHeight():0));if(ee.push(O),r&&0<r.length)for(u=0;u<r.length;u++)r[u]&&(r[u].lineCoordinates.x1=y,E=Math.round(x.x2-Jt-ai>v.width-b?v.width-b:x.x2-Jt-ai),r[u]._labels&&1<r[u]._labels.length&&(S=w=0,w=r[u]._labels[1],S=r[u].valueType==="dateTime"?r[u]._labels[r[u]._labels.length-2]:r[u]._labels[r[u]._labels.length-1],H=w.textBlock.width*Math.cos(Math.PI/180*Math.abs(w.textBlock.angle))+(w.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(w.textBlock.angle)),D=S.textBlock.width*Math.cos(Math.PI/180*Math.abs(S.textBlock.angle))+(S.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(S.textBlock.angle))),!r[u]||!r[u].labelAutoFit||m(J)||m(be)||v.isNavigator||v.stockChart||(S=0,0<r[u].labelAngle?be+D>E&&r[u].convertPixelToValue(be)>=r[u].viewportMinimum&&r[u].convertPixelToValue(be)<=r[u].viewportMaximum&&(S+=0<r[u].labelAngle?be+D-E-Jt:0):0>r[u].labelAngle?J-H<y&&J-H<r[u].viewportMinimum&&(Me=y-(Ke+r[u].tickLength+te+J-H+r[u].labelFontSize/2)):r[u].labelAngle===0&&(be+D>E&&r[u].convertPixelToValue(be)>=r[u].viewportMinimum&&r[u].convertPixelToValue(be)<=r[u].viewportMaximum&&(S=be+D/2-E-Jt),J-H<y&&J-H<r[u].viewportMinimum&&(Me=y-Ke-r[u].tickLength-te-J+H/2)),r[u].viewportMaximum===r[u].maximum&&r[u].viewportMinimum===r[u].minimum&&0<r[u].labelAngle&&0<S?E-=S:r[u].viewportMaximum===r[u].maximum&&r[u].viewportMinimum===r[u].minimum&&0>r[u].labelAngle&&0<Me?y+=Me:r[u].viewportMaximum===r[u].maximum&&r[u].viewportMinimum===r[u].minimum&&r[u].labelAngle===0&&(0<Me&&(y+=Me),0<S&&(E-=S))),v.panEnabled?Ct=m(v.sessionVariables.axisX.height)||v.stockChart?v.sessionVariables.axisX.height=Ct:v.sessionVariables.axisX.height:v.sessionVariables.axisX.height=Ct,S=Math.round(x.y2-Ct-c+ne),w=Math.round(x.y2),r[u].lineCoordinates.x2=E,r[u].lineCoordinates.width=E-y,r[u].lineCoordinates.y1=S,r[u].lineCoordinates.y2=S,r[u].labelPlacement==="inside"&&0<u&&(r[u].lineCoordinates.y1=r[0].lineCoordinates.y2+ne+(r[u].labelEffectiveHeight||0),r[u].lineCoordinates.y2=r[u].lineCoordinates.y1+r[u].lineThickness/2),r[u].tickPlacement==="inside"&&0<u&&(r[u].lineCoordinates.y1+=r[u].tickLength,r[u].lineCoordinates.y2=r[u].lineCoordinates.y1+r[u].lineThickness/2),r[u].bounds={x1:y,y1:S,x2:E,y2:w-(Ct+c-Y[u]-ne),width:E-y},r[u].bounds.height=r[u].bounds.y2-r[u].bounds.y1),ne+=Y[u]+r[u].margin;if(d&&0<d.length)for(u=0;u<d.length;u++)d[u].lineCoordinates.x1=Math.round(x.x1+Ye+Ke),d[u].lineCoordinates.x2=E||Math.round(x.x2-Jt-ai>v.width-b?v.width-b:x.x2-Jt-ai),d[u].lineCoordinates.width=Math.abs(E-y),d[u]._labels&&1<d[u]._labels.length&&(w=d[u]._labels[1],S=d[u].valueType==="dateTime"?d[u]._labels[d[u]._labels.length-2]:d[u]._labels[d[u]._labels.length-1],H=w.textBlock.width*Math.cos(Math.PI/180*Math.abs(w.textBlock.angle))+(w.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(w.textBlock.angle)),D=S.textBlock.width*Math.cos(Math.PI/180*Math.abs(S.textBlock.angle))+(S.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(S.textBlock.angle))),v.panEnabled?bt=m(v.sessionVariables.axisX2.height)||v.stockChart?v.sessionVariables.axisX2.height=bt:v.sessionVariables.axisX2.height:v.sessionVariables.axisX2.height=bt,S=Math.round(x.y1),w=d[u].lineCoordinates.y1=S+bt+At-ft,d[u].lineCoordinates.y2=S,d[u].labelPlacement==="inside"&&0<u&&(d[u].lineCoordinates.y1=d[0].lineCoordinates.y1-ft-(d[u].labelEffectiveHeight||0)-5),d[u].tickPlacement==="inside"&&0<u&&(d[u].lineCoordinates.y1-=d[u].tickLength),d[u].bounds={x1:y,y1:S+(bt+At-(d[u].labelPlacement==="inside"&&u===0?O[u]-5:O[u])-ft),x2:E,y2:w,width:E-y},d[u].bounds.height=d[u].bounds.y2-d[u].bounds.y1,ft+=(d[u].labelPlacement==="inside"&&u===0?O[u]-5:O[u])+d[u].margin;if(h&&0<h.length)for(u=0;u<h.length;u++)Ke=v.isNavigator?0:10,h[u]&&(y=Math.round(r[0]?r[0].lineCoordinates.x1:d[0].lineCoordinates.x1),Ke=h[u]._labels&&0<h[u]._labels.length?h[u]._labels[h[u]._labels.length-1].textBlock.height/2:b,S=Math.round(x.y1+bt+At<Math.max(Ke,b)?Math.max(Ke,b):x.y1+bt+At),E=Math.round(r[0]?r[0].lineCoordinates.x1:d[0].lineCoordinates.x1),Ke=0<r.length?0:h[u]._labels&&0<h[u]._labels.length?h[u]._labels[0].textBlock.height/2:b,w=Math.round(x.y2-Ct-c-Ke),h[u].lineCoordinates={x1:y-gt,y1:S,x2:E-gt,y2:w,height:Math.abs(w-S)},h[u].labelPlacement==="inside"&&0<u&&(h[u].lineCoordinates.x1=h[0].lineCoordinates.x1-gt-(h[u].labelEffectiveWidth||0)-5,h[u].lineCoordinates.x2=h[u].lineCoordinates.x1+h[u].lineThickness/2),h[u].tickPlacement==="inside"&&0<u&&(h[u].lineCoordinates.x1-=h[u].tickLength,h[u].lineCoordinates.x2=h[u].lineCoordinates.x1+h[u].lineThickness/2),h[u].bounds={x1:y-((h[u].labelPlacement==="inside"&&u===0?te[u]-5:te[u])+gt),y1:S,x2:E-gt,y2:w,height:w-S},h[u].bounds.width=h[u].bounds.x2-h[u].bounds.x1,h[u].title&&(h[u]._titleTextBlock.maxWidth=0<h[u].titleMaxWidth&&h[u].titleMaxWidth<h[u].lineCoordinates.height?h[u].titleMaxWidth:h[u].lineCoordinates.height),gt+=(h[u].labelPlacement==="inside"&&u===0?te[u]-5:te[u])+h[u].margin);if(o&&0<o.length)for(u=0;u<o.length;u++)o[u]&&(y=Math.round(r[0]?r[0].lineCoordinates.x2:d[0].lineCoordinates.x2),E=Math.round(y),Ke=o[u]._labels&&0<o[u]._labels.length?o[u]._labels[o[u]._labels.length-1].textBlock.height/2:0,S=Math.round(x.y1+bt+At<Math.max(Ke,b)?Math.max(Ke,b):x.y1+bt+At),Ke=0<r.length?0:o[u]._labels&&0<o[u]._labels.length?o[u]._labels[0].textBlock.height/2:0,w=Math.round(x.y2-(Ct+c+Ke)),o[u].lineCoordinates={x1:y+Ft,y1:S,x2:y+Ft,y2:w,height:Math.abs(w-S)},o[u].labelPlacement==="inside"&&0<u&&(o[u].lineCoordinates.x1=o[0].lineCoordinates.x2+Ft+(o[u].labelEffectiveWidth||0)+5,o[u].lineCoordinates.x2=o[u].lineCoordinates.x1+o[u].lineThickness/2),o[u].tickPlacement==="inside"&&0<u&&(o[u].lineCoordinates.x1+=o[u].tickLength,o[u].lineCoordinates.x2=o[u].lineCoordinates.x1+o[u].lineThickness/2),o[u].bounds={x1:y+Ft,y1:S,x2:E+((o[u].labelPlacement==="inside"&&u===0?ie[u]-5:ie[u])+Ft),y2:w,height:w-S},o[u].bounds.width=o[u].bounds.x2-o[u].bounds.x1,o[u].title&&(o[u]._titleTextBlock.maxWidth=0<o[u].titleMaxWidth&&o[u].titleMaxWidth<o[u].lineCoordinates.height?o[u].titleMaxWidth:o[u].lineCoordinates.height),Ft+=(o[u].labelPlacement==="inside"&&u===0?ie[u]-5:ie[u])+o[u].margin);if(r&&0<r.length)for(u=0;u<r.length;u++)r[u]&&(r[u].calculateValueToPixelConversionParameters(),r[u].calculateBreaksSizeInValues(),r[u]._labels&&1<r[u]._labels.length&&(J=(r[u].logarithmic?Math.log(r[u]._labels[1].position/r[u].viewportMinimum)/r[u].conversionParameters.lnLogarithmBase:r[u]._labels[1].position-r[u].viewportMinimum)*Math.abs(r[u].conversionParameters.pixelPerUnit)+r[u].lineCoordinates.x1,y=r[u]._labels[r[u]._labels.length-(r[u].valueType==="dateTime"?2:1)].position,y=r[u].getApparentDifference(r[u].viewportMinimum,y),be=r[u].logarithmic?(1<y?Math.log(y)/r[u].conversionParameters.lnLogarithmBase*Math.abs(r[u].conversionParameters.pixelPerUnit):0)+r[u].lineCoordinates.x1:(0<y?y*Math.abs(r[u].conversionParameters.pixelPerUnit):0)+r[u].lineCoordinates.x1));if(d&&0<d.length)for(u=0;u<d.length;u++)d[u].calculateValueToPixelConversionParameters(),d[u].calculateBreaksSizeInValues(),d[u]._labels&&1<d[u]._labels.length&&(J=(d[u].logarithmic?Math.log(d[u]._labels[1].position/d[u].viewportMinimum)/d[u].conversionParameters.lnLogarithmBase:d[u]._labels[1].position-d[u].viewportMinimum)*Math.abs(d[u].conversionParameters.pixelPerUnit)+d[u].lineCoordinates.x1,y=d[u]._labels[d[u]._labels.length-(d[u].valueType==="dateTime"?2:1)].position,y=d[u].getApparentDifference(d[u].viewportMinimum,y),be=d[u].logarithmic?(1<y?Math.log(y)/d[u].conversionParameters.lnLogarithmBase*Math.abs(d[u].conversionParameters.pixelPerUnit):0)+d[u].lineCoordinates.x1:(0<y?y*Math.abs(d[u].conversionParameters.pixelPerUnit):0)+d[u].lineCoordinates.x1);for(u=0;u<C.length;u++)C[u].type==="axisY"&&(C[u].calculateValueToPixelConversionParameters(),C[u].calculateBreaksSizeInValues());if(0<V){if(r&&0<r.length)for(u=0;u<r.length;u++)I=le[V-1][u]===le[V][u];else I=!0;if(d&&0<d.length)for(u=0;u<d.length;u++)he=ee[V-1][u]===ee[V][u];else he=!0;if(h&&0<h.length)for(u=0;u<h.length;u++)de=we[V-1][u]===we[V][u];else de=!0;if(o&&0<o.length)for(u=0;u<o.length;u++)ce=Ae[V-1][u]===Ae[V][u];else ce=!0}if(I&&he&&de&&ce)break;V++}if(r&&0<r.length)for(u=0;u<r.length;u++)r[u].calculateStripLinesThicknessInValues(),r[u].calculateBreaksInPixels();if(d&&0<d.length)for(u=0;u<d.length;u++)d[u].calculateStripLinesThicknessInValues(),d[u].calculateBreaksInPixels();if(h&&0<h.length)for(u=0;u<h.length;u++)h[u].calculateStripLinesThicknessInValues(),h[u].calculateBreaksInPixels();if(o&&0<o.length)for(u=0;u<o.length;u++)o[u].calculateStripLinesThicknessInValues(),o[u].calculateBreaksInPixels()}else{for(b=[],J=[],Me=[],H=[],be=[],D=[],le=[],ee=[];4>V;){if(Ct=Ft=gt=ai=Ke=At=c=Ae=we=ne=bt=0,r&&0<r.length)for(Me=[],u=Ft=0;u<r.length;u++)Me.push(Math.ceil(r[u]?r[u].createLabelsAndCalculateWidth():0)),Ft+=Me[u],c+=r[u]&&!v.isNavigator?r[u].margin:0;else Me.push(Math.ceil(r[0]?r[0].createLabelsAndCalculateWidth():0));if(le.push(Me),d&&0<d.length)for(H=[],u=Ct=0;u<d.length;u++)H.push(Math.ceil(d[u]?d[u].createLabelsAndCalculateWidth():0)),Ct+=H[u],At+=d[u]?d[u].margin:0;else H.push(Math.ceil(d[0]?d[0].createLabelsAndCalculateWidth():0));if(ee.push(H),h&&0<h.length)for(u=0;u<h.length;u++)h[u].lineCoordinates={},y=Math.round(x.x1+Ft+c),E=Math.round(x.x2-Ct-At>v.width-10?v.width-10:x.x2-Ct-At),h[u].labelAutoFit&&!m(Y)&&(0<!r.length&&(y=0>h[u].labelAngle?Math.max(y,Y):h[u].labelAngle===0?Math.max(y,Y/2):y),0<!d.length&&(E=0<h[u].labelAngle||h[u].labelAngle===0?E-O/2:E)),h[u].lineCoordinates.x1=y,h[u].lineCoordinates.x2=E,h[u].lineCoordinates.width=Math.abs(E-y),h[u].title&&(h[u]._titleTextBlock.maxWidth=0<h[u].titleMaxWidth&&h[u].titleMaxWidth<h[u].lineCoordinates.width?h[u].titleMaxWidth:h[u].lineCoordinates.width);if(o&&0<o.length)for(u=0;u<o.length;u++)o[u].lineCoordinates={},y=Math.round(x.x1+Ft+c),E=Math.round(x.x2-Ct-At>o[u].chart.width-10?o[u].chart.width-10:x.x2-Ct-At),o[u]&&o[u].labelAutoFit&&!m(te)&&(0<!r.length&&(y=0<o[u].labelAngle?Math.max(y,te):o[u].labelAngle===0?Math.max(y,te/2):y),0<!d.length&&(E-=ie/2)),o[u].lineCoordinates.x1=y,o[u].lineCoordinates.x2=E,o[u].lineCoordinates.width=Math.abs(E-y),o[u].title&&(o[u]._titleTextBlock.maxWidth=0<o[u].titleMaxWidth&&o[u].titleMaxWidth<o[u].lineCoordinates.width?o[u].titleMaxWidth:o[u].lineCoordinates.width);if(h&&0<h.length)for(b=[],u=gt=0;u<h.length;u++)b.push(Math.ceil(h[u]?h[u].createLabelsAndCalculateHeight():0)),gt+=b[u]+h[u].margin,Ke+=h[u].margin;else b.push(Math.ceil(h[0]?h[0].createLabelsAndCalculateHeight():0));if(be.push(b),o&&0<o.length)for(J=[],u=0;u<o.length;u++)J.push(Math.ceil(o[u]?o[u].createLabelsAndCalculateHeight():0)),ai+=o[u].margin;else J.push(Math.ceil(o[0]?o[0].createLabelsAndCalculateHeight():0));if(D.push(J),h&&0<h.length)for(u=0;u<h.length;u++)0<h[u]._labels.length&&(w=h[u]._labels[0],S=h[u]._labels[h[u]._labels.length-1],Y=w.textBlock.width*Math.cos(Math.PI/180*Math.abs(w.textBlock.angle))+(w.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(w.textBlock.angle)),O=S.textBlock.width*Math.cos(Math.PI/180*Math.abs(S.textBlock.angle))+(S.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(S.textBlock.angle)));if(o&&0<o.length)for(u=0;u<o.length;u++)o[u]&&0<o[u]._labels.length&&(w=o[u]._labels[0],S=o[u]._labels[o[u]._labels.length-1],te=w.textBlock.width*Math.cos(Math.PI/180*Math.abs(w.textBlock.angle))+(w.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(w.textBlock.angle)),ie=S.textBlock.width*Math.cos(Math.PI/180*Math.abs(S.textBlock.angle))+(S.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(S.textBlock.angle)));if(v.panEnabled)for(u=0;u<h.length;u++)b[u]=m(v.sessionVariables.axisY[u].height)?v.sessionVariables.axisY[u].height=b[u]:v.sessionVariables.axisY[u].height;else for(u=0;u<h.length;u++)v.sessionVariables.axisY[u].height=b[u];if(h&&0<h.length)for(u=h.length-1;0<=u;u--)S=Math.round(x.y2),w=Math.round(x.y2>h[u].chart.height?h[u].chart.height:x.y2),h[u].lineCoordinates.y1=S-(b[u]+h[u].margin+bt),h[u].lineCoordinates.y2=S-(b[u]+h[u].margin+bt),h[u].labelPlacement==="inside"&&0<u&&(h[u].lineCoordinates.y1=h[u].lineCoordinates.y1+b[u]-(h[u]._titleTextBlock?h[u]._titleTextBlock.height:0)-h[u].tickLength-(h[u].stripLineLabelEffectiveHeight||0)-5,h[u].lineCoordinates.y2=h[u].lineCoordinates.y1+h[u].lineThickness/2),h[u].tickPlacement==="inside"&&0<u&&(h[u].lineCoordinates.y1+=h[u].tickLength,h[u].lineCoordinates.y2=h[u].lineCoordinates.y1+h[u].lineThickness/2),h[u].bounds={x1:y,y1:S-(b[u]+bt+h[u].margin),x2:E,y2:w-(bt+h[u].margin),width:E-y,height:b[u]},h[u].title&&(h[u]._titleTextBlock.maxWidth=0<h[u].titleMaxWidth&&h[u].titleMaxWidth<h[u].lineCoordinates.width?h[u].titleMaxWidth:h[u].lineCoordinates.width),bt+=b[u]+h[u].margin;if(o&&0<o.length)for(u=o.length-1;0<=u;u--)o[u]&&(S=Math.round(x.y1),w=Math.round(x.y1+(J[u]+o[u].margin+ne)),o[u].lineCoordinates.y1=w,o[u].lineCoordinates.y2=w,o[u].labelPlacement==="inside"&&0<u&&(o[u].lineCoordinates.y1=w-J[u]+(o[u]._titleTextBlock?o[u]._titleTextBlock.height:0)+o[u].tickLength+(o[u].stripLineLabelEffectiveHeight||0),o[u].lineCoordinates.y2=o[u].lineCoordinates.y1-o[u].lineThickness/2),o[u].tickPlacement==="inside"&&0<u&&(o[u].lineCoordinates.y1-=o[u].tickLength,o[u].lineCoordinates.y2=o[u].lineCoordinates.y1-o[u].lineThickness/2),o[u].bounds={x1:y,y1:S+(o[u].margin+ne),x2:E,y2:w,width:E-y},o[u].bounds.height=o[u].bounds.y2-o[u].bounds.y1,o[u].title&&(o[u]._titleTextBlock.maxWidth=0<o[u].titleMaxWidth&&o[u].titleMaxWidth<o[u].lineCoordinates.width?o[u].titleMaxWidth:o[u].lineCoordinates.width),ne+=J[u]+o[u].margin);if(r&&0<r.length)for(u=0;u<r.length;u++){if(Ke=r[u]._labels&&0<r[u]._labels.length?r[u]._labels[0].textBlock.fontSize/2:0,y=Math.round(x.x1+c),S=o&&0<o.length?Math.round(o[0]?o[0].lineCoordinates.y2:x.y1<Math.max(Ke,10)?Math.max(Ke,10):x.y1):x.y1<Math.max(Ke,10)?Math.max(Ke,10):x.y1,E=Math.round(x.x1+Ft+c),w=h&&0<h.length?Math.round(h[0]?h[0].lineCoordinates.y1:x.y2-gt>v.height-Math.max(Ke,10)?v.height-Math.max(Ke,10):x.y2-gt):x.y2>v.height-Math.max(Ke,10)?v.height-Math.max(Ke,10):x.y2,h&&0<h.length)for(Ke=0;Ke<h.length;Ke++)h[Ke]&&h[Ke].labelAutoFit&&(E=h[Ke].lineCoordinates.x1,y=0>h[Ke].labelAngle||h[Ke].labelAngle===0?E-Ft:y);if(o&&0<o.length)for(Ke=0;Ke<o.length;Ke++)o[Ke]&&o[Ke].labelAutoFit&&(E=o[Ke].lineCoordinates.x1,y=E-Ft);r[u].lineCoordinates={x1:E-we,y1:S,x2:E-we,y2:w,height:Math.abs(w-S)},r[u].labelPlacement==="inside"&&0<u&&(r[u].lineCoordinates.x1=r[u].lineCoordinates.x1-(Me[u]-(r[u]._titleTextBlock?r[u]._titleTextBlock.height:0))+r[u].tickLength+(r[u].stripLineLabelEffectiveWidth||0),r[u].lineCoordinates.x2=r[u].lineCoordinates.x1+r[u].lineThickness/2),r[u].tickPlacement==="inside"&&0<u&&(r[u].lineCoordinates.x1-=r[u].tickLength,r[u].lineCoordinates.x2=r[u].lineCoordinates.x1+r[u].lineThickness/2),r[u].bounds={x1:E-(Me[u]+we),y1:S,x2:E-we,y2:w,height:w-S},r[u].bounds.width=r[u].bounds.x2-r[u].bounds.x1,r[u].title&&(r[u]._titleTextBlock.maxWidth=0<r[u].titleMaxWidth&&r[u].titleMaxWidth<r[u].lineCoordinates.height?r[u].titleMaxWidth:r[u].lineCoordinates.height),r[u].calculateValueToPixelConversionParameters(),r[u].calculateBreaksSizeInValues(),we+=Me[u]+r[u].margin}if(d&&0<d.length)for(u=0;u<d.length;u++){if(Ke=d[u]._labels&&0<d[u]._labels.length?d[u]._labels[0].textBlock.fontSize/2:0,y=Math.round(x.x1-c),S=o&&0<o.length?Math.round(o[0]?o[0].lineCoordinates.y2:x.y1<Math.max(Ke,10)?Math.max(Ke,10):x.y1):x.y1<Math.max(Ke,10)?Math.max(Ke,10):x.y1,E=Math.round(x.x2-Ct-At),w=h&&0<h.length?Math.round(h[0]?h[0].lineCoordinates.y1:x.y2-gt>v.height-Math.max(Ke,10)?v.height-Math.max(Ke,10):x.y2-gt):x.y2>v.height-Math.max(Ke,10)?v.height-Math.max(Ke,10):x.y2,h&&0<h.length)for(Ke=0;Ke<h.length;Ke++)h[Ke]&&h[Ke].labelAutoFit&&(E=0>h[Ke].labelAngle?Math.max(E,Y):h[Ke].labelAngle===0?Math.max(E,Y/2):E,y=0>h[Ke].labelAngle||h[Ke].labelAngle===0?E-Ct:y);if(o&&0<o.length)for(Ke=0;Ke<o.length;Ke++)o[Ke]&&o[Ke].labelAutoFit&&(E=o[Ke].lineCoordinates.x2,y=E-Ct);d[u].lineCoordinates={x1:E+Ae,y1:S,x2:E+Ae,y2:w,height:Math.abs(w-S)},d[u].labelPlacement==="inside"&&0<u&&(d[u].lineCoordinates.x1=d[u].lineCoordinates.x1+(H[u]-(d[u]._titleTextBlock?d[u]._titleTextBlock.height:0)-2)-d[u].tickLength-(d[u].stripLineLabelEffectiveWidth||0),d[u].lineCoordinates.x2=d[u].lineCoordinates.x1+d[u].lineThickness/2),d[u].tickPlacement==="inside"&&0<u&&(d[u].lineCoordinates.x1+=d[u].tickLength,d[u].lineCoordinates.x2=d[u].lineCoordinates.x1+d[u].lineThickness/2),d[u].bounds={x1:d[u].lineCoordinates.x1,y1:S,x2:E+H[u]+Ae,y2:w,width:E-y,height:w-S},d[u].bounds.width=d[u].bounds.x2-d[u].bounds.x1,d[u].title&&(d[u]._titleTextBlock.maxWidth=0<d[u].titleMaxWidth&&d[u].titleMaxWidth<d[u].lineCoordinates.height?d[u].titleMaxWidth:d[u].lineCoordinates.height),d[u].calculateValueToPixelConversionParameters(),d[u].calculateBreaksSizeInValues(),Ae+=H[u]+d[u].margin}for(u=0;u<C.length;u++)C[u].type==="axisY"&&(C[u].calculateValueToPixelConversionParameters(),C[u].calculateBreaksSizeInValues());if(0<V){if(r&&0<r.length)for(u=0;u<r.length;u++)I=le[V-1][u]===le[V][u];else I=!0;if(d&&0<d.length)for(u=0;u<d.length;u++)he=ee[V-1][u]===ee[V][u];else he=!0;if(h&&0<h.length)for(u=0;u<h.length;u++)de=be[V-1][u]===be[V][u];else de=!0;if(o&&0<o.length)for(u=0;u<o.length;u++)ce=D[V-1][u]===D[V][u];else ce=!0}if(I&&he&&de&&ce)break;V++}if(h&&0<h.length)for(u=0;u<h.length;u++)h[u].calculateStripLinesThicknessInValues(),h[u].calculateBreaksInPixels();if(o&&0<o.length)for(u=0;u<o.length;u++)o[u].calculateStripLinesThicknessInValues(),o[u].calculateBreaksInPixels();if(r&&0<r.length)for(u=0;u<r.length;u++)r[u].calculateStripLinesThicknessInValues(),r[u].calculateBreaksInPixels();if(d&&0<d.length)for(u=0;u<d.length;u++)d[u].calculateStripLinesThicknessInValues(),d[u].calculateBreaksInPixels()}},ke.render=function(r,d,h,o,c){c=r[0]?r[0].chart:d[0].chart;var x=c.ctx;if(c.alignVerticalAxes&&c.alignVerticalAxes(),x.save(),x.beginPath(),r&&r.length&&x.rect(2,r[0].bounds.y1,r[0].chart.width-4,r[r.length-1].bounds.y2),d&&d.length&&x.rect(2,d[d.length-1].bounds.y1,d[0].chart.width-4,d[0].bounds.y2),x.clip(),r&&0<r.length)for(var y=0;y<r.length;y++)r[y].renderLabelsTicksAndTitle();if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderLabelsTicksAndTitle();if(x.restore(),h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderLabelsTicksAndTitle();if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderLabelsTicksAndTitle();if(c.preparePlotArea(),y=c.plotArea,x.save(),x.beginPath(),x.rect(y.x1,y.y1,Math.abs(y.x2-y.x1),Math.abs(y.y2-y.y1)),x.clip(),r&&0<r.length)for(y=0;y<r.length;y++)r[y].renderStripLinesOfThicknessType("value");if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderStripLinesOfThicknessType("value");if(h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderStripLinesOfThicknessType("value");if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderStripLinesOfThicknessType("value");if(r&&0<r.length)for(y=0;y<r.length;y++)r[y].renderInterlacedColors();if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderInterlacedColors();if(h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderInterlacedColors();if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderInterlacedColors();if(x.restore(),r&&0<r.length)for(y=0;y<r.length;y++)r[y].renderGrid(),X&&(r[y].createMask(),r[y].renderBreaksBackground());if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderGrid(),X&&(d[y].createMask(),d[y].renderBreaksBackground());if(h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderGrid(),X&&(h[y].createMask(),h[y].renderBreaksBackground());if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderGrid(),X&&(o[y].createMask(),o[y].renderBreaksBackground());if(r&&0<r.length)for(y=0;y<r.length;y++)r[y].renderAxisLine();if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderAxisLine();if(h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderAxisLine();if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderAxisLine();if(x=!1,r&&0<r.length)for(y=0;y<r.length;y++)r[y].renderStripLinesOfThicknessType("pixel"),r[y].crosshair&&r[y].crosshair.enabled&&(x=!0,c.clearedOverlayedCanvas=r[y].type);if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderStripLinesOfThicknessType("pixel"),d[y].crosshair&&d[y].crosshair.enabled&&(x=!0,c.clearedOverlayedCanvas=d[y].type);if(h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderStripLinesOfThicknessType("pixel"),h[y].crosshair&&h[y].crosshair.enabled&&(x=!0,c.clearedOverlayedCanvas=h[y].type);if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderStripLinesOfThicknessType("pixel"),o[y].crosshair&&o[y].crosshair.enabled&&(x=!0,c.clearedOverlayedCanvas=o[y].type);(x||!x&&c.clearedOverlayedCanvas&&0<=c.clearedOverlayedCanvas.indexOf("axis"))&&(c.resetOverlayedCanvas(),c.renderCrosshairs(null,m(c.sessionVariables.crosshairShownByPixel)||c.sessionVariables.crosshairShownByPixel?!0:c.sessionVariables.crosshairShownByPixel))},ke.prototype.calculateStripLinesThicknessInValues=function(){for(var r=0;r<this.stripLines.length;r++)if(this.stripLines[r].startValue!==null&&this.stripLines[r].endValue!==null){var d=Math.min(this.stripLines[r].startValue,this.stripLines[r].endValue),h=Math.max(this.stripLines[r].startValue,this.stripLines[r].endValue),o=this.getApparentDifference(d,h);this.stripLines[r].value=this.convertPixelToValue((this.convertValueToPixel(d)+this.convertValueToPixel(h))/2),this.stripLines[r].thickness=o,this.stripLines[r]._thicknessType="value"}},ke.prototype.calculateBreaksSizeInValues=function(){for(var r=this._position==="left"||this._position==="right"?this.lineCoordinates.height||this.chart.height:this.lineCoordinates.width||this.chart.width,d=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],h=this.conversionParameters.pixelPerUnit||r/(this.logarithmic?this.conversionParameters.maximum/this.conversionParameters.minimum:this.conversionParameters.maximum-this.conversionParameters.minimum),o=this.scaleBreaks&&!m(this.scaleBreaks.options.spacing),c,x=0;x<d.length;x++)c=o||!m(d[x].options.spacing),d[x].spacing=Q(d[x].spacing,r,8,c?.1*r:8,c?0:3)<<0,d[x].size=0>d[x].spacing?0:Math.abs(d[x].spacing/h),this.logarithmic&&(d[x].size=Math.pow(this.logarithmBase,d[x].size))},ke.prototype.calculateBreaksInPixels=function(){if(!(this.scaleBreaks&&0>=this.scaleBreaks._appliedBreaks.length)){var r=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];r.length&&(this.scaleBreaks.firstBreakIndex=this.scaleBreaks.lastBreakIndex=null);for(var d=0;d<r.length&&!(r[d].startValue>this.conversionParameters.maximum);d++)r[d].endValue<this.conversionParameters.minimum||(m(this.scaleBreaks.firstBreakIndex)&&(this.scaleBreaks.firstBreakIndex=d),r[d].startValue>=this.conversionParameters.minimum&&(r[d].startPixel=this.convertValueToPixel(r[d].startValue),this.scaleBreaks.lastBreakIndex=d),r[d].endValue<=this.conversionParameters.maximum&&(r[d].endPixel=this.convertValueToPixel(r[d].endValue)))}},ke.prototype.renderLabelsTicksAndTitle=function(){var r=this,d=!1,h=0,o=0,c=1,x=0;if(this.labelAngle!==0&&this.labelAngle!==360&&(c=1.2),typeof this.options.interval>"u"){if(this._position==="bottom"||this._position==="top")if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){for(var h=[],c=this.labelAngle!==0&&this.labelAngle!==360?1:1.2,y,S=this.viewportMaximum,E=this.lineCoordinates.width/Math.log(this.range),v=this._labels.length-1;0<=v&&(b=this._labels[v],!(b.position<this.viewportMinimum));v--)b.position>this.viewportMaximum||!(v===this._labels.length-1||y<Math.log(S/b.position)*E/c)||(h.push(b),S=b.position,y=b.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=h}else{for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||(y=b.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)),h+=y);h>this.lineCoordinates.width*c&&this.labelAutoFit&&(d=!0)}if(this._position==="left"||this._position==="right")if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){for(var h=[],w,S=this.viewportMaximum,E=this.lineCoordinates.height/Math.log(this.range),v=this._labels.length-1;0<=v&&(b=this._labels[v],!(b.position<this.viewportMinimum));v--)b.position>this.viewportMaximum||!(v===this._labels.length-1||w<Math.log(S/b.position)*E)||(h.push(b),S=b.position,w=b.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=h}else{for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||(w=b.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)),o+=w);o>this.lineCoordinates.height*c&&this.labelAutoFit&&(d=!0)}}this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit&&this._labels.sort(function(u,I){return u.position-I.position});var v=0,b,C;if(this._position==="bottom"){for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(C=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(C.x<<0)+.5:C.x<<0,this.ctx.beginPath(),this.ctx.moveTo(o,C.y<<0),this.ctx.lineTo(o,C.y+this.tickLength<<0),this.ctx.stroke()),d&&x++%2!==0&&this.labelAutoFit||(b.textBlock.angle===0?(C.x-=b.textBlock.width/2,C.y=this.labelPlacement==="inside"?C.y-((this.tickPlacement==="inside"?this.tickLength:0)+b.textBlock.height-b.textBlock.fontSize/2):C.y+(this.tickPlacement==="inside"?0:this.tickLength)+b.textBlock.fontSize/2+5):0>this.labelAngle?(C.x-=this.labelPlacement==="inside"?0:b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle),C.y=this.labelPlacement==="inside"?C.y-(this.tickPlacement==="inside"?this.tickLength:0)-(b.textBlock.height-b.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle):C.y+(this.tickPlacement==="inside"?0:this.tickLength)+5+Math.abs(b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-b.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle))):(C.x-=this.labelPlacement==="inside"?b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,C.y=this.labelPlacement==="inside"?C.y-(this.tickPlacement==="inside"?this.tickLength:0)-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-(b.textBlock.height-b.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle):C.y+(this.tickPlacement==="inside"?0:this.tickLength)+5+Math.abs(b.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle))),b.textBlock.x=C.x,b.textBlock.y=C.y));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(v=0;v<r._labels.length;v++)if(b=r._labels[v],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(C=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var u=r.ctx.lineWidth%2===1?(C.x<<0)+.5:C.x<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(u,C.y<<0),r.ctx.lineTo(u,C.y-r.tickLength<<0),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y2-this._titleTextBlock.height+this._titleTextBlock._lineHeight/2-1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="top"){for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(C=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(C.x<<0)+.5:C.x<<0,this.ctx.beginPath(),this.ctx.moveTo(o,C.y<<0),this.ctx.lineTo(o,C.y-this.tickLength<<0),this.ctx.stroke()),d&&x++%2!==0&&this.labelAutoFit||(b.textBlock.angle===0?(C.x-=b.textBlock.width/2,C.y=this.labelPlacement==="inside"?C.y+this.labelFontSize/2+(this.tickPlacement==="inside"?this.tickLength:0)+5:C.y-((this.tickPlacement==="inside"?0:this.tickLength)+b.textBlock.height-b.textBlock.fontSize/2)):0>this.labelAngle?(C.x-=this.labelPlacement==="inside"?b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,C.y=this.labelPlacement==="inside"?C.y+(this.tickPlacement==="inside"?this.tickLength:0)+5-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+b.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle):C.y-(this.tickPlacement==="inside"?0:this.tickLength)-2-(b.textBlock.height-b.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)):(C.x-=this.labelPlacement==="inside"?0:b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle),C.y=this.labelPlacement==="inside"?C.y+(this.tickPlacement==="inside"?this.tickLength:0)+5+b.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle):C.y-(this.tickPlacement==="inside"?0:this.tickLength)-2-((b.textBlock.height-b.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)+b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle))),b.textBlock.x=C.x,b.textBlock.y=C.y));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(v=0;v<r._labels.length;v++)if(b=r._labels[v],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(C=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var u=r.ctx.lineWidth%2===1?(C.x<<0)+.5:C.x<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(u,C.y<<0),r.ctx.lineTo(u,C.y+r.tickLength<<0),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y1+this._titleTextBlock._lineHeight/2+1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="left"){for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(C=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(C.y<<0)+.5:C.y<<0,this.ctx.beginPath(),this.ctx.moveTo(C.x<<0,o),this.ctx.lineTo(C.x-this.tickLength<<0,o),this.ctx.stroke()),d&&x++%2!==0&&this.labelAutoFit||(this.labelAngle===0?(b.textBlock.y=C.y,b.textBlock.x=this.labelPlacement==="inside"?C.x+(this.tickPlacement==="inside"?this.tickLength:0)+5:C.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?0:this.tickLength)-5):0>this.labelAngle?(b.textBlock.y=this.labelPlacement==="inside"?C.y:C.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),b.textBlock.x=this.labelPlacement==="inside"?C.x-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?this.tickLength:0)+5:C.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?0:this.tickLength)-5):(b.textBlock.y=this.labelPlacement==="inside"?C.y:C.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),b.textBlock.x=this.labelPlacement==="inside"?C.x+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?this.tickLength:0)+5:C.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?0:this.tickLength)-5)));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(v=0;v<r._labels.length;v++)if(b=r._labels[v],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(C=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var u=r.ctx.lineWidth%2===1?(C.y<<0)+.5:C.y<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(C.x<<0,u),r.ctx.lineTo(C.x+r.tickLength<<0,u),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x1+this._titleTextBlock._lineHeight/2,this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="right"){for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(C=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(C.y<<0)+.5:C.y<<0,this.ctx.beginPath(),this.ctx.moveTo(C.x<<0,o),this.ctx.lineTo(C.x+this.tickLength<<0,o),this.ctx.stroke()),d&&x++%2!==0&&this.labelAutoFit||(this.labelAngle===0?(b.textBlock.y=C.y,b.textBlock.x=this.labelPlacement==="inside"?C.x-b.textBlock.width-(this.tickPlacement==="inside"?this.tickLength:0)-5:C.x+(this.tickPlacement==="inside"?0:this.tickLength)+5):0>this.labelAngle?(b.textBlock.y=this.labelPlacement==="inside"?C.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):C.y,b.textBlock.x=this.labelPlacement==="inside"?C.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?this.tickLength:0)-5:C.x-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?0:this.tickLength)+5):(b.textBlock.y=this.labelPlacement==="inside"?C.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):C.y,b.textBlock.x=this.labelPlacement==="inside"?C.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?this.tickLength:0)-5:C.x+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?0:this.tickLength)+5)));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(v=0;v<r._labels.length;v++)if(b=r._labels[v],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(C=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var u=r.ctx.lineWidth%2===1?(C.y<<0)+.5:C.y<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(C.x<<0,u),r.ctx.lineTo(C.x-r.tickLength<<0,u),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x2-this._titleTextBlock._lineHeight/2,this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}if(x=0,this.labelPlacement==="inside")this.chart.addEventListener("dataAnimationIterationEnd",function(){for(v=0;v<r._labels.length;v++)b=r._labels[v],b.position<r.viewportMinimum||b.position>r.viewportMaximum||d&&x++%2!==0&&r.labelAutoFit||(r.ctx.save(),r.ctx.beginPath(),b.textBlock.render(!0),r.ctx.restore())},this);else for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||b.position>this.viewportMaximum||d&&x++%2!==0&&this.labelAutoFit||b.textBlock.render(!0)},ke.prototype.renderInterlacedColors=function(){var r=this.chart.plotArea.ctx,d,h,o=this.chart.plotArea,c=0;if(d=!0,(this._position==="bottom"||this._position==="top")&&this.interlacedColor)for(r.fillStyle=this.interlacedColor,c=0;c<this._labels.length;c++)d?(d=this.getPixelCoordinatesOnAxis(this._labels[c].position),h=c+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[c+1].position),r.fillRect(Math.min(h.x,d.x),o.y1,Math.abs(h.x-d.x),Math.abs(o.y1-o.y2)),d=!1):d=!0;else if((this._position==="left"||this._position==="right")&&this.interlacedColor)for(r.fillStyle=this.interlacedColor,c=0;c<this._labels.length;c++)d?(h=this.getPixelCoordinatesOnAxis(this._labels[c].position),d=c+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[c+1].position),r.fillRect(o.x1,Math.min(h.y,d.y),Math.abs(o.x1-o.x2),Math.abs(d.y-h.y)),d=!1):d=!0;r.beginPath()},ke.prototype.renderStripLinesOfThicknessType=function(r){if(this.stripLines&&0<this.stripLines.length&&r){var d=this,h,o,c=0,x=0,y=!1;o=!1;for(var S=[],E=[],w=!1,v,c=0;c<this.stripLines.length;c++){var b=this.stripLines[c];b._thicknessType===r&&(r==="pixel"&&(b.value<this.viewportMinimum||b.value>this.viewportMaximum||m(b.value)||isNaN(this.range))||r==="value"&&(b.startValue<=this.viewportMinimum&&b.endValue<=this.viewportMinimum||b.startValue>=this.viewportMaximum&&b.endValue>=this.viewportMaximum||m(b.startValue)||m(b.endValue)||isNaN(this.range))||S.push(b))}for(c=0;c<this._stripLineLabels.length;c++)if(b=this.stripLines[c],h=this._stripLineLabels[c],!(h.position<this.viewportMinimum||h.position>this.viewportMaximum||isNaN(this.range)))if(o=this.getPixelCoordinatesOnAxis(h.position),h.stripLine.labelPlacement==="outside"){if(b&&(this.ctx.strokeStyle=b.color,this.ctx.lineWidth=b._thicknessType==="pixel"?b.thickness:this.tickThickness,m(b.opacity)||b._thicknessType!=="pixel"||(v=b.ctx.globalAlpha,b.ctx.globalAlpha=b.opacity)),this._position==="bottom"){var C=this.ctx.lineWidth%2===1?(o.x<<0)+.5:o.x<<0;this.ctx.beginPath(),this.ctx.moveTo(C,o.y<<0),this.ctx.lineTo(C,o.y+this.tickLength<<0),this.ctx.stroke(),this.labelAngle===0?(o.x-=h.textBlock.width/2,o.y+=this.tickLength+h.textBlock.fontSize/2+5):(o.x-=0>this.labelAngle?h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,o.y+=this.tickLength+5+(0>this.labelAngle?Math.abs(h.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-h.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle)):Math.abs(h.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle))))}else this._position==="top"?(C=this.ctx.lineWidth%2===1?(o.x<<0)+.5:o.x<<0,this.ctx.beginPath(),this.ctx.moveTo(C,o.y<<0),this.ctx.lineTo(C,o.y-this.tickLength<<0),this.ctx.stroke(),this.labelAngle===0?(o.x-=h.textBlock.width/2,o.y-=this.tickLength+h.textBlock.height-h.textBlock.fontSize/2):(o.x-=0<this.labelAngle?h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,o.y-=this.tickLength+2+(0<this.labelAngle?(h.textBlock.height-h.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)+h.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):(h.textBlock.height-h.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)))):this._position==="left"?(C=this.ctx.lineWidth%2===1?(o.y<<0)+.5:o.y<<0,this.ctx.beginPath(),this.ctx.moveTo(o.x<<0,C),this.ctx.lineTo(o.x-this.tickLength<<0,C),this.ctx.stroke(),this.labelAngle===0?o.x=o.x-h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:(o.y-=h.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),o.x-=this.tickLength+5+(0<this.labelAngle?h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+h.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle):h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-(h.textBlock.height-h.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)))):this._position==="right"&&(C=this.ctx.lineWidth%2===1?(o.y<<0)+.5:o.y<<0,this.ctx.beginPath(),this.ctx.moveTo(o.x<<0,C),this.ctx.lineTo(o.x+this.tickLength<<0,C),this.ctx.stroke(),o.x=this.labelAngle===0?o.x+this.tickLength+5:this.tickLength+5+(0<this.labelAngle?o.x+(h.textBlock.height-h.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle):o.x-h.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)));v&&(b.ctx.globalAlpha=v),h.textBlock.x=o.x,h.textBlock.y=o.y,E.push(h)}else b._thicknessType===r&&(h.textBlock.angle=-90,this._position==="bottom"?(h.textBlock.maxWidth=this.options.stripLines[c].labelMaxWidth?this.options.stripLines[c].labelMaxWidth:this.chart.plotArea.height-3,h.textBlock.measureText(),o.x-h.textBlock.height-b.thickness/2>this.chart.plotArea.x1?m(b.startValue)?o.x-=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.x-=h.textBlock.height/2-h.textBlock.fontSize/2:(h.textBlock.angle=90,m(b.startValue)?o.x+=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.x+=h.textBlock.height/2-h.textBlock.fontSize/2),o.y=h.textBlock.angle===-90?h.stripLine.labelAlign==="near"?this.chart.plotArea.y2-3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1+h.textBlock.width)/2:this.chart.plotArea.y1+h.textBlock.width+3:h.stripLine.labelAlign==="near"?this.chart.plotArea.y2-h.textBlock.width-3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1-h.textBlock.width)/2:this.chart.plotArea.y1+3):this._position==="top"?(h.textBlock.maxWidth=this.options.stripLines[c].labelMaxWidth?this.options.stripLines[c].labelMaxWidth:this.chart.plotArea.height-3,h.textBlock.measureText(),o.x-h.textBlock.height-b.thickness/2>this.chart.plotArea.x1?m(b.startValue)?o.x-=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.x-=h.textBlock.height/2-h.textBlock.fontSize/2:(h.textBlock.angle=90,m(b.startValue)?o.x+=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.x+=h.textBlock.height/2-h.textBlock.fontSize/2),o.y=h.textBlock.angle===-90?h.stripLine.labelAlign==="near"?this.chart.plotArea.y1+h.textBlock.width+3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1+h.textBlock.width)/2:this.chart.plotArea.y2-3:h.stripLine.labelAlign==="near"?this.chart.plotArea.y1+3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1-h.textBlock.width)/2:this.chart.plotArea.y2-h.textBlock.width-3):this._position==="left"?(h.textBlock.maxWidth=this.options.stripLines[c].labelMaxWidth?this.options.stripLines[c].labelMaxWidth:this.chart.plotArea.width-3,h.textBlock.angle=0,h.textBlock.measureText(),o.y-h.textBlock.height-b.thickness/2>this.chart.plotArea.y1?m(b.startValue)?o.y-=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.y-=h.textBlock.height/2-h.textBlock.fontSize/2:m(b.startValue)?o.y+=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.y+=h.textBlock.height/2-h.textBlock.fontSize+3,o.x=h.stripLine.labelAlign==="near"?this.chart.plotArea.x1+3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-h.textBlock.width/2:this.chart.plotArea.x2-h.textBlock.width-3):this._position==="right"&&(h.textBlock.maxWidth=this.options.stripLines[c].labelMaxWidth?this.options.stripLines[c].labelMaxWidth:this.chart.plotArea.width-3,h.textBlock.angle=0,h.textBlock.measureText(),o.y-h.textBlock.height-b.thickness/2>this.chart.plotArea.y1?m(b.startValue)?o.y-=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.y-=h.textBlock.height/2-h.textBlock.fontSize/2:m(b.startValue)?o.y+=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.y-=h.textBlock.height/2-h.textBlock.fontSize/2+3,o.x=h.stripLine.labelAlign==="near"?this.chart.plotArea.x2-h.textBlock.width-3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-h.textBlock.width/2:this.chart.plotArea.x1+3),h.textBlock.x=o.x,h.textBlock.y=o.y,E.push(h));if(!w){for(o=!1,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),c=0;c<S.length;c++)b=S[c],b.showOnTop?y||(y=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),x=0;x<S.length;x++)b=S[x],b.showOnTop&&b.render();this.ctx.restore()},b)):b.render();for(c=0;c<E.length;c++)h=E[c],h.stripLine.showOnTop?o||(o=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(x=0;x<E.length;x++)h=E[x],h.stripLine.labelPlacement==="inside"&&h.stripLine.showOnTop&&(d.ctx.save(),d.ctx.beginPath(),d.ctx.rect(d.chart.plotArea.x1,d.chart.plotArea.y1,d.chart.plotArea.width,d.chart.plotArea.height),d.ctx.clip(),h.textBlock.render(!0),d.ctx.restore())},h.textBlock)):h.stripLine.labelPlacement==="inside"&&h.textBlock.render(!0);this.ctx.restore(),w=!0}if(w)for(o=!1,c=0;c<E.length;c++)h=E[c],h.stripLine.labelPlacement==="outside"&&h.textBlock.render(!0)}},ke.prototype.renderBreaksBackground=function(){this.chart._breaksCanvas&&this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length&&this.maskCanvas&&(this.chart._breaksCanvasCtx.save(),this.chart._breaksCanvasCtx.beginPath(),this.chart._breaksCanvasCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.chart._breaksCanvasCtx.clip(),this.chart._breaksCanvasCtx.drawImage(this.maskCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx.restore())},ke.prototype.createMask=function(){if(this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length){var r=this.scaleBreaks._appliedBreaks;X?(this.maskCanvas=G(this.chart.width,this.chart.height),this.maskCtx=this.maskCanvas.getContext("2d")):(this.maskCanvas=this.chart.plotArea.canvas,this.maskCtx=this.chart.plotArea.ctx),this.maskCtx.save(),this.maskCtx.beginPath(),this.maskCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.maskCtx.clip();for(var d=0;d<r.length;d++)r[d].endValue<this.viewportMinimum||r[d].startValue>this.viewportMaximum||isNaN(this.range)||r[d].render(this.maskCtx);this.maskCtx.restore()}},ke.prototype.renderCrosshair=function(r,d){isFinite(this.minimum)&&isFinite(this.maximum)&&this.crosshair.render(r,d)},ke.prototype.showCrosshair=function(r){m(r)||r<this.viewportMinimum||r>this.viewportMaximum||(this._position==="top"||this._position==="bottom"?this.crosshair.render(this.convertValueToPixel(r),null,r):this.crosshair.render(null,this.convertValueToPixel(r),r))},ke.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var r=this.chart.ctx;r.save();var d,h=this.chart.plotArea;if(r.lineWidth=this.gridThickness,r.strokeStyle=this.gridColor,r.setLineDash&&r.setLineDash(P(this.gridDashType,this.gridThickness)),this._position==="bottom"||this._position==="top")for(o=0;o<this._labels.length;o++)this._labels[o].position<this.viewportMinimum||this._labels[o].position>this.viewportMaximum||this._labels[o].breaksLabelType||(r.beginPath(),d=this.getPixelCoordinatesOnAxis(this._labels[o].position),d=r.lineWidth%2===1?(d.x<<0)+.5:d.x<<0,r.moveTo(d,h.y1<<0),r.lineTo(d,h.y2<<0),r.stroke());else if(this._position==="left"||this._position==="right")for(var o=0;o<this._labels.length;o++)this._labels[o].position<this.viewportMinimum||this._labels[o].position>this.viewportMaximum||this._labels[o].breaksLabelType||(r.beginPath(),d=this.getPixelCoordinatesOnAxis(this._labels[o].position),d=r.lineWidth%2===1?(d.y<<0)+.5:d.y<<0,r.moveTo(h.x1<<0,d),r.lineTo(h.x2<<0,d),r.stroke());r.restore()}},ke.prototype.renderAxisLine=function(){var r=this.chart.ctx,d=X?this.chart._preRenderCtx:r,h=Math.ceil(this.tickThickness/(this.reversed?-2:2)),o=Math.ceil(this.tickThickness/(this.reversed?2:-2)),c,x;if(d.save(),this._position==="bottom"||this._position==="top"){if(this.lineThickness){this.reversed?(c=this.lineCoordinates.x2,x=this.lineCoordinates.x1):(c=this.lineCoordinates.x1,x=this.lineCoordinates.x2),d.lineWidth=this.lineThickness,d.strokeStyle=this.lineColor?this.lineColor:"black",d.setLineDash&&d.setLineDash(P(this.lineDashType,this.lineThickness));var y=this.lineThickness%2===1?(this.lineCoordinates.y1<<0)+.5:this.lineCoordinates.y1<<0;if(d.beginPath(),this.scaleBreaks&&!m(this.scaleBreaks.firstBreakIndex))if(m(this.scaleBreaks.lastBreakIndex))c=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+o;else for(var S=this.scaleBreaks.firstBreakIndex;S<=this.scaleBreaks.lastBreakIndex;S++)d.moveTo(c,y),d.lineTo(this.scaleBreaks._appliedBreaks[S].startPixel+h,y),c=this.scaleBreaks._appliedBreaks[S].endPixel+o;c&&(d.moveTo(c,y),d.lineTo(x,y)),d.stroke()}}else if((this._position==="left"||this._position==="right")&&this.lineThickness){if(this.reversed?(c=this.lineCoordinates.y1,x=this.lineCoordinates.y2):(c=this.lineCoordinates.y2,x=this.lineCoordinates.y1),d.lineWidth=this.lineThickness,d.strokeStyle=this.lineColor,d.setLineDash&&d.setLineDash(P(this.lineDashType,this.lineThickness)),y=this.lineThickness%2===1?(this.lineCoordinates.x1<<0)+.5:this.lineCoordinates.x1<<0,d.beginPath(),this.scaleBreaks&&!m(this.scaleBreaks.firstBreakIndex))if(m(this.scaleBreaks.lastBreakIndex))c=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+h;else for(S=this.scaleBreaks.firstBreakIndex;S<=this.scaleBreaks.lastBreakIndex;S++)d.moveTo(y,c),d.lineTo(y,this.scaleBreaks._appliedBreaks[S].startPixel+o),c=this.scaleBreaks._appliedBreaks[S].endPixel+h;c&&(d.moveTo(y,c),d.lineTo(y,x)),d.stroke()}X&&(r.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx&&this.chart._breaksCanvasCtx.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),d.clearRect(0,0,this.chart.width,this.chart.height)),d.restore()},ke.prototype.getPixelCoordinatesOnAxis=function(r){var d={};return(this._position==="bottom"||this._position==="top")&&(d.x=this.convertValueToPixel(r),d.y=this.lineCoordinates.y1),(this._position==="left"||this._position==="right")&&(d.y=this.convertValueToPixel(r),d.x=this.lineCoordinates.x2),d},ke.prototype.convertPixelToValue=function(r){if(typeof r>"u")return null;var h=0,c=0,d,h=!0,o=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],c=typeof r=="number"?r:this._position==="left"||this._position==="right"?r.y:r.x;if(this.logarithmic){if(r=d=Math.pow(this.logarithmBase,(c-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit),c<=this.conversionParameters.reference==(this._position==="left"||this._position==="right")!==this.reversed){for(c=0;c<o.length;c++)if(!(o[c].endValue<this.conversionParameters.minimum))if(h)if(o[c].startValue<this.conversionParameters.minimum){if(1<o[c].size&&this.conversionParameters.minimum*Math.pow(o[c].endValue/o[c].startValue,Math.log(d)/Math.log(o[c].size))<o[c].endValue){r=Math.pow(o[c].endValue/o[c].startValue,Math.log(d)/Math.log(o[c].size));break}else r*=o[c].endValue/this.conversionParameters.minimum/Math.pow(o[c].size,Math.log(o[c].endValue/this.conversionParameters.minimum)/Math.log(o[c].endValue/o[c].startValue)),d/=Math.pow(o[c].size,Math.log(o[c].endValue/this.conversionParameters.minimum)/Math.log(o[c].endValue/o[c].startValue));h=!1}else if(d>o[c].startValue/this.conversionParameters.minimum){if(d/=o[c].startValue/this.conversionParameters.minimum,d<o[c].size){r*=Math.pow(o[c].endValue/o[c].startValue,o[c].size===1?1:Math.log(d)/Math.log(o[c].size))/d;break}else r*=o[c].endValue/o[c].startValue/o[c].size;d/=o[c].size,h=!1}else break;else if(d>o[c].startValue/o[c-1].endValue){if(d/=o[c].startValue/o[c-1].endValue,d<o[c].size){r*=Math.pow(o[c].endValue/o[c].startValue,o[c].size===1?1:Math.log(d)/Math.log(o[c].size))/d;break}else r*=o[c].endValue/o[c].startValue/o[c].size;d/=o[c].size}else break}else for(c=o.length-1;0<=c;c--)if(!(o[c].startValue>this.conversionParameters.minimum))if(h)if(o[c].endValue>this.conversionParameters.minimum){if(1<o[c].size&&this.conversionParameters.minimum*Math.pow(o[c].endValue/o[c].startValue,Math.log(d)/Math.log(o[c].size))>o[c].startValue){r=Math.pow(o[c].endValue/o[c].startValue,Math.log(d)/Math.log(o[c].size));break}else r*=o[c].startValue/this.conversionParameters.minimum*Math.pow(o[c].size,Math.log(o[c].startValue/this.conversionParameters.minimum)/Math.log(o[c].endValue/o[c].startValue))*d,d*=Math.pow(o[c].size,Math.log(this.conversionParameters.minimum/o[c].startValue)/Math.log(o[c].endValue/o[c].startValue));h=!1}else if(d<o[c].endValue/this.conversionParameters.minimum){if(d/=o[c].endValue/this.conversionParameters.minimum,d>1/o[c].size){r*=Math.pow(o[c].endValue/o[c].startValue,1>=o[c].size?1:Math.log(d)/Math.log(o[c].size))*d;break}else r/=o[c].endValue/o[c].startValue/o[c].size;d*=o[c].size,h=!1}else break;else if(d<o[c].endValue/o[c+1].startValue){if(d/=o[c].endValue/o[c+1].startValue,d>1/o[c].size){r*=Math.pow(o[c].endValue/o[c].startValue,1>=o[c].size?1:Math.log(d)/Math.log(o[c].size))*d;break}else r/=o[c].endValue/o[c].startValue/o[c].size;d*=o[c].size}else break;h=r*this.viewportMinimum}else{if(r=d=(c-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit,c<=this.conversionParameters.reference==(this._position==="left"||this._position==="right")!==this.reversed){for(c=0;c<o.length;c++)if(!(o[c].endValue<this.conversionParameters.minimum))if(h)if(o[c].startValue<this.conversionParameters.minimum){if(o[c].size&&this.conversionParameters.minimum+d*(o[c].endValue-o[c].startValue)/o[c].size<o[c].endValue){r=0>=o[c].size?0:d*(o[c].endValue-o[c].startValue)/o[c].size;break}else r+=o[c].endValue-this.conversionParameters.minimum-o[c].size*(o[c].endValue-this.conversionParameters.minimum)/(o[c].endValue-o[c].startValue),d-=o[c].size*(o[c].endValue-this.conversionParameters.minimum)/(o[c].endValue-o[c].startValue);h=!1}else if(d>o[c].startValue-this.conversionParameters.minimum){if(d-=o[c].startValue-this.conversionParameters.minimum,d<o[c].size){r+=(o[c].endValue-o[c].startValue)*(o[c].size===0?1:d/o[c].size)-d;break}else r+=o[c].endValue-o[c].startValue-o[c].size;d-=o[c].size,h=!1}else break;else if(d>o[c].startValue-o[c-1].endValue){if(d-=o[c].startValue-o[c-1].endValue,d<o[c].size){r+=(o[c].endValue-o[c].startValue)*(o[c].size===0?1:d/o[c].size)-d;break}else r+=o[c].endValue-o[c].startValue-o[c].size;d-=o[c].size}else break}else for(c=o.length-1;0<=c;c--)if(!(o[c].startValue>this.conversionParameters.minimum))if(h)if(o[c].endValue>this.conversionParameters.minimum)if(o[c].size&&this.conversionParameters.minimum+d*(o[c].endValue-o[c].startValue)/o[c].size>o[c].startValue){r=0>=o[c].size?0:d*(o[c].endValue-o[c].startValue)/o[c].size;break}else r+=o[c].startValue-this.conversionParameters.minimum+o[c].size*(this.conversionParameters.minimum-o[c].startValue)/(o[c].endValue-o[c].startValue),d+=o[c].size*(this.conversionParameters.minimum-o[c].startValue)/(o[c].endValue-o[c].startValue),h=!1;else if(d<o[c].endValue-this.conversionParameters.minimum){if(d-=o[c].endValue-this.conversionParameters.minimum,d>-1*o[c].size){r+=(o[c].endValue-o[c].startValue)*(o[c].size===0?1:d/o[c].size)+d;break}else r-=o[c].endValue-o[c].startValue-o[c].size;d+=o[c].size,h=!1}else break;else if(d<o[c].endValue-o[c+1].startValue){if(d-=o[c].endValue-o[c+1].startValue,d>-1*o[c].size){r+=(o[c].endValue-o[c].startValue)*(o[c].size===0?1:d/o[c].size)+d;break}else r-=o[c].endValue-o[c].startValue-o[c].size;d+=o[c].size}else break;h=this.conversionParameters.minimum+r}return h},ke.prototype.convertValueToPixel=function(r){return r=this.getApparentDifference(this.conversionParameters.minimum,r,r),this.logarithmic?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*Math.log(r/this.conversionParameters.minimum)/this.conversionParameters.lnLogarithmBase+.5<<0:this.type==="axisX"?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(r-this.conversionParameters.minimum)+.5<<0:this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(r-this.conversionParameters.minimum)+.5},ke.prototype.getApparentDifference=function(r,d,h,o){var c=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];if(this.logarithmic){h=m(h)?d/r:h;for(var x=0;x<c.length&&!(d<c[x].startValue);x++)r>c[x].endValue||(r<=c[x].startValue&&d>=c[x].endValue?h=h/c[x].endValue*c[x].startValue*c[x].size:r>=c[x].startValue&&d>=c[x].endValue?h=h/c[x].endValue*r*Math.pow(c[x].size,Math.log(c[x].endValue/r)/Math.log(c[x].endValue/c[x].startValue)):r<=c[x].startValue&&d<=c[x].endValue?h=h/d*c[x].startValue*Math.pow(c[x].size,Math.log(d/c[x].startValue)/Math.log(c[x].endValue/c[x].startValue)):!o&&r>c[x].startValue&&d<c[x].endValue&&(h=r*Math.pow(c[x].size,Math.log(d/r)/Math.log(c[x].endValue/c[x].startValue))))}else for(h=m(h)?Math.abs(d-r):h,x=0;x<c.length&&!(d<c[x].startValue);x++)r>c[x].endValue||(r<=c[x].startValue&&d>=c[x].endValue?h=h-c[x].endValue+c[x].startValue+c[x].size:r>c[x].startValue&&d>=c[x].endValue?h=h-c[x].endValue+r+c[x].size*(c[x].endValue-r)/(c[x].endValue-c[x].startValue):r<=c[x].startValue&&d<c[x].endValue?h=h-d+c[x].startValue+c[x].size*(d-c[x].startValue)/(c[x].endValue-c[x].startValue):!o&&r>c[x].startValue&&d<c[x].endValue&&(h=r+c[x].size*(d-r)/(c[x].endValue-c[x].startValue)));return h},ke.prototype.setViewPortRange=function(r,d){this.sessionVariables.newViewportMinimum=this.viewportMinimum=Math.min(r,d),this.sessionVariables.newViewportMaximum=this.viewportMaximum=Math.max(r,d)},ke.prototype.getXValueAt=function(r){if(!r)return null;var d=null;return this._position==="left"?d=this.convertPixelToValue(r.y):this._position==="bottom"&&(d=this.convertPixelToValue(r.x)),d},ke.prototype.calculateValueToPixelConversionParameters=function(r){r=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];var d={pixelPerUnit:null,minimum:null,reference:null},h=this.lineCoordinates.width,o=this.lineCoordinates.height,h=this._position==="bottom"||this._position==="top"?h:o,o=Math.abs(this.range);if(this.logarithmic)for(var c=0;c<r.length&&!(this.viewportMaximum<r[c].startValue);c++)this.viewportMinimum>r[c].endValue||(this.viewportMinimum>=r[c].startValue&&this.viewportMaximum<=r[c].endValue?h=0:this.viewportMinimum<=r[c].startValue&&this.viewportMaximum>=r[c].endValue?(o=o/r[c].endValue*r[c].startValue,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100):h-Math.min(r[c].spacing,.1*h)):this.viewportMinimum>r[c].startValue&&this.viewportMaximum>=r[c].endValue?(o=o/r[c].endValue*this.viewportMinimum,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100*Math.log(r[c].endValue/this.viewportMinimum)/Math.log(r[c].endValue/r[c].startValue)):h-Math.min(r[c].spacing,.1*h)*Math.log(r[c].endValue/this.viewportMinimum)/Math.log(r[c].endValue/r[c].startValue)):this.viewportMinimum<=r[c].startValue&&this.viewportMaximum<r[c].endValue&&(o=o/this.viewportMaximum*r[c].startValue,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100*Math.log(this.viewportMaximum/r[c].startValue)/Math.log(r[c].endValue/r[c].startValue)):h-Math.min(r[c].spacing,.1*h)*Math.log(this.viewportMaximum/r[c].startValue)/Math.log(r[c].endValue/r[c].startValue)));else for(c=0;c<r.length&&!(this.viewportMaximum<r[c].startValue);c++)this.viewportMinimum>r[c].endValue||(this.viewportMinimum>=r[c].startValue&&this.viewportMaximum<=r[c].endValue?h=0:this.viewportMinimum<=r[c].startValue&&this.viewportMaximum>=r[c].endValue?(o=o-r[c].endValue+r[c].startValue,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100):h-Math.min(r[c].spacing,.1*h)):this.viewportMinimum>r[c].startValue&&this.viewportMaximum>=r[c].endValue?(o=o-r[c].endValue+this.viewportMinimum,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100*(r[c].endValue-this.viewportMinimum)/(r[c].endValue-r[c].startValue)):h-Math.min(r[c].spacing,.1*h)*(r[c].endValue-this.viewportMinimum)/(r[c].endValue-r[c].startValue)):this.viewportMinimum<=r[c].startValue&&this.viewportMaximum<r[c].endValue&&(o=o-this.viewportMaximum+r[c].startValue,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100*(this.viewportMaximum-r[c].startValue)/(r[c].endValue-r[c].startValue)):h-Math.min(r[c].spacing,.1*h)*(this.viewportMaximum-r[c].startValue)/(r[c].endValue-r[c].startValue)));d.minimum=this.viewportMinimum,d.maximum=this.viewportMaximum,d.range=o,(this._position==="bottom"||this._position==="top")&&(this.logarithmic?(d.lnLogarithmBase=Math.log(this.logarithmBase),d.pixelPerUnit=(this.reversed?-1:1)*h*d.lnLogarithmBase/Math.log(Math.abs(o))):d.pixelPerUnit=(this.reversed?-1:1)*h/Math.abs(o),d.reference=this.reversed?this.lineCoordinates.x2:this.lineCoordinates.x1),(this._position==="left"||this._position==="right")&&(this.logarithmic?(d.lnLogarithmBase=Math.log(this.logarithmBase),d.pixelPerUnit=(this.reversed?1:-1)*h*d.lnLogarithmBase/Math.log(Math.abs(o))):d.pixelPerUnit=(this.reversed?1:-1)*h/Math.abs(o),d.reference=this.reversed?this.lineCoordinates.y1:this.lineCoordinates.y2),this.conversionParameters=d},ke.prototype.calculateAxisParameters=function(){if(this.logarithmic)this.calculateLogarithmicAxisParameters();else{var h=this.chart.layoutManager.getFreeSpace(),r=!1,d=!1;this._position==="bottom"||this._position==="top"?(this.maxWidth=h.width,this.maxHeight=h.height):(this.maxWidth=h.height,this.maxHeight=h.width);var h=this.type==="axisX"?this.chart.plotInfo.axisPlacement==="xySwapped"?62:70:this.chart.plotInfo.axisPlacement==="xySwapped"?50:40,y=4;this.type==="axisX"&&(y=600>this.maxWidth?8:6);var h=Math.max(y,Math.floor(this.maxWidth/h)),o,c,x,y=0;if(!m(this.options.viewportMinimum)&&!m(this.options.viewportMaximum)&&this.options.viewportMinimum>=this.options.viewportMaximum&&(this.viewportMinimum=this.viewportMaximum=null),m(this.options.viewportMinimum)&&!m(this.sessionVariables.newViewportMinimum)&&!isNaN(this.sessionVariables.newViewportMinimum)?this.viewportMinimum=this.sessionVariables.newViewportMinimum:(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),m(this.options.viewportMaximum)&&!m(this.sessionVariables.newViewportMaximum)&&!isNaN(this.sessionVariables.newViewportMaximum)?this.viewportMaximum=this.sessionVariables.newViewportMaximum:(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks){for(y=0;y<this.scaleBreaks._appliedBreaks.length;y++)if((!m(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[y].startValue||!m(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[y].startValue||!m(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[y].startValue)&&(!m(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[y].endValue||!m(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[y].endValue||!m(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[y].endValue)){this.scaleBreaks._appliedBreaks.splice(y,1);break}}if(this.type==="axisX"){if(this.dataSeries&&0<this.dataSeries.length)for(o=0;o<this.dataSeries.length;o++)this.dataSeries[o].xValueType==="dateTime"&&(d=!0);o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,c=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,c-o===0&&(y=typeof this.options.interval>"u"?.4:this.options.interval,c+=y,o-=y),this.dataInfo.minDiff!==1/0?x=this.dataInfo.minDiff:1<c-o?x=.5*Math.abs(c-o):(x=1,d&&(r=!0))}else this.type==="axisY"&&(o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,c=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,isFinite(o)||isFinite(c)?isFinite(o)?isFinite(c)||(c=o):o=c:(c=typeof this.options.interval>"u"?-1/0:this.options.interval,o=typeof this.options.interval<"u"||isFinite(this.dataInfo.minDiff)?0:1/0),o===0&&c===0?(c+=9,o=0):c-o===0?(y=Math.min(Math.abs(.01*Math.abs(c)),5),c+=y,o-=y):o>c?(y=Math.min(.01*Math.abs(this.getApparentDifference(c,o,null,!0)),5),0<=c?o=c-y:c=isFinite(o)?o+y:0):(y=Math.min(.01*Math.abs(this.getApparentDifference(o,c,null,!0)),.05),c!==0&&(c+=y),o!==0&&(o-=y)),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<c-o?.5*Math.abs(c-o):1,this.includeZero&&(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&0<o&&(o=0),this.includeZero&&(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&0>c&&(c=0));y=this.getApparentDifference(isNaN(this.viewportMinimum)||this.viewportMinimum===null?o:this.viewportMinimum,isNaN(this.viewportMaximum)||this.viewportMaximum===null?c:this.viewportMaximum,null,!0),this.type==="axisX"&&d?(this.valueType="dateTime",this.intervalType||(y/1<=h?(this.interval=1,this.intervalType="millisecond"):y/2<=h?(this.interval=2,this.intervalType="millisecond"):y/5<=h?(this.interval=5,this.intervalType="millisecond"):y/10<=h?(this.interval=10,this.intervalType="millisecond"):y/20<=h?(this.interval=20,this.intervalType="millisecond"):y/50<=h?(this.interval=50,this.intervalType="millisecond"):y/100<=h?(this.interval=100,this.intervalType="millisecond"):y/200<=h?(this.interval=200,this.intervalType="millisecond"):y/250<=h?(this.interval=250,this.intervalType="millisecond"):y/300<=h?(this.interval=300,this.intervalType="millisecond"):y/400<=h?(this.interval=400,this.intervalType="millisecond"):y/500<=h?(this.interval=500,this.intervalType="millisecond"):y/(1*ht.secondDuration)<=h?(this.interval=1,this.intervalType="second"):y/(2*ht.secondDuration)<=h?(this.interval=2,this.intervalType="second"):y/(5*ht.secondDuration)<=h?(this.interval=5,this.intervalType="second"):y/(10*ht.secondDuration)<=h?(this.interval=10,this.intervalType="second"):y/(15*ht.secondDuration)<=h?(this.interval=15,this.intervalType="second"):y/(20*ht.secondDuration)<=h?(this.interval=20,this.intervalType="second"):y/(30*ht.secondDuration)<=h?(this.interval=30,this.intervalType="second"):y/(1*ht.minuteDuration)<=h?(this.interval=1,this.intervalType="minute"):y/(2*ht.minuteDuration)<=h?(this.interval=2,this.intervalType="minute"):y/(5*ht.minuteDuration)<=h?(this.interval=5,this.intervalType="minute"):y/(10*ht.minuteDuration)<=h?(this.interval=10,this.intervalType="minute"):y/(15*ht.minuteDuration)<=h?(this.interval=15,this.intervalType="minute"):y/(20*ht.minuteDuration)<=h?(this.interval=20,this.intervalType="minute"):y/(30*ht.minuteDuration)<=h?(this.interval=30,this.intervalType="minute"):y/(1*ht.hourDuration)<=h?(this.interval=1,this.intervalType="hour"):y/(2*ht.hourDuration)<=h?(this.interval=2,this.intervalType="hour"):y/(3*ht.hourDuration)<=h?(this.interval=3,this.intervalType="hour"):y/(6*ht.hourDuration)<=h?(this.interval=6,this.intervalType="hour"):y/(1*ht.dayDuration)<=h?(this.interval=1,this.intervalType="day"):y/(2*ht.dayDuration)<=h?(this.interval=2,this.intervalType="day"):y/(4*ht.dayDuration)<=h?(this.interval=4,this.intervalType="day"):y/(1*ht.weekDuration)<=h?(this.interval=1,this.intervalType="week"):y/(2*ht.weekDuration)<=h?(this.interval=2,this.intervalType="week"):y/(3*ht.weekDuration)<=h?(this.interval=3,this.intervalType="week"):y/(1*ht.monthDuration)<=h?(this.interval=1,this.intervalType="month"):y/(2*ht.monthDuration)<=h?(this.interval=2,this.intervalType="month"):y/(3*ht.monthDuration)<=h?(this.interval=3,this.intervalType="month"):y/(6*ht.monthDuration)<=h?(this.interval=6,this.intervalType="month"):(this.interval=y/(1*ht.yearDuration)<=h?1:y/(2*ht.yearDuration)<=h?2:y/(4*ht.yearDuration)<=h?4:Math.floor(ke.getNiceNumber(y/(h-1),!0)/ht.yearDuration),this.intervalType="year")),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=o-x/2),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=c+x/2),r?this.autoValueFormatString="MMM DD YYYY HH:mm":this.intervalType==="year"?this.autoValueFormatString="YYYY":this.intervalType==="month"?this.autoValueFormatString="MMM YYYY":this.intervalType==="week"?this.autoValueFormatString="MMM DD YYYY":this.intervalType==="day"?this.autoValueFormatString="MMM DD YYYY":this.intervalType==="hour"?this.autoValueFormatString="hh:mm TT":this.intervalType==="minute"?this.autoValueFormatString="hh:mm TT":this.intervalType==="second"?this.autoValueFormatString="hh:mm:ss TT":this.intervalType==="millisecond"&&(this.autoValueFormatString="fff'ms'"),this.valueFormatString||(this.valueFormatString=this.autoValueFormatString)):(this.intervalType="number",y=ke.getNiceNumber(y,!1),this.interval=this.options&&0<this.options.interval?this.options.interval:ke.getNiceNumber(y/(h-1),!0),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.type==="axisX"?o-x/2:Math.floor(o/this.interval)*this.interval),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.type==="axisX"?c+x/2:Math.ceil(c/this.interval)*this.interval),this.viewportMaximum===0&&this.viewportMinimum===0&&(this.options.viewportMinimum===0?this.viewportMaximum+=10:this.options.viewportMaximum===0&&(this.viewportMinimum-=10),this.options&&typeof this.options.interval>"u"&&(this.interval=ke.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(h-1),!0)))),(this.minimum===null||this.maximum===null)&&(this.type==="axisX"?(o=this.minimum!==null?this.minimum:this.dataInfo.min,c=this.maximum!==null?this.maximum:this.dataInfo.max,c-o===0&&(y=typeof this.options.interval>"u"?.4:this.options.interval,c+=y,o-=y),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<c-o?.5*Math.abs(c-o):1):this.type==="axisY"&&(o=this.minimum!==null?this.minimum:this.dataInfo.min,c=this.maximum!==null?this.maximum:this.dataInfo.max,isFinite(o)||isFinite(c)?o===0&&c===0?(c+=9,o=0):c-o===0?(y=Math.min(Math.abs(.01*Math.abs(c)),5),c+=y,o-=y):o>c?(y=Math.min(.01*Math.abs(this.getApparentDifference(c,o,null,!0)),5),0<=c?o=c-y:c=isFinite(o)?o+y:0):(y=Math.min(.01*Math.abs(this.getApparentDifference(o,c,null,!0)),.05),c!==0&&(c+=y),o!==0&&(o-=y)):(c=typeof this.options.interval>"u"?-1/0:this.options.interval,o=typeof this.options.interval<"u"||isFinite(this.dataInfo.minDiff)?0:1/0),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<c-o?.5*Math.abs(c-o):1,this.includeZero&&(this.minimum===null||isNaN(this.minimum))&&0<o&&(o=0),this.includeZero&&(this.maximum===null||isNaN(this.maximum))&&0>c&&(c=0)),Math.abs(this.getApparentDifference(o,c,null,!0)),this.type==="axisX"&&d?(this.valueType="dateTime",(this.minimum===null||isNaN(this.minimum))&&(this.minimum=o-x/2,this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),(this.maximum===null||isNaN(this.maximum))&&(this.maximum=c+x/2,this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum))):(this.intervalType=this.valueType="number",this.minimum===null&&(this.minimum=this.type==="axisX"?o-x/2:Math.floor(o/this.interval)*this.interval,this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),this.maximum===null&&(this.maximum=this.type==="axisX"?c+x/2:Math.ceil(c/this.interval)*this.interval,this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum)),this.maximum===0&&this.minimum===0&&(this.options.minimum===0?this.maximum+=10:this.options.maximum===0&&(this.minimum-=10)))),m(this.sessionVariables.newViewportMinimum)&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),m(this.sessionVariables.newViewportMaximum)&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.range=this.viewportMaximum-this.viewportMinimum,this.intervalStartPosition=this.type==="axisX"&&d?this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval):Math.floor((this.viewportMinimum+.2*this.interval)/this.interval)*this.interval,this.valueFormatString||(this.valueFormatString=ke.generateValueFormatString(this.range,2))}},ke.prototype.calculateLogarithmicAxisParameters=function(){var h=this.chart.layoutManager.getFreeSpace(),r=Math.log(this.logarithmBase),d;this._position==="bottom"||this._position==="top"?(this.maxWidth=h.width,this.maxHeight=h.height):(this.maxWidth=h.height,this.maxHeight=h.width);var h=this.type==="axisX"?500>this.maxWidth?7:Math.max(7,Math.floor(this.maxWidth/100)):Math.max(Math.floor(this.maxWidth/50),3),o,c,x,y;if(y=1,(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks){for(y=0;y<this.scaleBreaks._appliedBreaks.length;y++)if((!m(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[y].startValue||!m(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[y].startValue||!m(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[y].startValue)&&(!m(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[y].endValue||!m(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[y].endValue||!m(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[y].endValue)){this.scaleBreaks._appliedBreaks.splice(y,1);break}}this.type==="axisX"?(o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,c=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,c/o===1&&(y=Math.pow(this.logarithmBase,typeof this.options.interval>"u"?.4:this.options.interval),c*=y,o/=y),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:c/o>this.logarithmBase?c/o*Math.pow(this.logarithmBase,.5):this.logarithmBase):this.type==="axisY"&&(o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,c=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,0>=o&&!isFinite(c)?(c=typeof this.options.interval>"u"?0:this.options.interval,o=1):0>=o?o=c:isFinite(c)||(c=o),o===1&&c===1?(c*=this.logarithmBase-1/this.logarithmBase,o=1):c/o===1?(y=Math.min(c*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),c*=y,o/=y):o>c?(y=Math.min(o/c*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),1<=c?o=c/y:c=o*y):(y=Math.min(c/o*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),c!==1&&(c*=y),o!==1&&(o/=y)),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:c/o>this.logarithmBase?c/o*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&1<o&&(o=1),this.includeZero&&(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&1>c&&(c=1)),y=(isNaN(this.viewportMaximum)||this.viewportMaximum===null?c:this.viewportMaximum)/(isNaN(this.viewportMinimum)||this.viewportMinimum===null?o:this.viewportMinimum);var S=(isNaN(this.viewportMaximum)||this.viewportMaximum===null?c:this.viewportMaximum)-(isNaN(this.viewportMinimum)||this.viewportMinimum===null?o:this.viewportMinimum);if(this.intervalType="number",y=Math.pow(this.logarithmBase,ke.getNiceNumber(Math.abs(Math.log(y)/r),!1)),this.options&&0<this.options.interval?this.interval=this.options.interval:(this.interval=ke.getNiceExponent(Math.log(y)/r/(h-1),!0),d=ke.getNiceNumber(S/(h-1),!0)),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.type==="axisX"?o/Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(o)/r/this.interval))),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.type==="axisX"?c*Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(c)/r/this.interval))),this.viewportMaximum===1&&this.viewportMinimum===1&&(this.options.viewportMinimum===1?this.viewportMaximum*=this.logarithmBase-1/this.logarithmBase:this.options.viewportMaximum===1&&(this.viewportMinimum/=this.logarithmBase-1/this.logarithmBase),this.options&&typeof this.options.interval>"u"&&(this.interval=ke.getNiceExponent(Math.ceil(Math.log(y)/r)/(h-1)),d=ke.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(h-1),!0))),(this.minimum===null||this.maximum===null)&&(this.type==="axisX"?(o=this.minimum!==null?this.minimum:this.dataInfo.min,c=this.maximum!==null?this.maximum:this.dataInfo.max,c/o===1&&(y=Math.pow(this.logarithmBase,typeof this.options.interval>"u"?.4:this.options.interval),c*=y,o/=y),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:c/o>this.logarithmBase?c/o*Math.pow(this.logarithmBase,.5):this.logarithmBase):this.type==="axisY"&&(o=this.minimum!==null?this.minimum:this.dataInfo.min,c=this.maximum!==null?this.maximum:this.dataInfo.max,isFinite(o)||isFinite(c)?o===1&&c===1?(c*=this.logarithmBase,o/=this.logarithmBase):c/o===1?(y=Math.pow(this.logarithmBase,this.interval),c*=y,o/=y):o>c?(y=Math.min(.01*(o/c),5),1<=c?o=c/y:c=o*y):(y=Math.min(c/o*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),c!==1&&(c*=y),o!==1&&(o/=y)):(c=typeof this.options.interval>"u"?0:this.options.interval,o=1),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:c/o>this.logarithmBase?c/o*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(this.minimum===null||isNaN(this.minimum))&&1<o&&(o=1),this.includeZero&&(this.maximum===null||isNaN(this.maximum))&&1>c&&(c=1)),this.intervalType="number",this.minimum===null&&(this.minimum=this.type==="axisX"?o/Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(o)/r/this.interval)),m(this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?typeof this.sessionVariables.newViewportMinimum>"u"?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum)||(this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?typeof this.sessionVariables.newViewportMinimum>"u"?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum))),this.maximum===null&&(this.maximum=this.type==="axisX"?c*Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(c)/r/this.interval)),m(this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?typeof this.sessionVariables.newViewportMaximum>"u"?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum)||(this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?typeof this.sessionVariables.newViewportMaximum>"u"?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum))),this.maximum===1&&this.minimum===1&&(this.options.minimum===1?this.maximum*=this.logarithmBase-1/this.logarithmBase:this.options.maximum===1&&(this.minimum/=this.logarithmBase-1/this.logarithmBase))),this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum),this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum),this.viewportMinimum>this.viewportMaximum&&(!this.options.viewportMinimum&&!this.options.minimum||this.options.viewportMaximum||this.options.maximum?this.options.viewportMinimum||this.options.minimum||!this.options.viewportMaximum&&!this.options.maximum||(this.viewportMinimum=this.minimum=(this.options.viewportMaximum||this.options.maximum)/Math.pow(this.logarithmBase,2*Math.ceil(this.interval))):this.viewportMaximum=this.maximum=this.options.viewportMinimum||this.options.minimum),o=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(r*this.interval)+.2)*this.interval),this.range=this.viewportMaximum/this.viewportMinimum,this.noTicks=h,!this.options.interval&&this.range<Math.pow(this.logarithmBase,8>this.viewportMaximum||3>h?2:3)){for(r=Math.floor(this.viewportMinimum/d+.5)*d;r<this.viewportMinimum;)r+=d;this.equidistantInterval=!1,this.intervalStartPosition=r,this.interval=d}else this.options.interval||(d=Math.ceil(this.interval),this.range>this.interval&&(this.interval=d,o=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(r*this.interval)+.2)*this.interval))),this.equidistantInterval=!0,this.intervalStartPosition=o;if(!this.valueFormatString&&(this.valueFormatString="#,##0.##",1>this.viewportMinimum)&&(r=Math.floor(Math.abs(Math.log(this.viewportMinimum)/Math.LN10))+2,(isNaN(r)||!isFinite(r))&&(r=2),2<r))for(y=0;y<r-2;y++)this.valueFormatString+="#"},ke.generateValueFormatString=function(r,d){var h="#,##0.",o=d;1>r&&(o+=Math.floor(Math.abs(Math.log(r)/Math.LN10)),isNaN(o)||!isFinite(o))&&(o=d);for(var c=0;c<o;c++)h+="#";return h},ke.getNiceExponent=function(r,d){var h=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,h),o=0>h?1>=o?1:5>=o?5:10:Math.max(Math.floor(o),1);return-20>h?Number(o*Math.pow(10,h)):Number((o*Math.pow(10,h)).toFixed(20))},ke.getNiceNumber=function(r,d){var h=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,h),o=d?1.5>o?1:3>o?2:7>o?5:10:1>=o?1:2>=o?2:5>=o?5:10;return-20>h?Number(o*Math.pow(10,h)):Number((o*Math.pow(10,h)).toFixed(20))},ke.prototype.getLabelStartPoint=function(){var r=ht[this.intervalType+"Duration"]*this.interval,r=new Date(Math.floor(this.viewportMinimum/r)*r);return this.intervalType!=="millisecond"&&(this.intervalType==="second"?0<r.getMilliseconds()&&(r.setSeconds(r.getSeconds()+1),r.setMilliseconds(0)):this.intervalType==="minute"?(0<r.getSeconds()||0<r.getMilliseconds())&&(r.setMinutes(r.getMinutes()+1),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="hour"?(0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setHours(r.getHours()+1),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="day"?(0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setDate(r.getDate()+1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="week"?(0<r.getDay()||0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setDate(r.getDate()+(7-r.getDay())),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="month"?(1<r.getDate()||0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setMonth(r.getMonth()+1),r.setDate(1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="year"&&(0<r.getMonth()||1<r.getDate()||0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setFullYear(r.getFullYear()+1),r.setMonth(0),r.setDate(1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0))),r},e(ut,se),e(Mt,se),Mt.prototype.createUserOptions=function(r){if(typeof r<"u"||this.options._isPlaceholder){var d=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(k(this.parent[this.optionsName]),d=this.parent.options[this.optionsName].indexOf(this.options)),this.options=typeof r>"u"?{}:r,this.parent.options[this.optionsName][d]=this.options}},Mt.prototype.render=function(r){if(this.spacing!==0||this.options.lineThickness!==0&&(typeof this.options.lineThickness<"u"||this.parent.lineThickness!==0)){var d=this.ctx,h=this.ctx.globalAlpha;this.ctx=r||this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip();var o=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.startValue),c=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.endValue);this.ctx.strokeStyle=this.lineColor,this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.globalAlpha=1,f(this.id);var x,y,S,E,w,v;r=Math.max(this.spacing,3);var b=Math.max(0,this.lineThickness);if(this.ctx.lineWidth=b,this.ctx.setLineDash&&this.ctx.setLineDash(P(this.lineDashType,b)),this.scaleBreaks.parent._position==="bottom"||this.scaleBreaks.parent._position==="top"){if(o=b%2===1?(o.x<<0)+.5:o.x<<0,y=b%2===1?(c.x<<0)+.5:c.x<<0,this.scaleBreaks.parent._position==="top"?(c=this.chart.plotArea.y1,S=this.chart.plotArea.y2+b/2+.5<<0):(c=this.chart.plotArea.y2,S=this.chart.plotArea.y1-b/2+.5<<0,r*=-1),this.bounds={x1:o-b/2,y1:c,x2:y+b/2,y2:S},this.ctx.moveTo(o,c),this.type==="straight"||this.scaleBreaks.parent._position==="top"&&0>=r||this.scaleBreaks.parent._position==="bottom"&&0<=r)this.ctx.lineTo(o,S),this.ctx.lineTo(y,S),this.ctx.lineTo(y,c);else if(this.type==="wavy"){E=o,w=c,x=.5,v=(S-w)/r/3;for(var C=0;C<v;C++)this.ctx.bezierCurveTo(E+x*r,w+r,E+x*r,w+2*r,E,w+3*r),w+=3*r,x*=-1;for(this.ctx.bezierCurveTo(E+x*r,w+r,E+x*r,w+2*r,E,w+3*r),E=y,x*=-1,this.ctx.lineTo(E,w),C=0;C<v;C++)this.ctx.bezierCurveTo(E+x*r,w-r,E+x*r,w-2*r,E,w-3*r),w-=3*r,x*=-1}else if(this.type==="zigzag"){for(x=-1,w=c+r,E=o+r,v=(S-w)/r/2,C=0;C<v;C++)this.ctx.lineTo(E,w),E+=2*x*r,w+=2*r,x*=-1;for(this.ctx.lineTo(E,w),E+=y-o,C=0;C<v+1;C++)this.ctx.lineTo(E,w),E+=2*x*r,w-=2*r,x*=-1;this.ctx.lineTo(E+x*r,w+r)}}else if(this.scaleBreaks.parent._position==="left"||this.scaleBreaks.parent._position==="right"){if(c=b%2===1?(c.y<<0)+.5:c.y<<0,S=b%2===1?(o.y<<0)+.5:o.y<<0,this.scaleBreaks.parent._position==="left"?(o=this.chart.plotArea.x1,y=this.chart.plotArea.x2+b/2+.5<<0):(o=this.chart.plotArea.x2,y=this.chart.plotArea.x1-b/2+.5<<0,r*=-1),this.bounds={x1:o,y1:c-b/2,x2:y,y2:S+b/2},this.ctx.moveTo(o,c),this.type==="straight"||this.scaleBreaks.parent._position==="left"&&0>=r||this.scaleBreaks.parent._position==="right"&&0<=r)this.ctx.lineTo(y,c),this.ctx.lineTo(y,S),this.ctx.lineTo(o,S);else if(this.type==="wavy"){for(E=o,w=c,x=.5,v=(y-E)/r/3,C=0;C<v;C++)this.ctx.bezierCurveTo(E+r,w+x*r,E+2*r,w+x*r,E+3*r,w),E+=3*r,x*=-1;for(this.ctx.bezierCurveTo(E+r,w+x*r,E+2*r,w+x*r,E+3*r,w),w=S,x*=-1,this.ctx.lineTo(E,w),C=0;C<v;C++)this.ctx.bezierCurveTo(E-r,w+x*r,E-2*r,w+x*r,E-3*r,w),E-=3*r,x*=-1}else if(this.type==="zigzag"){for(x=1,w=c-r,E=o+r,v=(y-E)/r/2,C=0;C<v;C++)this.ctx.lineTo(E,w),w+=2*x*r,E+=2*r,x*=-1;for(this.ctx.lineTo(E,w),w+=S-c,C=0;C<v+1;C++)this.ctx.lineTo(E,w),w+=2*x*r,E-=2*r,x*=-1;this.ctx.lineTo(E+r,w+x*r)}}0<b&&this.ctx.stroke(),this.ctx.closePath(),this.ctx.globalAlpha=this.fillOpacity,this.ctx.globalCompositeOperation="destination-over",this.ctx.fill(),this.ctx.restore(),this.ctx.globalAlpha=h,this.ctx=d}},e(ot,se),ot.prototype.createUserOptions=function(r){if(typeof r<"u"||this.options._isPlaceholder){var d=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(k(this.parent.stripLines),d=this.parent.options.stripLines.indexOf(this.options)),this.options=typeof r>"u"?{}:r,this.parent.options.stripLines[d]=this.options}},ot.prototype.render=function(){this.ctx.save();var r=this.parent.getPixelCoordinatesOnAxis(this.value),d=Math.abs(this._thicknessType==="pixel"?this.thickness:Math.abs(this.parent.convertValueToPixel(this.endValue)-this.parent.convertValueToPixel(this.startValue)));if(0<d){var h=this.opacity===null?1:this.opacity;this.ctx.strokeStyle=this.color,this.ctx.beginPath();var o=this.ctx.globalAlpha;this.ctx.globalAlpha=h,f(this.id);var c,x,y,S;this.ctx.lineWidth=d,this.ctx.setLineDash&&this.ctx.setLineDash(P(this.lineDashType,d)),this.parent._position==="bottom"||this.parent._position==="top"?(c=x=this.ctx.lineWidth%2===1?(r.x<<0)+.5:r.x<<0,y=this.chart.plotArea.y1,S=this.chart.plotArea.y2,this.bounds={x1:c-d/2,y1:y,x2:x+d/2,y2:S}):(this.parent._position==="left"||this.parent._position==="right")&&(y=S=this.ctx.lineWidth%2===1?(r.y<<0)+.5:r.y<<0,c=this.chart.plotArea.x1,x=this.chart.plotArea.x2,this.bounds={x1:c,y1:y-d/2,x2:x,y2:S+d/2}),this.ctx.moveTo(c,y),this.ctx.lineTo(x,S),this.ctx.stroke(),this.ctx.globalAlpha=o}this.ctx.restore()},e(_i,se),_i.prototype.showAt=function(r){if(!this.enabled)return!1;var d=this.chart,h=!1;if(d.resetOverlayedCanvas(),d.clearedOverlayedCanvas=this.parent.type,this.chart.renderCrosshairs(this.parent),d.plotInfo.axisPlacement==="xySwapped"){if(this.parent._position==="bottom")for(var o=0;o<d.axisY.length;o++)this.parent===d.axisY[o]&&(d.axisY[o]._crosshairValue=r>=d.axisY[o].viewportMinimum&&r<=d.axisY[o].viewportMaximum?r:null);else if(this.parent._position==="top")for(o=0;o<d.axisY2.length;o++)this.parent===d.axisY2[o]&&(d.axisY2[o]._crosshairValue=r>=d.axisY2[o].viewportMinimum&&r<=d.axisY2[o].viewportMaximum?r:null);else if(this.parent._position==="left")for(o=0;o<d.axisX.length;o++)this.parent===d.axisX[o]&&(d.axisX[o]._crosshairValue=r>=d.axisX[o].viewportMinimum&&r<=d.axisX[o].viewportMaximum?r:null);else if(this.parent._position==="right")for(o=0;o<d.axisX2.length;o++)this.parent===d.axisX2[o]&&(d.axisX2[o]._crosshairValue=r>=d.axisX2[o].viewportMinimum&&r<=d.axisX2[o].viewportMaximum?r:null)}else if(this.parent._position==="bottom")for(o=0;o<d.axisX.length;o++)this.parent===d.axisX[o]&&(d.axisX[o]._crosshairValue=r>=d.axisX[o].viewportMinimum&&r<=d.axisX[o].viewportMaximum?r:null);else if(this.parent._position==="top")for(o=0;o<d.axisX2.length;o++)this.parent===d.axisX2[o]&&(d.axisX2[o]._crosshairValue=r>=d.axisX2[o].viewportMinimum&&r<=d.axisX2[o].viewportMaximum?r:null);else if(this.parent._position==="left")for(o=0;o<d.axisY.length;o++)this.parent===d.axisY[o]&&(d.axisY[o]._crosshairValue=r>=d.axisY[o].viewportMinimum&&r<=d.axisY[o].viewportMaximum?r:null);else if(this.parent._position==="right")for(o=0;o<d.axisY2.length;o++)this.parent===d.axisY2[o]&&(d.axisY2[o]._crosshairValue=r>=d.axisY2[o].viewportMinimum&&r<=d.axisY2[o].viewportMaximum?r:null);for(o=0;o<d.axisX.length;o++)r=d.axisX[o]._crosshairValue,d.axisX[o].crosshair&&d.axisX[o].crosshair.enabled&&(!m(r)&&r>=d.axisX[o].viewportMinimum&&r<=d.axisX[o].viewportMaximum?(d.axisX[o].showCrosshair(r),d.axisX[o].sessionVariables.crosshairValue=d.axisX[o].crosshair._updatedValue=r,this===d.axisX[o].crosshair&&(h=!0)):r!==void 0&&(d.axisX[o].sessionVariables.crosshairValue=d.axisX[o].crosshair._updatedValue=null));for(o=0;o<d.axisX2.length;o++)r=d.axisX2[o]._crosshairValue,d.axisX2[o].crosshair&&d.axisX2[o].crosshair.enabled&&(!m(r)&&r>=d.axisX2[o].viewportMinimum&&r<=d.axisX2[o].viewportMaximum?(d.axisX2[o].showCrosshair(r),d.axisX2[o].sessionVariables.crosshairValue=d.axisX2[o].crosshair._updatedValue=r,this===d.axisX2[o].crosshair&&(h=!0)):r!==void 0&&(d.axisX2[o].sessionVariables.crosshairValue=d.axisX2[o].crosshair._updatedValue=null));for(o=0;o<d.axisY.length;o++)r=d.axisY[o]._crosshairValue,d.axisY[o].crosshair&&d.axisY[o].crosshair.enabled&&(!m(r)&&r>=d.axisY[o].viewportMinimum&&r<=d.axisY[o].viewportMaximum?(d.axisY[o].showCrosshair(r),d.axisY[o].sessionVariables.crosshairValue=d.axisY[o].crosshair._updatedValue=r,this===d.axisY[o].crosshair&&(h=!0)):r!==void 0&&(d.axisY[o].sessionVariables.crosshairValue=d.axisY[o].crosshair._updatedValue=null));for(o=0;o<d.axisY2.length;o++)r=d.axisY2[o]._crosshairValue,d.axisY2[o].crosshair&&d.axisY2[o].crosshair.enabled&&(!m(r)&&r>=d.axisY2[o].viewportMinimum&&r<=d.axisY2[o].viewportMaximum?(d.axisY2[o].showCrosshair(r),d.axisY2[o].sessionVariables.crosshairValue=d.axisY2[o].crosshair._updatedValue=r,this===d.axisY2[o].crosshair&&(h=!0)):r!==void 0&&(d.axisY2[o].sessionVariables.crosshairValue=d.axisY2[o].crosshair._updatedValue=null));return this.chart.toolTip&&this.chart.toolTip._entries&&this.chart.toolTip.highlightObjects(this.chart.toolTip._entries),d.sessionVariables.crosshairShownByPixel=!1,h},_i.prototype.hide=function(){this.chart.resetOverlayedCanvas(),this.chart.renderCrosshairs(this.parent),this._hidden=!0},_i.prototype.render=function(r,d,h){var o,c,x,y,S=null,E=null,w=null,v="";this.valueFormatString||(this.parent.valueType==="dateTime"?this.valueFormatString=this.parent.valueFormatString:(w=0,w=this.chart.plotInfo.axisPlacement==="xySwapped"?50<this.parent.range?0:500<this.chart.width&&25>this.parent.range?2:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0):50<this.parent.range?0:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0),this.valueFormatString=ke.generateValueFormatString(this.parent.range,w)));var b=this.opacity===null?1:this.opacity,C=Math.abs(this._thicknessType==="pixel"?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness),u=this.chart.overlaidCanvasCtx,I=u.globalAlpha;if(u.beginPath(),u.strokeStyle=this.color,u.lineWidth=C,u.save(),this.labelFontSize=Math.abs(m(this.options.labelFontSize)?this.parent.labelFontSize:this.labelFontSize),this.labelMaxWidth=m(this.options.labelMaxWidth)?.3*this.chart.width:this.labelMaxWidth,this.labelMaxHeight=m(this.options.labelWrap)||this.labelWrap?.3*this.chart.height:2*this.labelFontSize,0<C&&u.setLineDash&&u.setLineDash(P(this.lineDashType,C)),w=new ue(u,{x:0,y:0,padding:{top:2,right:3,bottom:2,left:4},backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxWidth:this.labelMaxWidth,maxHeight:this.labelMaxHeight,angle:this.labelAngle,text:v,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this.snapToDataPoint){var V=0,v=[];if(this.chart.plotInfo.axisPlacement==="xySwapped"){var H=null;this.parent._position==="bottom"||this.parent._position==="top"?V=this.parent.dataSeries[0].axisX.convertPixelToValue({y:d}):(this.parent._position==="left"||this.parent._position==="right")&&(V=this.parent.convertPixelToValue({y:d}));for(var D=0;D<this.parent.dataSeries.length;D++)(H=this.parent.dataSeries[D].getDataPointAtX(V,!0))&&0<=H.index&&(H.dataSeries=this.parent.dataSeries[D],H.dataPoint.y!==null&&H.dataSeries.visible&&v.push(H));if(H=null,v.length===0)return;v.sort(function(J,be){return J.distance-be.distance});var Y=H=0;yPercent=cumulativeY=0;for(var V=1/0,O,D=0;D<v.length;D++){if(v[D].dataSeries.type==="rangeBar"||v[D].dataSeries.type==="error"){if(v[D].dataPoint.y)for(var te=0;te<v[D].dataPoint.y.length;te++)Y=Math.abs(r-this.parent.convertValueToPixel(v[D].dataPoint.y[te])),Y<=V&&(V=Y,H=D)}else v[D].dataSeries.type==="stackedBar"?(cumulativeY=v[D].dataSeries.dataPointEOs[v[D].index].cumulativeY,Y=Math.abs(r-this.parent.convertValueToPixel(cumulativeY)),Y<=V&&(V=Y,H=D)):v[D].dataSeries.type==="stackedBar100"?(Y=v[0].dataPoint.x.getTime?v[0].dataPoint.x.getTime():v[0].dataPoint.x,m(O)&&(O=Math.abs(r-this.parent.convertValueToPixel(100*(v[0].dataSeries.dataPointEOs[v[0].index].cumulativeY/v[0].dataSeries.plotUnit.dataPointYSums[Y])))),cumulativeY=v[D].dataSeries.dataPointEOs[v[D].index].cumulativeY,Y=v[D].dataPoint.x.getTime?v[D].dataPoint.x.getTime():v[D].dataPoint.x,yPercent=100*(cumulativeY/v[D].dataSeries.plotUnit.dataPointYSums[Y]),Y=Math.abs(r-this.parent.convertValueToPixel(yPercent)),Y<=O&&(O=Y,H=D)):(Y=Math.abs(r-this.parent.convertValueToPixel(v[D].dataPoint.y)),Y<=V&&(V=Y,H=D));m(O)||(V=Math.min(V,O))}if(O=v[H],D=0,this.parent._position==="bottom"||this.parent._position==="top"){if(O.dataSeries.type==="rangeBar"||O.dataSeries.type==="error"){for(V=Math.abs(r-this.parent.convertValueToPixel(O.dataPoint.y[0])),v=0;v<O.dataPoint.y.length;v++)Y=Math.abs(r-this.parent.convertValueToPixel(O.dataPoint.y[v])),Y<V&&(V=Y,D=v);S=u.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.y[D])<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.y[D])<<0,this.value=O.dataPoint.y[D],w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.y[D]}):m(this.options.label)?Nt(m(h)?O.dataPoint.y[D]:h,this.valueFormatString,this.chart._cultureInfo):this.label}else O.dataSeries.type==="stackedBar"?(V=Math.abs(r-this.parent.convertValueToPixel(v[0].dataPoint.y)),cumulativeY=O.dataSeries.dataPointEOs[O.index].cumulativeY,S=u.lineWidth%2===1?(this.parent.convertValueToPixel(cumulativeY)<<0)+.5:this.parent.convertValueToPixel(cumulativeY)<<0,this.value=cumulativeY,w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:cumulativeY}):m(this.options.label)?Nt(m(h)?cumulativeY:h,this.valueFormatString,this.chart._cultureInfo):this.label):O.dataSeries.type==="stackedBar100"?(V=Math.abs(r-this.parent.convertValueToPixel(v[0].dataPoint.y)),cumulativeY=O.dataSeries.dataPointEOs[O.index].cumulativeY,Y=O.dataPoint.x.getTime?O.dataPoint.x.getTime():O.dataPoint.x,yPercent=100*(cumulativeY/O.dataSeries.plotUnit.dataPointYSums[Y]),S=u.lineWidth%2===1?(this.parent.convertValueToPixel(yPercent)<<0)+.5:this.parent.convertValueToPixel(yPercent)<<0,this.value=yPercent,w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:yPercent}):m(this.options.label)?Nt(m(h)?yPercent:h,this.valueFormatString,this.chart._cultureInfo):this.label):(S=u.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.y)<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.y)<<0,this.value=O.dataPoint.y,w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.y}):m(this.options.label)?Nt(m(h)?O.dataPoint.y:h,this.valueFormatString,this.chart._cultureInfo):this.label);o=c=S,x=this.chart.plotArea.y1,y=this.chart.plotArea.y2,this.bounds={x1:o-C/2,y1:x,x2:c+C/2,y2:y},w.x=o-w.measureText().width/2,w.x+w.width>this.chart.bounds.x2?w.x=this.chart.bounds.x2-w.width:w.x<this.chart.bounds.x1&&(w.x=this.chart.bounds.x1),w.y=this.parent.lineCoordinates.y2+(this.parent._position==="top"?-w.height+this.parent.tickLength:w.fontSize/2)+2,w.y+w.height>this.chart.bounds.y2?w.y=this.chart.bounds.y2-w.height:w.y<this.chart.bounds.y1&&(w.y=this.chart.bounds.y1)}else if(this.parent._position==="left"||this.parent._position==="right"){if(x=y=E=u.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.x)<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.x)<<0,o=this.chart.plotArea.x1,c=this.chart.plotArea.x2,this.bounds={x1:o,y1:x-C/2,x2:c,y2:y+C/2},D=!1,this.parent.labels)for(V=Math.ceil(this.parent.interval),v=0;v<this.parent.viewportMaximum;v+=V)if(this.parent.labels[v])D=!0;else{D=!1;break}if(D){if(this.parent.type==="axisX")for(V=this.parent.convertPixelToValue({y:d}),H=null,D=0;D<this.parent.dataSeries.length;D++)(H=this.parent.dataSeries[D].getDataPointAtX(V,!0))&&0<=H.index&&(w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):m(this.options.label)?H.dataPoint.label:this.label)}else w.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):m(this.options.label)?Nt(O.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):m(this.options.label)?Qi(O.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label;this.value=O.dataPoint.x,w.y=y+w.fontSize/2-w.measureText().height/2+2,w.y-w.fontSize/2<this.chart.bounds.y1?w.y=this.chart.bounds.y1+w.fontSize/2+2:w.y+w.measureText().height-w.fontSize/2>this.chart.bounds.y2&&(w.y=this.chart.bounds.y2-w.measureText().height+w.fontSize/2),this.parent._position==="left"?w.x=this.parent.lineCoordinates.x2-w.measureText().width:this.parent._position==="right"&&(w.x=this.parent.lineCoordinates.x2)}}else if(this.parent._position==="bottom"||this.parent._position==="top"){for(V=this.parent.convertPixelToValue({x:r}),D=0;D<this.parent.dataSeries.length;D++)(H=this.parent.dataSeries[D].getDataPointAtX(V,!0))&&0<=H.index&&(H.dataSeries=this.parent.dataSeries[D],H.dataPoint.y!==null&&H.dataSeries.visible&&v.push(H));if(v.length===0)return;if(v.sort(function(J,be){return J.distance-be.distance}),O=v[0],o=c=S=u.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.x)<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.x)<<0,x=this.chart.plotArea.y1,y=this.chart.plotArea.y2,this.bounds={x1:o-C/2,y1:x,x2:c+C/2,y2:y},D=!1,this.parent.labels)for(V=Math.ceil(this.parent.interval),v=0;v<this.parent.viewportMaximum;v+=V)if(this.parent.labels[v])D=!0;else{D=!1;break}if(D){if(this.parent.type==="axisX")for(V=this.parent.convertPixelToValue({x:r}),H=null,D=0;D<this.parent.dataSeries.length;D++)(H=this.parent.dataSeries[D].getDataPointAtX(V,!0))&&0<=H.index&&(w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):m(this.options.label)?H.dataPoint.label:this.label)}else w.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):m(this.options.label)?Nt(O.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):m(this.options.label)?Qi(O.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label;this.value=O.dataPoint.x,w.x=o-w.measureText().width/2,w.x+w.width>this.chart.bounds.x2&&(w.x=this.chart.bounds.x2-w.width),w.x<this.chart.bounds.x1&&(w.x=this.chart.bounds.x1),this.parent._position==="bottom"?w.y=this.parent.lineCoordinates.y2+w.fontSize/2+2:this.parent._position==="top"&&(w.y=this.parent.lineCoordinates.y1-w.height+w.fontSize/2+2)}else if(this.parent._position==="left"||this.parent._position==="right"){for(!m(this.parent.dataSeries)&&0<this.parent.dataSeries.length&&(V=this.parent.dataSeries[0].axisX.convertPixelToValue({x:r})),D=0;D<this.parent.dataSeries.length;D++)(H=this.parent.dataSeries[D].getDataPointAtX(V,!0))&&0<=H.index&&(H.dataSeries=this.parent.dataSeries[D],H.dataPoint.y!==null&&H.dataSeries.visible&&v.push(H));if(v.length===0)return;for(v.sort(function(J,be){return J.distance-be.distance}),Y=H=0,V=1/0,D=0;D<v.length;D++){if(v[D].dataSeries.type==="rangeColumn"||v[D].dataSeries.type==="rangeArea"||v[D].dataSeries.type==="error"||v[D].dataSeries.type==="rangeSplineArea"||v[D].dataSeries.type==="candlestick"||v[D].dataSeries.type==="ohlc"||v[D].dataSeries.type==="boxAndWhisker"){if(v[D].dataPoint.y)for(te=0;te<v[D].dataPoint.y.length;te++)Y=Math.abs(d-this.parent.convertValueToPixel(v[D].dataPoint.y[te])),Y<=V&&(V=Y,H=D)}else v[D].dataSeries.type==="stackedColumn"?(o=v[D].dataSeries.dataPointEOs[v[D].index].cumulativeY,Y=Math.abs(d-this.parent.convertValueToPixel(o)),Y<=V&&(V=Y,H=D)):v[D].dataSeries.type==="stackedArea"?(o=v[D].dataSeries.dataPointEOs[v[D].index].cumulativeY,Y=Math.abs(d-this.parent.convertValueToPixel(o)),Y<=V&&(V=Y,H=D)):v[D].dataSeries.type==="stackedColumn100"||v[D].dataSeries.type==="stackedArea100"?(Y=v[0].dataPoint.x.getTime?v[0].dataPoint.x.getTime():v[0].dataPoint.x,m(O)&&(O=Math.abs(d-this.parent.convertValueToPixel(100*(v[0].dataSeries.dataPointEOs[v[0].index].cumulativeY/v[0].dataSeries.plotUnit.dataPointYSums[Y])))),v[D].dataSeries.type==="stackedColumn100"?(E=v[D].dataSeries.dataPointEOs[v[D].index].cumulativeY,Y=v[D].dataPoint.x.getTime?v[D].dataPoint.x.getTime():v[D].dataPoint.x,o=100*(E/v[D].dataSeries.plotUnit.dataPointYSums[Y]),Y=Math.abs(d-this.parent.convertValueToPixel(o)),Y<=O&&(O=Y,H=D)):v[D].dataSeries.type==="stackedArea100"&&(E=v[D].dataSeries.dataPointEOs[v[D].index].cumulativeY,Y=v[D].dataPoint.x.getTime?v[D].dataPoint.x.getTime():v[D].dataPoint.x,o=100*(E/v[D].dataSeries.plotUnit.dataPointYSums[Y]),Y=Math.abs(d-this.parent.convertValueToPixel(o)),Y<=O&&(O=Y,H=D))):v[D].dataSeries.type==="waterfall"?(Y=Math.abs(d-this.parent.convertValueToPixel(v[D].dataSeries.dataPointEOs[v[D].index].cumulativeSum)),Y<=V&&(O=V=Y,H=D)):(Y=Math.abs(d-this.parent.convertValueToPixel(v[D].dataPoint.y)),Y<=V&&(V=Y,H=D));m(O)||(V=Math.min(V,O))}if(O=v[H],D=0,O.dataSeries.type==="rangeColumn"||O.dataSeries.type==="rangeArea"||O.dataSeries.type==="error"||O.dataSeries.type==="rangeSplineArea"||O.dataSeries.type==="candlestick"||O.dataSeries.type==="ohlc"||O.dataSeries.type==="boxAndWhisker"){for(V=Math.abs(d-this.parent.convertValueToPixel(O.dataPoint.y[0])),v=0;v<O.dataPoint.y.length;v++)Y=Math.abs(d-this.parent.convertValueToPixel(O.dataPoint.y[v])),Y<V&&(V=Y,D=v);E=u.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.y[D])<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.y[D])<<0,w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.y[D]}):m(this.options.label)?Nt(m(h)?O.dataPoint.y[D]:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=O.dataPoint.y[D]}else O.dataSeries.type==="stackedColumn"?(o=O.dataSeries.dataPointEOs[O.index].cumulativeY,E=u.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):m(this.options.label)?Nt(m(h)?o:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):O.dataSeries.type==="stackedArea"?(o=O.dataSeries.dataPointEOs[O.index].cumulativeY,E=u.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):m(this.options.label)?Nt(m(h)?o:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):O.dataSeries.type==="stackedColumn100"?(E=O.dataSeries.dataPointEOs[O.index].cumulativeY,Y=O.dataPoint.x.getTime?O.dataPoint.x.getTime():O.dataPoint.x,o=100*(E/O.dataSeries.plotUnit.dataPointYSums[Y]),E=u.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):m(this.options.label)?Nt(m(h)?o:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):O.dataSeries.type==="stackedArea100"?(E=O.dataSeries.dataPointEOs[O.index].cumulativeY,Y=O.dataPoint.x.getTime?O.dataPoint.x.getTime():O.dataPoint.x,o=100*(E/O.dataSeries.plotUnit.dataPointYSums[Y]),E=u.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):m(this.options.label)?Nt(m(h)?o:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):O.dataSeries.type==="waterfall"?(E=u.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataSeries.dataPointEOs[O.index].cumulativeSum)<<0)+.5:this.parent.convertValueToPixel(O.dataSeries.dataPointEOs[O.index].cumulativeSum)<<0,w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataSeries.dataPointEOs[O.index].cumulativeSum}):m(this.options.label)?Nt(m(h)?O.dataSeries.dataPointEOs[O.index].cumulativeSum:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=O.dataSeries.dataPointEOs[O.index].cumulativeSum):(E=u.lineWidth%2===1?(m(r)?d:this.parent.convertValueToPixel(O.dataPoint.y)<<0)+.5:m(r)?d:this.parent.convertValueToPixel(O.dataPoint.y)<<0,w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?O.dataPoint.y:h}):m(this.options.label)?Nt(m(h)?O.dataPoint.y:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=O.dataPoint.y);x=y=E,o=this.chart.plotArea.x1,c=this.chart.plotArea.x2,this.bounds={x1:o,y1:x-C/2,x2:c,y2:y+C/2},w.y=y+w.fontSize/2-w.measureText().height/2+2,w.y-w.fontSize/2<this.chart.bounds.y1?w.y=this.chart.bounds.y1+w.fontSize/2+2:w.y+w.measureText().height-w.fontSize/2>this.chart.bounds.y2&&(w.y=this.chart.bounds.y2-w.measureText().height+w.fontSize/2),this.parent._position==="left"?w.x=this.parent.lineCoordinates.x2-w.measureText().width:this.parent._position==="right"&&(w.x=this.parent.lineCoordinates.x2)}v=null,u.globalAlpha=b,(this.parent._position==="bottom"||this.parent._position==="top")&&(this.parent._position==="top"&&w.y-w.fontSize/2<this.chart.bounds.y1&&(w.y=this.chart.bounds.y1+w.fontSize/2),this.parent._position==="bottom"&&this.parent.lineCoordinates.y2-w.fontSize/2+w.measureText().height>this.chart.bounds.y2&&(w.y=this.chart.bounds.y2-w.height+w.fontSize/2+2),this.value>=Math.min(this.parent.viewportMinimum,this.parent.viewportMaximum)&&this.value<=Math.max(this.parent.viewportMinimum,this.parent.viewportMaximum)&&0<C&&(u.moveTo(o,x),u.lineTo(c,y),u.stroke(),this._hidden=!1)),(this.parent._position==="left"||this.parent._position==="right")&&(this.parent._position==="left"&&w.x<this.chart.bounds.x1&&(w.x=this.chart.bounds.x1),this.parent._position==="right"&&w.x+w.measureText().width>this.chart.bounds.x2&&(w.x=this.chart.bounds.x2-w.measureText().width),this.value>=Math.min(this.parent.viewportMinimum,this.parent.viewportMaximum)&&this.value<=Math.max(this.parent.viewportMinimum,this.parent.viewportMaximum)&&0<C&&(u.moveTo(o,x),u.lineTo(c,y),u.stroke(),this._hidden=!1))}else{if(this.parent._position==="bottom"||this.parent._position==="top"?(o=c=S=u.lineWidth%2===1?(r<<0)+.5:r<<0,x=this.chart.plotArea.y1,y=this.chart.plotArea.y2,this.bounds={x1:o-C/2,y1:x,x2:c+C/2,y2:y}):(this.parent._position==="left"||this.parent._position==="right")&&(x=y=E=u.lineWidth%2===1?(d<<0)+.5:d<<0,o=this.chart.plotArea.x1,c=this.chart.plotArea.x2,this.bounds={x1:o,y1:x-C/2,x2:c,y2:y+C/2}),this.chart.plotInfo.axisPlacement==="xySwapped")if(this.parent._position==="left"||this.parent._position==="right"){if(D=!1,this.parent.labels)for(V=Math.ceil(this.parent.interval),v=0;v<this.parent.viewportMaximum;v+=V)if(this.parent.labels[v])D=!0;else{D=!1;break}if(D){if(this.parent.type==="axisX")for(V=this.parent.convertPixelToValue({y:d}),H=null,D=0;D<this.parent.dataSeries.length;D++)(H=this.parent.dataSeries[D].getDataPointAtX(V,!0))&&0<=H.index&&(w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(r):h}):m(this.options.label)?H.dataPoint.label:this.label)}else w.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(d):h}):m(this.options.label)?Nt(m(h)?this.parent.convertPixelToValue(d):h,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(d):h}):m(this.options.label)?Qi(m(h)?this.parent.convertPixelToValue(d):h,this.valueFormatString,this.chart._cultureInfo):this.label;w.y=d+w.fontSize/2-w.measureText().height/2+2,w.y-w.fontSize/2<this.chart.bounds.y1?w.y=this.chart.bounds.y1+w.fontSize/2+2:w.y+w.measureText().height-w.fontSize/2>this.chart.bounds.y2&&(w.y=this.chart.bounds.y2-w.measureText().height+w.fontSize/2),this.parent._position==="left"?w.x=this.parent.lineCoordinates.x1-w.measureText().width:this.parent._position==="right"&&(w.x=this.parent.lineCoordinates.x2)}else(this.parent._position==="bottom"||this.parent._position==="top")&&(w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(r):h}):m(this.options.label)?Nt(m(h)?this.parent.convertPixelToValue(r):h,this.valueFormatString,this.chart._cultureInfo):this.label,w.x=o-w.measureText().width/2,w.x+w.width>this.chart.bounds.x2&&(w.x=this.chart.bounds.x2-w.width),w.x<this.chart.bounds.x1&&(w.x=this.chart.bounds.x1),this.parent._position==="bottom"?w.y=this.parent.lineCoordinates.y2+w.fontSize/2+2:this.parent._position==="top"&&(w.y=this.parent.lineCoordinates.y1-w.height+w.fontSize/2+2));else if(this.parent._position==="bottom"||this.parent._position==="top"){if(D=!1,v="",this.parent.labels)for(V=Math.ceil(this.parent.interval),v=0;v<this.parent.viewportMaximum;v+=V)if(this.parent.labels[v])D=!0;else{D=!1;break}if(D){if(this.parent.type==="axisX")for(V=this.parent.convertPixelToValue({x:r}),H=null,D=0;D<this.parent.dataSeries.length;D++)(H=this.parent.dataSeries[D].getDataPointAtX(V,!0))&&0<=H.index&&(w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(r):h}):m(this.options.label)?m(h)?H.dataPoint.label:h:this.label)}else w.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?0<this.parent.dataSeries.length?this.parent.convertPixelToValue(r):"":h}):m(this.options.label)?Nt(m(h)?this.parent.convertPixelToValue(r):h,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(r):h}):m(this.options.label)?Qi(m(h)?this.parent.convertPixelToValue(r):h,this.valueFormatString,this.chart._cultureInfo):this.label;w.x=o-w.measureText().width/2,w.x+w.width>this.chart.bounds.x2&&(w.x=this.chart.bounds.x2-w.width),w.x<this.chart.bounds.x1&&(w.x=this.chart.bounds.x1),this.parent._position==="bottom"?w.y=this.parent.lineCoordinates.y2+w.fontSize/2+2:this.parent._position==="top"&&(w.y=this.parent.lineCoordinates.y1-w.height+w.fontSize/2+2)}else(this.parent._position==="left"||this.parent._position==="right")&&(w.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(d):h}):m(this.options.label)?Nt(m(h)?this.parent.convertPixelToValue(d):h,this.valueFormatString,this.chart._cultureInfo):this.label,w.y=d+w.fontSize/2-w.measureText().height/2+2,w.y-w.fontSize/2<this.chart.bounds.y1?w.y=this.chart.bounds.y1+w.fontSize/2+2:w.y+w.measureText().height-w.fontSize/2>this.chart.bounds.y2&&(w.y=this.chart.bounds.y2-w.measureText().height+w.fontSize/2),this.parent._position==="left"?w.x=this.parent.lineCoordinates.x2-w.measureText().width:this.parent._position==="right"&&(w.x=this.parent.lineCoordinates.x2));this.parent._position==="left"&&w.x<this.chart.bounds.x1?w.x=this.chart.bounds.x1:this.parent._position==="right"&&w.x+w.measureText().width>this.chart.bounds.x2?w.x=this.chart.bounds.x2-w.measureText().width:this.parent._position==="top"&&w.y-w.fontSize/2<this.chart.bounds.y1?w.y=this.chart.bounds.y1+w.fontSize/2:this.parent._position==="bottom"&&this.parent.lineCoordinates.y2-w.fontSize/2+w.measureText().height>this.chart.bounds.y2&&(w.y=this.chart.bounds.y2-w.height+w.fontSize/2+2),u.globalAlpha=b,0<C&&(u.moveTo(o,x),u.lineTo(c,y),u.stroke(),this._hidden=!1),this.value=this.parent._position==="bottom"||this.parent._position==="top"?this.parent.convertPixelToValue(r):this.parent.convertPixelToValue(d)}(this.parent._position==="bottom"||this.parent._position==="top")&&(this.parent.sessionVariables.crosshairValue=this._updatedValue=this.parent.convertPixelToValue(S)),(this.parent._position==="left"||this.parent._position==="right")&&(this.parent.sessionVariables.crosshairValue=this._updatedValue=this.parent.convertPixelToValue(E)),this._textBlock=w,this._label=h,m(h)||this.renderLabel(),u.restore(),u.globalAlpha=I},_i.prototype.renderLabel=function(){this.value>=Math.min(this.parent.viewportMinimum,this.parent.viewportMaximum)&&this.value<=Math.max(this.parent.viewportMinimum,this.parent.viewportMaximum)&&(m(this._textBlock)||m(this._textBlock.text)||!(typeof this._textBlock.text.valueOf()=="number"||0<this._textBlock.text.length)||this._hidden||this._textBlock.render(!0),m(this._label)&&this.dispatchEvent("updated",{chart:this.chart,crosshair:this.options,axis:this.parent,value:this.value},this.parent))},e(Ut,se),Ut.prototype._updateOptions=function(){this.updateOption("enabled"),this.updateOption("shared"),this.updateOption("animationEnabled"),this.updateOption("content"),this.updateOption("contentFormatter"),this.updateOption("reversed"),this.updateOption("backgroundColor"),this.updateOption("borderColor"),this.updateOption("borderThickness"),this.updateOption("cornerRadius"),this.updateOption("fontSize"),this.updateOption("fontColor"),this.updateOption("fontFamily"),this.updateOption("fontWeight"),this.updateOption("fontStyle")},Ut.prototype._initialize=function(){if(this.updateOption("updated"),this.updateOption("hidden"),this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.pointerEvents="none",this.container.style.display="none";var r=document.createElement("div");r.style.width="auto",r.style.height="auto",r.style.minWidth="50px",r.style.lineHeight="normal",r.style.margin="0px 0px 0px 0px",r.style.padding="5px",r.style.fontFamily="Calibri, Arial, Georgia, serif",r.style.fontWeight="normal",r.style.fontStyle=X?"italic":"normal",r.style.fontSize="14px",r.style.color="#000000",r.style.textShadow="1px 1px 1px rgba(0, 0, 0, 0.1)",r.style.textAlign="left",r.style.border="2px solid gray",r.style.background=X?"rgba(255,255,255,.9)":"rgb(255,255,255)",r.style.textIndent="0px",r.style.whiteSpace="nowrap",r.style.borderRadius="5px",r.style.MozUserSelect="none",r.style.WebkitUserSelect="none",r.style.msUserSelect="none",r.style.userSelect="none",X||(r.style.filter="alpha(opacity = 90)",r.style.filter="progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666')"),r.innerText="Sample Tooltip",this.container.appendChild(r),this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},Ut.prototype.mouseMoveHandler=function(r,d){this._lastUpdated&&4>new Date().getTime()-this._lastUpdated||(this._lastUpdated=new Date().getTime(),this.chart.resetOverlayedCanvas(),this._updateToolTip(r,d),this.enabled&&this._updatedEventParameters&&!isNaN(this._prevX)&&!isNaN(this._prevY)&&this.container&&this.container.style&&this.dispatchEvent(this.container.style.display==="none"?"hidden":"updated",this._updatedEventParameters,this))},Ut.prototype._updateToolTip=function(r,d,h){if(h=typeof h>"u"?!0:h,this._updateOptions(),this.container||this._initialize(),this.enabled||this.hide(),!this.chart.disableToolTip){if(typeof r>"u"||typeof d>"u"){if(isNaN(this._prevX)||isNaN(this._prevY))return;r=this._prevX,d=this._prevY}else this._prevX=r,this._prevY=d;var o=null,c=null,x=[],y=0;if(this.shared&&this.enabled&&this.chart.plotInfo.axisPlacement!=="none"){var S=[];if(this.chart.axisX)for(var E=0;E<this.chart.axisX.length;E++){for(var y=this.chart.plotInfo.axisPlacement==="xySwapped"?this.chart.axisX[E].convertPixelToValue({y:d}):this.chart.axisX[E].convertPixelToValue({x:r}),w=null,o=0;o<this.chart.axisX[E].dataSeries.length;o++)(w=this.chart.axisX[E].dataSeries[o].getDataPointAtX(y,h))&&0<=w.index&&(w.dataSeries=this.chart.axisX[E].dataSeries[o],w.dataPoint.y!==null&&w.dataSeries.visible&&S.push(w));w=null}if(this.chart.axisX2)for(E=0;E<this.chart.axisX2.length;E++){for(y=this.chart.plotInfo.axisPlacement==="xySwapped"?this.chart.axisX2[E].convertPixelToValue({y:d}):this.chart.axisX2[E].convertPixelToValue({x:r}),w=null,o=0;o<this.chart.axisX2[E].dataSeries.length;o++)(w=this.chart.axisX2[E].dataSeries[o].getDataPointAtX(y,h))&&0<=w.index&&(w.dataSeries=this.chart.axisX2[E].dataSeries[o],w.dataPoint.y!==null&&w.dataSeries.visible&&S.push(w));w=null}if(S.length===0)return;for(S.sort(function(v,b){return v.dataSeries.axisX.logarithmic||b.dataSeries.axisX.logarithmic?v.distance-b.distance:v.distance/v.dataSeries.axisX.range-b.distance/b.dataSeries.axisX.range}),h=S[0],o=0;o<S.length;o++)S[o].dataPoint.x.valueOf()===h.dataPoint.x.valueOf()&&x.push(S[o]);S=null}else{if(o=this.chart.getDataPointAtXY(r,d,h))this.currentDataPointIndex=o.dataPointIndex,this.currentSeriesIndex=o.dataSeries.index;else if(X)if(o=N(r,d,this.chart._eventManager.ghostCtx),0<o&&typeof this.chart._eventManager.objectMap[o]<"u"){if(o=this.chart._eventManager.objectMap[o],o.objectType==="legendItem")return;this.currentSeriesIndex=o.dataSeriesIndex,this.currentDataPointIndex=0<=o.dataPointIndex?o.dataPointIndex:-1}else this.currentDataPointIndex=-1;else this.currentDataPointIndex=-1;if(0<=this.currentSeriesIndex){if(c=this.chart.data[this.currentSeriesIndex],w={},0<=this.currentDataPointIndex)o=c.dataPoints[this.currentDataPointIndex],w.dataSeries=c,w.dataPoint=o,w.index=this.currentDataPointIndex,w.distance=Math.abs(o.x-y),c.type==="waterfall"&&(w.cumulativeSumYStartValue=c.dataPointEOs[this.currentDataPointIndex].cumulativeSumYStartValue,w.cumulativeSum=c.dataPointEOs[this.currentDataPointIndex].cumulativeSum);else if(this.enabled&&c&&(c.type==="line"||c.type==="stepLine"||c.type==="spline"||c.type==="area"||c.type==="stepArea"||c.type==="splineArea"||c.type==="stackedArea"||c.type==="stackedArea100"||c.type==="rangeArea"||c.type==="rangeSplineArea"||c.type==="candlestick"||c.type==="ohlc"||c.type==="boxAndWhisker"))y=c.axisX.convertPixelToValue({x:r}),w=c.getDataPointAtX(y,h),m(w)||(w.dataSeries=c,this.currentDataPointIndex=w.index,o=w.dataPoint);else{this.chart.clearedOverlayedCanvas==="toolTip"&&(this.chart.resetOverlayedCanvas(),this.chart.clearedOverlayedCanvas=null,this.container&&(this.container.style.display="none"));return}if(!m(w)&&!m(w.dataPoint)&&!m(w.dataPoint.y))if(w.dataSeries.axisY)if(0<w.dataPoint.y.length){for(o=h=0;o<w.dataPoint.y.length;o++)w.dataPoint.y[o]<w.dataSeries.axisY.viewportMinimum?h--:w.dataPoint.y[o]>w.dataSeries.axisY.viewportMaximum&&h++;h<w.dataPoint.y.length&&h>-w.dataPoint.y.length&&x.push(w)}else c.type==="column"||c.type==="bar"?0>w.dataPoint.y?0>w.dataSeries.axisY.viewportMinimum&&w.dataSeries.axisY.viewportMaximum>=w.dataPoint.y&&x.push(w):w.dataSeries.axisY.viewportMinimum<=w.dataPoint.y&&0<=w.dataSeries.axisY.viewportMaximum&&x.push(w):c.type==="bubble"?(h=this.chart._eventManager.objectMap[c.dataPointIds[w.index]].size/2,w.dataPoint.y>=w.dataSeries.axisY.viewportMinimum-h&&w.dataPoint.y<=w.dataSeries.axisY.viewportMaximum+h&&x.push(w)):c.type==="waterfall"?(h=0,w.cumulativeSumYStartValue<w.dataSeries.axisY.viewportMinimum?h--:w.cumulativeSumYStartValue>w.dataSeries.axisY.viewportMaximum&&h++,w.cumulativeSum<w.dataSeries.axisY.viewportMinimum?h--:w.cumulativeSum>w.dataSeries.axisY.viewportMaximum&&h++,2>h&&-2<h&&x.push(w)):(0<=w.dataSeries.type.indexOf("100")||c.type==="stackedColumn"||c.type==="stackedBar"||c.type==="stackedArea"||w.dataPoint.y>=w.dataSeries.axisY.viewportMinimum&&w.dataPoint.y<=w.dataSeries.axisY.viewportMaximum)&&x.push(w);else x.push(w)}}if(0<x.length){if(this.highlightObjects(x),this.enabled){if(h="",h=this.getToolTipInnerHTML({entries:x}),h!==null){if(this.contentDiv.innerHTML=h,this.isToolTipDefinedInData&&m(this.options.content)&&m(this.options.contentFormatter))for(y=this.contentDiv.getElementsByTagName("span"),o=0;o<y.length;o++)y[o]&&(y[o].style.color=y[o].getAttribute("data-color"));y=!1,this.container.style.display==="none"&&(y=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:X?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.borderColor=x[0].dataSeries.type==="waterfall"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:0<x[0].dataPoint.y?x[0].dataSeries.risingColor:x[0].dataSeries.fallingColor:x[0].dataSeries.type==="error"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[c.index%x[0].dataSeries._colorSet.length]:this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[x[0].index%x[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||this.borderThickness===0?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||this.cornerRadius===0?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||this.fontSize===0?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:X?"italic":"normal"}catch{}x[0].dataSeries.type==="pie"||x[0].dataSeries.type==="doughnut"||x[0].dataSeries.type==="funnel"||x[0].dataSeries.type==="pyramid"||x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?r=r-10-this.container.clientWidth:(r=x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x)-this.container.clientWidth<<0,r-=10),0>r&&(r=Math.max(0,r+this.container.clientWidth+20)),r+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(r=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),d=x.length!==1||this.shared||x[0].dataSeries.type!=="line"&&x[0].dataSeries.type!=="stepLine"&&x[0].dataSeries.type!=="spline"&&x[0].dataSeries.type!=="area"&&x[0].dataSeries.type!=="stepArea"&&x[0].dataSeries.type!=="splineArea"?x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x):d:x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y),d=-d+10,0<d+this.container.clientHeight+5&&(d-=d+this.container.clientHeight+5-0),this.fixMozTransitionDelay(r,d),!this.animationEnabled||y?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.positionLeft=r,this.positionBottom=d,this.container.style.left=r+"px",this.container.style.bottom=d+"px"}else this.hide(!1),this.enabled&&this.dispatchEvent("hidden",{chart:this.chart,toolTip:this},this);for(d=[],o=0;o<x.length;o++)d.push({xValue:x[o].dataPoint.x,dataPoint:x[o].dataPoint,dataSeries:x[o].dataSeries,dataPointIndex:x[o].index,dataSeriesIndex:x[o].dataSeries._index});this._updatedEventParameters={chart:this.chart,toolTip:this.options,content:h,entries:d},this._entries=x}}else this.hide(),this.enabled&&this.dispatchEvent("hidden",{chart:this.chart,toolTip:this},this);this._dataSeriesIndex=this._xValue=null}},Ut.prototype.highlightObjects=function(r){var d=this.chart.overlaidCanvasCtx;m(this.chart.clearedOverlayedCanvas)||this.chart.clearedOverlayedCanvas==="toolTip"?(this.chart.resetOverlayedCanvas(),d.clearRect(0,0,this.chart.width,this.chart.height),this.chart.clearedOverlayedCanvas="toolTip"):this.chart.clearedOverlayedCanvas=null,d.save();var h=this.chart.plotArea,o=0;for(d.beginPath(),d.rect(h.x1,h.y1,h.x2-h.x1,h.y2-h.y1),d.clip(),h=0;h<r.length;h++){var c=r[h];if((c=this.chart._eventManager.objectMap[c.dataSeries.dataPointIds[c.index]])&&c.objectType&&c.objectType==="dataPoint"){var o=this.chart.data[c.dataSeriesIndex],x=o.dataPoints[c.dataPointIndex],y=c.dataPointIndex;x.highlightEnabled===!1||o.highlightEnabled!==!0&&x.highlightEnabled!==!0||(o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="scatter"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="stackedArea"||o.type==="stackedArea100"||o.type==="rangeArea"||o.type==="rangeSplineArea"?(x=o.getMarkerProperties(y,c.x1,c.y1,this.chart.overlaidCanvasCtx),x.size=Math.max(1.5*x.size<<0,10),x.borderColor=x.borderColor||"#FFFFFF",x.borderThickness=x.borderThickness||Math.ceil(.1*x.size),Ve.drawMarkers([x]),typeof c.y2<"u"&&(x=o.getMarkerProperties(y,c.x1,c.y2,this.chart.overlaidCanvasCtx),x.size=Math.max(1.5*x.size<<0,10),x.borderColor=x.borderColor||"#FFFFFF",x.borderThickness=x.borderThickness||Math.ceil(.1*x.size),Ve.drawMarkers([x]))):o.type==="bubble"?(x=o.getMarkerProperties(y,c.x1,c.y1,this.chart.overlaidCanvasCtx),x.size=c.size,x.color="white",x.borderColor="white",d.globalAlpha=.3,Ve.drawMarkers([x]),d.globalAlpha=1):o.type==="column"||o.type==="stackedColumn"||o.type==="stackedColumn100"||o.type==="bar"||o.type==="rangeBar"||o.type==="stackedBar"||o.type==="stackedBar100"||o.type==="rangeColumn"||o.type==="waterfall"?Tt(d,c.x1,c.y1,c.x2,c.y2,"white",0,null,!1,!1,!1,!1,.3):o.type==="pie"||o.type==="doughnut"?pe(d,c.center,c.radius,"white",o.type,c.startAngle,c.endAngle,.3,c.percentInnerRadius):o.type==="funnel"||o.type==="pyramid"?ye(d,c.funnelSection,.3,"white"):o.type==="candlestick"?(d.globalAlpha=1,d.strokeStyle=c.color,d.lineWidth=2*c.borderThickness,o=d.lineWidth%2===0?0:.5,d.beginPath(),d.moveTo(c.x3-o,Math.min(c.y2,c.y3)),d.lineTo(c.x3-o,Math.min(c.y1,c.y4)),d.stroke(),d.beginPath(),d.moveTo(c.x3-o,Math.max(c.y1,c.y4)),d.lineTo(c.x3-o,Math.max(c.y2,c.y3)),d.stroke(),Tt(d,c.x1,Math.min(c.y1,c.y4),c.x2,Math.max(c.y1,c.y4),"transparent",2*c.borderThickness,c.color,!1,!1),d.globalAlpha=1):o.type==="ohlc"?(d.globalAlpha=1,d.strokeStyle=c.color,d.lineWidth=2*c.borderThickness,o=d.lineWidth%2===0?0:.5,d.beginPath(),d.moveTo(c.x3-o,c.y2),d.lineTo(c.x3-o,c.y3),d.stroke(),d.beginPath(),d.moveTo(c.x3,c.y1),d.lineTo(c.x1,c.y1),d.stroke(),d.beginPath(),d.moveTo(c.x3,c.y4),d.lineTo(c.x2,c.y4),d.stroke(),d.globalAlpha=1):o.type==="boxAndWhisker"?(d.save(),d.globalAlpha=1,d.strokeStyle=c.stemColor,d.lineWidth=2*c.stemThickness,0<c.stemThickness&&(d.beginPath(),d.moveTo(c.x3,c.y2+c.borderThickness/2),d.lineTo(c.x3,c.y1+c.whiskerThickness/2),d.stroke(),d.beginPath(),d.moveTo(c.x3,c.y4-c.whiskerThickness/2),d.lineTo(c.x3,c.y3-c.borderThickness/2),d.stroke()),d.beginPath(),Tt(d,c.x1,Math.max(c.y2,c.y3),c.x2,Math.min(c.y2,c.y3),"transparent",2*c.borderThickness,c.color,!1,!1),d.globalAlpha=1,d.strokeStyle=c.whiskerColor,d.lineWidth=2*c.whiskerThickness,0<c.whiskerThickness&&(d.beginPath(),d.moveTo(Math.floor(c.x3-c.whiskerLength/2),c.y4),d.lineTo(Math.ceil(c.x3+c.whiskerLength/2),c.y4),d.stroke(),d.beginPath(),d.moveTo(Math.floor(c.x3-c.whiskerLength/2),c.y1),d.lineTo(Math.ceil(c.x3+c.whiskerLength/2),c.y1),d.stroke()),d.globalAlpha=1,d.strokeStyle=c.lineColor,d.lineWidth=2*c.lineThickness,0<c.lineThickness&&(d.beginPath(),d.moveTo(c.x1,c.y5),d.lineTo(c.x2,c.y5),d.stroke()),d.restore(),d.globalAlpha=1):o.type==="error"&&Ce(d,c.x1,c.y1,c.x2,c.y2,"white",c.whiskerProperties,c.stemProperties,c.isXYSwapped,.3))}}d.restore(),d.globalAlpha=1,d.beginPath()},Ut.prototype.getToolTipInnerHTML=function(r){r=r.entries;var d=null,h=null,o=null,c=0,x="";this.isToolTipDefinedInData=!0;for(var y=0;y<r.length;y++)if(r[y].dataSeries.toolTipContent||r[y].dataPoint.toolTipContent){this.isToolTipDefinedInData=!1;break}if(this.isToolTipDefinedInData&&(this.content&&typeof this.content=="function"||this.contentFormatter))r={chart:this.chart,toolTip:this.options,entries:r},d=this.contentFormatter?this.contentFormatter(r):this.content(r);else if(this.shared&&this.chart.plotInfo.axisPlacement!=="none"){for(var S=null,E="",y=0;y<r.length;y++){if(h=r[y].dataSeries,o=r[y].dataPoint,c=r[y].index,x="",y===0&&this.isToolTipDefinedInData&&!this.content){if(this.chart.axisX&&0<this.chart.axisX.length?E+=typeof this.chart.axisX[0].labels[o.x]<"u"?this.chart.axisX[0].labels[o.x]:"{x}":this.chart.axisX2&&0<this.chart.axisX2.length&&(E+=typeof this.chart.axisX2[0].labels[o.x]<"u"?this.chart.axisX2[0].labels[o.x]:"{x}"),E+="</br>",!h.visible)continue;E=this.chart.replaceKeywordsWithValue(E,o,h,c)}o.toolTipContent===null||typeof o.toolTipContent>"u"&&h.options.toolTipContent===null||(h.type==="line"||h.type==="stepLine"||h.type==="spline"||h.type==="area"||h.type==="stepArea"||h.type==="splineArea"||h.type==="column"||h.type==="bar"||h.type==="scatter"||h.type==="stackedColumn"||h.type==="stackedColumn100"||h.type==="stackedBar"||h.type==="stackedBar100"||h.type==="stackedArea"||h.type==="stackedArea100"||h.type==="waterfall"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=S!=h.axisXIndex?h.axisX.title?h.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span>&nbsp;&nbsp;{y}`,S=h.axisXIndex):h.type==="bubble"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=S!=h.axisXIndex?h.axisX.title?h.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}`):h.type==="rangeColumn"||h.type==="rangeBar"||h.type==="rangeArea"||h.type==="rangeSplineArea"||h.type==="error"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=S!=h.axisXIndex?h.axisX.title?h.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}`):h.type==="candlestick"||h.type==="ohlc"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=S!=h.axisXIndex?h.axisX.title?h.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}`):h.type==="boxAndWhisker"&&(this.chart.axisX&&1<this.chart.axisX.length&&(x+=S!=h.axisXIndex?h.axisX.title?h.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span><br/>Minimum: &nbsp;{y[0]}<br/>Q1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}`),d===null&&(d=""),h.visible&&(this.reversed===!0?(d=this.chart.replaceKeywordsWithValue(x,o,h,c)+d,y<r.length-1&&(d="</br>"+d)):(d+=this.chart.replaceKeywordsWithValue(x,o,h,c),y<r.length-1&&(d+="</br>"))))}d!==null&&(d=E+d)}else{if(h=r[0].dataSeries,o=r[0].dataPoint,c=r[0].index,o.toolTipContent===null||typeof o.toolTipContent>"u"&&h.options.toolTipContent===null)return null;h.type==="line"||h.type==="stepLine"||h.type==="spline"||h.type==="area"||h.type==="stepArea"||h.type==="splineArea"||h.type==="column"||h.type==="bar"||h.type==="scatter"||h.type==="stackedColumn"||h.type==="stackedColumn100"||h.type==="stackedBar"||h.type==="stackedBar100"||h.type==="stackedArea"||h.type==="stackedArea100"||h.type==="waterfall"?x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}":h.type==="bubble"?x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":h.type==="pie"||h.type==="doughnut"||h.type==="funnel"||h.type==="pyramid"?x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.name?"{name}:</span>&nbsp;&nbsp;":o.label?"{label}:</span>&nbsp;&nbsp;":"</span>")+"{y}":h.type==="rangeColumn"||h.type==="rangeBar"||h.type==="rangeArea"||h.type==="rangeSplineArea"||h.type==="error"?x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}":h.type==="candlestick"||h.type==="ohlc"?x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+"</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}":h.type==="boxAndWhisker"&&(x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+"</span><br/>Minimum: &nbsp;{y[0]}<br/>Q1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),d===null&&(d=""),d+=this.chart.replaceKeywordsWithValue(x,o,h,c)}return d},Ut.prototype.enableAnimation=function(){if(!this.container.style.WebkitTransition){var r=this.getContainerTransition(this.containerTransitionDuration);this.container.style.WebkitTransition=r,this.container.style.MsTransition=r,this.container.style.transition=r,this.container.style.MozTransition=this.mozContainerTransition}},Ut.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},Ut.prototype.hide=function(r){this.container&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._entries=this._dataSeriesIndex=this._xValue=null,this._prevY=this._prevX=NaN,this._updatedEventParameters=null,(typeof r>"u"||r)&&this.chart.resetOverlayedCanvas())},Ut.prototype.show=function(r,d,h){this._updateToolTip(r,d,typeof h>"u"?!1:h)},Ut.prototype.showAtIndex=function(r,d){},Ut.prototype.showAtX=function(r,d){if(!this.enabled)return!1;this.chart.clearedOverlayedCanvas=null,this._updateOptions();var h,o,c,x=[];if(c=!1,d=!m(d)&&0<=d&&d<this.chart.data.length?d:0,this.shared)for(var y=0;y<this.chart.data.length;y++)h=this.chart.data[y],(o=h.getDataPointAtX(r,!1))&&o.dataPoint&&!m(o.dataPoint.y)&&h.visible&&(o.dataSeries=h,this.chart.data[d].axisX.convertValueToPixel(r)===h.axisX.convertValueToPixel(o.dataPoint.x)&&x.push(o));else h=this.chart.data[d],(o=h.getDataPointAtX(r,!1))&&o.dataPoint&&!m(o.dataPoint.y)&&h.visible&&(o.dataSeries=h,x.push(o));if(0<x.length){for(y=0;y<x.length;y++)if(o=x[y],(this.shared||0<=o.dataSeries.type.indexOf("100"))&&o.dataSeries.axisX&&o.dataPoint.x>=o.dataSeries.axisX.viewportMinimum&&o.dataPoint.x<=o.dataSeries.axisX.viewportMaximum){c=!1;break}else if(o.dataSeries.axisX&&o.dataSeries.axisY&&(o.dataPoint.x<o.dataSeries.axisX.viewportMinimum||o.dataPoint.x>o.dataSeries.axisX.viewportMaximum||o.dataPoint.y<o.dataSeries.axisY.viewportMinimum||o.dataPoint.y>o.dataSeries.axisY.viewportMaximum))c=!0;else{c=!1;break}if(c)return this.hide(),!1;if(this.highlightObjects(x),this._entries=x,y="",y=this.getToolTipInnerHTML({entries:x}),y!==null){if(this.contentDiv.innerHTML=y,this.isToolTipDefinedInData&&m(this.options.content)&&m(this.options.contentFormatter))for(o=this.contentDiv.getElementsByTagName("span"),y=0;y<o.length;y++)o[y]&&(o[y].style.color=o[y].getAttribute("data-color"));y=!1,this.container.style.display==="none"&&(y=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:X?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.borderColor=x[0].dataSeries.type==="waterfall"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:0<x[0].dataPoint.y?x[0].dataSeries.risingColor:x[0].dataSeries.fallingColor:x[0].dataSeries.type==="error"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[h.index%x[0].dataSeries._colorSet.length]:this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[x[0].index%x[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||this.borderThickness===0?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||this.cornerRadius===0?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||this.fontSize===0?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:X?"italic":"normal"}catch{}x[0].dataSeries.type==="pie"||x[0].dataSeries.type==="doughnut"?h=x[0].dataSeries.dataPointEOs[x[0].index].center.x+x[0].dataSeries.radius*Math.cos(x[0].dataSeries.dataPointEOs[x[0].index].midAngle)+-(x[0].dataSeries.dataPointEOs[x[0].index].hemisphere==="left"?0:this.container.clientWidth):x[0].dataSeries.type==="funnel"||x[0].dataSeries.type==="pyramid"?(o=x[0].dataSeries.dataPointEOs[x[0].index].sectionsofFunnel,h=(o.x1+o.x2-this.container.clientWidth)/2):(h=x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y.length?x[0].dataPoint.y[x[0].dataPoint.y.length-1]:x[0].dataPoint.y)-this.container.clientWidth<<0:x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x)-this.container.clientWidth<<0,h-=10),0>h&&(h+=this.container.clientWidth+20),h+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(h=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),x.length!==1||this.shared||x[0].dataSeries.type!=="line"&&x[0].dataSeries.type!=="stepLine"&&x[0].dataSeries.type!=="spline"&&x[0].dataSeries.type!=="area"&&x[0].dataSeries.type!=="stepArea"&&x[0].dataSeries.type!=="splineArea"?x[0].dataSeries.type==="pie"||x[0].dataSeries.type==="doughnut"?(o=x[0].dataSeries.dataPointEOs[x[0].index].center.y+x[0].dataSeries.radius*Math.sin(x[0].dataSeries.dataPointEOs[x[0].index].midAngle),o<x[0].dataSeries.dataPointEOs[x[0].index].center.y&&(o+=this.container.clientHeight)):x[0].dataSeries.type==="funnel"||x[0].dataSeries.type==="pyramid"?(o=x[0].dataSeries.dataPointEOs[x[0].dataSeries.reversed?x[0].dataSeries.dataPointEOs.length-1-x[0].index:x[0].index].sectionsofFunnel,o=typeof o.x5<"u"?(o.y2+o.y4)/2:(o.y2+o.y3)/2+this.container.clientHeight/2):o=x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x):x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y.length?x[0].dataPoint.y[x[0].dataPoint.y.length-1]:x[0].dataPoint.y):o=x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y),o=-o+10,0<o+this.container.clientHeight+5&&(o-=o+this.container.clientHeight+5-0),this.fixMozTransitionDelay(h,o),!this.animationEnabled||y?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.container.style.left=h+"px",this.container.style.bottom=o+"px"}else return this.hide(!1),!1}else return this.hide(),!1;return this._xValue=r,this._dataSeriesIndex=d,this._prevY=this._prevX=NaN,!0},Ut.prototype.fixMozTransitionDelay=function(r,d){if(20<this.chart._eventManager.lastObjectId)this.mozContainerTransition=this.getContainerTransition(0);else{var h=parseFloat(this.container.style.left),h=isNaN(h)?0:h,o=parseFloat(this.container.style.bottom),o=isNaN(o)?0:o;10<Math.sqrt(Math.pow(h-r,2)+Math.pow(o-d,2))?this.mozContainerTransition=this.getContainerTransition(.1):this.mozContainerTransition=this.getContainerTransition(0)}},Ut.prototype.getContainerTransition=function(r){return"left "+r+"s ease-out 0s, bottom "+r+"s ease-out 0s"},ci.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],X&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},ci.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},ci.prototype.mouseEventHandler=function(r){if(r.type==="mousemove"||r.type==="click"){var d=[],h=Yi(r),o=null;if((o=this.chart.getObjectAtXY(h.x,h.y,!1))&&typeof this.objectMap[o]<"u")if(o=this.objectMap[o],o.objectType==="dataPoint"){var c=this.chart.data[o.dataSeriesIndex],x=c.dataPoints[o.dataPointIndex],y=o.dataPointIndex;o.eventParameter={x:h.x,y:h.y,dataPoint:x,dataSeries:c.options,dataPointIndex:y,dataSeriesIndex:c.index,chart:this.chart},o.eventContext={context:x,userContext:x,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},d.push(o),o=this.objectMap[c.id],o.eventParameter={x:h.x,y:h.y,dataPoint:x,dataSeries:c.options,dataPointIndex:y,dataSeriesIndex:c.index,chart:this.chart},o.eventContext={context:c,userContext:c.options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},d.push(this.objectMap[c.id])}else o.objectType==="legendItem"&&(c=this.chart.data[o.dataSeriesIndex],x=o.dataPointIndex!==null?c.dataPoints[o.dataPointIndex]:null,o.eventParameter={x:h.x,y:h.y,dataSeries:c.options,dataPoint:x,dataPointIndex:o.dataPointIndex,dataSeriesIndex:o.dataSeriesIndex,chart:this.chart},o.eventContext={context:this.chart.legend,userContext:this.chart.legend.options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},d.push(o));for(c=[],h=0;h<this.mouseoveredObjectMaps.length;h++){for(x=!0,o=0;o<d.length;o++)if(d[o].id===this.mouseoveredObjectMaps[h].id){x=!1;break}x?this.fireEvent(this.mouseoveredObjectMaps[h],"mouseout",r):c.push(this.mouseoveredObjectMaps[h])}for(this.mouseoveredObjectMaps=c,h=0;h<d.length;h++){for(c=!1,o=0;o<this.mouseoveredObjectMaps.length;o++)if(d[h].id===this.mouseoveredObjectMaps[o].id){c=!0;break}c||(this.fireEvent(d[h],"mouseover",r),this.mouseoveredObjectMaps.push(d[h])),r.type==="click"?this.fireEvent(d[h],"click",r):r.type==="mousemove"&&this.fireEvent(d[h],"mousemove",r)}}},ci.prototype.fireEvent=function(r,d,h){if(r&&d){var o=r.eventParameter,c=r.eventContext,x=r.eventContext.userContext;x&&c&&x[c[d]]&&x[c[d]].call(x,o),d!=="mouseout"?x.cursor&&x.cursor!==h.target.style.cursor&&(h.target.style.cursor=x.cursor):(h.target.style.cursor=this.chart.panEnabled?c.mouseout!=="itemmouseout"||x.dockInsidePlotArea?"move":this.chart._defaultCursor:this.chart._defaultCursor,delete r.eventParameter,delete r.eventContext),d==="click"&&r.objectType==="dataPoint"&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[r.dataSeriesIndex],o),d==="click"&&r.objectType==="dataPoint"&&this.chart.funnelPyramidClickHandler&&this.chart.funnelPyramidClickHandler.call(this.chart.data[r.dataSeriesIndex],o)}},re.prototype.animate=function(r,d,h,o,c){var x=this;for(this.chart.isAnimating=!0,c=c||xe.easing.linear,h&&this.animations.push({startTime:new Date().getTime()+(r||0),duration:d,animationCallback:h,onComplete:o}),r=[];0<this.animations.length;)d=this.animations.shift(),h=new Date().getTime(),o=0,d.startTime<=h&&(o=c(Math.min(h-d.startTime,d.duration),0,1,d.duration),o=Math.min(o,1),isNaN(o)||!isFinite(o))&&(o=1),1>o&&r.push(d),d.animationCallback(o),1<=o&&d.onComplete&&d.onComplete();this.animations=r,0<this.animations.length?this.animationRequestId=this.chart.requestAnimFrame.call(window,function(){x.animate.call(x)}):this.chart.isAnimating=!1},re.prototype.cancelAllAnimations=function(){this.animations=[],this.animationRequestId&&this.chart.cancelRequestAnimFrame.call(window,this.animationRequestId),this.animationRequestId=null,this.chart.isAnimating=!1};var xe={yScaleAnimation:function(r,d){if(r!==0){var h=d.dest,o=d.source.canvas,c=d.animationBase;h.drawImage(o,0,0,o.width,o.height,0,c-c*r,h.canvas.width/ii,r*h.canvas.height/ii)}},xScaleAnimation:function(r,d){if(r!==0){var h=d.dest,o=d.source.canvas,c=d.animationBase;h.drawImage(o,0,0,o.width,o.height,c-c*r,0,r*h.canvas.width/ii,h.canvas.height/ii)}},xClipAnimation:function(r,d){if(r!==0){var h=d.dest,o=d.source.canvas;h.save(),0<r&&h.drawImage(o,0,0,o.width*r,o.height,0,0,o.width*r/ii,o.height/ii),h.restore()}},fadeInAnimation:function(r,d){if(r!==0){var h=d.dest,o=d.source.canvas;h.save(),h.globalAlpha=r,h.drawImage(o,0,0,o.width,o.height,0,0,h.canvas.width/ii,h.canvas.height/ii),h.restore()}},easing:{linear:function(r,d,h,o){return h*r/o+d},easeOutQuad:function(r,d,h,o){return-h*(r/=o)*(r-2)+d},easeOutQuart:function(r,d,h,o){return-h*((r=r/o-1)*r*r*r-1)+d},easeInQuad:function(r,d,h,o){return h*(r/=o)*r+d},easeInQuart:function(r,d,h,o){return h*(r/=o)*r*r*r+d}}},Ve={drawMarker:function(r,d,h,o,c,x,y,S){if(h){var E=1;h.fillStyle=x||"#000000",h.strokeStyle=y||"#000000",h.lineWidth=S||0,h.setLineDash&&h.setLineDash(P("solid",S)),o==="circle"?(h.moveTo(r,d),h.beginPath(),h.arc(r,d,c/2,0,2*Math.PI,!1),x&&h.fill(),S&&(y?h.stroke():(E=h.globalAlpha,h.globalAlpha=.15,h.strokeStyle="black",h.stroke(),h.globalAlpha=E))):o==="square"?(h.beginPath(),h.rect(r-c/2,d-c/2,c,c),x&&h.fill(),S&&(y?h.stroke():(E=h.globalAlpha,h.globalAlpha=.15,h.strokeStyle="black",h.stroke(),h.globalAlpha=E))):o==="triangle"?(h.beginPath(),h.moveTo(r-c/2,d+c/2),h.lineTo(r+c/2,d+c/2),h.lineTo(r,d-c/2),h.closePath(),x&&h.fill(),S&&(y?h.stroke():(E=h.globalAlpha,h.globalAlpha=.15,h.strokeStyle="black",h.stroke(),h.globalAlpha=E)),h.beginPath()):o==="cross"&&(h.strokeStyle=x,h.lineWidth=c/4,h.beginPath(),h.moveTo(r-c/2,d-c/2),h.lineTo(r+c/2,d+c/2),h.stroke(),h.moveTo(r+c/2,d-c/2),h.lineTo(r-c/2,d+c/2),h.stroke())}},drawMarkers:function(r){for(var d=0;d<r.length;d++){var h=r[d];Ve.drawMarker(h.x,h.y,h.ctx,h.type,h.size,h.color,h.borderColor,h.borderThickness)}}};return j}(),$.version="v3.10.16 GA",window.CanvasJS&&$&&!window.CanvasJS.Chart&&(window.CanvasJS.Chart=$)})(),document.createElement("canvas").getContext||function(){function e(){return this.context_||(this.context_=new P(this))}function i($,oe,fe){var ve=Oe.call(arguments,2);return function(){return $.apply(oe,ve.concat(Oe.call(arguments)))}}function n($){return String($).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function s($){$.namespaces.g_vml_||$.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),$.namespaces.g_o_||$.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),$.styleSheets.ex_canvas_||($=$.createStyleSheet(),$.owningElement.id="ex_canvas_",$.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function a($){var oe=$.srcElement;switch($.propertyName){case"width":oe.getContext().clearRect(),oe.style.width=oe.attributes.width.nodeValue+"px",oe.firstChild.style.width=oe.clientWidth+"px";break;case"height":oe.getContext().clearRect(),oe.style.height=oe.attributes.height.nodeValue+"px",oe.firstChild.style.height=oe.clientHeight+"px"}}function l($){$=$.srcElement,$.firstChild&&($.firstChild.style.width=$.clientWidth+"px",$.firstChild.style.height=$.clientHeight+"px")}function p(){return[[1,0,0],[0,1,0],[0,0,1]]}function f($,oe){for(var fe=p(),ve=0;3>ve;ve++)for(var Se=0;3>Se;Se++){for(var Ee=0,it=0;3>it;it++)Ee+=$[ve][it]*oe[it][Se];fe[ve][Se]=Ee}return fe}function g($,oe){oe.fillStyle=$.fillStyle,oe.lineCap=$.lineCap,oe.lineJoin=$.lineJoin,oe.lineWidth=$.lineWidth,oe.miterLimit=$.miterLimit,oe.shadowBlur=$.shadowBlur,oe.shadowColor=$.shadowColor,oe.shadowOffsetX=$.shadowOffsetX,oe.shadowOffsetY=$.shadowOffsetY,oe.strokeStyle=$.strokeStyle,oe.globalAlpha=$.globalAlpha,oe.font=$.font,oe.textAlign=$.textAlign,oe.textBaseline=$.textBaseline,oe.arcScaleX_=$.arcScaleX_,oe.arcScaleY_=$.arcScaleY_,oe.lineScale_=$.lineScale_}function m($){var fe=$.indexOf("(",3),oe=$.indexOf(")",fe+1),fe=$.substring(fe+1,oe).split(",");return(fe.length!=4||$.charAt(3)!="a")&&(fe[3]=1),fe}function k($,oe,fe){return Math.min(fe,Math.max(oe,$))}function T($,oe,fe){return 0>fe&&fe++,1<fe&&fe--,1>6*fe?$+6*(oe-$)*fe:1>2*fe?oe:2>3*fe?$+6*(oe-$)*(2/3-fe):$}function A($){if($ in Be)return Be[$];var oe,fe=1;if($=String($),$.charAt(0)=="#")oe=$;else if(/^rgb/.test($)){fe=m($),oe="#";for(var ve,Se=0;3>Se;Se++)ve=fe[Se].indexOf("%")!=-1?Math.floor(255*(parseFloat(fe[Se])/100)):+fe[Se],oe+=tt[k(ve,0,255)];fe=+fe[3]}else if(/^hsl/.test($)){if(Se=fe=m($),oe=parseFloat(Se[0])/360%360,0>oe&&oe++,ve=k(parseFloat(Se[1])/100,0,1),Se=k(parseFloat(Se[2])/100,0,1),ve==0)ve=Se=oe=Se;else{var Ee=.5>Se?Se*(1+ve):Se+ve-Se*ve,it=2*Se-Ee;ve=T(it,Ee,oe+1/3),Se=T(it,Ee,oe),oe=T(it,Ee,oe-1/3)}oe="#"+tt[Math.floor(255*ve)]+tt[Math.floor(255*Se)]+tt[Math.floor(255*oe)],fe=fe[3]}else oe=Ne[$]||$;return Be[$]={color:oe,alpha:fe}}function P($){this.m_=p(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*ue,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=$;var oe="width:"+$.clientWidth+"px;height:"+$.clientHeight+"px;overflow:hidden;position:absolute",fe=$.ownerDocument.createElement("div");fe.style.cssText=oe,$.appendChild(fe),oe=fe.cloneNode(!1),oe.style.backgroundColor="red",oe.style.filter="alpha(opacity=0)",$.appendChild(oe),this.element_=fe,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function L($,oe,fe,ve){$.currentPath_.push({type:"bezierCurveTo",cp1x:oe.x,cp1y:oe.y,cp2x:fe.x,cp2y:fe.y,x:ve.x,y:ve.y}),$.currentX_=ve.x,$.currentY_=ve.y}function W($,oe){var ve=A($.strokeStyle),fe=ve.color,ve=ve.alpha*$.globalAlpha,Se=$.lineScale_*$.lineWidth;1>Se&&(ve*=Se),oe.push("<g_vml_:stroke",' opacity="',ve,'"',' joinstyle="',$.lineJoin,'"',' miterlimit="',$.miterLimit,'"',' endcap="',_e[$.lineCap]||"square",'"',' weight="',Se,'px"',' color="',fe,'" />')}function N($,oe,fe,ve){var Se=$.fillStyle,Ee=$.arcScaleX_,it=$.arcScaleY_,st=ve.x-fe.x,mt=ve.y-fe.y;if(Se instanceof z){var at=0,nt=ve=0,ze=0,It=1;if(Se.type_=="gradient"){at=Se.x1_/Ee,fe=Se.y1_/it;var ht=M($,Se.x0_/Ee,Se.y0_/it),at=M($,at,fe),at=180*Math.atan2(at.x-ht.x,at.y-ht.y)/Math.PI;0>at&&(at+=360),1e-6>at&&(at=0)}else ht=M($,Se.x0_,Se.y0_),ve=(ht.x-fe.x)/st,nt=(ht.y-fe.y)/mt,st/=Ee*ue,mt/=it*ue,It=U.max(st,mt),ze=2*Se.r0_/It,It=2*Se.r1_/It-ze;Ee=Se.colors_,Ee.sort(function(Pi,dn){return Pi.offset-dn.offset}),it=Ee.length,ht=Ee[0].color,fe=Ee[it-1].color,st=Ee[0].alpha*$.globalAlpha,$=Ee[it-1].alpha*$.globalAlpha;for(var mt=[],Gi=0;Gi<it;Gi++){var On=Ee[Gi];mt.push(On.offset*It+ze+" "+On.color)}oe.push('<g_vml_:fill type="',Se.type_,'"',' method="none" focus="100%"',' color="',ht,'"',' color2="',fe,'"',' colors="',mt.join(","),'"',' opacity="',$,'"',' g_o_:opacity2="',st,'"',' angle="',at,'"',' focusposition="',ve,",",nt,'" />')}else Se instanceof G?st&&mt&&oe.push("<g_vml_:fill",' position="',-fe.x/st*Ee*Ee,",",-fe.y/mt*it*it,'"',' type="tile"',' src="',Se.src_,'" />'):(Se=A($.fillStyle),oe.push('<g_vml_:fill color="',Se.color,'" opacity="',Se.alpha*$.globalAlpha,'" />'))}function M($,oe,fe){return $=$.m_,{x:ue*(oe*$[0][0]+fe*$[1][0]+$[2][0])-Le,y:ue*(oe*$[0][1]+fe*$[1][1]+$[2][1])-Le}}function B($,oe,fe){isFinite(oe[0][0])&&isFinite(oe[0][1])&&isFinite(oe[1][0])&&isFinite(oe[1][1])&&isFinite(oe[2][0])&&isFinite(oe[2][1])&&($.m_=oe,fe&&($.lineScale_=ge(se(oe[0][0]*oe[1][1]-oe[0][1]*oe[1][0]))))}function z($){this.type_=$,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function G($,oe){if(!$||$.nodeType!=1||$.tagName!="IMG")throw new R("TYPE_MISMATCH_ERR");if($.readyState!="complete")throw new R("INVALID_STATE_ERR");switch(oe){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=oe;break;default:throw new R("SYNTAX_ERR")}this.src_=$.src,this.width_=$.width,this.height_=$.height}function R($){this.code=this[$],this.message=$+": DOM Exception "+this.code}var U=Math,K=U.round,ae=U.sin,Q=U.cos,se=U.abs,ge=U.sqrt,ue=10,Le=ue/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var Oe=Array.prototype.slice;s(document);var Ue={init:function($){$=$||document,$.createElement("canvas"),$.attachEvent("onreadystatechange",i(this.init_,this,$))},init_:function($){$=$.getElementsByTagName("canvas");for(var oe=0;oe<$.length;oe++)this.initElement($[oe])},initElement:function($){if(!$.getContext){$.getContext=e,s($.ownerDocument),$.innerHTML="",$.attachEvent("onpropertychange",a),$.attachEvent("onresize",l);var oe=$.attributes;oe.width&&oe.width.specified?$.style.width=oe.width.nodeValue+"px":$.width=$.clientWidth,oe.height&&oe.height.specified?$.style.height=oe.height.nodeValue+"px":$.height=$.clientHeight}return $}};Ue.init();for(var tt=[],me=0;16>me;me++)for(var Pe=0;16>Pe;Pe++)tt[16*me+Pe]=me.toString(16)+Pe.toString(16);var Ne={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},Be={},X={},_e={butt:"flat",round:"round"},me=P.prototype;me.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},me.beginPath=function(){this.currentPath_=[]},me.moveTo=function($,oe){var fe=M(this,$,oe);this.currentPath_.push({type:"moveTo",x:fe.x,y:fe.y}),this.currentX_=fe.x,this.currentY_=fe.y},me.lineTo=function($,oe){var fe=M(this,$,oe);this.currentPath_.push({type:"lineTo",x:fe.x,y:fe.y}),this.currentX_=fe.x,this.currentY_=fe.y},me.bezierCurveTo=function($,oe,fe,ve,Se,Ee){Se=M(this,Se,Ee),$=M(this,$,oe),fe=M(this,fe,ve),L(this,$,fe,Se)},me.quadraticCurveTo=function($,oe,fe,ve){$=M(this,$,oe),fe=M(this,fe,ve),ve={x:this.currentX_+2/3*($.x-this.currentX_),y:this.currentY_+2/3*($.y-this.currentY_)},L(this,ve,{x:ve.x+(fe.x-this.currentX_)/3,y:ve.y+(fe.y-this.currentY_)/3},fe)},me.arc=function($,oe,fe,ve,Se,Ee){fe*=ue;var it=Ee?"at":"wa",st=$+Q(ve)*fe-Le,mt=oe+ae(ve)*fe-Le;ve=$+Q(Se)*fe-Le,Se=oe+ae(Se)*fe-Le,st!=ve||Ee||(st+=.125),$=M(this,$,oe),st=M(this,st,mt),ve=M(this,ve,Se),this.currentPath_.push({type:it,x:$.x,y:$.y,radius:fe,xStart:st.x,yStart:st.y,xEnd:ve.x,yEnd:ve.y})},me.rect=function($,oe,fe,ve){this.moveTo($,oe),this.lineTo($+fe,oe),this.lineTo($+fe,oe+ve),this.lineTo($,oe+ve),this.closePath()},me.strokeRect=function($,oe,fe,ve){var Se=this.currentPath_;this.beginPath(),this.moveTo($,oe),this.lineTo($+fe,oe),this.lineTo($+fe,oe+ve),this.lineTo($,oe+ve),this.closePath(),this.stroke(),this.currentPath_=Se},me.fillRect=function($,oe,fe,ve){var Se=this.currentPath_;this.beginPath(),this.moveTo($,oe),this.lineTo($+fe,oe),this.lineTo($+fe,oe+ve),this.lineTo($,oe+ve),this.closePath(),this.fill(),this.currentPath_=Se},me.createLinearGradient=function($,oe,fe,ve){var Se=new z("gradient");return Se.x0_=$,Se.y0_=oe,Se.x1_=fe,Se.y1_=ve,Se},me.createRadialGradient=function($,oe,fe,ve,Se,Ee){var it=new z("gradientradial");return it.x0_=$,it.y0_=oe,it.r0_=fe,it.x1_=ve,it.y1_=Se,it.r1_=Ee,it},me.drawImage=function($,oe){var fe,ve,Se,Ee,it,st,mt,at;Se=$.runtimeStyle.width,Ee=$.runtimeStyle.height,$.runtimeStyle.width="auto",$.runtimeStyle.height="auto";var nt=$.width,ze=$.height;if($.runtimeStyle.width=Se,$.runtimeStyle.height=Ee,arguments.length==3)fe=arguments[1],ve=arguments[2],it=st=0,mt=Se=nt,at=Ee=ze;else if(arguments.length==5)fe=arguments[1],ve=arguments[2],Se=arguments[3],Ee=arguments[4],it=st=0,mt=nt,at=ze;else if(arguments.length==9)it=arguments[1],st=arguments[2],mt=arguments[3],at=arguments[4],fe=arguments[5],ve=arguments[6],Se=arguments[7],Ee=arguments[8];else throw Error("Invalid number of arguments");var It=M(this,fe,ve),ht=[];if(ht.push(" <g_vml_:group",' coordsize="',10*ue,",",10*ue,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var Gi=[];Gi.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",K(It.x/ue),",","Dy=",K(It.y/ue),"");var On=M(this,fe+Se,ve),Pi=M(this,fe,ve+Ee);fe=M(this,fe+Se,ve+Ee),It.x=U.max(It.x,On.x,Pi.x,fe.x),It.y=U.max(It.y,On.y,Pi.y,fe.y),ht.push("padding:0 ",K(It.x/ue),"px ",K(It.y/ue),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",Gi.join(""),", sizingmethod='clip');")}else ht.push("top:",K(It.y/ue),"px;left:",K(It.x/ue),"px;");ht.push(' ">','<g_vml_:image src="',$.src,'"',' style="width:',ue*Se,"px;"," height:",ue*Ee,'px"',' cropleft="',it/nt,'"',' croptop="',st/ze,'"',' cropright="',(nt-it-mt)/nt,'"',' cropbottom="',(ze-st-at)/ze,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",ht.join(""))},me.stroke=function($){var oe=[];oe.push("<g_vml_:shape",' filled="',!!$,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*ue,",",10*ue,'"',' stroked="',!$,'"',' path="');for(var fe={x:null,y:null},ve={x:null,y:null},Se=0;Se<this.currentPath_.length;Se++){var Ee=this.currentPath_[Se];switch(Ee.type){case"moveTo":oe.push(" m ",K(Ee.x),",",K(Ee.y));break;case"lineTo":oe.push(" l ",K(Ee.x),",",K(Ee.y));break;case"close":oe.push(" x "),Ee=null;break;case"bezierCurveTo":oe.push(" c ",K(Ee.cp1x),",",K(Ee.cp1y),",",K(Ee.cp2x),",",K(Ee.cp2y),",",K(Ee.x),",",K(Ee.y));break;case"at":case"wa":oe.push(" ",Ee.type," ",K(Ee.x-this.arcScaleX_*Ee.radius),",",K(Ee.y-this.arcScaleY_*Ee.radius)," ",K(Ee.x+this.arcScaleX_*Ee.radius),",",K(Ee.y+this.arcScaleY_*Ee.radius)," ",K(Ee.xStart),",",K(Ee.yStart)," ",K(Ee.xEnd),",",K(Ee.yEnd))}Ee&&((fe.x==null||Ee.x<fe.x)&&(fe.x=Ee.x),(ve.x==null||Ee.x>ve.x)&&(ve.x=Ee.x),(fe.y==null||Ee.y<fe.y)&&(fe.y=Ee.y),(ve.y==null||Ee.y>ve.y)&&(ve.y=Ee.y))}oe.push(' ">'),$?N(this,oe,fe,ve):W(this,oe),oe.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",oe.join(""))},me.fill=function(){this.stroke(!0)},me.closePath=function(){this.currentPath_.push({type:"close"})},me.save=function(){var $={};g(this,$),this.aStack_.push($),this.mStack_.push(this.m_),this.m_=f(p(),this.m_)},me.restore=function(){this.aStack_.length&&(g(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},me.translate=function($,oe){B(this,f([[1,0,0],[0,1,0],[$,oe,1]],this.m_),!1)},me.rotate=function($){var oe=Q($);$=ae($),B(this,f([[oe,$,0],[-$,oe,0],[0,0,1]],this.m_),!1)},me.scale=function($,oe){this.arcScaleX_*=$,this.arcScaleY_*=oe,B(this,f([[$,0,0],[0,oe,0],[0,0,1]],this.m_),!0)},me.transform=function($,oe,fe,ve,Se,Ee){B(this,f([[$,oe,0],[fe,ve,0],[Se,Ee,1]],this.m_),!0)},me.setTransform=function($,oe,fe,ve,Se,Ee){B(this,[[$,oe,0],[fe,ve,0],[Se,Ee,1]],!0)},me.drawText_=function($,oe,fe,ve,Se){var Ee=this.m_;ve=0;var it=1e3,st=0,mt=[],at;if(at=this.font,X[at])at=X[at];else{var nt=document.createElement("div").style;try{nt.font=at}catch{}at=X[at]={style:nt.fontStyle||"normal",variant:nt.fontVariant||"normal",weight:nt.fontWeight||"normal",size:nt.fontSize||10,family:nt.fontFamily||"sans-serif"}}var nt=at,ze=this.element_;at={};for(var It in nt)at[It]=nt[It];switch(It=parseFloat(ze.currentStyle.fontSize),ze=parseFloat(nt.size),typeof nt.size=="number"?at.size=nt.size:nt.size.indexOf("px")!=-1?at.size=ze:nt.size.indexOf("em")!=-1?at.size=It*ze:nt.size.indexOf("%")!=-1?at.size=It/100*ze:nt.size.indexOf("pt")!=-1?at.size=ze/.75:at.size=It,at.size*=.981,It=at.style+" "+at.variant+" "+at.weight+" "+at.size+"px "+at.family,ze=this.element_.currentStyle,nt=this.textAlign.toLowerCase(),nt){case"left":case"center":case"right":break;case"end":nt=ze.direction=="ltr"?"right":"left";break;case"start":nt=ze.direction=="rtl"?"right":"left";break;default:nt="left"}switch(this.textBaseline){case"hanging":case"top":st=at.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":st=-at.size/2.25}switch(nt){case"right":ve=1e3,it=.05;break;case"center":ve=it=500}oe=M(this,oe+0,fe+st),mt.push('<g_vml_:line from="',-ve,' 0" to="',it,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!Se,'" stroked="',!!Se,'" style="position:absolute;width:1px;height:1px;">'),Se?W(this,mt):N(this,mt,{x:-ve,y:0},{x:it,y:at.size}),Se=Ee[0][0].toFixed(3)+","+Ee[1][0].toFixed(3)+","+Ee[0][1].toFixed(3)+","+Ee[1][1].toFixed(3)+",0,0",oe=K(oe.x/ue)+","+K(oe.y/ue),mt.push('<g_vml_:skew on="t" matrix="',Se,'" ',' offset="',oe,'" origin="',ve,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',n($),'" style="v-text-align:',nt,";font:",n(It),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",mt.join(""))},me.fillText=function($,oe,fe,ve){this.drawText_($,oe,fe,ve,!1)},me.strokeText=function($,oe,fe,ve){this.drawText_($,oe,fe,ve,!0)},me.measureText=function($){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var oe=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(oe.createTextNode($)),{width:this.textMeasureEl_.offsetWidth}},me.clip=function(){},me.arcTo=function(){},me.createPattern=function($,oe){return new G($,oe)},z.prototype.addColorStop=function($,oe){oe=A(oe),this.colors_.push({offset:$,color:oe.color,alpha:oe.alpha})},me=R.prototype=Error(),me.INDEX_SIZE_ERR=1,me.DOMSTRING_SIZE_ERR=2,me.HIERARCHY_REQUEST_ERR=3,me.WRONG_DOCUMENT_ERR=4,me.INVALID_CHARACTER_ERR=5,me.NO_DATA_ALLOWED_ERR=6,me.NO_MODIFICATION_ALLOWED_ERR=7,me.NOT_FOUND_ERR=8,me.NOT_SUPPORTED_ERR=9,me.INUSE_ATTRIBUTE_ERR=10,me.INVALID_STATE_ERR=11,me.SYNTAX_ERR=12,me.INVALID_MODIFICATION_ERR=13,me.NAMESPACE_ERR=14,me.INVALID_ACCESS_ERR=15,me.VALIDATION_ERR=16,me.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=Ue,CanvasRenderingContext2D=P,CanvasGradient=z,CanvasPattern=G,DOMException=R}()})(zT);var fV=zT.exports,bx=q,zh=fV;zh=zh.Chart?zh:window.CanvasJS;let xV=class extends bx.Component{constructor(e){super(e),this.options=e.options?e.options:{},this.containerProps=e.containerProps?{...e.containerProps}:{width:"100%",position:"relative"},this.containerProps.height=e.containerProps&&e.containerProps.height?e.containerProps.height:this.options.height?this.options.height+"px":"400px",this.containerRef=bx.createRef()}componentDidMount(){this.chart=new zh.Chart(this.containerRef.current,this.options),this.chart.render(),this.props.onRef&&this.props.onRef(this.chart)}shouldComponentUpdate(e,i){return e.options!==this.options}componentDidUpdate(){this.chart.options=this.props.options,this.chart.render()}componentWillUnmount(){this.chart&&this.chart.destroy(),this.props.onRef&&this.props.onRef(void 0)}render(){return bx.createElement("div",{id:this.props.id,ref:this.containerRef,style:this.containerProps})}};var cy={CanvasJSChart:xV,CanvasJS:zh},mV=cy.CanvasJSChart;class gV extends q.Component{render(){let e=this.props.data;console.log("Data",e);const i={theme:"light2",animationEnabled:!0,title:{text:"Production Details"},toolTip:{shared:!0},axisY:{title:"Total Weight",suffix:"KG"},axisX:{title:"Machine",valueFormatString:"MMM",labelAngle:-45},data:[{type:"spline",xValueFormatString:"MMM",yValueFormatString:"#,###.## KG",name:"Weight",showInLegend:!0,dataPoints:e==null?void 0:e.map(n=>({label:n.name,y:n["Total weight"]}))},{type:"spline",xValueFormatString:"MMM",yValueFormatString:"#,###.## PIPE",name:"Pipes",showInLegend:!0,dataPoints:e==null?void 0:e.map(n=>({label:n.name,y:n.Pipes}))},{type:"spline",xValueFormatString:"MMM",yValueFormatString:"#,###.## AVW",name:"AVR Pipe W",showInLegend:!0,dataPoints:e==null?void 0:e.map(n=>({label:n.name,y:Number(n["Average Pipe Weight"])}))}]};return console.log("options",i),_.jsx("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] p-8 rounded-lg flex justify-center items-center",children:_.jsx(mV,{options:i})})}}function yV(){const t="machinesIndividual",e=parseInt(new Date().getFullYear());let[i,n]=q.useState(new Date),[s,a]=q.useState([]),[l,p]=q.useState(e),[f,g]=q.useState(""),[m,k]=q.useState([]),[T,A]=q.useState([]);console.log("graphData",s),q.useEffect(()=>{g("Select a machine number range");const R=Mi(pt,"information","info");hn(R).then(U=>{let K=[];const ae=U.data();let Q=[];K.push(_.jsx("optgroup",{label:"Forming Machines"})),ae.forming_machine.forEach((se,ge)=>{Q.push(se),(ge+1)%6===0&&(K.push(_.jsxs("option",{value:Q,children:[Q[0],Q[1]?`, ${Q[1]}`:"",Q[2]?`, ${Q[2]}`:"",Q[3]?`, ${Q[3]}`:"",Q[4]?`, ${Q[4]}`:"",Q[5]?`, ${Q[5]}`:""]},ge)),Q=[])}),Q.length!==0&&K.push(_.jsxs("option",{value:Q,children:[Q[0],Q[1]?`, ${Q[1]}`:"",Q[2]?`, ${Q[2]}`:"",Q[3]?`, ${Q[3]}`:"",Q[4]?`, ${Q[4]}`:"",Q[5]?`, ${Q[5]}`:""]},"x")),Q=[],K.push(_.jsx("optgroup",{label:"Polish Machines"})),ae.polish_machine.forEach((se,ge)=>{Q.push(se),(ge+1)%3===0&&(K.push(_.jsxs("option",{value:Q,children:[Q[0],Q[1]?`, ${Q[1]}`:"",Q[2]?`, ${Q[2]}`:""]},ge+K.length)),Q=[])}),Q.length!==0&&K.push(_.jsxs("option",{value:Q,children:[Q[0],Q[1]?`, ${Q[1]}`:"",Q[2]?`, ${Q[2]}`:""]},"y")),Q=[],k(K)})},[]);let[P,L]=q.useState(null),[W,N]=q.useState("");q.useEffect(()=>{W!==""?W==="daily"?B():W==="monthly"?z(P):W==="yearly"&&G():T.length!==0&&g("Now select timespan"),console.log(l)},[l,T]);const M=(R,U)=>{let K=[];T.length===0?g("Please Select a Range First"):T.map((ae,Q)=>{const se=ei(pt,t),ge=Qn(se,et("unix_time",">=",Math.floor(R.getTime()/1e3)),et("unix_time","<=",Math.floor(U.getTime()/1e3)),et("machine_no","==",ae));Fi(ge).then(ue=>{let Le=0,Oe=0;ue.forEach(Ue=>{parseFloat(Ue.data().weight)>0&&(Le+=parseFloat(Ue.data().count),Oe+=parseFloat(Ue.data().weight))}),K.push({name:ae,Pipes:Le,"Total weight":Oe,"Average Pipe Weight":(Oe/Le).toFixed(2)}),T.length===Q+1&&a(K)})})},B=R=>{let U=new Date(i);U.setHours(0),U.setMinutes(0),U.setSeconds(0);let K=new Date(i);K.setHours(23),K.setMinutes(59),K.setSeconds(59),g(`Showing Daily Graph of ${i}`),M(U,K),N("daily")},z=R=>{if(R.detail===0){let U=parseInt(R.target.options[R.target.selectedIndex].value),K=new Date;K.setFullYear(l),K.setMonth(U),K.setDate(1),K.setHours(0),K.setMinutes(0),K.setMilliseconds(0),K.setSeconds(0);let ae=new Date;ae.setFullYear(l),ae.setMonth(U+1),ae.setDate(0),ae.setHours(23),ae.setMinutes(59),ae.setMilliseconds(0),ae.setSeconds(59),g(`Showing Monthly Graph of ${R.nativeEvent.target[R.nativeEvent.target.selectedIndex].text}, ${l}`),M(K,ae),N("monthly"),L(R)}},G=R=>{let U=new Date;U.setFullYear(l),U.setMonth(0),U.setDate(1),U.setHours(0),U.setMinutes(0),U.setMilliseconds(0),U.setSeconds(0);let K=new Date;K.setFullYear(l),K.setMonth(12),K.setDate(0),K.setHours(23),K.setMinutes(59),K.setMilliseconds(0),K.setSeconds(59),g(`Showing Yearly Graph of ${l}`),M(U,K),N("yearly")};return console.log("machineNumListDiv",m),_.jsxs("div",{className:"mt-10",children:[_.jsxs("div",{className:"flex gap-6 items-center mb-10",children:[_.jsx("h2",{className:"min-w-[400px] text-3xl font-bold",children:"Production Details of"}),_.jsx("input",{type:"date",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:i,onChange:R=>n(R.target.value)}),_.jsxs("select",{className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",onChange:R=>{A(R.target.options[R.target.selectedIndex].value.split(","))},children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Select Machine Range"}),m]}),_.jsx("div",{className:"category",children:_.jsx("button",{className:"bg-primary p-2 rounded-lg text-white",onClick:B,children:"Set"})})]}),_.jsx("h1",{className:"py-4 text-center",children:f}),_.jsx(gV,{data:s})]})}function vV(){var n,s;let[t,e]=q.useState([]);q.useState([]),q.useState([]),q.useState("all");async function i(){const a=Mi(pt,"information","info");return(await hn(a)).data()}return q.useEffect(()=>{i().then(l=>{const p=ei(pt,"machineStatus");let f=(l==null?void 0:l.forming_machine)||[],g=f.length,m=0;if(g===0){setDataLoaded(!0),setDataAvailable(!1);return}f.sort((k,T)=>parseInt(k,10)-parseInt(T,10)),f.forEach(k=>{const T=Nn(p,et("machine_no","==",k),Vs("time_end","desc"),or(1));Fi(T).then(A=>{let P=!1,L="N/A";A.forEach(W=>{let N=W.data(),M=Math.floor(new Date().getTime()/1e3)-(N==null?void 0:N.time_end),B=Math.floor(M/3600),z=Math.floor(M%3600/60),G=M%60;L=`${B?`${B}h`:""}${z?` ${z}m`:""} ${G}s`,M<=600&&(P=!0)}),e(W=>[...W,{meta:"forming",machineNo:`${k}`,active:P,idleTime:L}]),m+=1,m===g&&(setDataLoaded(!0),setDataAvailable(f.length!==0))})})})},[]),_.jsxs("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] p-8 rounded-lg",children:[_.jsx("h2",{className:"text-3xl",children:"List of idle machine"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 items-center gap-6 bg-primary rounded-md md:rounded-full p-4 text-white mt-6",children:[_.jsx("p",{children:"Machine Names"}),_.jsx("p",{children:"Idle Time"})]}),(s=(n=t==null?void 0:t.slice(0,16))==null?void 0:n.filter(a=>!(a!=null&&a.active)))==null?void 0:s.map(a=>_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 items-center gap-6 border md:border-none rounded-md md:rounded-full p-2 text-black mt-6",children:[_.jsxs("p",{className:"flex gap-2 items-center",children:[_.jsx("img",{src:WT,alt:"",className:"w-10 h-10"}),"FM ",a==null?void 0:a.machineNo]}),_.jsx("p",{children:a==null?void 0:a.idleTime})]}))]})}function bV(){return _.jsx("div",{className:"grid  grid-cols-1 md:grid-cols-2 gap-8 mt-10",children:_.jsx(vV,{})})}function wV(){return _.jsxs("div",{children:[_.jsx(uV,{}),_.jsx(dV,{}),_.jsx(pV,{}),_.jsx(bV,{})]})}function _V({setshowProductModal:t,setshowShiftModal:e,setdamagedProductModal:i}){return _.jsxs("div",{className:"mb-10",children:[_.jsx("h2",{className:"text-3xl font-bold ",children:"Manage Products"}),_.jsx("div",{className:"flex gap-4 justify-end items-center",children:_.jsx(pr,{to:"/products/add-product",children:_.jsxs("button",{className:"bg-primary px-4 py-2 rounded-full text-white flex gap-2 items-center",children:["Add Product",_.jsx(oy,{className:"w-6 h-6"})]})})})]})}function CV(t){const e=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getFullYear()).slice(-2);return _.jsxs("p",{children:[`${e}/${i}/${n}`,_.jsx("br",{}),t.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})]})}function SV({productData:t}){var e;return _.jsx("div",{class:"relative overflow-x-auto",children:_.jsxs("table",{className:"w-full overflow-x-scroll",children:[_.jsx("thead",{className:"bg-primary text-white font-light rounded-lg overflow-x-scroll",children:_.jsxs("tr",{className:" rounded-tl-lg",children:[_.jsx("th",{className:"border border-black p-2",children:"Sl No."}),_.jsx("th",{className:"border border-black p-2",children:"Mazchine No."}),_.jsx("th",{className:"border border-black p-2",children:"Thickness"}),_.jsx("th",{className:"border border-black p-2",children:"Dimension"}),_.jsx("th",{className:"border border-black p-2",children:"Product Type"}),_.jsx("th",{className:"border border-black p-2",children:"Added On"})]})}),_.jsx("tbody",{className:"w-[400px] overflow-scroll",children:(e=t==null?void 0:t.filter(i=>(i==null?void 0:i.status)=="approved"))==null?void 0:e.map((i,n)=>_.jsxs("tr",{children:[_.jsx("td",{class:"border border-black p-4",children:n+1}),_.jsx("td",{class:"border border-black p-4",children:i==null?void 0:i.machine_no}),_.jsx("td",{class:"border border-black p-4",children:i==null?void 0:i.thickness}),_.jsx("td",{class:"border border-black p-4",children:i==null?void 0:i.product_dimensions}),_.jsx("td",{class:"border border-black p-4",children:i==null?void 0:i.product_type}),_.jsx("td",{class:"border border-black p-4",children:i!=null&&i.creatingDate?CV(i.creatingDate.toDate()):_.jsx("p",{children:"No date"})})]}))})]})})}function $T({setFormData:t}){let[e,i]=q.useState([]),[n,s]=q.useState(""),[a,l]=q.useState(""),[p,f]=q.useState(""),[g,m]=q.useState(""),[k,T]=q.useState("");const A=P=>{if(P.preventDefault(),a===""||p===""||g===""||k==="")return s("Please fill up this form properly"),!1;t({machine_no:a,thickness:p,product_type:g,product_dimensions:k})};return q.useEffect(()=>{const P=Mi(pt,"information","info");hn(P).then(L=>{let W=[];L.data().forming_machine.forEach((M,B)=>{W.push(M)}),i(W)})},[]),_.jsxs("form",{className:"flex flex-col gap-8",onSubmit:A,children:[_.jsx("h2",{className:"text-2xl font-bold pb-6",children:"Add Product"}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Machine No*"}),_.jsxs("select",{value:a,onChange:P=>l(P.target.value),className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Machine No."}),e==null?void 0:e.map(P=>_.jsx("option",{value:P,children:P}))]})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Dimension*"}),_.jsxs("select",{className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:k,onChange:P=>T(P.target.value),children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Dimension"}),nV.map(P=>_.jsx("option",{value:P,children:P}))]})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Thickness*"}),_.jsxs("select",{className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:p,onChange:P=>f(P.target.value),children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Product Thickness"}),Zs.map(P=>_.jsx("option",{value:P,children:P}))]})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Product Type*"}),_.jsxs("select",{className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:g,onChange:P=>m(P.target.value),children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Product Type"}),us.map(P=>_.jsx("option",{value:P,children:P}))]})]}),_.jsx("div",{className:"flex justify-center",children:_.jsx("button",{className:"btn-primary ",type:"submit",children:"Submit"})}),_.jsx("span",{className:"msgSpan",children:n})]})}function kV(t){return ru({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(t)}function $h({open:t,control:e,children:i,width:n,bg:s,padding:a}){return t&&_.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black/70 z-50 flex justify-center items-center",children:_.jsxs("div",{className:`relative bg-white max-h-[550px] md:max-h-[750px] max-w-[600px] ${n||"w-full"}  h- mx-4 shadow-xl ${a||"p-4 md:p-8"} rounded overflow-y-scroll`,children:[_.jsx("span",{className:"absolute top-2 right-2 z-50 cursor-pointer  rounded-full  p-2 ",onClick:e,children:_.jsx(kV,{className:"p-1  w-6  h-6  z-50 bg-primary rounded-full fill-white"})}),i]})})}function HT({setShiftData:t,setshowProductModal:e}){let[i,n]=q.useState(""),[s,a]=q.useState(cd[0]),[l,p]=q.useState({}),f=q.useRef(""),g=q.useRef(""),m=q.useRef("");const k=T=>{if(T.preventDefault(),f.current.value===""||g.current.value===""||m.current.value==="")return n("Please fill up this form properly"),!1;let A=f.current.valueAsNumber/1e3,P=g.current.valueAsNumber/1e3;t({starts:A,ends:P,shift:m.current.value}),e(!1)};return q.useEffect(()=>{cd.forEach(T=>{let A=Mi(pt,"shiftTime",T);hn(A).then(P=>{p(L=>({...L,[T]:P.data()}))})})},[]),q.useEffect(()=>{if(Object.keys(l).length!==0){let T=parseInt(l[s].starts/3600),A=parseInt(l[s].starts%3600/60),P=parseInt(l[s].ends/3600),L=parseInt(l[s].ends%3600/60);f.current.value=`${T<9?`0${T}`:T}:${A<9?`0${A}`:A}`,g.current.value=`${P<9?`0${P}`:P}:${L<9?`0${L}`:L}`}},[s,l]),_.jsxs("form",{className:"flex flex-col gap-4",onSubmit:k,children:[_.jsx("h2",{className:"text-2xl font-bold pb-6",children:"Choose Shift"}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Machine No*"}),_.jsxs("select",{ref:m,onChange:T=>a(T.target.value),className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Shift."}),cd.map(T=>_.jsx("option",{value:T,children:T}))]})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Starts*"}),_.jsx("input",{type:"time",ref:f,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Ends*"}),_.jsx("input",{type:"time",ref:g,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),_.jsx("div",{className:"flex justify-center",children:_.jsx("button",{className:"btn-primary ",type:"submit",children:"Submit"})}),_.jsx("span",{className:"msgSpan",children:i})]})}function YT({setFormData:t,setshowProductModal:e}){let[i,n]=q.useState([]),[s,a]=q.useState(!1),[l,p]=q.useState(""),[f,g]=q.useState({machine_no:"",thickness:"N/A",product_type:"N/A",product_dimensions:"N/A",shift:"",Weight:""}),m=q.useRef(""),k=q.useRef(""),T=q.useRef(""),[A,P]=q.useState(""),[L,W]=q.useState("");const N=z=>{const G=Mi(pt,"latest_product",`machine_${z}`);hn(G).then(R=>{g(R.data())})},M=()=>m.current.value===""||T.current.value===""||k.current.value===""||A===""?(p("Please fill up this form properly"),!1):!0,B=z=>{z.preventDefault(),M()&&(t({damagedProductCount:parseInt(k.current.value),machine_no:m.current.value,product_dimensions:f.product_dimensions,product_type:f.product_type,shift:T.current.value,thickness:f.thickness,unix_time:Math.floor(Date.now()/1e3),damagedCategory:A,weight:L}),e(!1),a(!1))};return q.useEffect(()=>{const z=Mi(pt,"information","info");hn(z).then(G=>{let R=[];const U=G.data();R.push(_.jsx("optgroup",{label:"Forming Machines"})),U.forming_machine.forEach((K,ae)=>{R.push(_.jsx("option",{value:K,children:K},ae))}),R.push(_.jsx("optgroup",{label:"Polish Machines"})),U.polish_machine.forEach((K,ae)=>{R.push(_.jsx("option",{value:K,children:K},ae+R.length))}),n(R)})},[]),_.jsxs("form",{className:`flex flex-col gap-4 ${s?"":"#ddd"}`,onSubmit:B,children:[_.jsx("h2",{className:"text-2xl font-bold pb-6",children:"Add Damaged Product"}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Machine No*"}),_.jsxs("select",{ref:m,onChange:z=>{N(z.target.value)},className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Machine No."}),i]})]}),_.jsxs("label",{className:"flex gap-6 items-center",style:{paddingBottom:"10px",borderBottom:"1px solid #000"},children:[_.jsx("p",{className:"w-[180px]",children:"Dimension:"}),f.product_dimensions]}),_.jsxs("label",{className:"flex gap-6 items-center",style:{paddingBottom:"10px",borderBottom:"1px solid #000"},children:[_.jsx("p",{className:"w-[180px]",children:"Thickness:"}),f.thickness]}),_.jsxs("label",{className:"flex gap-6 items-center",style:{paddingBottom:"10px",borderBottom:"1px solid #000"},children:[_.jsx("p",{className:"w-[180px]",children:"Product Type:"}),f.product_type]}),_.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[_.jsx("p",{className:`${A=="damaged_product"?"btn-primary":"btn-primary opacity-50"}`,onClick:()=>P("damaged_product"),children:"Damaged Product"}),_.jsx("p",{className:` ${A=="scrap_product"?"btn-primary":"btn-primary opacity-50"}`,onClick:()=>P("scrap_product"),children:"Scrap Product"}),_.jsx("p",{className:` ${A=="cut_piece_product"?"btn-primary":"btn-primary opacity-50"}`,onClick:()=>P("cut_piece_product"),children:"Cut-Piece Product"}),_.jsx("p",{className:`${A=="b_grade_product"?"btn-primary opacity-100":"btn-primary opacity-50"}`,onClick:()=>P("b_grade_product"),children:"B-Grade Product"})]}),_.jsxs("label",{className:"flex gap-6 items-center",style:{marginBottom:"0px"},children:[_.jsx("p",{className:"w-[180px]",children:"Shift*"}),_.jsxs("select",{ref:T,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Select Shift"}),cd.map(z=>_.jsx("option",{value:z,children:z}))]})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Count*"}),_.jsx("input",{ref:k,type:"number",min:"1",required:!0,placeholder:"Damaged Product Count",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Weight*"}),_.jsx("input",{type:"text",min:"1",required:!0,placeholder:"Damaged Product Count",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:L,onChange:z=>W(z.target.value)})]}),_.jsx("div",{className:"flex justify-center",children:s?_.jsx("button",{className:"btn-primary ",type:"submit",children:"Submit"}):_.jsx("input",{value:"Review",type:"button",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",onClick:()=>{M()&&(a(!0),p("Please Review the form before submitting"))}})}),_.jsx("span",{className:"msgSpan",children:l})]})}function TV({setshowProductModal:t,showProductModal:e,setshowShiftModal:i,showShiftModal:n,damagedProductModal:s,setdamagedProductModal:a}){let[l,p]=q.useState([]),[f,g]=q.useState({}),[m,k]=q.useState({}),[T,A]=q.useState({});Fp("products",65).then(B=>{p(B)});const{addDocument:P}=Bs("products"),{updateDocument:L,response:W}=Bs("latest_product");q.useEffect(()=>{Object.keys(f).length!==0&&(P({...f,status:"pending"}),L(`machine_${f.machine_no}`,{...f,status:"pending"}))},[f]);const{updateDocument:N}=Bs("shiftTime");q.useEffect(()=>{Object.keys(m).length!==0&&(N(m.shift,m),i(!1))},[m]);const{addDocument:M}=Bs("damagedProducts");return q.useEffect(()=>{Object.keys(T).length!==0&&(M(T),a(!1))},[T]),_.jsxs("div",{className:"",children:[_.jsx(SV,{productData:l}),e&&_.jsx($h,{open:e,control:()=>t(!1),children:_.jsx($T,{setFormData:g,setshowProductModal:t})}),n&&_.jsx($h,{open:n,control:()=>i(!1),children:_.jsx(HT,{setShiftData:k,setshowProductModal:t})}),s&&_.jsx($h,{open:s,control:()=>a(!1),children:_.jsx(YT,{setFormData:A,setshowProductModal:a})})]})}function MV(){let[t,e]=q.useState(!1),[i,n]=q.useState(!1),[s,a]=q.useState(!1);return _.jsxs("div",{children:[_.jsx(_V,{setshowProductModal:e,setshowShiftModal:n,setdamagedProductModal:a}),_.jsx(TV,{setshowProductModal:e,showProductModal:t,setshowShiftModal:n,showShiftModal:i,damagedProductModal:s,setdamagedProductModal:a})]})}function PV(t){const e=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getFullYear()).slice(-2);return _.jsxs("p",{children:[`${e}/${i}/${n}`,_.jsx("br",{}),t.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})]})}function EV(){var p;let[t,e]=q.useState([]);Fp("products",65).then(f=>{e(f)}),console.log("incharge",t);const{updateDocument:i,response:n}=Bs("latest_product"),{updateDocument:s}=Bs("products"),a=f=>{s(f==null?void 0:f.id,{...f,status:"approved"}),i(`machine_${f.machine_no}`,{...f,status:"approved"})},l=f=>{s(f==null?void 0:f.id,{...f,status:"declined"}),i(`machine_${f.machine_no}`,{...f,status:"declined"})};return _.jsx("div",{class:"relative overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:_.jsxs("tr",{className:" rounded-tl-lg",children:[_.jsx("th",{className:"border border-black p-2",children:"Sl No."}),_.jsx("th",{className:"border border-black p-2",children:"Machine No."}),_.jsx("th",{className:"border border-black p-2",children:"Thickness"}),_.jsx("th",{className:"border border-black p-2",children:"Dimension"}),_.jsx("th",{className:"border border-black p-2",children:"Product Type"}),_.jsx("th",{className:"border border-black p-2",children:"Added On"}),_.jsx("th",{className:"border border-black p-2",children:"Action"})]})}),_.jsx("tbody",{children:(p=t==null?void 0:t.filter(f=>(f==null?void 0:f.status)=="pending"))==null?void 0:p.map((f,g)=>_.jsxs("tr",{children:[_.jsx("td",{class:"border border-black p-4",children:g+1}),_.jsx("td",{class:"border border-black p-4",children:f==null?void 0:f.machine_no}),_.jsx("td",{class:"border border-black p-4",children:f==null?void 0:f.thickness}),_.jsx("td",{class:"border border-black p-4",children:f==null?void 0:f.product_dimensions}),_.jsx("td",{class:"border border-black p-4",children:f==null?void 0:f.product_type}),_.jsx("td",{class:"border border-black p-4",children:f!=null&&f.creatingDate?PV(f.creatingDate.toDate()):_.jsx("p",{children:"No date"})}),_.jsx("td",{class:"border border-black p-4",children:_.jsxs("div",{className:"max-w-[140px] flex flex-col md:flex-row gap-2 items-center",children:[_.jsx("button",{className:"btn-primary px-4 py-1 bg-red-500",onClick:()=>l(f),children:"Decline"}),_.jsx("button",{className:"btn-primary px-4 py-1 bg-green-500",onClick:()=>a(f),children:"Approve"})]})})]}))})]})})}function AV(){return _.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Incharge Section"}),_.jsx(EV,{})]})}function D_(t){const e=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getFullYear()).slice(-2);return _.jsxs("p",{children:[`${e}/${i}/${n}`,_.jsx("br",{}),t.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})]})}function DV(){let[t,e]=q.useState([]);return Fp("products",65).then(i=>{e(i)}),console.log("admin",t),_.jsx("div",{class:"relative overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:_.jsxs("tr",{className:" rounded-tl-lg",children:[_.jsx("th",{className:"border border-black p-2",children:"Sl No."}),_.jsx("th",{className:"border border-black p-2",children:"Mazchine No."}),_.jsx("th",{className:"border border-black p-2",children:"Production Plan Change Request"}),_.jsx("th",{className:"border border-black p-2",children:"Production Plan Change Approve"}),_.jsx("th",{className:"border border-black p-2",children:"Status"}),_.jsx("th",{className:"border border-black p-2",children:"Details"})]})}),_.jsx("tbody",{children:t==null?void 0:t.map((i,n)=>_.jsxs("tr",{children:[_.jsx("td",{class:"border border-black p-4",children:n+1}),_.jsxs("td",{class:"border border-black p-4",children:["FM ",i==null?void 0:i.machine_no]}),_.jsx("td",{class:"border border-black p-4",children:i!=null&&i.creatingDate?D_(i==null?void 0:i.creatingDate.toDate()):_.jsx("p",{children:"No date"})}),_.jsx("td",{class:"border border-black p-4",children:i!=null&&i.updatedDate?D_(i==null?void 0:i.updatedDate.toDate()):_.jsx("p",{children:"No date"})}),_.jsx("td",{class:"border border-black p-4",children:_.jsx("p",{className:`text-center ${(i==null?void 0:i.status)=="pending"?"text-primary":(i==null?void 0:i.status)=="approved"?"text-green-500":(i==null?void 0:i.status)=="declined"?"text-red-500":""}`,children:i==null?void 0:i.status})}),_.jsx("td",{class:"border border-black p-4",children:_.jsxs("div",{className:"",children:[_.jsxs("p",{children:[_.jsx("span",{className:"font-bold",children:"Production Type:"})," ",i==null?void 0:i.product_type]}),_.jsxs("p",{children:[_.jsx("span",{className:"font-bold",children:"Dimension:"})," ",i==null?void 0:i.product_dimensions]}),_.jsxs("p",{children:[_.jsx("span",{className:"font-bold",children:"Thickness:"})," ",i==null?void 0:i.thickness]})]})})]}))})]})})}function IV(){return _.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Admin Section"}),_.jsx(DV,{})]})}const cr=({permission:t,children:e})=>{let[i,n]=q.useState({});return q.useEffect(()=>{Ip("users",Il("email"),Il("pswd")).then(s=>{if(s[0]){let a=s[1][0].access;console.log("access",a);const l=Mi(pt,"permissions",a);hn(l).then(p=>{p.exists()&&n(p.data())})}})},[]),console.log("UserPermissions",i),i[t]?e:_.jsx("div",{className:"flex justify-center items-center min-h-screen",children:_.jsx(ay,{height:"80",width:"80",color:"#4fa94d",ariaLabel:"triangle-loading",visible:!0})})};function FV({setshowUserModal:t}){return _.jsxs("div",{className:"mb-10",children:[_.jsx("h2",{className:"text-3xl font-bold ",children:"Manage Users"}),_.jsx("div",{className:"flex gap-4 justify-end items-center",children:_.jsxs("button",{className:"bg-primary px-4 py-2 rounded-full text-white flex gap-2 items-center",onClick:()=>{t(!0)},children:["Add User",_.jsx(oy,{className:"w-6 h-6"})]})})]})}function BV({userdata:t}){return _.jsx("div",{class:"relative overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:_.jsxs("tr",{className:" rounded-tl-lg",children:[_.jsx("th",{className:"border border-black p-2",children:"ID."}),_.jsx("th",{className:"border border-black p-2",children:" Name"}),_.jsx("th",{className:"border border-black p-2",children:"User Name"}),_.jsx("th",{className:"border border-black p-2",children:"Email"}),_.jsx("th",{className:"border border-black p-2",children:"Access"})]})}),_.jsx("tbody",{children:t==null?void 0:t.map((e,i)=>_.jsxs("tr",{children:[_.jsx("td",{class:"border border-black p-4",children:i+1}),_.jsx("td",{class:"border border-black p-4",children:e.name}),_.jsx("td",{class:"border border-black p-4",children:e.username}),_.jsx("td",{class:"border border-black p-4",children:e.email}),_.jsx("td",{class:"border border-black p-4",children:e.access})]}))})]})})}function LV({setFormData:t,setshowUserModal:e}){let i=q.useRef(""),n=q.useRef(""),s=q.useRef(""),a=q.useRef(""),l=q.useRef(""),[p,f]=q.useState("");const g=m=>{if(m.preventDefault(),i.current.value===""||n.current.value===""||s.current.value===""||a.current.value==="")return f("Please fill up this form properly"),!1;t({username:i.current.value,name:n.current.value,email:a.current.value,password:s.current.value,access:l.current.value}),e(!1)};return _.jsxs("form",{className:"flex flex-col gap-4",onSubmit:g,children:[_.jsx("h2",{className:"text-2xl font-bold pb-6",children:"Add Product"}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"User Name*"}),_.jsx("input",{type:"text",ref:i,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Name*"}),_.jsx("input",{type:"text",ref:n,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Password*"}),_.jsx("input",{type:"password",ref:s,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Email*"}),_.jsx("input",{type:"email",ref:a,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),_.jsxs("label",{className:"flex gap-6 items-center",children:[_.jsx("p",{className:"w-[180px]",children:"Access*"}),_.jsx("select",{ref:l,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:iV.map(m=>_.jsx("option",{value:m,children:m}))})]}),_.jsx("div",{className:"flex justify-center",children:_.jsx("button",{className:"btn-primary ",type:"submit",children:"Submit"})}),_.jsx("span",{className:"msgSpan",children:p})]})}function NV({showUserModal:t,setshowUserModal:e}){let[i,n]=q.useState({}),[s,a]=q.useState([]);Fp("users").then(p=>{a(p)});const{addDocument:l}=Bs("users");return q.useEffect(()=>{Object.keys(i).length!==0&&l(i)},[i]),_.jsxs("div",{children:[_.jsx(BV,{userdata:s}),t&&_.jsx($h,{open:t,control:()=>e(!1),children:_.jsx(LV,{setFormData:n,setshowUserModal:e})})]})}function RV(){let[t,e]=q.useState(!1);return _.jsxs("div",{children:[_.jsx(FV,{setshowUserModal:e}),_.jsx(NV,{showUserModal:t,setshowUserModal:e})]})}function Lp({showSuccess:t,setShowSuccess:e,message:i}){return _.jsx($h,{open:t,control:()=>e(!1),width:"max-w-[550px] w-full",children:_.jsxs("div",{className:"flex flex-col gap-6",children:[_.jsx("h2",{className:"text-2xl font-bold",children:"Operation Success"}),_.jsxs("p",{className:"text-green-500",children:["* ",i]}),_.jsx("button",{className:"bg-green-500 px-4 py-2 rounded-md  text-white",onClick:()=>e(!1),children:"Dismiss Alert"})]})})}function VV(){let[t,e]=q.useState({});const{addDocument:i,response:n}=Bs("products"),{updateDocument:s,response:a}=Bs("latest_product");let[l,p]=q.useState(!1);return q.useEffect(()=>{Object.keys(t).length!==0&&(i({...t,status:"pending"}),s(`machine_${t.machine_no}`,{...t,status:"pending"}),e({}))},[t]),q.useEffect(()=>{n!=null&&n.success&&(a!=null&&a.success)&&p(n==null?void 0:n.success)},[n,a]),_.jsxs("div",{children:[_.jsx($T,{setFormData:e}),l&&_.jsx(Lp,{showSuccess:l,setShowSuccess:p,message:"Product added successfully"})]})}function OV(){let[t,e]=q.useState({});const{updateDocument:i,response:n}=Bs("shiftTime");let[s,a]=q.useState(!1);return q.useEffect(()=>{Object.keys(t).length!==0&&i(t.shift,t)},[t]),q.useEffect(()=>{n!=null&&n.success&&a(n==null?void 0:n.success)},[n]),_.jsxs("div",{children:[_.jsx(HT,{setShiftData:e}),s&&_.jsx(Lp,{showSuccess:s,setShowSuccess:a,message:"Shift updated successfully"})]})}function jV(){let[t,e]=q.useState({});const{addDocument:i,response:n}=Bs("damagedProducts");let[s,a]=q.useState(!1);return q.useEffect(()=>{Object.keys(t).length!==0&&i(t)},[t]),q.useEffect(()=>{n!=null&&n.success&&a(n==null?void 0:n.success)},[n]),_.jsxs("div",{children:[_.jsx(YT,{setFormData:e}),s&&_.jsx(Lp,{showSuccess:s,setShowSuccess:a,message:"Damaged Product Added  successfully"})]})}function WV({setShowAdd:t,setShowSuccess:e}){let[i,n]=q.useState(""),[s,a]=q.useState(null);const l=p=>{if(p.preventDefault(),s!==""){const f=Mi(pt,"information","info");D2(f,{forming_machine:OI(s)}),a(null),e(!0),t(!1)}else return n("Machine number cannot be empty!"),!1};return _.jsxs("form",{className:"py-10",onSubmit:l,children:[_.jsx("h2",{className:"text-2xl pb-4 font-bold",children:"Add Machine"}),_.jsxs("label",{className:"flex gap-6 items-center mb-6",children:[_.jsx("p",{className:"w-[180px]",children:"Machine No*"}),_.jsx("input",{id:"",type:"number",name:"machine_no",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:s,onChange:p=>a(p.target.value)})]}),i?_.jsx("span",{className:"text-red-500",children:i}):null,_.jsx("div",{className:"flex justify-center",children:_.jsx("button",{className:"btn-primary",type:"submit",children:"Add"})})]})}function zV(){const[t,e]=q.useState(!1);let[i,n]=q.useState([]),[s,a]=q.useState(!1);return q.useEffect(()=>{const l=Mi(pt,"information","info");Jc(l,p=>{const f=p.data();let g=[];f.forming_machine.forEach((m,k)=>{g.push(m)}),n(g)})},[]),_.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-bold py-6",children:"Forming Machines"}),_.jsxs("div",{className:"flex justify-between items-center gap-4 mb-8 mr-10",children:[_.jsx("h2",{children:"List of Machines"}),_.jsxs("button",{className:"bg-primary px-4 py-2 rounded-full text-white flex gap-2 items-center",onClick:()=>{e(!t)},children:["Add Product",_.jsx(oy,{className:"w-6 h-6"})]})]}),t?_.jsx(WV,{setShowAdd:e,setShowSuccess:a}):null,s&&_.jsx(Lp,{showSuccess:s,setShowSuccess:a,message:"Machine added successfully"}),_.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:i==null?void 0:i.map(l=>_.jsxs("div",{className:"px-6 py-2 rounded-xl border border-black",children:["FM ",l]}))})]})}var $V=cy.CanvasJSChart;class HV extends q.Component{render(){let e=this.props.data;console.log("Data",e);const i={theme:"light2",animationEnabled:!0,title:{text:"Production Details"},toolTip:{shared:!0},axisY:{title:"Total Weight",suffix:"KG"},axisX:{title:"Month",valueFormatString:"MMM",labelAngle:-45},data:[{type:"spline",xValueFormatString:"MMM",yValueFormatString:"#,###.## KG",name:"Weight",showInLegend:!0,dataPoints:e==null?void 0:e.map(n=>({label:n.name,y:n["Total weight"]}))},{type:"spline",xValueFormatString:"MMM",yValueFormatString:"#,###.## PIPE",name:"Pipes",showInLegend:!0,dataPoints:e==null?void 0:e.map(n=>({label:n.name,y:n.Pipes}))}]};return console.log("options",i),_.jsx("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] p-8 rounded-lg flex justify-center items-center",children:_.jsx($V,{options:i})})}}function YV(){const t="machinesIndividual",e=parseInt(new Date().getFullYear());let i=q.useRef(""),n=q.useRef(""),[s,a]=q.useState(new Date);q.useState(e);let[l,p]=q.useState([]),[f,g]=q.useState([]),[m,k]=q.useState({}),[T,A]=q.useState("Select Product Thickness"),[P,L]=q.useState("Machine and Product is not selected"),[W,N]=q.useState("");q.useEffect(()=>{const G=Mi(pt,"information","info");hn(G).then(R=>{let U=[];const K=R.data();U.push(_.jsx("optgroup",{label:"Forming Machines"})),K.forming_machine.forEach((ae,Q)=>{U.push(_.jsx("option",{defaultValue:ae,children:ae},Q))}),U.push(_.jsx("optgroup",{label:"Polish Machines"})),K.polish_machine.forEach((ae,Q)=>{U.push(_.jsx("option",{defaultValue:ae,children:ae},Q+U.length))}),g(U)})},[]);const M=(G,R)=>{let U=[];us.map((K,ae)=>{const Q=ei(pt,t),se=Qn(Q,et("unix_time",">=",Math.floor(G.getTime()/1e3)),et("unix_time","<=",Math.floor(R.getTime()/1e3)),et("machine_no","==",m.machineNo),et("thickness","==",m.thickness),et("product_type","==",K));Fi(se).then(ge=>{let ue=0,Le=0;ge.forEach(Oe=>{parseFloat(Oe.data().weight)>0&&(ue+=parseFloat(Oe.data().count),Le+=parseFloat(Oe.data().weight))}),U.push({name:K,Pipes:ue,Weight:Le}),us.length===ae+1&&p(U)})})},B=G=>{if(Object.keys(m).length!==0){let R=new Date(s);R.setHours(0),R.setMinutes(0),R.setSeconds(0);let U=new Date(s);U.setHours(23),U.setMinutes(59),U.setSeconds(59),M(R,U),A(`Showing Daily Graph of ${s}`)}},z=()=>{i.current.value!==""&&n.current.options[n.current.selectedIndex].value!==""?(k({thickness:i.current.value,machineNo:n.current.options[n.current.selectedIndex].value}),L(`Machine No: ${n.current.options[n.current.selectedIndex].value}, Product Thickness: ${i.current.value}`),A("Now Select Time Span"),N("Set!")):N("Please Fill up the fields correctly!"),window.setTimeout(()=>{N("")},2e3)};return console.log("graphData",l),_.jsxs("div",{className:"mt-10",children:[_.jsxs("div",{className:"flex gap-6 items-center mb-10",children:[_.jsx("h2",{className:"min-w-[400px] text-3xl font-bold",children:"Product Type and Thickness"}),_.jsx("input",{type:"date",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:s,onChange:G=>a(G.target.value)}),_.jsxs("select",{ref:i,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Product Thickness"}),Zs.map(G=>_.jsx("option",{value:G,children:G}))]}),_.jsxs("select",{ref:n,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:[_.jsx("option",{selected:!0,disabled:!0,value:"",children:"Machine No."}),f]}),_.jsx("button",{onClick:z,className:"bg-primary p-2 rounded-lg text-white",children:"Set"}),_.jsx("div",{className:"category",children:_.jsx("button",{className:"bg-primary p-2 rounded-lg text-white",onClick:B,children:"Show"})})]}),_.jsx("h1",{className:"py-4 text-center",children:T}),_.jsx(HV,{data:l})]})}function XV({graphData:t,thresholdTime:e}){const[i,n]=q.useState([]),s=q.useRef(null),[a,l]=q.useState({visible:!1,content:"",x:0,y:0});console.log("DowntimeData",t),q.useEffect(()=>{if(!t)return;console.log(t);const g=t.map(m=>{const k={machine_no:m.machine_no,data:[]};let T={started:m.data[0].time,time:m.data[0].time,Value:m.data[0].Value,segmentWidth:1,thresholdTime:e};return m.data.forEach((A,P)=>{T.Value!==A.Value?(k.data.push(T),T={started:A.time,time:A.time,Value:A.Value,segmentWidth:1,thresholdTime:e}):(T.segmentWidth++,T.thresholdTime+=e),P===m.data.length-1&&k.data.push(T)}),k});n(g)},[t,e]);const p=(g,m)=>{s.current.style.opacity=1,s.current.style.visibility="visible",l({visible:!0,content:`${m.Value?"Active for":"Idle for"} ${formatTime(m.thresholdTime)} hours`,x:g.pageX,y:g.pageY})},f=()=>{s.current.style.opacity=0,s.current.style.visibility="hidden",l({visible:!1,content:"",x:0,y:0})};return console.log("segment",i),_.jsxs(_.Fragment,{children:[_.jsx("div",{ref:s,style:{zIndex:10,position:"absolute",top:a.y-20,left:a.x+10,backgroundColor:"#333",color:"#fff",padding:"5px 8px",borderRadius:"5px",fontSize:"0.8rem",whiteSpace:"nowrap",pointerEvents:"none",transition:"opacity .5s ease",opacity:0,visibility:"hidden"},children:a.content}),_.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"flex-start",position:"relative",overflowX:"auto",whiteSpace:"nowrap"},className:"rounded-xl gap-4 py-8 mt-10",children:i==null?void 0:i.slice(0,16).map(g=>_.jsxs("div",{className:"group inline-flex flex-col items-center rounded-md ",children:[_.jsx("div",{className:"flex flex-col h-auto w-10",children:g.data.map((m,k)=>_.jsx("div",{style:{height:`${m.segmentWidth*8}px`,backgroundColor:m.Value===0?"#FF4560":"#00E396"},className:"h-6 cursor-pointer rounded-md",onMouseMove:T=>p(T,m),onMouseLeave:f,children:_.jsx("span",{style:{width:"70px",transformOrigin:"center",paddingTop:"3px"},className:"hidden group-hover:block text-black text-[.8rem] top-0 left-[-40px] relative z-50",children:m==null?void 0:m.started})},k))}),_.jsxs("span",{className:"rounded-md p-1 text-lg mr-2",style:{whiteSpace:"nowrap"},children:["FM ",g.machine_no]})]},g.machine_no))})]})}function I_(t){var e=new Date(t*1e3),i=e.getHours(),n=i>=12?"PM":"AM";i=i%12,i=i||12,i=i<10?"0"+i:i;var s=e.getMinutes();s=s<10?"0"+s:s;var a=i+":"+s+" "+n;return a}function UV(t,e,i){for(let n=0;n<t.length;n++){if(parseInt(t[n].time_start)>=e&&parseInt(t[n].time_start)<=i)return!0;if(parseInt(t[n].time_start)<=e&&parseInt(t[n].time_end)>=i)return!0;if(parseInt(t[n].time_start)>=e&&parseInt(t[n].time_end)<=i)return!0;if(parseInt(t[n].time_end)>=e&&parseInt(t[n].time_end)<=i)return!0}return!1}function GV(t,e,i,n){let s=[],a=parseInt((n-i)/t);for(let l=0;l<a;l++){let p=l*t+i,f=(l+1)*t+i;UV(e,p,f)?s.push({Value:1,time:I_(p)}):s.push({Value:0,time:I_(p)})}return s}function KV(){let[t,e]=q.useState(""),[i,n]=q.useState([]),[s,a]=q.useState(""),[l,p]=q.useState(!1),[f,g]=q.useState(new Date);const[m,k]=q.useState({series:[{name:"Active",data:[44,55,41,67,22,43]},{name:"Idle",data:[13,23,20,8,13,27]},{name:"Active1",data:[93,72,89,75,115,80]}],options:{chart:{type:"bar",stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},plotOptions:{bar:{horizontal:!0}},xaxis:{categories:[]},legend:{show:!1},fill:{opacity:1},colors:["#00E396","#FF4560"]}});q.useEffect(()=>{var A=new Date,P=("0"+A.getDate()).slice(-2),L=("0"+(A.getMonth()+1)).slice(-2),W=A.getFullYear()+"-"+L+"-"+P;e(W);const N=Mi(pt,"information","info");hn(N).then(M=>{let B=[];const z=M.data();z.forming_machine.forEach((G,R)=>{B.push(G)}),z.polish_machine.forEach((G,R)=>{B.push(G)}),a(B)})},[]),q.useEffect(()=>{T()},[s]);async function T(){let A=[];n([]);let P=new Date(f);P.setHours(0),P.setMinutes(0),P.setMilliseconds(0),P.setSeconds(0);let L=new Date(f);L.getDate()!==new Date().getDate()&&(L.setHours(23),L.setMinutes(59),L.setMilliseconds(999),L.setSeconds(59)),P=Math.floor(P.getTime()/1e3),L=Math.floor(L.getTime()/1e3),p(!0);const W=ei(pt,"machineStatus");s.forEach(async N=>{let M=[];const B=Qn(W,et("time_start",">=",P),et("time_start","<=",L),et("machine_no","==",N));(await Fi(B)).forEach(G=>{M.push(G.data())}),A.push({machine_no:N,data:GV(900,M,P,L)}),A.length==s.length&&(p(!1),n(A),k({...m,options:{...m.options,xaxis:{categories:s}}}))})}return _.jsxs("div",{className:" my-10",children:[_.jsx("div",{children:_.jsxs("div",{className:"flex gap-4 items-center",children:[_.jsx("h6",{className:"min-w-[450px] text-3xl font-bold",children:"Downtime Tracking"}),_.jsx("input",{type:"date",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:t,onChange:A=>{e(A.target.value),g(A.target.valueAsDate)}}),_.jsx("button",{className:"bg-primary p-2 rounded-lg text-white",onClick:T,children:"Set"})]})}),i.length===0&&!l?_.jsx("h1",{style:{fontSize:"1.2rem",marginBottom:"2rem"},children:"No Data Found"}):_.jsx("div",{className:" max-h-[10000px] overflow-y-scroll",children:_.jsx(XV,{graphData:i,thresholdTime:900})}),_.jsxs("h6",{className:"flex items-center justify-center mt-8",children:[_.jsx("span",{style:{width:"1rem",height:"1rem",background:"green",display:"block",margin:"0rem 1rem",borderRadius:"10px"}})," ","Active",_.jsx("span",{style:{width:"1rem",height:"1rem",background:"red",display:"block",margin:"0rem 1rem",borderRadius:"10px"}})," ","Inactive"]}),l?_.jsxs("h1",{style:{textAlign:"center",color:"gray",fontSize:"2rem"},children:[_.jsx("br",{}),_.jsx("br",{}),"loading ..."]}):null]})}var QV=cy.CanvasJSChart;class ZV extends q.Component{render(){var n;let e=this.props.data;console.log("Data",e);const i={theme:"light2",animationEnabled:!0,title:{text:"Production Details"},toolTip:{shared:!0},axisY:{title:"Total Time",suffix:"Min"},axisX:{title:"Machine",valueFormatString:"MMM",labelAngle:-45},data:[{type:"spline",xValueFormatString:"MMM",yValueFormatString:"#,###.## Min",name:"Time",showInLegend:!0,dataPoints:(n=e==null?void 0:e.slice(0,16))==null?void 0:n.map((s,a)=>({label:s.machine_number,y:s.av_time[0]}))}]};return console.log("options",i),_.jsx("div",{className:" flex justify-center items-center",children:_.jsx(QV,{options:i})})}}function JV(){const t="machinesIndividual";let[e,i]=q.useState(new Date),[n,s]=q.useState(new Date);q.useRef(null),q.useRef(null);let[a,l]=q.useState(new Set([])),[p,f]=q.useState(!0),[g,m]=q.useState([]),[k,T]=q.useState(""),[A,P]=q.useState("");console.log("machineDetails",g),q.useEffect(()=>{let N=new Set([]);const M=Mi(pt,"information","info");hn(M).then(B=>{let z=B.data();z.forming_machine.forEach(G=>{N.add(G)}),z.polish_machine.forEach(G=>{N.add(G)}),l(N)})},[]);const L=()=>{let N=new Date(e);N.setHours(0),N.setMinutes(0),N.setSeconds(1),N.setMilliseconds(0);let M=new Date(n);if(M.setHours(23),M.setMinutes(59),M.setMilliseconds(99),M.setSeconds(59),n===""||e==="")return T("Date Ranges cannot be empty!"),null;if(N.getTime()>M.getTime())return T("Start date should be less than end date"),null;T("Please be Patient ..."),f(!1),W(N,M)};async function W(N,M){const B=ei(pt,"machineStatus"),z=ei(pt,t),G=[];let R=0;Array.from(a).forEach((U,K)=>{let ae=Qn(B,et("time_start",">=",Math.floor(N.getTime()/1e3)),et("time_start","<=",Math.floor(M.getTime()/1e3)),et("machine_no","==",`${U}`),et("isRunning","==",!0));Fi(ae).then(Q=>{U==="03"&&console.log("03",Math.floor(N.getTime()/1e3),Math.floor(M.getTime()/1e3)),Q.forEach(ue=>{R+=ue.data().time_end-ue.data().time_start,console.log("-------------------"),console.log(ue.data())});let se=[],ge=0;ae=Qn(z,et("unix_time",">=",Math.floor(N.getTime()/1e3)),et("unix_time","<=",Math.floor(M.getTime()/1e3)),et("machine_no","==",`${U}`),et("thickness","==",A)),Fi(ae).then(ue=>{ue.forEach(Le=>{ge+=parseInt(Le.data().count)}),ge!==0?se.push((R/ge).toFixed(2)):se.push(0)}),G.push({machine_number:U,av_time:se}),m(G),f(!0)})})}return _.jsxs("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] p-8 rounded-lg max-w-3xl mx-auto  my-20",children:[_.jsx("h2",{className:"text-3xl font-bold mb-6",children:"MachineEfficiencyGraph"}),_.jsxs("div",{className:"flex gap-4 items-center mb-8",children:[_.jsx("input",{type:"date",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:e,onChange:N=>i(N.target.value)}),_.jsxs("select",{className:"w-full p-3 rounded-md border border-black outline-none focus:outline-none bg-black text-white",onChange:N=>{P(N.target.value)},children:[_.jsx("option",{selected:!0,disabled:!0,children:"Select Machine Range"}),Zs==null?void 0:Zs.map(N=>_.jsx("option",{selected:!0,value:N,children:N}))]}),_.jsx("button",{className:"bg-primary p-2 rounded-lg text-white",onClick:()=>L(),children:"Set"})]}),_.jsx(ZV,{data:g})]})}function qV(){return _.jsxs("div",{children:[_.jsx(yV,{}),_.jsx(YV,{}),_.jsx(JV,{}),_.jsx(KV,{})]})}const eO=$P([{element:_.jsx(zR,{}),children:[{path:"/",element:_.jsx(wV,{})},{path:"/machines",element:_.jsx(zN,{})},{path:"/tare-crain-updates",element:_.jsx(YR,{})},{path:"/reports/dashboard",element:_.jsx(qR,{})},{path:"/reports/realtime-reports",element:_.jsx(cr,{permission:"manageRealtime",children:_.jsx(tV,{})})},{path:"/reports/daily-reports",element:_.jsx(sV,{})},{path:"/reports/weekly-reports",element:_.jsx(rV,{})},{path:"/reports/monthly-reports",element:_.jsx(aV,{})},{path:"/reports/quarterly-reports",element:_.jsx(oV,{})},{path:"/reports/yearly-reports",element:_.jsx(lV,{})},{path:"/reports/machine-efficiency",element:_.jsx(hV,{})},{path:"/manage/all-machines",element:_.jsx(cr,{permission:"manageProduct",children:_.jsx(zV,{})})},{path:"/manage/products",element:_.jsx(cr,{permission:"manageProduct",children:_.jsx(MV,{})})},{path:"/products/add-product",element:_.jsx(cr,{permission:"addProduct",children:_.jsx(VV,{})})},{path:"/products/add-shift",element:_.jsx(cr,{permission:"setShiftTime",children:_.jsx(OV,{})})},{path:"/products/add-damaged-product",element:_.jsx(cr,{permission:"addDamagedProduct",children:_.jsx(jV,{})})},{path:"/manage/users",element:_.jsxs(cr,{permission:"manageUser",children:[_.jsx(RV,{}),","]})},{path:"/incharge",element:_.jsx(cr,{permission:"manageIncharge",children:_.jsx(AV,{})})},{path:"/admin/machine-production",element:_.jsx(cr,{permission:"adminSection",children:_.jsx(IV,{})})},{path:"/graph-charts",element:_.jsx(qV,{})}]}]);function tO(){return _.jsx(_.Fragment,{children:_.jsx(ZP,{router:eO})})}X4(document.getElementById("root")).render(_.jsx(tO,{}));
