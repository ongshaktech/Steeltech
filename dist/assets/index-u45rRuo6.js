function PC(t,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();var Dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function WT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),i}var EC={exports:{}},g0={},AC={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=Symbol.for("react.element"),zT=Symbol.for("react.portal"),$T=Symbol.for("react.fragment"),HT=Symbol.for("react.strict_mode"),YT=Symbol.for("react.profiler"),XT=Symbol.for("react.provider"),UT=Symbol.for("react.context"),GT=Symbol.for("react.forward_ref"),KT=Symbol.for("react.suspense"),QT=Symbol.for("react.memo"),ZT=Symbol.for("react.lazy"),cy=Symbol.iterator;function JT(t){return t===null||typeof t!="object"?null:(t=cy&&t[cy]||t["@@iterator"],typeof t=="function"?t:null)}var DC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IC=Object.assign,FC={};function Il(t,e,i){this.props=t,this.context=e,this.refs=FC,this.updater=i||DC}Il.prototype.isReactComponent={};Il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BC(){}BC.prototype=Il.prototype;function b1(t,e,i){this.props=t,this.context=e,this.refs=FC,this.updater=i||DC}var _1=b1.prototype=new BC;_1.constructor=b1;IC(_1,Il.prototype);_1.isPureReactComponent=!0;var uy=Array.isArray,LC=Object.prototype.hasOwnProperty,C1={current:null},NC={key:!0,ref:!0,__self:!0,__source:!0};function RC(t,e,i){var n,s={},a=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)LC.call(e,n)&&!NC.hasOwnProperty(n)&&(s[n]=e[n]);var p=arguments.length-2;if(p===1)s.children=i;else if(1<p){for(var f=Array(p),g=0;g<p;g++)f[g]=arguments[g+2];s.children=f}if(t&&t.defaultProps)for(n in p=t.defaultProps,p)s[n]===void 0&&(s[n]=p[n]);return{$$typeof:Tc,type:t,key:a,ref:l,props:s,_owner:C1.current}}function qT(t,e){return{$$typeof:Tc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function w1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tc}function eM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var dy=/\/+/g;function Fp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eM(""+t.key):e.toString(36)}function Lu(t,e,i,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Tc:case zT:l=!0}}if(l)return l=t,s=s(l),t=n===""?"."+Fp(l,0):n,uy(s)?(i="",t!=null&&(i=t.replace(dy,"$&/")+"/"),Lu(s,e,i,"",function(g){return g})):s!=null&&(w1(s)&&(s=qT(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(dy,"$&/")+"/")+t)),e.push(s)),1;if(l=0,n=n===""?".":n+":",uy(t))for(var p=0;p<t.length;p++){a=t[p];var f=n+Fp(a,p);l+=Lu(a,e,i,f,s)}else if(f=JT(t),typeof f=="function")for(t=f.call(t),p=0;!(a=t.next()).done;)a=a.value,f=n+Fp(a,p++),l+=Lu(a,e,i,f,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function su(t,e,i){if(t==null)return t;var n=[],s=0;return Lu(t,n,"","",function(a){return e.call(i,a,s++)}),n}function tM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nn={current:null},Nu={transition:null},iM={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:Nu,ReactCurrentOwner:C1};function VC(){throw Error("act(...) is not supported in production builds of React.")}Lt.Children={map:su,forEach:function(t,e,i){su(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return su(t,function(){e++}),e},toArray:function(t){return su(t,function(e){return e})||[]},only:function(t){if(!w1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Lt.Component=Il;Lt.Fragment=$T;Lt.Profiler=YT;Lt.PureComponent=b1;Lt.StrictMode=HT;Lt.Suspense=KT;Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iM;Lt.act=VC;Lt.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=IC({},t.props),s=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=C1.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(f in e)LC.call(e,f)&&!NC.hasOwnProperty(f)&&(n[f]=e[f]===void 0&&p!==void 0?p[f]:e[f])}var f=arguments.length-2;if(f===1)n.children=i;else if(1<f){p=Array(f);for(var g=0;g<f;g++)p[g]=arguments[g+2];n.children=p}return{$$typeof:Tc,type:t.type,key:s,ref:a,props:n,_owner:l}};Lt.createContext=function(t){return t={$$typeof:UT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XT,_context:t},t.Consumer=t};Lt.createElement=RC;Lt.createFactory=function(t){var e=RC.bind(null,t);return e.type=t,e};Lt.createRef=function(){return{current:null}};Lt.forwardRef=function(t){return{$$typeof:GT,render:t}};Lt.isValidElement=w1;Lt.lazy=function(t){return{$$typeof:ZT,_payload:{_status:-1,_result:t},_init:tM}};Lt.memo=function(t,e){return{$$typeof:QT,type:t,compare:e===void 0?null:e}};Lt.startTransition=function(t){var e=Nu.transition;Nu.transition={};try{t()}finally{Nu.transition=e}};Lt.unstable_act=VC;Lt.useCallback=function(t,e){return Nn.current.useCallback(t,e)};Lt.useContext=function(t){return Nn.current.useContext(t)};Lt.useDebugValue=function(){};Lt.useDeferredValue=function(t){return Nn.current.useDeferredValue(t)};Lt.useEffect=function(t,e){return Nn.current.useEffect(t,e)};Lt.useId=function(){return Nn.current.useId()};Lt.useImperativeHandle=function(t,e,i){return Nn.current.useImperativeHandle(t,e,i)};Lt.useInsertionEffect=function(t,e){return Nn.current.useInsertionEffect(t,e)};Lt.useLayoutEffect=function(t,e){return Nn.current.useLayoutEffect(t,e)};Lt.useMemo=function(t,e){return Nn.current.useMemo(t,e)};Lt.useReducer=function(t,e,i){return Nn.current.useReducer(t,e,i)};Lt.useRef=function(t){return Nn.current.useRef(t)};Lt.useState=function(t){return Nn.current.useState(t)};Lt.useSyncExternalStore=function(t,e,i){return Nn.current.useSyncExternalStore(t,e,i)};Lt.useTransition=function(){return Nn.current.useTransition()};Lt.version="18.3.1";AC.exports=Lt;var ne=AC.exports;const is=v1(ne),nM=PC({__proto__:null,default:is},[ne]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sM=ne,rM=Symbol.for("react.element"),aM=Symbol.for("react.fragment"),oM=Object.prototype.hasOwnProperty,lM=sM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hM={key:!0,ref:!0,__self:!0,__source:!0};function OC(t,e,i){var n,s={},a=null,l=null;i!==void 0&&(a=""+i),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)oM.call(e,n)&&!hM.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:rM,type:t,key:a,ref:l,props:s,_owner:lM.current}}g0.Fragment=aM;g0.jsx=OC;g0.jsxs=OC;EC.exports=g0;var w=EC.exports,jC={exports:{}},cs={},WC={exports:{}},zC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Pe,Le){var Be=Pe.length;Pe.push(Le);e:for(;0<Be;){var X=Be-1>>>1,_e=Pe[X];if(0<s(_e,Le))Pe[X]=Le,Pe[Be]=_e,Be=X;else break e}}function i(Pe){return Pe.length===0?null:Pe[0]}function n(Pe){if(Pe.length===0)return null;var Le=Pe[0],Be=Pe.pop();if(Be!==Le){Pe[0]=Be;e:for(var X=0,_e=Pe.length,me=_e>>>1;X<me;){var W=2*(X+1)-1,ae=Pe[W],fe=W+1,ye=Pe[fe];if(0>s(ae,Be))fe<_e&&0>s(ye,ae)?(Pe[X]=ye,Pe[fe]=Be,X=fe):(Pe[X]=ae,Pe[W]=Be,X=W);else if(fe<_e&&0>s(ye,Be))Pe[X]=ye,Pe[fe]=Be,X=fe;else break e}}return Le}function s(Pe,Le){var Be=Pe.sortIndex-Le.sortIndex;return Be!==0?Be:Pe.id-Le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,p=l.now();t.unstable_now=function(){return l.now()-p}}var f=[],g=[],m=1,k=null,T=3,D=!1,P=!1,L=!1,$=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(Pe){for(var Le=i(g);Le!==null;){if(Le.callback===null)n(g);else if(Le.startTime<=Pe)n(g),Le.sortIndex=Le.expirationTime,e(f,Le);else break;Le=i(g)}}function H(Pe){if(L=!1,B(Pe),!P)if(i(f)!==null)P=!0,Ze(U);else{var Le=i(g);Le!==null&&et(H,Le.startTime-Pe)}}function U(Pe,Le){P=!1,L&&(L=!1,N(Z),Z=-1),D=!0;var Be=T;try{for(B(Le),k=i(f);k!==null&&(!(k.expirationTime>Le)||Pe&&!re());){var X=k.callback;if(typeof X=="function"){k.callback=null,T=k.priorityLevel;var _e=X(k.expirationTime<=Le);Le=t.unstable_now(),typeof _e=="function"?k.callback=_e:k===i(f)&&n(f),B(Le)}else n(f);k=i(f)}if(k!==null)var me=!0;else{var W=i(g);W!==null&&et(H,W.startTime-Le),me=!1}return me}finally{k=null,T=Be,D=!1}}var j=!1,G=null,Z=-1,he=5,ee=-1;function re(){return!(t.unstable_now()-ee<he)}function we(){if(G!==null){var Pe=t.unstable_now();ee=Pe;var Le=!0;try{Le=G(!0,Pe)}finally{Le?de():(j=!1,G=null)}}else j=!1}var de;if(typeof E=="function")de=function(){E(we)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,He=Re.port2;Re.port1.onmessage=we,de=function(){He.postMessage(null)}}else de=function(){$(we,0)};function Ze(Pe){G=Pe,j||(j=!0,de())}function et(Pe,Le){Z=$(function(){Pe(t.unstable_now())},Le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Pe){Pe.callback=null},t.unstable_continueExecution=function(){P||D||(P=!0,Ze(U))},t.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<Pe?Math.floor(1e3/Pe):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return i(f)},t.unstable_next=function(Pe){switch(T){case 1:case 2:case 3:var Le=3;break;default:Le=T}var Be=T;T=Le;try{return Pe()}finally{T=Be}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Pe,Le){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var Be=T;T=Pe;try{return Le()}finally{T=Be}},t.unstable_scheduleCallback=function(Pe,Le,Be){var X=t.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?X+Be:X):Be=X,Pe){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=Be+_e,Pe={id:m++,callback:Le,priorityLevel:Pe,startTime:Be,expirationTime:_e,sortIndex:-1},Be>X?(Pe.sortIndex=Be,e(g,Pe),i(f)===null&&Pe===i(g)&&(L?(N(Z),Z=-1):L=!0,et(H,Be-X))):(Pe.sortIndex=_e,e(f,Pe),P||D||(P=!0,Ze(U))),Pe},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(Pe){var Le=T;return function(){var Be=T;T=Le;try{return Pe.apply(this,arguments)}finally{T=Be}}}})(zC);WC.exports=zC;var cM=WC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uM=ne,os=cM;function je(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $C=new Set,zh={};function oo(t,e){sl(t,e),sl(t+"Capture",e)}function sl(t,e){for(zh[t]=e,t=0;t<e.length;t++)$C.add(e[t])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bx=Object.prototype.hasOwnProperty,dM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,py={},fy={};function pM(t){return bx.call(fy,t)?!0:bx.call(py,t)?!1:dM.test(t)?fy[t]=!0:(py[t]=!0,!1)}function fM(t,e,i,n){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xM(t,e,i,n){if(e===null||typeof e>"u"||fM(t,e,i,n))return!0;if(n)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rn(t,e,i,n,s,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mn[t]=new Rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mn[e]=new Rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mn[t]=new Rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mn[t]=new Rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mn[t]=new Rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mn[t]=new Rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mn[t]=new Rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mn[t]=new Rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mn[t]=new Rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var S1=/[\-:]([a-z])/g;function k1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(S1,k1);mn[e]=new Rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(S1,k1);mn[e]=new Rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(S1,k1);mn[e]=new Rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mn[t]=new Rn(t,1,!1,t.toLowerCase(),null,!1,!1)});mn.xlinkHref=new Rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mn[t]=new Rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function T1(t,e,i,n){var s=mn.hasOwnProperty(e)?mn[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xM(e,i,s,n)&&(i=null),n||s===null?pM(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):s.mustUseProperty?t[s.propertyName]=i===null?s.type===3?!1:"":i:(e=s.attributeName,n=s.attributeNamespace,i===null?t.removeAttribute(e):(s=s.type,i=s===3||s===4&&i===!0?"":""+i,n?t.setAttributeNS(n,e,i):t.setAttribute(e,i))))}var Fr=uM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ru=Symbol.for("react.element"),Ao=Symbol.for("react.portal"),Do=Symbol.for("react.fragment"),M1=Symbol.for("react.strict_mode"),_x=Symbol.for("react.profiler"),HC=Symbol.for("react.provider"),YC=Symbol.for("react.context"),P1=Symbol.for("react.forward_ref"),Cx=Symbol.for("react.suspense"),wx=Symbol.for("react.suspense_list"),E1=Symbol.for("react.memo"),Vr=Symbol.for("react.lazy"),XC=Symbol.for("react.offscreen"),xy=Symbol.iterator;function Ql(t){return t===null||typeof t!="object"?null:(t=xy&&t[xy]||t["@@iterator"],typeof t=="function"?t:null)}var Si=Object.assign,Bp;function ph(t){if(Bp===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);Bp=e&&e[1]||""}return`
`+Bp+t}var Lp=!1;function Np(t,e){if(!t||Lp)return"";Lp=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var n=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){n=g}t.call(e.prototype)}else{try{throw Error()}catch(g){n=g}t()}}catch(g){if(g&&n&&typeof g.stack=="string"){for(var s=g.stack.split(`
`),a=n.stack.split(`
`),l=s.length-1,p=a.length-1;1<=l&&0<=p&&s[l]!==a[p];)p--;for(;1<=l&&0<=p;l--,p--)if(s[l]!==a[p]){if(l!==1||p!==1)do if(l--,p--,0>p||s[l]!==a[p]){var f=`
`+s[l].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=l&&0<=p);break}}}finally{Lp=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?ph(t):""}function mM(t){switch(t.tag){case 5:return ph(t.type);case 16:return ph("Lazy");case 13:return ph("Suspense");case 19:return ph("SuspenseList");case 0:case 2:case 15:return t=Np(t.type,!1),t;case 11:return t=Np(t.type.render,!1),t;case 1:return t=Np(t.type,!0),t;default:return""}}function Sx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Do:return"Fragment";case Ao:return"Portal";case _x:return"Profiler";case M1:return"StrictMode";case Cx:return"Suspense";case wx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case YC:return(t.displayName||"Context")+".Consumer";case HC:return(t._context.displayName||"Context")+".Provider";case P1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case E1:return e=t.displayName||null,e!==null?e:Sx(t.type)||"Memo";case Vr:e=t._payload,t=t._init;try{return Sx(t(e))}catch{}}return null}function gM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sx(e);case 8:return e===M1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function aa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function UC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yM(t){var e=UC(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,a=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function au(t){t._valueTracker||(t._valueTracker=yM(t))}function GC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),n="";return t&&(n=UC(t)?t.checked?"true":"false":t.value),t=n,t!==i?(e.setValue(t),!0):!1}function cd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kx(t,e){var i=e.checked;return Si({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function my(t,e){var i=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;i=aa(e.value!=null?e.value:i),t._wrapperState={initialChecked:n,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KC(t,e){e=e.checked,e!=null&&T1(t,"checked",e,!1)}function Tx(t,e){KC(t,e);var i=aa(e.value),n=e.type;if(i!=null)n==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mx(t,e.type,i):e.hasOwnProperty("defaultValue")&&Mx(t,e.type,aa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gy(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function Mx(t,e,i){(e!=="number"||cd(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var fh=Array.isArray;function Xo(t,e,i,n){if(t=t.options,e){e={};for(var s=0;s<i.length;s++)e["$"+i[s]]=!0;for(i=0;i<t.length;i++)s=e.hasOwnProperty("$"+t[i].value),t[i].selected!==s&&(t[i].selected=s),s&&n&&(t[i].defaultSelected=!0)}else{for(i=""+aa(i),e=null,s=0;s<t.length;s++){if(t[s].value===i){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Px(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(je(91));return Si({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yy(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(je(92));if(fh(i)){if(1<i.length)throw Error(je(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:aa(i)}}function QC(t,e){var i=aa(e.value),n=aa(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),n!=null&&(t.defaultValue=""+n)}function vy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ex(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ou,JC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,i,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ou=ou||document.createElement("div"),ou.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ou.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $h(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var Sh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vM=["Webkit","ms","Moz","O"];Object.keys(Sh).forEach(function(t){vM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sh[e]=Sh[t]})});function qC(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||Sh.hasOwnProperty(t)&&Sh[t]?(""+e).trim():e+"px"}function ew(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var n=i.indexOf("--")===0,s=qC(i,e[i],n);i==="float"&&(i="cssFloat"),n?t.setProperty(i,s):t[i]=s}}var bM=Si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ax(t,e){if(e){if(bM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(je(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(je(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(je(61))}if(e.style!=null&&typeof e.style!="object")throw Error(je(62))}}function Dx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ix=null;function A1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fx=null,Uo=null,Go=null;function by(t){if(t=Ec(t)){if(typeof Fx!="function")throw Error(je(280));var e=t.stateNode;e&&(e=C0(e),Fx(t.stateNode,t.type,e))}}function tw(t){Uo?Go?Go.push(t):Go=[t]:Uo=t}function iw(){if(Uo){var t=Uo,e=Go;if(Go=Uo=null,by(t),e)for(t=0;t<e.length;t++)by(e[t])}}function nw(t,e){return t(e)}function sw(){}var Rp=!1;function rw(t,e,i){if(Rp)return t(e,i);Rp=!0;try{return nw(t,e,i)}finally{Rp=!1,(Uo!==null||Go!==null)&&(sw(),iw())}}function Hh(t,e){var i=t.stateNode;if(i===null)return null;var n=C0(i);if(n===null)return null;i=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(je(231,e,typeof i));return i}var Bx=!1;if(wr)try{var Zl={};Object.defineProperty(Zl,"passive",{get:function(){Bx=!0}}),window.addEventListener("test",Zl,Zl),window.removeEventListener("test",Zl,Zl)}catch{Bx=!1}function _M(t,e,i,n,s,a,l,p,f){var g=Array.prototype.slice.call(arguments,3);try{e.apply(i,g)}catch(m){this.onError(m)}}var kh=!1,ud=null,dd=!1,Lx=null,CM={onError:function(t){kh=!0,ud=t}};function wM(t,e,i,n,s,a,l,p,f){kh=!1,ud=null,_M.apply(CM,arguments)}function SM(t,e,i,n,s,a,l,p,f){if(wM.apply(this,arguments),kh){if(kh){var g=ud;kh=!1,ud=null}else throw Error(je(198));dd||(dd=!0,Lx=g)}}function lo(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function aw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _y(t){if(lo(t)!==t)throw Error(je(188))}function kM(t){var e=t.alternate;if(!e){if(e=lo(t),e===null)throw Error(je(188));return e!==t?null:t}for(var i=t,n=e;;){var s=i.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){i=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===i)return _y(s),t;if(a===n)return _y(s),e;a=a.sibling}throw Error(je(188))}if(i.return!==n.return)i=s,n=a;else{for(var l=!1,p=s.child;p;){if(p===i){l=!0,i=s,n=a;break}if(p===n){l=!0,n=s,i=a;break}p=p.sibling}if(!l){for(p=a.child;p;){if(p===i){l=!0,i=a,n=s;break}if(p===n){l=!0,n=a,i=s;break}p=p.sibling}if(!l)throw Error(je(189))}}if(i.alternate!==n)throw Error(je(190))}if(i.tag!==3)throw Error(je(188));return i.stateNode.current===i?t:e}function ow(t){return t=kM(t),t!==null?lw(t):null}function lw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lw(t);if(e!==null)return e;t=t.sibling}return null}var hw=os.unstable_scheduleCallback,Cy=os.unstable_cancelCallback,TM=os.unstable_shouldYield,MM=os.unstable_requestPaint,Fi=os.unstable_now,PM=os.unstable_getCurrentPriorityLevel,D1=os.unstable_ImmediatePriority,cw=os.unstable_UserBlockingPriority,pd=os.unstable_NormalPriority,EM=os.unstable_LowPriority,uw=os.unstable_IdlePriority,y0=null,er=null;function AM(t){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(y0,t,void 0,(t.current.flags&128)===128)}catch{}}var Fs=Math.clz32?Math.clz32:FM,DM=Math.log,IM=Math.LN2;function FM(t){return t>>>=0,t===0?32:31-(DM(t)/IM|0)|0}var lu=64,hu=4194304;function xh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fd(t,e){var i=t.pendingLanes;if(i===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,l=i&268435455;if(l!==0){var p=l&~s;p!==0?n=xh(p):(a&=l,a!==0&&(n=xh(a)))}else l=i&~s,l!==0?n=xh(l):a!==0&&(n=xh(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)i=31-Fs(e),s=1<<i,n|=t[i],e&=~s;return n}function BM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LM(t,e){for(var i=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Fs(a),p=1<<l,f=s[l];f===-1?(!(p&i)||p&n)&&(s[l]=BM(p,e)):f<=e&&(t.expiredLanes|=p),a&=~p}}function Nx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dw(){var t=lu;return lu<<=1,!(lu&4194240)&&(lu=64),t}function Vp(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function Mc(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fs(e),t[e]=i}function NM(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<i;){var s=31-Fs(i),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,i&=~a}}function I1(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var n=31-Fs(i),s=1<<n;s&e|t[n]&e&&(t[n]|=e),i&=~s}}var qt=0;function pw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fw,F1,xw,mw,gw,Rx=!1,cu=[],Xr=null,Ur=null,Gr=null,Yh=new Map,Xh=new Map,jr=[],RM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wy(t,e){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Yh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xh.delete(e.pointerId)}}function Jl(t,e,i,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:i,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Ec(e),e!==null&&F1(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function VM(t,e,i,n,s){switch(e){case"focusin":return Xr=Jl(Xr,t,e,i,n,s),!0;case"dragenter":return Ur=Jl(Ur,t,e,i,n,s),!0;case"mouseover":return Gr=Jl(Gr,t,e,i,n,s),!0;case"pointerover":var a=s.pointerId;return Yh.set(a,Jl(Yh.get(a)||null,t,e,i,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Xh.set(a,Jl(Xh.get(a)||null,t,e,i,n,s)),!0}return!1}function yw(t){var e=Fa(t.target);if(e!==null){var i=lo(e);if(i!==null){if(e=i.tag,e===13){if(e=aw(i),e!==null){t.blockedOn=e,gw(t.priority,function(){xw(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ru(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=Vx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var n=new i.constructor(i.type,i);Ix=n,i.target.dispatchEvent(n),Ix=null}else return e=Ec(i),e!==null&&F1(e),t.blockedOn=i,!1;e.shift()}return!0}function Sy(t,e,i){Ru(t)&&i.delete(e)}function OM(){Rx=!1,Xr!==null&&Ru(Xr)&&(Xr=null),Ur!==null&&Ru(Ur)&&(Ur=null),Gr!==null&&Ru(Gr)&&(Gr=null),Yh.forEach(Sy),Xh.forEach(Sy)}function ql(t,e){t.blockedOn===e&&(t.blockedOn=null,Rx||(Rx=!0,os.unstable_scheduleCallback(os.unstable_NormalPriority,OM)))}function Uh(t){function e(s){return ql(s,t)}if(0<cu.length){ql(cu[0],t);for(var i=1;i<cu.length;i++){var n=cu[i];n.blockedOn===t&&(n.blockedOn=null)}}for(Xr!==null&&ql(Xr,t),Ur!==null&&ql(Ur,t),Gr!==null&&ql(Gr,t),Yh.forEach(e),Xh.forEach(e),i=0;i<jr.length;i++)n=jr[i],n.blockedOn===t&&(n.blockedOn=null);for(;0<jr.length&&(i=jr[0],i.blockedOn===null);)yw(i),i.blockedOn===null&&jr.shift()}var Ko=Fr.ReactCurrentBatchConfig,xd=!0;function jM(t,e,i,n){var s=qt,a=Ko.transition;Ko.transition=null;try{qt=1,B1(t,e,i,n)}finally{qt=s,Ko.transition=a}}function WM(t,e,i,n){var s=qt,a=Ko.transition;Ko.transition=null;try{qt=4,B1(t,e,i,n)}finally{qt=s,Ko.transition=a}}function B1(t,e,i,n){if(xd){var s=Vx(t,e,i,n);if(s===null)Gp(t,e,n,md,i),wy(t,n);else if(VM(s,t,e,i,n))n.stopPropagation();else if(wy(t,n),e&4&&-1<RM.indexOf(t)){for(;s!==null;){var a=Ec(s);if(a!==null&&fw(a),a=Vx(t,e,i,n),a===null&&Gp(t,e,n,md,i),a===s)break;s=a}s!==null&&n.stopPropagation()}else Gp(t,e,n,null,i)}}var md=null;function Vx(t,e,i,n){if(md=null,t=A1(n),t=Fa(t),t!==null)if(e=lo(t),e===null)t=null;else if(i=e.tag,i===13){if(t=aw(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return md=t,null}function vw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PM()){case D1:return 1;case cw:return 4;case pd:case EM:return 16;case uw:return 536870912;default:return 16}default:return 16}}var zr=null,L1=null,Vu=null;function bw(){if(Vu)return Vu;var t,e=L1,i=e.length,n,s="value"in zr?zr.value:zr.textContent,a=s.length;for(t=0;t<i&&e[t]===s[t];t++);var l=i-t;for(n=1;n<=l&&e[i-n]===s[a-n];n++);return Vu=s.slice(t,1<n?1-n:void 0)}function Ou(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function uu(){return!0}function ky(){return!1}function us(t){function e(i,n,s,a,l){this._reactName=i,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(i=t[p],this[p]=i?i(a):a[p]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?uu:ky,this.isPropagationStopped=ky,this}return Si(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=uu)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=uu)},persist:function(){},isPersistent:uu}),e}var Fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N1=us(Fl),Pc=Si({},Fl,{view:0,detail:0}),zM=us(Pc),Op,jp,eh,v0=Si({},Pc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eh&&(eh&&t.type==="mousemove"?(Op=t.screenX-eh.screenX,jp=t.screenY-eh.screenY):jp=Op=0,eh=t),Op)},movementY:function(t){return"movementY"in t?t.movementY:jp}}),Ty=us(v0),$M=Si({},v0,{dataTransfer:0}),HM=us($M),YM=Si({},Pc,{relatedTarget:0}),Wp=us(YM),XM=Si({},Fl,{animationName:0,elapsedTime:0,pseudoElement:0}),UM=us(XM),GM=Si({},Fl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KM=us(GM),QM=Si({},Fl,{data:0}),My=us(QM),ZM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qM[t])?!!e[t]:!1}function R1(){return e6}var t6=Si({},Pc,{key:function(t){if(t.key){var e=ZM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ou(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R1,charCode:function(t){return t.type==="keypress"?Ou(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ou(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),i6=us(t6),n6=Si({},v0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Py=us(n6),s6=Si({},Pc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R1}),r6=us(s6),a6=Si({},Fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),o6=us(a6),l6=Si({},v0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),h6=us(l6),c6=[9,13,27,32],V1=wr&&"CompositionEvent"in window,Th=null;wr&&"documentMode"in document&&(Th=document.documentMode);var u6=wr&&"TextEvent"in window&&!Th,_w=wr&&(!V1||Th&&8<Th&&11>=Th),Ey=" ",Ay=!1;function Cw(t,e){switch(t){case"keyup":return c6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ww(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Io=!1;function d6(t,e){switch(t){case"compositionend":return ww(e);case"keypress":return e.which!==32?null:(Ay=!0,Ey);case"textInput":return t=e.data,t===Ey&&Ay?null:t;default:return null}}function p6(t,e){if(Io)return t==="compositionend"||!V1&&Cw(t,e)?(t=bw(),Vu=L1=zr=null,Io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _w&&e.locale!=="ko"?null:e.data;default:return null}}var f6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!f6[t.type]:e==="textarea"}function Sw(t,e,i,n){tw(n),e=gd(e,"onChange"),0<e.length&&(i=new N1("onChange","change",null,i,n),t.push({event:i,listeners:e}))}var Mh=null,Gh=null;function x6(t){Lw(t,0)}function b0(t){var e=Lo(t);if(GC(e))return t}function m6(t,e){if(t==="change")return e}var kw=!1;if(wr){var zp;if(wr){var $p="oninput"in document;if(!$p){var Iy=document.createElement("div");Iy.setAttribute("oninput","return;"),$p=typeof Iy.oninput=="function"}zp=$p}else zp=!1;kw=zp&&(!document.documentMode||9<document.documentMode)}function Fy(){Mh&&(Mh.detachEvent("onpropertychange",Tw),Gh=Mh=null)}function Tw(t){if(t.propertyName==="value"&&b0(Gh)){var e=[];Sw(e,Gh,t,A1(t)),rw(x6,e)}}function g6(t,e,i){t==="focusin"?(Fy(),Mh=e,Gh=i,Mh.attachEvent("onpropertychange",Tw)):t==="focusout"&&Fy()}function y6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return b0(Gh)}function v6(t,e){if(t==="click")return b0(e)}function b6(t,e){if(t==="input"||t==="change")return b0(e)}function _6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Os=typeof Object.is=="function"?Object.is:_6;function Kh(t,e){if(Os(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var s=i[n];if(!bx.call(e,s)||!Os(t[s],e[s]))return!1}return!0}function By(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ly(t,e){var i=By(t);t=0;for(var n;i;){if(i.nodeType===3){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=By(i)}}function Mw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Mw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Pw(){for(var t=window,e=cd();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=cd(t.document)}return e}function O1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function C6(t){var e=Pw(),i=t.focusedElem,n=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&Mw(i.ownerDocument.documentElement,i)){if(n!==null&&O1(i)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=i.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=Ly(i,a);var l=Ly(i,n);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var w6=wr&&"documentMode"in document&&11>=document.documentMode,Fo=null,Ox=null,Ph=null,jx=!1;function Ny(t,e,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;jx||Fo==null||Fo!==cd(n)||(n=Fo,"selectionStart"in n&&O1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ph&&Kh(Ph,n)||(Ph=n,n=gd(Ox,"onSelect"),0<n.length&&(e=new N1("onSelect","select",null,e,i),t.push({event:e,listeners:n}),e.target=Fo)))}function du(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Bo={animationend:du("Animation","AnimationEnd"),animationiteration:du("Animation","AnimationIteration"),animationstart:du("Animation","AnimationStart"),transitionend:du("Transition","TransitionEnd")},Hp={},Ew={};wr&&(Ew=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function _0(t){if(Hp[t])return Hp[t];if(!Bo[t])return t;var e=Bo[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in Ew)return Hp[t]=e[i];return t}var Aw=_0("animationend"),Dw=_0("animationiteration"),Iw=_0("animationstart"),Fw=_0("transitionend"),Bw=new Map,Ry="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pa(t,e){Bw.set(t,e),oo(e,[t])}for(var Yp=0;Yp<Ry.length;Yp++){var Xp=Ry[Yp],S6=Xp.toLowerCase(),k6=Xp[0].toUpperCase()+Xp.slice(1);pa(S6,"on"+k6)}pa(Aw,"onAnimationEnd");pa(Dw,"onAnimationIteration");pa(Iw,"onAnimationStart");pa("dblclick","onDoubleClick");pa("focusin","onFocus");pa("focusout","onBlur");pa(Fw,"onTransitionEnd");sl("onMouseEnter",["mouseout","mouseover"]);sl("onMouseLeave",["mouseout","mouseover"]);sl("onPointerEnter",["pointerout","pointerover"]);sl("onPointerLeave",["pointerout","pointerover"]);oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T6=new Set("cancel close invalid load scroll toggle".split(" ").concat(mh));function Vy(t,e,i){var n=t.type||"unknown-event";t.currentTarget=i,SM(n,e,void 0,t),t.currentTarget=null}function Lw(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var n=t[i],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var l=n.length-1;0<=l;l--){var p=n[l],f=p.instance,g=p.currentTarget;if(p=p.listener,f!==a&&s.isPropagationStopped())break e;Vy(s,p,g),a=f}else for(l=0;l<n.length;l++){if(p=n[l],f=p.instance,g=p.currentTarget,p=p.listener,f!==a&&s.isPropagationStopped())break e;Vy(s,p,g),a=f}}}if(dd)throw t=Lx,dd=!1,Lx=null,t}function hi(t,e){var i=e[Yx];i===void 0&&(i=e[Yx]=new Set);var n=t+"__bubble";i.has(n)||(Nw(e,t,2,!1),i.add(n))}function Up(t,e,i){var n=0;e&&(n|=4),Nw(i,t,n,e)}var pu="_reactListening"+Math.random().toString(36).slice(2);function Qh(t){if(!t[pu]){t[pu]=!0,$C.forEach(function(i){i!=="selectionchange"&&(T6.has(i)||Up(i,!1,t),Up(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pu]||(e[pu]=!0,Up("selectionchange",!1,e))}}function Nw(t,e,i,n){switch(vw(e)){case 1:var s=jM;break;case 4:s=WM;break;default:s=B1}i=s.bind(null,e,i,t),s=void 0,!Bx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,i,{capture:!0,passive:s}):t.addEventListener(e,i,!0):s!==void 0?t.addEventListener(e,i,{passive:s}):t.addEventListener(e,i,!1)}function Gp(t,e,i,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var p=n.stateNode.containerInfo;if(p===s||p.nodeType===8&&p.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var f=l.tag;if((f===3||f===4)&&(f=l.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;l=l.return}for(;p!==null;){if(l=Fa(p),l===null)return;if(f=l.tag,f===5||f===6){n=a=l;continue e}p=p.parentNode}}n=n.return}rw(function(){var g=a,m=A1(i),k=[];e:{var T=Bw.get(t);if(T!==void 0){var D=N1,P=t;switch(t){case"keypress":if(Ou(i)===0)break e;case"keydown":case"keyup":D=i6;break;case"focusin":P="focus",D=Wp;break;case"focusout":P="blur",D=Wp;break;case"beforeblur":case"afterblur":D=Wp;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=Ty;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=HM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=r6;break;case Aw:case Dw:case Iw:D=UM;break;case Fw:D=o6;break;case"scroll":D=zM;break;case"wheel":D=h6;break;case"copy":case"cut":case"paste":D=KM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=Py}var L=(e&4)!==0,$=!L&&t==="scroll",N=L?T!==null?T+"Capture":null:T;L=[];for(var E=g,B;E!==null;){B=E;var H=B.stateNode;if(B.tag===5&&H!==null&&(B=H,N!==null&&(H=Hh(E,N),H!=null&&L.push(Zh(E,H,B)))),$)break;E=E.return}0<L.length&&(T=new D(T,P,null,i,m),k.push({event:T,listeners:L}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",D=t==="mouseout"||t==="pointerout",T&&i!==Ix&&(P=i.relatedTarget||i.fromElement)&&(Fa(P)||P[Sr]))break e;if((D||T)&&(T=m.window===m?m:(T=m.ownerDocument)?T.defaultView||T.parentWindow:window,D?(P=i.relatedTarget||i.toElement,D=g,P=P?Fa(P):null,P!==null&&($=lo(P),P!==$||P.tag!==5&&P.tag!==6)&&(P=null)):(D=null,P=g),D!==P)){if(L=Ty,H="onMouseLeave",N="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(L=Py,H="onPointerLeave",N="onPointerEnter",E="pointer"),$=D==null?T:Lo(D),B=P==null?T:Lo(P),T=new L(H,E+"leave",D,i,m),T.target=$,T.relatedTarget=B,H=null,Fa(m)===g&&(L=new L(N,E+"enter",P,i,m),L.target=B,L.relatedTarget=$,H=L),$=H,D&&P)t:{for(L=D,N=P,E=0,B=L;B;B=bo(B))E++;for(B=0,H=N;H;H=bo(H))B++;for(;0<E-B;)L=bo(L),E--;for(;0<B-E;)N=bo(N),B--;for(;E--;){if(L===N||N!==null&&L===N.alternate)break t;L=bo(L),N=bo(N)}L=null}else L=null;D!==null&&Oy(k,T,D,L,!1),P!==null&&$!==null&&Oy(k,$,P,L,!0)}}e:{if(T=g?Lo(g):window,D=T.nodeName&&T.nodeName.toLowerCase(),D==="select"||D==="input"&&T.type==="file")var U=m6;else if(Dy(T))if(kw)U=b6;else{U=y6;var j=g6}else(D=T.nodeName)&&D.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(U=v6);if(U&&(U=U(t,g))){Sw(k,U,i,m);break e}j&&j(t,T,g),t==="focusout"&&(j=T._wrapperState)&&j.controlled&&T.type==="number"&&Mx(T,"number",T.value)}switch(j=g?Lo(g):window,t){case"focusin":(Dy(j)||j.contentEditable==="true")&&(Fo=j,Ox=g,Ph=null);break;case"focusout":Ph=Ox=Fo=null;break;case"mousedown":jx=!0;break;case"contextmenu":case"mouseup":case"dragend":jx=!1,Ny(k,i,m);break;case"selectionchange":if(w6)break;case"keydown":case"keyup":Ny(k,i,m)}var G;if(V1)e:{switch(t){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else Io?Cw(t,i)&&(Z="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Z="onCompositionStart");Z&&(_w&&i.locale!=="ko"&&(Io||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&Io&&(G=bw()):(zr=m,L1="value"in zr?zr.value:zr.textContent,Io=!0)),j=gd(g,Z),0<j.length&&(Z=new My(Z,t,null,i,m),k.push({event:Z,listeners:j}),G?Z.data=G:(G=ww(i),G!==null&&(Z.data=G)))),(G=u6?d6(t,i):p6(t,i))&&(g=gd(g,"onBeforeInput"),0<g.length&&(m=new My("onBeforeInput","beforeinput",null,i,m),k.push({event:m,listeners:g}),m.data=G))}Lw(k,e)})}function Zh(t,e,i){return{instance:t,listener:e,currentTarget:i}}function gd(t,e){for(var i=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Hh(t,i),a!=null&&n.unshift(Zh(t,a,s)),a=Hh(t,e),a!=null&&n.push(Zh(t,a,s))),t=t.return}return n}function bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Oy(t,e,i,n,s){for(var a=e._reactName,l=[];i!==null&&i!==n;){var p=i,f=p.alternate,g=p.stateNode;if(f!==null&&f===n)break;p.tag===5&&g!==null&&(p=g,s?(f=Hh(i,a),f!=null&&l.unshift(Zh(i,f,p))):s||(f=Hh(i,a),f!=null&&l.push(Zh(i,f,p)))),i=i.return}l.length!==0&&t.push({event:e,listeners:l})}var M6=/\r\n?/g,P6=/\u0000|\uFFFD/g;function jy(t){return(typeof t=="string"?t:""+t).replace(M6,`
`).replace(P6,"")}function fu(t,e,i){if(e=jy(e),jy(t)!==e&&i)throw Error(je(425))}function yd(){}var Wx=null,zx=null;function $x(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hx=typeof setTimeout=="function"?setTimeout:void 0,E6=typeof clearTimeout=="function"?clearTimeout:void 0,Wy=typeof Promise=="function"?Promise:void 0,A6=typeof queueMicrotask=="function"?queueMicrotask:typeof Wy<"u"?function(t){return Wy.resolve(null).then(t).catch(D6)}:Hx;function D6(t){setTimeout(function(){throw t})}function Kp(t,e){var i=e,n=0;do{var s=i.nextSibling;if(t.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(n===0){t.removeChild(s),Uh(e);return}n--}else i!=="$"&&i!=="$?"&&i!=="$!"||n++;i=s}while(i);Uh(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var Bl=Math.random().toString(36).slice(2),Gs="__reactFiber$"+Bl,Jh="__reactProps$"+Bl,Sr="__reactContainer$"+Bl,Yx="__reactEvents$"+Bl,I6="__reactListeners$"+Bl,F6="__reactHandles$"+Bl;function Fa(t){var e=t[Gs];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Sr]||i[Gs]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=zy(t);t!==null;){if(i=t[Gs])return i;t=zy(t)}return e}t=i,i=t.parentNode}return null}function Ec(t){return t=t[Gs]||t[Sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(je(33))}function C0(t){return t[Jh]||null}var Xx=[],No=-1;function fa(t){return{current:t}}function fi(t){0>No||(t.current=Xx[No],Xx[No]=null,No--)}function oi(t,e){No++,Xx[No]=t.current,t.current=e}var oa={},An=fa(oa),Xn=fa(!1),Ga=oa;function rl(t,e){var i=t.type.contextTypes;if(!i)return oa;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in i)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Un(t){return t=t.childContextTypes,t!=null}function vd(){fi(Xn),fi(An)}function $y(t,e,i){if(An.current!==oa)throw Error(je(168));oi(An,e),oi(Xn,i)}function Rw(t,e,i){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return i;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(je(108,gM(t)||"Unknown",s));return Si({},i,n)}function bd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oa,Ga=An.current,oi(An,t),oi(Xn,Xn.current),!0}function Hy(t,e,i){var n=t.stateNode;if(!n)throw Error(je(169));i?(t=Rw(t,e,Ga),n.__reactInternalMemoizedMergedChildContext=t,fi(Xn),fi(An),oi(An,t)):fi(Xn),oi(Xn,i)}var pr=null,w0=!1,Qp=!1;function Vw(t){pr===null?pr=[t]:pr.push(t)}function B6(t){w0=!0,Vw(t)}function xa(){if(!Qp&&pr!==null){Qp=!0;var t=0,e=qt;try{var i=pr;for(qt=1;t<i.length;t++){var n=i[t];do n=n(!0);while(n!==null)}pr=null,w0=!1}catch(s){throw pr!==null&&(pr=pr.slice(t+1)),hw(D1,xa),s}finally{qt=e,Qp=!1}}return null}var Ro=[],Vo=0,_d=null,Cd=0,ps=[],fs=0,Ka=null,fr=1,xr="";function Ma(t,e){Ro[Vo++]=Cd,Ro[Vo++]=_d,_d=t,Cd=e}function Ow(t,e,i){ps[fs++]=fr,ps[fs++]=xr,ps[fs++]=Ka,Ka=t;var n=fr;t=xr;var s=32-Fs(n)-1;n&=~(1<<s),i+=1;var a=32-Fs(e)+s;if(30<a){var l=s-s%5;a=(n&(1<<l)-1).toString(32),n>>=l,s-=l,fr=1<<32-Fs(e)+s|i<<s|n,xr=a+t}else fr=1<<a|i<<s|n,xr=t}function j1(t){t.return!==null&&(Ma(t,1),Ow(t,1,0))}function W1(t){for(;t===_d;)_d=Ro[--Vo],Ro[Vo]=null,Cd=Ro[--Vo],Ro[Vo]=null;for(;t===Ka;)Ka=ps[--fs],ps[fs]=null,xr=ps[--fs],ps[fs]=null,fr=ps[--fs],ps[fs]=null}var ns=null,ts=null,yi=!1,Es=null;function jw(t,e){var i=ms(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function Yy(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ns=t,ts=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ns=t,ts=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=Ka!==null?{id:fr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=ms(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,ns=t,ts=null,!0):!1;default:return!1}}function Ux(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gx(t){if(yi){var e=ts;if(e){var i=e;if(!Yy(t,e)){if(Ux(t))throw Error(je(418));e=Kr(i.nextSibling);var n=ns;e&&Yy(t,e)?jw(n,i):(t.flags=t.flags&-4097|2,yi=!1,ns=t)}}else{if(Ux(t))throw Error(je(418));t.flags=t.flags&-4097|2,yi=!1,ns=t}}}function Xy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ns=t}function xu(t){if(t!==ns)return!1;if(!yi)return Xy(t),yi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$x(t.type,t.memoizedProps)),e&&(e=ts)){if(Ux(t))throw Ww(),Error(je(418));for(;e;)jw(t,e),e=Kr(e.nextSibling)}if(Xy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(je(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){ts=Kr(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}ts=null}}else ts=ns?Kr(t.stateNode.nextSibling):null;return!0}function Ww(){for(var t=ts;t;)t=Kr(t.nextSibling)}function al(){ts=ns=null,yi=!1}function z1(t){Es===null?Es=[t]:Es.push(t)}var L6=Fr.ReactCurrentBatchConfig;function th(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(je(309));var n=i.stateNode}if(!n)throw Error(je(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var p=s.refs;l===null?delete p[a]:p[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(je(284));if(!i._owner)throw Error(je(290,t))}return t}function mu(t,e){throw t=Object.prototype.toString.call(e),Error(je(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uy(t){var e=t._init;return e(t._payload)}function zw(t){function e(N,E){if(t){var B=N.deletions;B===null?(N.deletions=[E],N.flags|=16):B.push(E)}}function i(N,E){if(!t)return null;for(;E!==null;)e(N,E),E=E.sibling;return null}function n(N,E){for(N=new Map;E!==null;)E.key!==null?N.set(E.key,E):N.set(E.index,E),E=E.sibling;return N}function s(N,E){return N=qr(N,E),N.index=0,N.sibling=null,N}function a(N,E,B){return N.index=B,t?(B=N.alternate,B!==null?(B=B.index,B<E?(N.flags|=2,E):B):(N.flags|=2,E)):(N.flags|=1048576,E)}function l(N){return t&&N.alternate===null&&(N.flags|=2),N}function p(N,E,B,H){return E===null||E.tag!==6?(E=sf(B,N.mode,H),E.return=N,E):(E=s(E,B),E.return=N,E)}function f(N,E,B,H){var U=B.type;return U===Do?m(N,E,B.props.children,H,B.key):E!==null&&(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Vr&&Uy(U)===E.type)?(H=s(E,B.props),H.ref=th(N,E,B),H.return=N,H):(H=Xu(B.type,B.key,B.props,null,N.mode,H),H.ref=th(N,E,B),H.return=N,H)}function g(N,E,B,H){return E===null||E.tag!==4||E.stateNode.containerInfo!==B.containerInfo||E.stateNode.implementation!==B.implementation?(E=rf(B,N.mode,H),E.return=N,E):(E=s(E,B.children||[]),E.return=N,E)}function m(N,E,B,H,U){return E===null||E.tag!==7?(E=$a(B,N.mode,H,U),E.return=N,E):(E=s(E,B),E.return=N,E)}function k(N,E,B){if(typeof E=="string"&&E!==""||typeof E=="number")return E=sf(""+E,N.mode,B),E.return=N,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ru:return B=Xu(E.type,E.key,E.props,null,N.mode,B),B.ref=th(N,null,E),B.return=N,B;case Ao:return E=rf(E,N.mode,B),E.return=N,E;case Vr:var H=E._init;return k(N,H(E._payload),B)}if(fh(E)||Ql(E))return E=$a(E,N.mode,B,null),E.return=N,E;mu(N,E)}return null}function T(N,E,B,H){var U=E!==null?E.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return U!==null?null:p(N,E,""+B,H);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ru:return B.key===U?f(N,E,B,H):null;case Ao:return B.key===U?g(N,E,B,H):null;case Vr:return U=B._init,T(N,E,U(B._payload),H)}if(fh(B)||Ql(B))return U!==null?null:m(N,E,B,H,null);mu(N,B)}return null}function D(N,E,B,H,U){if(typeof H=="string"&&H!==""||typeof H=="number")return N=N.get(B)||null,p(E,N,""+H,U);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case ru:return N=N.get(H.key===null?B:H.key)||null,f(E,N,H,U);case Ao:return N=N.get(H.key===null?B:H.key)||null,g(E,N,H,U);case Vr:var j=H._init;return D(N,E,B,j(H._payload),U)}if(fh(H)||Ql(H))return N=N.get(B)||null,m(E,N,H,U,null);mu(E,H)}return null}function P(N,E,B,H){for(var U=null,j=null,G=E,Z=E=0,he=null;G!==null&&Z<B.length;Z++){G.index>Z?(he=G,G=null):he=G.sibling;var ee=T(N,G,B[Z],H);if(ee===null){G===null&&(G=he);break}t&&G&&ee.alternate===null&&e(N,G),E=a(ee,E,Z),j===null?U=ee:j.sibling=ee,j=ee,G=he}if(Z===B.length)return i(N,G),yi&&Ma(N,Z),U;if(G===null){for(;Z<B.length;Z++)G=k(N,B[Z],H),G!==null&&(E=a(G,E,Z),j===null?U=G:j.sibling=G,j=G);return yi&&Ma(N,Z),U}for(G=n(N,G);Z<B.length;Z++)he=D(G,N,Z,B[Z],H),he!==null&&(t&&he.alternate!==null&&G.delete(he.key===null?Z:he.key),E=a(he,E,Z),j===null?U=he:j.sibling=he,j=he);return t&&G.forEach(function(re){return e(N,re)}),yi&&Ma(N,Z),U}function L(N,E,B,H){var U=Ql(B);if(typeof U!="function")throw Error(je(150));if(B=U.call(B),B==null)throw Error(je(151));for(var j=U=null,G=E,Z=E=0,he=null,ee=B.next();G!==null&&!ee.done;Z++,ee=B.next()){G.index>Z?(he=G,G=null):he=G.sibling;var re=T(N,G,ee.value,H);if(re===null){G===null&&(G=he);break}t&&G&&re.alternate===null&&e(N,G),E=a(re,E,Z),j===null?U=re:j.sibling=re,j=re,G=he}if(ee.done)return i(N,G),yi&&Ma(N,Z),U;if(G===null){for(;!ee.done;Z++,ee=B.next())ee=k(N,ee.value,H),ee!==null&&(E=a(ee,E,Z),j===null?U=ee:j.sibling=ee,j=ee);return yi&&Ma(N,Z),U}for(G=n(N,G);!ee.done;Z++,ee=B.next())ee=D(G,N,Z,ee.value,H),ee!==null&&(t&&ee.alternate!==null&&G.delete(ee.key===null?Z:ee.key),E=a(ee,E,Z),j===null?U=ee:j.sibling=ee,j=ee);return t&&G.forEach(function(we){return e(N,we)}),yi&&Ma(N,Z),U}function $(N,E,B,H){if(typeof B=="object"&&B!==null&&B.type===Do&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case ru:e:{for(var U=B.key,j=E;j!==null;){if(j.key===U){if(U=B.type,U===Do){if(j.tag===7){i(N,j.sibling),E=s(j,B.props.children),E.return=N,N=E;break e}}else if(j.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Vr&&Uy(U)===j.type){i(N,j.sibling),E=s(j,B.props),E.ref=th(N,j,B),E.return=N,N=E;break e}i(N,j);break}else e(N,j);j=j.sibling}B.type===Do?(E=$a(B.props.children,N.mode,H,B.key),E.return=N,N=E):(H=Xu(B.type,B.key,B.props,null,N.mode,H),H.ref=th(N,E,B),H.return=N,N=H)}return l(N);case Ao:e:{for(j=B.key;E!==null;){if(E.key===j)if(E.tag===4&&E.stateNode.containerInfo===B.containerInfo&&E.stateNode.implementation===B.implementation){i(N,E.sibling),E=s(E,B.children||[]),E.return=N,N=E;break e}else{i(N,E);break}else e(N,E);E=E.sibling}E=rf(B,N.mode,H),E.return=N,N=E}return l(N);case Vr:return j=B._init,$(N,E,j(B._payload),H)}if(fh(B))return P(N,E,B,H);if(Ql(B))return L(N,E,B,H);mu(N,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,E!==null&&E.tag===6?(i(N,E.sibling),E=s(E,B),E.return=N,N=E):(i(N,E),E=sf(B,N.mode,H),E.return=N,N=E),l(N)):i(N,E)}return $}var ol=zw(!0),$w=zw(!1),wd=fa(null),Sd=null,Oo=null,$1=null;function H1(){$1=Oo=Sd=null}function Y1(t){var e=wd.current;fi(wd),t._currentValue=e}function Kx(t,e,i){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===i)break;t=t.return}}function Qo(t,e){Sd=t,$1=Oo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($n=!0),t.firstContext=null)}function vs(t){var e=t._currentValue;if($1!==t)if(t={context:t,memoizedValue:e,next:null},Oo===null){if(Sd===null)throw Error(je(308));Oo=t,Sd.dependencies={lanes:0,firstContext:t}}else Oo=Oo.next=t;return e}var Ba=null;function X1(t){Ba===null?Ba=[t]:Ba.push(t)}function Hw(t,e,i,n){var s=e.interleaved;return s===null?(i.next=i,X1(e)):(i.next=s.next,s.next=i),e.interleaved=i,kr(t,n)}function kr(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Or=!1;function U1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qr(t,e,i){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Yt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,kr(t,i)}return s=n.interleaved,s===null?(e.next=e,X1(n)):(e.next=s.next,s.next=e),n.interleaved=e,kr(t,i)}function ju(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,I1(t,i)}}function Gy(t,e){var i=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var s=null,a=null;if(i=i.firstBaseUpdate,i!==null){do{var l={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};a===null?s=a=l:a=a.next=l,i=i.next}while(i!==null);a===null?s=a=e:a=a.next=e}else s=a=e;i={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function kd(t,e,i,n){var s=t.updateQueue;Or=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,p=s.shared.pending;if(p!==null){s.shared.pending=null;var f=p,g=f.next;f.next=null,l===null?a=g:l.next=g,l=f;var m=t.alternate;m!==null&&(m=m.updateQueue,p=m.lastBaseUpdate,p!==l&&(p===null?m.firstBaseUpdate=g:p.next=g,m.lastBaseUpdate=f))}if(a!==null){var k=s.baseState;l=0,m=g=f=null,p=a;do{var T=p.lane,D=p.eventTime;if((n&T)===T){m!==null&&(m=m.next={eventTime:D,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var P=t,L=p;switch(T=e,D=i,L.tag){case 1:if(P=L.payload,typeof P=="function"){k=P.call(D,k,T);break e}k=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=L.payload,T=typeof P=="function"?P.call(D,k,T):P,T==null)break e;k=Si({},k,T);break e;case 2:Or=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,T=s.effects,T===null?s.effects=[p]:T.push(p))}else D={eventTime:D,lane:T,tag:p.tag,payload:p.payload,callback:p.callback,next:null},m===null?(g=m=D,f=k):m=m.next=D,l|=T;if(p=p.next,p===null){if(p=s.shared.pending,p===null)break;T=p,p=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(m===null&&(f=k),s.baseState=f,s.firstBaseUpdate=g,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Za|=l,t.lanes=l,t.memoizedState=k}}function Ky(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=i,typeof s!="function")throw Error(je(191,s));s.call(n)}}}var Ac={},tr=fa(Ac),qh=fa(Ac),ec=fa(Ac);function La(t){if(t===Ac)throw Error(je(174));return t}function G1(t,e){switch(oi(ec,e),oi(qh,t),oi(tr,Ac),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ex(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ex(e,t)}fi(tr),oi(tr,e)}function ll(){fi(tr),fi(qh),fi(ec)}function Xw(t){La(ec.current);var e=La(tr.current),i=Ex(e,t.type);e!==i&&(oi(qh,t),oi(tr,i))}function K1(t){qh.current===t&&(fi(tr),fi(qh))}var Ci=fa(0);function Td(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zp=[];function Q1(){for(var t=0;t<Zp.length;t++)Zp[t]._workInProgressVersionPrimary=null;Zp.length=0}var Wu=Fr.ReactCurrentDispatcher,Jp=Fr.ReactCurrentBatchConfig,Qa=0,wi=null,Hi=null,tn=null,Md=!1,Eh=!1,tc=0,N6=0;function yn(){throw Error(je(321))}function Z1(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Os(t[i],e[i]))return!1;return!0}function J1(t,e,i,n,s,a){if(Qa=a,wi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wu.current=t===null||t.memoizedState===null?j6:W6,t=i(n,s),Eh){a=0;do{if(Eh=!1,tc=0,25<=a)throw Error(je(301));a+=1,tn=Hi=null,e.updateQueue=null,Wu.current=z6,t=i(n,s)}while(Eh)}if(Wu.current=Pd,e=Hi!==null&&Hi.next!==null,Qa=0,tn=Hi=wi=null,Md=!1,e)throw Error(je(300));return t}function q1(){var t=tc!==0;return tc=0,t}function Xs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?wi.memoizedState=tn=t:tn=tn.next=t,tn}function bs(){if(Hi===null){var t=wi.alternate;t=t!==null?t.memoizedState:null}else t=Hi.next;var e=tn===null?wi.memoizedState:tn.next;if(e!==null)tn=e,Hi=t;else{if(t===null)throw Error(je(310));Hi=t,t={memoizedState:Hi.memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},tn===null?wi.memoizedState=tn=t:tn=tn.next=t}return tn}function ic(t,e){return typeof e=="function"?e(t):e}function qp(t){var e=bs(),i=e.queue;if(i===null)throw Error(je(311));i.lastRenderedReducer=t;var n=Hi,s=n.baseQueue,a=i.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}n.baseQueue=s=a,i.pending=null}if(s!==null){a=s.next,n=n.baseState;var p=l=null,f=null,g=a;do{var m=g.lane;if((Qa&m)===m)f!==null&&(f=f.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),n=g.hasEagerState?g.eagerState:t(n,g.action);else{var k={lane:m,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};f===null?(p=f=k,l=n):f=f.next=k,wi.lanes|=m,Za|=m}g=g.next}while(g!==null&&g!==a);f===null?l=n:f.next=p,Os(n,e.memoizedState)||($n=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=f,i.lastRenderedState=n}if(t=i.interleaved,t!==null){s=t;do a=s.lane,wi.lanes|=a,Za|=a,s=s.next;while(s!==t)}else s===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function ef(t){var e=bs(),i=e.queue;if(i===null)throw Error(je(311));i.lastRenderedReducer=t;var n=i.dispatch,s=i.pending,a=e.memoizedState;if(s!==null){i.pending=null;var l=s=s.next;do a=t(a,l.action),l=l.next;while(l!==s);Os(a,e.memoizedState)||($n=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),i.lastRenderedState=a}return[a,n]}function Uw(){}function Gw(t,e){var i=wi,n=bs(),s=e(),a=!Os(n.memoizedState,s);if(a&&(n.memoizedState=s,$n=!0),n=n.queue,e2(Zw.bind(null,i,n,t),[t]),n.getSnapshot!==e||a||tn!==null&&tn.memoizedState.tag&1){if(i.flags|=2048,nc(9,Qw.bind(null,i,n,s,e),void 0,null),an===null)throw Error(je(349));Qa&30||Kw(i,e,s)}return s}function Kw(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=wi.updateQueue,e===null?(e={lastEffect:null,stores:null},wi.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function Qw(t,e,i,n){e.value=i,e.getSnapshot=n,Jw(e)&&qw(t)}function Zw(t,e,i){return i(function(){Jw(e)&&qw(t)})}function Jw(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Os(t,i)}catch{return!0}}function qw(t){var e=kr(t,1);e!==null&&Bs(e,t,1,-1)}function Qy(t){var e=Xs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:t},e.queue=t,t=t.dispatch=O6.bind(null,wi,t),[e.memoizedState,t]}function nc(t,e,i,n){return t={tag:t,create:e,destroy:i,deps:n,next:null},e=wi.updateQueue,e===null?(e={lastEffect:null,stores:null},wi.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(n=i.next,i.next=t,t.next=n,e.lastEffect=t)),t}function e4(){return bs().memoizedState}function zu(t,e,i,n){var s=Xs();wi.flags|=t,s.memoizedState=nc(1|e,i,void 0,n===void 0?null:n)}function S0(t,e,i,n){var s=bs();n=n===void 0?null:n;var a=void 0;if(Hi!==null){var l=Hi.memoizedState;if(a=l.destroy,n!==null&&Z1(n,l.deps)){s.memoizedState=nc(e,i,a,n);return}}wi.flags|=t,s.memoizedState=nc(1|e,i,a,n)}function Zy(t,e){return zu(8390656,8,t,e)}function e2(t,e){return S0(2048,8,t,e)}function t4(t,e){return S0(4,2,t,e)}function i4(t,e){return S0(4,4,t,e)}function n4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function s4(t,e,i){return i=i!=null?i.concat([t]):null,S0(4,4,n4.bind(null,e,t),i)}function t2(){}function r4(t,e){var i=bs();e=e===void 0?null:e;var n=i.memoizedState;return n!==null&&e!==null&&Z1(e,n[1])?n[0]:(i.memoizedState=[t,e],t)}function a4(t,e){var i=bs();e=e===void 0?null:e;var n=i.memoizedState;return n!==null&&e!==null&&Z1(e,n[1])?n[0]:(t=t(),i.memoizedState=[t,e],t)}function o4(t,e,i){return Qa&21?(Os(i,e)||(i=dw(),wi.lanes|=i,Za|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$n=!0),t.memoizedState=i)}function R6(t,e){var i=qt;qt=i!==0&&4>i?i:4,t(!0);var n=Jp.transition;Jp.transition={};try{t(!1),e()}finally{qt=i,Jp.transition=n}}function l4(){return bs().memoizedState}function V6(t,e,i){var n=Jr(t);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},h4(t))c4(e,i);else if(i=Hw(t,e,i,n),i!==null){var s=Fn();Bs(i,t,n,s),u4(i,e,n)}}function O6(t,e,i){var n=Jr(t),s={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(h4(t))c4(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,p=a(l,i);if(s.hasEagerState=!0,s.eagerState=p,Os(p,l)){var f=e.interleaved;f===null?(s.next=s,X1(e)):(s.next=f.next,f.next=s),e.interleaved=s;return}}catch{}finally{}i=Hw(t,e,s,n),i!==null&&(s=Fn(),Bs(i,t,n,s),u4(i,e,n))}}function h4(t){var e=t.alternate;return t===wi||e!==null&&e===wi}function c4(t,e){Eh=Md=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function u4(t,e,i){if(i&4194240){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,I1(t,i)}}var Pd={readContext:vs,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},j6={readContext:vs,useCallback:function(t,e){return Xs().memoizedState=[t,e===void 0?null:e],t},useContext:vs,useEffect:Zy,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,zu(4194308,4,n4.bind(null,e,t),i)},useLayoutEffect:function(t,e){return zu(4194308,4,t,e)},useInsertionEffect:function(t,e){return zu(4,2,t,e)},useMemo:function(t,e){var i=Xs();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var n=Xs();return e=i!==void 0?i(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=V6.bind(null,wi,t),[n.memoizedState,t]},useRef:function(t){var e=Xs();return t={current:t},e.memoizedState=t},useState:Qy,useDebugValue:t2,useDeferredValue:function(t){return Xs().memoizedState=t},useTransition:function(){var t=Qy(!1),e=t[0];return t=R6.bind(null,t[1]),Xs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var n=wi,s=Xs();if(yi){if(i===void 0)throw Error(je(407));i=i()}else{if(i=e(),an===null)throw Error(je(349));Qa&30||Kw(n,e,i)}s.memoizedState=i;var a={value:i,getSnapshot:e};return s.queue=a,Zy(Zw.bind(null,n,a,t),[t]),n.flags|=2048,nc(9,Qw.bind(null,n,a,i,e),void 0,null),i},useId:function(){var t=Xs(),e=an.identifierPrefix;if(yi){var i=xr,n=fr;i=(n&~(1<<32-Fs(n)-1)).toString(32)+i,e=":"+e+"R"+i,i=tc++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=N6++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},W6={readContext:vs,useCallback:r4,useContext:vs,useEffect:e2,useImperativeHandle:s4,useInsertionEffect:t4,useLayoutEffect:i4,useMemo:a4,useReducer:qp,useRef:e4,useState:function(){return qp(ic)},useDebugValue:t2,useDeferredValue:function(t){var e=bs();return o4(e,Hi.memoizedState,t)},useTransition:function(){var t=qp(ic)[0],e=bs().memoizedState;return[t,e]},useMutableSource:Uw,useSyncExternalStore:Gw,useId:l4,unstable_isNewReconciler:!1},z6={readContext:vs,useCallback:r4,useContext:vs,useEffect:e2,useImperativeHandle:s4,useInsertionEffect:t4,useLayoutEffect:i4,useMemo:a4,useReducer:ef,useRef:e4,useState:function(){return ef(ic)},useDebugValue:t2,useDeferredValue:function(t){var e=bs();return Hi===null?e.memoizedState=t:o4(e,Hi.memoizedState,t)},useTransition:function(){var t=ef(ic)[0],e=bs().memoizedState;return[t,e]},useMutableSource:Uw,useSyncExternalStore:Gw,useId:l4,unstable_isNewReconciler:!1};function Ts(t,e){if(t&&t.defaultProps){e=Si({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}function Qx(t,e,i,n){e=t.memoizedState,i=i(n,e),i=i==null?e:Si({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var k0={isMounted:function(t){return(t=t._reactInternals)?lo(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var n=Fn(),s=Jr(t),a=yr(n,s);a.payload=e,i!=null&&(a.callback=i),e=Qr(t,a,s),e!==null&&(Bs(e,t,s,n),ju(e,t,s))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var n=Fn(),s=Jr(t),a=yr(n,s);a.tag=1,a.payload=e,i!=null&&(a.callback=i),e=Qr(t,a,s),e!==null&&(Bs(e,t,s,n),ju(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=Fn(),n=Jr(t),s=yr(i,n);s.tag=2,e!=null&&(s.callback=e),e=Qr(t,s,n),e!==null&&(Bs(e,t,n,i),ju(e,t,n))}};function Jy(t,e,i,n,s,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,l):e.prototype&&e.prototype.isPureReactComponent?!Kh(i,n)||!Kh(s,a):!0}function d4(t,e,i){var n=!1,s=oa,a=e.contextType;return typeof a=="object"&&a!==null?a=vs(a):(s=Un(e)?Ga:An.current,n=e.contextTypes,a=(n=n!=null)?rl(t,s):oa),e=new e(i,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=k0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function qy(t,e,i,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,n),e.state!==t&&k0.enqueueReplaceState(e,e.state,null)}function Zx(t,e,i,n){var s=t.stateNode;s.props=i,s.state=t.memoizedState,s.refs={},U1(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=vs(a):(a=Un(e)?Ga:An.current,s.context=rl(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Qx(t,e,a,i),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&k0.enqueueReplaceState(s,s.state,null),kd(t,i,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hl(t,e){try{var i="",n=e;do i+=mM(n),n=n.return;while(n);var s=i}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function tf(t,e,i){return{value:t,source:null,stack:i??null,digest:e??null}}function Jx(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var $6=typeof WeakMap=="function"?WeakMap:Map;function p4(t,e,i){i=yr(-1,i),i.tag=3,i.payload={element:null};var n=e.value;return i.callback=function(){Ad||(Ad=!0,lm=n),Jx(t,e)},i}function f4(t,e,i){i=yr(-1,i),i.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;i.payload=function(){return n(s)},i.callback=function(){Jx(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(i.callback=function(){Jx(t,e),typeof n!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),i}function ev(t,e,i){var n=t.pingCache;if(n===null){n=t.pingCache=new $6;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(i)||(s.add(i),t=n8.bind(null,t,e,i),e.then(t,t))}function tv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iv(t,e,i,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=yr(-1,1),e.tag=2,Qr(i,e,1))),i.lanes|=1),t)}var H6=Fr.ReactCurrentOwner,$n=!1;function Dn(t,e,i,n){e.child=t===null?$w(e,null,i,n):ol(e,t.child,i,n)}function nv(t,e,i,n,s){i=i.render;var a=e.ref;return Qo(e,s),n=J1(t,e,i,n,a,s),i=q1(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tr(t,e,s)):(yi&&i&&j1(e),e.flags|=1,Dn(t,e,n,s),e.child)}function sv(t,e,i,n,s){if(t===null){var a=i.type;return typeof a=="function"&&!h2(a)&&a.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=a,x4(t,e,a,n,s)):(t=Xu(i.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var l=a.memoizedProps;if(i=i.compare,i=i!==null?i:Kh,i(l,n)&&t.ref===e.ref)return Tr(t,e,s)}return e.flags|=1,t=qr(a,n),t.ref=e.ref,t.return=e,e.child=t}function x4(t,e,i,n,s){if(t!==null){var a=t.memoizedProps;if(Kh(a,n)&&t.ref===e.ref)if($n=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&($n=!0);else return e.lanes=t.lanes,Tr(t,e,s)}return qx(t,e,i,n,s)}function m4(t,e,i){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oi(Wo,qn),qn|=i;else{if(!(i&1073741824))return t=a!==null?a.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oi(Wo,qn),qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:i,oi(Wo,qn),qn|=n}else a!==null?(n=a.baseLanes|i,e.memoizedState=null):n=i,oi(Wo,qn),qn|=n;return Dn(t,e,s,i),e.child}function g4(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function qx(t,e,i,n,s){var a=Un(i)?Ga:An.current;return a=rl(e,a),Qo(e,s),i=J1(t,e,i,n,a,s),n=q1(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tr(t,e,s)):(yi&&n&&j1(e),e.flags|=1,Dn(t,e,i,s),e.child)}function rv(t,e,i,n,s){if(Un(i)){var a=!0;bd(e)}else a=!1;if(Qo(e,s),e.stateNode===null)$u(t,e),d4(e,i,n),Zx(e,i,n,s),n=!0;else if(t===null){var l=e.stateNode,p=e.memoizedProps;l.props=p;var f=l.context,g=i.contextType;typeof g=="object"&&g!==null?g=vs(g):(g=Un(i)?Ga:An.current,g=rl(e,g));var m=i.getDerivedStateFromProps,k=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";k||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(p!==n||f!==g)&&qy(e,l,n,g),Or=!1;var T=e.memoizedState;l.state=T,kd(e,n,l,s),f=e.memoizedState,p!==n||T!==f||Xn.current||Or?(typeof m=="function"&&(Qx(e,i,m,n),f=e.memoizedState),(p=Or||Jy(e,i,p,n,T,f,g))?(k||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=f),l.props=n,l.state=f,l.context=g,n=p):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,Yw(t,e),p=e.memoizedProps,g=e.type===e.elementType?p:Ts(e.type,p),l.props=g,k=e.pendingProps,T=l.context,f=i.contextType,typeof f=="object"&&f!==null?f=vs(f):(f=Un(i)?Ga:An.current,f=rl(e,f));var D=i.getDerivedStateFromProps;(m=typeof D=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(p!==k||T!==f)&&qy(e,l,n,f),Or=!1,T=e.memoizedState,l.state=T,kd(e,n,l,s);var P=e.memoizedState;p!==k||T!==P||Xn.current||Or?(typeof D=="function"&&(Qx(e,i,D,n),P=e.memoizedState),(g=Or||Jy(e,i,g,n,T,P,f)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,P,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,P,f)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=P),l.props=n,l.state=P,l.context=f,n=g):(typeof l.componentDidUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),n=!1)}return em(t,e,i,n,a,s)}function em(t,e,i,n,s,a){g4(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return s&&Hy(e,i,!1),Tr(t,e,a);n=e.stateNode,H6.current=e;var p=l&&typeof i.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=ol(e,t.child,null,a),e.child=ol(e,null,p,a)):Dn(t,e,p,a),e.memoizedState=n.state,s&&Hy(e,i,!0),e.child}function y4(t){var e=t.stateNode;e.pendingContext?$y(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$y(t,e.context,!1),G1(t,e.containerInfo)}function av(t,e,i,n,s){return al(),z1(s),e.flags|=256,Dn(t,e,i,n),e.child}var tm={dehydrated:null,treeContext:null,retryLane:0};function im(t){return{baseLanes:t,cachePool:null,transitions:null}}function v4(t,e,i){var n=e.pendingProps,s=Ci.current,a=!1,l=(e.flags&128)!==0,p;if((p=l)||(p=t!==null&&t.memoizedState===null?!1:(s&2)!==0),p?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),oi(Ci,s&1),t===null)return Gx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,a?(n=e.mode,a=e.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=P0(l,n,0,null),t=$a(t,n,i,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=im(i),e.memoizedState=tm,t):i2(e,l));if(s=t.memoizedState,s!==null&&(p=s.dehydrated,p!==null))return Y6(t,e,l,n,p,s,i);if(a){a=n.fallback,l=e.mode,s=t.child,p=s.sibling;var f={mode:"hidden",children:n.children};return!(l&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=f,e.deletions=null):(n=qr(s,f),n.subtreeFlags=s.subtreeFlags&14680064),p!==null?a=qr(p,a):(a=$a(a,l,i,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,l=t.child.memoizedState,l=l===null?im(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~i,e.memoizedState=tm,n}return a=t.child,t=a.sibling,n=qr(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=i),n.return=e,n.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=n,e.memoizedState=null,n}function i2(t,e){return e=P0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gu(t,e,i,n){return n!==null&&z1(n),ol(e,t.child,null,i),t=i2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Y6(t,e,i,n,s,a,l){if(i)return e.flags&256?(e.flags&=-257,n=tf(Error(je(422))),gu(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=P0({mode:"visible",children:n.children},s,0,null),a=$a(a,s,l,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&ol(e,t.child,null,l),e.child.memoizedState=im(l),e.memoizedState=tm,a);if(!(e.mode&1))return gu(t,e,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var p=n.dgst;return n=p,a=Error(je(419)),n=tf(a,n,void 0),gu(t,e,l,n)}if(p=(l&t.childLanes)!==0,$n||p){if(n=an,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,kr(t,s),Bs(n,t,s,-1))}return l2(),n=tf(Error(je(421))),gu(t,e,l,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=s8.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,ts=Kr(s.nextSibling),ns=e,yi=!0,Es=null,t!==null&&(ps[fs++]=fr,ps[fs++]=xr,ps[fs++]=Ka,fr=t.id,xr=t.overflow,Ka=e),e=i2(e,n.children),e.flags|=4096,e)}function ov(t,e,i){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Kx(t.return,e,i)}function nf(t,e,i,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=i,a.tailMode=s)}function b4(t,e,i){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(Dn(t,e,n.children,i),n=Ci.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ov(t,i,e);else if(t.tag===19)ov(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(oi(Ci,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(i=e.child,s=null;i!==null;)t=i.alternate,t!==null&&Td(t)===null&&(s=i),i=i.sibling;i=s,i===null?(s=e.child,e.child=null):(s=i.sibling,i.sibling=null),nf(e,!1,s,i,a);break;case"backwards":for(i=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Td(t)===null){e.child=s;break}t=s.sibling,s.sibling=i,i=s,s=t}nf(e,!0,i,null,a);break;case"together":nf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $u(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tr(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),Za|=e.lanes,!(i&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(je(153));if(e.child!==null){for(t=e.child,i=qr(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=qr(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function X6(t,e,i){switch(e.tag){case 3:y4(e),al();break;case 5:Xw(e);break;case 1:Un(e.type)&&bd(e);break;case 4:G1(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;oi(wd,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(oi(Ci,Ci.current&1),e.flags|=128,null):i&e.child.childLanes?v4(t,e,i):(oi(Ci,Ci.current&1),t=Tr(t,e,i),t!==null?t.sibling:null);oi(Ci,Ci.current&1);break;case 19:if(n=(i&e.childLanes)!==0,t.flags&128){if(n)return b4(t,e,i);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),oi(Ci,Ci.current),n)break;return null;case 22:case 23:return e.lanes=0,m4(t,e,i)}return Tr(t,e,i)}var _4,nm,C4,w4;_4=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};nm=function(){};C4=function(t,e,i,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,La(tr.current);var a=null;switch(i){case"input":s=kx(t,s),n=kx(t,n),a=[];break;case"select":s=Si({},s,{value:void 0}),n=Si({},n,{value:void 0}),a=[];break;case"textarea":s=Px(t,s),n=Px(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=yd)}Ax(i,n);var l;i=null;for(g in s)if(!n.hasOwnProperty(g)&&s.hasOwnProperty(g)&&s[g]!=null)if(g==="style"){var p=s[g];for(l in p)p.hasOwnProperty(l)&&(i||(i={}),i[l]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(zh.hasOwnProperty(g)?a||(a=[]):(a=a||[]).push(g,null));for(g in n){var f=n[g];if(p=s!=null?s[g]:void 0,n.hasOwnProperty(g)&&f!==p&&(f!=null||p!=null))if(g==="style")if(p){for(l in p)!p.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in f)f.hasOwnProperty(l)&&p[l]!==f[l]&&(i||(i={}),i[l]=f[l])}else i||(a||(a=[]),a.push(g,i)),i=f;else g==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,p=p?p.__html:void 0,f!=null&&p!==f&&(a=a||[]).push(g,f)):g==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(g,""+f):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(zh.hasOwnProperty(g)?(f!=null&&g==="onScroll"&&hi("scroll",t),a||p===f||(a=[])):(a=a||[]).push(g,f))}i&&(a=a||[]).push("style",i);var g=a;(e.updateQueue=g)&&(e.flags|=4)}};w4=function(t,e,i,n){i!==n&&(e.flags|=4)};function ih(t,e){if(!yi)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,n=0;if(e)for(var s=t.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=i,e}function U6(t,e,i){var n=e.pendingProps;switch(W1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return Un(e.type)&&vd(),vn(e),null;case 3:return n=e.stateNode,ll(),fi(Xn),fi(An),Q1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(xu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Es!==null&&(um(Es),Es=null))),nm(t,e),vn(e),null;case 5:K1(e);var s=La(ec.current);if(i=e.type,t!==null&&e.stateNode!=null)C4(t,e,i,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(je(166));return vn(e),null}if(t=La(tr.current),xu(e)){n=e.stateNode,i=e.type;var a=e.memoizedProps;switch(n[Gs]=e,n[Jh]=a,t=(e.mode&1)!==0,i){case"dialog":hi("cancel",n),hi("close",n);break;case"iframe":case"object":case"embed":hi("load",n);break;case"video":case"audio":for(s=0;s<mh.length;s++)hi(mh[s],n);break;case"source":hi("error",n);break;case"img":case"image":case"link":hi("error",n),hi("load",n);break;case"details":hi("toggle",n);break;case"input":my(n,a),hi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},hi("invalid",n);break;case"textarea":yy(n,a),hi("invalid",n)}Ax(i,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var p=a[l];l==="children"?typeof p=="string"?n.textContent!==p&&(a.suppressHydrationWarning!==!0&&fu(n.textContent,p,t),s=["children",p]):typeof p=="number"&&n.textContent!==""+p&&(a.suppressHydrationWarning!==!0&&fu(n.textContent,p,t),s=["children",""+p]):zh.hasOwnProperty(l)&&p!=null&&l==="onScroll"&&hi("scroll",n)}switch(i){case"input":au(n),gy(n,a,!0);break;case"textarea":au(n),vy(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=yd)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZC(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(i,{is:n.is}):(t=l.createElement(i),i==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,i),t[Gs]=e,t[Jh]=n,_4(t,e,!1,!1),e.stateNode=t;e:{switch(l=Dx(i,n),i){case"dialog":hi("cancel",t),hi("close",t),s=n;break;case"iframe":case"object":case"embed":hi("load",t),s=n;break;case"video":case"audio":for(s=0;s<mh.length;s++)hi(mh[s],t);s=n;break;case"source":hi("error",t),s=n;break;case"img":case"image":case"link":hi("error",t),hi("load",t),s=n;break;case"details":hi("toggle",t),s=n;break;case"input":my(t,n),s=kx(t,n),hi("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Si({},n,{value:void 0}),hi("invalid",t);break;case"textarea":yy(t,n),s=Px(t,n),hi("invalid",t);break;default:s=n}Ax(i,s),p=s;for(a in p)if(p.hasOwnProperty(a)){var f=p[a];a==="style"?ew(t,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&JC(t,f)):a==="children"?typeof f=="string"?(i!=="textarea"||f!=="")&&$h(t,f):typeof f=="number"&&$h(t,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(zh.hasOwnProperty(a)?f!=null&&a==="onScroll"&&hi("scroll",t):f!=null&&T1(t,a,f,l))}switch(i){case"input":au(t),gy(t,n,!1);break;case"textarea":au(t),vy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+aa(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Xo(t,!!n.multiple,a,!1):n.defaultValue!=null&&Xo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=yd)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(t&&e.stateNode!=null)w4(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(je(166));if(i=La(ec.current),La(tr.current),xu(e)){if(n=e.stateNode,i=e.memoizedProps,n[Gs]=e,(a=n.nodeValue!==i)&&(t=ns,t!==null))switch(t.tag){case 3:fu(n.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fu(n.nodeValue,i,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(i.nodeType===9?i:i.ownerDocument).createTextNode(n),n[Gs]=e,e.stateNode=n}return vn(e),null;case 13:if(fi(Ci),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yi&&ts!==null&&e.mode&1&&!(e.flags&128))Ww(),al(),e.flags|=98560,a=!1;else if(a=xu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(je(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(je(317));a[Gs]=e}else al(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),a=!1}else Es!==null&&(um(Es),Es=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ci.current&1?Yi===0&&(Yi=3):l2())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return ll(),nm(t,e),t===null&&Qh(e.stateNode.containerInfo),vn(e),null;case 10:return Y1(e.type._context),vn(e),null;case 17:return Un(e.type)&&vd(),vn(e),null;case 19:if(fi(Ci),a=e.memoizedState,a===null)return vn(e),null;if(n=(e.flags&128)!==0,l=a.rendering,l===null)if(n)ih(a,!1);else{if(Yi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Td(t),l!==null){for(e.flags|=128,ih(a,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=i,i=e.child;i!==null;)a=i,t=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return oi(Ci,Ci.current&1|2),e.child}t=t.sibling}a.tail!==null&&Fi()>cl&&(e.flags|=128,n=!0,ih(a,!1),e.lanes=4194304)}else{if(!n)if(t=Td(l),t!==null){if(e.flags|=128,n=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),ih(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!yi)return vn(e),null}else 2*Fi()-a.renderingStartTime>cl&&i!==1073741824&&(e.flags|=128,n=!0,ih(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(i=a.last,i!==null?i.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Fi(),e.sibling=null,i=Ci.current,oi(Ci,n?i&1|2:i&1),e):(vn(e),null);case 22:case 23:return o2(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?qn&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(je(156,e.tag))}function G6(t,e){switch(W1(e),e.tag){case 1:return Un(e.type)&&vd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ll(),fi(Xn),fi(An),Q1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return K1(e),null;case 13:if(fi(Ci),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(je(340));al()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fi(Ci),null;case 4:return ll(),null;case 10:return Y1(e.type._context),null;case 22:case 23:return o2(),null;case 24:return null;default:return null}}var yu=!1,Cn=!1,K6=typeof WeakSet=="function"?WeakSet:Set,st=null;function jo(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(n){Pi(t,e,n)}else i.current=null}function sm(t,e,i){try{i()}catch(n){Pi(t,e,n)}}var lv=!1;function Q6(t,e){if(Wx=xd,t=Pw(),O1(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{i.nodeType,a.nodeType}catch{i=null;break e}var l=0,p=-1,f=-1,g=0,m=0,k=t,T=null;t:for(;;){for(var D;k!==i||s!==0&&k.nodeType!==3||(p=l+s),k!==a||n!==0&&k.nodeType!==3||(f=l+n),k.nodeType===3&&(l+=k.nodeValue.length),(D=k.firstChild)!==null;)T=k,k=D;for(;;){if(k===t)break t;if(T===i&&++g===s&&(p=l),T===a&&++m===n&&(f=l),(D=k.nextSibling)!==null)break;k=T,T=k.parentNode}k=D}i=p===-1||f===-1?null:{start:p,end:f}}else i=null}i=i||{start:0,end:0}}else i=null;for(zx={focusedElem:t,selectionRange:i},xd=!1,st=e;st!==null;)if(e=st,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,st=t;else for(;st!==null;){e=st;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var L=P.memoizedProps,$=P.memoizedState,N=e.stateNode,E=N.getSnapshotBeforeUpdate(e.elementType===e.type?L:Ts(e.type,L),$);N.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var B=e.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(H){Pi(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,st=t;break}st=e.return}return P=lv,lv=!1,P}function Ah(t,e,i){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&sm(e,i,a)}s=s.next}while(s!==n)}}function T0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var n=i.create;i.destroy=n()}i=i.next}while(i!==e)}}function rm(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function S4(t){var e=t.alternate;e!==null&&(t.alternate=null,S4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gs],delete e[Jh],delete e[Yx],delete e[I6],delete e[F6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function k4(t){return t.tag===5||t.tag===3||t.tag===4}function hv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||k4(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function am(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=yd));else if(n!==4&&(t=t.child,t!==null))for(am(t,e,i),t=t.sibling;t!==null;)am(t,e,i),t=t.sibling}function om(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(om(t,e,i),t=t.sibling;t!==null;)om(t,e,i),t=t.sibling}var un=null,Ms=!1;function Lr(t,e,i){for(i=i.child;i!==null;)T4(t,e,i),i=i.sibling}function T4(t,e,i){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(y0,i)}catch{}switch(i.tag){case 5:Cn||jo(i,e);case 6:var n=un,s=Ms;un=null,Lr(t,e,i),un=n,Ms=s,un!==null&&(Ms?(t=un,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):un.removeChild(i.stateNode));break;case 18:un!==null&&(Ms?(t=un,i=i.stateNode,t.nodeType===8?Kp(t.parentNode,i):t.nodeType===1&&Kp(t,i),Uh(t)):Kp(un,i.stateNode));break;case 4:n=un,s=Ms,un=i.stateNode.containerInfo,Ms=!0,Lr(t,e,i),un=n,Ms=s;break;case 0:case 11:case 14:case 15:if(!Cn&&(n=i.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&sm(i,e,l),s=s.next}while(s!==n)}Lr(t,e,i);break;case 1:if(!Cn&&(jo(i,e),n=i.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(p){Pi(i,e,p)}Lr(t,e,i);break;case 21:Lr(t,e,i);break;case 22:i.mode&1?(Cn=(n=Cn)||i.memoizedState!==null,Lr(t,e,i),Cn=n):Lr(t,e,i);break;default:Lr(t,e,i)}}function cv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new K6),e.forEach(function(n){var s=r8.bind(null,t,n);i.has(n)||(i.add(n),n.then(s,s))})}}function Ss(t,e){var i=e.deletions;if(i!==null)for(var n=0;n<i.length;n++){var s=i[n];try{var a=t,l=e,p=l;e:for(;p!==null;){switch(p.tag){case 5:un=p.stateNode,Ms=!1;break e;case 3:un=p.stateNode.containerInfo,Ms=!0;break e;case 4:un=p.stateNode.containerInfo,Ms=!0;break e}p=p.return}if(un===null)throw Error(je(160));T4(a,l,s),un=null,Ms=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(g){Pi(s,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)M4(e,t),e=e.sibling}function M4(t,e){var i=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ss(e,t),Ys(t),n&4){try{Ah(3,t,t.return),T0(3,t)}catch(L){Pi(t,t.return,L)}try{Ah(5,t,t.return)}catch(L){Pi(t,t.return,L)}}break;case 1:Ss(e,t),Ys(t),n&512&&i!==null&&jo(i,i.return);break;case 5:if(Ss(e,t),Ys(t),n&512&&i!==null&&jo(i,i.return),t.flags&32){var s=t.stateNode;try{$h(s,"")}catch(L){Pi(t,t.return,L)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,l=i!==null?i.memoizedProps:a,p=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{p==="input"&&a.type==="radio"&&a.name!=null&&KC(s,a),Dx(p,l);var g=Dx(p,a);for(l=0;l<f.length;l+=2){var m=f[l],k=f[l+1];m==="style"?ew(s,k):m==="dangerouslySetInnerHTML"?JC(s,k):m==="children"?$h(s,k):T1(s,m,k,g)}switch(p){case"input":Tx(s,a);break;case"textarea":QC(s,a);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var D=a.value;D!=null?Xo(s,!!a.multiple,D,!1):T!==!!a.multiple&&(a.defaultValue!=null?Xo(s,!!a.multiple,a.defaultValue,!0):Xo(s,!!a.multiple,a.multiple?[]:"",!1))}s[Jh]=a}catch(L){Pi(t,t.return,L)}}break;case 6:if(Ss(e,t),Ys(t),n&4){if(t.stateNode===null)throw Error(je(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(L){Pi(t,t.return,L)}}break;case 3:if(Ss(e,t),Ys(t),n&4&&i!==null&&i.memoizedState.isDehydrated)try{Uh(e.containerInfo)}catch(L){Pi(t,t.return,L)}break;case 4:Ss(e,t),Ys(t);break;case 13:Ss(e,t),Ys(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(r2=Fi())),n&4&&cv(t);break;case 22:if(m=i!==null&&i.memoizedState!==null,t.mode&1?(Cn=(g=Cn)||m,Ss(e,t),Cn=g):Ss(e,t),Ys(t),n&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!m&&t.mode&1)for(st=t,m=t.child;m!==null;){for(k=st=m;st!==null;){switch(T=st,D=T.child,T.tag){case 0:case 11:case 14:case 15:Ah(4,T,T.return);break;case 1:jo(T,T.return);var P=T.stateNode;if(typeof P.componentWillUnmount=="function"){n=T,i=T.return;try{e=n,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(L){Pi(n,i,L)}}break;case 5:jo(T,T.return);break;case 22:if(T.memoizedState!==null){dv(k);continue}}D!==null?(D.return=T,st=D):dv(k)}m=m.sibling}e:for(m=null,k=t;;){if(k.tag===5){if(m===null){m=k;try{s=k.stateNode,g?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(p=k.stateNode,f=k.memoizedProps.style,l=f!=null&&f.hasOwnProperty("display")?f.display:null,p.style.display=qC("display",l))}catch(L){Pi(t,t.return,L)}}}else if(k.tag===6){if(m===null)try{k.stateNode.nodeValue=g?"":k.memoizedProps}catch(L){Pi(t,t.return,L)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===t)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===t)break e;for(;k.sibling===null;){if(k.return===null||k.return===t)break e;m===k&&(m=null),k=k.return}m===k&&(m=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Ss(e,t),Ys(t),n&4&&cv(t);break;case 21:break;default:Ss(e,t),Ys(t)}}function Ys(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(k4(i)){var n=i;break e}i=i.return}throw Error(je(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&($h(s,""),n.flags&=-33);var a=hv(t);om(t,a,s);break;case 3:case 4:var l=n.stateNode.containerInfo,p=hv(t);am(t,p,l);break;default:throw Error(je(161))}}catch(f){Pi(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Z6(t,e,i){st=t,P4(t)}function P4(t,e,i){for(var n=(t.mode&1)!==0;st!==null;){var s=st,a=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||yu;if(!l){var p=s.alternate,f=p!==null&&p.memoizedState!==null||Cn;p=yu;var g=Cn;if(yu=l,(Cn=f)&&!g)for(st=s;st!==null;)l=st,f=l.child,l.tag===22&&l.memoizedState!==null?pv(s):f!==null?(f.return=l,st=f):pv(s);for(;a!==null;)st=a,P4(a),a=a.sibling;st=s,yu=p,Cn=g}uv(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,st=a):uv(t)}}function uv(t){for(;st!==null;){var e=st;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||T0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Cn)if(i===null)n.componentDidMount();else{var s=e.elementType===e.type?i.memoizedProps:Ts(e.type,i.memoizedProps);n.componentDidUpdate(s,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Ky(e,a,n);break;case 3:var l=e.updateQueue;if(l!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}Ky(e,l,i)}break;case 5:var p=e.stateNode;if(i===null&&e.flags&4){i=p;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&i.focus();break;case"img":f.src&&(i.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var m=g.memoizedState;if(m!==null){var k=m.dehydrated;k!==null&&Uh(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}Cn||e.flags&512&&rm(e)}catch(T){Pi(e,e.return,T)}}if(e===t){st=null;break}if(i=e.sibling,i!==null){i.return=e.return,st=i;break}st=e.return}}function dv(t){for(;st!==null;){var e=st;if(e===t){st=null;break}var i=e.sibling;if(i!==null){i.return=e.return,st=i;break}st=e.return}}function pv(t){for(;st!==null;){var e=st;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{T0(4,e)}catch(f){Pi(e,i,f)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(f){Pi(e,s,f)}}var a=e.return;try{rm(e)}catch(f){Pi(e,a,f)}break;case 5:var l=e.return;try{rm(e)}catch(f){Pi(e,l,f)}}}catch(f){Pi(e,e.return,f)}if(e===t){st=null;break}var p=e.sibling;if(p!==null){p.return=e.return,st=p;break}st=e.return}}var J6=Math.ceil,Ed=Fr.ReactCurrentDispatcher,n2=Fr.ReactCurrentOwner,ys=Fr.ReactCurrentBatchConfig,Yt=0,an=null,Wi=null,fn=0,qn=0,Wo=fa(0),Yi=0,sc=null,Za=0,M0=0,s2=0,Dh=null,Wn=null,r2=0,cl=1/0,cr=null,Ad=!1,lm=null,Zr=null,vu=!1,$r=null,Dd=0,Ih=0,hm=null,Hu=-1,Yu=0;function Fn(){return Yt&6?Fi():Hu!==-1?Hu:Hu=Fi()}function Jr(t){return t.mode&1?Yt&2&&fn!==0?fn&-fn:L6.transition!==null?(Yu===0&&(Yu=dw()),Yu):(t=qt,t!==0||(t=window.event,t=t===void 0?16:vw(t.type)),t):1}function Bs(t,e,i,n){if(50<Ih)throw Ih=0,hm=null,Error(je(185));Mc(t,i,n),(!(Yt&2)||t!==an)&&(t===an&&(!(Yt&2)&&(M0|=i),Yi===4&&Wr(t,fn)),Gn(t,n),i===1&&Yt===0&&!(e.mode&1)&&(cl=Fi()+500,w0&&xa()))}function Gn(t,e){var i=t.callbackNode;LM(t,e);var n=fd(t,t===an?fn:0);if(n===0)i!==null&&Cy(i),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(i!=null&&Cy(i),e===1)t.tag===0?B6(fv.bind(null,t)):Vw(fv.bind(null,t)),A6(function(){!(Yt&6)&&xa()}),i=null;else{switch(pw(n)){case 1:i=D1;break;case 4:i=cw;break;case 16:i=pd;break;case 536870912:i=uw;break;default:i=pd}i=N4(i,E4.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function E4(t,e){if(Hu=-1,Yu=0,Yt&6)throw Error(je(327));var i=t.callbackNode;if(Zo()&&t.callbackNode!==i)return null;var n=fd(t,t===an?fn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Id(t,n);else{e=n;var s=Yt;Yt|=2;var a=D4();(an!==t||fn!==e)&&(cr=null,cl=Fi()+500,za(t,e));do try{t8();break}catch(p){A4(t,p)}while(!0);H1(),Ed.current=a,Yt=s,Wi!==null?e=0:(an=null,fn=0,e=Yi)}if(e!==0){if(e===2&&(s=Nx(t),s!==0&&(n=s,e=cm(t,s))),e===1)throw i=sc,za(t,0),Wr(t,n),Gn(t,Fi()),i;if(e===6)Wr(t,n);else{if(s=t.current.alternate,!(n&30)&&!q6(s)&&(e=Id(t,n),e===2&&(a=Nx(t),a!==0&&(n=a,e=cm(t,a))),e===1))throw i=sc,za(t,0),Wr(t,n),Gn(t,Fi()),i;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(je(345));case 2:Pa(t,Wn,cr);break;case 3:if(Wr(t,n),(n&130023424)===n&&(e=r2+500-Fi(),10<e)){if(fd(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Fn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Hx(Pa.bind(null,t,Wn,cr),e);break}Pa(t,Wn,cr);break;case 4:if(Wr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var l=31-Fs(n);a=1<<l,l=e[l],l>s&&(s=l),n&=~a}if(n=s,n=Fi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*J6(n/1960))-n,10<n){t.timeoutHandle=Hx(Pa.bind(null,t,Wn,cr),n);break}Pa(t,Wn,cr);break;case 5:Pa(t,Wn,cr);break;default:throw Error(je(329))}}}return Gn(t,Fi()),t.callbackNode===i?E4.bind(null,t):null}function cm(t,e){var i=Dh;return t.current.memoizedState.isDehydrated&&(za(t,e).flags|=256),t=Id(t,e),t!==2&&(e=Wn,Wn=i,e!==null&&um(e)),t}function um(t){Wn===null?Wn=t:Wn.push.apply(Wn,t)}function q6(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var n=0;n<i.length;n++){var s=i[n],a=s.getSnapshot;s=s.value;try{if(!Os(a(),s))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wr(t,e){for(e&=~s2,e&=~M0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-Fs(e),n=1<<i;t[i]=-1,e&=~n}}function fv(t){if(Yt&6)throw Error(je(327));Zo();var e=fd(t,0);if(!(e&1))return Gn(t,Fi()),null;var i=Id(t,e);if(t.tag!==0&&i===2){var n=Nx(t);n!==0&&(e=n,i=cm(t,n))}if(i===1)throw i=sc,za(t,0),Wr(t,e),Gn(t,Fi()),i;if(i===6)throw Error(je(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pa(t,Wn,cr),Gn(t,Fi()),null}function a2(t,e){var i=Yt;Yt|=1;try{return t(e)}finally{Yt=i,Yt===0&&(cl=Fi()+500,w0&&xa())}}function Ja(t){$r!==null&&$r.tag===0&&!(Yt&6)&&Zo();var e=Yt;Yt|=1;var i=ys.transition,n=qt;try{if(ys.transition=null,qt=1,t)return t()}finally{qt=n,ys.transition=i,Yt=e,!(Yt&6)&&xa()}}function o2(){qn=Wo.current,fi(Wo)}function za(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,E6(i)),Wi!==null)for(i=Wi.return;i!==null;){var n=i;switch(W1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&vd();break;case 3:ll(),fi(Xn),fi(An),Q1();break;case 5:K1(n);break;case 4:ll();break;case 13:fi(Ci);break;case 19:fi(Ci);break;case 10:Y1(n.type._context);break;case 22:case 23:o2()}i=i.return}if(an=t,Wi=t=qr(t.current,null),fn=qn=e,Yi=0,sc=null,s2=M0=Za=0,Wn=Dh=null,Ba!==null){for(e=0;e<Ba.length;e++)if(i=Ba[e],n=i.interleaved,n!==null){i.interleaved=null;var s=n.next,a=i.pending;if(a!==null){var l=a.next;a.next=s,n.next=l}i.pending=n}Ba=null}return t}function A4(t,e){do{var i=Wi;try{if(H1(),Wu.current=Pd,Md){for(var n=wi.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Md=!1}if(Qa=0,tn=Hi=wi=null,Eh=!1,tc=0,n2.current=null,i===null||i.return===null){Yi=1,sc=e,Wi=null;break}e:{var a=t,l=i.return,p=i,f=e;if(e=fn,p.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var g=f,m=p,k=m.tag;if(!(m.mode&1)&&(k===0||k===11||k===15)){var T=m.alternate;T?(m.updateQueue=T.updateQueue,m.memoizedState=T.memoizedState,m.lanes=T.lanes):(m.updateQueue=null,m.memoizedState=null)}var D=tv(l);if(D!==null){D.flags&=-257,iv(D,l,p,a,e),D.mode&1&&ev(a,g,e),e=D,f=g;var P=e.updateQueue;if(P===null){var L=new Set;L.add(f),e.updateQueue=L}else P.add(f);break e}else{if(!(e&1)){ev(a,g,e),l2();break e}f=Error(je(426))}}else if(yi&&p.mode&1){var $=tv(l);if($!==null){!($.flags&65536)&&($.flags|=256),iv($,l,p,a,e),z1(hl(f,p));break e}}a=f=hl(f,p),Yi!==4&&(Yi=2),Dh===null?Dh=[a]:Dh.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var N=p4(a,f,e);Gy(a,N);break e;case 1:p=f;var E=a.type,B=a.stateNode;if(!(a.flags&128)&&(typeof E.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Zr===null||!Zr.has(B)))){a.flags|=65536,e&=-e,a.lanes|=e;var H=f4(a,p,e);Gy(a,H);break e}}a=a.return}while(a!==null)}F4(i)}catch(U){e=U,Wi===i&&i!==null&&(Wi=i=i.return);continue}break}while(!0)}function D4(){var t=Ed.current;return Ed.current=Pd,t===null?Pd:t}function l2(){(Yi===0||Yi===3||Yi===2)&&(Yi=4),an===null||!(Za&268435455)&&!(M0&268435455)||Wr(an,fn)}function Id(t,e){var i=Yt;Yt|=2;var n=D4();(an!==t||fn!==e)&&(cr=null,za(t,e));do try{e8();break}catch(s){A4(t,s)}while(!0);if(H1(),Yt=i,Ed.current=n,Wi!==null)throw Error(je(261));return an=null,fn=0,Yi}function e8(){for(;Wi!==null;)I4(Wi)}function t8(){for(;Wi!==null&&!TM();)I4(Wi)}function I4(t){var e=L4(t.alternate,t,qn);t.memoizedProps=t.pendingProps,e===null?F4(t):Wi=e,n2.current=null}function F4(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&32768){if(i=G6(i,e),i!==null){i.flags&=32767,Wi=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yi=6,Wi=null;return}}else if(i=U6(i,e,qn),i!==null){Wi=i;return}if(e=e.sibling,e!==null){Wi=e;return}Wi=e=t}while(e!==null);Yi===0&&(Yi=5)}function Pa(t,e,i){var n=qt,s=ys.transition;try{ys.transition=null,qt=1,i8(t,e,i,n)}finally{ys.transition=s,qt=n}return null}function i8(t,e,i,n){do Zo();while($r!==null);if(Yt&6)throw Error(je(327));i=t.finishedWork;var s=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(je(177));t.callbackNode=null,t.callbackPriority=0;var a=i.lanes|i.childLanes;if(NM(t,a),t===an&&(Wi=an=null,fn=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||vu||(vu=!0,N4(pd,function(){return Zo(),null})),a=(i.flags&15990)!==0,i.subtreeFlags&15990||a){a=ys.transition,ys.transition=null;var l=qt;qt=1;var p=Yt;Yt|=4,n2.current=null,Q6(t,i),M4(i,t),C6(zx),xd=!!Wx,zx=Wx=null,t.current=i,Z6(i),MM(),Yt=p,qt=l,ys.transition=a}else t.current=i;if(vu&&(vu=!1,$r=t,Dd=s),a=t.pendingLanes,a===0&&(Zr=null),AM(i.stateNode),Gn(t,Fi()),e!==null)for(n=t.onRecoverableError,i=0;i<e.length;i++)s=e[i],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ad)throw Ad=!1,t=lm,lm=null,t;return Dd&1&&t.tag!==0&&Zo(),a=t.pendingLanes,a&1?t===hm?Ih++:(Ih=0,hm=t):Ih=0,xa(),null}function Zo(){if($r!==null){var t=pw(Dd),e=ys.transition,i=qt;try{if(ys.transition=null,qt=16>t?16:t,$r===null)var n=!1;else{if(t=$r,$r=null,Dd=0,Yt&6)throw Error(je(331));var s=Yt;for(Yt|=4,st=t.current;st!==null;){var a=st,l=a.child;if(st.flags&16){var p=a.deletions;if(p!==null){for(var f=0;f<p.length;f++){var g=p[f];for(st=g;st!==null;){var m=st;switch(m.tag){case 0:case 11:case 15:Ah(8,m,a)}var k=m.child;if(k!==null)k.return=m,st=k;else for(;st!==null;){m=st;var T=m.sibling,D=m.return;if(S4(m),m===g){st=null;break}if(T!==null){T.return=D,st=T;break}st=D}}}var P=a.alternate;if(P!==null){var L=P.child;if(L!==null){P.child=null;do{var $=L.sibling;L.sibling=null,L=$}while(L!==null)}}st=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,st=l;else e:for(;st!==null;){if(a=st,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ah(9,a,a.return)}var N=a.sibling;if(N!==null){N.return=a.return,st=N;break e}st=a.return}}var E=t.current;for(st=E;st!==null;){l=st;var B=l.child;if(l.subtreeFlags&2064&&B!==null)B.return=l,st=B;else e:for(l=E;st!==null;){if(p=st,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:T0(9,p)}}catch(U){Pi(p,p.return,U)}if(p===l){st=null;break e}var H=p.sibling;if(H!==null){H.return=p.return,st=H;break e}st=p.return}}if(Yt=s,xa(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(y0,t)}catch{}n=!0}return n}finally{qt=i,ys.transition=e}}return!1}function xv(t,e,i){e=hl(i,e),e=p4(t,e,1),t=Qr(t,e,1),e=Fn(),t!==null&&(Mc(t,1,e),Gn(t,e))}function Pi(t,e,i){if(t.tag===3)xv(t,t,i);else for(;e!==null;){if(e.tag===3){xv(e,t,i);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zr===null||!Zr.has(n))){t=hl(i,t),t=f4(e,t,1),e=Qr(e,t,1),t=Fn(),e!==null&&(Mc(e,1,t),Gn(e,t));break}}e=e.return}}function n8(t,e,i){var n=t.pingCache;n!==null&&n.delete(e),e=Fn(),t.pingedLanes|=t.suspendedLanes&i,an===t&&(fn&i)===i&&(Yi===4||Yi===3&&(fn&130023424)===fn&&500>Fi()-r2?za(t,0):s2|=i),Gn(t,e)}function B4(t,e){e===0&&(t.mode&1?(e=hu,hu<<=1,!(hu&130023424)&&(hu=4194304)):e=1);var i=Fn();t=kr(t,e),t!==null&&(Mc(t,e,i),Gn(t,i))}function s8(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),B4(t,i)}function r8(t,e){var i=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(i=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(je(314))}n!==null&&n.delete(e),B4(t,i)}var L4;L4=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xn.current)$n=!0;else{if(!(t.lanes&i)&&!(e.flags&128))return $n=!1,X6(t,e,i);$n=!!(t.flags&131072)}else $n=!1,yi&&e.flags&1048576&&Ow(e,Cd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;$u(t,e),t=e.pendingProps;var s=rl(e,An.current);Qo(e,i),s=J1(null,e,n,t,s,i);var a=q1();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Un(n)?(a=!0,bd(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,U1(e),s.updater=k0,e.stateNode=s,s._reactInternals=e,Zx(e,n,t,i),e=em(null,e,n,!0,a,i)):(e.tag=0,yi&&a&&j1(e),Dn(null,e,s,i),e=e.child),e;case 16:n=e.elementType;e:{switch($u(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=o8(n),t=Ts(n,t),s){case 0:e=qx(null,e,n,t,i);break e;case 1:e=rv(null,e,n,t,i);break e;case 11:e=nv(null,e,n,t,i);break e;case 14:e=sv(null,e,n,Ts(n.type,t),i);break e}throw Error(je(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ts(n,s),qx(t,e,n,s,i);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ts(n,s),rv(t,e,n,s,i);case 3:e:{if(y4(e),t===null)throw Error(je(387));n=e.pendingProps,a=e.memoizedState,s=a.element,Yw(t,e),kd(e,n,null,i);var l=e.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=hl(Error(je(423)),e),e=av(t,e,n,i,s);break e}else if(n!==s){s=hl(Error(je(424)),e),e=av(t,e,n,i,s);break e}else for(ts=Kr(e.stateNode.containerInfo.firstChild),ns=e,yi=!0,Es=null,i=$w(e,null,n,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(al(),n===s){e=Tr(t,e,i);break e}Dn(t,e,n,i)}e=e.child}return e;case 5:return Xw(e),t===null&&Gx(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,l=s.children,$x(n,s)?l=null:a!==null&&$x(n,a)&&(e.flags|=32),g4(t,e),Dn(t,e,l,i),e.child;case 6:return t===null&&Gx(e),null;case 13:return v4(t,e,i);case 4:return G1(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ol(e,null,n,i):Dn(t,e,n,i),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ts(n,s),nv(t,e,n,s,i);case 7:return Dn(t,e,e.pendingProps,i),e.child;case 8:return Dn(t,e,e.pendingProps.children,i),e.child;case 12:return Dn(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,l=s.value,oi(wd,n._currentValue),n._currentValue=l,a!==null)if(Os(a.value,l)){if(a.children===s.children&&!Xn.current){e=Tr(t,e,i);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var p=a.dependencies;if(p!==null){l=a.child;for(var f=p.firstContext;f!==null;){if(f.context===n){if(a.tag===1){f=yr(-1,i&-i),f.tag=2;var g=a.updateQueue;if(g!==null){g=g.shared;var m=g.pending;m===null?f.next=f:(f.next=m.next,m.next=f),g.pending=f}}a.lanes|=i,f=a.alternate,f!==null&&(f.lanes|=i),Kx(a.return,i,e),p.lanes|=i;break}f=f.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(je(341));l.lanes|=i,p=l.alternate,p!==null&&(p.lanes|=i),Kx(l,i,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Dn(t,e,s.children,i),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Qo(e,i),s=vs(s),n=n(s),e.flags|=1,Dn(t,e,n,i),e.child;case 14:return n=e.type,s=Ts(n,e.pendingProps),s=Ts(n.type,s),sv(t,e,n,s,i);case 15:return x4(t,e,e.type,e.pendingProps,i);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ts(n,s),$u(t,e),e.tag=1,Un(n)?(t=!0,bd(e)):t=!1,Qo(e,i),d4(e,n,s),Zx(e,n,s,i),em(null,e,n,!0,t,i);case 19:return b4(t,e,i);case 22:return m4(t,e,i)}throw Error(je(156,e.tag))};function N4(t,e){return hw(t,e)}function a8(t,e,i,n){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(t,e,i,n){return new a8(t,e,i,n)}function h2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function o8(t){if(typeof t=="function")return h2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===P1)return 11;if(t===E1)return 14}return 2}function qr(t,e){var i=t.alternate;return i===null?(i=ms(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Xu(t,e,i,n,s,a){var l=2;if(n=t,typeof t=="function")h2(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Do:return $a(i.children,s,a,e);case M1:l=8,s|=8;break;case _x:return t=ms(12,i,e,s|2),t.elementType=_x,t.lanes=a,t;case Cx:return t=ms(13,i,e,s),t.elementType=Cx,t.lanes=a,t;case wx:return t=ms(19,i,e,s),t.elementType=wx,t.lanes=a,t;case XC:return P0(i,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HC:l=10;break e;case YC:l=9;break e;case P1:l=11;break e;case E1:l=14;break e;case Vr:l=16,n=null;break e}throw Error(je(130,t==null?t:typeof t,""))}return e=ms(l,i,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function $a(t,e,i,n){return t=ms(7,t,n,e),t.lanes=i,t}function P0(t,e,i,n){return t=ms(22,t,n,e),t.elementType=XC,t.lanes=i,t.stateNode={isHidden:!1},t}function sf(t,e,i){return t=ms(6,t,null,e),t.lanes=i,t}function rf(t,e,i){return e=ms(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function l8(t,e,i,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vp(0),this.expirationTimes=Vp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function c2(t,e,i,n,s,a,l,p,f){return t=new l8(t,e,i,p,f),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ms(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},U1(a),t}function h8(t,e,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ao,key:n==null?null:""+n,children:t,containerInfo:e,implementation:i}}function R4(t){if(!t)return oa;t=t._reactInternals;e:{if(lo(t)!==t||t.tag!==1)throw Error(je(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(je(171))}if(t.tag===1){var i=t.type;if(Un(i))return Rw(t,i,e)}return e}function V4(t,e,i,n,s,a,l,p,f){return t=c2(i,n,!0,t,s,a,l,p,f),t.context=R4(null),i=t.current,n=Fn(),s=Jr(i),a=yr(n,s),a.callback=e??null,Qr(i,a,s),t.current.lanes=s,Mc(t,s,n),Gn(t,n),t}function E0(t,e,i,n){var s=e.current,a=Fn(),l=Jr(s);return i=R4(i),e.context===null?e.context=i:e.pendingContext=i,e=yr(a,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Qr(s,e,l),t!==null&&(Bs(t,s,l,a),ju(t,s,l)),l}function Fd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function u2(t,e){mv(t,e),(t=t.alternate)&&mv(t,e)}function c8(){return null}var O4=typeof reportError=="function"?reportError:function(t){console.error(t)};function d2(t){this._internalRoot=t}A0.prototype.render=d2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(je(409));E0(t,e,null,null)};A0.prototype.unmount=d2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ja(function(){E0(null,t,null,null)}),e[Sr]=null}};function A0(t){this._internalRoot=t}A0.prototype.unstable_scheduleHydration=function(t){if(t){var e=mw();t={blockedOn:null,target:t,priority:e};for(var i=0;i<jr.length&&e!==0&&e<jr[i].priority;i++);jr.splice(i,0,t),i===0&&yw(t)}};function p2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function D0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gv(){}function u8(t,e,i,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var g=Fd(l);a.call(g)}}var l=V4(e,n,t,0,null,!1,!1,"",gv);return t._reactRootContainer=l,t[Sr]=l.current,Qh(t.nodeType===8?t.parentNode:t),Ja(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var p=n;n=function(){var g=Fd(f);p.call(g)}}var f=c2(t,0,!1,null,null,!1,!1,"",gv);return t._reactRootContainer=f,t[Sr]=f.current,Qh(t.nodeType===8?t.parentNode:t),Ja(function(){E0(e,f,i,n)}),f}function I0(t,e,i,n,s){var a=i._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var p=s;s=function(){var f=Fd(l);p.call(f)}}E0(e,l,t,s)}else l=u8(i,e,t,s,n);return Fd(l)}fw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=xh(e.pendingLanes);i!==0&&(I1(e,i|1),Gn(e,Fi()),!(Yt&6)&&(cl=Fi()+500,xa()))}break;case 13:Ja(function(){var n=kr(t,1);if(n!==null){var s=Fn();Bs(n,t,1,s)}}),u2(t,1)}};F1=function(t){if(t.tag===13){var e=kr(t,134217728);if(e!==null){var i=Fn();Bs(e,t,134217728,i)}u2(t,134217728)}};xw=function(t){if(t.tag===13){var e=Jr(t),i=kr(t,e);if(i!==null){var n=Fn();Bs(i,t,e,n)}u2(t,e)}};mw=function(){return qt};gw=function(t,e){var i=qt;try{return qt=t,e()}finally{qt=i}};Fx=function(t,e,i){switch(e){case"input":if(Tx(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var n=i[e];if(n!==t&&n.form===t.form){var s=C0(n);if(!s)throw Error(je(90));GC(n),Tx(n,s)}}}break;case"textarea":QC(t,i);break;case"select":e=i.value,e!=null&&Xo(t,!!i.multiple,e,!1)}};nw=a2;sw=Ja;var d8={usingClientEntryPoint:!1,Events:[Ec,Lo,C0,tw,iw,a2]},nh={findFiberByHostInstance:Fa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p8={bundleType:nh.bundleType,version:nh.version,rendererPackageName:nh.rendererPackageName,rendererConfig:nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ow(t),t===null?null:t.stateNode},findFiberByHostInstance:nh.findFiberByHostInstance||c8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{y0=bu.inject(p8),er=bu}catch{}}cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d8;cs.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p2(e))throw Error(je(200));return h8(t,e,null,i)};cs.createRoot=function(t,e){if(!p2(t))throw Error(je(299));var i=!1,n="",s=O4;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=c2(t,1,!1,null,null,i,!1,n,s),t[Sr]=e.current,Qh(t.nodeType===8?t.parentNode:t),new d2(e)};cs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(je(188)):(t=Object.keys(t).join(","),Error(je(268,t)));return t=ow(e),t=t===null?null:t.stateNode,t};cs.flushSync=function(t){return Ja(t)};cs.hydrate=function(t,e,i){if(!D0(e))throw Error(je(200));return I0(null,t,e,!0,i)};cs.hydrateRoot=function(t,e,i){if(!p2(t))throw Error(je(405));var n=i!=null&&i.hydratedSources||null,s=!1,a="",l=O4;if(i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onRecoverableError!==void 0&&(l=i.onRecoverableError)),e=V4(e,null,t,1,i??null,s,!1,a,l),t[Sr]=e.current,Qh(t),n)for(t=0;t<n.length;t++)i=n[t],s=i._getVersion,s=s(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,s]:e.mutableSourceEagerHydrationData.push(i,s);return new A0(e)};cs.render=function(t,e,i){if(!D0(e))throw Error(je(200));return I0(null,t,e,!1,i)};cs.unmountComponentAtNode=function(t){if(!D0(t))throw Error(je(40));return t._reactRootContainer?(Ja(function(){I0(null,null,t,!1,function(){t._reactRootContainer=null,t[Sr]=null})}),!0):!1};cs.unstable_batchedUpdates=a2;cs.unstable_renderSubtreeIntoContainer=function(t,e,i,n){if(!D0(i))throw Error(je(200));if(t==null||t._reactInternals===void 0)throw Error(je(38));return I0(t,e,i,!1,n)};cs.version="18.3.1-next-f1338f8080-20240426";function j4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j4)}catch(t){console.error(t)}}j4(),jC.exports=cs;var f2=jC.exports;const f8=v1(f2),x8=PC({__proto__:null,default:f8},[f2]);var W4,yv=f2;W4=yv.createRoot,yv.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gi(){return gi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},gi.apply(this,arguments)}var Vi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Vi||(Vi={}));const vv="popstate";function m8(t){t===void 0&&(t={});function e(n,s){let{pathname:a,search:l,hash:p}=n.location;return rc("",{pathname:a,search:l,hash:p},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function i(n,s){return typeof s=="string"?s:qa(s)}return y8(e,i,null,t)}function Bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ul(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function g8(){return Math.random().toString(36).substr(2,8)}function bv(t,e){return{usr:t.state,key:t.key,idx:e}}function rc(t,e,i,n){return i===void 0&&(i=null),gi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ma(e):e,{state:i,key:e&&e.key||n||g8()})}function qa(t){let{pathname:e="/",search:i="",hash:n=""}=t;return i&&i!=="?"&&(e+=i.charAt(0)==="?"?i:"?"+i),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ma(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substr(i),t=t.substr(0,i));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function y8(t,e,i,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,p=Vi.Pop,f=null,g=m();g==null&&(g=0,l.replaceState(gi({},l.state,{idx:g}),""));function m(){return(l.state||{idx:null}).idx}function k(){p=Vi.Pop;let $=m(),N=$==null?null:$-g;g=$,f&&f({action:p,location:L.location,delta:N})}function T($,N){p=Vi.Push;let E=rc(L.location,$,N);g=m()+1;let B=bv(E,g),H=L.createHref(E);try{l.pushState(B,"",H)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(H)}a&&f&&f({action:p,location:L.location,delta:1})}function D($,N){p=Vi.Replace;let E=rc(L.location,$,N);g=m();let B=bv(E,g),H=L.createHref(E);l.replaceState(B,"",H),a&&f&&f({action:p,location:L.location,delta:0})}function P($){let N=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof $=="string"?$:qa($);return E=E.replace(/ $/,"%20"),Bt(N,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,N)}let L={get action(){return p},get location(){return t(s,l)},listen($){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(vv,k),f=$,()=>{s.removeEventListener(vv,k),f=null}},createHref($){return e(s,$)},createURL:P,encodeLocation($){let N=P($);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:T,replace:D,go($){return l.go($)}};return L}var ni;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ni||(ni={}));const v8=new Set(["lazy","caseSensitive","path","id","index","children"]);function b8(t){return t.index===!0}function Bd(t,e,i,n){return i===void 0&&(i=[]),n===void 0&&(n={}),t.map((s,a)=>{let l=[...i,String(a)],p=typeof s.id=="string"?s.id:l.join("-");if(Bt(s.index!==!0||!s.children,"Cannot specify children on an index route"),Bt(!n[p],'Found a route id collision on id "'+p+`".  Route id's must be globally unique within Data Router usages`),b8(s)){let f=gi({},s,e(s),{id:p});return n[p]=f,f}else{let f=gi({},s,e(s),{id:p,children:void 0});return n[p]=f,s.children&&(f.children=Bd(s.children,e,l,n)),f}})}function Da(t,e,i){return i===void 0&&(i="/"),Uu(t,e,i,!1)}function Uu(t,e,i,n){let s=typeof e=="string"?ma(e):e,a=Mr(s.pathname||"/",i);if(a==null)return null;let l=z4(t);C8(l);let p=null;for(let f=0;p==null&&f<l.length;++f){let g=F8(a);p=D8(l[f],g,n)}return p}function _8(t,e){let{route:i,pathname:n,params:s}=t;return{id:i.id,pathname:n,params:s,data:e[i.id],handle:i.handle}}function z4(t,e,i,n){e===void 0&&(e=[]),i===void 0&&(i=[]),n===void 0&&(n="");let s=(a,l,p)=>{let f={relativePath:p===void 0?a.path||"":p,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(Bt(f.relativePath.startsWith(n),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(n.length));let g=vr([n,f.relativePath]),m=i.concat(f);a.children&&a.children.length>0&&(Bt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),z4(a.children,e,m,g)),!(a.path==null&&!a.index)&&e.push({path:g,score:E8(g,a.index),routesMeta:m})};return t.forEach((a,l)=>{var p;if(a.path===""||!((p=a.path)!=null&&p.includes("?")))s(a,l);else for(let f of $4(a.path))s(a,l,f)}),e}function $4(t){let e=t.split("/");if(e.length===0)return[];let[i,...n]=e,s=i.endsWith("?"),a=i.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=$4(n.join("/")),p=[];return p.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&p.push(...l),p.map(f=>t.startsWith("/")&&f===""?"/":f)}function C8(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:A8(e.routesMeta.map(n=>n.childrenIndex),i.routesMeta.map(n=>n.childrenIndex)))}const w8=/^:[\w-]+$/,S8=3,k8=2,T8=1,M8=10,P8=-2,_v=t=>t==="*";function E8(t,e){let i=t.split("/"),n=i.length;return i.some(_v)&&(n+=P8),e&&(n+=k8),i.filter(s=>!_v(s)).reduce((s,a)=>s+(w8.test(a)?S8:a===""?T8:M8),n)}function A8(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function D8(t,e,i){i===void 0&&(i=!1);let{routesMeta:n}=t,s={},a="/",l=[];for(let p=0;p<n.length;++p){let f=n[p],g=p===n.length-1,m=a==="/"?e:e.slice(a.length)||"/",k=Ld({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},m),T=f.route;if(!k&&g&&i&&!n[n.length-1].route.index&&(k=Ld({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!k)return null;Object.assign(s,k.params),l.push({params:s,pathname:vr([a,k.pathname]),pathnameBase:N8(vr([a,k.pathnameBase])),route:T}),k.pathnameBase!=="/"&&(a=vr([a,k.pathnameBase]))}return l}function Ld(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,n]=I8(t.path,t.caseSensitive,t.end),s=e.match(i);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),p=s.slice(1);return{params:n.reduce((g,m,k)=>{let{paramName:T,isOptional:D}=m;if(T==="*"){let L=p[k]||"";l=a.slice(0,a.length-L.length).replace(/(.)\/+$/,"$1")}const P=p[k];return D&&!P?g[T]=void 0:g[T]=(P||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:l,pattern:t}}function I8(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!0),ul(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,p,f)=>(n.push({paramName:p,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function F8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ul(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Mr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,n=t.charAt(i);return n&&n!=="/"?null:t.slice(i)||"/"}function B8(t,e){e===void 0&&(e="/");let{pathname:i,search:n="",hash:s=""}=typeof t=="string"?ma(t):t;return{pathname:i?i.startsWith("/")?i:L8(i,e):e,search:R8(n),hash:V8(s)}}function L8(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function af(t,e,i,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function H4(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function x2(t,e){let i=H4(t);return e?i.map((n,s)=>s===i.length-1?n.pathname:n.pathnameBase):i.map(n=>n.pathnameBase)}function m2(t,e,i,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=ma(t):(s=gi({},t),Bt(!s.pathname||!s.pathname.includes("?"),af("?","pathname","search",s)),Bt(!s.pathname||!s.pathname.includes("#"),af("#","pathname","hash",s)),Bt(!s.search||!s.search.includes("#"),af("#","search","hash",s)));let a=t===""||s.pathname==="",l=a?"/":s.pathname,p;if(l==null)p=i;else{let k=e.length-1;if(!n&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),k-=1;s.pathname=T.join("/")}p=k>=0?e[k]:"/"}let f=B8(s,p),g=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&i.endsWith("/");return!f.pathname.endsWith("/")&&(g||m)&&(f.pathname+="/"),f}const vr=t=>t.join("/").replace(/\/\/+/g,"/"),N8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,V8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Nd{constructor(e,i,n,s){s===void 0&&(s=!1),this.status=e,this.statusText=i||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function F0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Y4=["post","put","patch","delete"],O8=new Set(Y4),j8=["get",...Y4],W8=new Set(j8),z8=new Set([301,302,303,307,308]),$8=new Set([307,308]),of={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},H8={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},g2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y8=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),X4="remix-router-transitions";function X8(t){const e=t.window?t.window:typeof window<"u"?window:void 0,i=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",n=!i;Bt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let se=t.detectErrorBoundary;s=pe=>({hasErrorBoundary:se(pe)})}else s=Y8;let a={},l=Bd(t.routes,s,void 0,a),p,f=t.basename||"/",g=t.dataStrategy||Q8,m=t.patchRoutesOnNavigation,k=gi({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),T=null,D=new Set,P=null,L=null,$=null,N=t.hydrationData!=null,E=Da(l,t.history.location,f),B=null;if(E==null&&!m){let se=jn(404,{pathname:t.history.location.pathname}),{matches:pe,route:ge}=Iv(l);E=pe,B={[ge.id]:se}}E&&!t.hydrationData&&at(E,l,t.history.location.pathname).active&&(E=null);let H;if(E)if(E.some(se=>se.route.lazy))H=!1;else if(!E.some(se=>se.route.loader))H=!0;else if(k.v7_partialHydration){let se=t.hydrationData?t.hydrationData.loaderData:null,pe=t.hydrationData?t.hydrationData.errors:null;if(pe){let ge=E.findIndex(xe=>pe[xe.route.id]!==void 0);H=E.slice(0,ge+1).every(xe=>!pm(xe.route,se,pe))}else H=E.every(ge=>!pm(ge.route,se,pe))}else H=t.hydrationData!=null;else if(H=!1,E=[],k.v7_partialHydration){let se=at(null,l,t.history.location.pathname);se.active&&se.matches&&(E=se.matches)}let U,j={historyAction:t.history.action,location:t.history.location,matches:E,initialized:H,navigation:of,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||B,fetchers:new Map,blockers:new Map},G=Vi.Pop,Z=!1,he,ee=!1,re=new Map,we=null,de=!1,Re=!1,He=[],Ze=new Set,et=new Map,Pe=0,Le=-1,Be=new Map,X=new Set,_e=new Map,me=new Map,W=new Set,ae=new Map,fe=new Map,ye;function Se(){if(T=t.history.listen(se=>{let{action:pe,location:ge,delta:xe}=se;if(ye){ye(),ye=void 0;return}ul(fe.size===0||xe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ve=K({currentLocation:j.location,nextLocation:ge,historyAction:pe});if(Ve&&xe!=null){let r=new Promise(d=>{ye=d});t.history.go(xe*-1),O(Ve,{state:"blocked",location:ge,proceed(){O(Ve,{state:"proceeding",proceed:void 0,reset:void 0,location:ge}),r.then(()=>t.history.go(xe))},reset(){let d=new Map(j.blockers);d.set(Ve,sh),nt({blockers:d})}});return}return We(pe,ge)}),i){cP(e,re);let se=()=>uP(e,re);e.addEventListener("pagehide",se),we=()=>e.removeEventListener("pagehide",se)}return j.initialized||We(Vi.Pop,j.location,{initialHydration:!0}),U}function Ee(){T&&T(),we&&we(),D.clear(),he&&he.abort(),j.fetchers.forEach((se,pe)=>ds(pe)),j.blockers.forEach((se,pe)=>F(pe))}function tt(se){return D.add(se),()=>D.delete(se)}function nt(se,pe){pe===void 0&&(pe={}),j=gi({},j,se);let ge=[],xe=[];k.v7_fetcherPersist&&j.fetchers.forEach((Ve,r)=>{Ve.state==="idle"&&(W.has(r)?xe.push(r):ge.push(r))}),[...D].forEach(Ve=>Ve(j,{deletedFetchers:xe,viewTransitionOpts:pe.viewTransitionOpts,flushSync:pe.flushSync===!0})),k.v7_fetcherPersist&&(ge.forEach(Ve=>j.fetchers.delete(Ve)),xe.forEach(Ve=>ds(Ve)))}function xt(se,pe,ge){var xe,Ve;let{flushSync:r}=ge===void 0?{}:ge,d=j.actionData!=null&&j.navigation.formMethod!=null&&Ps(j.navigation.formMethod)&&j.navigation.state==="loading"&&((xe=se.state)==null?void 0:xe._isRedirect)!==!0,h;pe.actionData?Object.keys(pe.actionData).length>0?h=pe.actionData:h=null:d?h=j.actionData:h=null;let o=pe.loaderData?Av(j.loaderData,pe.loaderData,pe.matches||[],pe.errors):j.loaderData,c=j.blockers;c.size>0&&(c=new Map(c),c.forEach((S,M)=>c.set(M,sh)));let x=Z===!0||j.navigation.formMethod!=null&&Ps(j.navigation.formMethod)&&((Ve=se.state)==null?void 0:Ve._isRedirect)!==!0;p&&(l=p,p=void 0),de||G===Vi.Pop||(G===Vi.Push?t.history.push(se,se.state):G===Vi.Replace&&t.history.replace(se,se.state));let y;if(G===Vi.Pop){let S=re.get(j.location.pathname);S&&S.has(se.pathname)?y={currentLocation:j.location,nextLocation:se}:re.has(se.pathname)&&(y={currentLocation:se,nextLocation:j.location})}else if(ee){let S=re.get(j.location.pathname);S?S.add(se.pathname):(S=new Set([se.pathname]),re.set(j.location.pathname,S)),y={currentLocation:j.location,nextLocation:se}}nt(gi({},pe,{actionData:h,loaderData:o,historyAction:G,location:se,initialized:!0,navigation:of,revalidation:"idle",restoreScrollPosition:Tt(se,pe.matches||j.matches),preventScrollReset:x,blockers:c}),{viewTransitionOpts:y,flushSync:r===!0}),G=Vi.Pop,Z=!1,ee=!1,de=!1,Re=!1,He=[]}async function rt(se,pe){if(typeof se=="number"){t.history.go(se);return}let ge=dm(j.location,j.matches,f,k.v7_prependBasename,se,k.v7_relativeSplatPath,pe==null?void 0:pe.fromRouteId,pe==null?void 0:pe.relative),{path:xe,submission:Ve,error:r}=Cv(k.v7_normalizeFormMethod,!1,ge,pe),d=j.location,h=rc(j.location,xe,pe&&pe.state);h=gi({},h,t.history.encodeLocation(h));let o=pe&&pe.replace!=null?pe.replace:void 0,c=Vi.Push;o===!0?c=Vi.Replace:o===!1||Ve!=null&&Ps(Ve.formMethod)&&Ve.formAction===j.location.pathname+j.location.search&&(c=Vi.Replace);let x=pe&&"preventScrollReset"in pe?pe.preventScrollReset===!0:void 0,y=(pe&&pe.flushSync)===!0,S=K({currentLocation:d,nextLocation:h,historyAction:c});if(S){O(S,{state:"blocked",location:h,proceed(){O(S,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),rt(se,pe)},reset(){let M=new Map(j.blockers);M.set(S,sh),nt({blockers:M})}});return}return await We(c,h,{submission:Ve,pendingError:r,preventScrollReset:x,replace:pe&&pe.replace,enableViewTransition:pe&&pe.viewTransition,flushSync:y})}function it(){if(Nt(),nt({revalidation:"loading"}),j.navigation.state!=="submitting"){if(j.navigation.state==="idle"){We(j.historyAction,j.location,{startUninterruptedRevalidation:!0});return}We(G||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation,enableViewTransition:ee===!0})}}async function We(se,pe,ge){he&&he.abort(),he=null,G=se,de=(ge&&ge.startUninterruptedRevalidation)===!0,ut(j.location,j.matches),Z=(ge&&ge.preventScrollReset)===!0,ee=(ge&&ge.enableViewTransition)===!0;let xe=p||l,Ve=ge&&ge.overrideNavigation,r=Da(xe,pe,f),d=(ge&&ge.flushSync)===!0,h=at(r,xe,pe.pathname);if(h.active&&h.matches&&(r=h.matches),!r){let{error:_,notFoundMatches:v,route:b}=Ce(pe.pathname);xt(pe,{matches:v,loaderData:{},errors:{[b.id]:_}},{flushSync:d});return}if(j.initialized&&!Re&&iP(j.location,pe)&&!(ge&&ge.submission&&Ps(ge.submission.formMethod))){xt(pe,{matches:r},{flushSync:d});return}he=new AbortController;let o=_o(t.history,pe,he.signal,ge&&ge.submission),c;if(ge&&ge.pendingError)c=[Ia(r).route.id,{type:ni.error,error:ge.pendingError}];else if(ge&&ge.submission&&Ps(ge.submission.formMethod)){let _=await It(o,pe,ge.submission,r,h.active,{replace:ge.replace,flushSync:d});if(_.shortCircuited)return;if(_.pendingActionResult){let[v,b]=_.pendingActionResult;if(es(b)&&F0(b.error)&&b.error.status===404){he=null,xt(pe,{matches:_.matches,loaderData:{},errors:{[v]:b.error}});return}}r=_.matches||r,c=_.pendingActionResult,Ve=lf(pe,ge.submission),d=!1,h.active=!1,o=_o(t.history,o.url,o.signal)}let{shortCircuited:x,matches:y,loaderData:S,errors:M}=await lt(o,pe,r,h.active,Ve,ge&&ge.submission,ge&&ge.fetcherSubmission,ge&&ge.replace,ge&&ge.initialHydration===!0,d,c);x||(he=null,xt(pe,gi({matches:y||r},Dv(c),{loaderData:S,errors:M})))}async function It(se,pe,ge,xe,Ve,r){r===void 0&&(r={}),Nt();let d=lP(pe,ge);if(nt({navigation:d},{flushSync:r.flushSync===!0}),Ve){let c=await _i(xe,pe.pathname,se.signal);if(c.type==="aborted")return{shortCircuited:!0};if(c.type==="error"){let x=Ia(c.partialMatches).route.id;return{matches:c.partialMatches,pendingActionResult:[x,{type:ni.error,error:c.error}]}}else if(c.matches)xe=c.matches;else{let{notFoundMatches:x,error:y,route:S}=Ce(pe.pathname);return{matches:x,pendingActionResult:[S.id,{type:ni.error,error:y}]}}}let h,o=gh(xe,pe);if(!o.route.action&&!o.route.lazy)h={type:ni.error,error:jn(405,{method:se.method,pathname:pe.pathname,routeId:o.route.id})};else if(h=(await Ki("action",j,se,[o],xe,null))[o.route.id],se.signal.aborted)return{shortCircuited:!0};if(Na(h)){let c;return r&&r.replace!=null?c=r.replace:c=Mv(h.response.headers.get("Location"),new URL(se.url),f)===j.location.pathname+j.location.search,await Gi(se,h,!0,{submission:ge,replace:c}),{shortCircuited:!0}}if(Hr(h))throw jn(400,{type:"defer-action"});if(es(h)){let c=Ia(xe,o.route.id);return(r&&r.replace)!==!0&&(G=Vi.Push),{matches:xe,pendingActionResult:[c.route.id,h]}}return{matches:xe,pendingActionResult:[o.route.id,h]}}async function lt(se,pe,ge,xe,Ve,r,d,h,o,c,x){let y=Ve||lf(pe,r),S=r||d||Bv(y),M=!de&&(!k.v7_partialHydration||!o);if(xe){if(M){let Q=Ui(x);nt(gi({navigation:y},Q!==void 0?{actionData:Q}:{}),{flushSync:c})}let te=await _i(ge,pe.pathname,se.signal);if(te.type==="aborted")return{shortCircuited:!0};if(te.type==="error"){let Q=Ia(te.partialMatches).route.id;return{matches:te.partialMatches,loaderData:{},errors:{[Q]:te.error}}}else if(te.matches)ge=te.matches;else{let{error:Q,notFoundMatches:ve,route:Me}=Ce(pe.pathname);return{matches:ve,loaderData:{},errors:{[Me.id]:Q}}}}let _=p||l,[v,b]=Sv(t.history,j,ge,S,pe,k.v7_partialHydration&&o===!0,k.v7_skipActionErrorRevalidation,Re,He,Ze,W,_e,X,_,f,x);if(Ne(te=>!(ge&&ge.some(Q=>Q.route.id===te))||v&&v.some(Q=>Q.route.id===te)),Le=++Pe,v.length===0&&b.length===0){let te=ka();return xt(pe,gi({matches:ge,loaderData:{},errors:x&&es(x[1])?{[x[0]]:x[1].error}:null},Dv(x),te?{fetchers:new Map(j.fetchers)}:{}),{flushSync:c}),{shortCircuited:!0}}if(M){let te={};if(!xe){te.navigation=y;let Q=Ui(x);Q!==void 0&&(te.actionData=Q)}b.length>0&&(te.fetchers=Vn(b)),nt(te,{flushSync:c})}b.forEach(te=>{kt(te.key),te.controller&&et.set(te.key,te.controller)});let C=()=>b.forEach(te=>kt(te.key));he&&he.signal.addEventListener("abort",C);let{loaderResults:u,fetcherResults:I}=await Sa(j,ge,v,b,se);if(se.signal.aborted)return{shortCircuited:!0};he&&he.signal.removeEventListener("abort",C),b.forEach(te=>et.delete(te.key));let R=_u(u);if(R)return await Gi(se,R.result,!0,{replace:h}),{shortCircuited:!0};if(R=_u(I),R)return X.add(R.key),await Gi(se,R.result,!0,{replace:h}),{shortCircuited:!0};let{loaderData:z,errors:A}=Ev(j,ge,u,x,b,I,ae);ae.forEach((te,Q)=>{te.subscribe(ve=>{(ve||te.done)&&ae.delete(Q)})}),k.v7_partialHydration&&o&&j.errors&&(A=gi({},j.errors,A));let Y=ka(),V=Ta(Le),q=Y||V||b.length>0;return gi({matches:ge,loaderData:z,errors:A},q?{fetchers:new Map(j.fetchers)}:{})}function Ui(se){if(se&&!es(se[1]))return{[se[0]]:se[1].data};if(j.actionData)return Object.keys(j.actionData).length===0?null:j.actionData}function Vn(se){return se.forEach(pe=>{let ge=j.fetchers.get(pe.key),xe=rh(void 0,ge?ge.data:void 0);j.fetchers.set(pe.key,xe)}),new Map(j.fetchers)}function Ti(se,pe,ge,xe){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");kt(se);let Ve=(xe&&xe.flushSync)===!0,r=p||l,d=dm(j.location,j.matches,f,k.v7_prependBasename,ge,k.v7_relativeSplatPath,pe,xe==null?void 0:xe.relative),h=Da(r,d,f),o=at(h,r,d);if(o.active&&o.matches&&(h=o.matches),!h){Zn(se,pe,jn(404,{pathname:d}),{flushSync:Ve});return}let{path:c,submission:x,error:y}=Cv(k.v7_normalizeFormMethod,!0,d,xe);if(y){Zn(se,pe,y,{flushSync:Ve});return}let S=gh(h,c),M=(xe&&xe.preventScrollReset)===!0;if(x&&Ps(x.formMethod)){cn(se,pe,c,S,h,o.active,Ve,M,x);return}_e.set(se,{routeId:pe,path:c}),bi(se,pe,c,S,h,o.active,Ve,M,x)}async function cn(se,pe,ge,xe,Ve,r,d,h,o){Nt(),_e.delete(se);function c(le){if(!le.route.action&&!le.route.lazy){let ue=jn(405,{method:o.formMethod,pathname:ge,routeId:pe});return Zn(se,pe,ue,{flushSync:d}),!0}return!1}if(!r&&c(xe))return;let x=j.fetchers.get(se);$i(se,hP(o,x),{flushSync:d});let y=new AbortController,S=_o(t.history,ge,y.signal,o);if(r){let le=await _i(Ve,ge,S.signal);if(le.type==="aborted")return;if(le.type==="error"){Zn(se,pe,le.error,{flushSync:d});return}else if(le.matches){if(Ve=le.matches,xe=gh(Ve,ge),c(xe))return}else{Zn(se,pe,jn(404,{pathname:ge}),{flushSync:d});return}}et.set(se,y);let M=Pe,v=(await Ki("action",j,S,[xe],Ve,se))[xe.route.id];if(S.signal.aborted){et.get(se)===y&&et.delete(se);return}if(k.v7_fetcherPersist&&W.has(se)){if(Na(v)||es(v)){$i(se,Nr(void 0));return}}else{if(Na(v))if(et.delete(se),Le>M){$i(se,Nr(void 0));return}else return X.add(se),$i(se,rh(o)),Gi(S,v,!1,{fetcherSubmission:o,preventScrollReset:h});if(es(v)){Zn(se,pe,v.error);return}}if(Hr(v))throw jn(400,{type:"defer-action"});let b=j.navigation.location||j.location,C=_o(t.history,b,y.signal),u=p||l,I=j.navigation.state!=="idle"?Da(u,j.navigation.location,f):j.matches;Bt(I,"Didn't find any matches after fetcher action");let R=++Pe;Be.set(se,R);let z=rh(o,v.data);j.fetchers.set(se,z);let[A,Y]=Sv(t.history,j,I,o,b,!1,k.v7_skipActionErrorRevalidation,Re,He,Ze,W,_e,X,u,f,[xe.route.id,v]);Y.filter(le=>le.key!==se).forEach(le=>{let ue=le.key,ce=j.fetchers.get(ue),oe=rh(void 0,ce?ce.data:void 0);j.fetchers.set(ue,oe),kt(ue),le.controller&&et.set(ue,le.controller)}),nt({fetchers:new Map(j.fetchers)});let V=()=>Y.forEach(le=>kt(le.key));y.signal.addEventListener("abort",V);let{loaderResults:q,fetcherResults:te}=await Sa(j,I,A,Y,C);if(y.signal.aborted)return;y.signal.removeEventListener("abort",V),Be.delete(se),et.delete(se),Y.forEach(le=>et.delete(le.key));let Q=_u(q);if(Q)return Gi(C,Q.result,!1,{preventScrollReset:h});if(Q=_u(te),Q)return X.add(Q.key),Gi(C,Q.result,!1,{preventScrollReset:h});let{loaderData:ve,errors:Me}=Ev(j,I,q,void 0,Y,te,ae);if(j.fetchers.has(se)){let le=Nr(v.data);j.fetchers.set(se,le)}Ta(R),j.navigation.state==="loading"&&R>Le?(Bt(G,"Expected pending action"),he&&he.abort(),xt(j.navigation.location,{matches:I,loaderData:ve,errors:Me,fetchers:new Map(j.fetchers)})):(nt({errors:Me,loaderData:Av(j.loaderData,ve,I,Me),fetchers:new Map(j.fetchers)}),Re=!1)}async function bi(se,pe,ge,xe,Ve,r,d,h,o){let c=j.fetchers.get(se);$i(se,rh(o,c?c.data:void 0),{flushSync:d});let x=new AbortController,y=_o(t.history,ge,x.signal);if(r){let v=await _i(Ve,ge,y.signal);if(v.type==="aborted")return;if(v.type==="error"){Zn(se,pe,v.error,{flushSync:d});return}else if(v.matches)Ve=v.matches,xe=gh(Ve,ge);else{Zn(se,pe,jn(404,{pathname:ge}),{flushSync:d});return}}et.set(se,x);let S=Pe,_=(await Ki("loader",j,y,[xe],Ve,se))[xe.route.id];if(Hr(_)&&(_=await y2(_,y.signal,!0)||_),et.get(se)===x&&et.delete(se),!y.signal.aborted){if(W.has(se)){$i(se,Nr(void 0));return}if(Na(_))if(Le>S){$i(se,Nr(void 0));return}else{X.add(se),await Gi(y,_,!1,{preventScrollReset:h});return}if(es(_)){Zn(se,pe,_.error);return}Bt(!Hr(_),"Unhandled fetcher deferred data"),$i(se,Nr(_.data))}}async function Gi(se,pe,ge,xe){let{submission:Ve,fetcherSubmission:r,preventScrollReset:d,replace:h}=xe===void 0?{}:xe;pe.response.headers.has("X-Remix-Revalidate")&&(Re=!0);let o=pe.response.headers.get("Location");Bt(o,"Expected a Location header on the redirect Response"),o=Mv(o,new URL(se.url),f);let c=rc(j.location,o,{_isRedirect:!0});if(i){let v=!1;if(pe.response.headers.has("X-Remix-Reload-Document"))v=!0;else if(g2.test(o)){const b=t.history.createURL(o);v=b.origin!==e.location.origin||Mr(b.pathname,f)==null}if(v){h?e.location.replace(o):e.location.assign(o);return}}he=null;let x=h===!0||pe.response.headers.has("X-Remix-Replace")?Vi.Replace:Vi.Push,{formMethod:y,formAction:S,formEncType:M}=j.navigation;!Ve&&!r&&y&&S&&M&&(Ve=Bv(j.navigation));let _=Ve||r;if($8.has(pe.response.status)&&_&&Ps(_.formMethod))await We(x,c,{submission:gi({},_,{formAction:o}),preventScrollReset:d||Z,enableViewTransition:ge?ee:void 0});else{let v=lf(c,Ve);await We(x,c,{overrideNavigation:v,fetcherSubmission:r,preventScrollReset:d||Z,enableViewTransition:ge?ee:void 0})}}async function Ki(se,pe,ge,xe,Ve,r){let d,h={};try{d=await Z8(g,se,pe,ge,xe,Ve,r,a,s)}catch(o){return xe.forEach(c=>{h[c.route.id]={type:ni.error,error:o}}),h}for(let[o,c]of Object.entries(d))if(nP(c)){let x=c.result;h[o]={type:ni.redirect,response:eP(x,ge,o,Ve,f,k.v7_relativeSplatPath)}}else h[o]=await q8(c);return h}async function Sa(se,pe,ge,xe,Ve){let r=se.matches,d=Ki("loader",se,Ve,ge,pe,null),h=Promise.all(xe.map(async x=>{if(x.matches&&x.match&&x.controller){let S=(await Ki("loader",se,_o(t.history,x.path,x.controller.signal),[x.match],x.matches,x.key))[x.match.route.id];return{[x.key]:S}}else return Promise.resolve({[x.key]:{type:ni.error,error:jn(404,{pathname:x.path})}})})),o=await d,c=(await h).reduce((x,y)=>Object.assign(x,y),{});return await Promise.all([aP(pe,o,Ve.signal,r,se.loaderData),oP(pe,c,xe)]),{loaderResults:o,fetcherResults:c}}function Nt(){Re=!0,He.push(...Ne()),_e.forEach((se,pe)=>{et.has(pe)&&Ze.add(pe),kt(pe)})}function $i(se,pe,ge){ge===void 0&&(ge={}),j.fetchers.set(se,pe),nt({fetchers:new Map(j.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function Zn(se,pe,ge,xe){xe===void 0&&(xe={});let Ve=Ia(j.matches,pe);ds(se),nt({errors:{[Ve.route.id]:ge},fetchers:new Map(j.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function ar(se){return k.v7_fetcherPersist&&(me.set(se,(me.get(se)||0)+1),W.has(se)&&W.delete(se)),j.fetchers.get(se)||H8}function ds(se){let pe=j.fetchers.get(se);et.has(se)&&!(pe&&pe.state==="loading"&&Be.has(se))&&kt(se),_e.delete(se),Be.delete(se),X.delete(se),W.delete(se),Ze.delete(se),j.fetchers.delete(se)}function ti(se){if(k.v7_fetcherPersist){let pe=(me.get(se)||0)-1;pe<=0?(me.delete(se),W.add(se)):me.set(se,pe)}else ds(se);nt({fetchers:new Map(j.fetchers)})}function kt(se){let pe=et.get(se);pe&&(pe.abort(),et.delete(se))}function Bi(se){for(let pe of se){let ge=ar(pe),xe=Nr(ge.data);j.fetchers.set(pe,xe)}}function ka(){let se=[],pe=!1;for(let ge of X){let xe=j.fetchers.get(ge);Bt(xe,"Expected fetcher: "+ge),xe.state==="loading"&&(X.delete(ge),se.push(ge),pe=!0)}return Bi(se),pe}function Ta(se){let pe=[];for(let[ge,xe]of Be)if(xe<se){let Ve=j.fetchers.get(ge);Bt(Ve,"Expected fetcher: "+ge),Ve.state==="loading"&&(kt(ge),Be.delete(ge),pe.push(ge))}return Bi(pe),pe.length>0}function yo(se,pe){let ge=j.blockers.get(se)||sh;return fe.get(se)!==pe&&fe.set(se,pe),ge}function F(se){j.blockers.delete(se),fe.delete(se)}function O(se,pe){let ge=j.blockers.get(se)||sh;Bt(ge.state==="unblocked"&&pe.state==="blocked"||ge.state==="blocked"&&pe.state==="blocked"||ge.state==="blocked"&&pe.state==="proceeding"||ge.state==="blocked"&&pe.state==="unblocked"||ge.state==="proceeding"&&pe.state==="unblocked","Invalid blocker state transition: "+ge.state+" -> "+pe.state);let xe=new Map(j.blockers);xe.set(se,pe),nt({blockers:xe})}function K(se){let{currentLocation:pe,nextLocation:ge,historyAction:xe}=se;if(fe.size===0)return;fe.size>1&&ul(!1,"A router only supports one blocker at a time");let Ve=Array.from(fe.entries()),[r,d]=Ve[Ve.length-1],h=j.blockers.get(r);if(!(h&&h.state==="proceeding")&&d({currentLocation:pe,nextLocation:ge,historyAction:xe}))return r}function Ce(se){let pe=jn(404,{pathname:se}),ge=p||l,{matches:xe,route:Ve}=Iv(ge);return Ne(),{notFoundMatches:xe,route:Ve,error:pe}}function Ne(se){let pe=[];return ae.forEach((ge,xe)=>{(!se||se(xe))&&(ge.cancel(),pe.push(xe),ae.delete(xe))}),pe}function Oe(se,pe,ge){if(P=se,$=pe,L=ge||null,!N&&j.navigation===of){N=!0;let xe=Tt(j.location,j.matches);xe!=null&&nt({restoreScrollPosition:xe})}return()=>{P=null,$=null,L=null}}function ke(se,pe){return L&&L(se,pe.map(xe=>_8(xe,j.loaderData)))||se.key}function ut(se,pe){if(P&&$){let ge=ke(se,pe);P[ge]=$()}}function Tt(se,pe){if(P){let ge=ke(se,pe),xe=P[ge];if(typeof xe=="number")return xe}return null}function at(se,pe,ge){if(m)if(se){if(Object.keys(se[0].params).length>0)return{active:!0,matches:Uu(pe,ge,f,!0)}}else return{active:!0,matches:Uu(pe,ge,f,!0)||[]};return{active:!1,matches:null}}async function _i(se,pe,ge){if(!m)return{type:"success",matches:se};let xe=se;for(;;){let Ve=p==null,r=p||l,d=a;try{await m({path:pe,matches:xe,patch:(c,x)=>{ge.aborted||Tv(c,x,r,d,s)}})}catch(c){return{type:"error",error:c,partialMatches:xe}}finally{Ve&&!ge.aborted&&(l=[...l])}if(ge.aborted)return{type:"aborted"};let h=Da(r,pe,f);if(h)return{type:"success",matches:h};let o=Uu(r,pe,f,!0);if(!o||xe.length===o.length&&xe.every((c,x)=>c.route.id===o[x].route.id))return{type:"success",matches:null};xe=o}}function Ut(se){a={},p=Bd(se,s,void 0,a)}function li(se,pe){let ge=p==null;Tv(se,pe,p||l,a,s),ge&&(l=[...l],nt({}))}return U={get basename(){return f},get future(){return k},get state(){return j},get routes(){return l},get window(){return e},initialize:Se,subscribe:tt,enableScrollRestoration:Oe,navigate:rt,fetch:Ti,revalidate:it,createHref:se=>t.history.createHref(se),encodeLocation:se=>t.history.encodeLocation(se),getFetcher:ar,deleteFetcher:ti,dispose:Ee,getBlocker:yo,deleteBlocker:F,patchRoutes:li,_internalFetchControllers:et,_internalActiveDeferreds:ae,_internalSetRoutes:Ut},U}function U8(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function dm(t,e,i,n,s,a,l,p){let f,g;if(l){f=[];for(let k of e)if(f.push(k),k.route.id===l){g=k;break}}else f=e,g=e[e.length-1];let m=m2(s||".",x2(f,a),Mr(t.pathname,i)||t.pathname,p==="path");if(s==null&&(m.search=t.search,m.hash=t.hash),(s==null||s===""||s===".")&&g){let k=v2(m.search);if(g.route.index&&!k)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!g.route.index&&k){let T=new URLSearchParams(m.search),D=T.getAll("index");T.delete("index"),D.filter(L=>L).forEach(L=>T.append("index",L));let P=T.toString();m.search=P?"?"+P:""}}return n&&i!=="/"&&(m.pathname=m.pathname==="/"?i:vr([i,m.pathname])),qa(m)}function Cv(t,e,i,n){if(!n||!U8(n))return{path:i};if(n.formMethod&&!rP(n.formMethod))return{path:i,error:jn(405,{method:n.formMethod})};let s=()=>({path:i,error:jn(400,{type:"invalid-body"})}),a=n.formMethod||"get",l=t?a.toUpperCase():a.toLowerCase(),p=K4(i);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Ps(l))return s();let T=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((D,P)=>{let[L,$]=P;return""+D+L+"="+$+`
`},""):String(n.body);return{path:i,submission:{formMethod:l,formAction:p,formEncType:n.formEncType,formData:void 0,json:void 0,text:T}}}else if(n.formEncType==="application/json"){if(!Ps(l))return s();try{let T=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:i,submission:{formMethod:l,formAction:p,formEncType:n.formEncType,formData:void 0,json:T,text:void 0}}}catch{return s()}}}Bt(typeof FormData=="function","FormData is not available in this environment");let f,g;if(n.formData)f=fm(n.formData),g=n.formData;else if(n.body instanceof FormData)f=fm(n.body),g=n.body;else if(n.body instanceof URLSearchParams)f=n.body,g=Pv(f);else if(n.body==null)f=new URLSearchParams,g=new FormData;else try{f=new URLSearchParams(n.body),g=Pv(f)}catch{return s()}let m={formMethod:l,formAction:p,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(Ps(m.formMethod))return{path:i,submission:m};let k=ma(i);return e&&k.search&&v2(k.search)&&f.append("index",""),k.search="?"+f,{path:qa(k),submission:m}}function wv(t,e,i){i===void 0&&(i=!1);let n=t.findIndex(s=>s.route.id===e);return n>=0?t.slice(0,i?n+1:n):t}function Sv(t,e,i,n,s,a,l,p,f,g,m,k,T,D,P,L){let $=L?es(L[1])?L[1].error:L[1].data:void 0,N=t.createURL(e.location),E=t.createURL(s),B=i;a&&e.errors?B=wv(i,Object.keys(e.errors)[0],!0):L&&es(L[1])&&(B=wv(i,L[0]));let H=L?L[1].statusCode:void 0,U=l&&H&&H>=400,j=B.filter((Z,he)=>{let{route:ee}=Z;if(ee.lazy)return!0;if(ee.loader==null)return!1;if(a)return pm(ee,e.loaderData,e.errors);if(G8(e.loaderData,e.matches[he],Z)||f.some(de=>de===Z.route.id))return!0;let re=e.matches[he],we=Z;return kv(Z,gi({currentUrl:N,currentParams:re.params,nextUrl:E,nextParams:we.params},n,{actionResult:$,actionStatus:H,defaultShouldRevalidate:U?!1:p||N.pathname+N.search===E.pathname+E.search||N.search!==E.search||U4(re,we)}))}),G=[];return k.forEach((Z,he)=>{if(a||!i.some(Re=>Re.route.id===Z.routeId)||m.has(he))return;let ee=Da(D,Z.path,P);if(!ee){G.push({key:he,routeId:Z.routeId,path:Z.path,matches:null,match:null,controller:null});return}let re=e.fetchers.get(he),we=gh(ee,Z.path),de=!1;T.has(he)?de=!1:g.has(he)?(g.delete(he),de=!0):re&&re.state!=="idle"&&re.data===void 0?de=p:de=kv(we,gi({currentUrl:N,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:i[i.length-1].params},n,{actionResult:$,actionStatus:H,defaultShouldRevalidate:U?!1:p})),de&&G.push({key:he,routeId:Z.routeId,path:Z.path,matches:ee,match:we,controller:new AbortController})}),[j,G]}function pm(t,e,i){if(t.lazy)return!0;if(!t.loader)return!1;let n=e!=null&&e[t.id]!==void 0,s=i!=null&&i[t.id]!==void 0;return!n&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!s}function G8(t,e,i){let n=!e||i.route.id!==e.route.id,s=t[i.route.id]===void 0;return n||s}function U4(t,e){let i=t.route.path;return t.pathname!==e.pathname||i!=null&&i.endsWith("*")&&t.params["*"]!==e.params["*"]}function kv(t,e){if(t.route.shouldRevalidate){let i=t.route.shouldRevalidate(e);if(typeof i=="boolean")return i}return e.defaultShouldRevalidate}function Tv(t,e,i,n,s){var a;let l;if(t){let g=n[t];Bt(g,"No route found to patch children into: routeId = "+t),g.children||(g.children=[]),l=g.children}else l=i;let p=e.filter(g=>!l.some(m=>G4(g,m))),f=Bd(p,s,[t||"_","patch",String(((a=l)==null?void 0:a.length)||"0")],n);l.push(...f)}function G4(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((i,n)=>{var s;return(s=e.children)==null?void 0:s.some(a=>G4(i,a))}):!1}async function K8(t,e,i){if(!t.lazy)return;let n=await t.lazy();if(!t.lazy)return;let s=i[t.id];Bt(s,"No route found in manifest");let a={};for(let l in n){let f=s[l]!==void 0&&l!=="hasErrorBoundary";ul(!f,'Route "'+s.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!f&&!v8.has(l)&&(a[l]=n[l])}Object.assign(s,a),Object.assign(s,gi({},e(s),{lazy:void 0}))}async function Q8(t){let{matches:e}=t,i=e.filter(s=>s.shouldLoad);return(await Promise.all(i.map(s=>s.resolve()))).reduce((s,a,l)=>Object.assign(s,{[i[l].route.id]:a}),{})}async function Z8(t,e,i,n,s,a,l,p,f,g){let m=a.map(D=>D.route.lazy?K8(D.route,f,p):void 0),k=a.map((D,P)=>{let L=m[P],$=s.some(E=>E.route.id===D.route.id);return gi({},D,{shouldLoad:$,resolve:async E=>(E&&n.method==="GET"&&(D.route.lazy||D.route.loader)&&($=!0),$?J8(e,n,D,L,E,g):Promise.resolve({type:ni.data,result:void 0}))})}),T=await t({matches:k,request:n,params:a[0].params,fetcherKey:l,context:g});try{await Promise.all(m)}catch{}return T}async function J8(t,e,i,n,s,a){let l,p,f=g=>{let m,k=new Promise((P,L)=>m=L);p=()=>m(),e.signal.addEventListener("abort",p);let T=P=>typeof g!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+i.route.id+"]"))):g({request:e,params:i.params,context:a},...P!==void 0?[P]:[]),D=(async()=>{try{return{type:"data",result:await(s?s(L=>T(L)):T())}}catch(P){return{type:"error",result:P}}})();return Promise.race([D,k])};try{let g=i.route[t];if(n)if(g){let m,[k]=await Promise.all([f(g).catch(T=>{m=T}),n]);if(m!==void 0)throw m;l=k}else if(await n,g=i.route[t],g)l=await f(g);else if(t==="action"){let m=new URL(e.url),k=m.pathname+m.search;throw jn(405,{method:e.method,pathname:k,routeId:i.route.id})}else return{type:ni.data,result:void 0};else if(g)l=await f(g);else{let m=new URL(e.url),k=m.pathname+m.search;throw jn(404,{pathname:k})}Bt(l.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+i.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(g){return{type:ni.error,result:g}}finally{p&&e.signal.removeEventListener("abort",p)}return l}async function q8(t){let{result:e,type:i}=t;if(Q4(e)){let g;try{let m=e.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?e.body==null?g=null:g=await e.json():g=await e.text()}catch(m){return{type:ni.error,error:m}}return i===ni.error?{type:ni.error,error:new Nd(e.status,e.statusText,g),statusCode:e.status,headers:e.headers}:{type:ni.data,data:g,statusCode:e.status,headers:e.headers}}if(i===ni.error){if(Fv(e)){var n;if(e.data instanceof Error){var s;return{type:ni.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status}}e=new Nd(((n=e.init)==null?void 0:n.status)||500,void 0,e.data)}return{type:ni.error,error:e,statusCode:F0(e)?e.status:void 0}}if(sP(e)){var a,l;return{type:ni.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(Fv(e)){var p,f;return{type:ni.data,data:e.data,statusCode:(p=e.init)==null?void 0:p.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:ni.data,data:e}}function eP(t,e,i,n,s,a){let l=t.headers.get("Location");if(Bt(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!g2.test(l)){let p=n.slice(0,n.findIndex(f=>f.route.id===i)+1);l=dm(new URL(e.url),p,s,!0,l,a),t.headers.set("Location",l)}return t}function Mv(t,e,i){if(g2.test(t)){let n=t,s=n.startsWith("//")?new URL(e.protocol+n):new URL(n),a=Mr(s.pathname,i)!=null;if(s.origin===e.origin&&a)return s.pathname+s.search+s.hash}return t}function _o(t,e,i,n){let s=t.createURL(K4(e)).toString(),a={signal:i};if(n&&Ps(n.formMethod)){let{formMethod:l,formEncType:p}=n;a.method=l.toUpperCase(),p==="application/json"?(a.headers=new Headers({"Content-Type":p}),a.body=JSON.stringify(n.json)):p==="text/plain"?a.body=n.text:p==="application/x-www-form-urlencoded"&&n.formData?a.body=fm(n.formData):a.body=n.formData}return new Request(s,a)}function fm(t){let e=new URLSearchParams;for(let[i,n]of t.entries())e.append(i,typeof n=="string"?n:n.name);return e}function Pv(t){let e=new FormData;for(let[i,n]of t.entries())e.append(i,n);return e}function tP(t,e,i,n,s){let a={},l=null,p,f=!1,g={},m=i&&es(i[1])?i[1].error:void 0;return t.forEach(k=>{if(!(k.route.id in e))return;let T=k.route.id,D=e[T];if(Bt(!Na(D),"Cannot handle redirect results in processLoaderData"),es(D)){let P=D.error;m!==void 0&&(P=m,m=void 0),l=l||{};{let L=Ia(t,T);l[L.route.id]==null&&(l[L.route.id]=P)}a[T]=void 0,f||(f=!0,p=F0(D.error)?D.error.status:500),D.headers&&(g[T]=D.headers)}else Hr(D)?(n.set(T,D.deferredData),a[T]=D.deferredData.data,D.statusCode!=null&&D.statusCode!==200&&!f&&(p=D.statusCode),D.headers&&(g[T]=D.headers)):(a[T]=D.data,D.statusCode&&D.statusCode!==200&&!f&&(p=D.statusCode),D.headers&&(g[T]=D.headers))}),m!==void 0&&i&&(l={[i[0]]:m},a[i[0]]=void 0),{loaderData:a,errors:l,statusCode:p||200,loaderHeaders:g}}function Ev(t,e,i,n,s,a,l){let{loaderData:p,errors:f}=tP(e,i,n,l);return s.forEach(g=>{let{key:m,match:k,controller:T}=g,D=a[m];if(Bt(D,"Did not find corresponding fetcher result"),!(T&&T.signal.aborted))if(es(D)){let P=Ia(t.matches,k==null?void 0:k.route.id);f&&f[P.route.id]||(f=gi({},f,{[P.route.id]:D.error})),t.fetchers.delete(m)}else if(Na(D))Bt(!1,"Unhandled fetcher revalidation redirect");else if(Hr(D))Bt(!1,"Unhandled fetcher deferred data");else{let P=Nr(D.data);t.fetchers.set(m,P)}}),{loaderData:p,errors:f}}function Av(t,e,i,n){let s=gi({},e);for(let a of i){let l=a.route.id;if(e.hasOwnProperty(l)?e[l]!==void 0&&(s[l]=e[l]):t[l]!==void 0&&a.route.loader&&(s[l]=t[l]),n&&n.hasOwnProperty(l))break}return s}function Dv(t){return t?es(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ia(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function Iv(t){let e=t.length===1?t[0]:t.find(i=>i.index||!i.path||i.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function jn(t,e){let{pathname:i,routeId:n,method:s,type:a,message:l}=e===void 0?{}:e,p="Unknown Server Error",f="Unknown @remix-run/router error";return t===400?(p="Bad Request",s&&i&&n?f="You made a "+s+' request to "'+i+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":a==="defer-action"?f="defer() is not supported in actions":a==="invalid-body"&&(f="Unable to encode submission body")):t===403?(p="Forbidden",f='Route "'+n+'" does not match URL "'+i+'"'):t===404?(p="Not Found",f='No route matches URL "'+i+'"'):t===405&&(p="Method Not Allowed",s&&i&&n?f="You made a "+s.toUpperCase()+' request to "'+i+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":s&&(f='Invalid request method "'+s.toUpperCase()+'"')),new Nd(t||500,p,new Error(f),!0)}function _u(t){let e=Object.entries(t);for(let i=e.length-1;i>=0;i--){let[n,s]=e[i];if(Na(s))return{key:n,result:s}}}function K4(t){let e=typeof t=="string"?ma(t):t;return qa(gi({},e,{hash:""}))}function iP(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function nP(t){return Q4(t.result)&&z8.has(t.result.status)}function Hr(t){return t.type===ni.deferred}function es(t){return t.type===ni.error}function Na(t){return(t&&t.type)===ni.redirect}function Fv(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function sP(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Q4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function rP(t){return W8.has(t.toLowerCase())}function Ps(t){return O8.has(t.toLowerCase())}async function aP(t,e,i,n,s){let a=Object.entries(e);for(let l=0;l<a.length;l++){let[p,f]=a[l],g=t.find(T=>(T==null?void 0:T.route.id)===p);if(!g)continue;let m=n.find(T=>T.route.id===g.route.id),k=m!=null&&!U4(m,g)&&(s&&s[g.route.id])!==void 0;Hr(f)&&k&&await y2(f,i,!1).then(T=>{T&&(e[p]=T)})}}async function oP(t,e,i){for(let n=0;n<i.length;n++){let{key:s,routeId:a,controller:l}=i[n],p=e[s];t.find(g=>(g==null?void 0:g.route.id)===a)&&Hr(p)&&(Bt(l,"Expected an AbortController for revalidating fetcher deferred result"),await y2(p,l.signal,!0).then(g=>{g&&(e[s]=g)}))}}async function y2(t,e,i){if(i===void 0&&(i=!1),!await t.deferredData.resolveData(e)){if(i)try{return{type:ni.data,data:t.deferredData.unwrappedData}}catch(s){return{type:ni.error,error:s}}return{type:ni.data,data:t.deferredData.data}}}function v2(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function gh(t,e){let i=typeof e=="string"?ma(e).search:e.search;if(t[t.length-1].route.index&&v2(i||""))return t[t.length-1];let n=H4(t);return n[n.length-1]}function Bv(t){let{formMethod:e,formAction:i,formEncType:n,text:s,formData:a,json:l}=t;if(!(!e||!i||!n)){if(s!=null)return{formMethod:e,formAction:i,formEncType:n,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:i,formEncType:n,formData:a,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:i,formEncType:n,formData:void 0,json:l,text:void 0}}}function lf(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function lP(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function rh(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function hP(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Nr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function cP(t,e){try{let i=t.sessionStorage.getItem(X4);if(i){let n=JSON.parse(i);for(let[s,a]of Object.entries(n||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function uP(t,e){if(e.size>0){let i={};for(let[n,s]of e)i[n]=[...s];try{t.sessionStorage.setItem(X4,JSON.stringify(i))}catch(n){ul(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Rd.apply(this,arguments)}const Dc=ne.createContext(null),b2=ne.createContext(null),ga=ne.createContext(null),_2=ne.createContext(null),ya=ne.createContext({outlet:null,matches:[],isDataRoute:!1}),Z4=ne.createContext(null);function dP(t,e){let{relative:i}=e===void 0?{}:e;Ic()||Bt(!1);let{basename:n,navigator:s}=ne.useContext(ga),{hash:a,pathname:l,search:p}=B0(t,{relative:i}),f=l;return n!=="/"&&(f=l==="/"?n:vr([n,l])),s.createHref({pathname:f,search:p,hash:a})}function Ic(){return ne.useContext(_2)!=null}function Fc(){return Ic()||Bt(!1),ne.useContext(_2).location}function J4(t){ne.useContext(ga).static||ne.useLayoutEffect(t)}function pP(){let{isDataRoute:t}=ne.useContext(ya);return t?MP():fP()}function fP(){Ic()||Bt(!1);let t=ne.useContext(Dc),{basename:e,future:i,navigator:n}=ne.useContext(ga),{matches:s}=ne.useContext(ya),{pathname:a}=Fc(),l=JSON.stringify(x2(s,i.v7_relativeSplatPath)),p=ne.useRef(!1);return J4(()=>{p.current=!0}),ne.useCallback(function(g,m){if(m===void 0&&(m={}),!p.current)return;if(typeof g=="number"){n.go(g);return}let k=m2(g,JSON.parse(l),a,m.relative==="path");t==null&&e!=="/"&&(k.pathname=k.pathname==="/"?e:vr([e,k.pathname])),(m.replace?n.replace:n.push)(k,m.state,m)},[e,n,l,a,t])}const xP=ne.createContext(null);function mP(t){let e=ne.useContext(ya).outlet;return e&&ne.createElement(xP.Provider,{value:t},e)}function B0(t,e){let{relative:i}=e===void 0?{}:e,{future:n}=ne.useContext(ga),{matches:s}=ne.useContext(ya),{pathname:a}=Fc(),l=JSON.stringify(x2(s,n.v7_relativeSplatPath));return ne.useMemo(()=>m2(t,JSON.parse(l),a,i==="path"),[t,l,a,i])}function gP(t,e,i,n){Ic()||Bt(!1);let{navigator:s}=ne.useContext(ga),{matches:a}=ne.useContext(ya),l=a[a.length-1],p=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let g=Fc(),m;m=g;let k=m.pathname||"/",T=k;if(f!=="/"){let L=f.replace(/^\//,"").split("/");T="/"+k.replace(/^\//,"").split("/").slice(L.length).join("/")}let D=Da(t,{pathname:T});return CP(D&&D.map(L=>Object.assign({},L,{params:Object.assign({},p,L.params),pathname:vr([f,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?f:vr([f,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),a,i,n)}function yP(){let t=TP(),e=F0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),i?ne.createElement("pre",{style:s},i):null,null)}const vP=ne.createElement(yP,null);class bP extends ne.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,i){return i.location!==e.location||i.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:i.error,location:i.location,revalidation:e.revalidation||i.revalidation}}componentDidCatch(e,i){console.error("React Router caught the following error during render",e,i)}render(){return this.state.error!==void 0?ne.createElement(ya.Provider,{value:this.props.routeContext},ne.createElement(Z4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _P(t){let{routeContext:e,match:i,children:n}=t,s=ne.useContext(Dc);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),ne.createElement(ya.Provider,{value:e},n)}function CP(t,e,i,n){var s;if(e===void 0&&(e=[]),i===void 0&&(i=null),n===void 0&&(n=null),t==null){var a;if(!i)return null;if(i.errors)t=i.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,p=(s=i)==null?void 0:s.errors;if(p!=null){let m=l.findIndex(k=>k.route.id&&(p==null?void 0:p[k.route.id])!==void 0);m>=0||Bt(!1),l=l.slice(0,Math.min(l.length,m+1))}let f=!1,g=-1;if(i&&n&&n.v7_partialHydration)for(let m=0;m<l.length;m++){let k=l[m];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(g=m),k.route.id){let{loaderData:T,errors:D}=i,P=k.route.loader&&T[k.route.id]===void 0&&(!D||D[k.route.id]===void 0);if(k.route.lazy||P){f=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((m,k,T)=>{let D,P=!1,L=null,$=null;i&&(D=p&&k.route.id?p[k.route.id]:void 0,L=k.route.errorElement||vP,f&&(g<0&&T===0?(P=!0,$=null):g===T&&(P=!0,$=k.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,T+1)),E=()=>{let B;return D?B=L:P?B=$:k.route.Component?B=ne.createElement(k.route.Component,null):k.route.element?B=k.route.element:B=m,ne.createElement(_P,{match:k,routeContext:{outlet:m,matches:N,isDataRoute:i!=null},children:B})};return i&&(k.route.ErrorBoundary||k.route.errorElement||T===0)?ne.createElement(bP,{location:i.location,revalidation:i.revalidation,component:L,error:D,children:E(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):E()},null)}var q4=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(q4||{}),Vd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vd||{});function wP(t){let e=ne.useContext(Dc);return e||Bt(!1),e}function SP(t){let e=ne.useContext(b2);return e||Bt(!1),e}function kP(t){let e=ne.useContext(ya);return e||Bt(!1),e}function e3(t){let e=kP(),i=e.matches[e.matches.length-1];return i.route.id||Bt(!1),i.route.id}function TP(){var t;let e=ne.useContext(Z4),i=SP(Vd.UseRouteError),n=e3(Vd.UseRouteError);return e!==void 0?e:(t=i.errors)==null?void 0:t[n]}function MP(){let{router:t}=wP(q4.UseNavigateStable),e=e3(Vd.UseNavigateStable),i=ne.useRef(!1);return J4(()=>{i.current=!0}),ne.useCallback(function(s,a){a===void 0&&(a={}),i.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Rd({fromRouteId:e},a)))},[t,e])}const Lv={};function PP(t,e){Lv[e]||(Lv[e]=!0,console.warn(e))}const Co=(t,e,i)=>PP(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+i+"."));function EP(t,e){t!=null&&t.v7_startTransition||Co("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&(!e||!e.v7_relativeSplatPath)&&Co("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(e.v7_fetcherPersist||Co("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),e.v7_normalizeFormMethod||Co("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),e.v7_partialHydration||Co("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),e.v7_skipActionErrorRevalidation||Co("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function AP(t){return mP(t.context)}function DP(t){let{basename:e="/",children:i=null,location:n,navigationType:s=Vi.Pop,navigator:a,static:l=!1,future:p}=t;Ic()&&Bt(!1);let f=e.replace(/^\/*/,"/"),g=ne.useMemo(()=>({basename:f,navigator:a,static:l,future:Rd({v7_relativeSplatPath:!1},p)}),[f,p,a,l]);typeof n=="string"&&(n=ma(n));let{pathname:m="/",search:k="",hash:T="",state:D=null,key:P="default"}=n,L=ne.useMemo(()=>{let $=Mr(m,f);return $==null?null:{location:{pathname:$,search:k,hash:T,state:D,key:P},navigationType:s}},[f,m,k,T,D,P,s]);return L==null?null:ne.createElement(ga.Provider,{value:g},ne.createElement(_2.Provider,{children:i,value:L}))}new Promise(()=>{});function IP(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:ne.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:ne.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:ne.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},dl.apply(this,arguments)}function t3(t,e){if(t==null)return{};var i={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function FP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function BP(t,e){return t.button===0&&(!e||e==="_self")&&!FP(t)}const LP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],RP="6";try{window.__reactRouterVersion=RP}catch{}function VP(t,e){return X8({basename:void 0,future:dl({},void 0,{v7_prependBasename:!0}),history:m8({window:void 0}),hydrationData:OP(),routes:t,mapRouteProperties:IP,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function OP(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=dl({},e,{errors:jP(e.errors)})),e}function jP(t){if(!t)return null;let e=Object.entries(t),i={};for(let[n,s]of e)if(s&&s.__type==="RouteErrorResponse")i[n]=new Nd(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let l=new a(s.message);l.stack="",i[n]=l}catch{}}if(i[n]==null){let a=new Error(s.message);a.stack="",i[n]=a}}else i[n]=s;return i}const i3=ne.createContext({isTransitioning:!1}),WP=ne.createContext(new Map),zP="startTransition",Nv=nM[zP],$P="flushSync",Rv=x8[$P];function HP(t){Nv?Nv(t):t()}function ah(t){Rv?Rv(t):t()}let YP=class{constructor(){this.status="pending",this.promise=new Promise((e,i)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",i(n))}})}};function XP(t){let{fallbackElement:e,router:i,future:n}=t,[s,a]=ne.useState(i.state),[l,p]=ne.useState(),[f,g]=ne.useState({isTransitioning:!1}),[m,k]=ne.useState(),[T,D]=ne.useState(),[P,L]=ne.useState(),$=ne.useRef(new Map),{v7_startTransition:N}=n||{},E=ne.useCallback(Z=>{N?HP(Z):Z()},[N]),B=ne.useCallback((Z,he)=>{let{deletedFetchers:ee,flushSync:re,viewTransitionOpts:we}=he;ee.forEach(Re=>$.current.delete(Re)),Z.fetchers.forEach((Re,He)=>{Re.data!==void 0&&$.current.set(He,Re.data)});let de=i.window==null||i.window.document==null||typeof i.window.document.startViewTransition!="function";if(!we||de){re?ah(()=>a(Z)):E(()=>a(Z));return}if(re){ah(()=>{T&&(m&&m.resolve(),T.skipTransition()),g({isTransitioning:!0,flushSync:!0,currentLocation:we.currentLocation,nextLocation:we.nextLocation})});let Re=i.window.document.startViewTransition(()=>{ah(()=>a(Z))});Re.finished.finally(()=>{ah(()=>{k(void 0),D(void 0),p(void 0),g({isTransitioning:!1})})}),ah(()=>D(Re));return}T?(m&&m.resolve(),T.skipTransition(),L({state:Z,currentLocation:we.currentLocation,nextLocation:we.nextLocation})):(p(Z),g({isTransitioning:!0,flushSync:!1,currentLocation:we.currentLocation,nextLocation:we.nextLocation}))},[i.window,T,m,$,E]);ne.useLayoutEffect(()=>i.subscribe(B),[i,B]),ne.useEffect(()=>{f.isTransitioning&&!f.flushSync&&k(new YP)},[f]),ne.useEffect(()=>{if(m&&l&&i.window){let Z=l,he=m.promise,ee=i.window.document.startViewTransition(async()=>{E(()=>a(Z)),await he});ee.finished.finally(()=>{k(void 0),D(void 0),p(void 0),g({isTransitioning:!1})}),D(ee)}},[E,l,m,i.window]),ne.useEffect(()=>{m&&l&&s.location.key===l.location.key&&m.resolve()},[m,T,s.location,l]),ne.useEffect(()=>{!f.isTransitioning&&P&&(p(P.state),g({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}),L(void 0))},[f.isTransitioning,P]),ne.useEffect(()=>{},[]);let H=ne.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:Z=>i.navigate(Z),push:(Z,he,ee)=>i.navigate(Z,{state:he,preventScrollReset:ee==null?void 0:ee.preventScrollReset}),replace:(Z,he,ee)=>i.navigate(Z,{replace:!0,state:he,preventScrollReset:ee==null?void 0:ee.preventScrollReset})}),[i]),U=i.basename||"/",j=ne.useMemo(()=>({router:i,navigator:H,static:!1,basename:U}),[i,H,U]),G=ne.useMemo(()=>({v7_relativeSplatPath:i.future.v7_relativeSplatPath}),[i.future.v7_relativeSplatPath]);return ne.useEffect(()=>EP(n,i.future),[n,i.future]),ne.createElement(ne.Fragment,null,ne.createElement(Dc.Provider,{value:j},ne.createElement(b2.Provider,{value:s},ne.createElement(WP.Provider,{value:$.current},ne.createElement(i3.Provider,{value:f},ne.createElement(DP,{basename:U,location:s.location,navigationType:s.historyAction,navigator:H,future:G},s.initialized||i.future.v7_partialHydration?ne.createElement(UP,{routes:i.routes,future:i.future,state:s}):e))))),null)}const UP=ne.memo(GP);function GP(t){let{routes:e,future:i,state:n}=t;return gP(e,void 0,n,i)}const KP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ur=ne.forwardRef(function(e,i){let{onClick:n,relative:s,reloadDocument:a,replace:l,state:p,target:f,to:g,preventScrollReset:m,viewTransition:k}=e,T=t3(e,LP),{basename:D}=ne.useContext(ga),P,L=!1;if(typeof g=="string"&&QP.test(g)&&(P=g,KP))try{let B=new URL(window.location.href),H=g.startsWith("//")?new URL(B.protocol+g):new URL(g),U=Mr(H.pathname,D);H.origin===B.origin&&U!=null?g=U+H.search+H.hash:L=!0}catch{}let $=dP(g,{relative:s}),N=JP(g,{replace:l,state:p,target:f,preventScrollReset:m,relative:s,viewTransition:k});function E(B){n&&n(B),B.defaultPrevented||N(B)}return ne.createElement("a",dl({},T,{href:P||$,onClick:L||a?n:E,ref:i,target:f}))}),Ni=ne.forwardRef(function(e,i){let{"aria-current":n="page",caseSensitive:s=!1,className:a="",end:l=!1,style:p,to:f,viewTransition:g,children:m}=e,k=t3(e,NP),T=B0(f,{relative:k.relative}),D=Fc(),P=ne.useContext(b2),{navigator:L,basename:$}=ne.useContext(ga),N=P!=null&&qP(T)&&g===!0,E=L.encodeLocation?L.encodeLocation(T).pathname:T.pathname,B=D.pathname,H=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;s||(B=B.toLowerCase(),H=H?H.toLowerCase():null,E=E.toLowerCase()),H&&$&&(H=Mr(H,$)||H);const U=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let j=B===E||!l&&B.startsWith(E)&&B.charAt(U)==="/",G=H!=null&&(H===E||!l&&H.startsWith(E)&&H.charAt(E.length)==="/"),Z={isActive:j,isPending:G,isTransitioning:N},he=j?n:void 0,ee;typeof a=="function"?ee=a(Z):ee=[a,j?"active":null,G?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let re=typeof p=="function"?p(Z):p;return ne.createElement(ur,dl({},k,{"aria-current":he,className:ee,ref:i,style:re,to:f,viewTransition:g}),typeof m=="function"?m(Z):m)});var xm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xm||(xm={}));var Vv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Vv||(Vv={}));function ZP(t){let e=ne.useContext(Dc);return e||Bt(!1),e}function JP(t,e){let{target:i,replace:n,state:s,preventScrollReset:a,relative:l,viewTransition:p}=e===void 0?{}:e,f=pP(),g=Fc(),m=B0(t,{relative:l});return ne.useCallback(k=>{if(BP(k,i)){k.preventDefault();let T=n!==void 0?n:qa(g)===qa(m);f(t,{replace:T,state:s,preventScrollReset:a,relative:l,viewTransition:p})}},[g,f,m,n,s,i,t,a,l,p])}function qP(t,e){e===void 0&&(e={});let i=ne.useContext(i3);i==null&&Bt(!1);let{basename:n}=ZP(xm.useViewTransitionState),s=B0(t,{relative:e.relative});if(!i.isTransitioning)return!1;let a=Mr(i.currentLocation.pathname,n)||i.currentLocation.pathname,l=Mr(i.nextLocation.pathname,n)||i.nextLocation.pathname;return Ld(s.pathname,l)!=null||Ld(s.pathname,a)!=null}function eE({setPortion:t,portion:e}){return w.jsxs("div",{className:"flex gap-10 items-center justify-between pb-6",children:[w.jsx("h2",{className:"text-4xl font-sans font-medium",children:"Forming Machine"}),w.jsxs("div",{className:"flex gap-4 items-center",children:[w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx("input",{type:"checkbox",name:"fAll",id:"fAll",className:"w-4 h-4",checked:e=="all",onClick:()=>t("all")}),w.jsx("label",{htmlFor:"fAll",className:"text-xl",children:"All"})]}),w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx("input",{type:"checkbox",name:"fActive",id:"fActive",className:"w-4 h-4",checked:e=="active",onClick:()=>t("active")}),w.jsx("label",{htmlFor:"fActive",className:"text-xl",children:"Active"})]}),w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx("input",{type:"checkbox",name:"fIdle",id:"fIdle",className:"w-4 h-4",checked:e=="idle",onClick:()=>t("idle")}),w.jsx("label",{htmlFor:"fIdle",className:"text-xl",children:"Idle"})]})]})]})}const tE="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='47'%20height='47'%20rx='23.5'%20stroke='white'/%3e%3cpath%20d='M18.0625%2021.625C18.0625%2021.2798%2018.3423%2021%2018.6875%2021H22.125C22.2484%2021%2022.369%2021.0365%2022.4717%2021.105L24%2022.1238L25.5283%2021.105C25.631%2021.0365%2025.7516%2021%2025.875%2021H29.3125C29.6577%2021%2029.9375%2021.2798%2029.9375%2021.625C29.9375%2021.9702%2029.6577%2022.25%2029.3125%2022.25H26.0642L24.3467%2023.395C24.1368%2023.535%2023.8632%2023.535%2023.6533%2023.395L21.9358%2022.25H18.6875C18.3423%2022.25%2018.0625%2021.9702%2018.0625%2021.625Z'%20fill='white'/%3e%3cpath%20d='M25.5312%2033.75C25.1861%2033.75%2024.9062%2034.0298%2024.9062%2034.375C24.9062%2034.7202%2025.1861%2035%2025.5312%2035H28.3438C28.6889%2035%2028.9688%2034.7202%2028.9688%2034.375C28.9688%2034.0298%2028.6889%2033.75%2028.3438%2033.75H25.5312Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.0312%2031.25C22.6861%2031.25%2022.4062%2031.5298%2022.4062%2031.875V36.875C22.4062%2037.2202%2022.6861%2037.5%2023.0312%2037.5H30.8438C31.1889%2037.5%2031.4688%2037.2202%2031.4688%2036.875V31.875C31.4688%2031.5298%2031.1889%2031.25%2030.8438%2031.25H23.0312ZM23.6562%2036.25V32.5H30.2188V36.25H23.6562Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M18.5312%208C18.1861%208%2017.9062%208.27982%2017.9062%208.625V9.71875H11.6562C11.3111%209.71875%2011.0312%209.99857%2011.0312%2010.3438V12.8438C11.0312%2013.1889%2011.3111%2013.4688%2011.6562%2013.4688H14V26.875C14%2027.2202%2014.2798%2027.5%2014.625%2027.5H15.5625V28.75H14.625C14.2798%2028.75%2014%2029.0298%2014%2029.375V39.375C14%2039.7202%2014.2798%2040%2014.625%2040H33.375C33.7202%2040%2034%2039.7202%2034%2039.375V29.375C34%2029.0298%2033.7202%2028.75%2033.375%2028.75H32.4375V27.5H33.375C33.7202%2027.5%2034%2027.2202%2034%2026.875V13.4688H36.3438C36.6889%2013.4688%2036.9688%2013.1889%2036.9688%2012.8438V10.3438C36.9688%209.99857%2036.6889%209.71875%2036.3438%209.71875H30.0938V8.625C30.0938%208.27982%2029.8139%208%2029.4688%208H18.5312ZM32.75%2013.4688H30.0938V14.5625C30.0938%2014.9077%2029.8139%2015.1875%2029.4688%2015.1875H26.5V17.9375C26.5%2018.1033%2026.4342%2018.2622%2026.3169%2018.3794L24.4419%2020.2544C24.1979%2020.4985%2023.8021%2020.4985%2023.5581%2020.2544L21.6831%2018.3794C21.5658%2018.2622%2021.5%2018.1033%2021.5%2017.9375V15.1875H18.5312C18.1861%2015.1875%2017.9062%2014.9077%2017.9062%2014.5625V13.4688H15.25V26.25H18.0625V24.6875C18.0625%2024.3423%2018.3423%2024.0625%2018.6875%2024.0625H22.125C22.2484%2024.0625%2022.369%2024.099%2022.4717%2024.1675L24%2025.1863L25.5283%2024.1675C25.631%2024.099%2025.7516%2024.0625%2025.875%2024.0625H29.3125C29.6577%2024.0625%2029.9375%2024.3423%2029.9375%2024.6875V26.25H32.75V13.4688ZM35.7188%2012.2188V10.9688H30.0938V12.2188H35.7188ZM28.8438%209.25H19.1562V13.9375H28.8438V9.25ZM17.9062%2012.2188V10.9688H12.2812V12.2188H17.9062ZM25.25%2015.1875H22.75V17.6786L24%2018.9286L25.25%2017.6786V15.1875ZM28.6875%2025.3125H26.0642L24.3467%2026.4575C24.1367%2026.5975%2023.8632%2026.5975%2023.6533%2026.4575L21.9358%2025.3125H19.3125V28.75H28.6875V25.3125ZM31.1875%2027.5H29.9375V28.75H31.1875V27.5ZM16.8125%2028.75H18.0625V27.5H16.8125V28.75ZM15.25%2030V38.75H32.75V30H15.25Z'%20fill='white'/%3e%3c/svg%3e";var Ov={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je=function(t,e){if(!t)throw Ll(e)},Ll=function(t){return new Error("Firebase Database ("+n3.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[i++]=s:s<2048?(e[i++]=s>>6|192,e[i++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[i++]=s>>18|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128,e[i++]=s&63|128):(e[i++]=s>>12|224,e[i++]=s>>6&63|128,e[i++]=s&63|128)}return e},iE=function(t){const e=[];let i=0,n=0;for(;i<t.length;){const s=t[i++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[i++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[i++],l=t[i++],p=t[i++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|p&63)-65536;e[n++]=String.fromCharCode(55296+(f>>10)),e[n++]=String.fromCharCode(56320+(f&1023))}else{const a=t[i++],l=t[i++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},C2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,p=l?t[s+1]:0,f=s+2<t.length,g=f?t[s+2]:0,m=a>>2,k=(a&3)<<4|p>>4;let T=(p&15)<<2|g>>6,D=g&63;f||(D=64,l||(T=64)),n.push(i[m],i[k],i[T],i[D])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=i[t.charAt(s++)],p=s<t.length?i[t.charAt(s)]:0;++s;const g=s<t.length?i[t.charAt(s)]:64;++s;const k=s<t.length?i[t.charAt(s)]:64;if(++s,a==null||p==null||g==null||k==null)throw new nE;const T=a<<2|p>>4;if(n.push(T),g!==64){const D=p<<4&240|g>>2;if(n.push(D),k!==64){const P=g<<6&192|k;n.push(P)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r3=function(t){const e=s3(t);return C2.encodeByteArray(e,!0)},Od=function(t){return r3(t).replace(/\./g,"")},mm=function(t){try{return C2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t){return a3(void 0,t)}function a3(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const i=e;return new Date(i.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const i in e)!e.hasOwnProperty(i)||!rE(i)||(t[i]=a3(t[i],e[i]));return t}function rE(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=()=>aE().__FIREBASE_DEFAULTS__,lE=()=>{if(typeof process>"u"||typeof Ov>"u")return;const t=Ov.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mm(t[1]);return e&&JSON.parse(e)},o3=()=>{try{return oE()||lE()||hE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cE=t=>{var e,i;return(i=(e=o3())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[t]},l3=t=>{const e=cE(t);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),n]:[e.substring(0,i),n]},h3=()=>{var t;return(t=o3())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,n)=>{i?this.reject(i):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Od(JSON.stringify(i)),Od(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function u3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(uE())}function dE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function d3(){return n3.NODE_ADMIN===!0}function pE(){try{return typeof indexedDB=="object"}catch{return!1}}function fE(){return new Promise((t,e)=>{try{let i=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),i||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{i=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="FirebaseError";class Nl extends Error{constructor(e,i,n){super(i),this.code=e,this.customData=n,this.name=xE,Object.setPrototypeOf(this,Nl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,p3.prototype.create)}}class p3{constructor(e,i,n){this.service=e,this.serviceName=i,this.errors=n}create(e,...i){const n=i[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?mE(a,n):"Error",p=`${this.serviceName}: ${l} (${s}).`;return new Nl(s,p,n)}}function mE(t,e){return t.replace(gE,(i,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const gE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t){return JSON.parse(t)}function pn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=function(t){let e={},i={},n={},s="";try{const a=t.split(".");e=ac(mm(a[0])||""),i=ac(mm(a[1])||""),s=a[2],n=i.d||{},delete i.d}catch{}return{header:e,claims:i,data:n,signature:s}},yE=function(t){const e=f3(t),i=e.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},vE=function(t){const e=f3(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function jv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jd(t,e,i){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=e.call(i,t[s],s,t));return n}function gm(t,e){if(t===e)return!0;const i=Object.keys(t),n=Object.keys(e);for(const s of i){if(!n.includes(s))return!1;const a=t[s],l=e[s];if(Wv(a)&&Wv(l)){if(!gm(a,l))return!1}else if(a!==l)return!1}for(const s of n)if(!i.includes(s))return!1;return!0}function Wv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){const e=[];for(const[i,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,i){i||(i=0);const n=this.W_;if(typeof e=="string")for(let k=0;k<16;k++)n[k]=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),i+=4;else for(let k=0;k<16;k++)n[k]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i+=4;for(let k=16;k<80;k++){const T=n[k-3]^n[k-8]^n[k-14]^n[k-16];n[k]=(T<<1|T>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],p=this.chain_[3],f=this.chain_[4],g,m;for(let k=0;k<80;k++){k<40?k<20?(g=p^a&(l^p),m=1518500249):(g=a^l^p,m=1859775393):k<60?(g=a&l|p&(a|l),m=2400959708):(g=a^l^p,m=3395469782);const T=(s<<5|s>>>27)+g+f+m+n[k]&4294967295;f=p,p=l,l=(a<<30|a>>>2)&4294967295,a=s,s=T}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,i){if(e==null)return;i===void 0&&(i=e.length);const n=i-this.blockSize;let s=0;const a=this.buf_;let l=this.inbuf_;for(;s<i;){if(l===0)for(;s<=n;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<i;)if(a[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}else for(;s<i;)if(a[l]=e[s],++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=i}digest(){const e=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=i&255,i/=256;this.compress_(this.buf_);let n=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)e[n]=this.chain_[s]>>a&255,++n;return e}}function CE(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s>=55296&&s<=56319){const a=s-55296;n++,Je(n<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(n)-56320;s=65536+(a<<10)+l}s<128?e[i++]=s:s<2048?(e[i++]=s>>6|192,e[i++]=s&63|128):s<65536?(e[i++]=s>>12|224,e[i++]=s>>6&63|128,e[i++]=s&63|128):(e[i++]=s>>18|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128,e[i++]=s&63|128)}return e},L0=function(t){let e=0;for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,i++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t){return t&&t._delegate?t._delegate:t}class fl{constructor(e,i,n){this.name=e,this.instanceFactory=i,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const n=new w2;if(this.instancesDeferred.set(i,n),this.isInitialized(i)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:i});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(i=e==null?void 0:e.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TE(e))try{this.getOrInitializeService({instanceIdentifier:Ea})}catch{}for(const[i,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(i);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=Ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ea){return this.instances.has(e)}getOptions(e=Ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:i});for(const[a,l]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(a);n===p&&l.resolve(s)}return s}onInit(e,i){var n;const s=this.normalizeInstanceIdentifier(i),a=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,i){const n=this.onInitCallbacks.get(i);if(n)for(const s of n)try{s(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:kE(e),options:i}),this.instances.set(e,n),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ea){return this.component?this.component.multipleInstances?e:Ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kE(t){return t===Ea?void 0:t}function TE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new SE(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gt||(Gt={}));const PE={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},EE=Gt.INFO,AE={[Gt.DEBUG]:"log",[Gt.VERBOSE]:"log",[Gt.INFO]:"info",[Gt.WARN]:"warn",[Gt.ERROR]:"error"},DE=(t,e,...i)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=AE[e];if(s)console[s](`[${n}]  ${t.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class S2{constructor(e){this.name=e,this._logLevel=EE,this._logHandler=DE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gt.DEBUG,...e),this._logHandler(this,Gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gt.VERBOSE,...e),this._logHandler(this,Gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gt.INFO,...e),this._logHandler(this,Gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gt.WARN,...e),this._logHandler(this,Gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gt.ERROR,...e),this._logHandler(this,Gt.ERROR,...e)}}const IE=(t,e)=>e.some(i=>t instanceof i);let zv,$v;function FE(){return zv||(zv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BE(){return $v||($v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const x3=new WeakMap,ym=new WeakMap,m3=new WeakMap,hf=new WeakMap,k2=new WeakMap;function LE(t){const e=new Promise((i,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{i(ea(t.result)),s()},l=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(i=>{i instanceof IDBCursor&&x3.set(i,t)}).catch(()=>{}),k2.set(e,t),e}function NE(t){if(ym.has(t))return;const e=new Promise((i,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{i(),s()},l=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});ym.set(t,e)}let vm={get(t,e,i){if(t instanceof IDBTransaction){if(e==="done")return ym.get(t);if(e==="objectStoreNames")return t.objectStoreNames||m3.get(t);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ea(t[e])},set(t,e,i){return t[e]=i,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RE(t){vm=t(vm)}function VE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const n=t.call(cf(this),e,...i);return m3.set(n,e.sort?e.sort():[e]),ea(n)}:BE().includes(t)?function(...e){return t.apply(cf(this),e),ea(x3.get(this))}:function(...e){return ea(t.apply(cf(this),e))}}function OE(t){return typeof t=="function"?VE(t):(t instanceof IDBTransaction&&NE(t),IE(t,FE())?new Proxy(t,vm):t)}function ea(t){if(t instanceof IDBRequest)return LE(t);if(hf.has(t))return hf.get(t);const e=OE(t);return e!==t&&(hf.set(t,e),k2.set(e,t)),e}const cf=t=>k2.get(t);function jE(t,e,{blocked:i,upgrade:n,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),p=ea(l);return n&&l.addEventListener("upgradeneeded",f=>{n(ea(l.result),f.oldVersion,f.newVersion,ea(l.transaction),f)}),i&&l.addEventListener("blocked",f=>i(f.oldVersion,f.newVersion,f)),p.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const WE=["get","getKey","getAll","getAllKeys","count"],zE=["put","add","delete","clear"],uf=new Map;function Hv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uf.get(e))return uf.get(e);const i=e.replace(/FromIndex$/,""),n=e!==i,s=zE.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!(s||WE.includes(i)))return;const a=async function(l,...p){const f=this.transaction(l,s?"readwrite":"readonly");let g=f.store;return n&&(g=g.index(p.shift())),(await Promise.all([g[i](...p),s&&f.done]))[0]};return uf.set(e,a),a}RE(t=>({...t,get:(e,i,n)=>Hv(e,i)||t.get(e,i,n),has:(e,i)=>!!Hv(e,i)||t.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(HE(i)){const n=i.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(i=>i).join(" ")}}function HE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bm="@firebase/app",Yv="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new S2("@firebase/app"),YE="@firebase/app-compat",XE="@firebase/analytics-compat",UE="@firebase/analytics",GE="@firebase/app-check-compat",KE="@firebase/app-check",QE="@firebase/auth",ZE="@firebase/auth-compat",JE="@firebase/database",qE="@firebase/database-compat",eA="@firebase/functions",tA="@firebase/functions-compat",iA="@firebase/installations",nA="@firebase/installations-compat",sA="@firebase/messaging",rA="@firebase/messaging-compat",aA="@firebase/performance",oA="@firebase/performance-compat",lA="@firebase/remote-config",hA="@firebase/remote-config-compat",cA="@firebase/storage",uA="@firebase/storage-compat",dA="@firebase/firestore",pA="@firebase/firestore-compat",fA="firebase",xA="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="[DEFAULT]",mA={[bm]:"fire-core",[YE]:"fire-core-compat",[UE]:"fire-analytics",[XE]:"fire-analytics-compat",[KE]:"fire-app-check",[GE]:"fire-app-check-compat",[QE]:"fire-auth",[ZE]:"fire-auth-compat",[JE]:"fire-rtdb",[qE]:"fire-rtdb-compat",[eA]:"fire-fn",[tA]:"fire-fn-compat",[iA]:"fire-iid",[nA]:"fire-iid-compat",[sA]:"fire-fcm",[rA]:"fire-fcm-compat",[aA]:"fire-perf",[oA]:"fire-perf-compat",[lA]:"fire-rc",[hA]:"fire-rc-compat",[cA]:"fire-gcs",[uA]:"fire-gcs-compat",[dA]:"fire-fst",[pA]:"fire-fst-compat","fire-js":"fire-js",[fA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new Map,Cm=new Map;function gA(t,e){try{t.container.addComponent(e)}catch(i){eo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,i)}}function oc(t){const e=t.name;if(Cm.has(e))return eo.debug(`There were multiple attempts to register component ${e}.`),!1;Cm.set(e,t);for(const i of Wd.values())gA(i,t);return!0}function g3(t,e){const i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ta=new p3("app","Firebase",yA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,i,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ta.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=xA;function v3(t,e={}){let i=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:_m,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw ta.create("bad-app-name",{appName:String(s)});if(i||(i=h3()),!i)throw ta.create("no-options");const a=Wd.get(s);if(a){if(gm(i,a.options)&&gm(n,a.config))return a;throw ta.create("duplicate-app",{appName:s})}const l=new ME(s);for(const f of Cm.values())l.addComponent(f);const p=new vA(i,n,l);return Wd.set(s,p),p}function b3(t=_m){const e=Wd.get(t);if(!e&&t===_m&&h3())return v3();if(!e)throw ta.create("no-app",{appName:t});return e}function ia(t,e,i){var n;let s=(n=mA[t])!==null&&n!==void 0?n:t;i&&(s+=`-${i}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const p=[`Unable to register library "${s}" with version "${e}":`];a&&p.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&p.push("and"),l&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),eo.warn(p.join(" "));return}oc(new fl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="firebase-heartbeat-database",_A=1,lc="firebase-heartbeat-store";let df=null;function _3(){return df||(df=jE(bA,_A,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(lc)}}}).catch(t=>{throw ta.create("idb-open",{originalErrorMessage:t.message})})),df}async function CA(t){try{return await(await _3()).transaction(lc).objectStore(lc).get(C3(t))}catch(e){if(e instanceof Nl)eo.warn(e.message);else{const i=ta.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});eo.warn(i.message)}}}async function Xv(t,e){try{const n=(await _3()).transaction(lc,"readwrite");await n.objectStore(lc).put(e,C3(t)),await n.done}catch(i){if(i instanceof Nl)eo.warn(i.message);else{const n=ta.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});eo.warn(n.message)}}}function C3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=1024,SA=30*24*60*60*1e3;class kA{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new MA(i),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Uv();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=SA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Uv(),{heartbeatsToSend:i,unsentEntries:n}=TA(this._heartbeatsCache.heartbeats),s=Od(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Uv(){return new Date().toISOString().substring(0,10)}function TA(t,e=wA){const i=[];let n=t.slice();for(const s of t){const a=i.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),Gv(i)>e){a.dates.pop();break}}else if(i.push({agent:s.agent,dates:[s.date]}),Gv(i)>e){i.pop();break}n=n.slice(1)}return{heartbeatsToSend:i,unsentEntries:n}}class MA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pE()?fE().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await CA(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gv(t){return Od(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t){oc(new fl("platform-logger",e=>new $E(e),"PRIVATE")),oc(new fl("heartbeat",e=>new kA(e),"PRIVATE")),ia(bm,Yv,t),ia(bm,Yv,"esm2017"),ia("fire-js","")}PA("");var EA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qe,T2=T2||{},_t=EA||self;function N0(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function R0(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function AA(t){return Object.prototype.hasOwnProperty.call(t,pf)&&t[pf]||(t[pf]=++DA)}var pf="closure_uid_"+(1e9*Math.random()>>>0),DA=0;function IA(t,e,i){return t.call.apply(t.bind,arguments)}function FA(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,n),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Mn(t,e,i){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Mn=IA:Mn=FA,Mn.apply(null,arguments)}function Cu(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var n=i.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function ln(t,e){function i(){}i.prototype=e.prototype,t.$=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.ac=function(n,s,a){for(var l=Array(arguments.length-2),p=2;p<arguments.length;p++)l[p-2]=arguments[p];return e.prototype[s].apply(n,l)}}function va(){this.s=this.s,this.o=this.o}var BA=0;va.prototype.s=!1;va.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),BA!=0)&&AA(this)};va.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const w3=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let i=0;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1};function M2(t){const e=t.length;if(0<e){const i=Array(e);for(let n=0;n<e;n++)i[n]=t[n];return i}return[]}function Kv(t,e){for(let i=1;i<arguments.length;i++){const n=arguments[i];if(N0(n)){const s=t.length||0,a=n.length||0;t.length=s+a;for(let l=0;l<a;l++)t[s+l]=n[l]}else t.push(n)}}function Pn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Pn.prototype.h=function(){this.defaultPrevented=!0};var LA=function(){if(!_t.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{_t.addEventListener("test",()=>{},e),_t.removeEventListener("test",()=>{},e)}catch{}return t}();function hc(t){return/^[\s\xa0]*$/.test(t)}function V0(){var t=_t.navigator;return t&&(t=t.userAgent)?t:""}function Ks(t){return V0().indexOf(t)!=-1}function P2(t){return P2[" "](t),t}P2[" "]=function(){};function NA(t,e){var i=E9;return Object.prototype.hasOwnProperty.call(i,t)?i[t]:i[t]=e(t)}var RA=Ks("Opera"),xl=Ks("Trident")||Ks("MSIE"),S3=Ks("Edge"),wm=S3||xl,k3=Ks("Gecko")&&!(V0().toLowerCase().indexOf("webkit")!=-1&&!Ks("Edge"))&&!(Ks("Trident")||Ks("MSIE"))&&!Ks("Edge"),VA=V0().toLowerCase().indexOf("webkit")!=-1&&!Ks("Edge");function T3(){var t=_t.document;return t?t.documentMode:void 0}var Sm;e:{var ff="",xf=function(){var t=V0();if(k3)return/rv:([^\);]+)(\)|;)/.exec(t);if(S3)return/Edge\/([\d\.]+)/.exec(t);if(xl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(VA)return/WebKit\/(\S+)/.exec(t);if(RA)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(xf&&(ff=xf?xf[1]:""),xl){var mf=T3();if(mf!=null&&mf>parseFloat(ff)){Sm=String(mf);break e}}Sm=ff}var km;if(_t.document&&xl){var Qv=T3();km=Qv||parseInt(Sm,10)||void 0}else km=void 0;var OA=km;function cc(t,e){if(Pn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(k3){e:{try{P2(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else i=="mouseover"?e=t.fromElement:i=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:jA[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&cc.$.h.call(this)}}ln(cc,Pn);var jA={2:"touch",3:"pen",4:"mouse"};cc.prototype.h=function(){cc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var O0="closure_listenable_"+(1e6*Math.random()|0),WA=0;function zA(t,e,i,n,s){this.listener=t,this.proxy=null,this.src=e,this.type=i,this.capture=!!n,this.la=s,this.key=++WA,this.fa=this.ia=!1}function j0(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function E2(t,e,i){for(const n in t)e.call(i,t[n],n,t)}function $A(t,e){for(const i in t)e.call(void 0,t[i],i,t)}function M3(t){const e={};for(const i in t)e[i]=t[i];return e}const Zv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P3(t,e){let i,n;for(let s=1;s<arguments.length;s++){n=arguments[s];for(i in n)t[i]=n[i];for(let a=0;a<Zv.length;a++)i=Zv[a],Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}}function W0(t){this.src=t,this.g={},this.h=0}W0.prototype.add=function(t,e,i,n,s){var a=t.toString();t=this.g[a],t||(t=this.g[a]=[],this.h++);var l=Mm(t,e,n,s);return-1<l?(e=t[l],i||(e.ia=!1)):(e=new zA(e,this.src,a,!!n,s),e.ia=i,t.push(e)),e};function Tm(t,e){var i=e.type;if(i in t.g){var n=t.g[i],s=w3(n,e),a;(a=0<=s)&&Array.prototype.splice.call(n,s,1),a&&(j0(e),t.g[i].length==0&&(delete t.g[i],t.h--))}}function Mm(t,e,i,n){for(var s=0;s<t.length;++s){var a=t[s];if(!a.fa&&a.listener==e&&a.capture==!!i&&a.la==n)return s}return-1}var A2="closure_lm_"+(1e6*Math.random()|0),gf={};function E3(t,e,i,n,s){if(Array.isArray(e)){for(var a=0;a<e.length;a++)E3(t,e[a],i,n,s);return null}return i=I3(i),t&&t[O0]?t.O(e,i,R0(n)?!!n.capture:!!n,s):HA(t,e,i,!1,n,s)}function HA(t,e,i,n,s,a){if(!e)throw Error("Invalid event type");var l=R0(s)?!!s.capture:!!s,p=I2(t);if(p||(t[A2]=p=new W0(t)),i=p.add(e,i,n,l,a),i.proxy)return i;if(n=YA(),i.proxy=n,n.src=t,n.listener=i,t.addEventListener)LA||(s=l),s===void 0&&(s=!1),t.addEventListener(e.toString(),n,s);else if(t.attachEvent)t.attachEvent(D3(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return i}function YA(){function t(i){return e.call(t.src,t.listener,i)}const e=XA;return t}function A3(t,e,i,n,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)A3(t,e[a],i,n,s);else n=R0(n)?!!n.capture:!!n,i=I3(i),t&&t[O0]?(t=t.i,e=String(e).toString(),e in t.g&&(a=t.g[e],i=Mm(a,i,n,s),-1<i&&(j0(a[i]),Array.prototype.splice.call(a,i,1),a.length==0&&(delete t.g[e],t.h--)))):t&&(t=I2(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Mm(e,i,n,s)),(i=-1<t?e[t]:null)&&D2(i))}function D2(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[O0])Tm(e.i,t);else{var i=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(i,n,t.capture):e.detachEvent?e.detachEvent(D3(i),n):e.addListener&&e.removeListener&&e.removeListener(n),(i=I2(e))?(Tm(i,t),i.h==0&&(i.src=null,e[A2]=null)):j0(t)}}}function D3(t){return t in gf?gf[t]:gf[t]="on"+t}function XA(t,e){if(t.fa)t=!0;else{e=new cc(e,this);var i=t.listener,n=t.la||t.src;t.ia&&D2(t),t=i.call(n,e)}return t}function I2(t){return t=t[A2],t instanceof W0?t:null}var yf="__closure_events_fn_"+(1e9*Math.random()>>>0);function I3(t){return typeof t=="function"?t:(t[yf]||(t[yf]=function(e){return t.handleEvent(e)}),t[yf])}function on(){va.call(this),this.i=new W0(this),this.S=this,this.J=null}ln(on,va);on.prototype[O0]=!0;on.prototype.removeEventListener=function(t,e,i,n){A3(this,t,e,i,n)};function xn(t,e){var i,n=t.J;if(n)for(i=[];n;n=n.J)i.push(n);if(t=t.S,n=e.type||e,typeof e=="string")e=new Pn(e,t);else if(e instanceof Pn)e.target=e.target||t;else{var s=e;e=new Pn(n,t),P3(e,s)}if(s=!0,i)for(var a=i.length-1;0<=a;a--){var l=e.g=i[a];s=wu(l,n,!0,e)&&s}if(l=e.g=t,s=wu(l,n,!0,e)&&s,s=wu(l,n,!1,e)&&s,i)for(a=0;a<i.length;a++)l=e.g=i[a],s=wu(l,n,!1,e)&&s}on.prototype.N=function(){if(on.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var i=t.g[e],n=0;n<i.length;n++)j0(i[n]);delete t.g[e],t.h--}}this.J=null};on.prototype.O=function(t,e,i,n){return this.i.add(String(t),e,!1,i,n)};on.prototype.P=function(t,e,i,n){return this.i.add(String(t),e,!0,i,n)};function wu(t,e,i,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==i){var p=l.listener,f=l.la||l.src;l.ia&&Tm(t.i,l),s=p.call(f,n)!==!1&&s}}return s&&!n.defaultPrevented}var F2=_t.JSON.stringify;class UA{constructor(e,i){this.i=e,this.j=i,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function GA(){var t=B2;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class KA{constructor(){this.h=this.g=null}add(e,i){const n=F3.get();n.set(e,i),this.h?this.h.next=n:this.g=n,this.h=n}}var F3=new UA(()=>new QA,t=>t.reset());class QA{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}function ZA(t){var e=1;t=t.split(":");const i=[];for(;0<e&&t.length;)i.push(t.shift()),e--;return t.length&&i.push(t.join(":")),i}function JA(t){_t.setTimeout(()=>{throw t},0)}let uc,dc=!1,B2=new KA,B3=()=>{const t=_t.Promise.resolve(void 0);uc=()=>{t.then(qA)}};var qA=()=>{for(var t;t=GA();){try{t.h.call(t.g)}catch(i){JA(i)}var e=F3;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}dc=!1};function z0(t,e){on.call(this),this.h=t||1,this.g=e||_t,this.j=Mn(this.qb,this),this.l=Date.now()}ln(z0,on);qe=z0.prototype;qe.ga=!1;qe.T=null;qe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xn(this,"tick"),this.ga&&(L2(this),this.start()))}};qe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function L2(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}qe.N=function(){z0.$.N.call(this),L2(this),delete this.g};function N2(t,e,i){if(typeof t=="function")i&&(t=Mn(t,i));else if(t&&typeof t.handleEvent=="function")t=Mn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:_t.setTimeout(t,e||0)}function L3(t){t.g=N2(()=>{t.g=null,t.i&&(t.i=!1,L3(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class e9 extends va{constructor(e,i){super(),this.m=e,this.j=i,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:L3(this)}N(){super.N(),this.g&&(_t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pc(t){va.call(this),this.h=t,this.g={}}ln(pc,va);var Jv=[];function N3(t,e,i,n){Array.isArray(i)||(i&&(Jv[0]=i.toString()),i=Jv);for(var s=0;s<i.length;s++){var a=E3(e,i[s],n||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function R3(t){E2(t.g,function(e,i){this.g.hasOwnProperty(i)&&D2(e)},t),t.g={}}pc.prototype.N=function(){pc.$.N.call(this),R3(this)};pc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function $0(){this.g=!0}$0.prototype.Ea=function(){this.g=!1};function t9(t,e,i,n,s,a){t.info(function(){if(t.g)if(a)for(var l="",p=a.split("&"),f=0;f<p.length;f++){var g=p[f].split("=");if(1<g.length){var m=g[0];g=g[1];var k=m.split("_");l=2<=k.length&&k[1]=="type"?l+(m+"="+g+"&"):l+(m+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+n+") [attempt "+s+"]: "+e+`
`+i+`
`+l})}function i9(t,e,i,n,s,a,l){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+s+"]: "+e+`
`+i+`
`+a+" "+l})}function zo(t,e,i,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+s9(t,i)+(n?" "+n:"")})}function n9(t,e){t.info(function(){return"TIMEOUT: "+e})}$0.prototype.info=function(){};function s9(t,e){if(!t.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i){for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var n=i[t];if(!(2>n.length)){var s=n[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if(a!="noop"&&a!="stop"&&a!="close")for(var l=1;l<s.length;l++)s[l]=""}}}}return F2(i)}catch{return e}}var ho={},qv=null;function H0(){return qv=qv||new on}ho.Ta="serverreachability";function V3(t){Pn.call(this,ho.Ta,t)}ln(V3,Pn);function fc(t){const e=H0();xn(e,new V3(e))}ho.STAT_EVENT="statevent";function O3(t,e){Pn.call(this,ho.STAT_EVENT,t),this.stat=e}ln(O3,Pn);function In(t){const e=H0();xn(e,new O3(e,t))}ho.Ua="timingevent";function j3(t,e){Pn.call(this,ho.Ua,t),this.size=e}ln(j3,Pn);function Bc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return _t.setTimeout(function(){t()},e)}var Y0={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},W3={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function R2(){}R2.prototype.h=null;function eb(t){return t.h||(t.h=t.i())}function z3(){}var Lc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function V2(){Pn.call(this,"d")}ln(V2,Pn);function O2(){Pn.call(this,"c")}ln(O2,Pn);var Pm;function X0(){}ln(X0,R2);X0.prototype.g=function(){return new XMLHttpRequest};X0.prototype.i=function(){return{}};Pm=new X0;function Nc(t,e,i,n){this.l=t,this.j=e,this.m=i,this.W=n||1,this.U=new pc(this),this.P=r9,t=wm?125:void 0,this.V=new z0(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $3}function $3(){this.i=null,this.g="",this.h=!1}var r9=45e3,Em={},zd={};qe=Nc.prototype;qe.setTimeout=function(t){this.P=t};function Am(t,e,i){t.L=1,t.v=G0(Pr(e)),t.s=i,t.S=!0,H3(t,null)}function H3(t,e){t.G=Date.now(),Rc(t),t.A=Pr(t.v);var i=t.A,n=t.W;Array.isArray(n)||(n=[String(n)]),J3(i.i,"t",n),t.C=0,i=t.l.J,t.h=new $3,t.g=v5(t.l,i?e:null,!t.s),0<t.O&&(t.M=new e9(Mn(t.Pa,t,t.g),t.O)),N3(t.U,t.g,"readystatechange",t.nb),e=t.I?M3(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),fc(),t9(t.j,t.u,t.A,t.m,t.W,t.s)}qe.nb=function(t){t=t.target;const e=this.M;e&&Qs(t)==3?e.l():this.Pa(t)};qe.Pa=function(t){try{if(t==this.g)e:{const m=Qs(this.g);var e=this.g.Ia();const k=this.g.da();if(!(3>m)&&(m!=3||wm||this.g&&(this.h.h||this.g.ja()||sb(this.g)))){this.J||m!=4||e==7||(e==8||0>=k?fc(3):fc(2)),U0(this);var i=this.g.da();this.ca=i;t:if(Y3(this)){var n=sb(this.g);t="";var s=n.length,a=Qs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ra(this),Fh(this);var l="";break t}this.h.i=new _t.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:a&&e==s-1});n.splice(0,s),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=i==200,i9(this.j,this.u,this.A,this.m,this.W,m,i),this.i){if(this.aa&&!this.K){t:{if(this.g){var p,f=this.g;if((p=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hc(p)){var g=p;break t}}g=null}if(i=g)zo(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dm(this,i);else{this.i=!1,this.o=3,In(12),Ra(this),Fh(this);break e}}this.S?(X3(this,m,l),wm&&this.i&&m==3&&(N3(this.U,this.V,"tick",this.mb),this.V.start())):(zo(this.j,this.m,l,null),Dm(this,l)),m==4&&Ra(this),this.i&&!this.J&&(m==4?x5(this.l,this):(this.i=!1,Rc(this)))}else T9(this.g),i==400&&0<l.indexOf("Unknown SID")?(this.o=3,In(12)):(this.o=0,In(13)),Ra(this),Fh(this)}}}catch{}finally{}};function Y3(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function X3(t,e,i){let n=!0,s;for(;!t.J&&t.C<i.length;)if(s=a9(t,i),s==zd){e==4&&(t.o=4,In(14),n=!1),zo(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Em){t.o=4,In(15),zo(t.j,t.m,i,"[Invalid Chunk]"),n=!1;break}else zo(t.j,t.m,s,null),Dm(t,s);Y3(t)&&s!=zd&&s!=Em&&(t.h.g="",t.C=0),e!=4||i.length!=0||t.h.h||(t.o=1,In(16),n=!1),t.i=t.i&&n,n?0<i.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+i.length),Y2(e),e.M=!0,In(11))):(zo(t.j,t.m,i,"[Invalid Chunked Response]"),Ra(t),Fh(t))}qe.mb=function(){if(this.g){var t=Qs(this.g),e=this.g.ja();this.C<e.length&&(U0(this),X3(this,t,e),this.i&&t!=4&&Rc(this))}};function a9(t,e){var i=t.C,n=e.indexOf(`
`,i);return n==-1?zd:(i=Number(e.substring(i,n)),isNaN(i)?Em:(n+=1,n+i>e.length?zd:(e=e.slice(n,n+i),t.C=n+i,e)))}qe.cancel=function(){this.J=!0,Ra(this)};function Rc(t){t.Y=Date.now()+t.P,U3(t,t.P)}function U3(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Bc(Mn(t.lb,t),e)}function U0(t){t.B&&(_t.clearTimeout(t.B),t.B=null)}qe.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(n9(this.j,this.A),this.L!=2&&(fc(),In(17)),Ra(this),this.o=2,Fh(this)):U3(this,this.Y-t)};function Fh(t){t.l.H==0||t.J||x5(t.l,t)}function Ra(t){U0(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,L2(t.V),R3(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Dm(t,e){try{var i=t.l;if(i.H!=0&&(i.g==t||Im(i.i,t))){if(!t.K&&Im(i.i,t)&&i.H==3){try{var n=i.Ja.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var s=n;if(s[0]==0){e:if(!i.u){if(i.g)if(i.g.G+3e3<t.G)Yd(i),Z0(i);else break e;H2(i),In(18)}}else i.Fa=s[1],0<i.Fa-i.V&&37500>s[2]&&i.G&&i.A==0&&!i.v&&(i.v=Bc(Mn(i.ib,i),6e3));if(1>=t5(i.i)&&i.oa){try{i.oa()}catch{}i.oa=void 0}}else Va(i,11)}else if((t.K||i.g==t)&&Yd(i),!hc(e))for(s=i.Ja.g.parse(e),e=0;e<s.length;e++){let g=s[e];if(i.V=g[0],g=g[1],i.H==2)if(g[0]=="c"){i.K=g[1],i.pa=g[2];const m=g[3];m!=null&&(i.ra=m,i.l.info("VER="+i.ra));const k=g[4];k!=null&&(i.Ga=k,i.l.info("SVER="+i.Ga));const T=g[5];T!=null&&typeof T=="number"&&0<T&&(n=1.5*T,i.L=n,i.l.info("backChannelRequestTimeoutMs_="+n)),n=i;const D=t.g;if(D){const P=D.g?D.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var a=n.i;a.g||P.indexOf("spdy")==-1&&P.indexOf("quic")==-1&&P.indexOf("h2")==-1||(a.j=a.l,a.g=new Set,a.h&&(j2(a,a.h),a.h=null))}if(n.F){const L=D.g?D.g.getResponseHeader("X-HTTP-Session-Id"):null;L&&(n.Da=L,pi(n.I,n.F,L))}}i.H=3,i.h&&i.h.Ba(),i.ca&&(i.S=Date.now()-t.G,i.l.info("Handshake RTT: "+i.S+"ms")),n=i;var l=t;if(n.wa=y5(n,n.J?n.pa:null,n.Y),l.K){i5(n.i,l);var p=l,f=n.L;f&&p.setTimeout(f),p.B&&(U0(p),Rc(p)),n.g=l}else p5(n);0<i.j.length&&J0(i)}else g[0]!="stop"&&g[0]!="close"||Va(i,7);else i.H==3&&(g[0]=="stop"||g[0]=="close"?g[0]=="stop"?Va(i,7):$2(i):g[0]!="noop"&&i.h&&i.h.Aa(g),i.A=0)}}fc(4)}catch{}}function o9(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(N0(t)){for(var e=[],i=t.length,n=0;n<i;n++)e.push(t[n]);return e}e=[],i=0;for(n in t)e[i++]=t[n];return e}function l9(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(N0(t)||typeof t=="string"){var e=[];t=t.length;for(var i=0;i<t;i++)e.push(i);return e}e=[],i=0;for(const n in t)e[i++]=n;return e}}}function G3(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(N0(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var i=l9(t),n=o9(t),s=n.length,a=0;a<s;a++)e.call(void 0,n[a],i&&i[a],t)}var K3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function h9(t,e){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var n=t[i].indexOf("="),s=null;if(0<=n){var a=t[i].substring(0,n);s=t[i].substring(n+1)}else a=t[i];e(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Ha(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ha){this.h=t.h,$d(this,t.j),this.s=t.s,this.g=t.g,Hd(this,t.m),this.l=t.l;var e=t.i,i=new xc;i.i=e.i,e.g&&(i.g=new Map(e.g),i.h=e.h),tb(this,i),this.o=t.o}else t&&(e=String(t).match(K3))?(this.h=!1,$d(this,e[1]||"",!0),this.s=yh(e[2]||""),this.g=yh(e[3]||"",!0),Hd(this,e[4]),this.l=yh(e[5]||"",!0),tb(this,e[6]||"",!0),this.o=yh(e[7]||"")):(this.h=!1,this.i=new xc(null,this.h))}Ha.prototype.toString=function(){var t=[],e=this.j;e&&t.push(vh(e,ib,!0),":");var i=this.g;return(i||e=="file")&&(t.push("//"),(e=this.s)&&t.push(vh(e,ib,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.m,i!=null&&t.push(":",String(i))),(i=this.l)&&(this.g&&i.charAt(0)!="/"&&t.push("/"),t.push(vh(i,i.charAt(0)=="/"?d9:u9,!0))),(i=this.i.toString())&&t.push("?",i),(i=this.o)&&t.push("#",vh(i,f9)),t.join("")};function Pr(t){return new Ha(t)}function $d(t,e,i){t.j=i?yh(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Hd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function tb(t,e,i){e instanceof xc?(t.i=e,x9(t.i,t.h)):(i||(e=vh(e,p9)),t.i=new xc(e,t.h))}function pi(t,e,i){t.i.set(e,i)}function G0(t){return pi(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function yh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function vh(t,e,i){return typeof t=="string"?(t=encodeURI(t).replace(e,c9),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function c9(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ib=/[#\/\?@]/g,u9=/[#\?:]/g,d9=/[#\?]/g,p9=/[#\?@]/g,f9=/#/g;function xc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ba(t){t.g||(t.g=new Map,t.h=0,t.i&&h9(t.i,function(e,i){t.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}qe=xc.prototype;qe.add=function(t,e){ba(this),this.i=null,t=Rl(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(e),this.h+=1,this};function Q3(t,e){ba(t),e=Rl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Z3(t,e){return ba(t),e=Rl(t,e),t.g.has(e)}qe.forEach=function(t,e){ba(this),this.g.forEach(function(i,n){i.forEach(function(s){t.call(e,s,n,this)},this)},this)};qe.ta=function(){ba(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),i=[];for(let n=0;n<e.length;n++){const s=t[n];for(let a=0;a<s.length;a++)i.push(e[n])}return i};qe.Z=function(t){ba(this);let e=[];if(typeof t=="string")Z3(this,t)&&(e=e.concat(this.g.get(Rl(this,t))));else{t=Array.from(this.g.values());for(let i=0;i<t.length;i++)e=e.concat(t[i])}return e};qe.set=function(t,e){return ba(this),this.i=null,t=Rl(this,t),Z3(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};qe.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function J3(t,e,i){Q3(t,e),0<i.length&&(t.i=null,t.g.set(Rl(t,e),M2(i)),t.h+=i.length)}qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var i=0;i<e.length;i++){var n=e[i];const a=encodeURIComponent(String(n)),l=this.Z(n);for(n=0;n<l.length;n++){var s=a;l[n]!==""&&(s+="="+encodeURIComponent(String(l[n]))),t.push(s)}}return this.i=t.join("&")};function Rl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function x9(t,e){e&&!t.j&&(ba(t),t.i=null,t.g.forEach(function(i,n){var s=n.toLowerCase();n!=s&&(Q3(this,n),J3(this,s,i))},t)),t.j=e}var m9=class{constructor(t,e){this.g=t,this.map=e}};function q3(t){this.l=t||g9,_t.PerformanceNavigationTiming?(t=_t.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(_t.g&&_t.g.Ka&&_t.g.Ka()&&_t.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var g9=10;function e5(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function t5(t){return t.h?1:t.g?t.g.size:0}function Im(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function j2(t,e){t.g?t.g.add(e):t.h=e}function i5(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}q3.prototype.cancel=function(){if(this.i=n5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function n5(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const i of t.g.values())e=e.concat(i.F);return e}return M2(t.i)}var y9=class{stringify(t){return _t.JSON.stringify(t,void 0)}parse(t){return _t.JSON.parse(t,void 0)}};function v9(){this.g=new y9}function b9(t,e,i){const n=i||"";try{G3(t,function(s,a){let l=s;R0(s)&&(l=F2(s)),e.push(n+a+"="+encodeURIComponent(l))})}catch(s){throw e.push(n+"type="+encodeURIComponent("_badmap")),s}}function _9(t,e){const i=new $0;if(_t.Image){const n=new Image;n.onload=Cu(Su,i,n,"TestLoadImage: loaded",!0,e),n.onerror=Cu(Su,i,n,"TestLoadImage: error",!1,e),n.onabort=Cu(Su,i,n,"TestLoadImage: abort",!1,e),n.ontimeout=Cu(Su,i,n,"TestLoadImage: timeout",!1,e),_t.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Su(t,e,i,n,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(n)}catch{}}function Vc(t){this.l=t.fc||null,this.j=t.ob||!1}ln(Vc,R2);Vc.prototype.g=function(){return new K0(this.l,this.j)};Vc.prototype.i=function(t){return function(){return t}}({});function K0(t,e){on.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=W2,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ln(K0,on);var W2=0;qe=K0.prototype;qe.open=function(t,e){if(this.readyState!=W2)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,mc(this)};qe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||_t).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oc(this)),this.readyState=W2};qe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,mc(this)),this.g&&(this.readyState=3,mc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof _t.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;s5(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function s5(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}qe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Oc(this):mc(this),this.readyState==3&&s5(this)}};qe.Za=function(t){this.g&&(this.response=this.responseText=t,Oc(this))};qe.Ya=function(t){this.g&&(this.response=t,Oc(this))};qe.ka=function(){this.g&&Oc(this)};function Oc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,mc(t)}qe.setRequestHeader=function(t,e){this.v.append(t,e)};qe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};qe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var i=e.next();!i.done;)i=i.value,t.push(i[0]+": "+i[1]),i=e.next();return t.join(`\r
`)};function mc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(K0.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var C9=_t.JSON.parse;function Ai(t){on.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=r5,this.L=this.M=!1}ln(Ai,on);var r5="",w9=/^https?$/i,S9=["POST","PUT"];qe=Ai.prototype;qe.Oa=function(t){this.M=t};qe.ha=function(t,e,i,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Pm.g(),this.C=this.u?eb(this.u):eb(Pm),this.g.onreadystatechange=Mn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(a){nb(this,a);return}if(t=i||"",i=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var s in n)i.set(s,n[s]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const a of n.keys())i.set(a,n.get(a));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(i.keys()).find(a=>a.toLowerCase()=="content-type"),s=_t.FormData&&t instanceof _t.FormData,!(0<=w3(S9,e))||n||s||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of i)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{l5(this),0<this.B&&((this.L=k9(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mn(this.ua,this)):this.A=N2(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(a){nb(this,a)}};function k9(t){return xl&&typeof t.timeout=="number"&&t.ontimeout!==void 0}qe.ua=function(){typeof T2<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xn(this,"timeout"),this.abort(8))};function nb(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,a5(t),Q0(t)}function a5(t){t.F||(t.F=!0,xn(t,"complete"),xn(t,"error"))}qe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,xn(this,"complete"),xn(this,"abort"),Q0(this))};qe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Q0(this,!0)),Ai.$.N.call(this)};qe.La=function(){this.s||(this.G||this.v||this.l?o5(this):this.kb())};qe.kb=function(){o5(this)};function o5(t){if(t.h&&typeof T2<"u"&&(!t.C[1]||Qs(t)!=4||t.da()!=2)){if(t.v&&Qs(t)==4)N2(t.La,0,t);else if(xn(t,"readystatechange"),Qs(t)==4){t.h=!1;try{const l=t.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var i;if(!(i=e)){var n;if(n=l===0){var s=String(t.I).match(K3)[1]||null;!s&&_t.self&&_t.self.location&&(s=_t.self.location.protocol.slice(0,-1)),n=!w9.test(s?s.toLowerCase():"")}i=n}if(i)xn(t,"complete"),xn(t,"success");else{t.m=6;try{var a=2<Qs(t)?t.g.statusText:""}catch{a=""}t.j=a+" ["+t.da()+"]",a5(t)}}finally{Q0(t)}}}}function Q0(t,e){if(t.g){l5(t);const i=t.g,n=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||xn(t,"ready");try{i.onreadystatechange=n}catch{}}}function l5(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(_t.clearTimeout(t.A),t.A=null)}qe.isActive=function(){return!!this.g};function Qs(t){return t.g?t.g.readyState:0}qe.da=function(){try{return 2<Qs(this)?this.g.status:-1}catch{return-1}};qe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};qe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),C9(e)}};function sb(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case r5:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function T9(t){const e={};t=(t.g&&2<=Qs(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<t.length;n++){if(hc(t[n]))continue;var i=ZA(t[n]);const s=i[0];if(i=i[1],typeof i!="string")continue;i=i.trim();const a=e[s]||[];e[s]=a,a.push(i)}$A(e,function(n){return n.join(", ")})}qe.Ia=function(){return this.m};qe.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function h5(t){let e="";return E2(t,function(i,n){e+=n,e+=":",e+=i,e+=`\r
`}),e}function z2(t,e,i){e:{for(n in i){var n=!1;break e}n=!0}n||(i=h5(i),typeof t=="string"?i!=null&&encodeURIComponent(String(i)):pi(t,e,i))}function oh(t,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||e}function c5(t){this.Ga=0,this.j=[],this.l=new $0,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=oh("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=oh("baseRetryDelayMs",5e3,t),this.hb=oh("retryDelaySeedMs",1e4,t),this.eb=oh("forwardChannelMaxRetries",2,t),this.xa=oh("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new q3(t&&t.concurrentRequestLimit),this.Ja=new v9,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}qe=c5.prototype;qe.ra=8;qe.H=1;function $2(t){if(u5(t),t.H==3){var e=t.W++,i=Pr(t.I);if(pi(i,"SID",t.K),pi(i,"RID",e),pi(i,"TYPE","terminate"),jc(t,i),e=new Nc(t,t.l,e),e.L=2,e.v=G0(Pr(i)),i=!1,_t.navigator&&_t.navigator.sendBeacon)try{i=_t.navigator.sendBeacon(e.v.toString(),"")}catch{}!i&&_t.Image&&(new Image().src=e.v,i=!0),i||(e.g=v5(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Rc(e)}g5(t)}function Z0(t){t.g&&(Y2(t),t.g.cancel(),t.g=null)}function u5(t){Z0(t),t.u&&(_t.clearTimeout(t.u),t.u=null),Yd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&_t.clearTimeout(t.m),t.m=null)}function J0(t){if(!e5(t.i)&&!t.m){t.m=!0;var e=t.Na;uc||B3(),dc||(uc(),dc=!0),B2.add(e,t),t.C=0}}function M9(t,e){return t5(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Bc(Mn(t.Na,t,e),m5(t,t.C)),t.C++,!0)}qe.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Nc(this,this.l,t);let a=this.s;if(this.U&&(a?(a=M3(a),P3(a,this.U)):a=this.U),this.o!==null||this.O||(s.I=a,a=null),this.P)e:{for(var e=0,i=0;i<this.j.length;i++){t:{var n=this.j[i];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=i;break e}if(e===4096||i===this.j.length-1){e=i+1;break e}}e=1e3}else e=1e3;e=d5(this,s,e),i=Pr(this.I),pi(i,"RID",t),pi(i,"CVER",22),this.F&&pi(i,"X-HTTP-Session-Id",this.F),jc(this,i),a&&(this.O?e="headers="+encodeURIComponent(String(h5(a)))+"&"+e:this.o&&z2(i,this.o,a)),j2(this.i,s),this.bb&&pi(i,"TYPE","init"),this.P?(pi(i,"$req",e),pi(i,"SID","null"),s.aa=!0,Am(s,i,null)):Am(s,i,e),this.H=2}}else this.H==3&&(t?rb(this,t):this.j.length==0||e5(this.i)||rb(this))};function rb(t,e){var i;e?i=e.m:i=t.W++;const n=Pr(t.I);pi(n,"SID",t.K),pi(n,"RID",i),pi(n,"AID",t.V),jc(t,n),t.o&&t.s&&z2(n,t.o,t.s),i=new Nc(t,t.l,i,t.C+1),t.o===null&&(i.I=t.s),e&&(t.j=e.F.concat(t.j)),e=d5(t,i,1e3),i.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),j2(t.i,i),Am(i,n,e)}function jc(t,e){t.na&&E2(t.na,function(i,n){pi(e,n,i)}),t.h&&G3({},function(i,n){pi(e,n,i)})}function d5(t,e,i){i=Math.min(t.j.length,i);var n=t.h?Mn(t.h.Va,t.h,t):null;e:{var s=t.j;let a=-1;for(;;){const l=["count="+i];a==-1?0<i?(a=s[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let p=!0;for(let f=0;f<i;f++){let g=s[f].g;const m=s[f].map;if(g-=a,0>g)a=Math.max(0,s[f].g-100),p=!1;else try{b9(m,l,"req"+g+"_")}catch{n&&n(m)}}if(p){n=l.join("&");break e}}}return t=t.j.splice(0,i),e.F=t,n}function p5(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;uc||B3(),dc||(uc(),dc=!0),B2.add(e,t),t.A=0}}function H2(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Bc(Mn(t.Ma,t),m5(t,t.A)),t.A++,!0)}qe.Ma=function(){if(this.u=null,f5(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Bc(Mn(this.jb,this),t)}};qe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,In(10),Z0(this),f5(this))};function Y2(t){t.B!=null&&(_t.clearTimeout(t.B),t.B=null)}function f5(t){t.g=new Nc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Pr(t.wa);pi(e,"RID","rpc"),pi(e,"SID",t.K),pi(e,"AID",t.V),pi(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&pi(e,"TO",t.qa),pi(e,"TYPE","xmlhttp"),jc(t,e),t.o&&t.s&&z2(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var i=t.g;t=t.pa,i.L=1,i.v=G0(Pr(e)),i.s=null,i.S=!0,H3(i,t)}qe.ib=function(){this.v!=null&&(this.v=null,Z0(this),H2(this),In(19))};function Yd(t){t.v!=null&&(_t.clearTimeout(t.v),t.v=null)}function x5(t,e){var i=null;if(t.g==e){Yd(t),Y2(t),t.g=null;var n=2}else if(Im(t.i,e))i=e.F,i5(t.i,e),n=1;else return;if(t.H!=0){if(e.i)if(n==1){i=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;n=H0(),xn(n,new j3(n,i)),J0(t)}else p5(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(n==1&&M9(t,e)||n==2&&H2(t)))switch(i&&0<i.length&&(e=t.i,e.i=e.i.concat(i)),s){case 1:Va(t,5);break;case 4:Va(t,10);break;case 3:Va(t,6);break;default:Va(t,2)}}}function m5(t,e){let i=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(i*=2),i*e}function Va(t,e){if(t.l.info("Error code "+e),e==2){var i=null;t.h&&(i=null);var n=Mn(t.pb,t);i||(i=new Ha("//www.google.com/images/cleardot.gif"),_t.location&&_t.location.protocol=="http"||$d(i,"https"),G0(i)),_9(i.toString(),n)}else In(2);t.H=0,t.h&&t.h.za(e),g5(t),u5(t)}qe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),In(2)):(this.l.info("Failed to ping google.com"),In(1))};function g5(t){if(t.H=0,t.ma=[],t.h){const e=n5(t.i);(e.length!=0||t.j.length!=0)&&(Kv(t.ma,e),Kv(t.ma,t.j),t.i.i.length=0,M2(t.j),t.j.length=0),t.h.ya()}}function y5(t,e,i){var n=i instanceof Ha?Pr(i):new Ha(i);if(n.g!="")e&&(n.g=e+"."+n.g),Hd(n,n.m);else{var s=_t.location;n=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var a=new Ha(null);n&&$d(a,n),e&&(a.g=e),s&&Hd(a,s),i&&(a.l=i),n=a}return i=t.F,e=t.Da,i&&e&&pi(n,i,e),pi(n,"VER",t.ra),jc(t,n),n}function v5(t,e,i){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=i&&t.Ha&&!t.va?new Ai(new Vc({ob:!0})):new Ai(t.va),e.Oa(t.J),e}qe.isActive=function(){return!!this.h&&this.h.isActive(this)};function b5(){}qe=b5.prototype;qe.Ba=function(){};qe.Aa=function(){};qe.za=function(){};qe.ya=function(){};qe.isActive=function(){return!0};qe.Va=function(){};function Xd(){if(xl&&!(10<=Number(OA)))throw Error("Environmental error: no available transport.")}Xd.prototype.g=function(t,e){return new ls(t,e)};function ls(t,e){on.call(this),this.g=new c5(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!hc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Vl(this)}ln(ls,on);ls.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,i=this.h||void 0;In(0),t.Y=e,t.na=i||{},t.G=t.aa,t.I=y5(t,null,t.Y),J0(t)};ls.prototype.close=function(){$2(this.g)};ls.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var i={};i.__data__=t,t=i}else this.v&&(i={},i.__data__=F2(t),t=i);e.j.push(new m9(e.fb++,t)),e.H==3&&J0(e)};ls.prototype.N=function(){this.g.h=null,delete this.j,$2(this.g),delete this.g,ls.$.N.call(this)};function _5(t){V2.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const i in e){t=i;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ln(_5,V2);function C5(){O2.call(this),this.status=1}ln(C5,O2);function Vl(t){this.g=t}ln(Vl,b5);Vl.prototype.Ba=function(){xn(this.g,"a")};Vl.prototype.Aa=function(t){xn(this.g,new _5(t))};Vl.prototype.za=function(t){xn(this.g,new C5)};Vl.prototype.ya=function(){xn(this.g,"b")};function P9(){this.blockSize=-1}function js(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ln(js,P9);js.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function vf(t,e,i){i||(i=0);var n=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)n[s]=e.charCodeAt(i++)|e.charCodeAt(i++)<<8|e.charCodeAt(i++)<<16|e.charCodeAt(i++)<<24;else for(s=0;16>s;++s)n[s]=e[i++]|e[i++]<<8|e[i++]<<16|e[i++]<<24;e=t.g[0],i=t.g[1],s=t.g[2];var a=t.g[3],l=e+(a^i&(s^a))+n[0]+3614090360&4294967295;e=i+(l<<7&4294967295|l>>>25),l=a+(s^e&(i^s))+n[1]+3905402710&4294967295,a=e+(l<<12&4294967295|l>>>20),l=s+(i^a&(e^i))+n[2]+606105819&4294967295,s=a+(l<<17&4294967295|l>>>15),l=i+(e^s&(a^e))+n[3]+3250441966&4294967295,i=s+(l<<22&4294967295|l>>>10),l=e+(a^i&(s^a))+n[4]+4118548399&4294967295,e=i+(l<<7&4294967295|l>>>25),l=a+(s^e&(i^s))+n[5]+1200080426&4294967295,a=e+(l<<12&4294967295|l>>>20),l=s+(i^a&(e^i))+n[6]+2821735955&4294967295,s=a+(l<<17&4294967295|l>>>15),l=i+(e^s&(a^e))+n[7]+4249261313&4294967295,i=s+(l<<22&4294967295|l>>>10),l=e+(a^i&(s^a))+n[8]+1770035416&4294967295,e=i+(l<<7&4294967295|l>>>25),l=a+(s^e&(i^s))+n[9]+2336552879&4294967295,a=e+(l<<12&4294967295|l>>>20),l=s+(i^a&(e^i))+n[10]+4294925233&4294967295,s=a+(l<<17&4294967295|l>>>15),l=i+(e^s&(a^e))+n[11]+2304563134&4294967295,i=s+(l<<22&4294967295|l>>>10),l=e+(a^i&(s^a))+n[12]+1804603682&4294967295,e=i+(l<<7&4294967295|l>>>25),l=a+(s^e&(i^s))+n[13]+4254626195&4294967295,a=e+(l<<12&4294967295|l>>>20),l=s+(i^a&(e^i))+n[14]+2792965006&4294967295,s=a+(l<<17&4294967295|l>>>15),l=i+(e^s&(a^e))+n[15]+1236535329&4294967295,i=s+(l<<22&4294967295|l>>>10),l=e+(s^a&(i^s))+n[1]+4129170786&4294967295,e=i+(l<<5&4294967295|l>>>27),l=a+(i^s&(e^i))+n[6]+3225465664&4294967295,a=e+(l<<9&4294967295|l>>>23),l=s+(e^i&(a^e))+n[11]+643717713&4294967295,s=a+(l<<14&4294967295|l>>>18),l=i+(a^e&(s^a))+n[0]+3921069994&4294967295,i=s+(l<<20&4294967295|l>>>12),l=e+(s^a&(i^s))+n[5]+3593408605&4294967295,e=i+(l<<5&4294967295|l>>>27),l=a+(i^s&(e^i))+n[10]+38016083&4294967295,a=e+(l<<9&4294967295|l>>>23),l=s+(e^i&(a^e))+n[15]+3634488961&4294967295,s=a+(l<<14&4294967295|l>>>18),l=i+(a^e&(s^a))+n[4]+3889429448&4294967295,i=s+(l<<20&4294967295|l>>>12),l=e+(s^a&(i^s))+n[9]+568446438&4294967295,e=i+(l<<5&4294967295|l>>>27),l=a+(i^s&(e^i))+n[14]+3275163606&4294967295,a=e+(l<<9&4294967295|l>>>23),l=s+(e^i&(a^e))+n[3]+4107603335&4294967295,s=a+(l<<14&4294967295|l>>>18),l=i+(a^e&(s^a))+n[8]+1163531501&4294967295,i=s+(l<<20&4294967295|l>>>12),l=e+(s^a&(i^s))+n[13]+2850285829&4294967295,e=i+(l<<5&4294967295|l>>>27),l=a+(i^s&(e^i))+n[2]+4243563512&4294967295,a=e+(l<<9&4294967295|l>>>23),l=s+(e^i&(a^e))+n[7]+1735328473&4294967295,s=a+(l<<14&4294967295|l>>>18),l=i+(a^e&(s^a))+n[12]+2368359562&4294967295,i=s+(l<<20&4294967295|l>>>12),l=e+(i^s^a)+n[5]+4294588738&4294967295,e=i+(l<<4&4294967295|l>>>28),l=a+(e^i^s)+n[8]+2272392833&4294967295,a=e+(l<<11&4294967295|l>>>21),l=s+(a^e^i)+n[11]+1839030562&4294967295,s=a+(l<<16&4294967295|l>>>16),l=i+(s^a^e)+n[14]+4259657740&4294967295,i=s+(l<<23&4294967295|l>>>9),l=e+(i^s^a)+n[1]+2763975236&4294967295,e=i+(l<<4&4294967295|l>>>28),l=a+(e^i^s)+n[4]+1272893353&4294967295,a=e+(l<<11&4294967295|l>>>21),l=s+(a^e^i)+n[7]+4139469664&4294967295,s=a+(l<<16&4294967295|l>>>16),l=i+(s^a^e)+n[10]+3200236656&4294967295,i=s+(l<<23&4294967295|l>>>9),l=e+(i^s^a)+n[13]+681279174&4294967295,e=i+(l<<4&4294967295|l>>>28),l=a+(e^i^s)+n[0]+3936430074&4294967295,a=e+(l<<11&4294967295|l>>>21),l=s+(a^e^i)+n[3]+3572445317&4294967295,s=a+(l<<16&4294967295|l>>>16),l=i+(s^a^e)+n[6]+76029189&4294967295,i=s+(l<<23&4294967295|l>>>9),l=e+(i^s^a)+n[9]+3654602809&4294967295,e=i+(l<<4&4294967295|l>>>28),l=a+(e^i^s)+n[12]+3873151461&4294967295,a=e+(l<<11&4294967295|l>>>21),l=s+(a^e^i)+n[15]+530742520&4294967295,s=a+(l<<16&4294967295|l>>>16),l=i+(s^a^e)+n[2]+3299628645&4294967295,i=s+(l<<23&4294967295|l>>>9),l=e+(s^(i|~a))+n[0]+4096336452&4294967295,e=i+(l<<6&4294967295|l>>>26),l=a+(i^(e|~s))+n[7]+1126891415&4294967295,a=e+(l<<10&4294967295|l>>>22),l=s+(e^(a|~i))+n[14]+2878612391&4294967295,s=a+(l<<15&4294967295|l>>>17),l=i+(a^(s|~e))+n[5]+4237533241&4294967295,i=s+(l<<21&4294967295|l>>>11),l=e+(s^(i|~a))+n[12]+1700485571&4294967295,e=i+(l<<6&4294967295|l>>>26),l=a+(i^(e|~s))+n[3]+2399980690&4294967295,a=e+(l<<10&4294967295|l>>>22),l=s+(e^(a|~i))+n[10]+4293915773&4294967295,s=a+(l<<15&4294967295|l>>>17),l=i+(a^(s|~e))+n[1]+2240044497&4294967295,i=s+(l<<21&4294967295|l>>>11),l=e+(s^(i|~a))+n[8]+1873313359&4294967295,e=i+(l<<6&4294967295|l>>>26),l=a+(i^(e|~s))+n[15]+4264355552&4294967295,a=e+(l<<10&4294967295|l>>>22),l=s+(e^(a|~i))+n[6]+2734768916&4294967295,s=a+(l<<15&4294967295|l>>>17),l=i+(a^(s|~e))+n[13]+1309151649&4294967295,i=s+(l<<21&4294967295|l>>>11),l=e+(s^(i|~a))+n[4]+4149444226&4294967295,e=i+(l<<6&4294967295|l>>>26),l=a+(i^(e|~s))+n[11]+3174756917&4294967295,a=e+(l<<10&4294967295|l>>>22),l=s+(e^(a|~i))+n[2]+718787259&4294967295,s=a+(l<<15&4294967295|l>>>17),l=i+(a^(s|~e))+n[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+a&4294967295}js.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var i=e-this.blockSize,n=this.m,s=this.h,a=0;a<e;){if(s==0)for(;a<=i;)vf(this,t,a),a+=this.blockSize;if(typeof t=="string"){for(;a<e;)if(n[s++]=t.charCodeAt(a++),s==this.blockSize){vf(this,n),s=0;break}}else for(;a<e;)if(n[s++]=t[a++],s==this.blockSize){vf(this,n),s=0;break}}this.h=s,this.i+=e};js.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var i=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=i&255,i/=256;for(this.j(t),t=Array(16),e=i=0;4>e;++e)for(var n=0;32>n;n+=8)t[i++]=this.g[e]>>>n&255;return t};function ei(t,e){this.h=e;for(var i=[],n=!0,s=t.length-1;0<=s;s--){var a=t[s]|0;n&&a==e||(i[s]=a,n=!1)}this.g=i}var E9={};function X2(t){return-128<=t&&128>t?NA(t,function(e){return new ei([e|0],0>e?-1:0)}):new ei([t|0],0>t?-1:0)}function Zs(t){if(isNaN(t)||!isFinite(t))return Jo;if(0>t)return dn(Zs(-t));for(var e=[],i=1,n=0;t>=i;n++)e[n]=t/i|0,i*=Fm;return new ei(e,0)}function w5(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return dn(w5(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=Zs(Math.pow(e,8)),n=Jo,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),e);8>a?(a=Zs(Math.pow(e,a)),n=n.R(a).add(Zs(l))):(n=n.R(i),n=n.add(Zs(l)))}return n}var Fm=4294967296,Jo=X2(0),Bm=X2(1),ab=X2(16777216);qe=ei.prototype;qe.ea=function(){if(xs(this))return-dn(this).ea();for(var t=0,e=1,i=0;i<this.g.length;i++){var n=this.D(i);t+=(0<=n?n:Fm+n)*e,e*=Fm}return t};qe.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(mr(this))return"0";if(xs(this))return"-"+dn(this).toString(t);for(var e=Zs(Math.pow(t,6)),i=this,n="";;){var s=Gd(i,e).g;i=Ud(i,s.R(e));var a=((0<i.g.length?i.g[0]:i.h)>>>0).toString(t);if(i=s,mr(i))return a+n;for(;6>a.length;)a="0"+a;n=a+n}};qe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function mr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function xs(t){return t.h==-1}qe.X=function(t){return t=Ud(this,t),xs(t)?-1:mr(t)?0:1};function dn(t){for(var e=t.g.length,i=[],n=0;n<e;n++)i[n]=~t.g[n];return new ei(i,~t.h).add(Bm)}qe.abs=function(){return xs(this)?dn(this):this};qe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0,s=0;s<=e;s++){var a=n+(this.D(s)&65535)+(t.D(s)&65535),l=(a>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);n=l>>>16,a&=65535,l&=65535,i[s]=l<<16|a}return new ei(i,i[i.length-1]&-2147483648?-1:0)};function Ud(t,e){return t.add(dn(e))}qe.R=function(t){if(mr(this)||mr(t))return Jo;if(xs(this))return xs(t)?dn(this).R(dn(t)):dn(dn(this).R(t));if(xs(t))return dn(this.R(dn(t)));if(0>this.X(ab)&&0>t.X(ab))return Zs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,i=[],n=0;n<2*e;n++)i[n]=0;for(n=0;n<this.g.length;n++)for(var s=0;s<t.g.length;s++){var a=this.D(n)>>>16,l=this.D(n)&65535,p=t.D(s)>>>16,f=t.D(s)&65535;i[2*n+2*s]+=l*f,ku(i,2*n+2*s),i[2*n+2*s+1]+=a*f,ku(i,2*n+2*s+1),i[2*n+2*s+1]+=l*p,ku(i,2*n+2*s+1),i[2*n+2*s+2]+=a*p,ku(i,2*n+2*s+2)}for(n=0;n<e;n++)i[n]=i[2*n+1]<<16|i[2*n];for(n=e;n<2*e;n++)i[n]=0;return new ei(i,0)};function ku(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function lh(t,e){this.g=t,this.h=e}function Gd(t,e){if(mr(e))throw Error("division by zero");if(mr(t))return new lh(Jo,Jo);if(xs(t))return e=Gd(dn(t),e),new lh(dn(e.g),dn(e.h));if(xs(e))return e=Gd(t,dn(e)),new lh(dn(e.g),e.h);if(30<t.g.length){if(xs(t)||xs(e))throw Error("slowDivide_ only works with positive integers.");for(var i=Bm,n=e;0>=n.X(t);)i=ob(i),n=ob(n);var s=wo(i,1),a=wo(n,1);for(n=wo(n,2),i=wo(i,2);!mr(n);){var l=a.add(n);0>=l.X(t)&&(s=s.add(i),a=l),n=wo(n,1),i=wo(i,1)}return e=Ud(t,s.R(e)),new lh(s,e)}for(s=Jo;0<=t.X(e);){for(i=Math.max(1,Math.floor(t.ea()/e.ea())),n=Math.ceil(Math.log(i)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),a=Zs(i),l=a.R(e);xs(l)||0<l.X(t);)i-=n,a=Zs(i),l=a.R(e);mr(a)&&(a=Bm),s=s.add(a),t=Ud(t,l)}return new lh(s,t)}qe.gb=function(t){return Gd(this,t).h};qe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)&t.D(n);return new ei(i,this.h&t.h)};qe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)|t.D(n);return new ei(i,this.h|t.h)};qe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)^t.D(n);return new ei(i,this.h^t.h)};function ob(t){for(var e=t.g.length+1,i=[],n=0;n<e;n++)i[n]=t.D(n)<<1|t.D(n-1)>>>31;return new ei(i,t.h)}function wo(t,e){var i=e>>5;e%=32;for(var n=t.g.length-i,s=[],a=0;a<n;a++)s[a]=0<e?t.D(a+i)>>>e|t.D(a+i+1)<<32-e:t.D(a+i);return new ei(s,t.h)}Xd.prototype.createWebChannel=Xd.prototype.g;ls.prototype.send=ls.prototype.u;ls.prototype.open=ls.prototype.m;ls.prototype.close=ls.prototype.close;Y0.NO_ERROR=0;Y0.TIMEOUT=8;Y0.HTTP_ERROR=6;W3.COMPLETE="complete";z3.EventType=Lc;Lc.OPEN="a";Lc.CLOSE="b";Lc.ERROR="c";Lc.MESSAGE="d";on.prototype.listen=on.prototype.O;Ai.prototype.listenOnce=Ai.prototype.P;Ai.prototype.getLastError=Ai.prototype.Sa;Ai.prototype.getLastErrorCode=Ai.prototype.Ia;Ai.prototype.getStatus=Ai.prototype.da;Ai.prototype.getResponseJson=Ai.prototype.Wa;Ai.prototype.getResponseText=Ai.prototype.ja;Ai.prototype.send=Ai.prototype.ha;Ai.prototype.setWithCredentials=Ai.prototype.Oa;js.prototype.digest=js.prototype.l;js.prototype.reset=js.prototype.reset;js.prototype.update=js.prototype.j;ei.prototype.add=ei.prototype.add;ei.prototype.multiply=ei.prototype.R;ei.prototype.modulo=ei.prototype.gb;ei.prototype.compare=ei.prototype.X;ei.prototype.toNumber=ei.prototype.ea;ei.prototype.toString=ei.prototype.toString;ei.prototype.getBits=ei.prototype.D;ei.fromNumber=Zs;ei.fromString=w5;var A9=function(){return new Xd},D9=function(){return H0()},bf=Y0,I9=W3,F9=ho,lb={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},B9=Vc,Tu=z3,L9=Ai,N9=js,qo=ei;const hb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _n=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new S2("@firebase/firestore");function cb(){return to.logLevel}function ot(t,...e){if(to.logLevel<=Gt.DEBUG){const i=e.map(U2);to.debug(`Firestore (${Ol}): ${t}`,...i)}}function Er(t,...e){if(to.logLevel<=Gt.ERROR){const i=e.map(U2);to.error(`Firestore (${Ol}): ${t}`,...i)}}function ml(t,...e){if(to.logLevel<=Gt.WARN){const i=e.map(U2);to.warn(`Firestore (${Ol}): ${t}`,...i)}}function U2(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t="Unexpected state"){const e=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: `+t;throw Er(e),new Error(e)}function xi(t,e){t||yt()}function St(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let Qe=class extends Nl{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let br=class{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S5=class{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},R9=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(_n.UNAUTHENTICATED))}shutdown(){}},V9=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}},O9=class{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){let n=this.i;const s=f=>this.i!==n?(n=this.i,i(f)):Promise.resolve();let a=new br;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new br,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},p=f=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(f=>p(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?p(f):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new br)}},0),l()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(n=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(xi(typeof n.accessToken=="string"),new S5(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xi(e===null||typeof e=="string"),new _n(e)}},j9=class{constructor(e,i,n){this.h=e,this.l=i,this.m=n,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},W9=class{constructor(e,i,n){this.h=e,this.l=i,this.m=n}getToken(){return Promise.resolve(new j9(this.h,this.l,this.m))}start(e,i){e.enqueueRetryable(()=>i(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}},z9=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$9=class{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,i){const n=a=>{a.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,ot("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?i(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?s(a):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(xi(typeof i.token=="string"),this.T=i.token,new z9(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let n=0;n<t;n++)i[n]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=H9(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<i&&(n+=e.charAt(s[a]%e.length))}return n}}function Kt(t,e){return t<e?-1:t>e?1:0}function gl(t,e,i){return t.length===e.length&&t.every((n,s)=>i(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bn=class Gu{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new Qe(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Qe(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new Qe(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gu.fromMillis(Date.now())}static fromDate(e){return Gu.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*i));return new Gu(i,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Et=class Ku{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ku(e)}static min(){return new Ku(new Bn(0,0))}static max(){return new Ku(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,i,n){i===void 0?i=0:i>e.length&&yt(),n===void 0?n=e.length-i:n>e.length-i&&yt(),this.segments=e,this.offset=i,this.len=n}get length(){return this.len}isEqual(e){return gc.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof gc?e.forEach(n=>{i.push(n)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,n=this.limit();i<n;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const n=Math.min(e.length,i.length);for(let s=0;s<n;s++){const a=e.get(s),l=i.get(s);if(a<l)return-1;if(a>l)return 1}return e.length<i.length?-1:e.length>i.length?1:0}}let Ei=class Qu extends gc{construct(e,i,n){return new Qu(e,i,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const i=[];for(const n of e){if(n.indexOf("//")>=0)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);i.push(...n.split("/").filter(s=>s.length>0))}return new Qu(i)}static emptyPath(){return new Qu([])}};const Y9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let nr=class To extends gc{construct(e,i,n){return new To(e,i,n)}static isValidIdentifier(e){return Y9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),To.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new To(["__name__"])}static fromServerFormat(e){const i=[];let n="",s=0;const a=()=>{if(n.length===0)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(n),n=""};let l=!1;for(;s<e.length;){const p=e[s];if(p==="\\"){if(s+1===e.length)throw new Qe(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Qe(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,s+=2}else p==="`"?(l=!l,s++):p!=="."||l?(n+=p,s++):(a(),s++)}if(a(),l)throw new Qe(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new To(i)}static emptyPath(){return new To([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.path=e}static fromPath(e){return new ht(Ei.fromString(e))}static fromName(e){return new ht(Ei.fromString(e).popFirst(5))}static empty(){return new ht(Ei.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ei.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return Ei.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new Ei(e.slice()))}}function X9(t,e){const i=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Et.fromTimestamp(n===1e9?new Bn(i+1,0):new Bn(i,n));return new la(s,ht.empty(),e)}function U9(t){return new la(t.readTime,t.key,-1)}class la{constructor(e,i,n){this.readTime=e,this.documentKey=i,this.largestBatchId=n}static min(){return new la(Et.min(),ht.empty(),-1)}static max(){return new la(Et.max(),ht.empty(),-1)}}function G9(t,e){let i=t.readTime.compareTo(e.readTime);return i!==0?i:(i=ht.comparator(t.documentKey,e.documentKey),i!==0?i:Kt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t){if(t.code!==Ie.FAILED_PRECONDITION||t.message!==K9)throw t;ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new ze((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(i,a).next(n,s)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof ze?i:ze.resolve(i)}catch(i){return ze.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):ze.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):ze.reject(i)}static resolve(e){return new ze((i,n)=>{i(e)})}static reject(e){return new ze((i,n)=>{n(e)})}static waitFor(e){return new ze((i,n)=>{let s=0,a=0,l=!1;e.forEach(p=>{++s,p.next(()=>{++a,l&&a===s&&i()},f=>n(f))}),l=!0,a===s&&i()})}static or(e){let i=ze.resolve(!1);for(const n of e)i=i.next(s=>s?ze.resolve(s):n());return i}static forEach(e,i){const n=[];return e.forEach((s,a)=>{n.push(i.call(this,s,a))}),this.waitFor(n)}static mapArray(e,i){return new ze((n,s)=>{const a=e.length,l=new Array(a);let p=0;for(let f=0;f<a;f++){const g=f;i(e[g]).next(m=>{l[g]=m,++p,p===a&&n(l)},m=>s(m))}})}static doWhile(e,i){return new ze((n,s)=>{const a=()=>{e()===!0?i().next(()=>{a()},s):n()};a()})}}function zc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=n=>this.ot(n),this.ut=n=>i.writeSequenceNumber(n))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}G2.ct=-1;function q0(t){return t==null}function Kd(t){return t===0&&1/t==-1/0}function Z9(t){return typeof t=="number"&&Number.isInteger(t)&&!Kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){let e=0;for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&e++;return e}function co(t,e){for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(i,t[i])}function T5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,i){this.comparator=e,this.root=i||na.EMPTY}insert(e,i){return new ki(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,na.BLACK,null,null))}remove(e){return new ki(this.comparator,this.root.remove(e,this.comparator).copy(null,null,na.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const n=this.comparator(e,i.key);if(n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}indexOf(e){let i=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return i+n.left.size;s<0?n=n.left:(i+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,n)=>(e(i,n),!1))}toString(){const e=[];return this.inorderTraversal((i,n)=>(e.push(`${i}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}let Mu=class{constructor(e,i,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=i?n(e.key,i):1,i&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},na=class hr{constructor(e,i,n,s,a){this.key=e,this.value=i,this.color=n??hr.RED,this.left=s??hr.EMPTY,this.right=a??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,n,s,a){return new hr(e??this.key,i??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,i,n),null):a===0?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let n,s=this;if(i(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,i),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),i(e,s.key)===0){if(s.right.isEmpty())return hr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,i))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const e=this.left.check();if(e!==this.right.check())throw yt();return e+(this.isRed()?0:1)}};na.EMPTY=null,na.RED=!0,na.BLACK=!1;na.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(t,e,i,n,s){return this}insert(t,e,i){return new na(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ss=class Lm{constructor(e){this.comparator=e,this.data=new ki(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,n)=>(e(i),!1))}forEachInRange(e,i){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;i(s.key)}}forEachWhile(e,i){let n;for(n=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new db(this.data.getIterator())}getIteratorFrom(e){return new db(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(n=>{i=i.add(n)}),i}isEqual(e){if(!(e instanceof Lm)||this.size!==e.size)return!1;const i=this.data.getIterator(),n=e.data.getIterator();for(;i.hasNext();){const s=i.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new Lm(this.comparator);return i.data=e,i}},db=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Js=class Nm{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new Nm([])}unionWith(e){let i=new ss(nr.comparator);for(const n of this.fields)i=i.add(n);for(const n of e)i=i.add(n);return new Nm(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,(i,n)=>i.isEqual(n))}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M5=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hs=class Rm{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(n){try{return atob(n)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new M5("Invalid base64 string: "+s):s}}(e);return new Rm(i)}static fromUint8Array(e){const i=function(n){let s="";for(let a=0;a<n.length;++a)s+=String.fromCharCode(n[a]);return s}(e);return new Rm(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};hs.EMPTY_BYTE_STRING=new hs("");const J9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ha(t){if(xi(!!t),typeof t=="string"){let e=0;const i=J9.exec(t);if(xi(!!i),i[1]){let s=i[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Oi(t.seconds),nanos:Oi(t.nanos)}}function Oi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function io(t){return typeof t=="string"?hs.fromBase64String(t):hs.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t){var e,i;return((i=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||i===void 0?void 0:i.stringValue)==="server_timestamp"}function K2(t){const e=t.mapValue.fields.__previous_value__;return ep(e)?K2(e):e}function yc(t){const e=ha(t.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q9=class{constructor(e,i,n,s,a,l,p,f,g){this.databaseId=e,this.appId=i,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=p,this.longPollingOptions=f,this.useFetchStreams=g}},P5=class Vm{constructor(e,i){this.projectId=e,this.database=i||"(default)"}static empty(){return new Vm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vm&&e.projectId===this.projectId&&e.database===this.database}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function no(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ep(t)?4:e7(t)?9007199254740991:10:yt()}function sr(t,e){if(t===e)return!0;const i=no(t);if(i!==no(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yc(t).isEqual(yc(e));case 3:return function(n,s){if(typeof n.timestampValue=="string"&&typeof s.timestampValue=="string"&&n.timestampValue.length===s.timestampValue.length)return n.timestampValue===s.timestampValue;const a=ha(n.timestampValue),l=ha(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,s){return io(n.bytesValue).isEqual(io(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,s){return Oi(n.geoPointValue.latitude)===Oi(s.geoPointValue.latitude)&&Oi(n.geoPointValue.longitude)===Oi(s.geoPointValue.longitude)}(t,e);case 2:return function(n,s){if("integerValue"in n&&"integerValue"in s)return Oi(n.integerValue)===Oi(s.integerValue);if("doubleValue"in n&&"doubleValue"in s){const a=Oi(n.doubleValue),l=Oi(s.doubleValue);return a===l?Kd(a)===Kd(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return gl(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:return function(n,s){const a=n.mapValue.fields||{},l=s.mapValue.fields||{};if(ub(a)!==ub(l))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(l[p]===void 0||!sr(a[p],l[p])))return!1;return!0}(t,e);default:return yt()}}function vc(t,e){return(t.values||[]).find(i=>sr(i,e))!==void 0}function yl(t,e){if(t===e)return 0;const i=no(t),n=no(e);if(i!==n)return Kt(i,n);switch(i){case 0:case 9007199254740991:return 0;case 1:return Kt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Oi(s.integerValue||s.doubleValue),p=Oi(a.integerValue||a.doubleValue);return l<p?-1:l>p?1:l===p?0:isNaN(l)?isNaN(p)?0:-1:1}(t,e);case 3:return pb(t.timestampValue,e.timestampValue);case 4:return pb(yc(t),yc(e));case 5:return Kt(t.stringValue,e.stringValue);case 6:return function(s,a){const l=io(s),p=io(a);return l.compareTo(p)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),p=a.split("/");for(let f=0;f<l.length&&f<p.length;f++){const g=Kt(l[f],p[f]);if(g!==0)return g}return Kt(l.length,p.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=Kt(Oi(s.latitude),Oi(a.latitude));return l!==0?l:Kt(Oi(s.longitude),Oi(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const l=s.values||[],p=a.values||[];for(let f=0;f<l.length&&f<p.length;++f){const g=yl(l[f],p[f]);if(g)return g}return Kt(l.length,p.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===Pu.mapValue&&a===Pu.mapValue)return 0;if(s===Pu.mapValue)return 1;if(a===Pu.mapValue)return-1;const l=s.fields||{},p=Object.keys(l),f=a.fields||{},g=Object.keys(f);p.sort(),g.sort();for(let m=0;m<p.length&&m<g.length;++m){const k=Kt(p[m],g[m]);if(k!==0)return k;const T=yl(l[p[m]],f[g[m]]);if(T!==0)return T}return Kt(p.length,g.length)}(t.mapValue,e.mapValue);default:throw yt()}}function pb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Kt(t,e);const i=ha(t),n=ha(e),s=Kt(i.seconds,n.seconds);return s!==0?s:Kt(i.nanos,n.nanos)}function vl(t){return Om(t)}function Om(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=ha(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?io(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,ht.fromName(i).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(n){let s="[",a=!0;for(const l of n.values||[])a?a=!1:s+=",",s+=Om(l);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const p of s)l?l=!1:a+=",",a+=`${p}:${Om(n.fields[p])}`;return a+"}"}(t.mapValue):yt();var e,i}function Qd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jm(t){return!!t&&"integerValue"in t}function Q2(t){return!!t&&"arrayValue"in t}function fb(t){return!!t&&"nullValue"in t}function xb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zu(t){return!!t&&"mapValue"in t}function Bh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return co(t.mapValue.fields,(i,n)=>e.mapValue.fields[i]=Bh(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(t.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Bh(t.arrayValue.values[i]);return e}return Object.assign({},t)}function e7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let n=0;n<e.length-1;++n)if(i=(i.mapValue.fields||{})[e.get(n)],!Zu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bh(i)}setAll(e){let i=nr.emptyPath(),n={},s=[];e.forEach((l,p)=>{if(!i.isImmediateParentOf(p)){const f=this.getFieldsMap(i);this.applyChanges(f,n,s),n={},s=[],i=p.popLast()}l?n[p.lastSegment()]=Bh(l):s.push(p.lastSegment())});const a=this.getFieldsMap(i);this.applyChanges(a,n,s)}delete(e){const i=this.field(e.popLast());Zu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=i.mapValue.fields[e.get(n)];Zu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},i.mapValue.fields[e.get(n)]=s),i=s}return i.mapValue.fields}applyChanges(e,i,n){co(i,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new zn(Bh(this.value))}}function E5(t){const e=[];return co(t.fields,(i,n)=>{const s=new nr([i]);if(Zu(n)){const a=E5(n.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)}),new Js(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,i,n,s,a,l,p){this.key=e,this.documentType=i,this.version=n,this.readTime=s,this.createTime=a,this.data=l,this.documentState=p}static newInvalidDocument(e){return new wn(e,0,Et.min(),Et.min(),Et.min(),zn.empty(),0)}static newFoundDocument(e,i,n,s){return new wn(e,1,i,Et.min(),n,s,0)}static newNoDocument(e,i){return new wn(e,2,i,Et.min(),Et.min(),zn.empty(),0)}static newUnknownDocument(e,i){return new wn(e,3,i,Et.min(),Et.min(),zn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,i){this.position=e,this.inclusive=i}}function mb(t,e,i){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?n=ht.comparator(ht.fromName(l.referenceValue),i.key):n=yl(l,i.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function gb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let i=0;i<t.position.length;i++)if(!sr(t.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,i="asc"){this.field=e,this.dir=i}}function t7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{}class zi extends A5{constructor(e,i,n){super(),this.field=e,this.op=i,this.value=n}static create(e,i,n){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,n):new n7(e,i,n):i==="array-contains"?new a7(e,n):i==="in"?new o7(e,n):i==="not-in"?new l7(e,n):i==="array-contains-any"?new h7(e,n):new zi(e,i,n)}static createKeyFieldInFilter(e,i,n){return i==="in"?new s7(e,n):new r7(e,n)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(yl(i,this.value)):i!==null&&no(this.value)===no(i)&&this.matchesComparison(yl(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ws extends A5{constructor(e,i){super(),this.filters=e,this.op=i,this.lt=null}static create(e,i){return new Ws(e,i)}matches(e){return D5(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(i=>i.isInequality());return e!==null?e.field:null}ft(e){for(const i of this.getFlattenedFilters())if(e(i))return i;return null}}function D5(t){return t.op==="and"}function I5(t){return i7(t)&&D5(t)}function i7(t){for(const e of t.filters)if(e instanceof Ws)return!1;return!0}function Wm(t){if(t instanceof zi)return t.field.canonicalString()+t.op.toString()+vl(t.value);if(I5(t))return t.filters.map(e=>Wm(e)).join(",");{const e=t.filters.map(i=>Wm(i)).join(",");return`${t.op}(${e})`}}function F5(t,e){return t instanceof zi?function(i,n){return n instanceof zi&&i.op===n.op&&i.field.isEqual(n.field)&&sr(i.value,n.value)}(t,e):t instanceof Ws?function(i,n){return n instanceof Ws&&i.op===n.op&&i.filters.length===n.filters.length?i.filters.reduce((s,a,l)=>s&&F5(a,n.filters[l]),!0):!1}(t,e):void yt()}function B5(t){return t instanceof zi?function(e){return`${e.field.canonicalString()} ${e.op} ${vl(e.value)}`}(t):t instanceof Ws?function(e){return e.op.toString()+" {"+e.getFilters().map(B5).join(" ,")+"}"}(t):"Filter"}class n7 extends zi{constructor(e,i,n){super(e,i,n),this.key=ht.fromName(n.referenceValue)}matches(e){const i=ht.comparator(e.key,this.key);return this.matchesComparison(i)}}class s7 extends zi{constructor(e,i){super(e,"in",i),this.keys=L5("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class r7 extends zi{constructor(e,i){super(e,"not-in",i),this.keys=L5("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function L5(t,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(n=>ht.fromName(n.referenceValue))}class a7 extends zi{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Q2(i)&&vc(i.arrayValue,this.value)}}class o7 extends zi{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&vc(this.value.arrayValue,i)}}class l7 extends zi{constructor(e,i){super(e,"not-in",i)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&!vc(this.value.arrayValue,i)}}class h7 extends zi{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Q2(i)||!i.arrayValue.values)&&i.arrayValue.values.some(n=>vc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,i=null,n=[],s=[],a=null,l=null,p=null){this.path=e,this.collectionGroup=i,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=l,this.endAt=p,this.dt=null}}function yb(t,e=null,i=[],n=[],s=null,a=null,l=null){return new c7(t,e,i,n,s,a,l)}function Z2(t){const e=St(t);if(e.dt===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(n=>Wm(n)).join(","),i+="|ob:",i+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),q0(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(n=>vl(n)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(n=>vl(n)).join(",")),e.dt=i}return e.dt}function J2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!t7(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(!F5(t.filters[i],e.filters[i]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gb(t.startAt,e.startAt)&&gb(t.endAt,e.endAt)}function zm(t){return ht.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,i=null,n=[],s=[],a=null,l="F",p=null,f=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=l,this.startAt=p,this.endAt=f,this.wt=null,this._t=null,this.startAt,this.endAt}}function u7(t,e,i,n,s,a,l,p){return new _a(t,e,i,n,s,a,l,p)}function tp(t){return new _a(t)}function vb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function q2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ip(t){for(const e of t.filters){const i=e.getFirstInequalityField();if(i!==null)return i}return null}function eg(t){return t.collectionGroup!==null}function Ya(t){const e=St(t);if(e.wt===null){e.wt=[];const i=ip(e),n=q2(e);if(i!==null&&n===null)i.isKeyField()||e.wt.push(new el(i)),e.wt.push(new el(nr.keyField(),"asc"));else{let s=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(s=!0);if(!s){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new el(nr.keyField(),a))}}}return e.wt}function Ar(t){const e=St(t);if(!e._t)if(e.limitType==="F")e._t=yb(e.path,e.collectionGroup,Ya(e),e.filters,e.limit,e.startAt,e.endAt);else{const i=[];for(const a of Ya(e)){const l=a.dir==="desc"?"asc":"desc";i.push(new el(a.field,l))}const n=e.endAt?new bl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new bl(e.startAt.position,e.startAt.inclusive):null;e._t=yb(e.path,e.collectionGroup,i,e.filters,e.limit,n,s)}return e._t}function $m(t,e){e.getFirstInequalityField(),ip(t);const i=t.filters.concat([e]);return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),i,t.limit,t.limitType,t.startAt,t.endAt)}function Zd(t,e,i){return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,i,t.startAt,t.endAt)}function np(t,e){return J2(Ar(t),Ar(e))&&t.limitType===e.limitType}function N5(t){return`${Z2(Ar(t))}|lt:${t.limitType}`}function Hm(t){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(n=>B5(n)).join(", ")}]`),q0(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(n=>vl(n)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(n=>vl(n)).join(",")),`Target(${i})`}(Ar(t))}; limitType=${t.limitType})`}function sp(t,e){return e.isFoundDocument()&&function(i,n){const s=n.key.path;return i.collectionGroup!==null?n.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ht.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,n){for(const s of Ya(i))if(!s.field.isKeyField()&&n.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,n){for(const s of i.filters)if(!s.matches(n))return!1;return!0}(t,e)&&function(i,n){return!(i.startAt&&!function(s,a,l){const p=mb(s,a,l);return s.inclusive?p<=0:p<0}(i.startAt,Ya(i),n)||i.endAt&&!function(s,a,l){const p=mb(s,a,l);return s.inclusive?p>=0:p>0}(i.endAt,Ya(i),n))}(t,e)}function d7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R5(t){return(e,i)=>{let n=!1;for(const s of Ya(t)){const a=p7(s,e,i);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function p7(t,e,i){const n=t.field.isKeyField()?ht.comparator(e.key,i.key):function(s,a,l){const p=a.data.field(s),f=l.data.field(s);return p!==null&&f!==null?yl(p,f):yt()}(t.field,e,i);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),n=this.inner[i];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,i){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,i]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,i]);s.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),n=this.inner[i];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[i]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(i,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return T5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=new ki(ht.comparator);function Dr(){return f7}const V5=new ki(ht.comparator);function bh(...t){let e=V5;for(const i of t)e=e.insert(i.key,i);return e}function O5(t){let e=V5;return t.forEach((i,n)=>e=e.insert(i,n.overlayedDocument)),e}function Oa(){return Lh()}function j5(){return Lh()}function Lh(){return new jl(t=>t.toString(),(t,e)=>t.isEqual(e))}const x7=new ki(ht.comparator),m7=new ss(ht.comparator);function Rt(...t){let e=m7;for(const i of t)e=e.add(i);return e}const g7=new ss(Kt);function y7(){return g7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kd(e)?"-0":e}}function z5(t){return{integerValue:""+t}}function v7(t,e){return Z9(e)?z5(e):W5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this._=void 0}}function b7(t,e,i){return t instanceof bc?function(n,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return s&&ep(s)&&(s=K2(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(i,e):t instanceof _l?H5(t,e):t instanceof _c?Y5(t,e):function(n,s){const a=$5(n,s),l=bb(a)+bb(n.gt);return jm(a)&&jm(n.gt)?z5(l):W5(n.serializer,l)}(t,e)}function _7(t,e,i){return t instanceof _l?H5(t,e):t instanceof _c?Y5(t,e):i}function $5(t,e){return t instanceof Jd?jm(i=e)||function(n){return!!n&&"doubleValue"in n}(i)?e:{integerValue:0}:null;var i}class bc extends rp{}class _l extends rp{constructor(e){super(),this.elements=e}}function H5(t,e){const i=X5(e);for(const n of t.elements)i.some(s=>sr(s,n))||i.push(n);return{arrayValue:{values:i}}}class _c extends rp{constructor(e){super(),this.elements=e}}function Y5(t,e){let i=X5(e);for(const n of t.elements)i=i.filter(s=>!sr(s,n));return{arrayValue:{values:i}}}class Jd extends rp{constructor(e,i){super(),this.serializer=e,this.gt=i}}function bb(t){return Oi(t.integerValue||t.doubleValue)}function X5(t){return Q2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,i){this.field=e,this.transform=i}}function C7(t,e){return t.field.isEqual(e.field)&&function(i,n){return i instanceof _l&&n instanceof _l||i instanceof _c&&n instanceof _c?gl(i.elements,n.elements,sr):i instanceof Jd&&n instanceof Jd?sr(i.gt,n.gt):i instanceof bc&&n instanceof bc}(t.transform,e.transform)}class w7{constructor(e,i){this.version=e,this.transformResults=i}}class Ls{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Ls}static exists(e){return new Ls(void 0,e)}static updateTime(e){return new Ls(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ap{}function G5(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Q5(t.key,Ls.none()):new $c(t.key,t.data,Ls.none());{const i=t.data,n=zn.empty();let s=new ss(nr.comparator);for(let a of e.fields)if(!s.has(a)){let l=i.field(a);l===null&&a.length>1&&(a=a.popLast(),l=i.field(a)),l===null?n.delete(a):n.set(a,l),s=s.add(a)}return new Ca(t.key,n,new Js(s.toArray()),Ls.none())}}function S7(t,e,i){t instanceof $c?function(n,s,a){const l=n.value.clone(),p=Cb(n.fieldTransforms,s,a.transformResults);l.setAll(p),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,i):t instanceof Ca?function(n,s,a){if(!Ju(n.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Cb(n.fieldTransforms,s,a.transformResults),p=s.data;p.setAll(K5(n)),p.setAll(l),s.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(t,e,i):function(n,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,i)}function Nh(t,e,i,n){return t instanceof $c?function(s,a,l,p){if(!Ju(s.precondition,a))return l;const f=s.value.clone(),g=wb(s.fieldTransforms,p,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,i,n):t instanceof Ca?function(s,a,l,p){if(!Ju(s.precondition,a))return l;const f=wb(s.fieldTransforms,p,a),g=a.data;return g.setAll(K5(s)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,i,n):function(s,a,l){return Ju(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,i)}function k7(t,e){let i=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=$5(n.transform,s||null);a!=null&&(i===null&&(i=zn.empty()),i.set(n.field,a))}return i||null}function _b(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,n){return i===void 0&&n===void 0||!(!i||!n)&&gl(i,n,(s,a)=>C7(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $c extends ap{constructor(e,i,n,s=[]){super(),this.key=e,this.value=i,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ca extends ap{constructor(e,i,n,s,a=[]){super(),this.key=e,this.data=i,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function K5(t){const e=new Map;return t.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const n=t.data.field(i);e.set(i,n)}}),e}function Cb(t,e,i){const n=new Map;xi(t.length===i.length);for(let s=0;s<i.length;s++){const a=t[s],l=a.transform,p=e.data.field(a.field);n.set(a.field,_7(l,p,i[s]))}return n}function wb(t,e,i){const n=new Map;for(const s of t){const a=s.transform,l=i.data.field(s.field);n.set(s.field,b7(a,l,e))}return n}class Q5 extends ap{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T7 extends ap{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,i,n,s){this.batchId=e,this.localWriteTime=i,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,i){const n=i.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&S7(a,e,n[s])}}applyToLocalView(e,i){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(i=Nh(n,e,i,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(i=Nh(n,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const n=j5();return this.mutations.forEach(s=>{const a=e.get(s.key),l=a.overlayedDocument;let p=this.applyToLocalView(l,a.mutatedFields);p=i.has(s.key)?null:p;const f=G5(l,p);f!==null&&n.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Et.min())}),n}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),Rt())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,(i,n)=>_b(i,n))&&gl(this.baseMutations,e.baseMutations,(i,n)=>_b(i,n))}}class tg{constructor(e,i,n,s){this.batch=e,this.commitVersion=i,this.mutationResults=n,this.docVersions=s}static from(e,i,n){xi(e.mutations.length===n.length);let s=x7;const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,n[l].version);return new tg(e,i,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ri,zt;function A7(t){switch(t){default:return yt();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function Z5(t){if(t===void 0)return Er("GRPC error has no .code"),Ie.UNKNOWN;switch(t){case Ri.OK:return Ie.OK;case Ri.CANCELLED:return Ie.CANCELLED;case Ri.UNKNOWN:return Ie.UNKNOWN;case Ri.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Ri.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Ri.INTERNAL:return Ie.INTERNAL;case Ri.UNAVAILABLE:return Ie.UNAVAILABLE;case Ri.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Ri.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Ri.NOT_FOUND:return Ie.NOT_FOUND;case Ri.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Ri.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Ri.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Ri.ABORTED:return Ie.ABORTED;case Ri.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Ri.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Ri.DATA_LOSS:return Ie.DATA_LOSS;default:return yt()}}(zt=Ri||(Ri={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Eu}static getOrCreateInstance(){return Eu===null&&(Eu=new ig),Eu}onExistenceFilterMismatch(e){const i=Symbol();return this.onExistenceFilterMismatchCallbacks.set(i,e),()=>this.onExistenceFilterMismatchCallbacks.delete(i)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(i=>i(e))}}let Eu=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=new qo([4294967295,4294967295],0);function Sb(t){const e=D7().encode(t),i=new N9;return i.update(e),new Uint8Array(i.digest())}function kb(t){const e=new DataView(t.buffer),i=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qo([i,n],0),new qo([s,a],0)]}class ng{constructor(e,i,n){if(this.bitmap=e,this.padding=i,this.hashCount=n,i<0||i>=8)throw new _h(`Invalid padding: ${i}`);if(n<0)throw new _h(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new _h(`Invalid hash count: ${n}`);if(e.length===0&&i!==0)throw new _h(`Invalid padding when bitmap length is 0: ${i}`);this.It=8*e.length-i,this.Tt=qo.fromNumber(this.It)}Et(e,i,n){let s=e.add(i.multiply(qo.fromNumber(n)));return s.compare(I7)===1&&(s=new qo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const i=Sb(e),[n,s]=kb(i);for(let a=0;a<this.hashCount;a++){const l=this.Et(n,s,a);if(!this.At(l))return!1}return!0}static create(e,i,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new ng(a,s,i);return n.forEach(p=>l.insert(p)),l}insert(e){if(this.It===0)return;const i=Sb(e),[n,s]=kb(i);for(let a=0;a<this.hashCount;a++){const l=this.Et(n,s,a);this.Rt(l)}}Rt(e){const i=Math.floor(e/8),n=e%8;this.bitmap[i]|=1<<n}}class _h extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,i,n,s,a){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,i,n){const s=new Map;return s.set(e,Hc.createSynthesizedTargetChangeForCurrentChange(e,i,n)),new op(Et.min(),s,new ki(Kt),Dr(),Rt())}}class Hc{constructor(e,i,n,s,a){this.resumeToken=e,this.current=i,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,i,n){return new Hc(n,i,Rt(),Rt(),Rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,i,n,s){this.Pt=e,this.removedTargetIds=i,this.key=n,this.bt=s}}class J5{constructor(e,i){this.targetId=e,this.Vt=i}}class q5{constructor(e,i,n=hs.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=i,this.resumeToken=n,this.cause=s}}class Tb{constructor(){this.St=0,this.Dt=Pb(),this.Ct=hs.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Rt(),i=Rt(),n=Rt();return this.Dt.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:i=i.add(s);break;case 1:n=n.add(s);break;default:yt()}}),new Hc(this.Ct,this.xt,e,i,n)}Ft(){this.Nt=!1,this.Dt=Pb()}Bt(e,i){this.Nt=!0,this.Dt=this.Dt.insert(e,i)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class F7{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Dr(),this.zt=Mb(),this.Wt=new ki(Kt)}Ht(e){for(const i of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(i,e.bt):this.Yt(i,e.key,e.bt);for(const i of e.removedTargetIds)this.Yt(i,e.key,e.bt)}Xt(e){this.forEachTarget(e,i=>{const n=this.Zt(i);switch(e.state){case 0:this.te(i)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(i);break;case 3:this.te(i)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(i)&&(this.ee(i),n.$t(e.resumeToken));break;default:yt()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.Qt.forEach((n,s)=>{this.te(s)&&i(s)})}ne(e){var i;const n=e.targetId,s=e.Vt.count,a=this.se(n);if(a){const l=a.target;if(zm(l))if(s===0){const p=new ht(l.path);this.Yt(n,p,wn.newNoDocument(p,Et.min()))}else xi(s===1);else{const p=this.ie(n);if(p!==s){const f=this.re(e,p);if(f!==0){this.ee(n);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,g)}(i=ig.instance)===null||i===void 0||i.notifyOnExistenceFilterMismatch(function(g,m,k){var T,D,P,L,$,N;const E={localCacheCount:m,existenceFilterCount:k.count},B=k.unchangedNames;return B&&(E.bloomFilter={applied:g===0,hashCount:(T=B==null?void 0:B.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(L=(P=(D=B==null?void 0:B.bits)===null||D===void 0?void 0:D.bitmap)===null||P===void 0?void 0:P.length)!==null&&L!==void 0?L:0,padding:(N=($=B==null?void 0:B.bits)===null||$===void 0?void 0:$.padding)!==null&&N!==void 0?N:0}),E}(f,p,e.Vt))}}}}re(e,i){const{unchangedNames:n,count:s}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:p=0}=n;let f,g;try{f=io(a).toUint8Array()}catch(m){if(m instanceof M5)return ml("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw m}try{g=new ng(f,l,p)}catch(m){return ml(m instanceof _h?"BloomFilter error: ":"Applying bloom filter failed: ",m),1}return g.It===0?1:s!==i-this.oe(e.targetId,g)?2:0}oe(e,i){const n=this.Gt.getRemoteKeysForTarget(e);let s=0;return n.forEach(a=>{const l=this.Gt.ue(),p=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;i.vt(p)||(this.Yt(e,a,null),s++)}),s}ce(e){const i=new Map;this.Qt.forEach((a,l)=>{const p=this.se(l);if(p){if(a.current&&zm(p.target)){const f=new ht(p.target.path);this.jt.get(f)!==null||this.ae(l,f)||this.Yt(l,f,wn.newNoDocument(f,e))}a.Mt&&(i.set(l,a.Ot()),a.Ft())}});let n=Rt();this.zt.forEach((a,l)=>{let p=!0;l.forEachWhile(f=>{const g=this.se(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(n=n.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const s=new op(e,i,this.Wt,this.jt,n);return this.jt=Dr(),this.zt=Mb(),this.Wt=new ki(Kt),s}Jt(e,i){if(!this.te(e))return;const n=this.ae(e,i.key)?2:0;this.Zt(e).Bt(i.key,n),this.jt=this.jt.insert(i.key,i),this.zt=this.zt.insert(i.key,this.he(i.key).add(e))}Yt(e,i,n){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,i)?s.Bt(i,1):s.Lt(i),this.zt=this.zt.insert(i,this.he(i).delete(e)),n&&(this.jt=this.jt.insert(i,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const i=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let i=this.Qt.get(e);return i||(i=new Tb,this.Qt.set(e,i)),i}he(e){let i=this.zt.get(e);return i||(i=new ss(Kt),this.zt=this.zt.insert(e,i)),i}te(e){const i=this.se(e)!==null;return i||ot("WatchChangeAggregator","Detected inactive target",e),i}se(e){const i=this.Qt.get(e);return i&&i.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Tb),this.Gt.getRemoteKeysForTarget(e).forEach(i=>{this.Yt(e,i,null)})}ae(e,i){return this.Gt.getRemoteKeysForTarget(e).has(i)}}function Mb(){return new ki(ht.comparator)}function Pb(){return new ki(ht.comparator)}const B7={asc:"ASCENDING",desc:"DESCENDING"},L7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N7={and:"AND",or:"OR"};class R7{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Ym(t,e){return t.useProto3Json||q0(e)?e:{value:e}}function qd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function V7(t,e){return qd(t,e.toTimestamp())}function ir(t){return xi(!!t),Et.fromTimestamp(function(e){const i=ha(e);return new Bn(i.seconds,i.nanos)}(t))}function sg(t,e){return function(i){return new Ei(["projects",i.projectId,"databases",i.database])}(t).child("documents").child(e).canonicalString()}function tS(t){const e=Ei.fromString(t);return xi(rS(e)),e}function Xm(t,e){return sg(t.databaseId,e.path)}function _f(t,e){const i=tS(e);if(i.get(1)!==t.databaseId.projectId)throw new Qe(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+t.databaseId.projectId);if(i.get(3)!==t.databaseId.database)throw new Qe(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+t.databaseId.database);return new ht(iS(i))}function Um(t,e){return sg(t.databaseId,e)}function O7(t){const e=tS(t);return e.length===4?Ei.emptyPath():iS(e)}function Gm(t){return new Ei(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iS(t){return xi(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Eb(t,e,i){return{name:Xm(t,e),fields:i.value.mapValue.fields}}function j7(t,e){let i;if("targetChange"in e){e.targetChange;const n=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:yt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,g){return f.useProto3Json?(xi(g===void 0||typeof g=="string"),hs.fromBase64String(g||"")):(xi(g===void 0||g instanceof Uint8Array),hs.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,p=l&&function(f){const g=f.code===void 0?Ie.UNKNOWN:Z5(f.code);return new Qe(g,f.message||"")}(l);i=new q5(n,s,a,p||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=_f(t,n.document.name),a=ir(n.document.updateTime),l=n.document.createTime?ir(n.document.createTime):Et.min(),p=new zn({mapValue:{fields:n.document.fields}}),f=wn.newFoundDocument(s,a,l,p),g=n.targetIds||[],m=n.removedTargetIds||[];i=new qu(g,m,f.key,f)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=_f(t,n.document),a=n.readTime?ir(n.readTime):Et.min(),l=wn.newNoDocument(s,a),p=n.removedTargetIds||[];i=new qu([],p,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=_f(t,n.document),a=n.removedTargetIds||[];i=new qu([],a,s,null)}else{if(!("filter"in e))return yt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,l=new E7(s,a),p=n.targetId;i=new J5(p,l)}}return i}function W7(t,e){let i;if(e instanceof $c)i={update:Eb(t,e.key,e.value)};else if(e instanceof Q5)i={delete:Xm(t,e.key)};else if(e instanceof Ca)i={update:Eb(t,e.key,e.data),updateMask:Q7(e.fieldMask)};else{if(!(e instanceof T7))return yt();i={verify:Xm(t,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const l=a.transform;if(l instanceof bc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _l)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _c)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Jd)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw yt()}(0,n))),e.precondition.isNone||(i.currentDocument=function(n,s){return s.updateTime!==void 0?{updateTime:V7(n,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:yt()}(t,e.precondition)),i}function z7(t,e){return t&&t.length>0?(xi(e!==void 0),t.map(i=>function(n,s){let a=n.updateTime?ir(n.updateTime):ir(s);return a.isEqual(Et.min())&&(a=ir(s)),new w7(a,n.transformResults||[])}(i,e))):[]}function $7(t,e){return{documents:[Um(t,e.path)]}}function H7(t,e){const i={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(i.parent=Um(t,n),i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i.parent=Um(t,n.popLast()),i.structuredQuery.from=[{collectionId:n.lastSegment()}]);const s=function(f){if(f.length!==0)return sS(Ws.create(f,"and"))}(e.filters);s&&(i.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(g=>function(m){return{field:Mo(m.field),direction:U7(m.dir)}}(g))}(e.orderBy);a&&(i.structuredQuery.orderBy=a);const l=Ym(t,e.limit);var p;return l!==null&&(i.structuredQuery.limit=l),e.startAt&&(i.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(i.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),i}function Y7(t){let e=O7(t.parent);const i=t.structuredQuery,n=i.from?i.from.length:0;let s=null;if(n>0){xi(n===1);const m=i.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let a=[];i.where&&(a=function(m){const k=nS(m);return k instanceof Ws&&I5(k)?k.getFilters():[k]}(i.where));let l=[];i.orderBy&&(l=i.orderBy.map(m=>function(k){return new el(Po(k.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(m)));let p=null;i.limit&&(p=function(m){let k;return k=typeof m=="object"?m.value:m,q0(k)?null:k}(i.limit));let f=null;i.startAt&&(f=function(m){const k=!!m.before,T=m.values||[];return new bl(T,k)}(i.startAt));let g=null;return i.endAt&&(g=function(m){const k=!m.before,T=m.values||[];return new bl(T,k)}(i.endAt)),u7(e,s,l,a,p,"F",f,g)}function X7(t,e){const i=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt()}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function nS(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Po(e.unaryFilter.field);return zi.create(i,"==",{doubleValue:NaN});case"IS_NULL":const n=Po(e.unaryFilter.field);return zi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Po(e.unaryFilter.field);return zi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Po(e.unaryFilter.field);return zi.create(a,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}(t):t.fieldFilter!==void 0?function(e){return zi.create(Po(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Ws.create(e.compositeFilter.filters.map(i=>nS(i)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return yt()}}(e.compositeFilter.op))}(t):yt()}function U7(t){return B7[t]}function G7(t){return L7[t]}function K7(t){return N7[t]}function Mo(t){return{fieldPath:t.canonicalString()}}function Po(t){return nr.fromServerFormat(t.fieldPath)}function sS(t){return t instanceof zi?function(e){if(e.op==="=="){if(xb(e.value))return{unaryFilter:{field:Mo(e.field),op:"IS_NAN"}};if(fb(e.value))return{unaryFilter:{field:Mo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(xb(e.value))return{unaryFilter:{field:Mo(e.field),op:"IS_NOT_NAN"}};if(fb(e.value))return{unaryFilter:{field:Mo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(e.field),op:G7(e.op),value:e.value}}}(t):t instanceof Ws?function(e){const i=e.getFilters().map(n=>sS(n));return i.length===1?i[0]:{compositeFilter:{op:K7(e.op),filters:i}}}(t):yt()}function Q7(t){const e=[];return t.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function rS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,i,n,s,a=Et.min(),l=Et.min(),p=hs.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=i,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=p,this.expectedCount=f}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e){this.fe=e}}function J7(t){const e=Y7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(){this.rn=new eD}addToCollectionParentIndex(e,i){return this.rn.add(i),ze.resolve()}getCollectionParents(e,i){return ze.resolve(this.rn.getEntries(i))}addFieldIndex(e,i){return ze.resolve()}deleteFieldIndex(e,i){return ze.resolve()}getDocumentsMatchingTarget(e,i){return ze.resolve(null)}getIndexType(e,i){return ze.resolve(0)}getFieldIndexes(e,i){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,i){return ze.resolve(la.min())}getMinOffsetFromCollectionGroup(e,i){return ze.resolve(la.min())}updateCollectionGroup(e,i,n){return ze.resolve()}updateIndexEntries(e,i){return ze.resolve()}}class eD{constructor(){this.index={}}add(e){const i=e.lastSegment(),n=e.popLast(),s=this.index[i]||new ss(Ei.comparator),a=!s.has(n);return this.index[i]=s.add(n),a}has(e){const i=e.lastSegment(),n=e.popLast(),s=this.index[i];return s&&s.has(n)}getEntries(e){return(this.index[e]||new ss(Ei.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Cl(0)}static Mn(){return new Cl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.changes=new jl(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const n=this.changes.get(i);return n!==void 0?ze.resolve(n):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,i,n,s){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,i){let n=null;return this.documentOverlayCache.getOverlay(e,i).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,i))).next(s=>(n!==null&&Nh(n.mutation,s,Js.empty(),Bn.now()),s))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(n=>this.getLocalViewOfDocuments(e,n,Rt()).next(()=>n))}getLocalViewOfDocuments(e,i,n=Rt()){const s=Oa();return this.populateOverlays(e,s,i).next(()=>this.computeViews(e,i,s,n).next(a=>{let l=bh();return a.forEach((p,f)=>{l=l.insert(p,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,i){const n=Oa();return this.populateOverlays(e,n,i).next(()=>this.computeViews(e,i,n,Rt()))}populateOverlays(e,i,n){const s=[];return n.forEach(a=>{i.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((l,p)=>{i.set(l,p)})})}computeViews(e,i,n,s){let a=Dr();const l=Lh(),p=Lh();return i.forEach((f,g)=>{const m=n.get(g.key);s.has(g.key)&&(m===void 0||m.mutation instanceof Ca)?a=a.insert(g.key,g):m!==void 0?(l.set(g.key,m.mutation.getFieldMask()),Nh(m.mutation,g,m.mutation.getFieldMask(),Bn.now())):l.set(g.key,Js.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((g,m)=>l.set(g,m)),i.forEach((g,m)=>{var k;return p.set(g,new iD(m,(k=l.get(g))!==null&&k!==void 0?k:null))}),p))}recalculateAndSaveOverlays(e,i){const n=Lh();let s=new ki((l,p)=>l-p),a=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(l=>{for(const p of l)p.keys().forEach(f=>{const g=i.get(f);if(g===null)return;let m=n.get(f)||Js.empty();m=p.applyToLocalView(g,m),n.set(f,m);const k=(s.get(p.batchId)||Rt()).add(f);s=s.insert(p.batchId,k)})}).next(()=>{const l=[],p=s.getReverseIterator();for(;p.hasNext();){const f=p.getNext(),g=f.key,m=f.value,k=j5();m.forEach(T=>{if(!a.has(T)){const D=G5(i.get(T),n.get(T));D!==null&&k.set(T,D),a=a.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,g,k))}return ze.waitFor(l)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,i,n){return function(s){return ht.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):eg(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,n):this.getDocumentsMatchingCollectionQuery(e,i,n)}getNextDocuments(e,i,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,n,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,n.largestBatchId,s-a.size):ze.resolve(Oa());let p=-1,f=a;return l.next(g=>ze.forEach(g,(m,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),a.get(m)?ze.resolve():this.remoteDocumentCache.getEntry(e,m).next(T=>{f=f.insert(m,T)}))).next(()=>this.populateOverlays(e,g,a)).next(()=>this.computeViews(e,f,g,Rt())).next(m=>({batchId:p,changes:O5(m)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new ht(i)).next(n=>{let s=bh();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,i,n){const s=i.collectionGroup;let a=bh();return this.indexManager.getCollectionParents(e,s).next(l=>ze.forEach(l,p=>{const f=function(g,m){return new _a(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(i,p.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,n).next(g=>{g.forEach((m,k)=>{a=a.insert(m,k)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,i,n){let s;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,n,s))).next(a=>{s.forEach((p,f)=>{const g=f.getKey();a.get(g)===null&&(a=a.insert(g,wn.newInvalidDocument(g)))});let l=bh();return a.forEach((p,f)=>{const g=s.get(p);g!==void 0&&Nh(g.mutation,f,Js.empty(),Bn.now()),sp(i,f)&&(l=l.insert(p,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,i){return ze.resolve(this.cs.get(i))}saveBundleMetadata(e,i){var n;return this.cs.set(i.id,{id:(n=i).id,version:n.version,createTime:ir(n.createTime)}),ze.resolve()}getNamedQuery(e,i){return ze.resolve(this.hs.get(i))}saveNamedQuery(e,i){return this.hs.set(i.name,function(n){return{name:n.name,query:J7(n.bundledQuery),readTime:ir(n.readTime)}}(i)),ze.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.overlays=new ki(ht.comparator),this.ls=new Map}getOverlay(e,i){return ze.resolve(this.overlays.get(i))}getOverlays(e,i){const n=Oa();return ze.forEach(i,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,i,n){return n.forEach((s,a)=>{this.we(e,i,a)}),ze.resolve()}removeOverlaysForBatchId(e,i,n){const s=this.ls.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(n)),ze.resolve()}getOverlaysForCollection(e,i,n){const s=Oa(),a=i.length+1,l=new ht(i.child("")),p=this.overlays.getIteratorFrom(l);for(;p.hasNext();){const f=p.getNext().value,g=f.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===a&&f.largestBatchId>n&&s.set(f.getKey(),f)}return ze.resolve(s)}getOverlaysForCollectionGroup(e,i,n,s){let a=new ki((g,m)=>g-m);const l=this.overlays.getIterator();for(;l.hasNext();){const g=l.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>n){let m=a.get(g.largestBatchId);m===null&&(m=Oa(),a=a.insert(g.largestBatchId,m)),m.set(g.getKey(),g)}}const p=Oa(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,m)=>p.set(g,m)),!(p.size()>=s)););return ze.resolve(p)}we(e,i,n){const s=this.overlays.get(n.key);if(s!==null){const l=this.ls.get(s.largestBatchId).delete(n.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new P7(i,n));let a=this.ls.get(i);a===void 0&&(a=Rt(),this.ls.set(i,a)),this.ls.set(i,a.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this.fs=new ss(en.ds),this.ws=new ss(en._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,i){const n=new en(e,i);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,i){e.forEach(n=>this.addReference(n,i))}removeReference(e,i){this.ys(new en(e,i))}ps(e,i){e.forEach(n=>this.removeReference(n,i))}Is(e){const i=new ht(new Ei([])),n=new en(i,e),s=new en(i,e+1),a=[];return this.ws.forEachInRange([n,s],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const i=new ht(new Ei([])),n=new en(i,e),s=new en(i,e+1);let a=Rt();return this.ws.forEachInRange([n,s],l=>{a=a.add(l.key)}),a}containsKey(e){const i=new en(e,0),n=this.fs.firstAfterOrEqual(i);return n!==null&&e.isEqual(n.key)}}class en{constructor(e,i){this.key=e,this.As=i}static ds(e,i){return ht.comparator(e.key,i.key)||Kt(e.As,i.As)}static _s(e,i){return Kt(e.As,i.As)||ht.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.vs=1,this.Rs=new ss(en.ds)}checkEmpty(e){return ze.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,n,s){const a=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new M7(a,i,n,s);this.mutationQueue.push(l);for(const p of s)this.Rs=this.Rs.add(new en(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ze.resolve(l)}lookupMutationBatch(e,i){return ze.resolve(this.Ps(i))}getNextMutationBatchAfterBatchId(e,i){const n=i+1,s=this.bs(n),a=s<0?0:s;return ze.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const n=new en(i,0),s=new en(i,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([n,s],l=>{const p=this.Ps(l.As);a.push(p)}),ze.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,i){let n=new ss(Kt);return i.forEach(s=>{const a=new en(s,0),l=new en(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],p=>{n=n.add(p.As)})}),ze.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,i){const n=i.path,s=n.length+1;let a=n;ht.isDocumentKey(a)||(a=a.child(""));const l=new en(new ht(a),0);let p=new ss(Kt);return this.Rs.forEachWhile(f=>{const g=f.key.path;return!!n.isPrefixOf(g)&&(g.length===s&&(p=p.add(f.As)),!0)},l),ze.resolve(this.Vs(p))}Vs(e){const i=[];return e.forEach(n=>{const s=this.Ps(n);s!==null&&i.push(s)}),i}removeMutationBatch(e,i){xi(this.Ss(i.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Rs;return ze.forEach(i.mutations,s=>{const a=new en(s.key,i.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,i){const n=new en(i,0),s=this.Rs.firstAfterOrEqual(n);return ze.resolve(i.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ze.resolve()}Ss(e,i){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const i=this.bs(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.Ds=e,this.docs=new ki(ht.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const n=i.key,s=this.docs.get(n),a=s?s.size:0,l=this.Ds(i);return this.docs=this.docs.insert(n,{document:i.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const n=this.docs.get(i);return ze.resolve(n?n.document.mutableCopy():wn.newInvalidDocument(i))}getEntries(e,i){let n=Dr();return i.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():wn.newInvalidDocument(s))}),ze.resolve(n)}getDocumentsMatchingQuery(e,i,n,s){let a=Dr();const l=i.path,p=new ht(l.child("")),f=this.docs.getIteratorFrom(p);for(;f.hasNext();){const{key:g,value:{document:m}}=f.getNext();if(!l.isPrefixOf(g.path))break;g.path.length>l.length+1||G9(U9(m),n)<=0||(s.has(m.key)||sp(i,m))&&(a=a.insert(m.key,m.mutableCopy()))}return ze.resolve(a)}getAllFromCollectionGroup(e,i,n,s){yt()}Cs(e,i){return ze.forEach(this.docs,n=>i(n))}newChangeBuffer(e){return new lD(this)}getSize(e){return ze.resolve(this.size)}}class lD extends tD{constructor(e){super(),this.os=e}applyChanges(e){const i=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?i.push(this.os.addEntry(e,s)):this.os.removeEntry(n)}),ze.waitFor(i)}getFromCache(e,i){return this.os.getEntry(e,i)}getAllFromCache(e,i){return this.os.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.persistence=e,this.xs=new jl(i=>Z2(i),J2),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ns=0,this.ks=new rg,this.targetCount=0,this.Ms=Cl.kn()}forEachTarget(e,i){return this.xs.forEach((n,s)=>i(s)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,i,n){return n&&(this.lastRemoteSnapshotVersion=n),i>this.Ns&&(this.Ns=i),ze.resolve()}Fn(e){this.xs.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Ms=new Cl(i),this.highestTargetId=i),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,i){return this.Fn(i),this.targetCount+=1,ze.resolve()}updateTargetData(e,i){return this.Fn(i),ze.resolve()}removeTargetData(e,i){return this.xs.delete(i.target),this.ks.Is(i.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,i,n){let s=0;const a=[];return this.xs.forEach((l,p)=>{p.sequenceNumber<=i&&n.get(p.targetId)===null&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),s++)}),ze.waitFor(a).next(()=>s)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,i){const n=this.xs.get(i)||null;return ze.resolve(n)}addMatchingKeys(e,i,n){return this.ks.gs(i,n),ze.resolve()}removeMatchingKeys(e,i,n){this.ks.ps(i,n);const s=this.persistence.referenceDelegate,a=[];return s&&i.forEach(l=>{a.push(s.markPotentiallyOrphaned(e,l))}),ze.waitFor(a)}removeMatchingKeysForTargetId(e,i){return this.ks.Is(i),ze.resolve()}getMatchingKeysForTargetId(e,i){const n=this.ks.Es(i);return ze.resolve(n)}containsKey(e,i){return ze.resolve(this.ks.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,i){this.$s={},this.overlays={},this.Os=new G2(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new hD(this),this.indexManager=new q7,this.remoteDocumentCache=function(n){return new oD(n)}(n=>this.referenceDelegate.Ls(n)),this.serializer=new Z7(i),this.qs=new sD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new rD,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let n=this.$s[e.toKey()];return n||(n=new aD(i,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,i,n){ot("MemoryPersistence","Starting transaction:",e);const s=new uD(this.Os.next());return this.referenceDelegate.Us(),n(s).next(a=>this.referenceDelegate.Ks(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Gs(e,i){return ze.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,i)))}}class uD extends Q9{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Qs=new rg,this.js=null}static zs(e){return new ag(e)}get Ws(){if(this.js)return this.js;throw yt()}addReference(e,i,n){return this.Qs.addReference(n,i),this.Ws.delete(n.toString()),ze.resolve()}removeReference(e,i,n){return this.Qs.removeReference(n,i),this.Ws.add(n.toString()),ze.resolve()}markPotentiallyOrphaned(e,i){return this.Ws.add(i.toString()),ze.resolve()}removeTarget(e,i){this.Qs.Is(i.targetId).forEach(s=>this.Ws.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,i.targetId).next(s=>{s.forEach(a=>this.Ws.add(a.toString()))}).next(()=>n.removeTargetData(e,i))}Us(){this.js=new Set}Ks(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.Ws,n=>{const s=ht.fromPath(n);return this.Hs(e,s).next(a=>{a||i.removeEntry(s,Et.min())})}).next(()=>(this.js=null,i.apply(e)))}updateLimboDocument(e,i){return this.Hs(e,i).next(n=>{n?this.Ws.delete(i.toString()):this.Ws.add(i.toString())})}Ls(e){return 0}Hs(e,i){return ze.or([()=>ze.resolve(this.Qs.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Gs(e,i)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,i,n,s){this.targetId=e,this.fromCache=i,this.Fi=n,this.Bi=s}static Li(e,i){let n=Rt(),s=Rt();for(const a of i.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new og(e,i.fromCache,n,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.qi=!1}initialize(e,i){this.Ui=e,this.indexManager=i,this.qi=!0}getDocumentsMatchingQuery(e,i,n,s){return this.Ki(e,i).next(a=>a||this.Gi(e,i,s,n)).next(a=>a||this.Qi(e,i))}Ki(e,i){if(vb(i))return ze.resolve(null);let n=Ar(i);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(i.limit!==null&&s===1&&(i=Zd(i,null,"F"),n=Ar(i)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const l=Rt(...a);return this.Ui.getDocuments(e,l).next(p=>this.indexManager.getMinOffset(e,n).next(f=>{const g=this.ji(i,p);return this.zi(i,g,l,f.readTime)?this.Ki(e,Zd(i,null,"F")):this.Wi(e,g,i,f)}))})))}Gi(e,i,n,s){return vb(i)||s.isEqual(Et.min())?this.Qi(e,i):this.Ui.getDocuments(e,n).next(a=>{const l=this.ji(i,a);return this.zi(i,l,n,s)?this.Qi(e,i):(cb()<=Gt.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hm(i)),this.Wi(e,l,i,X9(s,-1)))})}ji(e,i){let n=new ss(R5(e));return i.forEach((s,a)=>{sp(e,a)&&(n=n.add(a))}),n}zi(e,i,n,s){if(e.limit===null)return!1;if(n.size!==i.size)return!0;const a=e.limitType==="F"?i.last():i.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Qi(e,i){return cb()<=Gt.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",Hm(i)),this.Ui.getDocumentsMatchingQuery(e,i,la.min())}Wi(e,i,n,s){return this.Ui.getDocumentsMatchingQuery(e,n,s).next(a=>(i.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,i,n,s){this.persistence=e,this.Hi=i,this.serializer=s,this.Ji=new ki(Kt),this.Yi=new jl(a=>Z2(a),J2),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nD(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Ji))}}function fD(t,e,i,n){return new pD(t,e,i,n)}async function aS(t,e){const i=St(t);return await i.persistence.runTransaction("Handle user change","readonly",n=>{let s;return i.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,i.tr(e),i.mutationQueue.getAllMutationBatches(n))).next(a=>{const l=[],p=[];let f=Rt();for(const g of s){l.push(g.batchId);for(const m of g.mutations)f=f.add(m.key)}for(const g of a){p.push(g.batchId);for(const m of g.mutations)f=f.add(m.key)}return i.localDocuments.getDocuments(n,f).next(g=>({er:g,removedBatchIds:l,addedBatchIds:p}))})})}function xD(t,e){const i=St(t);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=i.Zi.newChangeBuffer({trackRemovals:!0});return function(l,p,f,g){const m=f.batch,k=m.keys();let T=ze.resolve();return k.forEach(D=>{T=T.next(()=>g.getEntry(p,D)).next(P=>{const L=f.docVersions.get(D);xi(L!==null),P.version.compareTo(L)<0&&(m.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),g.addEntry(P)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(p,m))}(i,n,e,a).next(()=>a.apply(n)).next(()=>i.mutationQueue.performConsistencyCheck(n)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let p=Rt();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(p=p.add(l.batch.mutations[f].key));return p}(e))).next(()=>i.localDocuments.getDocuments(n,s))})}function oS(t){const e=St(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Bs.getLastRemoteSnapshotVersion(i))}function mD(t,e){const i=St(t),n=e.snapshotVersion;let s=i.Ji;return i.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=i.Zi.newChangeBuffer({trackRemovals:!0});s=i.Ji;const p=[];e.targetChanges.forEach((m,k)=>{const T=s.get(k);if(!T)return;p.push(i.Bs.removeMatchingKeys(a,m.removedDocuments,k).next(()=>i.Bs.addMatchingKeys(a,m.addedDocuments,k)));let D=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(k)!==null?D=D.withResumeToken(hs.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):m.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(m.resumeToken,n)),s=s.insert(k,D),function(P,L,$){return P.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(T,D,m)&&p.push(i.Bs.updateTargetData(a,D))});let f=Dr(),g=Rt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(a,m))}),p.push(gD(a,l,e.documentUpdates).next(m=>{f=m.nr,g=m.sr})),!n.isEqual(Et.min())){const m=i.Bs.getLastRemoteSnapshotVersion(a).next(k=>i.Bs.setTargetsMetadata(a,a.currentSequenceNumber,n));p.push(m)}return ze.waitFor(p).next(()=>l.apply(a)).next(()=>i.localDocuments.getLocalViewOfDocuments(a,f,g)).next(()=>f)}).then(a=>(i.Ji=s,a))}function gD(t,e,i){let n=Rt(),s=Rt();return i.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let l=Dr();return i.forEach((p,f)=>{const g=a.get(p);f.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(p)),f.isNoDocument()&&f.version.isEqual(Et.min())?(e.removeEntry(p,f.readTime),l=l.insert(p,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(f),l=l.insert(p,f)):ot("LocalStore","Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",f.version)}),{nr:l,sr:s}})}function yD(t,e){const i=St(t);return i.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function vD(t,e){const i=St(t);return i.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return i.Bs.getTargetData(n,e).next(a=>a?(s=a,ze.resolve(s)):i.Bs.allocateTargetId(n).next(l=>(s=new Yr(e,l,"TargetPurposeListen",n.currentSequenceNumber),i.Bs.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=i.Ji.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(i.Ji=i.Ji.insert(n.targetId,n),i.Yi.set(e,n.targetId)),n})}async function Km(t,e,i){const n=St(t),s=n.Ji.get(e),a=i?"readwrite":"readwrite-primary";try{i||await n.persistence.runTransaction("Release target",a,l=>n.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!zc(l))throw l;ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ji=n.Ji.remove(e),n.Yi.delete(s.target)}function Ab(t,e,i){const n=St(t);let s=Et.min(),a=Rt();return n.persistence.runTransaction("Execute query","readonly",l=>function(p,f,g){const m=St(p),k=m.Yi.get(g);return k!==void 0?ze.resolve(m.Ji.get(k)):m.Bs.getTargetData(f,g)}(n,l,Ar(e)).next(p=>{if(p)return s=p.lastLimboFreeSnapshotVersion,n.Bs.getMatchingKeysForTargetId(l,p.targetId).next(f=>{a=f})}).next(()=>n.Hi.getDocumentsMatchingQuery(l,e,i?s:Et.min(),i?a:Rt())).next(p=>(bD(n,d7(e),p),{documents:p,ir:a})))}function bD(t,e,i){let n=t.Xi.get(e)||Et.min();i.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Xi.set(e,n)}class Db{constructor(){this.activeTargetIds=y7()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _D{constructor(){this.Hr=new Db,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,i,n){this.Jr[e]=i}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Db,Promise.resolve()}handleUserChange(e,i,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au=null;function Cf(){return Au===null?Au=268435456+Math.round(2147483648*Math.random()):Au++,"0x"+Au.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class kD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http";this.mo=i+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,i,n,s,a){const l=Cf(),p=this.To(e,i);ot("RestConnection",`Sending RPC '${e}' ${l}:`,p,n);const f={};return this.Eo(f,s,a),this.Ao(e,p,f,n).then(g=>(ot("RestConnection",`Received RPC '${e}' ${l}: `,g),g),g=>{throw ml("RestConnection",`RPC '${e}' ${l} failed with error: `,g,"url: ",p,"request:",n),g})}vo(e,i,n,s,a,l){return this.Io(e,i,n,s,a)}Eo(e,i,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ol,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,a)=>e[a]=s),n&&n.headers.forEach((s,a)=>e[a]=s)}To(e,i){const n=wD[e];return`${this.mo}/v1/${i}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,i,n,s){const a=Cf();return new Promise((l,p)=>{const f=new L9;f.setWithCredentials(!0),f.listenOnce(I9.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case bf.NO_ERROR:const m=f.getResponseJson();ot(bn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case bf.TIMEOUT:ot(bn,`RPC '${e}' ${a} timed out`),p(new Qe(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case bf.HTTP_ERROR:const k=f.getStatus();if(ot(bn,`RPC '${e}' ${a} failed with status:`,k,"response text:",f.getResponseText()),k>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const D=T==null?void 0:T.error;if(D&&D.status&&D.message){const P=function(L){const $=L.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf($)>=0?$:Ie.UNKNOWN}(D.status);p(new Qe(P,D.message))}else p(new Qe(Ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else p(new Qe(Ie.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{ot(bn,`RPC '${e}' ${a} completed.`)}});const g=JSON.stringify(s);ot(bn,`RPC '${e}' ${a} sending request:`,s),f.send(i,"POST",g,n,15)})}Ro(e,i,n){const s=Cf(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=A9(),p=D9(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.xmlHttpFactory=new B9({})),this.Eo(f.initMessageHeaders,i,n),f.encodeInitMessageHeaders=!0;const m=a.join("");ot(bn,`Creating RPC '${e}' stream ${s}: ${m}`,f);const k=l.createWebChannel(m,f);let T=!1,D=!1;const P=new SD({ro:$=>{D?ot(bn,`Not sending because RPC '${e}' stream ${s} is closed:`,$):(T||(ot(bn,`Opening RPC '${e}' stream ${s} transport.`),k.open(),T=!0),ot(bn,`RPC '${e}' stream ${s} sending:`,$),k.send($))},oo:()=>k.close()}),L=($,N,E)=>{$.listen(N,B=>{try{E(B)}catch(H){setTimeout(()=>{throw H},0)}})};return L(k,Tu.EventType.OPEN,()=>{D||ot(bn,`RPC '${e}' stream ${s} transport opened.`)}),L(k,Tu.EventType.CLOSE,()=>{D||(D=!0,ot(bn,`RPC '${e}' stream ${s} transport closed`),P.wo())}),L(k,Tu.EventType.ERROR,$=>{D||(D=!0,ml(bn,`RPC '${e}' stream ${s} transport errored:`,$),P.wo(new Qe(Ie.UNAVAILABLE,"The operation could not be completed")))}),L(k,Tu.EventType.MESSAGE,$=>{var N;if(!D){const E=$.data[0];xi(!!E);const B=E,H=B.error||((N=B[0])===null||N===void 0?void 0:N.error);if(H){ot(bn,`RPC '${e}' stream ${s} received error:`,H);const U=H.status;let j=function(Z){const he=Ri[Z];if(he!==void 0)return Z5(he)}(U),G=H.message;j===void 0&&(j=Ie.INTERNAL,G="Unknown error status: "+U+" with message "+H.message),D=!0,P.wo(new Qe(j,G)),k.close()}else ot(bn,`RPC '${e}' stream ${s} received:`,E),P._o(E)}}),L(p,F9.STAT_EVENT,$=>{$.stat===lb.PROXY?ot(bn,`RPC '${e}' stream ${s} detected buffering proxy`):$.stat===lb.NOPROXY&&ot(bn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.fo()},0),P}}function wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(t){return new R7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,i,n=1e3,s=1.5,a=6e4){this.ii=e,this.timerId=i,this.Po=n,this.bo=s,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const i=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),s=Math.max(0,i-n);s>0&&ot("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${i} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,i,n,s,a,l,p,f){this.ii=e,this.$o=n,this.Oo=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=p,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new lS(e,i)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,i){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():i&&i.code===Ie.RESOURCE_EXHAUSTED?(Er(i.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):i&&i.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(i)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),i=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Fo===i&&this.Zo(n,s)},n=>{e(()=>{const s=new Qe(Ie.UNKNOWN,"Fetching auth token failed: "+n.message);return this.tu(s)})})}Zo(e,i){const n=this.Xo(this.Fo);this.stream=this.eu(e,i),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{n(()=>this.tu(s))}),this.stream.onMessage(s=>{n(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return i=>{this.ii.enqueueAndForget(()=>this.Fo===e?i():(ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TD extends hS{constructor(e,i,n,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,n,s,l),this.serializer=a}eu(e,i){return this.connection.Ro("Listen",e,i)}onMessage(e){this.qo.reset();const i=j7(this.serializer,e),n=function(s){if(!("targetChange"in s))return Et.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?ir(a.readTime):Et.min()}(e);return this.listener.nu(i,n)}su(e){const i={};i.database=Gm(this.serializer),i.addTarget=function(s,a){let l;const p=a.target;if(l=zm(p)?{documents:$7(s,p)}:{query:H7(s,p)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=eS(s,a.resumeToken);const f=Ym(s,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(Et.min())>0){l.readTime=qd(s,a.snapshotVersion.toTimestamp());const f=Ym(s,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const n=X7(this.serializer,e);n&&(i.labels=n),this.Wo(i)}iu(e){const i={};i.database=Gm(this.serializer),i.removeTarget=e,this.Wo(i)}}class MD extends hS{constructor(e,i,n,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,n,s,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,i){return this.connection.Ro("Write",e,i)}onMessage(e){if(xi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const i=z7(e.writeResults,e.commitTime),n=ir(e.commitTime);return this.listener.cu(n,i)}return xi(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Gm(this.serializer),this.Wo(e)}uu(e){const i={streamToken:this.lastStreamToken,writes:e.map(n=>W7(this.serializer,n))};this.Wo(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD extends class{}{constructor(e,i,n,s){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=n,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Qe(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,i,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Io(e,i,n,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Qe(Ie.UNKNOWN,s.toString())})}vo(e,i,n,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,i,n,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Qe(Ie.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class ED{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Er(i),this.mu=!1):ot("OnlineStateTracker",i)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,i,n,s,a){this.localStore=e,this.datastore=i,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(l=>{n.enqueueAndForget(async()=>{uo(this)&&(ot("RemoteStore","Restarting streams for network reachability change."),await async function(p){const f=St(p);f.vu.add(4),await Yc(f),f.bu.set("Unknown"),f.vu.delete(4),await hp(f)}(this))})}),this.bu=new ED(n,s)}}async function hp(t){if(uo(t))for(const e of t.Ru)await e(!0)}async function Yc(t){for(const e of t.Ru)await e(!1)}function cS(t,e){const i=St(t);i.Au.has(e.targetId)||(i.Au.set(e.targetId,e),cg(i)?hg(i):Wl(i).Ko()&&lg(i,e))}function uS(t,e){const i=St(t),n=Wl(i);i.Au.delete(e),n.Ko()&&dS(i,e),i.Au.size===0&&(n.Ko()?n.jo():uo(i)&&i.bu.set("Unknown"))}function lg(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const i=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}Wl(t).su(e)}function dS(t,e){t.Vu.qt(e),Wl(t).iu(e)}function hg(t){t.Vu=new F7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Wl(t).start(),t.bu.gu()}function cg(t){return uo(t)&&!Wl(t).Uo()&&t.Au.size>0}function uo(t){return St(t).vu.size===0}function pS(t){t.Vu=void 0}async function DD(t){t.Au.forEach((e,i)=>{lg(t,e)})}async function ID(t,e){pS(t),cg(t)?(t.bu.Iu(e),hg(t)):t.bu.set("Unknown")}async function FD(t,e,i){if(t.bu.set("Online"),e instanceof q5&&e.state===2&&e.cause)try{await async function(n,s){const a=s.cause;for(const l of s.targetIds)n.Au.has(l)&&(await n.remoteSyncer.rejectListen(l,a),n.Au.delete(l),n.Vu.removeTarget(l))}(t,e)}catch(n){ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await e0(t,n)}else if(e instanceof qu?t.Vu.Ht(e):e instanceof J5?t.Vu.ne(e):t.Vu.Xt(e),!i.isEqual(Et.min()))try{const n=await oS(t.localStore);i.compareTo(n)>=0&&await function(s,a){const l=s.Vu.ce(a);return l.targetChanges.forEach((p,f)=>{if(p.resumeToken.approximateByteSize()>0){const g=s.Au.get(f);g&&s.Au.set(f,g.withResumeToken(p.resumeToken,a))}}),l.targetMismatches.forEach((p,f)=>{const g=s.Au.get(p);if(!g)return;s.Au.set(p,g.withResumeToken(hs.EMPTY_BYTE_STRING,g.snapshotVersion)),dS(s,p);const m=new Yr(g.target,p,f,g.sequenceNumber);lg(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,i)}catch(n){ot("RemoteStore","Failed to raise snapshot:",n),await e0(t,n)}}async function e0(t,e,i){if(!zc(e))throw e;t.vu.add(1),await Yc(t),t.bu.set("Offline"),i||(i=()=>oS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ot("RemoteStore","Retrying IndexedDB access"),await i(),t.vu.delete(1),await hp(t)})}function fS(t,e){return e().catch(i=>e0(t,i,e))}async function cp(t){const e=St(t),i=ca(e);let n=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;BD(e);)try{const s=await yD(e.localStore,n);if(s===null){e.Eu.length===0&&i.jo();break}n=s.batchId,LD(e,s)}catch(s){await e0(e,s)}xS(e)&&mS(e)}function BD(t){return uo(t)&&t.Eu.length<10}function LD(t,e){t.Eu.push(e);const i=ca(t);i.Ko()&&i.ou&&i.uu(e.mutations)}function xS(t){return uo(t)&&!ca(t).Uo()&&t.Eu.length>0}function mS(t){ca(t).start()}async function ND(t){ca(t).hu()}async function RD(t){const e=ca(t);for(const i of t.Eu)e.uu(i.mutations)}async function VD(t,e,i){const n=t.Eu.shift(),s=tg.from(n,e,i);await fS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await cp(t)}async function OD(t,e){e&&ca(t).ou&&await async function(i,n){if(s=n.code,A7(s)&&s!==Ie.ABORTED){const a=i.Eu.shift();ca(i).Qo(),await fS(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,n)),await cp(i)}var s}(t,e),xS(t)&&mS(t)}async function Fb(t,e){const i=St(t);i.asyncQueue.verifyOperationInProgress(),ot("RemoteStore","RemoteStore received new credentials");const n=uo(i);i.vu.add(3),await Yc(i),n&&i.bu.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.vu.delete(3),await hp(i)}async function jD(t,e){const i=St(t);e?(i.vu.delete(2),await hp(i)):e||(i.vu.add(2),await Yc(i),i.bu.set("Unknown"))}function Wl(t){return t.Su||(t.Su=function(e,i,n){const s=St(e);return s.fu(),new TD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{uo:DD.bind(null,t),ao:ID.bind(null,t),nu:FD.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),cg(t)?hg(t):t.bu.set("Unknown")):(await t.Su.stop(),pS(t))})),t.Su}function ca(t){return t.Du||(t.Du=function(e,i,n){const s=St(e);return s.fu(),new MD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{uo:ND.bind(null,t),ao:OD.bind(null,t),au:RD.bind(null,t),cu:VD.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await cp(t)):(await t.Du.stop(),t.Eu.length>0&&(ot("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,i,n,s,a){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,i,n,s,a){const l=Date.now()+n,p=new ug(e,i,l,s,a);return p.start(n),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qe(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dg(t,e){if(Er("AsyncQueue",`${e}: ${t}`),zc(t))return new Qe(Ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.comparator=e?(i,n)=>e(i,n)||ht.comparator(i.key,n.key):(i,n)=>ht.comparator(i.key,n.key),this.keyedMap=bh(),this.sortedSet=new ki(this.comparator)}static emptySet(e){return new tl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,n)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof tl)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;i.hasNext();){const s=i.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const n=new tl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=i,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.Cu=new ki(ht.comparator)}track(e){const i=e.doc.key,n=this.Cu.get(i);n?e.type!==0&&n.type===3?this.Cu=this.Cu.insert(i,e):e.type===3&&n.type!==1?this.Cu=this.Cu.insert(i,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Cu=this.Cu.insert(i,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Cu=this.Cu.insert(i,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Cu=this.Cu.remove(i):e.type===1&&n.type===2?this.Cu=this.Cu.insert(i,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Cu=this.Cu.insert(i,{type:2,doc:e.doc}):yt():this.Cu=this.Cu.insert(i,e)}xu(){const e=[];return this.Cu.inorderTraversal((i,n)=>{e.push(n)}),e}}class wl{constructor(e,i,n,s,a,l,p,f,g){this.query=e,this.docs=i,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=p,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(e,i,n,s,a){const l=[];return i.forEach(p=>{l.push({type:0,doc:p})}),new wl(e,i,tl.emptySet(i),l,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,n=e.docChanges;if(i.length!==n.length)return!1;for(let s=0;s<i.length;s++)if(i[s].type!==n[s].type||!i[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.Nu=void 0,this.listeners=[]}}class zD{constructor(){this.queries=new jl(e=>N5(e),np),this.onlineState="Unknown",this.ku=new Set}}async function pg(t,e){const i=St(t),n=e.query;let s=!1,a=i.queries.get(n);if(a||(s=!0,a=new WD),s)try{a.Nu=await i.onListen(n)}catch(l){const p=dg(l,`Initialization of query '${Hm(e.query)}' failed`);return void e.onError(p)}i.queries.set(n,a),a.listeners.push(e),e.Mu(i.onlineState),a.Nu&&e.$u(a.Nu)&&xg(i)}async function fg(t,e){const i=St(t),n=e.query;let s=!1;const a=i.queries.get(n);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),s=a.listeners.length===0)}if(s)return i.queries.delete(n),i.onUnlisten(n)}function $D(t,e){const i=St(t);let n=!1;for(const s of e){const a=s.query,l=i.queries.get(a);if(l){for(const p of l.listeners)p.$u(s)&&(n=!0);l.Nu=s}}n&&xg(i)}function HD(t,e,i){const n=St(t),s=n.queries.get(e);if(s)for(const a of s.listeners)a.onError(i);n.queries.delete(e)}function xg(t){t.ku.forEach(e=>{e.next()})}class mg{constructor(e,i,n){this.query=e,this.Ou=i,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new wl(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),i=!0):this.qu(e,this.onlineState)&&(this.Uu(e),i=!0),this.Bu=e,i}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let i=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),i=!0),i}qu(e,i){if(!e.fromCache)return!0;const n=i!=="Offline";return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const i=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}Uu(e){e=wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.key=e}}class yS{constructor(e){this.key=e}}class YD{constructor(e,i){this.query=e,this.Yu=i,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Rt(),this.mutatedKeys=Rt(),this.tc=R5(e),this.ec=new tl(this.tc)}get nc(){return this.Yu}sc(e,i){const n=i?i.ic:new Bb,s=i?i.ec:this.ec;let a=i?i.mutatedKeys:this.mutatedKeys,l=s,p=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,k)=>{const T=s.get(m),D=sp(this.query,k)?k:null,P=!!T&&this.mutatedKeys.has(T.key),L=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let $=!1;T&&D?T.data.isEqual(D.data)?P!==L&&(n.track({type:3,doc:D}),$=!0):this.rc(T,D)||(n.track({type:2,doc:D}),$=!0,(f&&this.tc(D,f)>0||g&&this.tc(D,g)<0)&&(p=!0)):!T&&D?(n.track({type:0,doc:D}),$=!0):T&&!D&&(n.track({type:1,doc:T}),$=!0,(f||g)&&(p=!0)),$&&(D?(l=l.add(D),a=L?a.add(m):a.delete(m)):(l=l.delete(m),a=a.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),a=a.delete(m.key),n.track({type:1,doc:m})}return{ec:l,ic:n,zi:p,mutatedKeys:a}}rc(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,n){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((g,m)=>function(k,T){const D=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return D(k)-D(T)}(g.type,m.type)||this.tc(g.doc,m.doc)),this.oc(n);const l=i?this.uc():[],p=this.Zu.size===0&&this.current?1:0,f=p!==this.Xu;return this.Xu=p,a.length!==0||f?{snapshot:new wl(this.query,e.ec,s,a,e.mutatedKeys,p===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Bb,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(i=>this.Yu=this.Yu.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.Yu=this.Yu.delete(i)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Rt(),this.ec.forEach(n=>{this.ac(n.key)&&(this.Zu=this.Zu.add(n.key))});const i=[];return e.forEach(n=>{this.Zu.has(n)||i.push(new yS(n))}),this.Zu.forEach(n=>{e.has(n)||i.push(new gS(n))}),i}hc(e){this.Yu=e.ir,this.Zu=Rt();const i=this.sc(e.documents);return this.applyChanges(i,!0)}lc(){return wl.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class XD{constructor(e,i,n){this.query=e,this.targetId=i,this.view=n}}class UD{constructor(e){this.key=e,this.fc=!1}}class GD{constructor(e,i,n,s,a,l){this.localStore=e,this.remoteStore=i,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new jl(p=>N5(p),np),this._c=new Map,this.mc=new Set,this.gc=new ki(ht.comparator),this.yc=new Map,this.Ic=new rg,this.Tc={},this.Ec=new Map,this.Ac=Cl.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function KD(t,e){const i=rI(t);let n,s;const a=i.wc.get(e);if(a)n=a.targetId,i.sharedClientState.addLocalQueryTarget(n),s=a.view.lc();else{const l=await vD(i.localStore,Ar(e)),p=i.sharedClientState.addLocalQueryTarget(l.targetId);n=l.targetId,s=await QD(i,e,n,p==="current",l.resumeToken),i.isPrimaryClient&&cS(i.remoteStore,l)}return s}async function QD(t,e,i,n,s){t.Rc=(k,T,D)=>async function(P,L,$,N){let E=L.view.sc($);E.zi&&(E=await Ab(P.localStore,L.query,!1).then(({documents:U})=>L.view.sc(U,E)));const B=N&&N.targetChanges.get(L.targetId),H=L.view.applyChanges(E,P.isPrimaryClient,B);return Nb(P,L.targetId,H.cc),H.snapshot}(t,k,T,D);const a=await Ab(t.localStore,e,!0),l=new YD(e,a.ir),p=l.sc(a.documents),f=Hc.createSynthesizedTargetChangeForCurrentChange(i,n&&t.onlineState!=="Offline",s),g=l.applyChanges(p,t.isPrimaryClient,f);Nb(t,i,g.cc);const m=new XD(e,i,l);return t.wc.set(e,m),t._c.has(i)?t._c.get(i).push(e):t._c.set(i,[e]),g.snapshot}async function ZD(t,e){const i=St(t),n=i.wc.get(e),s=i._c.get(n.targetId);if(s.length>1)return i._c.set(n.targetId,s.filter(a=>!np(a,e))),void i.wc.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(n.targetId),i.sharedClientState.isActiveQueryTarget(n.targetId)||await Km(i.localStore,n.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(n.targetId),uS(i.remoteStore,n.targetId),Qm(i,n.targetId)}).catch(Wc)):(Qm(i,n.targetId),await Km(i.localStore,n.targetId,!0))}async function JD(t,e,i){const n=aI(t);try{const s=await function(a,l){const p=St(a),f=Bn.now(),g=l.reduce((T,D)=>T.add(D.key),Rt());let m,k;return p.persistence.runTransaction("Locally write mutations","readwrite",T=>{let D=Dr(),P=Rt();return p.Zi.getEntries(T,g).next(L=>{D=L,D.forEach(($,N)=>{N.isValidDocument()||(P=P.add($))})}).next(()=>p.localDocuments.getOverlayedDocuments(T,D)).next(L=>{m=L;const $=[];for(const N of l){const E=k7(N,m.get(N.key).overlayedDocument);E!=null&&$.push(new Ca(N.key,E,E5(E.value.mapValue),Ls.exists(!0)))}return p.mutationQueue.addMutationBatch(T,f,$,l)}).next(L=>{k=L;const $=L.applyToLocalDocumentSet(m,P);return p.documentOverlayCache.saveOverlays(T,L.batchId,$)})}).then(()=>({batchId:k.batchId,changes:O5(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,l,p){let f=a.Tc[a.currentUser.toKey()];f||(f=new ki(Kt)),f=f.insert(l,p),a.Tc[a.currentUser.toKey()]=f}(n,s.batchId,i),await Xc(n,s.changes),await cp(n.remoteStore)}catch(s){const a=dg(s,"Failed to persist write");i.reject(a)}}async function vS(t,e){const i=St(t);try{const n=await mD(i.localStore,e);e.targetChanges.forEach((s,a)=>{const l=i.yc.get(a);l&&(xi(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?xi(l.fc):s.removedDocuments.size>0&&(xi(l.fc),l.fc=!1))}),await Xc(i,n,e)}catch(n){await Wc(n)}}function Lb(t,e,i){const n=St(t);if(n.isPrimaryClient&&i===0||!n.isPrimaryClient&&i===1){const s=[];n.wc.forEach((a,l)=>{const p=l.view.Mu(e);p.snapshot&&s.push(p.snapshot)}),function(a,l){const p=St(a);p.onlineState=l;let f=!1;p.queries.forEach((g,m)=>{for(const k of m.listeners)k.Mu(l)&&(f=!0)}),f&&xg(p)}(n.eventManager,e),s.length&&n.dc.nu(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function qD(t,e,i){const n=St(t);n.sharedClientState.updateQueryState(e,"rejected",i);const s=n.yc.get(e),a=s&&s.key;if(a){let l=new ki(ht.comparator);l=l.insert(a,wn.newNoDocument(a,Et.min()));const p=Rt().add(a),f=new op(Et.min(),new Map,new ki(Kt),l,p);await vS(n,f),n.gc=n.gc.remove(a),n.yc.delete(e),gg(n)}else await Km(n.localStore,e,!1).then(()=>Qm(n,e,i)).catch(Wc)}async function eI(t,e){const i=St(t),n=e.batch.batchId;try{const s=await xD(i.localStore,e);_S(i,n,null),bS(i,n),i.sharedClientState.updateMutationState(n,"acknowledged"),await Xc(i,s)}catch(s){await Wc(s)}}async function tI(t,e,i){const n=St(t);try{const s=await function(a,l){const p=St(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return p.mutationQueue.lookupMutationBatch(f,l).next(m=>(xi(m!==null),g=m.keys(),p.mutationQueue.removeMutationBatch(f,m))).next(()=>p.mutationQueue.performConsistencyCheck(f)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(f,g,l)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>p.localDocuments.getDocuments(f,g))})}(n.localStore,e);_S(n,e,i),bS(n,e),n.sharedClientState.updateMutationState(e,"rejected",i),await Xc(n,s)}catch(s){await Wc(s)}}function bS(t,e){(t.Ec.get(e)||[]).forEach(i=>{i.resolve()}),t.Ec.delete(e)}function _S(t,e,i){const n=St(t);let s=n.Tc[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(i?a.reject(i):a.resolve(),s=s.remove(e)),n.Tc[n.currentUser.toKey()]=s}}function Qm(t,e,i=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t._c.get(e))t.wc.delete(n),i&&t.dc.Pc(n,i);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(n=>{t.Ic.containsKey(n)||CS(t,n)})}function CS(t,e){t.mc.delete(e.path.canonicalString());const i=t.gc.get(e);i!==null&&(uS(t.remoteStore,i),t.gc=t.gc.remove(e),t.yc.delete(i),gg(t))}function Nb(t,e,i){for(const n of i)n instanceof gS?(t.Ic.addReference(n.key,e),iI(t,n)):n instanceof yS?(ot("SyncEngine","Document no longer in limbo: "+n.key),t.Ic.removeReference(n.key,e),t.Ic.containsKey(n.key)||CS(t,n.key)):yt()}function iI(t,e){const i=e.key,n=i.path.canonicalString();t.gc.get(i)||t.mc.has(n)||(ot("SyncEngine","New document in limbo: "+i),t.mc.add(n),gg(t))}function gg(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const i=new ht(Ei.fromString(e)),n=t.Ac.next();t.yc.set(n,new UD(i)),t.gc=t.gc.insert(i,n),cS(t.remoteStore,new Yr(Ar(tp(i.path)),n,"TargetPurposeLimboResolution",G2.ct))}}async function Xc(t,e,i){const n=St(t),s=[],a=[],l=[];n.wc.isEmpty()||(n.wc.forEach((p,f)=>{l.push(n.Rc(f,e,i).then(g=>{if((g||i)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(f.targetId,g!=null&&g.fromCache?"not-current":"current"),g){s.push(g);const m=og.Li(f.targetId,g);a.push(m)}}))}),await Promise.all(l),n.dc.nu(s),await async function(p,f){const g=St(p);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>ze.forEach(f,k=>ze.forEach(k.Fi,T=>g.persistence.referenceDelegate.addReference(m,k.targetId,T)).next(()=>ze.forEach(k.Bi,T=>g.persistence.referenceDelegate.removeReference(m,k.targetId,T)))))}catch(m){if(!zc(m))throw m;ot("LocalStore","Failed to update sequence numbers: "+m)}for(const m of f){const k=m.targetId;if(!m.fromCache){const T=g.Ji.get(k),D=T.snapshotVersion,P=T.withLastLimboFreeSnapshotVersion(D);g.Ji=g.Ji.insert(k,P)}}}(n.localStore,a))}async function nI(t,e){const i=St(t);if(!i.currentUser.isEqual(e)){ot("SyncEngine","User change. New user:",e.toKey());const n=await aS(i.localStore,e);i.currentUser=e,function(s,a){s.Ec.forEach(l=>{l.forEach(p=>{p.reject(new Qe(Ie.CANCELLED,a))})}),s.Ec.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Xc(i,n.er)}}function sI(t,e){const i=St(t),n=i.yc.get(e);if(n&&n.fc)return Rt().add(n.key);{let s=Rt();const a=i._c.get(e);if(!a)return s;for(const l of a){const p=i.wc.get(l);s=s.unionWith(p.view.nc)}return s}}function rI(t){const e=St(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qD.bind(null,e),e.dc.nu=$D.bind(null,e.eventManager),e.dc.Pc=HD.bind(null,e.eventManager),e}function aI(t){const e=St(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tI.bind(null,e),e}class Rb{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=lp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,i){return null}createIndexBackfillerScheduler(e,i){return null}createLocalStore(e){return fD(this.persistence,new dD,e.initialUser,this.serializer)}createPersistence(e){return new cD(ag.zs,this.serializer)}createSharedClientState(e){return new _D}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class oI{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Lb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=nI.bind(null,this.syncEngine),await jD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new zD}createDatastore(e){const i=lp(e.databaseInfo.databaseId),n=(s=e.databaseInfo,new kD(s));var s;return function(a,l,p,f){return new PD(a,l,p,f)}(e.authCredentials,e.appCheckCredentials,n,i)}createRemoteStore(e){return i=this.localStore,n=this.datastore,s=e.asyncQueue,a=p=>Lb(this.syncEngine,p,0),l=Ib.D()?new Ib:new CD,new AD(i,n,s,a,l);var i,n,s,a,l}createSyncEngine(e,i){return function(n,s,a,l,p,f,g){const m=new GD(n,s,a,l,p,f);return g&&(m.vc=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return async function(e){const i=St(e);ot("RemoteStore","RemoteStore shutting down."),i.vu.add(5),await Yc(i),i.Pu.shutdown(),i.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,i){this.muted||setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,i,n,s){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=n,this.databaseInfo=s,this.user=_n.UNAUTHENTICATED,this.clientId=k5.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async a=>{ot("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(ot("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qe(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const n=dg(i,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Sf(t,e){t.asyncQueue.verifyOperationInProgress(),ot("FirestoreClient","Initializing OfflineComponentProvider");const i=await t.getConfiguration();await e.initialize(i);let n=i.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await aS(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Vb(t,e){t.asyncQueue.verifyOperationInProgress();const i=await cI(t);ot("FirestoreClient","Initializing OnlineComponentProvider");const n=await t.getConfiguration();await e.initialize(i,n),t.setCredentialChangeListener(s=>Fb(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,a)=>Fb(e.remoteStore,a)),t._onlineComponents=e}function hI(t){return t.name==="FirebaseError"?t.code===Ie.FAILED_PRECONDITION||t.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function cI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ot("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sf(t,t._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!hI(i))throw i;ml("Error using user provided cache. Falling back to memory cache: "+i),await Sf(t,new Rb)}}else ot("FirestoreClient","Using default OfflineComponentProvider"),await Sf(t,new Rb);return t._offlineComponents}async function wS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ot("FirestoreClient","Using user provided OnlineComponentProvider"),await Vb(t,t._uninitializedComponentsProvider._online)):(ot("FirestoreClient","Using default OnlineComponentProvider"),await Vb(t,new oI))),t._onlineComponents}function uI(t){return wS(t).then(e=>e.syncEngine)}async function t0(t){const e=await wS(t),i=e.eventManager;return i.onListen=KD.bind(null,e.syncEngine),i.onUnlisten=ZD.bind(null,e.syncEngine),i}function dI(t,e,i={}){const n=new br;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,p,f){const g=new yg({next:k=>{a.enqueueAndForget(()=>fg(s,m));const T=k.docs.has(l);!T&&k.fromCache?f.reject(new Qe(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&k.fromCache&&p&&p.source==="server"?f.reject(new Qe(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(k)},error:k=>f.reject(k)}),m=new mg(tp(l.path),g,{includeMetadataChanges:!0,Ku:!0});return pg(s,m)}(await t0(t),t.asyncQueue,e,i,n)),n.promise}function pI(t,e,i={}){const n=new br;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,p,f){const g=new yg({next:k=>{a.enqueueAndForget(()=>fg(s,m)),k.fromCache&&p.source==="server"?f.reject(new Qe(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(k)},error:k=>f.reject(k)}),m=new mg(l,g,{includeMetadataChanges:!0,Ku:!0});return pg(s,m)}(await t0(t),t.asyncQueue,e,i,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t,e,i){if(!i)throw new Qe(Ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fI(t,e,i,n){if(e===!0&&n===!0)throw new Qe(Ie.INVALID_ARGUMENT,`${t} and ${i} cannot be used together.`)}function jb(t){if(!ht.isDocumentKey(t))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wb(t){if(ht.isDocumentKey(t))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function up(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":yt()}function rs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Qe(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=up(t);throw new Qe(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return t}function TS(t,e){if(e<=0)throw new Qe(Ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){var i,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Qe(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(i=e.ssl)===null||i===void 0||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Qe(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SS((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Qe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Qe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Qe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(i=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,i.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var i,n}}class dp{constructor(e,i,n,s){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Qe(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Qe(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zb(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new R9;switch(i.type){case"firstParty":return new W9(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Qe(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=Ob.get(e);i&&(ot("ComponentProvider","Removing Datastore"),Ob.delete(e),i.terminate())}(this),Promise.resolve()}}function xI(t,e,i,n={}){var s;const a=(t=rs(t,dp))._getSettings(),l=`${e}:${i}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),n.mockUserToken){let p,f;if(typeof n.mockUserToken=="string")p=n.mockUserToken,f=_n.MOCK_USER;else{p=c3(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new Qe(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new _n(g)}t._authCredentials=new V9(new S5(p,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,i,n){this.converter=i,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class $s{constructor(e,i,n){this.converter=i,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $s(this.firestore,e,this._query)}}class sa extends $s{constructor(e,i,n){super(e,i,tp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new ht(e))}withConverter(e){return new sa(this.firestore,e,this._path)}}function vi(t,e,...i){if(t=Kn(t),kS("collection","path",e),t instanceof dp){const n=Ei.fromString(e,...i);return Wb(n),new sa(t,null,n)}{if(!(t instanceof En||t instanceof sa))throw new Qe(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ei.fromString(e,...i));return Wb(n),new sa(t.firestore,null,n)}}function Xi(t,e,...i){if(t=Kn(t),arguments.length===1&&(e=k5.A()),kS("doc","path",e),t instanceof dp){const n=Ei.fromString(e,...i);return jb(n),new En(t,null,new ht(n))}{if(!(t instanceof En||t instanceof sa))throw new Qe(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ei.fromString(e,...i));return jb(n),new En(t.firestore,t instanceof sa?t.converter:null,new ht(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new lS(this,"async_queue_retry"),this.Xc=()=>{const i=wf();i&&ot("AsyncQueue","Visibility state changed to "+i.visibilityState),this.qo.Mo()};const e=wf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const i=wf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const i=new br;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!zc(e))throw e;ot("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const i=this.Gc.then(()=>(this.Hc=!0,e().catch(n=>{this.Wc=n,this.Hc=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(n);throw Er("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.Hc=!1,n))));return this.Gc=i,i}enqueueAfterDelay(e,i,n){this.Zc(),this.Yc.indexOf(e)>-1&&(i=0);const s=ug.createAndSchedule(this,e,i,n,a=>this.na(a));return this.zc.push(s),s}Zc(){this.Wc&&yt()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const i of this.zc)if(i.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((i,n)=>i.targetTimeMs-n.targetTimeMs);for(const i of this.zc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const i=this.zc.indexOf(e);this.zc.splice(i,1)}}function $b(t){return function(e,i){if(typeof e!="object"||e===null)return!1;const n=e;for(const s of i)if(s in n&&typeof n[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ua extends dp{constructor(e,i,n,s){super(e,i,n,s),this.type="firestore",this._queue=new mI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||MS(this),this._firestoreClient.terminate()}}function gI(t,e){const i=typeof t=="object"?t:b3(),n=typeof t=="string"?t:"(default)",s=g3(i,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=l3("firestore");a&&xI(s,...a)}return s}function pp(t){return t._firestoreClient||MS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function MS(t){var e,i,n;const s=t._freezeSettings(),a=function(l,p,f,g){return new q9(l,p,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,SS(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new lI(t._authCredentials,t._appCheckCredentials,t._queue,a),!((i=s.cache)===null||i===void 0)&&i._offlineComponentProvider&&(!((n=s.cache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sl(hs.fromBase64String(e))}catch(i){throw new Qe(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Sl(hs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new Qe(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new Qe(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new Qe(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=/^__.*__$/;class vI{constructor(e,i,n){this.data=e,this.fieldMask=i,this.fieldTransforms=n}toMutation(e,i){return this.fieldMask!==null?new Ca(e,this.data,this.fieldMask,i,this.fieldTransforms):new $c(e,this.data,i,this.fieldTransforms)}}class PS{constructor(e,i,n){this.data=e,this.fieldMask=i,this.fieldTransforms=n}toMutation(e,i){return new Ca(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function ES(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class xp{constructor(e,i,n,s,a,l){this.settings=e,this.databaseId=i,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new xp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var i;const n=(i=this.path)===null||i===void 0?void 0:i.child(e),s=this.aa({path:n,la:!1});return s.fa(e),s}da(e){var i;const n=(i=this.path)===null||i===void 0?void 0:i.child(e),s=this.aa({path:n,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return i0(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(ES(this.ca)&&yI.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class bI{constructor(e,i,n){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=n||lp(e)}ya(e,i,n,s=!1){return new xp({ca:e,methodName:i,ga:n,path:nr.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gc(t){const e=t._freezeSettings(),i=lp(t._databaseId);return new bI(t._databaseId,!!e.ignoreUndefinedProperties,i)}function AS(t,e,i,n,s,a={}){const l=t.ya(a.merge||a.mergeFields?2:0,e,i,s);_g("Data must be an object, but it was:",l,n);const p=IS(n,l);let f,g;if(a.merge)f=new Js(l.fieldMask),g=l.fieldTransforms;else if(a.mergeFields){const m=[];for(const k of a.mergeFields){const T=Zm(e,k,i);if(!l.contains(T))throw new Qe(Ie.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);BS(m,T)||m.push(T)}f=new Js(m),g=l.fieldTransforms.filter(k=>f.covers(k.field))}else f=null,g=l.fieldTransforms;return new vI(new zn(p),f,g)}class mp extends Uc{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mp}}function _I(t,e,i){return new xp({ca:3,ga:e.settings.ga,methodName:t._methodName,la:i},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class bg extends Uc{_toFieldTransform(e){return new U5(e.path,new bc)}isEqual(e){return e instanceof bg}}class CI extends Uc{constructor(e,i){super(e),this.pa=i}_toFieldTransform(e){const i=_I(this,e,!0),n=this.pa.map(a=>zl(a,i)),s=new _l(n);return new U5(e.path,s)}isEqual(e){return this===e}}function wI(t,e,i,n){const s=t.ya(1,e,i);_g("Data must be an object, but it was:",s,n);const a=[],l=zn.empty();co(n,(f,g)=>{const m=Cg(e,f,i);g=Kn(g);const k=s.da(m);if(g instanceof mp)a.push(m);else{const T=zl(g,k);T!=null&&(a.push(m),l.set(m,T))}});const p=new Js(a);return new PS(l,p,s.fieldTransforms)}function SI(t,e,i,n,s,a){const l=t.ya(1,e,i),p=[Zm(e,n,i)],f=[s];if(a.length%2!=0)throw new Qe(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)p.push(Zm(e,a[T])),f.push(a[T+1]);const g=[],m=zn.empty();for(let T=p.length-1;T>=0;--T)if(!BS(g,p[T])){const D=p[T];let P=f[T];P=Kn(P);const L=l.da(D);if(P instanceof mp)g.push(D);else{const $=zl(P,L);$!=null&&(g.push(D),m.set(D,$))}}const k=new Js(g);return new PS(m,k,l.fieldTransforms)}function DS(t,e,i,n=!1){return zl(i,t.ya(n?4:3,e))}function zl(t,e){if(FS(t=Kn(t)))return _g("Unsupported field value:",e,t),IS(t,e);if(t instanceof Uc)return function(i,n){if(!ES(n.ca))throw n._a(`${i._methodName}() can only be used with update() and set()`);if(!n.path)throw n._a(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(n);s&&n.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(i,n){const s=[];let a=0;for(const l of i){let p=zl(l,n.wa(a));p==null&&(p={nullValue:"NULL_VALUE"}),s.push(p),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,n){if((i=Kn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return v7(n.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Bn.fromDate(i);return{timestampValue:qd(n.serializer,s)}}if(i instanceof Bn){const s=new Bn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:qd(n.serializer,s)}}if(i instanceof vg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Sl)return{bytesValue:eS(n.serializer,i._byteString)};if(i instanceof En){const s=n.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw n._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sg(i.firestore._databaseId||n.databaseId,i._key.path)}}throw n._a(`Unsupported field value: ${up(i)}`)}(t,e)}function IS(t,e){const i={};return T5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(t,(n,s)=>{const a=zl(s,e.ha(n));a!=null&&(i[n]=a)}),{mapValue:{fields:i}}}function FS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bn||t instanceof vg||t instanceof Sl||t instanceof En||t instanceof Uc)}function _g(t,e,i){if(!FS(i)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(i)){const n=up(i);throw n==="an object"?e._a(t+" a custom object"):e._a(t+" "+n)}}function Zm(t,e,i){if((e=Kn(e))instanceof fp)return e._internalPath;if(typeof e=="string")return Cg(t,e);throw i0("Field path arguments must be of type string or ",t,!1,void 0,i)}const kI=new RegExp("[~\\*/\\[\\]]");function Cg(t,e,i){if(e.search(kI)>=0)throw i0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,i);try{return new fp(...e.split("."))._internalPath}catch{throw i0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,i)}}function i0(t,e,i,n,s){const a=n&&!n.isEmpty(),l=s!==void 0;let p=`Function ${e}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${n}`),l&&(f+=` in document ${s}`),f+=")"),new Qe(Ie.INVALID_ARGUMENT,p+t+f)}function BS(t,e){return t.some(i=>i.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,i,n,s,a){this._firestore=e,this._userDataWriter=i,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(gp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class TI extends wg{data(){return super.data()}}function gp(t,e){return typeof e=="string"?Cg(t,e):e instanceof fp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Qe(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class Kc extends Sg{}function _r(t,e,...i){let n=[];e instanceof Sg&&n.push(e),n=n.concat(i),function(s){const a=s.filter(p=>p instanceof kg).length,l=s.filter(p=>p instanceof yp).length;if(a>1||a>0&&l>0)throw new Qe(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class yp extends Kc{constructor(e,i,n){super(),this._field=e,this._op=i,this._value=n,this.type="where"}static _create(e,i,n){return new yp(e,i,n)}_apply(e){const i=this._parse(e);return RS(e._query,i),new $s(e.firestore,e.converter,$m(e._query,i))}_parse(e){const i=Gc(e.firestore);return function(s,a,l,p,f,g,m){let k;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Qe(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Yb(m,g);const T=[];for(const D of m)T.push(Hb(p,s,D));k={arrayValue:{values:T}}}else k=Hb(p,s,m)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Yb(m,g),k=DS(l,a,m,g==="in"||g==="not-in");return zi.create(f,g,k)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function ct(t,e,i){const n=e,s=gp("where",t);return yp._create(s,n,i)}class kg extends Sg{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new kg(e,i)}_parse(e){const i=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return i.length===1?i[0]:Ws.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:(function(n,s){let a=n;const l=s.getFlattenedFilters();for(const p of l)RS(a,p),a=$m(a,p)}(e._query,i),new $s(e.firestore,e.converter,$m(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tg extends Kc{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new Tg(e,i)}_apply(e){const i=function(n,s,a){if(n.startAt!==null)throw new Qe(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new Qe(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new el(s,a);return function(p,f){if(q2(p)===null){const g=ip(p);g!==null&&VS(p,g,f.field)}}(n,l),l}(e._query,this._field,this._direction);return new $s(e.firestore,e.converter,function(n,s){const a=n.explicitOrderBy.concat([s]);return new _a(n.path,n.collectionGroup,a,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,i))}}function Ns(t,e="asc"){const i=e,n=gp("orderBy",t);return Tg._create(n,i)}class vp extends Kc{constructor(e,i,n){super(),this.type=e,this._limit=i,this._limitType=n}static _create(e,i,n){return new vp(e,i,n)}_apply(e){return new $s(e.firestore,e.converter,Zd(e._query,this._limit,this._limitType))}}function rr(t){return TS("limit",t),vp._create("limit",t,"F")}function MI(t){return TS("limitToLast",t),vp._create("limitToLast",t,"L")}class Mg extends Kc{constructor(e,i,n){super(),this.type=e,this._docOrFields=i,this._inclusive=n}static _create(e,i,n){return new Mg(e,i,n)}_apply(e){const i=NS(e,this.type,this._docOrFields,this._inclusive);return new $s(e.firestore,e.converter,function(n,s){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,s,n.endAt)}(e._query,i))}}function PI(...t){return Mg._create("startAfter",t,!1)}class Pg extends Kc{constructor(e,i,n){super(),this.type=e,this._docOrFields=i,this._inclusive=n}static _create(e,i,n){return new Pg(e,i,n)}_apply(e){const i=NS(e,this.type,this._docOrFields,this._inclusive);return new $s(e.firestore,e.converter,function(n,s){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,s)}(e._query,i))}}function EI(...t){return Pg._create("endBefore",t,!1)}function NS(t,e,i,n){if(i[0]=Kn(i[0]),i[0]instanceof wg)return function(s,a,l,p,f){if(!p)throw new Qe(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const g=[];for(const m of Ya(s))if(m.field.isKeyField())g.push(Qd(a,p.key));else{const k=p.data.field(m.field);if(ep(k))throw new Qe(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(k===null){const T=m.field.canonicalString();throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}g.push(k)}return new bl(g,f)}(t._query,t.firestore._databaseId,e,i[0]._document,n);{const s=Gc(t.firestore);return function(a,l,p,f,g,m){const k=a.explicitOrderBy;if(g.length>k.length)throw new Qe(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let D=0;D<g.length;D++){const P=g[D];if(k[D].field.isKeyField()){if(typeof P!="string")throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof P}`);if(!eg(a)&&P.indexOf("/")!==-1)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${P}' contains a slash.`);const L=a.path.child(Ei.fromString(P));if(!ht.isDocumentKey(L))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const $=new ht(L);T.push(Qd(l,$))}else{const L=DS(p,f,P);T.push(L)}}return new bl(T,m)}(t._query,t.firestore._databaseId,s,e,i,n)}}function Hb(t,e,i){if(typeof(i=Kn(i))=="string"){if(i==="")throw new Qe(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eg(e)&&i.indexOf("/")!==-1)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const n=e.path.child(Ei.fromString(i));if(!ht.isDocumentKey(n))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Qd(t,new ht(n))}if(i instanceof En)return Qd(t,i._key);throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${up(i)}.`)}function Yb(t,e){if(!Array.isArray(t)||t.length===0)throw new Qe(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RS(t,e){if(e.isInequality()){const n=ip(t),s=e.field;if(n!==null&&!n.isEqual(s))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${s.toString()}'`);const a=q2(t);a!==null&&VS(t,s,a)}const i=function(n,s){for(const a of n)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new Qe(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Qe(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}function VS(t,e,i){if(!i.isEqual(e))throw new Qe(Ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${i.toString()}' instead.`)}class AI{convertValue(e,i="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw yt()}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const n={};return co(e,(s,a)=>{n[s]=this.convertValue(a,i)}),n}convertGeoPoint(e){return new vg(Oi(e.latitude),Oi(e.longitude))}convertArray(e,i){return(e.values||[]).map(n=>this.convertValue(n,i))}convertServerTimestamp(e,i){switch(i){case"previous":const n=K2(e);return n==null?null:this.convertValue(n,i);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){const i=ha(e);return new Bn(i.seconds,i.nanos)}convertDocumentKey(e,i){const n=Ei.fromString(e);xi(rS(n));const s=new P5(n.get(1),n.get(3)),a=new ht(n.popFirst(5));return s.isEqual(i)||Er(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t,e,i){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jS extends wg{constructor(e,i,n,s,a,l){super(e,i,n,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const n=this._document.data.field(gp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,i.serverTimestamps)}}}class ed extends jS{data(e={}){return super.data(e)}}class WS{constructor(e,i,n,s){this._firestore=e,this._userDataWriter=i,this._snapshot=s,this.metadata=new Ch(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(n=>{e.call(i,new ed(this._firestore,this._userDataWriter,n.key,n,new Ch(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Qe(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(n,s){if(n._snapshot.oldDocs.isEmpty()){let a=0;return n._snapshot.docChanges.map(l=>{const p=new ed(n._firestore,n._userDataWriter,l.doc.key,l.doc,new Ch(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);return l.doc,{type:"added",doc:p,oldIndex:-1,newIndex:a++}})}{let a=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const p=new ed(n._firestore,n._userDataWriter,l.doc.key,l.doc,new Ch(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);let f=-1,g=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),g=a.indexOf(l.doc.key)),{type:DI(l.type),doc:p,oldIndex:f,newIndex:g}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function DI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t){t=rs(t,En);const e=rs(t.firestore,ua);return dI(pp(e),t._key).then(i=>zS(e,t,i))}class Eg extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sl(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,i)}}function gn(t){t=rs(t,$s);const e=rs(t.firestore,ua),i=pp(e),n=new Eg(e);return LS(t._query),pI(i,t._query).then(s=>new WS(e,n,t,s))}function II(t,e,i){t=rs(t,En);const n=rs(t.firestore,ua),s=OS(t.converter,e);return Dg(n,[AS(Gc(n),"setDoc",t._key,s,t.converter!==null,i).toMutation(t._key,Ls.none())])}function Ag(t,e,i,...n){t=rs(t,En);const s=rs(t.firestore,ua),a=Gc(s);let l;return l=typeof(e=Kn(e))=="string"||e instanceof fp?SI(a,"updateDoc",t._key,e,i,n):wI(a,"updateDoc",t._key,e),Dg(s,[l.toMutation(t._key,Ls.exists(!0))])}function FI(t,e){const i=rs(t.firestore,ua),n=Xi(t),s=OS(t.converter,e);return Dg(i,[AS(Gc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Ls.exists(!1))]).then(()=>n)}function Qc(t,...e){var i,n,s;t=Kn(t);let a={includeMetadataChanges:!1},l=0;typeof e[l]!="object"||$b(e[l])||(a=e[l],l++);const p={includeMetadataChanges:a.includeMetadataChanges};if($b(e[l])){const k=e[l];e[l]=(i=k.next)===null||i===void 0?void 0:i.bind(k),e[l+1]=(n=k.error)===null||n===void 0?void 0:n.bind(k),e[l+2]=(s=k.complete)===null||s===void 0?void 0:s.bind(k)}let f,g,m;if(t instanceof En)g=rs(t.firestore,ua),m=tp(t._key.path),f={next:k=>{e[l]&&e[l](zS(g,t,k))},error:e[l+1],complete:e[l+2]};else{const k=rs(t,$s);g=rs(k.firestore,ua),m=k._query;const T=new Eg(g);f={next:D=>{e[l]&&e[l](new WS(g,T,k,D))},error:e[l+1],complete:e[l+2]},LS(t._query)}return function(k,T,D,P){const L=new yg(P),$=new mg(T,L,D);return k.asyncQueue.enqueueAndForget(async()=>pg(await t0(k),$)),()=>{L.Dc(),k.asyncQueue.enqueueAndForget(async()=>fg(await t0(k),$))}}(pp(g),m,p,f)}function Dg(t,e){return function(i,n){const s=new br;return i.asyncQueue.enqueueAndForget(async()=>JD(await uI(i),n,s)),s.promise}(pp(t),e)}function zS(t,e,i){const n=i.docs.get(e._key),s=new Eg(t);return new jS(t,s,e._key,n,new Ch(i.hasPendingWrites,i.fromCache),e.converter)}function Xb(){return new bg("serverTimestamp")}function BI(...t){return new CI("arrayUnion",t)}(function(t,e=!0){(function(i){Ol=i})(y3),oc(new fl("firestore",(i,{instanceIdentifier:n,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new ua(new O9(i.getProvider("auth-internal")),new $9(i.getProvider("app-check-internal")),function(p,f){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Qe(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new P5(p.options.projectId,f)}(a,n),a);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ia(hb,"3.13.0",t),ia(hb,"3.13.0","esm2017")})();var LI="firebase",NI="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ia(LI,NI,"app");var Ub={};const Gb="@firebase/database",Kb="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $S="";function RI(t){$S=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,i){i==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pn(i))}get(e){const i=this.domStorage_.getItem(this.prefixedName_(e));return i==null?null:ac(i)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,i){i==null?delete this.cache_[e]:this.cache_[e]=i}get(e){return Br(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new VI(e)}}catch{}return new OI},ja=HS("localStorage"),jI=HS("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new S2("@firebase/database"),WI=function(){let t=1;return function(){return t++}}(),YS=function(t){const e=wE(t),i=new _E;i.update(e);const n=i.digest();return C2.encodeByteArray(n)},Zc=function(...t){let e="";for(let i=0;i<t.length;i++){const n=t[i];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Zc.apply(null,n):typeof n=="object"?e+=pn(n):e+=n,e+=" "}return e};let Rh=null,Qb=!0;const zI=function(t,e){Je(!e,"Can't turn on custom loggers persistently."),il.logLevel=Gt.VERBOSE,Rh=il.log.bind(il)},Sn=function(...t){if(Qb===!0&&(Qb=!1,Rh===null&&jI.get("logging_enabled")===!0&&zI()),Rh){const e=Zc.apply(null,t);Rh(e)}},Jc=function(t){return function(...e){Sn(t,...e)}},Jm=function(...t){const e="FIREBASE INTERNAL ERROR: "+Zc(...t);il.error(e)},Ir=function(...t){const e=`FIREBASE FATAL ERROR: ${Zc(...t)}`;throw il.error(e),new Error(e)},as=function(...t){const e="FIREBASE WARNING: "+Zc(...t);il.warn(e)},$I=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&as("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},XS=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},HI=function(t){if(document.readyState==="complete")t();else{let e=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},kl="[MIN_NAME]",so="[MAX_NAME]",$l=function(t,e){if(t===e)return 0;if(t===kl||e===so)return-1;if(e===kl||t===so)return 1;{const i=Zb(t),n=Zb(e);return i!==null?n!==null?i-n===0?t.length-e.length:i-n:-1:n!==null?1:t<e?-1:1}},YI=function(t,e){return t===e?0:t<e?-1:1},hh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pn(e))},Ig=function(t){if(typeof t!="object"||t===null)return pn(t);const e=[];for(const n in t)e.push(n);e.sort();let i="{";for(let n=0;n<e.length;n++)n!==0&&(i+=","),i+=pn(e[n]),i+=":",i+=Ig(t[e[n]]);return i+="}",i},US=function(t,e){const i=t.length;if(i<=e)return[t];const n=[];for(let s=0;s<i;s+=e)s+e>i?n.push(t.substring(s,i)):n.push(t.substring(s,s+e));return n};function _s(t,e){for(const i in t)t.hasOwnProperty(i)&&e(i,t[i])}const GS=function(t){Je(!XS(t),"Invalid JSON number");const e=11,i=52,n=(1<<e-1)-1;let s,a,l,p,f;t===0?(a=0,l=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(p=Math.min(Math.floor(Math.log(t)/Math.LN2),n),a=p+n,l=Math.round(t*Math.pow(2,i-p)-Math.pow(2,i))):(a=0,l=Math.round(t/Math.pow(2,1-n-i))));const g=[];for(f=i;f;f-=1)g.push(l%2?1:0),l=Math.floor(l/2);for(f=e;f;f-=1)g.push(a%2?1:0),a=Math.floor(a/2);g.push(s?1:0),g.reverse();const m=g.join("");let k="";for(f=0;f<64;f+=8){let T=parseInt(m.substr(f,8),2).toString(16);T.length===1&&(T="0"+T),k=k+T}return k.toLowerCase()},XI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},UI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},GI=new RegExp("^-?(0*)\\d{1,10}$"),KI=-2147483648,QI=2147483647,Zb=function(t){if(GI.test(t)){const e=Number(t);if(e>=KI&&e<=QI)return e}return null},qc=function(t){try{t()}catch(e){setTimeout(()=>{const i=e.stack||"";throw as("Exception was thrown by user callback.",i),e},Math.floor(0))}},ZI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Vh=function(t,e){const i=setTimeout(t,e);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,i){this.appName_=e,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((i,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(i,n):i(null)},0)})}addTokenChangeListener(e){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){as(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,i,n){this.appName_=e,this.firebaseOptions_=i,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(i=>i&&i.code==="auth/token-not-initialized"?(Sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(i,n):i(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(i=>i.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(i=>i.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',as(e)}}class td{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}td.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="5",KS="v",QS="s",ZS="r",JS="f",qS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ek="ls",tk="p",qm="ac",ik="websocket",nk="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,i,n,s,a=!1,l="",p=!1,f=!1){this.secure=i,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ja.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ja.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${i}`}}function eF(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function rk(t,e,i){Je(typeof e=="string","typeof type must == string"),Je(typeof i=="object","typeof params must == object");let n;if(e===ik)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===nk)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);eF(t)&&(i.ns=t.namespace);const s=[];return _s(i,(a,l)=>{s.push(a+"="+l)}),n+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(){this.counters_={}}incrementCounter(e,i=1){Br(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=i}get(){return sE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf={},Tf={};function Bg(t){const e=t.toString();return kf[e]||(kf[e]=new tF),kf[e]}function iF(t,e){const i=t.toString();return Tf[i]||(Tf[i]=e()),Tf[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,i){this.closeAfterResponse=e,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,i){for(this.pendingResponses[e]=i;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<n.length;++s)n[s]&&qc(()=>{this.onMessage_(n[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="start",sF="close",rF="pLPCommand",aF="pRTLPCB",ak="id",ok="pw",lk="ser",oF="cb",lF="seg",hF="ts",cF="d",uF="dframe",hk=1870,ck=30,dF=hk-ck,pF=25e3,fF=3e4;class $o{constructor(e,i,n,s,a,l,p){this.connId=e,this.repoInfo=i,this.applicationId=n,this.appCheckToken=s,this.authToken=a,this.transportSessionId=l,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jc(e),this.stats_=Bg(i),this.urlFn=f=>(this.appCheckToken&&(f[qm]=this.appCheckToken),rk(i,nk,f))}open(e,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new nF(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(fF)),HI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Lg((...a)=>{const[l,p,f,g,m]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===Jb)this.id=p,this.password=f;else if(l===sF)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,p]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,p)},()=>{this.onClosed_()},this.urlFn);const n={};n[Jb]="t",n[lk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[oF]=this.scriptTagHolder.uniqueCallbackIdentifier),n[KS]=Fg,this.transportSessionId&&(n[QS]=this.transportSessionId),this.lastSessionId&&(n[ek]=this.lastSessionId),this.applicationId&&(n[tk]=this.applicationId),this.appCheckToken&&(n[qm]=this.appCheckToken),typeof location<"u"&&location.hostname&&qS.test(location.hostname)&&(n[ZS]=JS);const s=this.urlFn(n);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$o.forceAllow_=!0}static forceDisallow(){$o.forceDisallow_=!0}static isAvailable(){return $o.forceAllow_?!0:!$o.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!XI()&&!UI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const i=pn(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const n=r3(i),s=US(n,dF);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(e,i){this.myDisconnFrame=document.createElement("iframe");const n={};n[uF]="t",n[ak]=e,n[ok]=i,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const i=pn(e).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Lg{constructor(e,i,n,s){this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=WI(),window[rF+this.uniqueCallbackIdentifier]=e,window[aF+this.uniqueCallbackIdentifier]=i,this.myIFrame=Lg.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(p){Sn("frame writing exception"),p.stack&&Sn(p.stack),Sn(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Sn("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,i){for(this.myID=e,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ak]=this.myID,e[ok]=this.myPW,e[lk]=this.currentSerial;let i=this.urlFn(e),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ck+n.length<=hk;){const l=this.pendingSegs.shift();n=n+"&"+lF+s+"="+l.seg+"&"+hF+s+"="+l.ts+"&"+cF+s+"="+l.d,s++}return i=i+n,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(e,i,n){this.pendingSegs.push({seg:e,ts:i,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,i){this.outstandingRequests.add(i);const n=()=>{this.outstandingRequests.delete(i),this.newRequest_()},s=setTimeout(n,Math.floor(pF)),a=()=>{clearTimeout(s),n()};this.addTag(e,a)}addTag(e,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const s=n.readyState;(!s||s==="loaded"||s==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),i())},n.onerror=()=>{Sn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF=16384,mF=45e3;let n0=null;typeof MozWebSocket<"u"?n0=MozWebSocket:typeof WebSocket<"u"&&(n0=WebSocket);class As{constructor(e,i,n,s,a,l,p){this.connId=e,this.applicationId=n,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jc(this.connId),this.stats_=Bg(i),this.connURL=As.connectionURL_(i,l,p,s,n),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,n,s,a){const l={};return l[KS]=Fg,typeof location<"u"&&location.hostname&&qS.test(location.hostname)&&(l[ZS]=JS),i&&(l[QS]=i),n&&(l[ek]=n),s&&(l[qm]=s),a&&(l[tk]=a),rk(e,ik,l)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ja.set("previous_websocket_failure",!0);try{let n;d3(),this.mySock=new n0(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){As.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(i);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&n0!==null&&!As.forceDisallow_}static previouslyFailed(){return ja.isInMemoryStorage||ja.get("previous_websocket_failure")===!0}markConnectionHealthy(){ja.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const n=ac(i);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Je(this.frames===null,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const n=this.extractFrameCount_(i);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const i=pn(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const n=US(i,xF);n.length>1&&this.sendString_(String(n.length));for(let s=0;s<n.length;s++)this.sendString_(n[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(mF))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}As.responsesRequiredToBeHealthy=2;As.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[$o,As]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=As&&As.isAvailable();let n=i&&!As.previouslyFailed();if(e.webSocketOnly&&(i||as("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[As];else{const s=this.transports_=[];for(const a of Cc.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);Cc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Cc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF=6e4,yF=5e3,vF=10*1024,bF=100*1024,Mf="t",qb="d",_F="s",e_="r",CF="e",t_="o",i_="a",n_="n",s_="p",wF="h";class SF{constructor(e,i,n,s,a,l,p,f,g,m){this.id=e,this.repoInfo_=i,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=l,this.onReady_=p,this.onDisconnect_=f,this.onKill_=g,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jc("c:"+this.id+":"),this.transportManager_=new Cc(i),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,n)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Vh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>bF?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>vF?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return i=>{e===this.conn_?this.onConnectionLost_(i):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return i=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(i):e===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(e){const i={t:"d",d:e};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Mf in e){const i=e[Mf];i===i_?this.upgradeIfSecondaryHealthy_():i===e_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===t_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const i=hh("t",e),n=hh("d",e);if(i==="c")this.onSecondaryControl_(n);else if(i==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:s_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:i_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:n_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const i=hh("t",e),n=hh("d",e);i==="c"?this.onControl_(n):i==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const i=hh(Mf,e);if(qb in e){const n=e[qb];if(i===wF){const s=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(i===n_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===_F?this.onConnectionShutdown_(n):i===e_?this.onReset_(n):i===CF?Jm("Server Error: "+n):i===t_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jm("Unknown control packet command: "+i)}}onHandshake_(e){const i=e.ts,n=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Fg!==n&&as("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,n),Vh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(gF))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,i){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(yF))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:s_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ja.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{put(e,i,n,s){}merge(e,i,n,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,i,n){}onDisconnectMerge(e,i,n){}onDisconnectCancel(e,i){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.allowedEvents_=e,this.listeners_={},Je(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...i){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let s=0;s<n.length;s++)n[s].callback.apply(n[s].context,i)}}on(e,i,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:i,context:n});const s=this.getInitialEvent(e);s&&i.apply(n,s)}off(e,i,n){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let a=0;a<s.length;a++)if(s[a].callback===i&&(!n||n===s[a].context)){s.splice(a,1);return}}validateEventType_(e){Je(this.allowedEvents_.find(i=>i===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0 extends dk{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!u3()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new s0}getInitialEvent(e){return Je(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=32,a_=768;class mi{constructor(e,i){if(i===void 0){this.pieces_=e.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=i}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(e+="/"+this.pieces_[i]);return e||"/"}}function si(){return new mi("")}function $t(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function da(t){return t.pieces_.length-t.pieceNum_}function di(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new mi(t.pieces_,e)}function pk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function kF(t){let e="";for(let i=t.pieceNum_;i<t.pieces_.length;i++)t.pieces_[i]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[i])));return e||"/"}function fk(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xk(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let i=t.pieceNum_;i<t.pieces_.length-1;i++)e.push(t.pieces_[i]);return new mi(e,0)}function rn(t,e){const i=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)i.push(t.pieces_[n]);if(e instanceof mi)for(let n=e.pieceNum_;n<e.pieces_.length;n++)i.push(e.pieces_[n]);else{const n=e.split("/");for(let s=0;s<n.length;s++)n[s].length>0&&i.push(n[s])}return new mi(i,0)}function Ot(t){return t.pieceNum_>=t.pieces_.length}function gs(t,e){const i=$t(t),n=$t(e);if(i===null)return e;if(i===n)return gs(di(t),di(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function mk(t,e){if(da(t)!==da(e))return!1;for(let i=t.pieceNum_,n=e.pieceNum_;i<=t.pieces_.length;i++,n++)if(t.pieces_[i]!==e.pieces_[n])return!1;return!0}function Ds(t,e){let i=t.pieceNum_,n=e.pieceNum_;if(da(t)>da(e))return!1;for(;i<t.pieces_.length;){if(t.pieces_[i]!==e.pieces_[n])return!1;++i,++n}return!0}class TF{constructor(e,i){this.errorPrefix_=i,this.parts_=fk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=L0(this.parts_[n]);gk(this)}}function MF(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=L0(e),gk(t)}function PF(t){const e=t.parts_.pop();t.byteLength_-=L0(e),t.parts_.length>0&&(t.byteLength_-=1)}function gk(t){if(t.byteLength_>a_)throw new Error(t.errorPrefix_+"has a key path longer than "+a_+" bytes ("+t.byteLength_+").");if(t.parts_.length>r_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+r_+") or object contains a cycle "+Aa(t))}function Aa(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends dk{constructor(){super(["visible"]);let e,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new Ng}getInitialEvent(e){return Je(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=1e3,EF=60*5*1e3,o_=30*1e3,AF=1.3,DF=3e4,IF="server_kill",l_=3;class Cr extends uk{constructor(e,i,n,s,a,l,p,f){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=n,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=p,this.authOverride_=f,this.id=Cr.nextPersistentConnectionId_++,this.log_=Jc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ch,this.maxReconnectDelay_=EF,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!d3())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ng.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&s0.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,n){const s=++this.requestNumber_,a={r:s,a:e,b:i};this.log_(pn(a)),Je(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),n&&(this.requestCBHash_[s]=n)}get(e){this.initConnection_();const i=new w2,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const p=l.d;l.s==="ok"?i.resolve(p):i.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),i.promise}listen(e,i,n,s){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),Je(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Je(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:n};this.listens.get(l).set(a,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(n)})}sendListen_(e){const i=e.query,n=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+n+" for "+s);const a={p:n},l="q";e.tag&&(a.q=i._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,p=>{const f=p.d,g=p.s;Cr.warnOnListenWarnings_(f,i),(this.listens.get(n)&&this.listens.get(n).get(s))===e&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(n,s),e.onComplete&&e.onComplete(g,f))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&Br(e,"w")){const n=pl(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();as(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||vE(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=o_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=yE(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(i,n,s=>{const a=s.s,l=s.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,n=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,n)})}unlisten(e,i){const n=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+s),Je(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,s)&&this.connected_&&this.sendUnlisten_(n,s,e._queryObject,i)}sendUnlisten_(e,i,n,s){this.log_("Unlisten on "+e+" for "+i);const a={p:e},l="n";s&&(a.q=n,a.t=s),this.sendRequest(l,a)}onDisconnectPut(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:n})}onDisconnectMerge(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:n})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,n,s){const a={p:i,d:n};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,i,n,s){this.putInternal("p",e,i,n,s)}merge(e,i,n,s){this.putInternal("m",e,i,n,s)}putInternal(e,i,n,s,a){this.initConnection_();const l={p:i,d:n};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,n,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,n=>{if(n.s!=="ok"){const a=n.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+pn(e));const i=e.r,n=this.requestCBHash_[i];n&&(delete this.requestCBHash_[i],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):Jm("Unrecognized action received from server: "+pn(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Je(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ch,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ch,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>DF&&(this.reconnectDelay_=ch),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*AF)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Cr.nextConnectionId_++,a=this.lastSessionId;let l=!1,p=null;const f=function(){p?p.close():(l=!0,n())},g=function(k){Je(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(k)};this.realtime_={close:f,sendRequest:g};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[k,T]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?Sn("getToken() completed but was canceled"):(Sn("getToken() completed. Creating connection."),this.authToken_=k&&k.accessToken,this.appCheckToken_=T&&T.token,p=new SF(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,n,D=>{as(D+" ("+this.repoInfo_.toString()+")"),this.interrupt(IF)},a))}catch(k){this.log_("Failed to get token: "+k),l||(this.repoInfo_.nodeAdmin&&as(k),f())}}}interrupt(e){Sn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Sn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],jv(this.interruptReasons_)&&(this.reconnectDelay_=ch,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let n;i?n=i.map(a=>Ig(a)).join("$"):n="default";const s=this.removeListen_(e,n);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const n=new mi(e).toString();let s;if(this.listens.has(n)){const a=this.listens.get(n);s=a.get(i),a.delete(i),a.size===0&&this.listens.delete(n)}else s=void 0;return s}onAuthRevoked_(e,i){Sn("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=l_&&(this.reconnectDelay_=o_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Sn("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=l_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";e["sdk."+i+"."+$S.replace(/\./g,"-")]=1,u3()?e["framework.cordova"]=1:dE()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=s0.getInstance().currentlyOnline();return jv(this.interruptReasons_)&&e}}Cr.nextPersistentConnectionId_=0;Cr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,i){this.name=e,this.node=i}static Wrap(e,i){return new Ht(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,i){const n=new Ht(kl,e),s=new Ht(kl,i);return this.compare(n,s)!==0}minPost(){return Ht.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du;class yk extends bp{static get __EMPTY_NODE(){return Du}static set __EMPTY_NODE(e){Du=e}compare(e,i){return $l(e.name,i.name)}isDefinedOn(e){throw Ll("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,i){return!1}minPost(){return Ht.MIN}maxPost(){return new Ht(so,Du)}makePost(e,i){return Je(typeof e=="string","KeyIndex indexValue must always be a string."),new Ht(e,Du)}toString(){return".key"}}const nl=new yk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,i,n,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=i?n(e.key,i):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(e.key,e.value):i={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nn{constructor(e,i,n,s,a){this.key=e,this.value=i,this.color=n??nn.RED,this.left=s??Hn.EMPTY_NODE,this.right=a??Hn.EMPTY_NODE}copy(e,i,n,s,a){return new nn(e??this.key,i??this.value,n??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,n){let s=this;const a=n(e,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(e,i,n),null):a===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,i,n)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let n,s;if(n=this,i(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,i),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),i(e,n.key)===0){if(n.right.isEmpty())return Hn.EMPTY_NODE;s=n.right.min_(),n=n.copy(s.key,s.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,i))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}nn.RED=!0;nn.BLACK=!1;class FF{copy(e,i,n,s,a){return this}insert(e,i,n){return new nn(e,i,null)}remove(e,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Hn{constructor(e,i=Hn.EMPTY_NODE){this.comparator_=e,this.root_=i}insert(e,i){return new Hn(this.comparator_,this.root_.insert(e,i,this.comparator_).copy(null,null,nn.BLACK,null,null))}remove(e){return new Hn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nn.BLACK,null,null))}get(e){let i,n=this.root_;for(;!n.isEmpty();){if(i=this.comparator_(e,n.key),i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}getPredecessorKey(e){let i,n=this.root_,s=null;for(;!n.isEmpty();)if(i=this.comparator_(e,n.key),i===0){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else i<0?n=n.left:i>0&&(s=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Iu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,i){return new Iu(this.root_,e,this.comparator_,!1,i)}getReverseIteratorFrom(e,i){return new Iu(this.root_,e,this.comparator_,!0,i)}getReverseIterator(e){return new Iu(this.root_,null,this.comparator_,!0,e)}}Hn.EMPTY_NODE=new FF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t,e){return $l(t.name,e.name)}function Rg(t,e){return $l(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e1;function LF(t){e1=t}const vk=function(t){return typeof t=="number"?"number:"+GS(t):"string:"+t},bk=function(t){if(t.isLeafNode()){const e=t.val();Je(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Br(e,".sv"),"Priority must be a string or number.")}else Je(t===e1||t.isEmpty(),"priority of unexpected type.");Je(t===e1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h_;class qi{constructor(e,i=qi.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,Je(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),bk(this.priorityNode_)}static set __childrenNodeConstructor(e){h_=e}static get __childrenNodeConstructor(){return h_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new qi(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:qi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ot(e)?this:$t(e)===".priority"?this.priorityNode_:qi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:qi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const n=$t(e);return n===null?i:i.isEmpty()&&n!==".priority"?this:(Je(n!==".priority"||da(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,qi.__childrenNodeConstructor.EMPTY_NODE.updateChild(di(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+vk(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",i==="number"?e+=GS(this.value_):e+=this.value_,this.lazyHash_=YS(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===qi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof qi.__childrenNodeConstructor?-1:(Je(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,n=typeof this.value_,s=qi.VALUE_TYPE_ORDER.indexOf(i),a=qi.VALUE_TYPE_ORDER.indexOf(n);return Je(s>=0,"Unknown leaf type: "+i),Je(a>=0,"Unknown leaf type: "+n),s===a?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}qi.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _k,Ck;function NF(t){_k=t}function RF(t){Ck=t}class VF extends bp{compare(e,i){const n=e.node.getPriority(),s=i.node.getPriority(),a=n.compareTo(s);return a===0?$l(e.name,i.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,i){return!e.getPriority().equals(i.getPriority())}minPost(){return Ht.MIN}maxPost(){return new Ht(so,new qi("[PRIORITY-POST]",Ck))}makePost(e,i){const n=_k(e);return new Ht(i,new qi("[PRIORITY-POST]",n))}toString(){return".priority"}}const Tn=new VF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF=Math.log(2);class jF{constructor(e){const i=a=>parseInt(Math.log(a)/OF,10),n=a=>parseInt(Array(a+1).join("1"),2);this.count=i(e+1),this.current_=this.count-1;const s=n(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const r0=function(t,e,i,n){t.sort(e);const s=function(f,g){const m=g-f;let k,T;if(m===0)return null;if(m===1)return k=t[f],T=i?i(k):k,new nn(T,k.node,nn.BLACK,null,null);{const D=parseInt(m/2,10)+f,P=s(f,D),L=s(D+1,g);return k=t[D],T=i?i(k):k,new nn(T,k.node,nn.BLACK,P,L)}},a=function(f){let g=null,m=null,k=t.length;const T=function(P,L){const $=k-P,N=k;k-=P;const E=s($+1,N),B=t[$],H=i?i(B):B;D(new nn(H,B.node,L,null,E))},D=function(P){g?(g.left=P,g=P):(m=P,g=P)};for(let P=0;P<f.count;++P){const L=f.nextBitIsOne(),$=Math.pow(2,f.count-(P+1));L?T($,nn.BLACK):(T($,nn.BLACK),T($,nn.RED))}return m},l=new jF(t.length),p=a(l);return new Hn(n||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf;const So={};class gr{constructor(e,i){this.indexes_=e,this.indexSet_=i}static get Default(){return Je(So&&Tn,"ChildrenNode.ts has not been loaded"),Pf=Pf||new gr({".priority":So},{".priority":Tn}),Pf}get(e){const i=pl(this.indexes_,e);if(!i)throw new Error("No index defined for "+e);return i instanceof Hn?i:null}hasIndex(e){return Br(this.indexSet_,e.toString())}addIndex(e,i){Je(e!==nl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let s=!1;const a=i.getIterator(Ht.Wrap);let l=a.getNext();for(;l;)s=s||e.isDefinedOn(l.node),n.push(l),l=a.getNext();let p;s?p=r0(n,e.getCompare()):p=So;const f=e.toString(),g=Object.assign({},this.indexSet_);g[f]=e;const m=Object.assign({},this.indexes_);return m[f]=p,new gr(m,g)}addToIndexes(e,i){const n=jd(this.indexes_,(s,a)=>{const l=pl(this.indexSet_,a);if(Je(l,"Missing index implementation for "+a),s===So)if(l.isDefinedOn(e.node)){const p=[],f=i.getIterator(Ht.Wrap);let g=f.getNext();for(;g;)g.name!==e.name&&p.push(g),g=f.getNext();return p.push(e),r0(p,l.getCompare())}else return So;else{const p=i.get(e.name);let f=s;return p&&(f=f.remove(new Ht(e.name,p))),f.insert(e,e.node)}});return new gr(n,this.indexSet_)}removeFromIndexes(e,i){const n=jd(this.indexes_,s=>{if(s===So)return s;{const a=i.get(e.name);return a?s.remove(new Ht(e.name,a)):s}});return new gr(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh;class Zt{constructor(e,i,n){this.children_=e,this.priorityNode_=i,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&bk(this.priorityNode_),this.children_.isEmpty()&&Je(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return uh||(uh=new Zt(new Hn(Rg),null,gr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uh}updatePriority(e){return this.children_.isEmpty()?this:new Zt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const i=this.children_.get(e);return i===null?uh:i}}getChild(e){const i=$t(e);return i===null?this:this.getImmediateChild(i).getChild(di(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(Je(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{const n=new Ht(e,i);let s,a;i.isEmpty()?(s=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(n,this.children_)):(s=this.children_.insert(e,i),a=this.indexMap_.addToIndexes(n,this.children_));const l=s.isEmpty()?uh:this.priorityNode_;return new Zt(s,l,a)}}updateChild(e,i){const n=$t(e);if(n===null)return i;{Je($t(e)!==".priority"||da(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(n).updateChild(di(e),i);return this.updateImmediateChild(n,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let n=0,s=0,a=!0;if(this.forEachChild(Tn,(l,p)=>{i[l]=p.val(e),n++,a&&Zt.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):a=!1}),!e&&a&&s<2*n){const l=[];for(const p in i)l[p]=i[p];return l}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+vk(this.getPriority().val())+":"),this.forEachChild(Tn,(i,n)=>{const s=n.hash();s!==""&&(e+=":"+i+":"+s)}),this.lazyHash_=e===""?"":YS(e)}return this.lazyHash_}getPredecessorChildName(e,i,n){const s=this.resolveIndex_(n);if(s){const a=s.getPredecessorKey(new Ht(e,i));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new Ht(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new Ht(i,this.children_.get(i)):null}forEachChild(e,i){const n=this.resolveIndex_(e);return n?n.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ht.Wrap);let a=s.peek();for(;a!=null&&i.compare(a,e)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ht.Wrap);let a=s.peek();for(;a!=null&&i.compare(a,e)>0;)s.getNext(),a=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===eu?-1:0}withIndex(e){if(e===nl||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new Zt(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===nl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const n=this.getIterator(Tn),s=i.getIterator(Tn);let a=n.getNext(),l=s.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=n.getNext(),l=s.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===nl?null:this.indexMap_.get(e.toString())}}Zt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class WF extends Zt{constructor(){super(new Hn(Rg),Zt.EMPTY_NODE,gr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Zt.EMPTY_NODE}isEmpty(){return!1}}const eu=new WF;Object.defineProperties(Ht,{MIN:{value:new Ht(kl,Zt.EMPTY_NODE)},MAX:{value:new Ht(so,eu)}});yk.__EMPTY_NODE=Zt.EMPTY_NODE;qi.__childrenNodeConstructor=Zt;LF(eu);RF(eu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=!0;function kn(t,e=null){if(t===null)return Zt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Je(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const i=t;return new qi(i,kn(e))}if(!(t instanceof Array)&&zF){const i=[];let n=!1;if(_s(t,(l,p)=>{if(l.substring(0,1)!=="."){const f=kn(p);f.isEmpty()||(n=n||!f.getPriority().isEmpty(),i.push(new Ht(l,f)))}}),i.length===0)return Zt.EMPTY_NODE;const a=r0(i,BF,l=>l.name,Rg);if(n){const l=r0(i,Tn.getCompare());return new Zt(a,kn(e),new gr({".priority":l},{".priority":Tn}))}else return new Zt(a,kn(e),gr.Default)}else{let i=Zt.EMPTY_NODE;return _s(t,(n,s)=>{if(Br(t,n)&&n.substring(0,1)!=="."){const a=kn(s);(a.isLeafNode()||!a.isEmpty())&&(i=i.updateImmediateChild(n,a))}}),i.updatePriority(kn(e))}}NF(kn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F extends bp{constructor(e){super(),this.indexPath_=e,Je(!Ot(e)&&$t(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,i){const n=this.extractChild(e.node),s=this.extractChild(i.node),a=n.compareTo(s);return a===0?$l(e.name,i.name):a}makePost(e,i){const n=kn(e),s=Zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ht(i,s)}maxPost(){const e=Zt.EMPTY_NODE.updateChild(this.indexPath_,eu);return new Ht(so,e)}toString(){return fk(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF extends bp{compare(e,i){const n=e.node.compareTo(i.node);return n===0?$l(e.name,i.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,i){return!e.equals(i)}minPost(){return Ht.MIN}maxPost(){return Ht.MAX}makePost(e,i){const n=kn(e);return new Ht(i,n)}toString(){return".value"}}const YF=new HF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){return{type:"value",snapshotNode:t}}function UF(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function GF(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function c_(t,e,i){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:i}}function KF(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Je(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Je(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:kl}hasEnd(){return this.endSet_}getIndexEndValue(){return Je(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Je(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:so}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Je(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tn}copy(){const e=new Vg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function u_(t){const e={};if(t.isDefault())return e;let i;if(t.index_===Tn?i="$priority":t.index_===YF?i="$value":t.index_===nl?i="$key":(Je(t.index_ instanceof $F,"Unrecognized index type!"),i=t.index_.toString()),e.orderBy=pn(i),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=pn(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+pn(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=pn(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+pn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function d_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let i=t.viewFrom_;i===""&&(t.isViewFromLeft()?i="l":i="r"),e.vf=i}return t.index_!==Tn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends uk{constructor(e,i,n,s){super(),this.repoInfo_=e,this.onDataUpdate_=i,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=Jc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,i){return i!==void 0?"tag$"+i:(Je(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,i,n,s){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=a0.getListenId_(e,n),p={};this.listens_[l]=p;const f=u_(e._queryParams);this.restRequest_(a+".json",f,(g,m)=>{let k=m;if(g===404&&(k=null,g=null),g===null&&this.onDataUpdate_(a,k,!1,n),pl(this.listens_,l)===p){let T;g?g===401?T="permission_denied":T="rest_error:"+g:T="ok",s(T,null)}})}unlisten(e,i){const n=a0.getListenId_(e,i);delete this.listens_[n]}get(e){const i=u_(e._queryParams),n=e._path.toString(),s=new w2;return this.restRequest_(n+".json",i,(a,l)=>{let p=l;a===404&&(p=null,a=null),a===null?(this.onDataUpdate_(n,p,!1,null),s.resolve(p)):s.reject(new Error(p))}),s.promise}refreshAuthToken(e){}restRequest_(e,i={},n){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(i.auth=s.accessToken),a&&a.token&&(i.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bE(i);this.log_("Sending REST request for "+l);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(n&&p.readyState===4){this.log_("REST Response for "+l+" received. status:",p.status,"response:",p.responseText);let f=null;if(p.status>=200&&p.status<300){try{f=ac(p.responseText)}catch{as("Failed to parse JSON response for "+l+": "+p.responseText)}n(null,f)}else p.status!==401&&p.status!==404&&as("Got unsuccessful REST response for "+l+" Status: "+p.status),n(p.status);n=null}},p.open("GET",l,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,i){this.rootNode_=this.rootNode_.updateChild(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(){return{value:null,children:new Map}}function wk(t,e,i){if(Ot(e))t.value=i,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,i);else{const n=$t(e);t.children.has(n)||t.children.set(n,o0());const s=t.children.get(n);e=di(e),wk(s,e,i)}}function t1(t,e,i){t.value!==null?i(e,t.value):ZF(t,(n,s)=>{const a=new mi(e.toString()+"/"+n);t1(s,a,i)})}function ZF(t,e){t.children.forEach((i,n)=>{e(n,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),i=Object.assign({},e);return this.last_&&_s(this.last_,(n,s)=>{i[n]=i[n]-s}),this.last_=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=10*1e3,qF=30*1e3,eB=5*60*1e3;class tB{constructor(e,i){this.server_=i,this.statsToReport_={},this.statsListener_=new JF(e);const n=p_+(qF-p_)*Math.random();Vh(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),i={};let n=!1;_s(e,(s,a)=>{a>0&&Br(this.statsToReport_,s)&&(i[s]=a,n=!0)}),n&&this.server_.reportStats(i),Vh(this.reportStats_.bind(this),Math.floor(Math.random()*2*eB))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qs;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(qs||(qs={}));function Sk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Tk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,i,n){this.path=e,this.affectedTree=i,this.revert=n,this.type=qs.ACK_USER_WRITE,this.source=Sk()}operationForChild(e){if(Ot(this.path)){if(this.affectedTree.value!=null)return Je(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new mi(e));return new l0(si(),i,this.revert)}}else return Je($t(this.path)===e,"operationForChild called for unrelated child."),new l0(di(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,i,n){this.source=e,this.path=i,this.snap=n,this.type=qs.OVERWRITE}operationForChild(e){return Ot(this.path)?new ro(this.source,si(),this.snap.getImmediateChild(e)):new ro(this.source,di(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,i,n){this.source=e,this.path=i,this.children=n,this.type=qs.MERGE}operationForChild(e){if(Ot(this.path)){const i=this.children.subtree(new mi(e));return i.isEmpty()?null:i.value?new ro(this.source,si(),i.value):new wc(this.source,si(),i)}else return Je($t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new wc(this.source,di(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,i,n){this.node_=e,this.fullyInitialized_=i,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ot(e))return this.isFullyInitialized()&&!this.filtered_;const i=$t(e);return this.isCompleteForChild(i)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function iB(t,e,i,n){const s=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(KF(l.childName,l.snapshotNode))}),dh(t,s,"child_removed",e,n,i),dh(t,s,"child_added",e,n,i),dh(t,s,"child_moved",a,n,i),dh(t,s,"child_changed",e,n,i),dh(t,s,"value",e,n,i),s}function dh(t,e,i,n,s,a){const l=n.filter(p=>p.type===i);l.sort((p,f)=>sB(t,p,f)),l.forEach(p=>{const f=nB(t,p,a);s.forEach(g=>{g.respondsTo(p.type)&&e.push(g.createEvent(f,t.query_))})})}function nB(t,e,i){return e.type==="value"||e.type==="child_removed"||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function sB(t,e,i){if(e.childName==null||i.childName==null)throw Ll("Should only compare child_ events.");const n=new Ht(e.childName,e.snapshotNode),s=new Ht(i.childName,i.snapshotNode);return t.index_.compare(n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t,e){return{eventCache:t,serverCache:e}}function Oh(t,e,i,n){return Mk(new Og(e,i,n),t.serverCache)}function Pk(t,e,i,n){return Mk(t.eventCache,new Og(e,i,n))}function i1(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ao(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef;const rB=()=>(Ef||(Ef=new Hn(YI)),Ef);class ui{constructor(e,i=rB()){this.value=e,this.children=i}static fromObject(e){let i=new ui(null);return _s(e,(n,s)=>{i=i.set(new mi(n),s)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,i){if(this.value!=null&&i(this.value))return{path:si(),value:this.value};if(Ot(e))return null;{const n=$t(e),s=this.children.get(n);if(s!==null){const a=s.findRootMostMatchingPathAndValue(di(e),i);return a!=null?{path:rn(new mi(n),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ot(e))return this;{const i=$t(e),n=this.children.get(i);return n!==null?n.subtree(di(e)):new ui(null)}}set(e,i){if(Ot(e))return new ui(i,this.children);{const n=$t(e),a=(this.children.get(n)||new ui(null)).set(di(e),i),l=this.children.insert(n,a);return new ui(this.value,l)}}remove(e){if(Ot(e))return this.children.isEmpty()?new ui(null):new ui(null,this.children);{const i=$t(e),n=this.children.get(i);if(n){const s=n.remove(di(e));let a;return s.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,s),this.value===null&&a.isEmpty()?new ui(null):new ui(this.value,a)}else return this}}get(e){if(Ot(e))return this.value;{const i=$t(e),n=this.children.get(i);return n?n.get(di(e)):null}}setTree(e,i){if(Ot(e))return i;{const n=$t(e),a=(this.children.get(n)||new ui(null)).setTree(di(e),i);let l;return a.isEmpty()?l=this.children.remove(n):l=this.children.insert(n,a),new ui(this.value,l)}}fold(e){return this.fold_(si(),e)}fold_(e,i){const n={};return this.children.inorderTraversal((s,a)=>{n[s]=a.fold_(rn(e,s),i)}),i(e,this.value,n)}findOnPath(e,i){return this.findOnPath_(e,si(),i)}findOnPath_(e,i,n){const s=this.value?n(i,this.value):!1;if(s)return s;if(Ot(e))return null;{const a=$t(e),l=this.children.get(a);return l?l.findOnPath_(di(e),rn(i,a),n):null}}foreachOnPath(e,i){return this.foreachOnPath_(e,si(),i)}foreachOnPath_(e,i,n){if(Ot(e))return this;{this.value&&n(i,this.value);const s=$t(e),a=this.children.get(s);return a?a.foreachOnPath_(di(e),rn(i,s),n):new ui(null)}}foreach(e){this.foreach_(si(),e)}foreach_(e,i){this.children.inorderTraversal((n,s)=>{s.foreach_(rn(e,n),i)}),this.value&&i(e,this.value)}foreachChild(e){this.children.inorderTraversal((i,n)=>{n.value&&e(i,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.writeTree_=e}static empty(){return new Rs(new ui(null))}}function jh(t,e,i){if(Ot(e))return new Rs(new ui(i));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const s=n.path;let a=n.value;const l=gs(s,e);return a=a.updateChild(l,i),new Rs(t.writeTree_.set(s,a))}else{const s=new ui(i),a=t.writeTree_.setTree(e,s);return new Rs(a)}}}function f_(t,e,i){let n=t;return _s(i,(s,a)=>{n=jh(n,rn(e,s),a)}),n}function x_(t,e){if(Ot(e))return Rs.empty();{const i=t.writeTree_.setTree(e,new ui(null));return new Rs(i)}}function n1(t,e){return po(t,e)!=null}function po(t,e){const i=t.writeTree_.findRootMostValueAndPath(e);return i!=null?t.writeTree_.get(i.path).getChild(gs(i.path,e)):null}function m_(t){const e=[],i=t.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Tn,(n,s)=>{e.push(new Ht(n,s))}):t.writeTree_.children.inorderTraversal((n,s)=>{s.value!=null&&e.push(new Ht(n,s.value))}),e}function ra(t,e){if(Ot(e))return t;{const i=po(t,e);return i!=null?new Rs(new ui(i)):new Rs(t.writeTree_.subtree(e))}}function s1(t){return t.writeTree_.isEmpty()}function Tl(t,e){return Ek(si(),t.writeTree_,e)}function Ek(t,e,i){if(e.value!=null)return i.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((s,a)=>{s===".priority"?(Je(a.value!==null,"Priority writes must always be leaf nodes"),n=a.value):i=Ek(rn(t,s),a,i)}),!i.getChild(t).isEmpty()&&n!==null&&(i=i.updateChild(rn(t,".priority"),n)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t,e){return Lk(e,t)}function aB(t,e,i,n,s){Je(n>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:i,writeId:n,visible:s}),s&&(t.visibleWrites=jh(t.visibleWrites,e,i)),t.lastWriteId=n}function oB(t,e){for(let i=0;i<t.allWrites.length;i++){const n=t.allWrites[i];if(n.writeId===e)return n}return null}function lB(t,e){const i=t.allWrites.findIndex(p=>p.writeId===e);Je(i>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[i];t.allWrites.splice(i,1);let s=n.visible,a=!1,l=t.allWrites.length-1;for(;s&&l>=0;){const p=t.allWrites[l];p.visible&&(l>=i&&hB(p,n.path)?s=!1:Ds(n.path,p.path)&&(a=!0)),l--}if(s){if(a)return cB(t),!0;if(n.snap)t.visibleWrites=x_(t.visibleWrites,n.path);else{const p=n.children;_s(p,f=>{t.visibleWrites=x_(t.visibleWrites,rn(n.path,f))})}return!0}else return!1}function hB(t,e){if(t.snap)return Ds(t.path,e);for(const i in t.children)if(t.children.hasOwnProperty(i)&&Ds(rn(t.path,i),e))return!0;return!1}function cB(t){t.visibleWrites=Dk(t.allWrites,uB,si()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function uB(t){return t.visible}function Dk(t,e,i){let n=Rs.empty();for(let s=0;s<t.length;++s){const a=t[s];if(e(a)){const l=a.path;let p;if(a.snap)Ds(i,l)?(p=gs(i,l),n=jh(n,p,a.snap)):Ds(l,i)&&(p=gs(l,i),n=jh(n,si(),a.snap.getChild(p)));else if(a.children){if(Ds(i,l))p=gs(i,l),n=f_(n,p,a.children);else if(Ds(l,i))if(p=gs(l,i),Ot(p))n=f_(n,si(),a.children);else{const f=pl(a.children,$t(p));if(f){const g=f.getChild(di(p));n=jh(n,si(),g)}}}else throw Ll("WriteRecord should have .snap or .children")}}return n}function Ik(t,e,i,n,s){if(!n&&!s){const a=po(t.visibleWrites,e);if(a!=null)return a;{const l=ra(t.visibleWrites,e);if(s1(l))return i;if(i==null&&!n1(l,si()))return null;{const p=i||Zt.EMPTY_NODE;return Tl(l,p)}}}else{const a=ra(t.visibleWrites,e);if(!s&&s1(a))return i;if(!s&&i==null&&!n1(a,si()))return null;{const l=function(g){return(g.visible||s)&&(!n||!~n.indexOf(g.writeId))&&(Ds(g.path,e)||Ds(e,g.path))},p=Dk(t.allWrites,l,e),f=i||Zt.EMPTY_NODE;return Tl(p,f)}}}function dB(t,e,i){let n=Zt.EMPTY_NODE;const s=po(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Tn,(a,l)=>{n=n.updateImmediateChild(a,l)}),n;if(i){const a=ra(t.visibleWrites,e);return i.forEachChild(Tn,(l,p)=>{const f=Tl(ra(a,new mi(l)),p);n=n.updateImmediateChild(l,f)}),m_(a).forEach(l=>{n=n.updateImmediateChild(l.name,l.node)}),n}else{const a=ra(t.visibleWrites,e);return m_(a).forEach(l=>{n=n.updateImmediateChild(l.name,l.node)}),n}}function pB(t,e,i,n,s){Je(n||s,"Either existingEventSnap or existingServerSnap must exist");const a=rn(e,i);if(n1(t.visibleWrites,a))return null;{const l=ra(t.visibleWrites,a);return s1(l)?s.getChild(i):Tl(l,s.getChild(i))}}function fB(t,e,i,n){const s=rn(e,i),a=po(t.visibleWrites,s);if(a!=null)return a;if(n.isCompleteForChild(i)){const l=ra(t.visibleWrites,s);return Tl(l,n.getNode().getImmediateChild(i))}else return null}function xB(t,e){return po(t.visibleWrites,e)}function mB(t,e,i,n,s,a,l){let p;const f=ra(t.visibleWrites,e),g=po(f,si());if(g!=null)p=g;else if(i!=null)p=Tl(f,i);else return[];if(p=p.withIndex(l),!p.isEmpty()&&!p.isLeafNode()){const m=[],k=l.getCompare(),T=a?p.getReverseIteratorFrom(n,l):p.getIteratorFrom(n,l);let D=T.getNext();for(;D&&m.length<s;)k(D,n)!==0&&m.push(D),D=T.getNext();return m}else return[]}function gB(){return{visibleWrites:Rs.empty(),allWrites:[],lastWriteId:-1}}function r1(t,e,i,n){return Ik(t.writeTree,t.treePath,e,i,n)}function Fk(t,e){return dB(t.writeTree,t.treePath,e)}function g_(t,e,i,n){return pB(t.writeTree,t.treePath,e,i,n)}function h0(t,e){return xB(t.writeTree,rn(t.treePath,e))}function yB(t,e,i,n,s,a){return mB(t.writeTree,t.treePath,e,i,n,s,a)}function jg(t,e,i){return fB(t.writeTree,t.treePath,e,i)}function Bk(t,e){return Lk(rn(t.treePath,e),t.writeTree)}function Lk(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(){this.changeMap=new Map}trackChildChange(e){const i=e.type,n=e.childName;Je(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),Je(n!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(n);if(s){const a=s.type;if(i==="child_added"&&a==="child_removed")this.changeMap.set(n,c_(n,e.snapshotNode,s.snapshotNode));else if(i==="child_removed"&&a==="child_added")this.changeMap.delete(n);else if(i==="child_removed"&&a==="child_changed")this.changeMap.set(n,GF(n,s.oldSnap));else if(i==="child_changed"&&a==="child_added")this.changeMap.set(n,UF(n,e.snapshotNode));else if(i==="child_changed"&&a==="child_changed")this.changeMap.set(n,c_(n,e.snapshotNode,s.oldSnap));else throw Ll("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{getCompleteChild(e){return null}getChildAfterChild(e,i,n){return null}}const Nk=new bB;class Wg{constructor(e,i,n=null){this.writes_=e,this.viewCache_=i,this.optCompleteServerCache_=n}getCompleteChild(e){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(e))return i.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new Og(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jg(this.writes_,e,n)}}getChildAfterChild(e,i,n){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ao(this.viewCache_),a=yB(this.writes_,s,i,1,n,e);return a.length===0?null:a[0]}}function _B(t,e){Je(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Je(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function CB(t,e,i,n,s){const a=new vB;let l,p;if(i.type===qs.OVERWRITE){const g=i;g.source.fromUser?l=a1(t,e,g.path,g.snap,n,s,a):(Je(g.source.fromServer,"Unknown source."),p=g.source.tagged||e.serverCache.isFiltered()&&!Ot(g.path),l=c0(t,e,g.path,g.snap,n,s,p,a))}else if(i.type===qs.MERGE){const g=i;g.source.fromUser?l=SB(t,e,g.path,g.children,n,s,a):(Je(g.source.fromServer,"Unknown source."),p=g.source.tagged||e.serverCache.isFiltered(),l=o1(t,e,g.path,g.children,n,s,p,a))}else if(i.type===qs.ACK_USER_WRITE){const g=i;g.revert?l=MB(t,e,g.path,n,s,a):l=kB(t,e,g.path,g.affectedTree,n,s,a)}else if(i.type===qs.LISTEN_COMPLETE)l=TB(t,e,i.path,n,a);else throw Ll("Unknown operation type: "+i.type);const f=a.getChanges();return wB(e,l,f),{viewCache:l,changes:f}}function wB(t,e,i){const n=e.eventCache;if(n.isFullyInitialized()){const s=n.getNode().isLeafNode()||n.getNode().isEmpty(),a=i1(t);(i.length>0||!t.eventCache.isFullyInitialized()||s&&!n.getNode().equals(a)||!n.getNode().getPriority().equals(a.getPriority()))&&i.push(XF(i1(e)))}}function Rk(t,e,i,n,s,a){const l=e.eventCache;if(h0(n,i)!=null)return e;{let p,f;if(Ot(i))if(Je(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=ao(e),m=g instanceof Zt?g:Zt.EMPTY_NODE,k=Fk(n,m);p=t.filter.updateFullNode(e.eventCache.getNode(),k,a)}else{const g=r1(n,ao(e));p=t.filter.updateFullNode(e.eventCache.getNode(),g,a)}else{const g=$t(i);if(g===".priority"){Je(da(i)===1,"Can't have a priority with additional path components");const m=l.getNode();f=e.serverCache.getNode();const k=g_(n,i,m,f);k!=null?p=t.filter.updatePriority(m,k):p=l.getNode()}else{const m=di(i);let k;if(l.isCompleteForChild(g)){f=e.serverCache.getNode();const T=g_(n,i,l.getNode(),f);T!=null?k=l.getNode().getImmediateChild(g).updateChild(m,T):k=l.getNode().getImmediateChild(g)}else k=jg(n,g,e.serverCache);k!=null?p=t.filter.updateChild(l.getNode(),g,k,m,s,a):p=l.getNode()}}return Oh(e,p,l.isFullyInitialized()||Ot(i),t.filter.filtersNodes())}}function c0(t,e,i,n,s,a,l,p){const f=e.serverCache;let g;const m=l?t.filter:t.filter.getIndexedFilter();if(Ot(i))g=m.updateFullNode(f.getNode(),n,null);else if(m.filtersNodes()&&!f.isFiltered()){const D=f.getNode().updateChild(i,n);g=m.updateFullNode(f.getNode(),D,null)}else{const D=$t(i);if(!f.isCompleteForPath(i)&&da(i)>1)return e;const P=di(i),$=f.getNode().getImmediateChild(D).updateChild(P,n);D===".priority"?g=m.updatePriority(f.getNode(),$):g=m.updateChild(f.getNode(),D,$,P,Nk,null)}const k=Pk(e,g,f.isFullyInitialized()||Ot(i),m.filtersNodes()),T=new Wg(s,k,a);return Rk(t,k,i,s,T,p)}function a1(t,e,i,n,s,a,l){const p=e.eventCache;let f,g;const m=new Wg(s,e,a);if(Ot(i))g=t.filter.updateFullNode(e.eventCache.getNode(),n,l),f=Oh(e,g,!0,t.filter.filtersNodes());else{const k=$t(i);if(k===".priority")g=t.filter.updatePriority(e.eventCache.getNode(),n),f=Oh(e,g,p.isFullyInitialized(),p.isFiltered());else{const T=di(i),D=p.getNode().getImmediateChild(k);let P;if(Ot(T))P=n;else{const L=m.getCompleteChild(k);L!=null?pk(T)===".priority"&&L.getChild(xk(T)).isEmpty()?P=L:P=L.updateChild(T,n):P=Zt.EMPTY_NODE}if(D.equals(P))f=e;else{const L=t.filter.updateChild(p.getNode(),k,P,T,m,l);f=Oh(e,L,p.isFullyInitialized(),t.filter.filtersNodes())}}}return f}function y_(t,e){return t.eventCache.isCompleteForChild(e)}function SB(t,e,i,n,s,a,l){let p=e;return n.foreach((f,g)=>{const m=rn(i,f);y_(e,$t(m))&&(p=a1(t,p,m,g,s,a,l))}),n.foreach((f,g)=>{const m=rn(i,f);y_(e,$t(m))||(p=a1(t,p,m,g,s,a,l))}),p}function v_(t,e,i){return i.foreach((n,s)=>{e=e.updateChild(n,s)}),e}function o1(t,e,i,n,s,a,l,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,g;Ot(i)?g=n:g=new ui(null).setTree(i,n);const m=e.serverCache.getNode();return g.children.inorderTraversal((k,T)=>{if(m.hasChild(k)){const D=e.serverCache.getNode().getImmediateChild(k),P=v_(t,D,T);f=c0(t,f,new mi(k),P,s,a,l,p)}}),g.children.inorderTraversal((k,T)=>{const D=!e.serverCache.isCompleteForChild(k)&&T.value===null;if(!m.hasChild(k)&&!D){const P=e.serverCache.getNode().getImmediateChild(k),L=v_(t,P,T);f=c0(t,f,new mi(k),L,s,a,l,p)}}),f}function kB(t,e,i,n,s,a,l){if(h0(s,i)!=null)return e;const p=e.serverCache.isFiltered(),f=e.serverCache;if(n.value!=null){if(Ot(i)&&f.isFullyInitialized()||f.isCompleteForPath(i))return c0(t,e,i,f.getNode().getChild(i),s,a,p,l);if(Ot(i)){let g=new ui(null);return f.getNode().forEachChild(nl,(m,k)=>{g=g.set(new mi(m),k)}),o1(t,e,i,g,s,a,p,l)}else return e}else{let g=new ui(null);return n.foreach((m,k)=>{const T=rn(i,m);f.isCompleteForPath(T)&&(g=g.set(m,f.getNode().getChild(T)))}),o1(t,e,i,g,s,a,p,l)}}function TB(t,e,i,n,s){const a=e.serverCache,l=Pk(e,a.getNode(),a.isFullyInitialized()||Ot(i),a.isFiltered());return Rk(t,l,i,n,Nk,s)}function MB(t,e,i,n,s,a){let l;if(h0(n,i)!=null)return e;{const p=new Wg(n,e,s),f=e.eventCache.getNode();let g;if(Ot(i)||$t(i)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=r1(n,ao(e));else{const k=e.serverCache.getNode();Je(k instanceof Zt,"serverChildren would be complete if leaf node"),m=Fk(n,k)}m=m,g=t.filter.updateFullNode(f,m,a)}else{const m=$t(i);let k=jg(n,m,e.serverCache);k==null&&e.serverCache.isCompleteForChild(m)&&(k=f.getImmediateChild(m)),k!=null?g=t.filter.updateChild(f,m,k,di(i),p,a):e.eventCache.getNode().hasChild(m)?g=t.filter.updateChild(f,m,Zt.EMPTY_NODE,di(i),p,a):g=f,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=r1(n,ao(e)),l.isLeafNode()&&(g=t.filter.updateFullNode(g,l,a)))}return l=e.serverCache.isFullyInitialized()||h0(n,si())!=null,Oh(e,g,l,t.filter.filtersNodes())}}function PB(t,e){const i=ao(t.viewCache_);return i&&(t.query._queryParams.loadsAllData()||!Ot(e)&&!i.getImmediateChild($t(e)).isEmpty())?i.getChild(e):null}function b_(t,e,i,n){e.type===qs.MERGE&&e.source.queryId!==null&&(Je(ao(t.viewCache_),"We should always have a full cache before handling merges"),Je(i1(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,a=CB(t.processor_,s,e,i,n);return _B(t.processor_,a.viewCache),Je(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,EB(t,a.changes,a.viewCache.eventCache.getNode())}function EB(t,e,i,n){const s=t.eventRegistrations_;return iB(t.eventGenerator_,e,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __;function AB(t){Je(!__,"__referenceConstructor has already been defined"),__=t}function zg(t,e,i,n){const s=e.source.queryId;if(s!==null){const a=t.views.get(s);return Je(a!=null,"SyncTree gave us an op for an invalid query."),b_(a,e,i,n)}else{let a=[];for(const l of t.views.values())a=a.concat(b_(l,e,i,n));return a}}function $g(t,e){let i=null;for(const n of t.views.values())i=i||PB(n,e);return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C_;function DB(t){Je(!C_,"__referenceConstructor has already been defined"),C_=t}class w_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ui(null),this.pendingWriteTree_=gB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function IB(t,e,i,n,s){return aB(t.pendingWriteTree_,e,i,n,s),s?Cp(t,new ro(Sk(),e,i)):[]}function Ho(t,e,i=!1){const n=oB(t.pendingWriteTree_,e);if(lB(t.pendingWriteTree_,e)){let a=new ui(null);return n.snap!=null?a=a.set(si(),!0):_s(n.children,l=>{a=a.set(new mi(l),!0)}),Cp(t,new l0(n.path,a,i))}else return[]}function _p(t,e,i){return Cp(t,new ro(kk(),e,i))}function FB(t,e,i){const n=ui.fromObject(i);return Cp(t,new wc(kk(),e,n))}function BB(t,e,i,n){const s=Wk(t,n);if(s!=null){const a=zk(s),l=a.path,p=a.queryId,f=gs(l,e),g=new ro(Tk(p),f,i);return $k(t,l,g)}else return[]}function LB(t,e,i,n){const s=Wk(t,n);if(s){const a=zk(s),l=a.path,p=a.queryId,f=gs(l,e),g=ui.fromObject(i),m=new wc(Tk(p),f,g);return $k(t,l,m)}else return[]}function Vk(t,e,i){const s=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(l,p)=>{const f=gs(l,e),g=$g(p,f);if(g)return g});return Ik(s,e,a,i,!0)}function Cp(t,e){return Ok(e,t.syncPointTree_,null,Ak(t.pendingWriteTree_,si()))}function Ok(t,e,i,n){if(Ot(t.path))return jk(t,e,i,n);{const s=e.get(si());i==null&&s!=null&&(i=$g(s,si()));let a=[];const l=$t(t.path),p=t.operationForChild(l),f=e.children.get(l);if(f&&p){const g=i?i.getImmediateChild(l):null,m=Bk(n,l);a=a.concat(Ok(p,f,g,m))}return s&&(a=a.concat(zg(s,t,n,i))),a}}function jk(t,e,i,n){const s=e.get(si());i==null&&s!=null&&(i=$g(s,si()));let a=[];return e.children.inorderTraversal((l,p)=>{const f=i?i.getImmediateChild(l):null,g=Bk(n,l),m=t.operationForChild(l);m&&(a=a.concat(jk(m,p,f,g)))}),s&&(a=a.concat(zg(s,t,n,i))),a}function Wk(t,e){return t.tagToQueryMap.get(e)}function zk(t){const e=t.indexOf("$");return Je(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new mi(t.substr(0,e))}}function $k(t,e,i){const n=t.syncPointTree_.get(e);Je(n,"Missing sync point for query tag that we're tracking");const s=Ak(t.pendingWriteTree_,e);return zg(n,i,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this.node_=e}getImmediateChild(e){const i=this.node_.getImmediateChild(e);return new Hg(i)}node(){return this.node_}}class Yg{constructor(e,i){this.syncTree_=e,this.path_=i}getImmediateChild(e){const i=rn(this.path_,e);return new Yg(this.syncTree_,i)}node(){return Vk(this.syncTree_,this.path_)}}const NB=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},S_=function(t,e,i){if(!t||typeof t!="object")return t;if(Je(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return RB(t[".sv"],e,i);if(typeof t[".sv"]=="object")return VB(t[".sv"],e);Je(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},RB=function(t,e,i){switch(t){case"timestamp":return i.timestamp;default:Je(!1,"Unexpected server value: "+t)}},VB=function(t,e,i){t.hasOwnProperty("increment")||Je(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&Je(!1,"Unexpected increment value: "+n);const s=e.node();if(Je(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return n;const l=s.getValue();return typeof l!="number"?n:l+n},OB=function(t,e,i,n){return Xg(e,new Yg(i,t),n)},jB=function(t,e,i){return Xg(t,new Hg(e),i)};function Xg(t,e,i){const n=t.getPriority().val(),s=S_(n,e.getImmediateChild(".priority"),i);let a;if(t.isLeafNode()){const l=t,p=S_(l.getValue(),e,i);return p!==l.getValue()||s!==l.getPriority().val()?new qi(p,kn(s)):t}else{const l=t;return a=l,s!==l.getPriority().val()&&(a=a.updatePriority(new qi(s))),l.forEachChild(Tn,(p,f)=>{const g=Xg(f,e.getImmediateChild(p),i);g!==f&&(a=a.updateImmediateChild(p,g))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e="",i=null,n={children:{},childCount:0}){this.name=e,this.parent=i,this.node=n}}function Gg(t,e){let i=e instanceof mi?e:new mi(e),n=t,s=$t(i);for(;s!==null;){const a=pl(n.node.children,s)||{children:{},childCount:0};n=new Ug(s,n,a),i=di(i),s=$t(i)}return n}function Hl(t){return t.node.value}function Hk(t,e){t.node.value=e,l1(t)}function Yk(t){return t.node.childCount>0}function WB(t){return Hl(t)===void 0&&!Yk(t)}function wp(t,e){_s(t.node.children,(i,n)=>{e(new Ug(i,t,n))})}function Xk(t,e,i,n){i&&!n&&e(t),wp(t,s=>{Xk(s,e,!0,n)}),i&&n&&e(t)}function zB(t,e,i){let n=t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function tu(t){return new mi(t.parent===null?t.name:tu(t.parent)+"/"+t.name)}function l1(t){t.parent!==null&&$B(t.parent,t.name,t)}function $B(t,e,i){const n=WB(i),s=Br(t.node.children,e);n&&s?(delete t.node.children[e],t.node.childCount--,l1(t)):!n&&!s&&(t.node.children[e]=i.node,t.node.childCount++,l1(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=/[\[\].#$\/\u0000-\u001F\u007F]/,YB=/[\[\].#$\u0000-\u001F\u007F]/,Af=10*1024*1024,Uk=function(t){return typeof t=="string"&&t.length!==0&&!HB.test(t)},XB=function(t){return typeof t=="string"&&t.length!==0&&!YB.test(t)},UB=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),XB(t)},Gk=function(t,e,i){const n=i instanceof mi?new TF(i,t):i;if(e===void 0)throw new Error(t+"contains undefined "+Aa(n));if(typeof e=="function")throw new Error(t+"contains a function "+Aa(n)+" with contents = "+e.toString());if(XS(e))throw new Error(t+"contains "+e.toString()+" "+Aa(n));if(typeof e=="string"&&e.length>Af/3&&L0(e)>Af)throw new Error(t+"contains a string greater than "+Af+" utf8 bytes "+Aa(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,a=!1;if(_s(e,(l,p)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!Uk(l)))throw new Error(t+" contains an invalid key ("+l+") "+Aa(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);MF(n,l),Gk(t,p,n),PF(n)}),s&&a)throw new Error(t+' contains ".value" child '+Aa(n)+" in addition to actual children.")}},GB=function(t,e){const i=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Uk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!UB(i))throw new Error(CE(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function QB(t,e){let i=null;for(let n=0;n<e.length;n++){const s=e[n],a=s.getPath();i!==null&&!mk(a,i.path)&&(t.eventLists_.push(i),i=null),i===null&&(i={events:[],path:a}),i.events.push(s)}i&&t.eventLists_.push(i)}function fo(t,e,i){QB(t,i),ZB(t,n=>Ds(n,e)||Ds(e,n))}function ZB(t,e){t.recursionDepth_++;let i=!0;for(let n=0;n<t.eventLists_.length;n++){const s=t.eventLists_[n];if(s){const a=s.path;e(a)?(JB(t.eventLists_[n]),t.eventLists_[n]=null):i=!1}}i&&(t.eventLists_=[]),t.recursionDepth_--}function JB(t){for(let e=0;e<t.events.length;e++){const i=t.events[e];if(i!==null){t.events[e]=null;const n=i.getEventRunner();Rh&&Sn("event: "+i.toString()),qc(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB="repo_interrupt",eL=25;class tL{constructor(e,i,n,s){this.repoInfo_=e,this.forceRestClient_=i,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=o0(),this.transactionQueueTree_=new Ug,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function iL(t,e,i){if(t.stats_=Bg(t.repoInfo_),t.forceRestClient_||ZI())t.server_=new a0(t.repoInfo_,(n,s,a,l)=>{k_(t,n,s,a,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>T_(t,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pn(i)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new Cr(t.repoInfo_,e,(n,s,a,l)=>{k_(t,n,s,a,l)},n=>{T_(t,n)},n=>{sL(t,n)},t.authTokenProvider_,t.appCheckProvider_,i),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=iF(t.repoInfo_,()=>new tB(t.stats_,t.server_)),t.infoData_=new QF,t.infoSyncTree_=new w_({startListening:(n,s,a,l)=>{let p=[];const f=t.infoData_.getNode(n._path);return f.isEmpty()||(p=_p(t.infoSyncTree_,n._path,f),setTimeout(()=>{l("ok")},0)),p},stopListening:()=>{}}),Kg(t,"connected",!1),t.serverSyncTree_=new w_({startListening:(n,s,a,l)=>(t.server_.listen(n,a,s,(p,f)=>{const g=l(p,f);fo(t.eventQueue_,n._path,g)}),[]),stopListening:(n,s)=>{t.server_.unlisten(n,s)}})}function nL(t){const i=t.infoData_.getNode(new mi(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Kk(t){return NB({timestamp:nL(t)})}function k_(t,e,i,n,s){t.dataUpdateCount++;const a=new mi(e);i=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,i):i;let l=[];if(s)if(n){const f=jd(i,g=>kn(g));l=LB(t.serverSyncTree_,a,f,s)}else{const f=kn(i);l=BB(t.serverSyncTree_,a,f,s)}else if(n){const f=jd(i,g=>kn(g));l=FB(t.serverSyncTree_,a,f)}else{const f=kn(i);l=_p(t.serverSyncTree_,a,f)}let p=a;l.length>0&&(p=Zg(t,a)),fo(t.eventQueue_,p,l)}function T_(t,e){Kg(t,"connected",e),e===!1&&aL(t)}function sL(t,e){_s(e,(i,n)=>{Kg(t,i,n)})}function Kg(t,e,i){const n=new mi("/.info/"+e),s=kn(i);t.infoData_.updateSnapshot(n,s);const a=_p(t.infoSyncTree_,n,s);fo(t.eventQueue_,n,a)}function rL(t){return t.nextWriteId_++}function aL(t){Qk(t,"onDisconnectEvents");const e=Kk(t),i=o0();t1(t.onDisconnect_,si(),(s,a)=>{const l=OB(s,a,t.serverSyncTree_,e);wk(i,s,l)});let n=[];t1(i,si(),(s,a)=>{n=n.concat(_p(t.serverSyncTree_,s,a));const l=cL(t,s);Zg(t,l)}),t.onDisconnect_=o0(),fo(t.eventQueue_,si(),n)}function oL(t){t.persistentConnection_&&t.persistentConnection_.interrupt(qB)}function Qk(t,...e){let i="";t.persistentConnection_&&(i=t.persistentConnection_.id+":"),Sn(i,...e)}function Zk(t,e,i){return Vk(t.serverSyncTree_,e,i)||Zt.EMPTY_NODE}function Qg(t,e=t.transactionQueueTree_){if(e||Sp(t,e),Hl(e)){const i=qk(t,e);Je(i.length>0,"Sending zero length transaction queue"),i.every(s=>s.status===0)&&lL(t,tu(e),i)}else Yk(e)&&wp(e,i=>{Qg(t,i)})}function lL(t,e,i){const n=i.map(g=>g.currentWriteId),s=Zk(t,e,n);let a=s;const l=s.hash();for(let g=0;g<i.length;g++){const m=i[g];Je(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const k=gs(e,m.path);a=a.updateChild(k,m.currentOutputSnapshotRaw)}const p=a.val(!0),f=e;t.server_.put(f.toString(),p,g=>{Qk(t,"transaction put response",{path:f.toString(),status:g});let m=[];if(g==="ok"){const k=[];for(let T=0;T<i.length;T++)i[T].status=2,m=m.concat(Ho(t.serverSyncTree_,i[T].currentWriteId)),i[T].onComplete&&k.push(()=>i[T].onComplete(null,!0,i[T].currentOutputSnapshotResolved)),i[T].unwatcher();Sp(t,Gg(t.transactionQueueTree_,e)),Qg(t,t.transactionQueueTree_),fo(t.eventQueue_,e,m);for(let T=0;T<k.length;T++)qc(k[T])}else{if(g==="datastale")for(let k=0;k<i.length;k++)i[k].status===3?i[k].status=4:i[k].status=0;else{as("transaction at "+f.toString()+" failed: "+g);for(let k=0;k<i.length;k++)i[k].status=4,i[k].abortReason=g}Zg(t,e)}},l)}function Zg(t,e){const i=Jk(t,e),n=tu(i),s=qk(t,i);return hL(t,s,n),n}function hL(t,e,i){if(e.length===0)return;const n=[];let s=[];const l=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const f=e[p],g=gs(i,f.path);let m=!1,k;if(Je(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)m=!0,k=f.abortReason,s=s.concat(Ho(t.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=eL)m=!0,k="maxretry",s=s.concat(Ho(t.serverSyncTree_,f.currentWriteId,!0));else{const T=Zk(t,f.path,l);f.currentInputSnapshot=T;const D=e[p].update(T.val());if(D!==void 0){Gk("transaction failed: Data returned ",D,f.path);let P=kn(D);typeof D=="object"&&D!=null&&Br(D,".priority")||(P=P.updatePriority(T.getPriority()));const $=f.currentWriteId,N=Kk(t),E=jB(P,T,N);f.currentOutputSnapshotRaw=P,f.currentOutputSnapshotResolved=E,f.currentWriteId=rL(t),l.splice(l.indexOf($),1),s=s.concat(IB(t.serverSyncTree_,f.path,E,f.currentWriteId,f.applyLocally)),s=s.concat(Ho(t.serverSyncTree_,$,!0))}else m=!0,k="nodata",s=s.concat(Ho(t.serverSyncTree_,f.currentWriteId,!0))}fo(t.eventQueue_,i,s),s=[],m&&(e[p].status=2,function(T){setTimeout(T,Math.floor(0))}(e[p].unwatcher),e[p].onComplete&&(k==="nodata"?n.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):n.push(()=>e[p].onComplete(new Error(k),!1,null))))}Sp(t,t.transactionQueueTree_);for(let p=0;p<n.length;p++)qc(n[p]);Qg(t,t.transactionQueueTree_)}function Jk(t,e){let i,n=t.transactionQueueTree_;for(i=$t(e);i!==null&&Hl(n)===void 0;)n=Gg(n,i),e=di(e),i=$t(e);return n}function qk(t,e){const i=[];return eT(t,e,i),i.sort((n,s)=>n.order-s.order),i}function eT(t,e,i){const n=Hl(e);if(n)for(let s=0;s<n.length;s++)i.push(n[s]);wp(e,s=>{eT(t,s,i)})}function Sp(t,e){const i=Hl(e);if(i){let n=0;for(let s=0;s<i.length;s++)i[s].status!==2&&(i[n]=i[s],n++);i.length=n,Hk(e,i.length>0?i:void 0)}wp(e,n=>{Sp(t,n)})}function cL(t,e){const i=tu(Jk(t,e)),n=Gg(t.transactionQueueTree_,e);return zB(n,s=>{Df(t,s)}),Df(t,n),Xk(n,s=>{Df(t,s)}),i}function Df(t,e){const i=Hl(e);if(i){const n=[];let s=[],a=-1;for(let l=0;l<i.length;l++)i[l].status===3||(i[l].status===1?(Je(a===l-1,"All SENT items should be at beginning of queue."),a=l,i[l].status=3,i[l].abortReason="set"):(Je(i[l].status===0,"Unexpected transaction status in abort"),i[l].unwatcher(),s=s.concat(Ho(t.serverSyncTree_,i[l].currentWriteId,!0)),i[l].onComplete&&n.push(i[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?Hk(e,void 0):i.length=a+1,fo(t.eventQueue_,tu(e),s);for(let l=0;l<n.length;l++)qc(n[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t){let e="";const i=t.split("/");for(let n=0;n<i.length;n++)if(i[n].length>0){let s=i[n];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function dL(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const i of t.split("&")){if(i.length===0)continue;const n=i.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):as(`Invalid query segment '${i}' in query '${t}'`)}return e}const M_=function(t,e){const i=pL(t),n=i.namespace;i.domain==="firebase.com"&&Ir(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&i.domain!=="localhost"&&Ir("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||$I();const s=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new sk(i.host,i.secure,n,s,e,"",n!==i.subdomain),path:new mi(i.pathString)}},pL=function(t){let e="",i="",n="",s="",a="",l=!0,p="https",f=443;if(typeof t=="string"){let g=t.indexOf("//");g>=0&&(p=t.substring(0,g-1),t=t.substring(g+2));let m=t.indexOf("/");m===-1&&(m=t.length);let k=t.indexOf("?");k===-1&&(k=t.length),e=t.substring(0,Math.min(m,k)),m<k&&(s=uL(t.substring(m,k)));const T=dL(t.substring(Math.min(t.length,k)));g=e.indexOf(":"),g>=0?(l=p==="https"||p==="wss",f=parseInt(e.substring(g+1),10)):g=e.length;const D=e.slice(0,g);if(D.toLowerCase()==="localhost")i="localhost";else if(D.split(".").length<=2)i=D;else{const P=e.indexOf(".");n=e.substring(0,P).toLowerCase(),i=e.substring(P+1),a=n}"ns"in T&&(a=T.ns)}return{host:e,port:f,domain:i,subdomain:n,secure:l,scheme:p,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,i,n,s){this._repo=e,this._path=i,this._queryParams=n,this._orderByCalled=s}get key(){return Ot(this._path)?null:pk(this._path)}get ref(){return new Yl(this._repo,this._path)}get _queryIdentifier(){const e=d_(this._queryParams),i=Ig(e);return i==="{}"?"default":i}get _queryObject(){return d_(this._queryParams)}isEqual(e){if(e=Kn(e),!(e instanceof Jg))return!1;const i=this._repo===e._repo,n=mk(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return i&&n&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+kF(this._path)}}class Yl extends Jg{constructor(e,i){super(e,i,new Vg,!1)}get parent(){const e=xk(this._path);return e===null?null:new Yl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function Ln(t,...e){let i=Kn(t);for(const n of e)i=n._apply(i);return i}AB(Yl);DB(Yl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="FIREBASE_DATABASE_EMULATOR_HOST",h1={};let xL=!1;function mL(t,e,i,n){t.repoInfo_=new sk(`${e}:${i}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),n&&(t.authTokenProvider_=n)}function gL(t,e,i,n,s){let a=n||t.options.databaseURL;a===void 0&&(t.options.projectId||Ir("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sn("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=M_(a,s),p=l.repoInfo,f;typeof process<"u"&&Ub&&(f=Ub[fL]),f?(a=`http://${f}?ns=${p.namespace}`,l=M_(a,s),p=l.repoInfo):l.repoInfo.secure;const g=new qI(t.name,t.options,e);GB("Invalid Firebase Database URL",l),Ot(l.path)||Ir("Database URL must point to the root of a Firebase Database (not including a child path).");const m=vL(p,t,g,new JI(t.name,i));return new bL(m,t)}function yL(t,e){const i=h1[e];(!i||i[t.key]!==t)&&Ir(`Database ${e}(${t.repoInfo_}) has already been deleted.`),oL(t),delete i[t.key]}function vL(t,e,i,n){let s=h1[e.name];s||(s={},h1[e.name]=s);let a=s[t.toURLString()];return a&&Ir("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new tL(t,xL,i,n),s[t.toURLString()]=a,a}class bL{constructor(e,i){this._repoInternal=e,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(iL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yl(this._repo,si())),this._rootInternal}_delete(){return this._rootInternal!==null&&(yL(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ir("Cannot call "+e+" on a deleted database.")}}function _L(t=b3(),e){const i=g3(t,"database").getImmediate({identifier:e});if(!i._instanceStarted){const n=l3("database");n&&CL(i,...n)}return i}function CL(t,e,i,n={}){t=Kn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ir("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let a;if(s.repoInfo_.nodeAdmin)n.mockUserToken&&Ir('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new td(td.OWNER);else if(n.mockUserToken){const l=typeof n.mockUserToken=="string"?n.mockUserToken:c3(n.mockUserToken,t.app.options.projectId);a=new td(l)}mL(s,e,i,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){RI(y3),oc(new fl("database",(e,{instanceIdentifier:i})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return gL(n,s,a,i)},"PUBLIC").setMultipleInstances(!0)),ia(Gb,Kb,t),ia(Gb,Kb,"esm2017")}Cr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Cr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};wL();let SL={apiKey:"AIzaSyBCtuJRMY3TLF0pnWCUSL1jnxFOHJtZ5fE",authDomain:"steeltechiot.firebaseapp.com",databaseURL:"https://steeltechiot-default-rtdb.firebaseio.com",projectId:"steeltechiot",storageBucket:"steeltechiot.appspot.com",messagingSenderId:"918836431428",appId:"1:918836431428:web:ced95dc23e447f30d68a11",measurementId:"G-XE8XTNRSHB"};const tT=v3(SL);_L(tT);const Mt=gI(tT);function kL(t){let[e,i]=ne.useState(0),[n,s]=ne.useState(0),[a,l]=ne.useState({product_type:"",thickness:"",product_dimensions:""});return ne.useEffect(()=>{let p=vi(Mt,"machines");const f=_r(p,ct("machine_no","==",t.machineNo),Ns("unix_time","desc"),rr(1));let g=Qc(f,m=>{var T,D,P,L,$,N,E;const k=m.docs.map(B=>({id:B.id,...B.data()}));console.log("updatedData",k),l({product_type:(T=k[0])==null?void 0:T.product_type,thickness:(D=k[0])==null?void 0:D.thickness,product_dimensions:(P=k[0])==null?void 0:P.product_dimensions}),i((L=k[0])!=null&&L.count?($=k[0])==null?void 0:$.count:0),s(((N=k[0])==null?void 0:N.weight)==""?0:(E=k[0])==null?void 0:E.weight)});return()=>g()},[]),w.jsx("div",{className:`border-[3px]  rounded-lg ${t!=null&&t.active?"border-[#009245]":"border-[#ED1C24]"}`,children:w.jsxs("div",{className:"flex gap-4 justify-between h-full ",children:[w.jsxs("div",{className:"w-full flex flex-col gap-2 justify-between p-3 items-start",children:[w.jsxs("h2",{className:"text-2xl font-semibold",children:["FM ",t.machineNo]}),w.jsxs("button",{className:"flex gap-2 items-center bg-black text-white px-4 py-2 rounded-md",children:[w.jsx("div",{className:`w-4 h-4 rounded-full ${t!=null&&t.active?"bg-[#009245]":"bg-[#ED1C24]"}`}),w.jsx("p",{children:t!=null&&t.active?"Active":"Idle"})]}),w.jsxs("div",{className:"pt-3",children:[w.jsxs("p",{children:["(Last updated ",t.idleTime," ago)"]}),w.jsxs("p",{children:["Total Product: ",e]}),w.jsxs("p",{children:["Total Weight: ",n," kg"]})]})]}),w.jsxs("div",{className:"min-w-[90px]  bg-black/80 text-white flex flex-col justify-between items-center  px-2 py-6",children:[w.jsx("img",{src:tE,alt:"",className:"w-[60px] h-auto"}),w.jsxs("div",{className:"text-center text-xs",children:[w.jsx("p",{children:a==null?void 0:a.product_type}),w.jsx("p",{children:a==null?void 0:a.thickness}),w.jsx("p",{children:a==null?void 0:a.product_dimensions})]})]})]})})}var Yn=function(){return Yn=Object.assign||function(e){for(var i,n=1,s=arguments.length;n<s;n++){i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Yn.apply(this,arguments)};function Sc(t,e,i){if(i||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}var ci="-ms-",Wh="-moz-",Qt="-webkit-",iT="comm",kp="rule",qg="decl",TL="@import",nT="@keyframes",ML="@layer",sT=Math.abs,ey=String.fromCharCode,c1=Object.assign;function PL(t,e){return sn(t,0)^45?(((e<<2^sn(t,0))<<2^sn(t,1))<<2^sn(t,2))<<2^sn(t,3):0}function rT(t){return t.trim()}function dr(t,e){return(t=e.exec(t))?t[0]:t}function Pt(t,e,i){return t.replace(e,i)}function id(t,e,i){return t.indexOf(e,i)}function sn(t,e){return t.charCodeAt(e)|0}function Ml(t,e,i){return t.slice(e,i)}function Us(t){return t.length}function aT(t){return t.length}function wh(t,e){return e.push(t),t}function EL(t,e){return t.map(e).join("")}function P_(t,e){return t.filter(function(i){return!dr(i,e)})}var Tp=1,Pl=1,oT=0,Cs=0,ji=0,Xl="";function Mp(t,e,i,n,s,a,l,p){return{value:t,root:e,parent:i,type:n,props:s,children:a,line:Tp,column:Pl,length:l,return:"",siblings:p}}function Rr(t,e){return c1(Mp("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function ko(t){for(;t.root;)t=Rr(t.root,{children:[t]});wh(t,t.siblings)}function AL(){return ji}function DL(){return ji=Cs>0?sn(Xl,--Cs):0,Pl--,ji===10&&(Pl=1,Tp--),ji}function Vs(){return ji=Cs<oT?sn(Xl,Cs++):0,Pl++,ji===10&&(Pl=1,Tp++),ji}function Xa(){return sn(Xl,Cs)}function nd(){return Cs}function Pp(t,e){return Ml(Xl,t,e)}function u1(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function IL(t){return Tp=Pl=1,oT=Us(Xl=t),Cs=0,[]}function FL(t){return Xl="",t}function If(t){return rT(Pp(Cs-1,d1(t===91?t+2:t===40?t+1:t)))}function BL(t){for(;(ji=Xa())&&ji<33;)Vs();return u1(t)>2||u1(ji)>3?"":" "}function LL(t,e){for(;--e&&Vs()&&!(ji<48||ji>102||ji>57&&ji<65||ji>70&&ji<97););return Pp(t,nd()+(e<6&&Xa()==32&&Vs()==32))}function d1(t){for(;Vs();)switch(ji){case t:return Cs;case 34:case 39:t!==34&&t!==39&&d1(ji);break;case 40:t===41&&d1(t);break;case 92:Vs();break}return Cs}function NL(t,e){for(;Vs()&&t+ji!==57;)if(t+ji===84&&Xa()===47)break;return"/*"+Pp(e,Cs-1)+"*"+ey(t===47?t:Vs())}function RL(t){for(;!u1(Xa());)Vs();return Pp(t,Cs)}function VL(t){return FL(sd("",null,null,null,[""],t=IL(t),0,[0],t))}function sd(t,e,i,n,s,a,l,p,f){for(var g=0,m=0,k=l,T=0,D=0,P=0,L=1,$=1,N=1,E=0,B="",H=s,U=a,j=n,G=B;$;)switch(P=E,E=Vs()){case 40:if(P!=108&&sn(G,k-1)==58){id(G+=Pt(If(E),"&","&\f"),"&\f",sT(g?p[g-1]:0))!=-1&&(N=-1);break}case 34:case 39:case 91:G+=If(E);break;case 9:case 10:case 13:case 32:G+=BL(P);break;case 92:G+=LL(nd()-1,7);continue;case 47:switch(Xa()){case 42:case 47:wh(OL(NL(Vs(),nd()),e,i,f),f);break;default:G+="/"}break;case 123*L:p[g++]=Us(G)*N;case 125*L:case 59:case 0:switch(E){case 0:case 125:$=0;case 59+m:N==-1&&(G=Pt(G,/\f/g,"")),D>0&&Us(G)-k&&wh(D>32?A_(G+";",n,i,k-1,f):A_(Pt(G," ","")+";",n,i,k-2,f),f);break;case 59:G+=";";default:if(wh(j=E_(G,e,i,g,m,s,p,B,H=[],U=[],k,a),a),E===123)if(m===0)sd(G,e,j,j,H,a,k,p,U);else switch(T===99&&sn(G,3)===110?100:T){case 100:case 108:case 109:case 115:sd(t,j,j,n&&wh(E_(t,j,j,0,0,s,p,B,s,H=[],k,U),U),s,U,k,p,n?H:U);break;default:sd(G,j,j,j,[""],U,0,p,U)}}g=m=D=0,L=N=1,B=G="",k=l;break;case 58:k=1+Us(G),D=P;default:if(L<1){if(E==123)--L;else if(E==125&&L++==0&&DL()==125)continue}switch(G+=ey(E),E*L){case 38:N=m>0?1:(G+="\f",-1);break;case 44:p[g++]=(Us(G)-1)*N,N=1;break;case 64:Xa()===45&&(G+=If(Vs())),T=Xa(),m=k=Us(B=G+=RL(nd())),E++;break;case 45:P===45&&Us(G)==2&&(L=0)}}return a}function E_(t,e,i,n,s,a,l,p,f,g,m,k){for(var T=s-1,D=s===0?a:[""],P=aT(D),L=0,$=0,N=0;L<n;++L)for(var E=0,B=Ml(t,T+1,T=sT($=l[L])),H=t;E<P;++E)(H=rT($>0?D[E]+" "+B:Pt(B,/&\f/g,D[E])))&&(f[N++]=H);return Mp(t,e,i,s===0?kp:p,f,g,m,k)}function OL(t,e,i,n){return Mp(t,e,i,iT,ey(AL()),Ml(t,2,-2),0,n)}function A_(t,e,i,n,s){return Mp(t,e,i,qg,Ml(t,0,n),Ml(t,n+1,-1),n,s)}function lT(t,e,i){switch(PL(t,e)){case 5103:return Qt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qt+t+t;case 4789:return Wh+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Qt+t+Wh+t+ci+t+t;case 5936:switch(sn(t,e+11)){case 114:return Qt+t+ci+Pt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Qt+t+ci+Pt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Qt+t+ci+Pt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Qt+t+ci+t+t;case 6165:return Qt+t+ci+"flex-"+t+t;case 5187:return Qt+t+Pt(t,/(\w+).+(:[^]+)/,Qt+"box-$1$2"+ci+"flex-$1$2")+t;case 5443:return Qt+t+ci+"flex-item-"+Pt(t,/flex-|-self/g,"")+(dr(t,/flex-|baseline/)?"":ci+"grid-row-"+Pt(t,/flex-|-self/g,""))+t;case 4675:return Qt+t+ci+"flex-line-pack"+Pt(t,/align-content|flex-|-self/g,"")+t;case 5548:return Qt+t+ci+Pt(t,"shrink","negative")+t;case 5292:return Qt+t+ci+Pt(t,"basis","preferred-size")+t;case 6060:return Qt+"box-"+Pt(t,"-grow","")+Qt+t+ci+Pt(t,"grow","positive")+t;case 4554:return Qt+Pt(t,/([^-])(transform)/g,"$1"+Qt+"$2")+t;case 6187:return Pt(Pt(Pt(t,/(zoom-|grab)/,Qt+"$1"),/(image-set)/,Qt+"$1"),t,"")+t;case 5495:case 3959:return Pt(t,/(image-set\([^]*)/,Qt+"$1$`$1");case 4968:return Pt(Pt(t,/(.+:)(flex-)?(.*)/,Qt+"box-pack:$3"+ci+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qt+t+t;case 4200:if(!dr(t,/flex-|baseline/))return ci+"grid-column-align"+Ml(t,e)+t;break;case 2592:case 3360:return ci+Pt(t,"template-","")+t;case 4384:case 3616:return i&&i.some(function(n,s){return e=s,dr(n.props,/grid-\w+-end/)})?~id(t+(i=i[e].value),"span",0)?t:ci+Pt(t,"-start","")+t+ci+"grid-row-span:"+(~id(i,"span",0)?dr(i,/\d+/):+dr(i,/\d+/)-+dr(t,/\d+/))+";":ci+Pt(t,"-start","")+t;case 4896:case 4128:return i&&i.some(function(n){return dr(n.props,/grid-\w+-start/)})?t:ci+Pt(Pt(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Pt(t,/(.+)-inline(.+)/,Qt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Us(t)-1-e>6)switch(sn(t,e+1)){case 109:if(sn(t,e+4)!==45)break;case 102:return Pt(t,/(.+:)(.+)-([^]+)/,"$1"+Qt+"$2-$3$1"+Wh+(sn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~id(t,"stretch",0)?lT(Pt(t,"stretch","fill-available"),e,i)+t:t}break;case 5152:case 5920:return Pt(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,a,l,p,f,g){return ci+s+":"+a+g+(l?ci+s+"-span:"+(p?f:+f-+a)+g:"")+t});case 4949:if(sn(t,e+6)===121)return Pt(t,":",":"+Qt)+t;break;case 6444:switch(sn(t,sn(t,14)===45?18:11)){case 120:return Pt(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Qt+(sn(t,14)===45?"inline-":"")+"box$3$1"+Qt+"$2$3$1"+ci+"$2box$3")+t;case 100:return Pt(t,":",":"+ci)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Pt(t,"scroll-","scroll-snap-")+t}return t}function u0(t,e){for(var i="",n=0;n<t.length;n++)i+=e(t[n],n,t,e)||"";return i}function jL(t,e,i,n){switch(t.type){case ML:if(t.children.length)break;case TL:case qg:return t.return=t.return||t.value;case iT:return"";case nT:return t.return=t.value+"{"+u0(t.children,n)+"}";case kp:if(!Us(t.value=t.props.join(",")))return""}return Us(i=u0(t.children,n))?t.return=t.value+"{"+i+"}":""}function WL(t){var e=aT(t);return function(i,n,s,a){for(var l="",p=0;p<e;p++)l+=t[p](i,n,s,a)||"";return l}}function zL(t){return function(e){e.root||(e=e.return)&&t(e)}}function $L(t,e,i,n){if(t.length>-1&&!t.return)switch(t.type){case qg:t.return=lT(t.value,t.length,i);return;case nT:return u0([Rr(t,{value:Pt(t.value,"@","@"+Qt)})],n);case kp:if(t.length)return EL(i=t.props,function(s){switch(dr(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ko(Rr(t,{props:[Pt(s,/:(read-\w+)/,":"+Wh+"$1")]})),ko(Rr(t,{props:[s]})),c1(t,{props:P_(i,n)});break;case"::placeholder":ko(Rr(t,{props:[Pt(s,/:(plac\w+)/,":"+Qt+"input-$1")]})),ko(Rr(t,{props:[Pt(s,/:(plac\w+)/,":"+Wh+"$1")]})),ko(Rr(t,{props:[Pt(s,/:(plac\w+)/,ci+"input-$1")]})),ko(Rr(t,{props:[s]})),c1(t,{props:P_(i,n)});break}return""})}}var HL={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Jn={},El=typeof process<"u"&&Jn!==void 0&&(Jn.REACT_APP_SC_ATTR||Jn.SC_ATTR)||"data-styled",hT="active",cT="data-styled-version",Ep="6.1.13",ty=`/*!sc*/
`,d0=typeof window<"u"&&"HTMLElement"in window,YL=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Jn!==void 0&&Jn.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Jn.REACT_APP_SC_DISABLE_SPEEDY!==""?Jn.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Jn.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Jn!==void 0&&Jn.SC_DISABLE_SPEEDY!==void 0&&Jn.SC_DISABLE_SPEEDY!==""&&Jn.SC_DISABLE_SPEEDY!=="false"&&Jn.SC_DISABLE_SPEEDY),Ap=Object.freeze([]),Al=Object.freeze({});function XL(t,e,i){return i===void 0&&(i=Al),t.theme!==i.theme&&t.theme||e||i.theme}var uT=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),UL=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,GL=/(^-|-$)/g;function D_(t){return t.replace(UL,"-").replace(GL,"")}var KL=/(a)(d)/gi,Fu=52,I_=function(t){return String.fromCharCode(t+(t>25?39:97))};function p1(t){var e,i="";for(e=Math.abs(t);e>Fu;e=e/Fu|0)i=I_(e%Fu)+i;return(I_(e%Fu)+i).replace(KL,"$1-$2")}var Ff,dT=5381,Yo=function(t,e){for(var i=e.length;i;)t=33*t^e.charCodeAt(--i);return t},pT=function(t){return Yo(dT,t)};function fT(t){return p1(pT(t)>>>0)}function QL(t){return t.displayName||t.name||"Component"}function Bf(t){return typeof t=="string"&&!0}var xT=typeof Symbol=="function"&&Symbol.for,mT=xT?Symbol.for("react.memo"):60115,ZL=xT?Symbol.for("react.forward_ref"):60112,JL={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},qL={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},gT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},eN=((Ff={})[ZL]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ff[mT]=gT,Ff);function F_(t){return("type"in(e=t)&&e.type.$$typeof)===mT?gT:"$$typeof"in t?eN[t.$$typeof]:JL;var e}var tN=Object.defineProperty,iN=Object.getOwnPropertyNames,B_=Object.getOwnPropertySymbols,nN=Object.getOwnPropertyDescriptor,sN=Object.getPrototypeOf,L_=Object.prototype;function yT(t,e,i){if(typeof e!="string"){if(L_){var n=sN(e);n&&n!==L_&&yT(t,n,i)}var s=iN(e);B_&&(s=s.concat(B_(e)));for(var a=F_(t),l=F_(e),p=0;p<s.length;++p){var f=s[p];if(!(f in qL||i&&i[f]||l&&f in l||a&&f in a)){var g=nN(e,f);try{tN(t,f,g)}catch{}}}}return t}function Dl(t){return typeof t=="function"}function iy(t){return typeof t=="object"&&"styledComponentId"in t}function Wa(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function f1(t,e){if(t.length===0)return"";for(var i=t[0],n=1;n<t.length;n++)i+=t[n];return i}function kc(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function x1(t,e,i){if(i===void 0&&(i=!1),!i&&!kc(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var n=0;n<e.length;n++)t[n]=x1(t[n],e[n]);else if(kc(e))for(var n in e)t[n]=x1(t[n],e[n]);return t}function ny(t,e){Object.defineProperty(t,"toString",{value:e})}function iu(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var rN=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var i=0,n=0;n<e;n++)i+=this.groupSizes[n];return i},t.prototype.insertRules=function(e,i){if(e>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,a=s;e>=a;)if((a<<=1)<0)throw iu(16,"".concat(e));this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var l=s;l<a;l++)this.groupSizes[l]=0}for(var p=this.indexOfGroup(e+1),f=(l=0,i.length);l<f;l++)this.tag.insertRule(p,i[l])&&(this.groupSizes[e]++,p++)},t.prototype.clearGroup=function(e){if(e<this.length){var i=this.groupSizes[e],n=this.indexOfGroup(e),s=n+i;this.groupSizes[e]=0;for(var a=n;a<s;a++)this.tag.deleteRule(n)}},t.prototype.getGroup=function(e){var i="";if(e>=this.length||this.groupSizes[e]===0)return i;for(var n=this.groupSizes[e],s=this.indexOfGroup(e),a=s+n,l=s;l<a;l++)i+="".concat(this.tag.getRule(l)).concat(ty);return i},t}(),rd=new Map,p0=new Map,ad=1,Bu=function(t){if(rd.has(t))return rd.get(t);for(;p0.has(ad);)ad++;var e=ad++;return rd.set(t,e),p0.set(e,t),e},aN=function(t,e){ad=e+1,rd.set(t,e),p0.set(e,t)},oN="style[".concat(El,"][").concat(cT,'="').concat(Ep,'"]'),lN=new RegExp("^".concat(El,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),hN=function(t,e,i){for(var n,s=i.split(","),a=0,l=s.length;a<l;a++)(n=s[a])&&t.registerName(e,n)},cN=function(t,e){for(var i,n=((i=e.textContent)!==null&&i!==void 0?i:"").split(ty),s=[],a=0,l=n.length;a<l;a++){var p=n[a].trim();if(p){var f=p.match(lN);if(f){var g=0|parseInt(f[1],10),m=f[2];g!==0&&(aN(m,g),hN(t,m,f[3]),t.getTag().insertRules(g,s)),s.length=0}else s.push(p)}}},N_=function(t){for(var e=document.querySelectorAll(oN),i=0,n=e.length;i<n;i++){var s=e[i];s&&s.getAttribute(El)!==hT&&(cN(t,s),s.parentNode&&s.parentNode.removeChild(s))}};function uN(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var vT=function(t){var e=document.head,i=t||e,n=document.createElement("style"),s=function(p){var f=Array.from(p.querySelectorAll("style[".concat(El,"]")));return f[f.length-1]}(i),a=s!==void 0?s.nextSibling:null;n.setAttribute(El,hT),n.setAttribute(cT,Ep);var l=uN();return l&&n.setAttribute("nonce",l),i.insertBefore(n,a),n},dN=function(){function t(e){this.element=vT(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var n=document.styleSheets,s=0,a=n.length;s<a;s++){var l=n[s];if(l.ownerNode===i)return l}throw iu(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,i){try{return this.sheet.insertRule(i,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var i=this.sheet.cssRules[e];return i&&i.cssText?i.cssText:""},t}(),pN=function(){function t(e){this.element=vT(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,i){if(e<=this.length&&e>=0){var n=document.createTextNode(i);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),fN=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,i){return e<=this.length&&(this.rules.splice(e,0,i),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),R_=d0,xN={isServer:!d0,useCSSOMInjection:!YL},bT=function(){function t(e,i,n){e===void 0&&(e=Al),i===void 0&&(i={});var s=this;this.options=Yn(Yn({},xN),e),this.gs=i,this.names=new Map(n),this.server=!!e.isServer,!this.server&&d0&&R_&&(R_=!1,N_(this)),ny(this,function(){return function(a){for(var l=a.getTag(),p=l.length,f="",g=function(k){var T=function(N){return p0.get(N)}(k);if(T===void 0)return"continue";var D=a.names.get(T),P=l.getGroup(k);if(D===void 0||!D.size||P.length===0)return"continue";var L="".concat(El,".g").concat(k,'[id="').concat(T,'"]'),$="";D!==void 0&&D.forEach(function(N){N.length>0&&($+="".concat(N,","))}),f+="".concat(P).concat(L,'{content:"').concat($,'"}').concat(ty)},m=0;m<p;m++)g(m);return f}(s)})}return t.registerId=function(e){return Bu(e)},t.prototype.rehydrate=function(){!this.server&&d0&&N_(this)},t.prototype.reconstructWithOptions=function(e,i){return i===void 0&&(i=!0),new t(Yn(Yn({},this.options),e),this.gs,i&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(i){var n=i.useCSSOMInjection,s=i.target;return i.isServer?new fN(s):n?new dN(s):new pN(s)}(this.options),new rN(e)));var e},t.prototype.hasNameForId=function(e,i){return this.names.has(e)&&this.names.get(e).has(i)},t.prototype.registerName=function(e,i){if(Bu(e),this.names.has(e))this.names.get(e).add(i);else{var n=new Set;n.add(i),this.names.set(e,n)}},t.prototype.insertRules=function(e,i,n){this.registerName(e,i),this.getTag().insertRules(Bu(e),n)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Bu(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),mN=/&/g,gN=/^\s*\/\/.*$/gm;function _T(t,e){return t.map(function(i){return i.type==="rule"&&(i.value="".concat(e," ").concat(i.value),i.value=i.value.replaceAll(",",",".concat(e," ")),i.props=i.props.map(function(n){return"".concat(e," ").concat(n)})),Array.isArray(i.children)&&i.type!=="@keyframes"&&(i.children=_T(i.children,e)),i})}function yN(t){var e,i,n,s=Al,a=s.options,l=a===void 0?Al:a,p=s.plugins,f=p===void 0?Ap:p,g=function(T,D,P){return P.startsWith(i)&&P.endsWith(i)&&P.replaceAll(i,"").length>0?".".concat(e):T},m=f.slice();m.push(function(T){T.type===kp&&T.value.includes("&")&&(T.props[0]=T.props[0].replace(mN,i).replace(n,g))}),l.prefix&&m.push($L),m.push(jL);var k=function(T,D,P,L){D===void 0&&(D=""),P===void 0&&(P=""),L===void 0&&(L="&"),e=L,i=D,n=new RegExp("\\".concat(i,"\\b"),"g");var $=T.replace(gN,""),N=VL(P||D?"".concat(P," ").concat(D," { ").concat($," }"):$);l.namespace&&(N=_T(N,l.namespace));var E=[];return u0(N,WL(m.concat(zL(function(B){return E.push(B)})))),E};return k.hash=f.length?f.reduce(function(T,D){return D.name||iu(15),Yo(T,D.name)},dT).toString():"",k}var vN=new bT,m1=yN(),CT=is.createContext({shouldForwardProp:void 0,styleSheet:vN,stylis:m1});CT.Consumer;is.createContext(void 0);function V_(){return ne.useContext(CT)}var wT=function(){function t(e,i){var n=this;this.inject=function(s,a){a===void 0&&(a=m1);var l=n.name+a.hash;s.hasNameForId(n.id,l)||s.insertRules(n.id,l,a(n.rules,l,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=i,ny(this,function(){throw iu(12,String(n.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=m1),this.name+e.hash},t}(),bN=function(t){return t>="A"&&t<="Z"};function O_(t){for(var e="",i=0;i<t.length;i++){var n=t[i];if(i===1&&n==="-"&&t[0]==="-")return t;bN(n)?e+="-"+n.toLowerCase():e+=n}return e.startsWith("ms-")?"-"+e:e}var ST=function(t){return t==null||t===!1||t===""},kT=function(t){var e,i,n=[];for(var s in t){var a=t[s];t.hasOwnProperty(s)&&!ST(a)&&(Array.isArray(a)&&a.isCss||Dl(a)?n.push("".concat(O_(s),":"),a,";"):kc(a)?n.push.apply(n,Sc(Sc(["".concat(s," {")],kT(a),!1),["}"],!1)):n.push("".concat(O_(s),": ").concat((e=s,(i=a)==null||typeof i=="boolean"||i===""?"":typeof i!="number"||i===0||e in HL||e.startsWith("--")?String(i).trim():"".concat(i,"px")),";")))}return n};function Ua(t,e,i,n){if(ST(t))return[];if(iy(t))return[".".concat(t.styledComponentId)];if(Dl(t)){if(!Dl(a=t)||a.prototype&&a.prototype.isReactComponent||!e)return[t];var s=t(e);return Ua(s,e,i,n)}var a;return t instanceof wT?i?(t.inject(i,n),[t.getName(n)]):[t]:kc(t)?kT(t):Array.isArray(t)?Array.prototype.concat.apply(Ap,t.map(function(l){return Ua(l,e,i,n)})):[t.toString()]}function _N(t){for(var e=0;e<t.length;e+=1){var i=t[e];if(Dl(i)&&!iy(i))return!1}return!0}var CN=pT(Ep),wN=function(){function t(e,i,n){this.rules=e,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&_N(e),this.componentId=i,this.baseHash=Yo(CN,i),this.baseStyle=n,bT.registerId(i)}return t.prototype.generateAndInjectStyles=function(e,i,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,i,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&i.hasNameForId(this.componentId,this.staticRulesId))s=Wa(s,this.staticRulesId);else{var a=f1(Ua(this.rules,e,i,n)),l=p1(Yo(this.baseHash,a)>>>0);if(!i.hasNameForId(this.componentId,l)){var p=n(a,".".concat(l),void 0,this.componentId);i.insertRules(this.componentId,l,p)}s=Wa(s,l),this.staticRulesId=l}else{for(var f=Yo(this.baseHash,n.hash),g="",m=0;m<this.rules.length;m++){var k=this.rules[m];if(typeof k=="string")g+=k;else if(k){var T=f1(Ua(k,e,i,n));f=Yo(f,T+m),g+=T}}if(g){var D=p1(f>>>0);i.hasNameForId(this.componentId,D)||i.insertRules(this.componentId,D,n(g,".".concat(D),void 0,this.componentId)),s=Wa(s,D)}}return s},t}(),TT=is.createContext(void 0);TT.Consumer;var Lf={};function SN(t,e,i){var n=iy(t),s=t,a=!Bf(t),l=e.attrs,p=l===void 0?Ap:l,f=e.componentId,g=f===void 0?function(H,U){var j=typeof H!="string"?"sc":D_(H);Lf[j]=(Lf[j]||0)+1;var G="".concat(j,"-").concat(fT(Ep+j+Lf[j]));return U?"".concat(U,"-").concat(G):G}(e.displayName,e.parentComponentId):f,m=e.displayName,k=m===void 0?function(H){return Bf(H)?"styled.".concat(H):"Styled(".concat(QL(H),")")}(t):m,T=e.displayName&&e.componentId?"".concat(D_(e.displayName),"-").concat(e.componentId):e.componentId||g,D=n&&s.attrs?s.attrs.concat(p).filter(Boolean):p,P=e.shouldForwardProp;if(n&&s.shouldForwardProp){var L=s.shouldForwardProp;if(e.shouldForwardProp){var $=e.shouldForwardProp;P=function(H,U){return L(H,U)&&$(H,U)}}else P=L}var N=new wN(i,T,n?s.componentStyle:void 0);function E(H,U){return function(j,G,Z){var he=j.attrs,ee=j.componentStyle,re=j.defaultProps,we=j.foldedComponentIds,de=j.styledComponentId,Re=j.target,He=is.useContext(TT),Ze=V_(),et=j.shouldForwardProp||Ze.shouldForwardProp,Pe=XL(G,He,re)||Al,Le=function(ae,fe,ye){for(var Se,Ee=Yn(Yn({},fe),{className:void 0,theme:ye}),tt=0;tt<ae.length;tt+=1){var nt=Dl(Se=ae[tt])?Se(Ee):Se;for(var xt in nt)Ee[xt]=xt==="className"?Wa(Ee[xt],nt[xt]):xt==="style"?Yn(Yn({},Ee[xt]),nt[xt]):nt[xt]}return fe.className&&(Ee.className=Wa(Ee.className,fe.className)),Ee}(he,G,Pe),Be=Le.as||Re,X={};for(var _e in Le)Le[_e]===void 0||_e[0]==="$"||_e==="as"||_e==="theme"&&Le.theme===Pe||(_e==="forwardedAs"?X.as=Le.forwardedAs:et&&!et(_e,Be)||(X[_e]=Le[_e]));var me=function(ae,fe){var ye=V_(),Se=ae.generateAndInjectStyles(fe,ye.styleSheet,ye.stylis);return Se}(ee,Le),W=Wa(we,de);return me&&(W+=" "+me),Le.className&&(W+=" "+Le.className),X[Bf(Be)&&!uT.has(Be)?"class":"className"]=W,X.ref=Z,ne.createElement(Be,X)}(B,H,U)}E.displayName=k;var B=is.forwardRef(E);return B.attrs=D,B.componentStyle=N,B.displayName=k,B.shouldForwardProp=P,B.foldedComponentIds=n?Wa(s.foldedComponentIds,s.styledComponentId):"",B.styledComponentId=T,B.target=n?s.target:t,Object.defineProperty(B,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(H){this._foldedDefaultProps=n?function(U){for(var j=[],G=1;G<arguments.length;G++)j[G-1]=arguments[G];for(var Z=0,he=j;Z<he.length;Z++)x1(U,he[Z],!0);return U}({},s.defaultProps,H):H}}),ny(B,function(){return".".concat(B.styledComponentId)}),a&&yT(B,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),B}function j_(t,e){for(var i=[t[0]],n=0,s=e.length;n<s;n+=1)i.push(e[n],t[n+1]);return i}var W_=function(t){return Object.assign(t,{isCss:!0})};function MT(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(Dl(t)||kc(t))return W_(Ua(j_(Ap,Sc([t],e,!0))));var n=t;return e.length===0&&n.length===1&&typeof n[0]=="string"?Ua(n):W_(Ua(j_(n,e)))}function g1(t,e,i){if(i===void 0&&(i=Al),!e)throw iu(1,e);var n=function(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];return t(e,i,MT.apply(void 0,Sc([s],a,!1)))};return n.attrs=function(s){return g1(t,e,Yn(Yn({},i),{attrs:Array.prototype.concat(i.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return g1(t,e,Yn(Yn({},i),s))},n}var PT=function(t){return g1(SN,t)},xo=PT;uT.forEach(function(t){xo[t]=PT(t)});function sy(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=f1(MT.apply(void 0,Sc([t],e,!1))),s=fT(n);return new wT(s,n)}const kN="#4fa94d",TN={"aria-busy":!0,role:"progressbar"},MN=xo.div`
  display: ${t=>t.$visible?"flex":"none"};
`,PN="http://www.w3.org/2000/svg",ks=242.776657104492,EN=1.6,AN=sy`
12.5% {
  stroke-dasharray: ${ks*.14}px, ${ks}px;
  stroke-dashoffset: -${ks*.11}px;
}
43.75% {
  stroke-dasharray: ${ks*.35}px, ${ks}px;
  stroke-dashoffset: -${ks*.35}px;
}
100% {
  stroke-dasharray: ${ks*.01}px, ${ks}px;
  stroke-dashoffset: -${ks*.99}px;
}
`;xo.path`
  stroke-dasharray: ${ks*.01}px, ${ks};
  stroke-dashoffset: 0;
  animation: ${AN} ${EN}s linear infinite;
`;const DN=sy`
to {
   transform: rotate(360deg);
 }
`;xo.svg`
  animation: ${DN} 0.75s steps(12, end) infinite;
  animation-duration: 0.75s;
`;xo.polyline`
  stroke-width: ${t=>t.width}px;
  stroke-linecap: round;

  &:nth-child(12n + 0) {
    stroke-opacity: 0.08;
  }

  &:nth-child(12n + 1) {
    stroke-opacity: 0.17;
  }

  &:nth-child(12n + 2) {
    stroke-opacity: 0.25;
  }

  &:nth-child(12n + 3) {
    stroke-opacity: 0.33;
  }

  &:nth-child(12n + 4) {
    stroke-opacity: 0.42;
  }

  &:nth-child(12n + 5) {
    stroke-opacity: 0.5;
  }

  &:nth-child(12n + 6) {
    stroke-opacity: 0.58;
  }

  &:nth-child(12n + 7) {
    stroke-opacity: 0.66;
  }

  &:nth-child(12n + 8) {
    stroke-opacity: 0.75;
  }

  &:nth-child(12n + 9) {
    stroke-opacity: 0.83;
  }

  &:nth-child(12n + 11) {
    stroke-opacity: 0.92;
  }
`;const IN="-3 -4 39 39",FN="16,0 32,32 0,32",BN=sy`
to {
   stroke-dashoffset: 136;
 }
`,LN=xo.polygon`
  stroke-dasharray: 17;
  animation: ${BN} 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;
`,NN=xo.svg`
  transform-origin: 50% 65%;
`,ry=({height:t=80,width:e=80,color:i=kN,ariaLabel:n="triangle-loading",wrapperStyle:s,wrapperClass:a,visible:l=!0})=>w.jsx(MN,{style:s,$visible:l,className:`${a}`,"data-testid":"triangle-loading","aria-label":n,...TN,children:w.jsx(NN,{id:"triangle",width:e,height:t,xmlns:PN,viewBox:IN,"data-testid":"triangle-svg",children:w.jsx(LN,{fill:"transparent",stroke:i,strokeWidth:"1",points:FN})})});function RN(){var g,m;let[t,e]=ne.useState(!1),[i,n]=ne.useState(!1),[s,a]=ne.useState([]),[l,p]=ne.useState("all");async function f(){const k=Xi(Mt,"information","info");return(await Qn(k)).data()}return ne.useEffect(()=>{f().then(T=>{const D=vi(Mt,"machineStatus");let P=(T==null?void 0:T.forming_machine)||[],L=P.length,$=0;if(L===0){e(!0),n(!1);return}P.sort((N,E)=>parseInt(N,10)-parseInt(E,10)),P.forEach(N=>{const E=_r(D,ct("machine_no","==",N),Ns("time_end","desc"),rr(1));gn(E).then(B=>{let H=!1,U="N/A";B.forEach(j=>{let G=j.data(),Z=Math.floor(new Date().getTime()/1e3)-(G==null?void 0:G.time_end),he=Math.floor(Z/3600),ee=Math.floor(Z%3600/60),re=Z%60;U=`${he?`${he}h`:""}${ee?` ${ee}m`:""} ${re}s`,Z<=600&&(H=!0)}),a(j=>[...j,{meta:"forming",machineNo:`${N}`,active:H,idleTime:U}]),$+=1,$===L&&(e(!0),n(P.length!==0))})})})},[]),console.log("formingMachine",s),w.jsxs("div",{className:"",children:[w.jsx(eE,{setPortion:p,portion:l}),t?i?w.jsx(w.Fragment,{children:w.jsx("div",{className:"grid grid-cols-4 gap-2",children:(m=(g=s==null?void 0:s.slice(0,16))==null?void 0:g.filter(k=>l==="all"?k:l==="active"?k==null?void 0:k.active:!(k!=null&&k.active)))==null?void 0:m.map(k=>w.jsx(kL,{meta:"forming",machineNo:k==null?void 0:k.machineNo,active:k==null?void 0:k.active,idleTime:k==null?void 0:k.idleTime}))})}):w.jsx("h1",{children:"Please Wait"}):w.jsx("div",{className:"min-w-screen min-h-screen flex justify-center items-center",children:w.jsx(ry,{height:"80",width:"80",color:"#4fa94d",ariaLabel:"triangle-loading",visible:!0})})]})}const ET="/assets/Steeltech_Logo-BG1Fi9AY.svg",Nf="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.54688%2010.2188C7.54688%209.95987%207.75674%209.75%208.01562%209.75H10.5938C10.6863%209.75%2010.7768%209.77739%2010.8538%209.82873L12%2010.5929L13.1462%209.82873C13.2232%209.77739%2013.3137%209.75%2013.4062%209.75H15.9844C16.2433%209.75%2016.4531%209.95987%2016.4531%2010.2188C16.4531%2010.4776%2016.2433%2010.6875%2015.9844%2010.6875H13.5482L12.26%2011.5463C12.1026%2011.6512%2011.8974%2011.6512%2011.74%2011.5463L10.4518%2010.6875H8.01562C7.75674%2010.6875%207.54688%2010.4776%207.54688%2010.2188Z'%20fill='black'/%3e%3cpath%20d='M13.1484%2019.3125C12.8896%2019.3125%2012.6797%2019.5224%2012.6797%2019.7812C12.6797%2020.0401%2012.8896%2020.25%2013.1484%2020.25H15.2578C15.5167%2020.25%2015.7266%2020.0401%2015.7266%2019.7812C15.7266%2019.5224%2015.5167%2019.3125%2015.2578%2019.3125H13.1484Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.2734%2017.4375C11.0146%2017.4375%2010.8047%2017.6474%2010.8047%2017.9062V21.6562C10.8047%2021.9151%2011.0146%2022.125%2011.2734%2022.125H17.1328C17.3917%2022.125%2017.6016%2021.9151%2017.6016%2021.6562V17.9062C17.6016%2017.6474%2017.3917%2017.4375%2017.1328%2017.4375H11.2734ZM11.7422%2021.1875V18.375H16.6641V21.1875H11.7422Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M7.89844%200C7.63955%200%207.42969%200.209867%207.42969%200.46875V1.28906H2.74219C2.4833%201.28906%202.27344%201.49893%202.27344%201.75781V3.63281C2.27344%203.8917%202.4833%204.10156%202.74219%204.10156H4.5V14.1562C4.5%2014.4151%204.70987%2014.625%204.96875%2014.625H5.67188V15.5625H4.96875C4.70987%2015.5625%204.5%2015.7724%204.5%2016.0312V23.5312C4.5%2023.7901%204.70987%2024%204.96875%2024H19.0312C19.2901%2024%2019.5%2023.7901%2019.5%2023.5312V16.0312C19.5%2015.7724%2019.2901%2015.5625%2019.0312%2015.5625H18.3281V14.625H19.0312C19.2901%2014.625%2019.5%2014.4151%2019.5%2014.1562V4.10156H21.2578C21.5167%204.10156%2021.7266%203.8917%2021.7266%203.63281V1.75781C21.7266%201.49893%2021.5167%201.28906%2021.2578%201.28906H16.5703V0.46875C16.5703%200.209867%2016.3604%200%2016.1016%200H7.89844ZM18.5625%204.10156H16.5703V4.92188C16.5703%205.18076%2016.3604%205.39062%2016.1016%205.39062H13.875V7.45312C13.875%207.57745%2013.8256%207.69667%2013.7377%207.78458L12.3315%209.19083C12.1484%209.37389%2011.8516%209.37389%2011.6685%209.19083L10.2623%207.78458C10.1744%207.69667%2010.125%207.57745%2010.125%207.45312V5.39062H7.89844C7.63955%205.39062%207.42969%205.18076%207.42969%204.92188V4.10156H5.4375V13.6875H7.54688V12.5156C7.54688%2012.2567%207.75674%2012.0469%208.01562%2012.0469H10.5938C10.6863%2012.0469%2010.7768%2012.0743%2010.8538%2012.1256L12%2012.8898L13.1462%2012.1256C13.2232%2012.0743%2013.3137%2012.0469%2013.4062%2012.0469H15.9844C16.2433%2012.0469%2016.4531%2012.2567%2016.4531%2012.5156V13.6875H18.5625V4.10156ZM20.7891%203.16406V2.22656H16.5703V3.16406H20.7891ZM15.6328%200.9375H8.36719V4.45312H15.6328V0.9375ZM7.42969%203.16406V2.22656H3.21094V3.16406H7.42969ZM12.9375%205.39062H11.0625V7.25896L12%208.19646L12.9375%207.25896V5.39062ZM15.5156%2012.9844H13.5482L12.26%2013.8431C12.1026%2013.9481%2011.8974%2013.9481%2011.74%2013.8431L10.4518%2012.9844H8.48438V15.5625H15.5156V12.9844ZM17.3906%2014.625H16.4531V15.5625H17.3906V14.625ZM6.60938%2015.5625H7.54688V14.625H6.60938V15.5625ZM5.4375%2016.5V23.0625H18.5625V16.5H5.4375Z'%20fill='black'/%3e%3c/svg%3e",VN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_818_5583)'%3e%3cpath%20d='M8.15625%2011.25H3.09375C1.38783%2011.25%200%209.86217%200%208.15625V3.09375C0%201.38783%201.38783%200%203.09375%200H8.15625C9.86217%200%2011.25%201.38783%2011.25%203.09375V8.15625C11.25%209.86217%209.86217%2011.25%208.15625%2011.25ZM3.09375%201.5C2.21494%201.5%201.5%202.21494%201.5%203.09375V8.15625C1.5%209.03506%202.21494%209.75%203.09375%209.75H8.15625C9.03506%209.75%209.75%209.03506%209.75%208.15625V3.09375C9.75%202.21494%209.03506%201.5%208.15625%201.5H3.09375ZM20.9062%2011.25H15.8438C14.1378%2011.25%2012.75%209.86217%2012.75%208.15625V3.09375C12.75%201.38783%2014.1378%200%2015.8438%200H20.9062C22.6122%200%2024%201.38783%2024%203.09375V8.15625C24%209.86217%2022.6122%2011.25%2020.9062%2011.25ZM15.8438%201.5C14.9649%201.5%2014.25%202.21494%2014.25%203.09375V8.15625C14.25%209.03506%2014.9649%209.75%2015.8438%209.75H20.9062C21.7851%209.75%2022.5%209.03506%2022.5%208.15625V3.09375C22.5%202.21494%2021.7851%201.5%2020.9062%201.5H15.8438ZM18.375%2024C15.2734%2024%2012.75%2021.4766%2012.75%2018.375C12.75%2015.2734%2015.2734%2012.75%2018.375%2012.75C21.4766%2012.75%2024%2015.2734%2024%2018.375C24%2021.4766%2021.4766%2024%2018.375%2024ZM18.375%2014.25C16.1005%2014.25%2014.25%2016.1005%2014.25%2018.375C14.25%2020.6495%2016.1005%2022.5%2018.375%2022.5C20.6495%2022.5%2022.5%2020.6495%2022.5%2018.375C22.5%2016.1005%2020.6495%2014.25%2018.375%2014.25ZM8.15625%2024H3.09375C1.38783%2024%200%2022.6122%200%2020.9062V15.8438C0%2014.1378%201.38783%2012.75%203.09375%2012.75H8.15625C9.86217%2012.75%2011.25%2014.1378%2011.25%2015.8438V20.9062C11.25%2022.6122%209.86217%2024%208.15625%2024ZM3.09375%2014.25C2.21494%2014.25%201.5%2014.9649%201.5%2015.8438V20.9062C1.5%2021.7851%202.21494%2022.5%203.09375%2022.5H8.15625C9.03506%2022.5%209.75%2021.7851%209.75%2020.9062V15.8438C9.75%2014.9649%209.03506%2014.25%208.15625%2014.25H3.09375Z'%20fill='black'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_818_5583'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",ON="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_818_5582)'%3e%3cpath%20d='M8.15625%2011.25H3.09375C1.38783%2011.25%200%209.86217%200%208.15625V3.09375C0%201.38783%201.38783%200%203.09375%200H8.15625C9.86217%200%2011.25%201.38783%2011.25%203.09375V8.15625C11.25%209.86217%209.86217%2011.25%208.15625%2011.25ZM3.09375%201.5C2.21494%201.5%201.5%202.21494%201.5%203.09375V8.15625C1.5%209.03506%202.21494%209.75%203.09375%209.75H8.15625C9.03506%209.75%209.75%209.03506%209.75%208.15625V3.09375C9.75%202.21494%209.03506%201.5%208.15625%201.5H3.09375ZM20.9062%2011.25H15.8438C14.1378%2011.25%2012.75%209.86217%2012.75%208.15625V3.09375C12.75%201.38783%2014.1378%200%2015.8438%200H20.9062C22.6122%200%2024%201.38783%2024%203.09375V8.15625C24%209.86217%2022.6122%2011.25%2020.9062%2011.25ZM15.8438%201.5C14.9649%201.5%2014.25%202.21494%2014.25%203.09375V8.15625C14.25%209.03506%2014.9649%209.75%2015.8438%209.75H20.9062C21.7851%209.75%2022.5%209.03506%2022.5%208.15625V3.09375C22.5%202.21494%2021.7851%201.5%2020.9062%201.5H15.8438ZM18.375%2024C15.2734%2024%2012.75%2021.4766%2012.75%2018.375C12.75%2015.2734%2015.2734%2012.75%2018.375%2012.75C21.4766%2012.75%2024%2015.2734%2024%2018.375C24%2021.4766%2021.4766%2024%2018.375%2024ZM18.375%2014.25C16.1005%2014.25%2014.25%2016.1005%2014.25%2018.375C14.25%2020.6495%2016.1005%2022.5%2018.375%2022.5C20.6495%2022.5%2022.5%2020.6495%2022.5%2018.375C22.5%2016.1005%2020.6495%2014.25%2018.375%2014.25ZM8.15625%2024H3.09375C1.38783%2024%200%2022.6122%200%2020.9062V15.8438C0%2014.1378%201.38783%2012.75%203.09375%2012.75H8.15625C9.86217%2012.75%2011.25%2014.1378%2011.25%2015.8438V20.9062C11.25%2022.6122%209.86217%2024%208.15625%2024ZM3.09375%2014.25C2.21494%2014.25%201.5%2014.9649%201.5%2015.8438V20.9062C1.5%2021.7851%202.21494%2022.5%203.09375%2022.5H8.15625C9.03506%2022.5%209.75%2021.7851%209.75%2020.9062V15.8438C9.75%2014.9649%209.03506%2014.25%208.15625%2014.25H3.09375Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_818_5582'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",jN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.25%2015H12.75V18H11.25V15ZM15%2013.5H16.5V18H15V13.5ZM7.5%2010.5H9V18H7.5V10.5Z'%20fill='black'/%3e%3cpath%20d='M18.75%203.75H16.5V3C16.5%202.60218%2016.342%202.22064%2016.0607%201.93934C15.7794%201.65804%2015.3978%201.5%2015%201.5H9C8.60218%201.5%208.22064%201.65804%207.93934%201.93934C7.65804%202.22064%207.5%202.60218%207.5%203V3.75H5.25C4.85218%203.75%204.47064%203.90804%204.18934%204.18934C3.90804%204.47064%203.75%204.85218%203.75%205.25V21C3.75%2021.3978%203.90804%2021.7794%204.18934%2022.0607C4.47064%2022.342%204.85218%2022.5%205.25%2022.5H18.75C19.1478%2022.5%2019.5294%2022.342%2019.8107%2022.0607C20.092%2021.7794%2020.25%2021.3978%2020.25%2021V5.25C20.25%204.85218%2020.092%204.47064%2019.8107%204.18934C19.5294%203.90804%2019.1478%203.75%2018.75%203.75ZM9%203H15V6H9V3ZM18.75%2021H5.25V5.25H7.5V7.5H16.5V5.25H18.75V21Z'%20fill='black'/%3e%3c/svg%3e",WN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.25%2015H12.75V18H11.25V15ZM15%2013.5H16.5V18H15V13.5ZM7.5%2010.5H9V18H7.5V10.5Z'%20fill='white'/%3e%3cpath%20d='M18.75%203.75H16.5V3C16.5%202.60218%2016.342%202.22064%2016.0607%201.93934C15.7794%201.65804%2015.3978%201.5%2015%201.5H9C8.60218%201.5%208.22064%201.65804%207.93934%201.93934C7.65804%202.22064%207.5%202.60218%207.5%203V3.75H5.25C4.85218%203.75%204.47064%203.90804%204.18934%204.18934C3.90804%204.47064%203.75%204.85218%203.75%205.25V21C3.75%2021.3978%203.90804%2021.7794%204.18934%2022.0607C4.47064%2022.342%204.85218%2022.5%205.25%2022.5H18.75C19.1478%2022.5%2019.5294%2022.342%2019.8107%2022.0607C20.092%2021.7794%2020.25%2021.3978%2020.25%2021V5.25C20.25%204.85218%2020.092%204.47064%2019.8107%204.18934C19.5294%203.90804%2019.1478%203.75%2018.75%203.75ZM9%203H15V6H9V3ZM18.75%2021H5.25V5.25H7.5V7.5H16.5V5.25H18.75V21Z'%20fill='white'/%3e%3c/svg%3e",z_="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.54688%2010.2188C7.54688%209.95987%207.75674%209.75%208.01562%209.75H10.5938C10.6863%209.75%2010.7768%209.77739%2010.8538%209.82873L12%2010.5929L13.1462%209.82873C13.2232%209.77739%2013.3137%209.75%2013.4062%209.75H15.9844C16.2433%209.75%2016.4531%209.95987%2016.4531%2010.2188C16.4531%2010.4776%2016.2433%2010.6875%2015.9844%2010.6875H13.5482L12.26%2011.5463C12.1026%2011.6512%2011.8974%2011.6512%2011.74%2011.5463L10.4518%2010.6875H8.01562C7.75674%2010.6875%207.54688%2010.4776%207.54688%2010.2188Z'%20fill='white'/%3e%3cpath%20d='M13.1484%2019.3125C12.8896%2019.3125%2012.6797%2019.5224%2012.6797%2019.7812C12.6797%2020.0401%2012.8896%2020.25%2013.1484%2020.25H15.2578C15.5167%2020.25%2015.7266%2020.0401%2015.7266%2019.7812C15.7266%2019.5224%2015.5167%2019.3125%2015.2578%2019.3125H13.1484Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.2734%2017.4375C11.0146%2017.4375%2010.8047%2017.6474%2010.8047%2017.9062V21.6562C10.8047%2021.9151%2011.0146%2022.125%2011.2734%2022.125H17.1328C17.3917%2022.125%2017.6016%2021.9151%2017.6016%2021.6562V17.9062C17.6016%2017.6474%2017.3917%2017.4375%2017.1328%2017.4375H11.2734ZM11.7422%2021.1875V18.375H16.6641V21.1875H11.7422Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M7.89844%200C7.63955%200%207.42969%200.209867%207.42969%200.46875V1.28906H2.74219C2.4833%201.28906%202.27344%201.49893%202.27344%201.75781V3.63281C2.27344%203.8917%202.4833%204.10156%202.74219%204.10156H4.5V14.1562C4.5%2014.4151%204.70987%2014.625%204.96875%2014.625H5.67188V15.5625H4.96875C4.70987%2015.5625%204.5%2015.7724%204.5%2016.0312V23.5312C4.5%2023.7901%204.70987%2024%204.96875%2024H19.0312C19.2901%2024%2019.5%2023.7901%2019.5%2023.5312V16.0312C19.5%2015.7724%2019.2901%2015.5625%2019.0312%2015.5625H18.3281V14.625H19.0312C19.2901%2014.625%2019.5%2014.4151%2019.5%2014.1562V4.10156H21.2578C21.5167%204.10156%2021.7266%203.8917%2021.7266%203.63281V1.75781C21.7266%201.49893%2021.5167%201.28906%2021.2578%201.28906H16.5703V0.46875C16.5703%200.209867%2016.3604%200%2016.1016%200H7.89844ZM18.5625%204.10156H16.5703V4.92188C16.5703%205.18076%2016.3604%205.39062%2016.1016%205.39062H13.875V7.45312C13.875%207.57745%2013.8256%207.69667%2013.7377%207.78458L12.3315%209.19083C12.1484%209.37389%2011.8516%209.37389%2011.6685%209.19083L10.2623%207.78458C10.1744%207.69667%2010.125%207.57745%2010.125%207.45312V5.39062H7.89844C7.63955%205.39062%207.42969%205.18076%207.42969%204.92188V4.10156H5.4375V13.6875H7.54688V12.5156C7.54688%2012.2567%207.75674%2012.0469%208.01562%2012.0469H10.5938C10.6863%2012.0469%2010.7768%2012.0743%2010.8538%2012.1256L12%2012.8898L13.1462%2012.1256C13.2232%2012.0743%2013.3137%2012.0469%2013.4062%2012.0469H15.9844C16.2433%2012.0469%2016.4531%2012.2567%2016.4531%2012.5156V13.6875H18.5625V4.10156ZM20.7891%203.16406V2.22656H16.5703V3.16406H20.7891ZM15.6328%200.9375H8.36719V4.45312H15.6328V0.9375ZM7.42969%203.16406V2.22656H3.21094V3.16406H7.42969ZM12.9375%205.39062H11.0625V7.25896L12%208.19646L12.9375%207.25896V5.39062ZM15.5156%2012.9844H13.5482L12.26%2013.8431C12.1026%2013.9481%2011.8974%2013.9481%2011.74%2013.8431L10.4518%2012.9844H8.48438V15.5625H15.5156V12.9844ZM17.3906%2014.625H16.4531V15.5625H17.3906V14.625ZM6.60938%2015.5625H7.54688V14.625H6.60938V15.5625ZM5.4375%2016.5V23.0625H18.5625V16.5H5.4375Z'%20fill='white'/%3e%3c/svg%3e",zN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%207C4%204.23858%206.23858%202%209%202C11.7614%202%2014%204.23858%2014%207C14%209.76142%2011.7614%2012%209%2012C6.23858%2012%204%209.76142%204%207ZM9%204C7.34315%204%206%205.34315%206%207C6%208.65685%207.34315%2010%209%2010C10.6569%2010%2012%208.65685%2012%207C12%205.34315%2010.6569%204%209%204Z'%20fill='black'/%3e%3cpath%20d='M2.46447%2015.4645C3.40215%2014.5268%204.67392%2014%206%2014H12C13.3261%2014%2014.5979%2014.5268%2015.5355%2015.4645C16.4732%2016.4021%2017%2017.6739%2017%2019V21C17%2021.5523%2016.5523%2022%2016%2022C15.4477%2022%2015%2021.5523%2015%2021V19C15%2018.2043%2014.6839%2017.4413%2014.1213%2016.8787C13.5587%2016.3161%2012.7957%2016%2012%2016H6C5.20435%2016%204.44129%2016.3161%203.87868%2016.8787C3.31607%2017.4413%203%2018.2043%203%2019V21C3%2021.5523%202.55228%2022%202%2022C1.44772%2022%201%2021.5523%201%2021V19C1%2017.6739%201.52678%2016.4021%202.46447%2015.4645Z'%20fill='black'/%3e%3cpath%20d='M16.248%202.16125C15.713%202.02427%2015.1682%202.34694%2015.0313%202.88197C14.8943%203.41699%2015.2169%203.96177%2015.752%204.09875C16.3973%204.26398%2016.9692%204.63928%2017.3777%205.16549C17.7861%205.6917%2018.0078%206.33888%2018.0078%207.00501C18.0078%207.67113%2017.7861%208.31831%2017.3777%208.84452C16.9692%209.37073%2016.3973%209.74603%2015.752%209.91125C15.2169%2010.0482%2014.8943%2010.593%2015.0313%2011.128C15.1682%2011.6631%2015.713%2011.9857%2016.248%2011.8488C17.3236%2011.5734%2018.2768%2010.9479%2018.9576%2010.0709C19.6383%209.19386%2020.0078%208.11522%2020.0078%207.00501C20.0078%205.89479%2019.6383%204.81615%2018.9576%203.93914C18.2768%203.06213%2017.3236%202.43663%2016.248%202.16125Z'%20fill='black'/%3e%3cpath%20d='M19.25%2014.1618C18.7153%2014.0237%2018.1698%2014.3453%2018.0318%2014.88C17.8937%2015.4148%2018.2153%2015.9602%2018.75%2016.0983C19.3936%2016.2644%2019.9638%2016.6396%2020.371%2017.165C20.7782%2017.6902%2020.9994%2018.3358%2021%2019.0003L21%2019.0008L21%2021C21%2021.5523%2021.4477%2022%2022%2022C22.5523%2022%2023%2021.5523%2023%2021V18.9993C22.9992%2017.8914%2022.6305%2016.8152%2021.9517%2015.9397C21.273%2015.0641%2020.3227%2014.4387%2019.25%2014.1618Z'%20fill='black'/%3e%3c/svg%3e",$N="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%207C4%204.23857%206.23858%202%209%202C11.7614%202%2014%204.23857%2014%207C14%209.76142%2011.7614%2012%209%2012C6.23858%2012%204%209.76142%204%207ZM9%204C7.34315%204%206%205.34314%206%207C6%208.65685%207.34315%2010%209%2010C10.6569%2010%2012%208.65685%2012%207C12%205.34314%2010.6569%204%209%204Z'%20fill='white'/%3e%3cpath%20d='M2.46447%2015.4645C3.40215%2014.5268%204.67392%2014%206%2014H12C13.3261%2014%2014.5979%2014.5268%2015.5355%2015.4645C16.4732%2016.4021%2017%2017.6739%2017%2019V21C17%2021.5523%2016.5523%2022%2016%2022C15.4477%2022%2015%2021.5523%2015%2021V19C15%2018.2043%2014.6839%2017.4413%2014.1213%2016.8787C13.5587%2016.3161%2012.7957%2016%2012%2016H6C5.20435%2016%204.44129%2016.3161%203.87868%2016.8787C3.31607%2017.4413%203%2018.2043%203%2019V21C3%2021.5523%202.55228%2022%202%2022C1.44772%2022%201%2021.5523%201%2021V19C1%2017.6739%201.52678%2016.4021%202.46447%2015.4645Z'%20fill='white'/%3e%3cpath%20d='M16.248%202.16125C15.713%202.02426%2015.1682%202.34694%2015.0313%202.88196C14.8943%203.41699%2015.2169%203.96176%2015.752%204.09875C16.3973%204.26398%2016.9692%204.63928%2017.3777%205.16549C17.7861%205.69169%2018.0078%206.33888%2018.0078%207.005C18.0078%207.67113%2017.7861%208.31831%2017.3777%208.84452C16.9692%209.37073%2016.3973%209.74603%2015.752%209.91125C15.2169%2010.0482%2014.8943%2010.593%2015.0313%2011.128C15.1682%2011.6631%2015.713%2011.9857%2016.248%2011.8488C17.3236%2011.5734%2018.2768%2010.9479%2018.9576%2010.0709C19.6383%209.19385%2020.0078%208.11522%2020.0078%207.005C20.0078%205.89479%2019.6383%204.81615%2018.9576%203.93914C18.2768%203.06213%2017.3236%202.43663%2016.248%202.16125Z'%20fill='white'/%3e%3cpath%20d='M19.25%2014.1618C18.7153%2014.0237%2018.1698%2014.3453%2018.0318%2014.88C17.8937%2015.4148%2018.2153%2015.9602%2018.75%2016.0982C19.3936%2016.2644%2019.9638%2016.6396%2020.371%2017.165C20.7782%2017.6902%2020.9994%2018.3358%2021%2019.0003L21%2019.0007L21%2021C21%2021.5523%2021.4477%2022%2022%2022C22.5523%2022%2023%2021.5523%2023%2021V18.9993C22.9992%2017.8914%2022.6305%2016.8152%2021.9517%2015.9397C21.273%2015.0641%2020.3227%2014.4387%2019.25%2014.1618Z'%20fill='white'/%3e%3c/svg%3e",HN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_818_5611)'%3e%3cpath%20d='M22.6931%2012.8403V8.54585L20.0971%207.92779C19.9797%207.58452%2019.8406%207.24909%2019.6805%206.92355L21.0794%204.65025L18.0428%201.61361L15.7695%203.01259C15.4439%202.85249%2015.1085%202.71334%2014.7653%202.59599L14.1472%20-3.57628e-07H9.85282L9.23471%202.59599C8.89145%202.71334%208.55604%202.85249%208.23051%203.01259L5.95721%201.61361L2.92052%204.65025L4.31946%206.92355C4.15937%207.24909%204.02022%207.58452%203.90286%207.92779L1.30692%208.54581V12.8402L3.90291%2013.4583C4.02027%2013.8016%204.15942%2014.137%204.31951%2014.4626L2.91396%2016.7466L5.0195%2018.7633C4.79521%2019.4357%204.68096%2020.14%204.68117%2020.8488V24H19.4138V20.8488C19.4138%2020.1594%2019.3058%2019.4801%2019.0974%2018.8321L21.0691%2016.7191L19.6805%2014.4626C19.8406%2014.1371%2019.9797%2013.8017%2020.0971%2013.4584L22.6931%2012.8403ZM17.9881%2022.5743H6.10692V20.8488C6.10692%2019.86%206.38864%2018.8971%206.92168%2018.0643C7.87588%2016.5733%209.50237%2015.6832%2011.2725%2015.6832H12.8225C14.5927%2015.6832%2016.2191%2016.5733%2017.1733%2018.0642C17.7058%2018.8953%2017.9886%2019.8617%2017.9881%2020.8488V22.5743ZM12.0475%2014.198C10.2295%2014.198%208.75048%2012.719%208.75048%2010.901C8.75048%209.08303%2010.2295%207.60396%2012.0475%207.60396C13.8655%207.60396%2015.3445%209.08303%2015.3445%2010.901C15.3445%2012.719%2013.8655%2014.198%2012.0475%2014.198ZM19.2853%2016.5408L18.4564%2017.4292C18.4293%2017.3846%2018.4024%2017.3397%2018.3742%2017.2957C17.5565%2016.0181%2016.3517%2015.087%2014.9646%2014.6127C16.0634%2013.7472%2016.7702%2012.4051%2016.7702%2010.901C16.7702%208.29687%2014.6516%206.17822%2012.0475%206.17822C9.44334%206.17822%207.32469%208.29687%207.32469%2010.901C7.32469%2012.4051%208.03148%2013.7472%209.13034%2014.6127C7.74324%2015.087%206.53839%2016.0181%205.72073%2017.2957C5.69877%2017.33%205.6781%2017.365%205.65681%2017.3996L4.7315%2016.5133L5.96425%2014.5101L5.03181%2012.2616L2.73266%2011.7141V9.67195L5.03186%209.12451L5.96429%206.87602L4.72494%204.86211L6.16898%203.41807L8.18294%204.65743L10.4314%203.72499L10.9789%201.42574H13.0211L13.5685%203.72494L15.817%204.65743L17.8309%203.41807L19.275%204.86211L18.0356%206.87602L18.9681%209.12451L21.2673%209.67195V11.7141L18.9681%2012.2616L18.0356%2014.5101L19.2853%2016.5408Z'%20fill='black'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_818_5611'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",YN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_818_5610)'%3e%3cpath%20d='M22.6931%2012.8403V8.54585L20.0971%207.92779C19.9797%207.58452%2019.8406%207.24909%2019.6805%206.92355L21.0794%204.65025L18.0428%201.61361L15.7695%203.01259C15.4439%202.85249%2015.1085%202.71334%2014.7653%202.59599L14.1472%20-3.57628e-07H9.85282L9.23471%202.59599C8.89145%202.71334%208.55604%202.85249%208.23051%203.01259L5.95721%201.61361L2.92052%204.65025L4.31946%206.92355C4.15937%207.24909%204.02022%207.58452%203.90286%207.92779L1.30692%208.54581V12.8402L3.90291%2013.4583C4.02027%2013.8016%204.15942%2014.137%204.31951%2014.4626L2.91396%2016.7466L5.0195%2018.7633C4.79521%2019.4357%204.68096%2020.14%204.68117%2020.8488V24H19.4138V20.8488C19.4138%2020.1594%2019.3058%2019.4801%2019.0974%2018.8321L21.0691%2016.7191L19.6805%2014.4626C19.8406%2014.1371%2019.9797%2013.8017%2020.0971%2013.4584L22.6931%2012.8403ZM17.9881%2022.5743H6.10692V20.8488C6.10692%2019.86%206.38864%2018.8971%206.92168%2018.0643C7.87588%2016.5733%209.50237%2015.6832%2011.2725%2015.6832H12.8225C14.5927%2015.6832%2016.2191%2016.5733%2017.1733%2018.0642C17.7058%2018.8953%2017.9886%2019.8617%2017.9881%2020.8488V22.5743ZM12.0475%2014.198C10.2295%2014.198%208.75048%2012.719%208.75048%2010.901C8.75048%209.08303%2010.2295%207.60396%2012.0475%207.60396C13.8655%207.60396%2015.3445%209.08303%2015.3445%2010.901C15.3445%2012.719%2013.8655%2014.198%2012.0475%2014.198ZM19.2853%2016.5408L18.4564%2017.4292C18.4293%2017.3846%2018.4024%2017.3397%2018.3742%2017.2957C17.5565%2016.0181%2016.3517%2015.087%2014.9646%2014.6127C16.0634%2013.7472%2016.7702%2012.4051%2016.7702%2010.901C16.7702%208.29687%2014.6516%206.17822%2012.0475%206.17822C9.44334%206.17822%207.32469%208.29687%207.32469%2010.901C7.32469%2012.4051%208.03148%2013.7472%209.13034%2014.6127C7.74324%2015.087%206.53839%2016.0181%205.72073%2017.2957C5.69877%2017.33%205.6781%2017.365%205.65681%2017.3996L4.7315%2016.5133L5.96425%2014.5101L5.03181%2012.2616L2.73266%2011.7141V9.67195L5.03186%209.12451L5.96429%206.87602L4.72494%204.86211L6.16898%203.41807L8.18294%204.65743L10.4314%203.72499L10.9789%201.42574H13.0211L13.5685%203.72494L15.817%204.65743L17.8309%203.41807L19.275%204.86211L18.0356%206.87602L18.9681%209.12451L21.2673%209.67195V11.7141L18.9681%2012.2616L18.0356%2014.5101L19.2853%2016.5408Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_818_5610'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",XN="/assets/Tare___Coil_White-CRe1WiRM.svg",UN="/assets/Tare___Coil_Black-Cfz74l6R.svg",GN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.2222%2011.994C10.7484%2012.3456%2011.3671%2012.5333%2012%2012.5333C12.8482%2012.5316%2013.6611%2012.1938%2014.2608%2011.5941C14.8605%2010.9944%2015.1982%2010.1815%2015.2%209.33332C15.2%208.70042%2015.0123%208.08173%2014.6607%207.55549C14.3091%207.02925%2013.8093%206.6191%2013.2246%206.3769C12.6399%206.1347%2011.9965%206.07133%2011.3757%206.1948C10.755%206.31828%2010.1848%206.62305%209.73727%207.07057C9.28974%207.5181%208.98497%208.08829%208.8615%208.70903C8.73803%209.32977%208.8014%209.97318%209.0436%2010.5579C9.2858%2011.1426%209.69595%2011.6424%2010.2222%2011.994ZM11.0111%207.8533C11.3038%207.65771%2011.648%207.55332%2012%207.55332V7.55998C12.4709%207.55998%2012.9227%207.7466%2013.2563%208.07897C13.5899%208.41135%2013.7782%208.86239%2013.78%209.33332C13.78%209.68537%2013.6756%2010.0295%2013.48%2010.3222C13.2844%2010.615%2013.0064%2010.8431%2012.6812%2010.9778C12.3559%2011.1125%2011.998%2011.1478%2011.6528%2011.0791C11.3075%2011.0104%2010.9903%2010.8409%2010.7414%2010.592C10.4924%2010.343%2010.3229%2010.0259%2010.2542%209.68058C10.1855%209.33529%2010.2208%208.97739%2010.3555%208.65214C10.4902%208.32689%2010.7184%208.04889%2011.0111%207.8533Z'%20fill='black'/%3e%3cpath%20d='M14.8467%2016.4467H16.2667C16.2649%2015.6928%2015.9642%2014.9705%2015.4306%2014.4381C14.8969%2013.9056%2014.1738%2013.6066%2013.42%2013.6066H10.5733C9.82013%2013.6066%209.09776%2013.9059%208.56516%2014.4385C8.03256%2014.9711%207.73334%2015.6934%207.73334%2016.4467H9.15334C9.15334%2016.07%209.30295%2015.7089%209.56925%2015.4426C9.83555%2015.1763%2010.1967%2015.0266%2010.5733%2015.0266H13.4267C13.8027%2015.0284%2014.1629%2015.1786%2014.4288%2015.4445C14.6948%2015.7104%2014.8449%2016.0706%2014.8467%2016.4467Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.68%2022.5933C11.7795%2022.6423%2011.8891%2022.6674%2012%2022.6666C12.1069%2022.6633%2012.2117%2022.636%2012.3067%2022.5867L15.5533%2020.9667C17.093%2020.2042%2018.3881%2019.0255%2019.2919%2017.5644C20.1957%2016.1032%2020.672%2014.4181%2020.6667%2012.7V4.60665C20.6668%204.5101%2020.6473%204.41454%2020.6094%204.32574C20.5715%204.23695%2020.5159%204.15678%2020.4461%204.09009C20.3763%204.02339%2020.2937%203.97156%2020.2032%203.93774C20.1128%203.90392%2020.0165%203.88881%2019.92%203.89332H17.6067C16.6604%203.88832%2015.7352%203.61308%2014.94%203.09998L12.36%201.44665C12.2455%201.37367%2012.1125%201.3349%2011.9767%201.3349C11.8409%201.3349%2011.7079%201.37367%2011.5933%201.44665L9.01335%203.09998C8.21819%203.61308%207.293%203.88832%206.34668%203.89332H4.03335C3.84648%203.89681%203.66845%203.9735%203.53754%204.1069C3.40663%204.2403%203.33331%204.41975%203.33335%204.60665V12.7C3.32559%2014.4178%203.79927%2016.1034%204.70069%2017.5657C5.60211%2019.028%206.8952%2020.2085%208.43334%2020.9733L11.68%2022.5933ZM4.74668%2012.7V5.33332H6.34668C7.57546%205.32926%208.77692%204.97044%209.80668%204.29998L12%202.88665L14.1933%204.31332C15.2245%204.97907%2016.4259%205.33323%2017.6533%205.33332H19.2533V12.7C19.2574%2014.1534%2018.8542%2015.579%2018.0895%2016.815C17.3248%2018.0511%2016.2291%2019.0482%2014.9267%2019.6933L12%2021.16L9.07335%2019.6933C7.7709%2019.0482%206.67523%2018.0511%205.91051%2016.815C5.14579%2015.579%204.74262%2014.1534%204.74668%2012.7Z'%20fill='black'/%3e%3c/svg%3e",KN="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.2222%2011.994C10.7484%2012.3456%2011.3671%2012.5333%2012%2012.5333C12.8482%2012.5316%2013.6611%2012.1938%2014.2608%2011.5941C14.8605%2010.9944%2015.1982%2010.1815%2015.2%209.33332C15.2%208.70042%2015.0123%208.08173%2014.6607%207.55549C14.3091%207.02925%2013.8093%206.6191%2013.2246%206.3769C12.6399%206.1347%2011.9965%206.07133%2011.3757%206.1948C10.755%206.31828%2010.1848%206.62305%209.73727%207.07057C9.28974%207.5181%208.98497%208.08829%208.8615%208.70903C8.73803%209.32977%208.8014%209.97318%209.0436%2010.5579C9.2858%2011.1426%209.69595%2011.6424%2010.2222%2011.994ZM11.0111%207.8533C11.3038%207.65771%2011.648%207.55332%2012%207.55332V7.55998C12.4709%207.55998%2012.9227%207.7466%2013.2563%208.07897C13.5899%208.41135%2013.7782%208.86239%2013.78%209.33332C13.78%209.68537%2013.6756%2010.0295%2013.48%2010.3222C13.2844%2010.615%2013.0064%2010.8431%2012.6812%2010.9778C12.3559%2011.1125%2011.998%2011.1478%2011.6528%2011.0791C11.3075%2011.0104%2010.9903%2010.8409%2010.7414%2010.592C10.4924%2010.343%2010.3229%2010.0259%2010.2542%209.68058C10.1855%209.33529%2010.2208%208.97739%2010.3555%208.65214C10.4902%208.32689%2010.7184%208.04889%2011.0111%207.8533Z'%20fill='white'/%3e%3cpath%20d='M14.8467%2016.4467H16.2667C16.2649%2015.6928%2015.9642%2014.9705%2015.4306%2014.4381C14.8969%2013.9056%2014.1738%2013.6066%2013.42%2013.6066H10.5733C9.82013%2013.6066%209.09776%2013.9059%208.56516%2014.4385C8.03256%2014.9711%207.73334%2015.6934%207.73334%2016.4467H9.15334C9.15334%2016.07%209.30295%2015.7089%209.56925%2015.4426C9.83555%2015.1763%2010.1967%2015.0266%2010.5733%2015.0266H13.4267C13.8027%2015.0284%2014.1629%2015.1786%2014.4288%2015.4445C14.6948%2015.7104%2014.8449%2016.0706%2014.8467%2016.4467Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.68%2022.5933C11.7795%2022.6423%2011.8891%2022.6674%2012%2022.6666C12.1069%2022.6633%2012.2117%2022.636%2012.3067%2022.5867L15.5533%2020.9667C17.093%2020.2042%2018.3881%2019.0255%2019.2919%2017.5644C20.1957%2016.1032%2020.672%2014.4181%2020.6667%2012.7V4.60665C20.6668%204.5101%2020.6473%204.41454%2020.6094%204.32574C20.5715%204.23695%2020.5159%204.15678%2020.4461%204.09009C20.3763%204.02339%2020.2937%203.97156%2020.2032%203.93774C20.1128%203.90392%2020.0165%203.88881%2019.92%203.89332H17.6067C16.6604%203.88832%2015.7352%203.61308%2014.94%203.09998L12.36%201.44665C12.2455%201.37367%2012.1125%201.3349%2011.9767%201.3349C11.8409%201.3349%2011.7079%201.37367%2011.5933%201.44665L9.01335%203.09998C8.21819%203.61308%207.293%203.88832%206.34668%203.89332H4.03335C3.84648%203.89681%203.66845%203.9735%203.53754%204.1069C3.40663%204.2403%203.33331%204.41975%203.33335%204.60665V12.7C3.32559%2014.4178%203.79927%2016.1034%204.70069%2017.5657C5.60211%2019.028%206.8952%2020.2085%208.43334%2020.9733L11.68%2022.5933ZM4.74668%2012.7V5.33332H6.34668C7.57546%205.32926%208.77692%204.97044%209.80668%204.29998L12%202.88665L14.1933%204.31332C15.2245%204.97907%2016.4259%205.33323%2017.6533%205.33332H19.2533V12.7C19.2574%2014.1534%2018.8542%2015.579%2018.0895%2016.815C17.3248%2018.0511%2016.2291%2019.0482%2014.9267%2019.6933L12%2021.16L9.07335%2019.6933C7.7709%2019.0482%206.67523%2018.0511%205.91051%2016.815C5.14579%2015.579%204.74262%2014.1534%204.74668%2012.7Z'%20fill='white'/%3e%3c/svg%3e";var AT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$_=is.createContext&&is.createContext(AT),QN=["attr","size","title"];function ZN(t,e){if(t==null)return{};var i=JN(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function JN(t,e){if(t==null)return{};var i={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;i[n]=t[n]}return i}function f0(){return f0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},f0.apply(this,arguments)}function H_(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function x0(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?H_(Object(i),!0).forEach(function(n){qN(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):H_(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function qN(t,e,i){return e=eR(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function eR(t){var e=tR(t,"string");return typeof e=="symbol"?e:e+""}function tR(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DT(t){return t&&t.map((e,i)=>is.createElement(e.tag,x0({key:i},e.attr),DT(e.child)))}function Ul(t){return e=>is.createElement(iR,f0({attr:x0({},t.attr)},e),DT(t.child))}function iR(t){var e=i=>{var{attr:n,size:s,title:a}=t,l=ZN(t,QN),p=s||i.size||"1em",f;return i.className&&(f=i.className),t.className&&(f=(f?f+" ":"")+t.className),is.createElement("svg",f0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},i.attr,n,l,{className:f,style:x0(x0({color:t.color||i.color},i.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),a&&is.createElement("title",null,a),t.children)};return $_!==void 0?is.createElement($_.Consumer,null,i=>e(i)):e(AT)}function ay(t){return Ul({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Circle_Plus"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M15,12.5H12.5V15a.5.5,0,0,1-1,0V12.5H9a.5.5,0,0,1,0-1h2.5V9a.5.5,0,0,1,1,0v2.5H15A.5.5,0,0,1,15,12.5Z"},child:[]},{tag:"path",attr:{d:"M12,21.932A9.934,9.934,0,1,1,21.932,12,9.944,9.944,0,0,1,12,21.932ZM12,3.065A8.934,8.934,0,1,0,20.932,12,8.944,8.944,0,0,0,12,3.065Z"},child:[]}]}]}]})(t)}function nR(t){return Ul({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"},child:[]}]})(t)}function sR(t){return Ul({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"},child:[]}]})(t)}function Gl(t){return Ul({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(t)}function rR(){let[t,e]=ne.useState(!1);return w.jsxs("div",{className:"max-w-[240px] min-w-[240px] w-full min-h-screen border-r border-r-gray-500",children:[w.jsx("div",{className:"w-full py-4 ",children:w.jsx("img",{src:ET,alt:"",className:"mx-auto"})}),w.jsxs("div",{className:"flex flex-col gap-4 px-4 mt-6",children:[w.jsx(Ni,{to:"/",className:({isActive:i})=>i?"bg-primary rounded-md hidden":"block",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:VN,alt:""}),w.jsx("p",{className:"",children:"Overview"})]})}),w.jsx(Ni,{to:"/",className:({isActive:i})=>i?"bg-primary rounded-md block text-white":"hidden",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:ON,alt:""}),w.jsx("p",{className:"",children:"Overview"})]})}),w.jsx(Ni,{to:"/machines",className:({isActive:i})=>i?"bg-primary rounded-md hidden":"block",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:Nf,alt:""}),w.jsx("p",{className:"",children:"Forming Machine"})]})}),w.jsx(Ni,{to:"/machines",className:({isActive:i})=>i?"bg-primary rounded-md block text-white":"hidden",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:z_,alt:""}),w.jsx("p",{className:"",children:"Forming Machine"})]})}),w.jsx(Ni,{to:"/reports/dashboard",className:({isActive:i})=>i?"bg-primary rounded-md hidden":"block",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:jN,alt:""}),w.jsx("p",{className:"",children:"Reports"})]})}),w.jsx(Ni,{to:"/reports/dashboard",className:({isActive:i})=>i?"bg-primary rounded-md block text-white":"hidden",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:WN,alt:""}),w.jsx("p",{className:"",children:"Reports"})]})}),w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",onClick:()=>e(!t),children:[w.jsx("img",{src:Nf,alt:""}),w.jsx("p",{className:"",children:"Manage Products"}),t?w.jsx(sR,{}):w.jsx(nR,{})]}),t&&w.jsxs("div",{className:"flex flex-col gap-3 pl-8",children:[w.jsx(Ni,{to:"/manage/products",className:({isActive:i})=>i?"bg-primary rounded-md":"",children:w.jsx("p",{className:"p-2 ",children:"All Products"})}),w.jsx(Ni,{to:"/products/add-product",className:({isActive:i})=>i?"bg-primary rounded-md":"",children:w.jsx("p",{className:"p-2 ",children:"Add Product"})}),w.jsx(Ni,{to:"/products/add-shift",className:({isActive:i})=>i?"bg-primary rounded-md":"",children:w.jsx("p",{className:"p-2 ",children:"Add Shift"})}),w.jsx(Ni,{to:"/products/add-damaged-product",className:({isActive:i})=>i?"bg-primary rounded-md":"",children:w.jsx("p",{className:"p-2 ",children:"Add Damaged Product"})})]}),w.jsx(Ni,{to:"/manage/all-machines",className:({isActive:i})=>i?"bg-primary rounded-md hidden":"block",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:Nf,alt:""}),w.jsx("p",{className:"",children:"All Machines"})]})}),w.jsx(Ni,{to:"/manage/all-machines",className:({isActive:i})=>i?"bg-primary rounded-md block text-white":"hidden",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:z_,alt:""}),w.jsx("p",{className:"",children:"All Machines"})]})}),w.jsx(Ni,{to:"/manage/users",className:({isActive:i})=>i?"bg-primary rounded-md hidden":"block",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:zN,alt:""}),w.jsx("p",{className:"",children:"Manage Users"})]})}),w.jsx(Ni,{to:"/manage/users",className:({isActive:i})=>i?"bg-primary rounded-md block text-white":"hidden",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:$N,alt:""}),w.jsx("p",{className:"",children:"Manage Users"})]})}),w.jsx(Ni,{to:"/incharge",className:({isActive:i})=>i?"bg-primary rounded-md hidden":"block",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:HN,alt:""}),w.jsx("p",{className:"",children:"Incharge Section"})]})}),w.jsx(Ni,{to:"/incharge",className:({isActive:i})=>i?"bg-primary rounded-md block text-white":"hidden",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:YN,alt:""}),w.jsx("p",{className:"",children:"Incharge Section"})]})}),w.jsx(Ni,{to:"/tare-crain-updates",className:({isActive:i})=>i?"bg-primary rounded-md hidden":"block",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:UN,alt:""}),w.jsx("p",{className:"",children:"Tare & Coil Changing "})]})}),w.jsx(Ni,{to:"/tare-crain-updates",className:({isActive:i})=>i?"bg-primary rounded-md block text-white":"hidden",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:XN,alt:""}),w.jsx("p",{className:"",children:"Tare & Coil Changing "})]})}),w.jsx(Ni,{to:"/admin/machine-production",className:({isActive:i})=>i?"bg-primary rounded-md hidden":"block",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:GN,alt:""}),w.jsx("p",{className:"",children:"Admin"})]})}),w.jsx(Ni,{to:"/admin/machine-production",className:({isActive:i})=>i?"bg-primary rounded-md block text-white":"hidden",children:w.jsxs("div",{className:"flex gap-3 items-center px-2 py-2 rounded-md hover:bg-primary cursor-pointer",children:[w.jsx("img",{src:KN,alt:""}),w.jsx("p",{className:"",children:"Admin"})]})})]})]})}async function oy(t,e,i){const n=vi(Mt,t),s=_r(n,ct("email","==",e),ct("password","==",i),rr(1)),a=await gn(s);let l=[];return a.forEach(p=>{l.push(p.data())}),[l.length!==0,l]}async function Dp(t,e=-1){const i=vi(Mt,t);let n=null;e!==-1?n=_r(i,Ns("creatingDate","desc"),rr(e)):n=_r(i,Ns("creatingDate","desc"));const s=await gn(n);let a=[];return s.forEach(l=>{a.push({id:l==null?void 0:l.id,...l.data()})}),a}const Is=t=>{const[e,i]=ne.useState(!1),[n,s]=ne.useReducer(oR,aR),a=vi(Mt,t),l=g=>{e||s(g)},p=async g=>{s("IS_LOADING");try{const m=await FI(a,{...g,creatingDate:Xb()});l({type:"ADD_DOCUMENT",payload:m})}catch(m){s({type:"ERROR",payload:m.message})}},f=async(g,m)=>{s({type:"IS_PENDING"});let k={...m,updatedDate:Xb()};const T=Xi(a,g);try{const D=await Ag(T,k);l({type:"UPDATE_DOCUMENT",payload:D})}catch(D){s({type:"ERROR",payload:D.message}),II(T,m)}};return ne.useEffect(()=>()=>i(!0),[]),{addDocument:p,response:n,updateDocument:f}},aR={document:null,error:null,isLoading:null,success:null},oR=(t,{type:e,payload:i})=>{switch(e){case"IS_LOADING":return{document:null,error:null,isLoading:!0,success:null};case"ADD_DOCUMENT":return{document:i,error:null,isLoading:!1,success:!0};case"UPDATE_DOCUMENT":return{document:i,error:null,isLoading:!1,success:!0};case"ERROR":return{document:null,error:i,isLoading:!1,success:!1};default:return t}};var IT={exports:{}};function lR(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Rf={exports:{}};const hR={},cR=Object.freeze(Object.defineProperty({__proto__:null,default:hR},Symbol.toStringTag,{value:"Module"})),uR=WT(cR);var Y_;function jt(){return Y_||(Y_=1,function(t,e){(function(i,n){t.exports=n()})(Dt,function(){var i=i||function(n,s){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof Dt<"u"&&Dt.crypto&&(a=Dt.crypto),!a&&typeof lR=="function")try{a=uR}catch{}var l=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},p=Object.create||function(){function E(){}return function(B){var H;return E.prototype=B,H=new E,E.prototype=null,H}}(),f={},g=f.lib={},m=g.Base=function(){return{extend:function(E){var B=p(this);return E&&B.mixIn(E),(!B.hasOwnProperty("init")||this.init===B.init)&&(B.init=function(){B.$super.init.apply(this,arguments)}),B.init.prototype=B,B.$super=this,B},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var B in E)E.hasOwnProperty(B)&&(this[B]=E[B]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),k=g.WordArray=m.extend({init:function(E,B){E=this.words=E||[],B!=s?this.sigBytes=B:this.sigBytes=E.length*4},toString:function(E){return(E||D).stringify(this)},concat:function(E){var B=this.words,H=E.words,U=this.sigBytes,j=E.sigBytes;if(this.clamp(),U%4)for(var G=0;G<j;G++){var Z=H[G>>>2]>>>24-G%4*8&255;B[U+G>>>2]|=Z<<24-(U+G)%4*8}else for(var he=0;he<j;he+=4)B[U+he>>>2]=H[he>>>2];return this.sigBytes+=j,this},clamp:function(){var E=this.words,B=this.sigBytes;E[B>>>2]&=4294967295<<32-B%4*8,E.length=n.ceil(B/4)},clone:function(){var E=m.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var B=[],H=0;H<E;H+=4)B.push(l());return new k.init(B,E)}}),T=f.enc={},D=T.Hex={stringify:function(E){for(var B=E.words,H=E.sigBytes,U=[],j=0;j<H;j++){var G=B[j>>>2]>>>24-j%4*8&255;U.push((G>>>4).toString(16)),U.push((G&15).toString(16))}return U.join("")},parse:function(E){for(var B=E.length,H=[],U=0;U<B;U+=2)H[U>>>3]|=parseInt(E.substr(U,2),16)<<24-U%8*4;return new k.init(H,B/2)}},P=T.Latin1={stringify:function(E){for(var B=E.words,H=E.sigBytes,U=[],j=0;j<H;j++){var G=B[j>>>2]>>>24-j%4*8&255;U.push(String.fromCharCode(G))}return U.join("")},parse:function(E){for(var B=E.length,H=[],U=0;U<B;U++)H[U>>>2]|=(E.charCodeAt(U)&255)<<24-U%4*8;return new k.init(H,B)}},L=T.Utf8={stringify:function(E){try{return decodeURIComponent(escape(P.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return P.parse(unescape(encodeURIComponent(E)))}},$=g.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new k.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=L.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var B,H=this._data,U=H.words,j=H.sigBytes,G=this.blockSize,Z=G*4,he=j/Z;E?he=n.ceil(he):he=n.max((he|0)-this._minBufferSize,0);var ee=he*G,re=n.min(ee*4,j);if(ee){for(var we=0;we<ee;we+=G)this._doProcessBlock(U,we);B=U.splice(0,ee),H.sigBytes-=re}return new k.init(B,re)},clone:function(){var E=m.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});g.Hasher=$.extend({cfg:m.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){$.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var B=this._doFinalize();return B},blockSize:16,_createHelper:function(E){return function(B,H){return new E.init(H).finalize(B)}},_createHmacHelper:function(E){return function(B,H){return new N.HMAC.init(E,H).finalize(B)}}});var N=f.algo={};return f}(Math);return i})}(Rf)),Rf.exports}var Vf={exports:{}},X_;function Ip(){return X_||(X_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(n){var s=i,a=s.lib,l=a.Base,p=a.WordArray,f=s.x64={};f.Word=l.extend({init:function(g,m){this.high=g,this.low=m}}),f.WordArray=l.extend({init:function(g,m){g=this.words=g||[],m!=n?this.sigBytes=m:this.sigBytes=g.length*8},toX32:function(){for(var g=this.words,m=g.length,k=[],T=0;T<m;T++){var D=g[T];k.push(D.high),k.push(D.low)}return p.create(k,this.sigBytes)},clone:function(){for(var g=l.clone.call(this),m=g.words=this.words.slice(0),k=m.length,T=0;T<k;T++)m[T]=m[T].clone();return g}})}(),i})}(Vf)),Vf.exports}var Of={exports:{}},U_;function dR(){return U_||(U_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(){if(typeof ArrayBuffer=="function"){var n=i,s=n.lib,a=s.WordArray,l=a.init,p=a.init=function(f){if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),(f instanceof Int8Array||typeof Uint8ClampedArray<"u"&&f instanceof Uint8ClampedArray||f instanceof Int16Array||f instanceof Uint16Array||f instanceof Int32Array||f instanceof Uint32Array||f instanceof Float32Array||f instanceof Float64Array)&&(f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength)),f instanceof Uint8Array){for(var g=f.byteLength,m=[],k=0;k<g;k++)m[k>>>2]|=f[k]<<24-k%4*8;l.call(this,m,g)}else l.apply(this,arguments)};p.prototype=a}}(),i.lib.WordArray})}(Of)),Of.exports}var jf={exports:{}},G_;function pR(){return G_||(G_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=n.enc;l.Utf16=l.Utf16BE={stringify:function(f){for(var g=f.words,m=f.sigBytes,k=[],T=0;T<m;T+=2){var D=g[T>>>2]>>>16-T%4*8&65535;k.push(String.fromCharCode(D))}return k.join("")},parse:function(f){for(var g=f.length,m=[],k=0;k<g;k++)m[k>>>1]|=f.charCodeAt(k)<<16-k%2*16;return a.create(m,g*2)}},l.Utf16LE={stringify:function(f){for(var g=f.words,m=f.sigBytes,k=[],T=0;T<m;T+=2){var D=p(g[T>>>2]>>>16-T%4*8&65535);k.push(String.fromCharCode(D))}return k.join("")},parse:function(f){for(var g=f.length,m=[],k=0;k<g;k++)m[k>>>1]|=p(f.charCodeAt(k)<<16-k%2*16);return a.create(m,g*2)}};function p(f){return f<<8&4278255360|f>>>8&16711935}}(),i.enc.Utf16})}(jf)),jf.exports}var Wf={exports:{}},K_;function mo(){return K_||(K_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=n.enc;l.Base64={stringify:function(f){var g=f.words,m=f.sigBytes,k=this._map;f.clamp();for(var T=[],D=0;D<m;D+=3)for(var P=g[D>>>2]>>>24-D%4*8&255,L=g[D+1>>>2]>>>24-(D+1)%4*8&255,$=g[D+2>>>2]>>>24-(D+2)%4*8&255,N=P<<16|L<<8|$,E=0;E<4&&D+E*.75<m;E++)T.push(k.charAt(N>>>6*(3-E)&63));var B=k.charAt(64);if(B)for(;T.length%4;)T.push(B);return T.join("")},parse:function(f){var g=f.length,m=this._map,k=this._reverseMap;if(!k){k=this._reverseMap=[];for(var T=0;T<m.length;T++)k[m.charCodeAt(T)]=T}var D=m.charAt(64);if(D){var P=f.indexOf(D);P!==-1&&(g=P)}return p(f,g,k)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function p(f,g,m){for(var k=[],T=0,D=0;D<g;D++)if(D%4){var P=m[f.charCodeAt(D-1)]<<D%4*2,L=m[f.charCodeAt(D)]>>>6-D%4*2,$=P|L;k[T>>>2]|=$<<24-T%4*8,T++}return a.create(k,T)}}(),i.enc.Base64})}(Wf)),Wf.exports}var zf={exports:{}},Q_;function fR(){return Q_||(Q_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=n.enc;l.Base64url={stringify:function(f,g){g===void 0&&(g=!0);var m=f.words,k=f.sigBytes,T=g?this._safe_map:this._map;f.clamp();for(var D=[],P=0;P<k;P+=3)for(var L=m[P>>>2]>>>24-P%4*8&255,$=m[P+1>>>2]>>>24-(P+1)%4*8&255,N=m[P+2>>>2]>>>24-(P+2)%4*8&255,E=L<<16|$<<8|N,B=0;B<4&&P+B*.75<k;B++)D.push(T.charAt(E>>>6*(3-B)&63));var H=T.charAt(64);if(H)for(;D.length%4;)D.push(H);return D.join("")},parse:function(f,g){g===void 0&&(g=!0);var m=f.length,k=g?this._safe_map:this._map,T=this._reverseMap;if(!T){T=this._reverseMap=[];for(var D=0;D<k.length;D++)T[k.charCodeAt(D)]=D}var P=k.charAt(64);if(P){var L=f.indexOf(P);L!==-1&&(m=L)}return p(f,m,T)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function p(f,g,m){for(var k=[],T=0,D=0;D<g;D++)if(D%4){var P=m[f.charCodeAt(D-1)]<<D%4*2,L=m[f.charCodeAt(D)]>>>6-D%4*2,$=P|L;k[T>>>2]|=$<<24-T%4*8,T++}return a.create(k,T)}}(),i.enc.Base64url})}(zf)),zf.exports}var $f={exports:{}},Z_;function go(){return Z_||(Z_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(n){var s=i,a=s.lib,l=a.WordArray,p=a.Hasher,f=s.algo,g=[];(function(){for(var L=0;L<64;L++)g[L]=n.abs(n.sin(L+1))*4294967296|0})();var m=f.MD5=p.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(L,$){for(var N=0;N<16;N++){var E=$+N,B=L[E];L[E]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}var H=this._hash.words,U=L[$+0],j=L[$+1],G=L[$+2],Z=L[$+3],he=L[$+4],ee=L[$+5],re=L[$+6],we=L[$+7],de=L[$+8],Re=L[$+9],He=L[$+10],Ze=L[$+11],et=L[$+12],Pe=L[$+13],Le=L[$+14],Be=L[$+15],X=H[0],_e=H[1],me=H[2],W=H[3];X=k(X,_e,me,W,U,7,g[0]),W=k(W,X,_e,me,j,12,g[1]),me=k(me,W,X,_e,G,17,g[2]),_e=k(_e,me,W,X,Z,22,g[3]),X=k(X,_e,me,W,he,7,g[4]),W=k(W,X,_e,me,ee,12,g[5]),me=k(me,W,X,_e,re,17,g[6]),_e=k(_e,me,W,X,we,22,g[7]),X=k(X,_e,me,W,de,7,g[8]),W=k(W,X,_e,me,Re,12,g[9]),me=k(me,W,X,_e,He,17,g[10]),_e=k(_e,me,W,X,Ze,22,g[11]),X=k(X,_e,me,W,et,7,g[12]),W=k(W,X,_e,me,Pe,12,g[13]),me=k(me,W,X,_e,Le,17,g[14]),_e=k(_e,me,W,X,Be,22,g[15]),X=T(X,_e,me,W,j,5,g[16]),W=T(W,X,_e,me,re,9,g[17]),me=T(me,W,X,_e,Ze,14,g[18]),_e=T(_e,me,W,X,U,20,g[19]),X=T(X,_e,me,W,ee,5,g[20]),W=T(W,X,_e,me,He,9,g[21]),me=T(me,W,X,_e,Be,14,g[22]),_e=T(_e,me,W,X,he,20,g[23]),X=T(X,_e,me,W,Re,5,g[24]),W=T(W,X,_e,me,Le,9,g[25]),me=T(me,W,X,_e,Z,14,g[26]),_e=T(_e,me,W,X,de,20,g[27]),X=T(X,_e,me,W,Pe,5,g[28]),W=T(W,X,_e,me,G,9,g[29]),me=T(me,W,X,_e,we,14,g[30]),_e=T(_e,me,W,X,et,20,g[31]),X=D(X,_e,me,W,ee,4,g[32]),W=D(W,X,_e,me,de,11,g[33]),me=D(me,W,X,_e,Ze,16,g[34]),_e=D(_e,me,W,X,Le,23,g[35]),X=D(X,_e,me,W,j,4,g[36]),W=D(W,X,_e,me,he,11,g[37]),me=D(me,W,X,_e,we,16,g[38]),_e=D(_e,me,W,X,He,23,g[39]),X=D(X,_e,me,W,Pe,4,g[40]),W=D(W,X,_e,me,U,11,g[41]),me=D(me,W,X,_e,Z,16,g[42]),_e=D(_e,me,W,X,re,23,g[43]),X=D(X,_e,me,W,Re,4,g[44]),W=D(W,X,_e,me,et,11,g[45]),me=D(me,W,X,_e,Be,16,g[46]),_e=D(_e,me,W,X,G,23,g[47]),X=P(X,_e,me,W,U,6,g[48]),W=P(W,X,_e,me,we,10,g[49]),me=P(me,W,X,_e,Le,15,g[50]),_e=P(_e,me,W,X,ee,21,g[51]),X=P(X,_e,me,W,et,6,g[52]),W=P(W,X,_e,me,Z,10,g[53]),me=P(me,W,X,_e,He,15,g[54]),_e=P(_e,me,W,X,j,21,g[55]),X=P(X,_e,me,W,de,6,g[56]),W=P(W,X,_e,me,Be,10,g[57]),me=P(me,W,X,_e,re,15,g[58]),_e=P(_e,me,W,X,Pe,21,g[59]),X=P(X,_e,me,W,he,6,g[60]),W=P(W,X,_e,me,Ze,10,g[61]),me=P(me,W,X,_e,G,15,g[62]),_e=P(_e,me,W,X,Re,21,g[63]),H[0]=H[0]+X|0,H[1]=H[1]+_e|0,H[2]=H[2]+me|0,H[3]=H[3]+W|0},_doFinalize:function(){var L=this._data,$=L.words,N=this._nDataBytes*8,E=L.sigBytes*8;$[E>>>5]|=128<<24-E%32;var B=n.floor(N/4294967296),H=N;$[(E+64>>>9<<4)+15]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,$[(E+64>>>9<<4)+14]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,L.sigBytes=($.length+1)*4,this._process();for(var U=this._hash,j=U.words,G=0;G<4;G++){var Z=j[G];j[G]=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360}return U},clone:function(){var L=p.clone.call(this);return L._hash=this._hash.clone(),L}});function k(L,$,N,E,B,H,U){var j=L+($&N|~$&E)+B+U;return(j<<H|j>>>32-H)+$}function T(L,$,N,E,B,H,U){var j=L+($&E|N&~E)+B+U;return(j<<H|j>>>32-H)+$}function D(L,$,N,E,B,H,U){var j=L+($^N^E)+B+U;return(j<<H|j>>>32-H)+$}function P(L,$,N,E,B,H,U){var j=L+(N^($|~E))+B+U;return(j<<H|j>>>32-H)+$}s.MD5=p._createHelper(m),s.HmacMD5=p._createHmacHelper(m)}(Math),i.MD5})}($f)),$f.exports}var Hf={exports:{}},J_;function FT(){return J_||(J_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=s.Hasher,p=n.algo,f=[],g=p.SHA1=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(m,k){for(var T=this._hash.words,D=T[0],P=T[1],L=T[2],$=T[3],N=T[4],E=0;E<80;E++){if(E<16)f[E]=m[k+E]|0;else{var B=f[E-3]^f[E-8]^f[E-14]^f[E-16];f[E]=B<<1|B>>>31}var H=(D<<5|D>>>27)+N+f[E];E<20?H+=(P&L|~P&$)+1518500249:E<40?H+=(P^L^$)+1859775393:E<60?H+=(P&L|P&$|L&$)-1894007588:H+=(P^L^$)-899497514,N=$,$=L,L=P<<30|P>>>2,P=D,D=H}T[0]=T[0]+D|0,T[1]=T[1]+P|0,T[2]=T[2]+L|0,T[3]=T[3]+$|0,T[4]=T[4]+N|0},_doFinalize:function(){var m=this._data,k=m.words,T=this._nDataBytes*8,D=m.sigBytes*8;return k[D>>>5]|=128<<24-D%32,k[(D+64>>>9<<4)+14]=Math.floor(T/4294967296),k[(D+64>>>9<<4)+15]=T,m.sigBytes=k.length*4,this._process(),this._hash},clone:function(){var m=l.clone.call(this);return m._hash=this._hash.clone(),m}});n.SHA1=l._createHelper(g),n.HmacSHA1=l._createHmacHelper(g)}(),i.SHA1})}(Hf)),Hf.exports}var Yf={exports:{}},q_;function ly(){return q_||(q_=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){return function(n){var s=i,a=s.lib,l=a.WordArray,p=a.Hasher,f=s.algo,g=[],m=[];(function(){function D(N){for(var E=n.sqrt(N),B=2;B<=E;B++)if(!(N%B))return!1;return!0}function P(N){return(N-(N|0))*4294967296|0}for(var L=2,$=0;$<64;)D(L)&&($<8&&(g[$]=P(n.pow(L,1/2))),m[$]=P(n.pow(L,1/3)),$++),L++})();var k=[],T=f.SHA256=p.extend({_doReset:function(){this._hash=new l.init(g.slice(0))},_doProcessBlock:function(D,P){for(var L=this._hash.words,$=L[0],N=L[1],E=L[2],B=L[3],H=L[4],U=L[5],j=L[6],G=L[7],Z=0;Z<64;Z++){if(Z<16)k[Z]=D[P+Z]|0;else{var he=k[Z-15],ee=(he<<25|he>>>7)^(he<<14|he>>>18)^he>>>3,re=k[Z-2],we=(re<<15|re>>>17)^(re<<13|re>>>19)^re>>>10;k[Z]=ee+k[Z-7]+we+k[Z-16]}var de=H&U^~H&j,Re=$&N^$&E^N&E,He=($<<30|$>>>2)^($<<19|$>>>13)^($<<10|$>>>22),Ze=(H<<26|H>>>6)^(H<<21|H>>>11)^(H<<7|H>>>25),et=G+Ze+de+m[Z]+k[Z],Pe=He+Re;G=j,j=U,U=H,H=B+et|0,B=E,E=N,N=$,$=et+Pe|0}L[0]=L[0]+$|0,L[1]=L[1]+N|0,L[2]=L[2]+E|0,L[3]=L[3]+B|0,L[4]=L[4]+H|0,L[5]=L[5]+U|0,L[6]=L[6]+j|0,L[7]=L[7]+G|0},_doFinalize:function(){var D=this._data,P=D.words,L=this._nDataBytes*8,$=D.sigBytes*8;return P[$>>>5]|=128<<24-$%32,P[($+64>>>9<<4)+14]=n.floor(L/4294967296),P[($+64>>>9<<4)+15]=L,D.sigBytes=P.length*4,this._process(),this._hash},clone:function(){var D=p.clone.call(this);return D._hash=this._hash.clone(),D}});s.SHA256=p._createHelper(T),s.HmacSHA256=p._createHmacHelper(T)}(Math),i.SHA256})}(Yf)),Yf.exports}var Xf={exports:{}},eC;function xR(){return eC||(eC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),ly())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=n.algo,p=l.SHA256,f=l.SHA224=p.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var g=p._doFinalize.call(this);return g.sigBytes-=4,g}});n.SHA224=p._createHelper(f),n.HmacSHA224=p._createHmacHelper(f)}(),i.SHA224})}(Xf)),Xf.exports}var Uf={exports:{}},tC;function BT(){return tC||(tC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),Ip())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.Hasher,l=n.x64,p=l.Word,f=l.WordArray,g=n.algo;function m(){return p.create.apply(p,arguments)}var k=[m(1116352408,3609767458),m(1899447441,602891725),m(3049323471,3964484399),m(3921009573,2173295548),m(961987163,4081628472),m(1508970993,3053834265),m(2453635748,2937671579),m(2870763221,3664609560),m(3624381080,2734883394),m(310598401,1164996542),m(607225278,1323610764),m(1426881987,3590304994),m(1925078388,4068182383),m(2162078206,991336113),m(2614888103,633803317),m(3248222580,3479774868),m(3835390401,2666613458),m(4022224774,944711139),m(264347078,2341262773),m(604807628,2007800933),m(770255983,1495990901),m(1249150122,1856431235),m(1555081692,3175218132),m(1996064986,2198950837),m(2554220882,3999719339),m(2821834349,766784016),m(2952996808,2566594879),m(3210313671,3203337956),m(3336571891,1034457026),m(3584528711,2466948901),m(113926993,3758326383),m(338241895,168717936),m(666307205,1188179964),m(773529912,1546045734),m(1294757372,1522805485),m(1396182291,2643833823),m(1695183700,2343527390),m(1986661051,1014477480),m(2177026350,1206759142),m(2456956037,344077627),m(2730485921,1290863460),m(2820302411,3158454273),m(3259730800,3505952657),m(3345764771,106217008),m(3516065817,3606008344),m(3600352804,1432725776),m(4094571909,1467031594),m(275423344,851169720),m(430227734,3100823752),m(506948616,1363258195),m(659060556,3750685593),m(883997877,3785050280),m(958139571,3318307427),m(1322822218,3812723403),m(1537002063,2003034995),m(1747873779,3602036899),m(1955562222,1575990012),m(2024104815,1125592928),m(2227730452,2716904306),m(2361852424,442776044),m(2428436474,593698344),m(2756734187,3733110249),m(3204031479,2999351573),m(3329325298,3815920427),m(3391569614,3928383900),m(3515267271,566280711),m(3940187606,3454069534),m(4118630271,4000239992),m(116418474,1914138554),m(174292421,2731055270),m(289380356,3203993006),m(460393269,320620315),m(685471733,587496836),m(852142971,1086792851),m(1017036298,365543100),m(1126000580,2618297676),m(1288033470,3409855158),m(1501505948,4234509866),m(1607167915,987167468),m(1816402316,1246189591)],T=[];(function(){for(var P=0;P<80;P++)T[P]=m()})();var D=g.SHA512=a.extend({_doReset:function(){this._hash=new f.init([new p.init(1779033703,4089235720),new p.init(3144134277,2227873595),new p.init(1013904242,4271175723),new p.init(2773480762,1595750129),new p.init(1359893119,2917565137),new p.init(2600822924,725511199),new p.init(528734635,4215389547),new p.init(1541459225,327033209)])},_doProcessBlock:function(P,L){for(var $=this._hash.words,N=$[0],E=$[1],B=$[2],H=$[3],U=$[4],j=$[5],G=$[6],Z=$[7],he=N.high,ee=N.low,re=E.high,we=E.low,de=B.high,Re=B.low,He=H.high,Ze=H.low,et=U.high,Pe=U.low,Le=j.high,Be=j.low,X=G.high,_e=G.low,me=Z.high,W=Z.low,ae=he,fe=ee,ye=re,Se=we,Ee=de,tt=Re,nt=He,xt=Ze,rt=et,it=Pe,We=Le,It=Be,lt=X,Ui=_e,Vn=me,Ti=W,cn=0;cn<80;cn++){var bi,Gi,Ki=T[cn];if(cn<16)Gi=Ki.high=P[L+cn*2]|0,bi=Ki.low=P[L+cn*2+1]|0;else{var Sa=T[cn-15],Nt=Sa.high,$i=Sa.low,Zn=(Nt>>>1|$i<<31)^(Nt>>>8|$i<<24)^Nt>>>7,ar=($i>>>1|Nt<<31)^($i>>>8|Nt<<24)^($i>>>7|Nt<<25),ds=T[cn-2],ti=ds.high,kt=ds.low,Bi=(ti>>>19|kt<<13)^(ti<<3|kt>>>29)^ti>>>6,ka=(kt>>>19|ti<<13)^(kt<<3|ti>>>29)^(kt>>>6|ti<<26),Ta=T[cn-7],yo=Ta.high,F=Ta.low,O=T[cn-16],K=O.high,Ce=O.low;bi=ar+F,Gi=Zn+yo+(bi>>>0<ar>>>0?1:0),bi=bi+ka,Gi=Gi+Bi+(bi>>>0<ka>>>0?1:0),bi=bi+Ce,Gi=Gi+K+(bi>>>0<Ce>>>0?1:0),Ki.high=Gi,Ki.low=bi}var Ne=rt&We^~rt&lt,Oe=it&It^~it&Ui,ke=ae&ye^ae&Ee^ye&Ee,ut=fe&Se^fe&tt^Se&tt,Tt=(ae>>>28|fe<<4)^(ae<<30|fe>>>2)^(ae<<25|fe>>>7),at=(fe>>>28|ae<<4)^(fe<<30|ae>>>2)^(fe<<25|ae>>>7),_i=(rt>>>14|it<<18)^(rt>>>18|it<<14)^(rt<<23|it>>>9),Ut=(it>>>14|rt<<18)^(it>>>18|rt<<14)^(it<<23|rt>>>9),li=k[cn],se=li.high,pe=li.low,ge=Ti+Ut,xe=Vn+_i+(ge>>>0<Ti>>>0?1:0),ge=ge+Oe,xe=xe+Ne+(ge>>>0<Oe>>>0?1:0),ge=ge+pe,xe=xe+se+(ge>>>0<pe>>>0?1:0),ge=ge+bi,xe=xe+Gi+(ge>>>0<bi>>>0?1:0),Ve=at+ut,r=Tt+ke+(Ve>>>0<at>>>0?1:0);Vn=lt,Ti=Ui,lt=We,Ui=It,We=rt,It=it,it=xt+ge|0,rt=nt+xe+(it>>>0<xt>>>0?1:0)|0,nt=Ee,xt=tt,Ee=ye,tt=Se,ye=ae,Se=fe,fe=ge+Ve|0,ae=xe+r+(fe>>>0<ge>>>0?1:0)|0}ee=N.low=ee+fe,N.high=he+ae+(ee>>>0<fe>>>0?1:0),we=E.low=we+Se,E.high=re+ye+(we>>>0<Se>>>0?1:0),Re=B.low=Re+tt,B.high=de+Ee+(Re>>>0<tt>>>0?1:0),Ze=H.low=Ze+xt,H.high=He+nt+(Ze>>>0<xt>>>0?1:0),Pe=U.low=Pe+it,U.high=et+rt+(Pe>>>0<it>>>0?1:0),Be=j.low=Be+It,j.high=Le+We+(Be>>>0<It>>>0?1:0),_e=G.low=_e+Ui,G.high=X+lt+(_e>>>0<Ui>>>0?1:0),W=Z.low=W+Ti,Z.high=me+Vn+(W>>>0<Ti>>>0?1:0)},_doFinalize:function(){var P=this._data,L=P.words,$=this._nDataBytes*8,N=P.sigBytes*8;L[N>>>5]|=128<<24-N%32,L[(N+128>>>10<<5)+30]=Math.floor($/4294967296),L[(N+128>>>10<<5)+31]=$,P.sigBytes=L.length*4,this._process();var E=this._hash.toX32();return E},clone:function(){var P=a.clone.call(this);return P._hash=this._hash.clone(),P},blockSize:1024/32});n.SHA512=a._createHelper(D),n.HmacSHA512=a._createHmacHelper(D)}(),i.SHA512})}(Uf)),Uf.exports}var Gf={exports:{}},iC;function mR(){return iC||(iC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),Ip(),BT())})(Dt,function(i){return function(){var n=i,s=n.x64,a=s.Word,l=s.WordArray,p=n.algo,f=p.SHA512,g=p.SHA384=f.extend({_doReset:function(){this._hash=new l.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var m=f._doFinalize.call(this);return m.sigBytes-=16,m}});n.SHA384=f._createHelper(g),n.HmacSHA384=f._createHmacHelper(g)}(),i.SHA384})}(Gf)),Gf.exports}var Kf={exports:{}},nC;function gR(){return nC||(nC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),Ip())})(Dt,function(i){return function(n){var s=i,a=s.lib,l=a.WordArray,p=a.Hasher,f=s.x64,g=f.Word,m=s.algo,k=[],T=[],D=[];(function(){for(var $=1,N=0,E=0;E<24;E++){k[$+5*N]=(E+1)*(E+2)/2%64;var B=N%5,H=(2*$+3*N)%5;$=B,N=H}for(var $=0;$<5;$++)for(var N=0;N<5;N++)T[$+5*N]=N+(2*$+3*N)%5*5;for(var U=1,j=0;j<24;j++){for(var G=0,Z=0,he=0;he<7;he++){if(U&1){var ee=(1<<he)-1;ee<32?Z^=1<<ee:G^=1<<ee-32}U&128?U=U<<1^113:U<<=1}D[j]=g.create(G,Z)}})();var P=[];(function(){for(var $=0;$<25;$++)P[$]=g.create()})();var L=m.SHA3=p.extend({cfg:p.cfg.extend({outputLength:512}),_doReset:function(){for(var $=this._state=[],N=0;N<25;N++)$[N]=new g.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function($,N){for(var E=this._state,B=this.blockSize/2,H=0;H<B;H++){var U=$[N+2*H],j=$[N+2*H+1];U=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,j=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360;var G=E[H];G.high^=j,G.low^=U}for(var Z=0;Z<24;Z++){for(var he=0;he<5;he++){for(var ee=0,re=0,we=0;we<5;we++){var G=E[he+5*we];ee^=G.high,re^=G.low}var de=P[he];de.high=ee,de.low=re}for(var he=0;he<5;he++)for(var Re=P[(he+4)%5],He=P[(he+1)%5],Ze=He.high,et=He.low,ee=Re.high^(Ze<<1|et>>>31),re=Re.low^(et<<1|Ze>>>31),we=0;we<5;we++){var G=E[he+5*we];G.high^=ee,G.low^=re}for(var Pe=1;Pe<25;Pe++){var ee,re,G=E[Pe],Le=G.high,Be=G.low,X=k[Pe];X<32?(ee=Le<<X|Be>>>32-X,re=Be<<X|Le>>>32-X):(ee=Be<<X-32|Le>>>64-X,re=Le<<X-32|Be>>>64-X);var _e=P[T[Pe]];_e.high=ee,_e.low=re}var me=P[0],W=E[0];me.high=W.high,me.low=W.low;for(var he=0;he<5;he++)for(var we=0;we<5;we++){var Pe=he+5*we,G=E[Pe],ae=P[Pe],fe=P[(he+1)%5+5*we],ye=P[(he+2)%5+5*we];G.high=ae.high^~fe.high&ye.high,G.low=ae.low^~fe.low&ye.low}var G=E[0],Se=D[Z];G.high^=Se.high,G.low^=Se.low}},_doFinalize:function(){var $=this._data,N=$.words;this._nDataBytes*8;var E=$.sigBytes*8,B=this.blockSize*32;N[E>>>5]|=1<<24-E%32,N[(n.ceil((E+1)/B)*B>>>5)-1]|=128,$.sigBytes=N.length*4,this._process();for(var H=this._state,U=this.cfg.outputLength/8,j=U/8,G=[],Z=0;Z<j;Z++){var he=H[Z],ee=he.high,re=he.low;ee=(ee<<8|ee>>>24)&16711935|(ee<<24|ee>>>8)&4278255360,re=(re<<8|re>>>24)&16711935|(re<<24|re>>>8)&4278255360,G.push(re),G.push(ee)}return new l.init(G,U)},clone:function(){for(var $=p.clone.call(this),N=$._state=this._state.slice(0),E=0;E<25;E++)N[E]=N[E].clone();return $}});s.SHA3=p._createHelper(L),s.HmacSHA3=p._createHmacHelper(L)}(Math),i.SHA3})}(Kf)),Kf.exports}var Qf={exports:{}},sC;function yR(){return sC||(sC=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=i,a=s.lib,l=a.WordArray,p=a.Hasher,f=s.algo,g=l.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),m=l.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),k=l.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),T=l.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),D=l.create([0,1518500249,1859775393,2400959708,2840853838]),P=l.create([1352829926,1548603684,1836072691,2053994217,0]),L=f.RIPEMD160=p.extend({_doReset:function(){this._hash=l.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(j,G){for(var Z=0;Z<16;Z++){var he=G+Z,ee=j[he];j[he]=(ee<<8|ee>>>24)&16711935|(ee<<24|ee>>>8)&4278255360}var re=this._hash.words,we=D.words,de=P.words,Re=g.words,He=m.words,Ze=k.words,et=T.words,Pe,Le,Be,X,_e,me,W,ae,fe,ye;me=Pe=re[0],W=Le=re[1],ae=Be=re[2],fe=X=re[3],ye=_e=re[4];for(var Se,Z=0;Z<80;Z+=1)Se=Pe+j[G+Re[Z]]|0,Z<16?Se+=$(Le,Be,X)+we[0]:Z<32?Se+=N(Le,Be,X)+we[1]:Z<48?Se+=E(Le,Be,X)+we[2]:Z<64?Se+=B(Le,Be,X)+we[3]:Se+=H(Le,Be,X)+we[4],Se=Se|0,Se=U(Se,Ze[Z]),Se=Se+_e|0,Pe=_e,_e=X,X=U(Be,10),Be=Le,Le=Se,Se=me+j[G+He[Z]]|0,Z<16?Se+=H(W,ae,fe)+de[0]:Z<32?Se+=B(W,ae,fe)+de[1]:Z<48?Se+=E(W,ae,fe)+de[2]:Z<64?Se+=N(W,ae,fe)+de[3]:Se+=$(W,ae,fe)+de[4],Se=Se|0,Se=U(Se,et[Z]),Se=Se+ye|0,me=ye,ye=fe,fe=U(ae,10),ae=W,W=Se;Se=re[1]+Be+fe|0,re[1]=re[2]+X+ye|0,re[2]=re[3]+_e+me|0,re[3]=re[4]+Pe+W|0,re[4]=re[0]+Le+ae|0,re[0]=Se},_doFinalize:function(){var j=this._data,G=j.words,Z=this._nDataBytes*8,he=j.sigBytes*8;G[he>>>5]|=128<<24-he%32,G[(he+64>>>9<<4)+14]=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360,j.sigBytes=(G.length+1)*4,this._process();for(var ee=this._hash,re=ee.words,we=0;we<5;we++){var de=re[we];re[we]=(de<<8|de>>>24)&16711935|(de<<24|de>>>8)&4278255360}return ee},clone:function(){var j=p.clone.call(this);return j._hash=this._hash.clone(),j}});function $(j,G,Z){return j^G^Z}function N(j,G,Z){return j&G|~j&Z}function E(j,G,Z){return(j|~G)^Z}function B(j,G,Z){return j&Z|G&~Z}function H(j,G,Z){return j^(G|~Z)}function U(j,G){return j<<G|j>>>32-G}s.RIPEMD160=p._createHelper(L),s.HmacRIPEMD160=p._createHmacHelper(L)}(),i.RIPEMD160})}(Qf)),Qf.exports}var Zf={exports:{}},rC;function hy(){return rC||(rC=1,function(t,e){(function(i,n){t.exports=n(jt())})(Dt,function(i){(function(){var n=i,s=n.lib,a=s.Base,l=n.enc,p=l.Utf8,f=n.algo;f.HMAC=a.extend({init:function(g,m){g=this._hasher=new g.init,typeof m=="string"&&(m=p.parse(m));var k=g.blockSize,T=k*4;m.sigBytes>T&&(m=g.finalize(m)),m.clamp();for(var D=this._oKey=m.clone(),P=this._iKey=m.clone(),L=D.words,$=P.words,N=0;N<k;N++)L[N]^=1549556828,$[N]^=909522486;D.sigBytes=P.sigBytes=T,this.reset()},reset:function(){var g=this._hasher;g.reset(),g.update(this._iKey)},update:function(g){return this._hasher.update(g),this},finalize:function(g){var m=this._hasher,k=m.finalize(g);m.reset();var T=m.finalize(this._oKey.clone().concat(k));return T}})})()})}(Zf)),Zf.exports}var Jf={exports:{}},aC;function vR(){return aC||(aC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),ly(),hy())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.Base,l=s.WordArray,p=n.algo,f=p.SHA256,g=p.HMAC,m=p.PBKDF2=a.extend({cfg:a.extend({keySize:128/32,hasher:f,iterations:25e4}),init:function(k){this.cfg=this.cfg.extend(k)},compute:function(k,T){for(var D=this.cfg,P=g.create(D.hasher,k),L=l.create(),$=l.create([1]),N=L.words,E=$.words,B=D.keySize,H=D.iterations;N.length<B;){var U=P.update(T).finalize($);P.reset();for(var j=U.words,G=j.length,Z=U,he=1;he<H;he++){Z=P.finalize(Z),P.reset();for(var ee=Z.words,re=0;re<G;re++)j[re]^=ee[re]}L.concat(U),E[0]++}return L.sigBytes=B*4,L}});n.PBKDF2=function(k,T,D){return m.create(D).compute(k,T)}}(),i.PBKDF2})}(Jf)),Jf.exports}var qf={exports:{}},oC;function wa(){return oC||(oC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),FT(),hy())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.Base,l=s.WordArray,p=n.algo,f=p.MD5,g=p.EvpKDF=a.extend({cfg:a.extend({keySize:128/32,hasher:f,iterations:1}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,k){for(var T,D=this.cfg,P=D.hasher.create(),L=l.create(),$=L.words,N=D.keySize,E=D.iterations;$.length<N;){T&&P.update(T),T=P.update(m).finalize(k),P.reset();for(var B=1;B<E;B++)T=P.finalize(T),P.reset();L.concat(T)}return L.sigBytes=N*4,L}});n.EvpKDF=function(m,k,T){return g.create(T).compute(m,k)}}(),i.EvpKDF})}(qf)),qf.exports}var ex={exports:{}},lC;function hn(){return lC||(lC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),wa())})(Dt,function(i){i.lib.Cipher||function(n){var s=i,a=s.lib,l=a.Base,p=a.WordArray,f=a.BufferedBlockAlgorithm,g=s.enc;g.Utf8;var m=g.Base64,k=s.algo,T=k.EvpKDF,D=a.Cipher=f.extend({cfg:l.extend(),createEncryptor:function(ee,re){return this.create(this._ENC_XFORM_MODE,ee,re)},createDecryptor:function(ee,re){return this.create(this._DEC_XFORM_MODE,ee,re)},init:function(ee,re,we){this.cfg=this.cfg.extend(we),this._xformMode=ee,this._key=re,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(ee){return this._append(ee),this._process()},finalize:function(ee){ee&&this._append(ee);var re=this._doFinalize();return re},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ee(re){return typeof re=="string"?he:j}return function(re){return{encrypt:function(we,de,Re){return ee(de).encrypt(re,we,de,Re)},decrypt:function(we,de,Re){return ee(de).decrypt(re,we,de,Re)}}}}()});a.StreamCipher=D.extend({_doFinalize:function(){var ee=this._process(!0);return ee},blockSize:1});var P=s.mode={},L=a.BlockCipherMode=l.extend({createEncryptor:function(ee,re){return this.Encryptor.create(ee,re)},createDecryptor:function(ee,re){return this.Decryptor.create(ee,re)},init:function(ee,re){this._cipher=ee,this._iv=re}}),$=P.CBC=function(){var ee=L.extend();ee.Encryptor=ee.extend({processBlock:function(we,de){var Re=this._cipher,He=Re.blockSize;re.call(this,we,de,He),Re.encryptBlock(we,de),this._prevBlock=we.slice(de,de+He)}}),ee.Decryptor=ee.extend({processBlock:function(we,de){var Re=this._cipher,He=Re.blockSize,Ze=we.slice(de,de+He);Re.decryptBlock(we,de),re.call(this,we,de,He),this._prevBlock=Ze}});function re(we,de,Re){var He,Ze=this._iv;Ze?(He=Ze,this._iv=n):He=this._prevBlock;for(var et=0;et<Re;et++)we[de+et]^=He[et]}return ee}(),N=s.pad={},E=N.Pkcs7={pad:function(ee,re){for(var we=re*4,de=we-ee.sigBytes%we,Re=de<<24|de<<16|de<<8|de,He=[],Ze=0;Ze<de;Ze+=4)He.push(Re);var et=p.create(He,de);ee.concat(et)},unpad:function(ee){var re=ee.words[ee.sigBytes-1>>>2]&255;ee.sigBytes-=re}};a.BlockCipher=D.extend({cfg:D.cfg.extend({mode:$,padding:E}),reset:function(){var ee;D.reset.call(this);var re=this.cfg,we=re.iv,de=re.mode;this._xformMode==this._ENC_XFORM_MODE?ee=de.createEncryptor:(ee=de.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ee?this._mode.init(this,we&&we.words):(this._mode=ee.call(de,this,we&&we.words),this._mode.__creator=ee)},_doProcessBlock:function(ee,re){this._mode.processBlock(ee,re)},_doFinalize:function(){var ee,re=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(re.pad(this._data,this.blockSize),ee=this._process(!0)):(ee=this._process(!0),re.unpad(ee)),ee},blockSize:128/32});var B=a.CipherParams=l.extend({init:function(ee){this.mixIn(ee)},toString:function(ee){return(ee||this.formatter).stringify(this)}}),H=s.format={},U=H.OpenSSL={stringify:function(ee){var re,we=ee.ciphertext,de=ee.salt;return de?re=p.create([1398893684,1701076831]).concat(de).concat(we):re=we,re.toString(m)},parse:function(ee){var re,we=m.parse(ee),de=we.words;return de[0]==1398893684&&de[1]==1701076831&&(re=p.create(de.slice(2,4)),de.splice(0,4),we.sigBytes-=16),B.create({ciphertext:we,salt:re})}},j=a.SerializableCipher=l.extend({cfg:l.extend({format:U}),encrypt:function(ee,re,we,de){de=this.cfg.extend(de);var Re=ee.createEncryptor(we,de),He=Re.finalize(re),Ze=Re.cfg;return B.create({ciphertext:He,key:we,iv:Ze.iv,algorithm:ee,mode:Ze.mode,padding:Ze.padding,blockSize:ee.blockSize,formatter:de.format})},decrypt:function(ee,re,we,de){de=this.cfg.extend(de),re=this._parse(re,de.format);var Re=ee.createDecryptor(we,de).finalize(re.ciphertext);return Re},_parse:function(ee,re){return typeof ee=="string"?re.parse(ee,this):ee}}),G=s.kdf={},Z=G.OpenSSL={execute:function(ee,re,we,de,Re){if(de||(de=p.random(64/8)),Re)var He=T.create({keySize:re+we,hasher:Re}).compute(ee,de);else var He=T.create({keySize:re+we}).compute(ee,de);var Ze=p.create(He.words.slice(re),we*4);return He.sigBytes=re*4,B.create({key:He,iv:Ze,salt:de})}},he=a.PasswordBasedCipher=j.extend({cfg:j.cfg.extend({kdf:Z}),encrypt:function(ee,re,we,de){de=this.cfg.extend(de);var Re=de.kdf.execute(we,ee.keySize,ee.ivSize,de.salt,de.hasher);de.iv=Re.iv;var He=j.encrypt.call(this,ee,re,Re.key,de);return He.mixIn(Re),He},decrypt:function(ee,re,we,de){de=this.cfg.extend(de),re=this._parse(re,de.format);var Re=de.kdf.execute(we,ee.keySize,ee.ivSize,re.salt,de.hasher);de.iv=Re.iv;var He=j.decrypt.call(this,ee,re,Re.key,de);return He}})}()})}(ex)),ex.exports}var tx={exports:{}},hC;function bR(){return hC||(hC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){return i.mode.CFB=function(){var n=i.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(a,l){var p=this._cipher,f=p.blockSize;s.call(this,a,l,f,p),this._prevBlock=a.slice(l,l+f)}}),n.Decryptor=n.extend({processBlock:function(a,l){var p=this._cipher,f=p.blockSize,g=a.slice(l,l+f);s.call(this,a,l,f,p),this._prevBlock=g}});function s(a,l,p,f){var g,m=this._iv;m?(g=m.slice(0),this._iv=void 0):g=this._prevBlock,f.encryptBlock(g,0);for(var k=0;k<p;k++)a[l+k]^=g[k]}return n}(),i.mode.CFB})}(tx)),tx.exports}var ix={exports:{}},cC;function _R(){return cC||(cC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){return i.mode.CTR=function(){var n=i.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(a,l){var p=this._cipher,f=p.blockSize,g=this._iv,m=this._counter;g&&(m=this._counter=g.slice(0),this._iv=void 0);var k=m.slice(0);p.encryptBlock(k,0),m[f-1]=m[f-1]+1|0;for(var T=0;T<f;T++)a[l+T]^=k[T]}});return n.Decryptor=s,n}(),i.mode.CTR})}(ix)),ix.exports}var nx={exports:{}},uC;function CR(){return uC||(uC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return i.mode.CTRGladman=function(){var n=i.lib.BlockCipherMode.extend();function s(p){if((p>>24&255)===255){var f=p>>16&255,g=p>>8&255,m=p&255;f===255?(f=0,g===255?(g=0,m===255?m=0:++m):++g):++f,p=0,p+=f<<16,p+=g<<8,p+=m}else p+=1<<24;return p}function a(p){return(p[0]=s(p[0]))===0&&(p[1]=s(p[1])),p}var l=n.Encryptor=n.extend({processBlock:function(p,f){var g=this._cipher,m=g.blockSize,k=this._iv,T=this._counter;k&&(T=this._counter=k.slice(0),this._iv=void 0),a(T);var D=T.slice(0);g.encryptBlock(D,0);for(var P=0;P<m;P++)p[f+P]^=D[P]}});return n.Decryptor=l,n}(),i.mode.CTRGladman})}(nx)),nx.exports}var sx={exports:{}},dC;function wR(){return dC||(dC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){return i.mode.OFB=function(){var n=i.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(a,l){var p=this._cipher,f=p.blockSize,g=this._iv,m=this._keystream;g&&(m=this._keystream=g.slice(0),this._iv=void 0),p.encryptBlock(m,0);for(var k=0;k<f;k++)a[l+k]^=m[k]}});return n.Decryptor=s,n}(),i.mode.OFB})}(sx)),sx.exports}var rx={exports:{}},pC;function SR(){return pC||(pC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){return i.mode.ECB=function(){var n=i.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,a){this._cipher.encryptBlock(s,a)}}),n.Decryptor=n.extend({processBlock:function(s,a){this._cipher.decryptBlock(s,a)}}),n}(),i.mode.ECB})}(rx)),rx.exports}var ax={exports:{}},fC;function kR(){return fC||(fC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){return i.pad.AnsiX923={pad:function(n,s){var a=n.sigBytes,l=s*4,p=l-a%l,f=a+p-1;n.clamp(),n.words[f>>>2]|=p<<24-f%4*8,n.sigBytes+=p},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},i.pad.Ansix923})}(ax)),ax.exports}var ox={exports:{}},xC;function TR(){return xC||(xC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){return i.pad.Iso10126={pad:function(n,s){var a=s*4,l=a-n.sigBytes%a;n.concat(i.lib.WordArray.random(l-1)).concat(i.lib.WordArray.create([l<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},i.pad.Iso10126})}(ox)),ox.exports}var lx={exports:{}},mC;function MR(){return mC||(mC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){return i.pad.Iso97971={pad:function(n,s){n.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(n,s)},unpad:function(n){i.pad.ZeroPadding.unpad(n),n.sigBytes--}},i.pad.Iso97971})}(lx)),lx.exports}var hx={exports:{}},gC;function PR(){return gC||(gC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){return i.pad.ZeroPadding={pad:function(n,s){var a=s*4;n.clamp(),n.sigBytes+=a-(n.sigBytes%a||a)},unpad:function(n){for(var s=n.words,a=n.sigBytes-1,a=n.sigBytes-1;a>=0;a--)if(s[a>>>2]>>>24-a%4*8&255){n.sigBytes=a+1;break}}},i.pad.ZeroPadding})}(hx)),hx.exports}var cx={exports:{}},yC;function ER(){return yC||(yC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){return i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding})}(cx)),cx.exports}var ux={exports:{}},vC;function AR(){return vC||(vC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),hn())})(Dt,function(i){return function(n){var s=i,a=s.lib,l=a.CipherParams,p=s.enc,f=p.Hex,g=s.format;g.Hex={stringify:function(m){return m.ciphertext.toString(f)},parse:function(m){var k=f.parse(m);return l.create({ciphertext:k})}}}(),i.format.Hex})}(ux)),ux.exports}var dx={exports:{}},bC;function DR(){return bC||(bC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),mo(),go(),wa(),hn())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.BlockCipher,l=n.algo,p=[],f=[],g=[],m=[],k=[],T=[],D=[],P=[],L=[],$=[];(function(){for(var B=[],H=0;H<256;H++)H<128?B[H]=H<<1:B[H]=H<<1^283;for(var U=0,j=0,H=0;H<256;H++){var G=j^j<<1^j<<2^j<<3^j<<4;G=G>>>8^G&255^99,p[U]=G,f[G]=U;var Z=B[U],he=B[Z],ee=B[he],re=B[G]*257^G*16843008;g[U]=re<<24|re>>>8,m[U]=re<<16|re>>>16,k[U]=re<<8|re>>>24,T[U]=re;var re=ee*16843009^he*65537^Z*257^U*16843008;D[G]=re<<24|re>>>8,P[G]=re<<16|re>>>16,L[G]=re<<8|re>>>24,$[G]=re,U?(U=Z^B[B[B[ee^Z]]],j^=B[B[j]]):U=j=1}})();var N=[0,1,2,4,8,16,32,64,128,27,54],E=l.AES=a.extend({_doReset:function(){var B;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var H=this._keyPriorReset=this._key,U=H.words,j=H.sigBytes/4,G=this._nRounds=j+6,Z=(G+1)*4,he=this._keySchedule=[],ee=0;ee<Z;ee++)ee<j?he[ee]=U[ee]:(B=he[ee-1],ee%j?j>6&&ee%j==4&&(B=p[B>>>24]<<24|p[B>>>16&255]<<16|p[B>>>8&255]<<8|p[B&255]):(B=B<<8|B>>>24,B=p[B>>>24]<<24|p[B>>>16&255]<<16|p[B>>>8&255]<<8|p[B&255],B^=N[ee/j|0]<<24),he[ee]=he[ee-j]^B);for(var re=this._invKeySchedule=[],we=0;we<Z;we++){var ee=Z-we;if(we%4)var B=he[ee];else var B=he[ee-4];we<4||ee<=4?re[we]=B:re[we]=D[p[B>>>24]]^P[p[B>>>16&255]]^L[p[B>>>8&255]]^$[p[B&255]]}}},encryptBlock:function(B,H){this._doCryptBlock(B,H,this._keySchedule,g,m,k,T,p)},decryptBlock:function(B,H){var U=B[H+1];B[H+1]=B[H+3],B[H+3]=U,this._doCryptBlock(B,H,this._invKeySchedule,D,P,L,$,f);var U=B[H+1];B[H+1]=B[H+3],B[H+3]=U},_doCryptBlock:function(B,H,U,j,G,Z,he,ee){for(var re=this._nRounds,we=B[H]^U[0],de=B[H+1]^U[1],Re=B[H+2]^U[2],He=B[H+3]^U[3],Ze=4,et=1;et<re;et++){var Pe=j[we>>>24]^G[de>>>16&255]^Z[Re>>>8&255]^he[He&255]^U[Ze++],Le=j[de>>>24]^G[Re>>>16&255]^Z[He>>>8&255]^he[we&255]^U[Ze++],Be=j[Re>>>24]^G[He>>>16&255]^Z[we>>>8&255]^he[de&255]^U[Ze++],X=j[He>>>24]^G[we>>>16&255]^Z[de>>>8&255]^he[Re&255]^U[Ze++];we=Pe,de=Le,Re=Be,He=X}var Pe=(ee[we>>>24]<<24|ee[de>>>16&255]<<16|ee[Re>>>8&255]<<8|ee[He&255])^U[Ze++],Le=(ee[de>>>24]<<24|ee[Re>>>16&255]<<16|ee[He>>>8&255]<<8|ee[we&255])^U[Ze++],Be=(ee[Re>>>24]<<24|ee[He>>>16&255]<<16|ee[we>>>8&255]<<8|ee[de&255])^U[Ze++],X=(ee[He>>>24]<<24|ee[we>>>16&255]<<16|ee[de>>>8&255]<<8|ee[Re&255])^U[Ze++];B[H]=Pe,B[H+1]=Le,B[H+2]=Be,B[H+3]=X},keySize:256/32});n.AES=a._createHelper(E)}(),i.AES})}(dx)),dx.exports}var px={exports:{}},_C;function IR(){return _C||(_C=1,function(t,e){(function(i,n,s){t.exports=n(jt(),mo(),go(),wa(),hn())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.WordArray,l=s.BlockCipher,p=n.algo,f=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],m=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],k=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],T=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],D=p.DES=l.extend({_doReset:function(){for(var N=this._key,E=N.words,B=[],H=0;H<56;H++){var U=f[H]-1;B[H]=E[U>>>5]>>>31-U%32&1}for(var j=this._subKeys=[],G=0;G<16;G++){for(var Z=j[G]=[],he=m[G],H=0;H<24;H++)Z[H/6|0]|=B[(g[H]-1+he)%28]<<31-H%6,Z[4+(H/6|0)]|=B[28+(g[H+24]-1+he)%28]<<31-H%6;Z[0]=Z[0]<<1|Z[0]>>>31;for(var H=1;H<7;H++)Z[H]=Z[H]>>>(H-1)*4+3;Z[7]=Z[7]<<5|Z[7]>>>27}for(var ee=this._invSubKeys=[],H=0;H<16;H++)ee[H]=j[15-H]},encryptBlock:function(N,E){this._doCryptBlock(N,E,this._subKeys)},decryptBlock:function(N,E){this._doCryptBlock(N,E,this._invSubKeys)},_doCryptBlock:function(N,E,B){this._lBlock=N[E],this._rBlock=N[E+1],P.call(this,4,252645135),P.call(this,16,65535),L.call(this,2,858993459),L.call(this,8,16711935),P.call(this,1,1431655765);for(var H=0;H<16;H++){for(var U=B[H],j=this._lBlock,G=this._rBlock,Z=0,he=0;he<8;he++)Z|=k[he][((G^U[he])&T[he])>>>0];this._lBlock=G,this._rBlock=j^Z}var ee=this._lBlock;this._lBlock=this._rBlock,this._rBlock=ee,P.call(this,1,1431655765),L.call(this,8,16711935),L.call(this,2,858993459),P.call(this,16,65535),P.call(this,4,252645135),N[E]=this._lBlock,N[E+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function P(N,E){var B=(this._lBlock>>>N^this._rBlock)&E;this._rBlock^=B,this._lBlock^=B<<N}function L(N,E){var B=(this._rBlock>>>N^this._lBlock)&E;this._lBlock^=B,this._rBlock^=B<<N}n.DES=l._createHelper(D);var $=p.TripleDES=l.extend({_doReset:function(){var N=this._key,E=N.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var B=E.slice(0,2),H=E.length<4?E.slice(0,2):E.slice(2,4),U=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=D.createEncryptor(a.create(B)),this._des2=D.createEncryptor(a.create(H)),this._des3=D.createEncryptor(a.create(U))},encryptBlock:function(N,E){this._des1.encryptBlock(N,E),this._des2.decryptBlock(N,E),this._des3.encryptBlock(N,E)},decryptBlock:function(N,E){this._des3.decryptBlock(N,E),this._des2.encryptBlock(N,E),this._des1.decryptBlock(N,E)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=l._createHelper($)}(),i.TripleDES})}(px)),px.exports}var fx={exports:{}},CC;function FR(){return CC||(CC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),mo(),go(),wa(),hn())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.StreamCipher,l=n.algo,p=l.RC4=a.extend({_doReset:function(){for(var m=this._key,k=m.words,T=m.sigBytes,D=this._S=[],P=0;P<256;P++)D[P]=P;for(var P=0,L=0;P<256;P++){var $=P%T,N=k[$>>>2]>>>24-$%4*8&255;L=(L+D[P]+N)%256;var E=D[P];D[P]=D[L],D[L]=E}this._i=this._j=0},_doProcessBlock:function(m,k){m[k]^=f.call(this)},keySize:256/32,ivSize:0});function f(){for(var m=this._S,k=this._i,T=this._j,D=0,P=0;P<4;P++){k=(k+1)%256,T=(T+m[k])%256;var L=m[k];m[k]=m[T],m[T]=L,D|=m[(m[k]+m[T])%256]<<24-P*8}return this._i=k,this._j=T,D}n.RC4=a._createHelper(p);var g=l.RC4Drop=p.extend({cfg:p.cfg.extend({drop:192}),_doReset:function(){p._doReset.call(this);for(var m=this.cfg.drop;m>0;m--)f.call(this)}});n.RC4Drop=a._createHelper(g)}(),i.RC4})}(fx)),fx.exports}var xx={exports:{}},wC;function BR(){return wC||(wC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),mo(),go(),wa(),hn())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.StreamCipher,l=n.algo,p=[],f=[],g=[],m=l.Rabbit=a.extend({_doReset:function(){for(var T=this._key.words,D=this.cfg.iv,P=0;P<4;P++)T[P]=(T[P]<<8|T[P]>>>24)&16711935|(T[P]<<24|T[P]>>>8)&4278255360;var L=this._X=[T[0],T[3]<<16|T[2]>>>16,T[1],T[0]<<16|T[3]>>>16,T[2],T[1]<<16|T[0]>>>16,T[3],T[2]<<16|T[1]>>>16],$=this._C=[T[2]<<16|T[2]>>>16,T[0]&4294901760|T[1]&65535,T[3]<<16|T[3]>>>16,T[1]&4294901760|T[2]&65535,T[0]<<16|T[0]>>>16,T[2]&4294901760|T[3]&65535,T[1]<<16|T[1]>>>16,T[3]&4294901760|T[0]&65535];this._b=0;for(var P=0;P<4;P++)k.call(this);for(var P=0;P<8;P++)$[P]^=L[P+4&7];if(D){var N=D.words,E=N[0],B=N[1],H=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,U=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,j=H>>>16|U&4294901760,G=U<<16|H&65535;$[0]^=H,$[1]^=j,$[2]^=U,$[3]^=G,$[4]^=H,$[5]^=j,$[6]^=U,$[7]^=G;for(var P=0;P<4;P++)k.call(this)}},_doProcessBlock:function(T,D){var P=this._X;k.call(this),p[0]=P[0]^P[5]>>>16^P[3]<<16,p[1]=P[2]^P[7]>>>16^P[5]<<16,p[2]=P[4]^P[1]>>>16^P[7]<<16,p[3]=P[6]^P[3]>>>16^P[1]<<16;for(var L=0;L<4;L++)p[L]=(p[L]<<8|p[L]>>>24)&16711935|(p[L]<<24|p[L]>>>8)&4278255360,T[D+L]^=p[L]},blockSize:128/32,ivSize:64/32});function k(){for(var T=this._X,D=this._C,P=0;P<8;P++)f[P]=D[P];D[0]=D[0]+1295307597+this._b|0,D[1]=D[1]+3545052371+(D[0]>>>0<f[0]>>>0?1:0)|0,D[2]=D[2]+886263092+(D[1]>>>0<f[1]>>>0?1:0)|0,D[3]=D[3]+1295307597+(D[2]>>>0<f[2]>>>0?1:0)|0,D[4]=D[4]+3545052371+(D[3]>>>0<f[3]>>>0?1:0)|0,D[5]=D[5]+886263092+(D[4]>>>0<f[4]>>>0?1:0)|0,D[6]=D[6]+1295307597+(D[5]>>>0<f[5]>>>0?1:0)|0,D[7]=D[7]+3545052371+(D[6]>>>0<f[6]>>>0?1:0)|0,this._b=D[7]>>>0<f[7]>>>0?1:0;for(var P=0;P<8;P++){var L=T[P]+D[P],$=L&65535,N=L>>>16,E=(($*$>>>17)+$*N>>>15)+N*N,B=((L&4294901760)*L|0)+((L&65535)*L|0);g[P]=E^B}T[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,T[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,T[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,T[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,T[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,T[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,T[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,T[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}n.Rabbit=a._createHelper(m)}(),i.Rabbit})}(xx)),xx.exports}var mx={exports:{}},SC;function LR(){return SC||(SC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),mo(),go(),wa(),hn())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.StreamCipher,l=n.algo,p=[],f=[],g=[],m=l.RabbitLegacy=a.extend({_doReset:function(){var T=this._key.words,D=this.cfg.iv,P=this._X=[T[0],T[3]<<16|T[2]>>>16,T[1],T[0]<<16|T[3]>>>16,T[2],T[1]<<16|T[0]>>>16,T[3],T[2]<<16|T[1]>>>16],L=this._C=[T[2]<<16|T[2]>>>16,T[0]&4294901760|T[1]&65535,T[3]<<16|T[3]>>>16,T[1]&4294901760|T[2]&65535,T[0]<<16|T[0]>>>16,T[2]&4294901760|T[3]&65535,T[1]<<16|T[1]>>>16,T[3]&4294901760|T[0]&65535];this._b=0;for(var $=0;$<4;$++)k.call(this);for(var $=0;$<8;$++)L[$]^=P[$+4&7];if(D){var N=D.words,E=N[0],B=N[1],H=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,U=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,j=H>>>16|U&4294901760,G=U<<16|H&65535;L[0]^=H,L[1]^=j,L[2]^=U,L[3]^=G,L[4]^=H,L[5]^=j,L[6]^=U,L[7]^=G;for(var $=0;$<4;$++)k.call(this)}},_doProcessBlock:function(T,D){var P=this._X;k.call(this),p[0]=P[0]^P[5]>>>16^P[3]<<16,p[1]=P[2]^P[7]>>>16^P[5]<<16,p[2]=P[4]^P[1]>>>16^P[7]<<16,p[3]=P[6]^P[3]>>>16^P[1]<<16;for(var L=0;L<4;L++)p[L]=(p[L]<<8|p[L]>>>24)&16711935|(p[L]<<24|p[L]>>>8)&4278255360,T[D+L]^=p[L]},blockSize:128/32,ivSize:64/32});function k(){for(var T=this._X,D=this._C,P=0;P<8;P++)f[P]=D[P];D[0]=D[0]+1295307597+this._b|0,D[1]=D[1]+3545052371+(D[0]>>>0<f[0]>>>0?1:0)|0,D[2]=D[2]+886263092+(D[1]>>>0<f[1]>>>0?1:0)|0,D[3]=D[3]+1295307597+(D[2]>>>0<f[2]>>>0?1:0)|0,D[4]=D[4]+3545052371+(D[3]>>>0<f[3]>>>0?1:0)|0,D[5]=D[5]+886263092+(D[4]>>>0<f[4]>>>0?1:0)|0,D[6]=D[6]+1295307597+(D[5]>>>0<f[5]>>>0?1:0)|0,D[7]=D[7]+3545052371+(D[6]>>>0<f[6]>>>0?1:0)|0,this._b=D[7]>>>0<f[7]>>>0?1:0;for(var P=0;P<8;P++){var L=T[P]+D[P],$=L&65535,N=L>>>16,E=(($*$>>>17)+$*N>>>15)+N*N,B=((L&4294901760)*L|0)+((L&65535)*L|0);g[P]=E^B}T[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,T[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,T[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,T[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,T[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,T[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,T[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,T[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}n.RabbitLegacy=a._createHelper(m)}(),i.RabbitLegacy})}(mx)),mx.exports}var gx={exports:{}},kC;function NR(){return kC||(kC=1,function(t,e){(function(i,n,s){t.exports=n(jt(),mo(),go(),wa(),hn())})(Dt,function(i){return function(){var n=i,s=n.lib,a=s.BlockCipher,l=n.algo;const p=16,f=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],g=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var m={pbox:[],sbox:[]};function k($,N){let E=N>>24&255,B=N>>16&255,H=N>>8&255,U=N&255,j=$.sbox[0][E]+$.sbox[1][B];return j=j^$.sbox[2][H],j=j+$.sbox[3][U],j}function T($,N,E){let B=N,H=E,U;for(let j=0;j<p;++j)B=B^$.pbox[j],H=k($,B)^H,U=B,B=H,H=U;return U=B,B=H,H=U,H=H^$.pbox[p],B=B^$.pbox[p+1],{left:B,right:H}}function D($,N,E){let B=N,H=E,U;for(let j=p+1;j>1;--j)B=B^$.pbox[j],H=k($,B)^H,U=B,B=H,H=U;return U=B,B=H,H=U,H=H^$.pbox[1],B=B^$.pbox[0],{left:B,right:H}}function P($,N,E){for(let G=0;G<4;G++){$.sbox[G]=[];for(let Z=0;Z<256;Z++)$.sbox[G][Z]=g[G][Z]}let B=0;for(let G=0;G<p+2;G++)$.pbox[G]=f[G]^N[B],B++,B>=E&&(B=0);let H=0,U=0,j=0;for(let G=0;G<p+2;G+=2)j=T($,H,U),H=j.left,U=j.right,$.pbox[G]=H,$.pbox[G+1]=U;for(let G=0;G<4;G++)for(let Z=0;Z<256;Z+=2)j=T($,H,U),H=j.left,U=j.right,$.sbox[G][Z]=H,$.sbox[G][Z+1]=U;return!0}var L=l.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var $=this._keyPriorReset=this._key,N=$.words,E=$.sigBytes/4;P(m,N,E)}},encryptBlock:function($,N){var E=T(m,$[N],$[N+1]);$[N]=E.left,$[N+1]=E.right},decryptBlock:function($,N){var E=D(m,$[N],$[N+1]);$[N]=E.left,$[N+1]=E.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=a._createHelper(L)}(),i.Blowfish})}(gx)),gx.exports}(function(t,e){(function(i,n,s){t.exports=n(jt(),Ip(),dR(),pR(),mo(),fR(),go(),FT(),ly(),xR(),BT(),mR(),gR(),yR(),hy(),vR(),wa(),hn(),bR(),_R(),CR(),wR(),SR(),kR(),TR(),MR(),PR(),ER(),AR(),DR(),IR(),FR(),BR(),LR(),NR())})(Dt,function(i){return i})})(IT);var RR=IT.exports;const y1=v1(RR);function TC(t,e,i){const n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);let s="expires="+n.toUTCString();e=y1.AES.encrypt(e,"@#$ *IlO0Oo0_-"),document.cookie=t+"="+e+"; "+s+"; SameSite=None; Secure; path=/"}function m0(t){let e=t+"=",i=document.cookie.split(";");for(let n=0;n<i.length;n++){let s=i[n];for(;s.charAt(0)===" ";)s=s.substring(1);if(s.indexOf(e)===0){let a=s.substring(e.length,s.length);return a=y1.AES.decrypt(a,"@#$ *IlO0Oo0_-").toString(y1.enc.Utf8),a}}return""}const VR=()=>{let[t,e]=ne.useState(""),[i,n]=ne.useState(""),[s,a]=ne.useState("");const l=p=>{if(p.preventDefault(),t===""||i===""){a("Can't login with empty credentials!");return}oy("users",t,i).then(f=>{f[0]?(TC("email",t,30),TC("pswd",i,30),window.location.reload()):a("Wrong Credentials!")})};return w.jsx("div",{className:"max-w-[500px] mx-auto min-h-screen p-20 flex justify-center items-center",children:w.jsxs("form",{className:"w-full",children:[w.jsx("div",{className:" pb-10",children:w.jsx("img",{src:ET,alt:"",className:"w-[250px] mx-auto"})}),w.jsxs("div",{className:"loginDivCont",children:[w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx("label",{children:"Employee ID"}),w.jsx("input",{type:"text",placeholder:"Your Email",className:"p-2 rounded-full bg-gray-200 outline-none focus:outline-none border border-gray-400",value:t,onChange:p=>e(p.target.value),required:!0})," "]}),w.jsx("br",{}),w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx("label",{children:"Password"}),w.jsx("input",{placeholder:"Your Password",type:"password",className:"p-2 rounded-full bg-gray-200 outline-none focus:outline-none border border-gray-400",value:i,onChange:p=>n(p.target.value),required:!0})]}),w.jsx("br",{}),w.jsx("button",{className:"btn-primary mx-auto",onClick:l,children:"LOG IN"}),w.jsx("p",{className:"loginMsg",children:s})]})]})})};function OR(){let[t,e]=ne.useState("unknown"),[i,n]=ne.useState(w.jsx(w.Fragment,{}));return ne.useEffect(()=>{oy("users",m0("email"),m0("pswd")).then(s=>{s[0]?e("is_user"):e("not_user")})},[]),ne.useEffect(()=>{t==="unknown"?n(w.jsx("div",{className:"min-h-screen flex justify-center items-center",children:w.jsx(ry,{height:"80",width:"80",color:"#4fa94d",ariaLabel:"triangle-loading",visible:!0})})):t==="not_user"&&n(w.jsx(VR,{}))},[t]),console.log("isUser",t),t!=="is_user"?w.jsx(w.Fragment,{children:i}):w.jsxs("div",{className:"flex gap-6",children:[w.jsx(rR,{}),w.jsx("div",{className:"container mx-auto w-full p-4",children:w.jsx(AP,{})})]})}function LT(t){const e=new Date(t*1e3),i={year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0};return e.toLocaleString("en-US",i)}function jR({ReportData:t}){return w.jsxs("div",{className:"border border-gray-600 rounded-t-lg",children:[w.jsxs("div",{className:"border flex gap-4 items-center justify-between p-4 bg-primary text-white rounded-t-lg",children:[w.jsx("p",{className:"w-full",children:"ID"}),w.jsx("p",{className:"w-full",children:"Machine Number"}),w.jsx("p",{className:"w-full",children:"Tared On"})]}),t.map((e,i)=>w.jsxs("div",{className:"border border-gray-600 flex gap-4 items-center justify-between p-4",children:[w.jsx("p",{className:"w-full",children:i+1}),w.jsxs("p",{className:"w-full",children:["FM ",e==null?void 0:e.machine_no]}),w.jsx("p",{className:"w-full",children:LT(e==null?void 0:e.unix_time)})]},e.id))]})}function WR({coilWeight:t,ReportData:e,handleWeightChange:i,handleUpdate:n}){return w.jsxs("div",{className:"border border-gray-600 rounded-t-lg",children:[w.jsxs("div",{className:"border flex gap-4 items-center justify-between p-4 bg-primary text-white rounded-t-lg",children:[w.jsx("p",{className:"w-full",children:"ID"}),w.jsx("p",{className:"w-full",children:"Machine Number"}),w.jsx("p",{className:"w-full",children:"Changed On"}),w.jsx("p",{className:"w-full",children:"Coil Weight"}),w.jsx("p",{className:"w-full",children:"Coil Weight"})]}),e.map((s,a)=>w.jsxs("div",{className:"border border-gray-600 flex gap-4 items-center justify-between p-4",children:[w.jsx("p",{className:"w-full",children:a+1}),w.jsxs("p",{className:"w-full",children:["FM ",s==null?void 0:s.machine_no]}),w.jsx("p",{className:"w-full",children:LT(s==null?void 0:s.unix_time)}),w.jsx("div",{className:"w-full",children:w.jsx("input",{className:" border px-4 py-2 rounded-md border-gray-500 outline-none focus:outline-none",type:"text",placeholder:"Enter coil weight",value:t[s.id]||"",onChange:l=>i(s.id,l.target.value)})}),w.jsx("p",{className:"w-full",children:w.jsx("button",{onClick:l=>n(l,s.id),className:"bg-primary px-4 py-2 rounded-md text-white",children:"Update"})})]},s.id))]})}function zR(){let[t,e]=ne.useState([]),[i,n]=ne.useState(!0),[s,a]=ne.useState(!1),[l,p]=ne.useState({});ne.useEffect(()=>{a(!1);const m=vi(Mt,i?"tareUpdates":"coilChangeUpdate"),k=_r(m,Ns("unix_time","desc"),rr(50));Qc(k,T=>{let D=[];T.forEach(P=>{D.push({id:P.id,...P.data()}),i||p(L=>({...L,[P.id]:P.data().weight}))}),e(D),a(!0)})},[i]);const f=async(m,k)=>{const T=Xi(Mt,"coilChangeUpdate",k),D=l[k];if(console.log(k,D),D)try{m.target.innerText="wait...",await Ag(T,{weight:parseFloat(D)}),m.target.innerText="Updated"}catch{m.target.innerText="error!"}else m.target.innerText="Invalid!";setTimeout(()=>{m.target.innerText="Update"},1500)},g=(m,k)=>{p(T=>({...T,[m]:k}))};return w.jsxs("div",{children:[w.jsxs("div",{className:"flex  flex-col gap-10 pb-6",children:[w.jsx("h2",{className:"text-4xl font-sans font-medium",children:"Tare and Coil Changing Updates"}),w.jsxs("div",{className:"flex gap-8 items-center text-white",children:[w.jsx("button",{className:`px-6 py-2 rounded-md ${i?"bg-primary":"text-black bg-primary/20"}`,onClick:()=>n(!0),children:"Tare Updates"}),w.jsx("button",{className:`px-6 py-2 rounded-md ${i?"text-black bg-primary/20":"bg-primary"}`,onClick:()=>n(!1),children:"Coil Changing Updates"})]})]}),i?s&&w.jsx(jR,{ReportData:t}):s&&w.jsx("div",{children:w.jsx(WR,{ReportData:t,handleUpdate:f,handleWeightChange:g,coilWeight:l})})]})}const $R="/assets/realtime_reports-CvrCL2Xo.svg",HR="/assets/daily_report-ChCnQ_ll.svg",YR="/assets/Weekly_Report-Cg7tGW6d.svg",XR="/assets/Monthly_Report-DcZqTp8z.svg",UR="/assets/Quarterly_Report-B3UWh9YE.svg",GR="/assets/Yearly_Report-Dkqe5c6n.svg",KR="/assets/Machine_Efficiency-DTJmyKtf.svg";function QR(){return w.jsxs("div",{className:"py-4",children:[w.jsx("h2",{className:"text-3xl py-10 font-bold ",children:"Reports"}),w.jsxs("div",{className:"grid grid-cols1 md:grid-cols-4 gap-x-10 gap-y-20",children:[w.jsx(ur,{to:"/reports/realtime-reports",children:w.jsxs("div",{className:"rounded-lg shadow-xl cursor-pointer px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[w.jsx("img",{src:$R,alt:"",className:"h-[100px] w-auto"}),w.jsx("p",{className:"text-2xl",children:"Realtime Report "})]})}),w.jsx(ur,{to:"/reports/daily-reports",children:w.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[w.jsx("img",{src:HR,alt:"",className:"h-[100px] w-auto"}),w.jsx("p",{className:"text-2xl",children:"Daily Report "})]})}),w.jsx(ur,{to:"/reports/weekly-reports",children:w.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[w.jsx("img",{src:YR,alt:"",className:"h-[100px] w-auto"}),w.jsx("p",{className:"text-2xl",children:"Weekly Report "})]})}),w.jsx(ur,{to:"/reports/monthly-reports",children:w.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[w.jsx("img",{src:XR,alt:"",className:"h-[100px] w-auto"}),w.jsx("p",{className:"text-2xl",children:"Monthly Report "})]})}),w.jsx(ur,{to:"/reports/quarterly-reports",children:w.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[w.jsx("img",{src:UR,alt:"",className:"h-[100px] w-auto"}),w.jsx("p",{className:"text-2xl",children:"Quarterly Report "})]})}),w.jsx(ur,{to:"/reports/yearly-reports",children:w.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[w.jsx("img",{src:GR,alt:"",className:"h-[100px] w-auto"}),w.jsx("p",{className:"text-2xl",children:"Yearly Report "})]})}),w.jsx(ur,{to:"/reports/machine-efficiency",children:w.jsxs("div",{className:"rounded-lg shadow-xl px-4 py-8 flex justify-center items-center flex-col gap-4 ",children:[w.jsx("img",{src:KR,alt:"",className:"h-[100px] w-auto"}),w.jsx("p",{className:"text-2xl",children:"Machine Efficiency "})]})})]})]})}function ZR({ReportData:t,startIndex:e}){return w.jsxs("div",{className:"border border-gray-800 rounded-t-lg",children:[w.jsxs("div",{className:"border grid grid-cols-8 justify-between bg-primary text-white rounded-t-lg",children:[w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:"ID"}),w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:"Machine Number"}),w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:"Product Type"}),w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:"Thickness"}),w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:"Product Count"}),w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:"Total weight"}),w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:"Shift"}),w.jsx("p",{className:"w-full p-4",children:"Last Production Time"})]}),t.map((i,n)=>w.jsxs("div",{className:`border border-gray-800 grid grid-cols-8  justify-between ${(i==null?void 0:i.status)=="new"?"bg-green-100":""}`,children:[w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:n+1+parseInt(e)}),w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:i==null?void 0:i.machine_no}),w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:i==null?void 0:i.product_type}),w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:i==null?void 0:i.thickness}),w.jsxs("p",{className:"w-full border-r border-r-gray-800 p-4",children:[i==null?void 0:i.count," "]}),w.jsxs("p",{className:"w-full border-r border-r-gray-800 p-4",children:[i==null?void 0:i.weight," KG"]}),w.jsx("p",{className:"w-full border-r border-r-gray-800 p-4",children:i==null?void 0:i.shift}),w.jsxs("p",{className:"w-full p-4",children:[i.date," ",`${i.time.toString().slice(0,2)}:${i.time.toString().slice(2,4)}:${i.time.toString().slice(4,6)}`]})]},i.id))]})}function JR(){let[t,e]=ne.useState([]),[i,n]=ne.useState(null),[s,a]=ne.useState(0),[l,p]=ne.useState(0);const f=30,g="machines";ne.useEffect(()=>{const D=vi(Mt,g),P=_r(D,Ns("unix_time","desc"),rr(f));m(P,0)},[]);const m=(D,P)=>{Qc(D,L=>{e($=>{let N=[];return L.forEach(E=>{const B={id:E==null?void 0:E.id,...E==null?void 0:E.data()},H=$.some(U=>U.id==B.id);B.status=($==null?void 0:$.length)===0||H?"old":"new",N.push(B)}),N.length>0&&(n(L),p(N.length),a(E=>E+P)),N})})},k=()=>{if(!i){console.error("Snapshot is not available yet.");return}console.log("CLicked");let D=vi(Mt,g);const P=_r(D,Ns("unix_time","desc"),PI(i.docs[t.length-1]),rr(f));m(P,1)},T=()=>{if(!i){console.error("Snapshot is not available yet.");return}let D=vi(Mt,g);const P=_r(D,Ns("unix_time","desc"),EI(i.docs[0]),MI(f));m(P,-1)};return w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold py-8",children:"Realtime Report "}),w.jsx(ZR,{ReportData:t,startIndex:s*f}),w.jsxs("div",{className:"flex justify-center items-center py-20 gap-10",children:[w.jsx("button",{className:`px-6 py-2 rounded-full text-xl ${s===0?"bg-gray-500":"bg-yellow-500"}`,onClick:T,disabled:s===0,children:"Previous"}),w.jsx("button",{className:`px-6 py-2 rounded-full  text-xl ${l<f?"bg-gray-500":"bg-yellow-500"}`,onClick:k,disabled:l<f,children:"Next"})]})]})}const zs=["Round Pipe","Rectangular Pipe","Square Pipe","Design Pipe","Spiral Pipe","Half Round Pipe","Schedule Pipe"],od=["Morning","Night"],qR=["manager","admin","owner","in-charge","machine-operator"],Eo=["0.4mm","0.5mm","0.6mm","0.7mm","0.8mm","1.0mm","1.2mm","1.5mm","2.0mm","2.5mm"],eV=["3/8 inch","5/8 inch","1 inch","11/2 inch","21/2 inch","3/8 inch x 3/8 inch","1/2 inch x 3/4 inch","1/2 inchx11/2 inch","5/8 inch x 5/8 inch","3/4 inch x 11/2 inch","1 inch x 11/2 inch","11/2 inch x 11/2 inch","2 inch x 1 inch","21/2 inch x 1 inch","3 inch x 1 inch","3 inch x 2 inch","3 inch x 3 inch","3 inch x 11/2 inch","1/2 inch","3/4 inch","11/4 inch","2 inch","3 inch","4 inch","1/2 inch x 1/2 inch","1/2 inch x 1 inch","1/2 inch x 2 inch","3/4 inch x 3/4 inch","1 inch x 1 inch","11/4 inch x 11/4 inch","11/2 inch x 2 inch","2 inch x 2 inch","21/2 inch x 11/2 inch","3 inch x 11/4 inch","61 inch x 29.5 inch","4 inch x 2 inch"];function tV(){const t="machinesIndividual",e="damagedProducts";let i=ne.useRef(null),n=ne.useRef(null),s=ne.useRef(null),[a,l]=ne.useState(!0),[p,f]=ne.useState(new Set([]));ne.useEffect(()=>{n.current.valueAsDate=new Date;let T=new Set([]);const D=Xi(Mt,"information","info");Qn(D).then(P=>{let L=P.data();L.forming_machine.forEach($=>{T.add($)}),L.polish_machine.forEach($=>{T.add($)}),f(T)})},[]);function g(){let T=0,D=new Date(i.current.value),P=new Date(n.current.value);if(i.current.value===""||n.current.value==="")return m("Invalid Parameters!"),null;if(D.getTime()>P.getTime())return m("Start date should be less than End Date"),null;m("Please be Patient ..."),l(!1);async function L($){let N=new Date($);N.setHours(0),N.setMinutes(0),N.setSeconds(0);let E=new Date($);E.setHours(23),E.setMinutes(59),E.setSeconds(59);let B=vi(Mt,t);Array.from(p).map((H,U)=>{zs.map((j,G)=>{let Z=0,he=0,ee=0,re=0,we=0,de=0,Re=0,He=0,Ze=0,et=Ln(B,ct("unix_time",">=",Math.floor(N.getTime()/1e3)),ct("unix_time","<=",Math.floor(E.getTime()/1e3)),ct("machine_no","==",H),ct("product_type","==",j));gn(et).then(Pe=>{Pe.forEach(X=>{Re++,T++;const _e=X.data();_e.shift==="Morning"?parseFloat(_e.weight)>0&&(Z+=Math.abs(parseInt(_e.count)),he+=parseFloat(_e.weight)):parseFloat(_e.weight)>0&&(ee+=Math.abs(parseInt(_e.count)),re+=parseFloat(_e.weight))}),we=(Z+ee).toFixed(2),de=(re+he).toFixed(2);let Le=vi(Mt,e),Be=Ln(Le,ct("unix_time",">=",Math.floor(N.getTime()/1e3)),ct("unix_time","<=",Math.floor(E.getTime()/1e3)),ct("machine_no","==",H),ct("product_type","==",j));gn(Be).then(X=>{X.forEach(_e=>{const me=_e.data();me.shift==="Morning"?He+=parseInt(me.damagedProductCount):Ze+=parseInt(me.damagedProductCount)}),Re!==0&&k(`${N.getDate()}/${N.getMonth()+1}/${N.getFullYear()}`,H,j,He,Z,he.toFixed(2),Z-He,Ze,ee,re.toFixed(2),ee-Ze,we-He-Ze,de),(U+1)*(G+1)===p.size*zs.length&&(T===0&&m("No Data Available in this Date Range"),l(!0))})})})})}for(;L(P),D.getTime()!==P.getTime();)P.setDate(P.getDate()-1)}const m=T=>{s.current.innerHTML=`<tr id="reportStatus" >
              <td class="border border-gray-500 text-center py-4 " colSpan="13">
                ${T}
            </td>
        </tr>`},k=(T,D,P,L,$,N,E,B,H,U,j,G,Z)=>{const he=document.createElement("tr");he.innerHTML=`
      <tr>
        <td class="border border-black p-4">${T}</td>
        <td class="border border-black p-4">${D}</td>
        <td class="border border-black p-4">${P}</td>
        
        <td class="border border-black p-4">${$}</td>
        <td class="border border-black p-4">${L}</td>
        <td class="border border-black p-4">${E}</td>
        <td class="border border-black p-4">${N}</td>
        
        <td class="border border-black p-4">${H}</td>
        <td class="border border-black p-4">${B}</td>
        <td class="border border-black p-4">${j}</td>
        <td class="border border-black p-4">${U}</td>
        
        <td class="border border-black p-4">${G}</td>
        <td class="border border-black p-4">${Z}</td>
      </tr>
    `;let ee=document.getElementById("reportStatus");ee!==null&&ee.remove(),s.current.appendChild(he)};return w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold py-8",children:"Daily Report "}),w.jsxs("div",{className:"container mx-auto flex gap-4 justify-center items-center mb-10",children:[w.jsxs("div",{className:"flex gap-4 items-center",children:[w.jsx("h2",{children:"From"}),w.jsx("input",{type:"date",ref:i,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",placeholder:"From"})," ",w.jsx("h2",{children:"To"}),w.jsx("input",{type:"date",ref:n,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",placeholder:"To"})]}),w.jsx("button",{onClick:g,disabled:!a,className:"px-6 py-2 rounded-full bg-black text-white",children:a?"Generate":"Please Wait ..."}),w.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),w.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",w.jsx(Gl,{})]})]}),w.jsx("div",{className:"w-full",children:w.jsxs("table",{id:"table-to-xls",className:"w-full",children:[w.jsxs("thead",{className:"bg-primary text-white font-light rounded-lg",children:[w.jsxs("tr",{children:[w.jsx("th",{rowSpan:"2",className:"border border-black",children:"Date"}),w.jsx("th",{rowSpan:"2",className:"border border-black",children:"Machine No."}),w.jsx("th",{rowSpan:"2",className:"border border-black",children:"Product Type"}),w.jsx("th",{colSpan:"4",className:"border border-black",children:"Morning"}),w.jsx("th",{colSpan:"4",className:"border border-black",children:"Night"}),w.jsx("th",{rowSpan:"2",className:"border border-black",children:"Total Product"}),w.jsx("th",{rowSpan:"2",className:"border border-black",children:"Total Weight"})]}),w.jsxs("tr",{className:"border border-black",children:[w.jsx("th",{className:"border border-black",children:"Total"}),w.jsx("th",{style:{color:"#bd0000"},className:"border border-black",children:"Damaged"}),w.jsx("th",{className:"border border-black",children:"Net"}),w.jsx("th",{className:"border border-black",children:"Weight"}),w.jsx("th",{className:"border border-black",children:"Total"}),w.jsx("th",{style:{color:"#bd0000"},className:"border border-black",children:"Damaged"}),w.jsx("th",{className:"border border-black",children:"Net"}),w.jsx("th",{className:"border border-black",children:"Weight"})]})]}),w.jsx("tbody",{ref:s,children:w.jsx("tr",{children:w.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}function iV(){const t="machinesIndividual",e="damagedProducts";let i=ne.useRef(null),n=ne.useRef(null),s=ne.useRef(null),[a,l]=ne.useState(!0),[p,f]=ne.useState(new Set([]));ne.useEffect(()=>{n.current.valueAsDate=new Date;let T=new Set([]);const D=Xi(Mt,"information","info");Qn(D).then(P=>{let L=P.data();L.forming_machine.forEach($=>{T.add($)}),L.polish_machine.forEach($=>{T.add($)}),f(T)})},[]);const g=()=>{let T=0,D=new Date(n.current.value);D.setHours(0),D.setMinutes(0),D.setMilliseconds(0),D.setSeconds(0);let P=parseInt(i.current.value);if(i.current.value===""||i.current.value<=0)return m("Week Range cannot be empty"),null;if(n.current.value==="")return m("Date is Empty!"),null;m("Please be Patient ..."),l(!1);async function L($,N=!1){let E=new Date($);E.setHours(23),E.setMinutes(59),E.setSeconds(59);let B=new Date($);B.setDate(B.getDate()-6),B.setHours(0),B.setMinutes(0),B.setSeconds(0),console.log(E,B);let H=vi(Mt,t);Array.from(p).map((U,j)=>{zs.map((G,Z)=>{let he=0,ee=0,re=0,we=0,de=0,Re=Ln(H,ct("unix_time",">=",Math.floor(B.getTime()/1e3)),ct("unix_time","<=",Math.floor(E.getTime()/1e3)),ct("machine_no","==",U),ct("product_type","==",G));gn(Re).then(He=>{He.forEach(Pe=>{re++,T++;const Le=Pe.data();parseFloat(Le.weight)>0&&(ee+=parseFloat(Le.weight),he+=Math.abs(parseInt(Le.count)))});let Ze=vi(Mt,e),et=Ln(Ze,ct("unix_time",">=",Math.floor(B.getTime()/1e3)),ct("unix_time","<=",Math.floor(E.getTime()/1e3)),ct("machine_no","==",U),ct("product_type","==",G));gn(et).then(Pe=>{Pe.forEach(Le=>{const Be=Le.data();Be.shift==="Morning"?we+=parseInt(Be.damagedProductCount):de+=parseInt(Be.damagedProductCount),console.log("Morning Damaged",we,"Night Damaged",de)}),re!==0&&k(`${E.getDate()}/${E.getMonth()+1}/${E.getFullYear()} - 
                                      ${B.getDate()}/${B.getMonth()+1}/${B.getFullYear()}`,U,G,we+de,he,he-we-de,parseFloat(ee).toFixed(2)),(j+1)*(Z+1)===p.size*zs.length&&(T===0&&m("No Data Available in this Date Range"),l(!0))})})})})}for(let $=0;$<P;$++)L(D,$+1===P),D.setDate(D.getDate()-7)},m=T=>{s.current.innerHTML=`<tr>
              <td class="border border-black p-4 text-center" id='reportStatus' colSpan="9">
                  ${T}
              </td>
          </tr>`},k=(T,D,P,L,$,N,E)=>{const B=document.createElement("tr");B.innerHTML=`<tr>
          <td class="border border-black p-4">${T}</td>
          <td class="border border-black p-4">${D}</td>
          <td class="border border-black p-4">${P}</td>
          <td class="border border-black p-4">${L}</td>
          <td class="border border-black p-4">${$}</td>
          <td class="border border-black p-4">${N}</td>
          <td class="border border-black p-4">${E}</td>
          </tr>`;let H=document.getElementById("reportStatus");H&&H.remove(),s.current.appendChild(B)};return w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold py-8",children:"Weekly Report "}),w.jsxs("div",{className:"container mx-auto flex gap-4 justify-center items-center mb-10",children:[w.jsxs("div",{className:"flex gap-4 items-center",children:[w.jsx("h2",{children:"Date"}),w.jsx("input",{type:"number",ref:i,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",placeholder:"Weeks"})," ",w.jsx("h2",{children:"To"}),w.jsx("input",{type:"date",ref:n,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",placeholder:"To"})]}),w.jsx("button",{onClick:g,disabled:!a,className:"px-6 py-2 rounded-full bg-black text-white",children:a?"Generate":"Please Wait ..."}),w.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),w.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",w.jsx(Gl,{})]})]}),w.jsx("div",{className:"w-full",children:w.jsxs("table",{id:"table-to-xls",className:"w-full",children:[w.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:w.jsxs("tr",{children:[w.jsx("th",{className:"border border-black p-2",children:"Week"}),w.jsx("th",{className:"border border-black p-2",children:"Machine No."}),w.jsx("th",{className:"border border-black p-2",children:"Product Type"}),w.jsx("th",{style:{color:"#bd0000"},className:"border border-black p-2",children:"Damaged Product"}),w.jsx("th",{className:"border border-black p-2",children:"Total Product"}),w.jsx("th",{className:"border border-black p-2",children:"Net"}),w.jsx("th",{className:"border border-black p-2",children:"Total Weight"})]})}),w.jsx("tbody",{ref:s,children:w.jsx("tr",{children:w.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}function nV(){const t="machinesIndividual",e="damagedProducts";let i=ne.useRef(null),n=ne.useRef(null),s=ne.useRef(null),a=ne.useRef(null);const l=parseInt(new Date().getFullYear());let[p,f]=ne.useState(!0),[g,m]=ne.useState(new Set([]));ne.useEffect(()=>{let P=new Set([]);const L=Xi(Mt,"information","info");Qn(L).then($=>{let N=$.data();N.forming_machine.forEach(E=>{P.add(E)}),N.polish_machine.forEach(E=>{P.add(E)}),m(P)})},[]);function k(){let P=new Date;P.setMilliseconds(0),P.setSeconds(0),P.setMinutes(0),P.setHours(0),P.setDate(1),P.setMonth(parseInt(s.current.value)),P.setFullYear(parseInt(n.current.value));let L=0;if(a.current.value===""||s.current.value==="")return T("Month Range cannot be empty!"),null;if(a.current.value<s.current.value)return T("Start month should be less than end month!"),null;T("Please Be Patient ..."),f(!1);const $=N=>{let E=new Date(N),B=new Date(n.current.value,E.getMonth()+1,0);B.setHours(23),B.setMinutes(59),B.setSeconds(59);const H=vi(Mt,t);Array.from(g).map((U,j)=>{zs.map((G,Z)=>{let he=0,ee=0,re=0,we=0,de=0;const Re=Ln(H,ct("unix_time",">=",Math.floor(E.getTime()/1e3)),ct("unix_time","<=",Math.floor(B.getTime()/1e3)),ct("machine_no","==",U),ct("product_type","==",G));gn(Re).then(He=>{He.forEach(Pe=>{re++,L++;const Le=Pe.data();parseFloat(Le.weight)>0&&(ee+=parseFloat(Le.weight),he+=Math.abs(parseInt(Le.count)))});let Ze=vi(Mt,e),et=Ln(Ze,ct("unix_time",">=",Math.floor(E.getTime()/1e3)),ct("unix_time","<=",Math.floor(B.getTime()/1e3)),ct("machine_no","==",U),ct("product_type","==",G));gn(et).then(Pe=>{Pe.forEach(Le=>{const Be=Le.data();Be.shift==="Morning"?we+=parseInt(Be.damagedProductCount):de+=parseInt(Be.damagedProductCount),console.log("Morning Damaged",we,"Night Damaged",de)}),re!==0&&D(E.toLocaleString("default",{month:"long"}),U,G,we+de,he,he-we-de,parseFloat(ee).toFixed(2)),(j+1)*(Z+1)===g.size*zs.length&&(L===0&&T("No Data Available in this Date Range"),f(!0))})})})})};for(;P.getMonth()<=a.current.value;)$(P),P.setMonth(P.getMonth()+1)}const T=P=>{i.current.innerHTML=`<tr>
              <td class='border border-black text-center py-4' id='reportStatus' colSpan="9">
                  ${P}
              </td>
          </tr>`},D=(P,L,$,N,E,B,H)=>{const U=document.createElement("tr");U.innerHTML=`<tr>
          <td class="border border-black p-4">${P}</td>
          <td class="border border-black p-4">${L}</td>
          <td class="border border-black p-4">${$}</td>
          <td class="border border-black p-4">${N}</td>
          <td class="border border-black p-4">${E}</td>
          <td class="border border-black p-4">${B}</td>
          <td class="border border-black p-4">${H}</td>
          </tr>`;let j=document.getElementById("reportStatus");j&&j.remove(),i.current.appendChild(U)};return w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold py-8",children:"Monthly Report "}),w.jsxs("div",{className:"container mx-auto flex gap-4 justify-center items-center mb-10",children:[w.jsx("h2",{children:"Date"}),w.jsxs("select",{ref:n,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[w.jsx("option",{value:l,children:l}),w.jsx("option",{value:l-1,children:l-1}),w.jsx("option",{value:l-2,children:l-2}),w.jsx("option",{value:l-3,children:l-3}),w.jsx("option",{value:l-4,children:l-4})]}),w.jsxs("select",{ref:s,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[w.jsx("option",{selected:!0,disabled:!0,value:"",children:"From"}),w.jsx("option",{value:0,children:"January"}),w.jsx("option",{value:1,children:"February"}),w.jsx("option",{value:2,children:"March"}),w.jsx("option",{value:3,children:"April"}),w.jsx("option",{value:4,children:"May"}),w.jsx("option",{value:5,children:"June"}),w.jsx("option",{value:6,children:"July"}),w.jsx("option",{value:7,children:"August"}),w.jsx("option",{value:8,children:"September"}),w.jsx("option",{value:9,children:"October"}),w.jsx("option",{value:10,children:"November"}),w.jsx("option",{value:11,children:"December"})]}),w.jsxs("select",{ref:a,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[w.jsx("option",{selected:!0,disabled:!0,value:"",children:"To"}),w.jsx("option",{value:0,children:"January"}),w.jsx("option",{value:1,children:"February"}),w.jsx("option",{value:2,children:"March"}),w.jsx("option",{value:3,children:"April"}),w.jsx("option",{value:4,children:"May"}),w.jsx("option",{value:5,children:"June"}),w.jsx("option",{value:6,children:"July"}),w.jsx("option",{value:7,children:"August"}),w.jsx("option",{value:8,children:"September"}),w.jsx("option",{value:9,children:"October"}),w.jsx("option",{value:10,children:"November"}),w.jsx("option",{value:11,children:"December"})]}),w.jsx("button",{onClick:k,disabled:!p,className:"px-6 py-2 rounded-full bg-black text-white",children:p?"Generate":"Please Wait ..."}),w.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),w.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",w.jsx(Gl,{})]})]}),w.jsx("div",{className:"w-full",children:w.jsxs("table",{id:"table-to-xls",className:"w-full",children:[w.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:w.jsxs("tr",{children:[w.jsx("th",{className:"border border-black p-2",children:"Week"}),w.jsx("th",{className:"border border-black p-2",children:"Machine No."}),w.jsx("th",{className:"border border-black p-2",children:"Product Type"}),w.jsx("th",{style:{color:"#bd0000"},className:"border border-black p-2",children:"Damaged Product"}),w.jsx("th",{className:"border border-black p-2",children:"Total Product"}),w.jsx("th",{className:"border border-black p-2",children:"Net"}),w.jsx("th",{className:"border border-black p-2",children:"Total Weight"})]})}),w.jsx("tbody",{ref:i,children:w.jsx("tr",{children:w.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}function sV(){const t="damagedProducts",e="machinesIndividual";let i=ne.useRef(null),n=ne.useRef(null),s=ne.useRef(null),a=ne.useRef(null);const l=parseInt(new Date().getFullYear());let[p,f]=ne.useState(!0),[g,m]=ne.useState(new Set([]));ne.useEffect(()=>{let P=new Set([]);const L=Xi(Mt,"information","info");Qn(L).then($=>{let N=$.data();N.forming_machine.forEach(E=>{P.add(E)}),N.polish_machine.forEach(E=>{P.add(E)}),m(P)})},[]);const k=()=>{let P=0,L=new Date;if(L.setDate(1),L.setHours(0),L.setMinutes(0),L.setMilliseconds(0),L.setSeconds(0),L.setMonth(n.current.value),L.setFullYear(s.current.value),i.current.value===""||i.current.value<=0)return T("Quarter Range cannot be empty!"),null;if(n.current.value==="")return T("Start month cannot be empty!"),null;T("Please Be Patient ..."),f(!1);const $=N=>{let E=new Date(N),B=new Date(N);B.setSeconds(59),B.setHours(23),B.setMinutes(59),B.setDate(0),B.setMonth(B.getMonth()+4);const H=vi(Mt,e);Array.from(g).map((U,j)=>{zs.map((G,Z)=>{let he=0,ee=0,re=0,we=0,de=0;const Re=Ln(H,ct("unix_time",">=",Math.floor(E.getTime()/1e3)),ct("unix_time","<=",Math.floor(B.getTime()/1e3)),ct("machine_no","==",U),ct("product_type","==",G));gn(Re).then(He=>{He.forEach(Pe=>{re++,P++;const Le=Pe.data();parseFloat(Le.weight)>0&&(ee+=parseFloat(Le.weight),he+=Math.abs(parseInt(Le.count)))});let Ze=vi(Mt,t),et=Ln(Ze,ct("unix_time",">=",Math.floor(E.getTime()/1e3)),ct("unix_time","<=",Math.floor(B.getTime()/1e3)),ct("machine_no","==",U),ct("product_type","==",G));gn(et).then(Pe=>{Pe.forEach(Le=>{const Be=Le.data();Be.shift==="Morning"?we+=parseInt(Be.damagedProductCount):de+=parseInt(Be.damagedProductCount),console.log("Morning Damaged",we,"Night Damaged",de)}),re!==0&&D(`${E.toLocaleString("default",{month:"long"})}, ${E.getFullYear()} - 
                                      ${B.toLocaleString("default",{month:"long"})}, ${B.getFullYear()}`,U,G,we+de,he,he-we-de,parseFloat(ee).toFixed(2)),(j+1)*(Z+1)===g.size*zs.length&&(P===0&&T("No Data Available in this Date Range"),f(!0))})})})})};for(let N=0;N<i.current.value;N++)$(L),L.setMonth(L.getMonth()+4)},T=P=>{a.current.innerHTML=`<tr>
              <td class="border border-black p-2" id='reportStatus' colSpan="9">
                  ${P}
              </td>
          </tr>`},D=(P,L,$,N,E,B,H)=>{const U=document.createElement("tr");U.innerHTML=`<tr>
          <td  class="border border-black p-4">${P}</td>
          <td  class="border border-black p-4">${L}</td>
          <td  class="border border-black p-4">${$}</td>
          <td  class="border border-black p-4">${N}</td>
          <td  class="border border-black p-4">${E}</td>
          <td  class="border border-black p-4">${B}</td>
          <td  class="border border-black p-4">${H}</td>
          </tr>`;let j=document.getElementById("reportStatus");j&&j.remove(),a.current.appendChild(U)};return w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold py-8",children:"Quarterly Report "}),w.jsxs("div",{className:"container mx-auto flex gap-4 justify-center items-center mb-10",children:[w.jsx("h2",{children:"Date"}),w.jsx("input",{type:"number",ref:i,placeholder:"Quarters",style:{width:"9rem"},className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400"}),"From",w.jsxs("select",{ref:n,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[w.jsx("option",{selected:!0,disabled:!0,value:"",children:"Start Month"}),w.jsx("option",{value:0,children:"January"}),w.jsx("option",{value:1,children:"February"}),w.jsx("option",{value:2,children:"March"}),w.jsx("option",{value:3,children:"April"}),w.jsx("option",{value:4,children:"May"}),w.jsx("option",{value:5,children:"June"}),w.jsx("option",{value:6,children:"July"}),w.jsx("option",{value:7,children:"August"}),w.jsx("option",{value:8,children:"September"}),w.jsx("option",{value:9,children:"October"}),w.jsx("option",{value:10,children:"November"}),w.jsx("option",{value:11,children:"December"})]}),w.jsxs("select",{ref:s,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[w.jsx("option",{value:l,children:l}),w.jsx("option",{value:l-1,children:l-1}),w.jsx("option",{value:l-2,children:l-2}),w.jsx("option",{value:l-3,children:l-3}),w.jsx("option",{value:l-4,children:l-4})]}),w.jsx("button",{onClick:k,disabled:!p,className:"px-6 py-2 rounded-full bg-black text-white",children:p?"Generate":"Please Wait ..."}),w.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),w.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",w.jsx(Gl,{})]})]}),w.jsx("div",{className:"w-full",children:w.jsxs("table",{id:"table-to-xls",className:"w-full",children:[w.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:w.jsxs("tr",{children:[w.jsx("th",{className:"border border-black p-2",children:"Quarter"}),w.jsx("th",{className:"border border-black p-2",children:"Machine No."}),w.jsx("th",{className:"border border-black p-2",children:"Product Type"}),w.jsx("th",{style:{color:"#bd0000"},className:"border border-black p-2",children:"Damaged Product"}),w.jsx("th",{className:"border border-black p-2",children:"Total Product"}),w.jsx("th",{className:"border border-black p-2",children:"Net"}),w.jsx("th",{className:"border border-black p-2",children:"Total Weight"})]})}),w.jsx("tbody",{ref:a,children:w.jsx("tr",{children:w.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}function rV(){const t="machinesIndividual",e="damagedProducts";let i=ne.useRef(null);const n=parseInt(new Date().getFullYear());let s=ne.useRef(null),a=ne.useRef(null),[l,p]=ne.useState(!0),[f,g]=ne.useState(new Set([]));ne.useEffect(()=>{let D=new Set([]);const P=Xi(Mt,"information","info");Qn(P).then(L=>{let $=L.data();$.forming_machine.forEach(N=>{D.add(N)}),$.polish_machine.forEach(N=>{D.add(N)}),g(D)})},[]);const m=()=>{let D=0,P=new Date;P.setMilliseconds(0),P.setSeconds(0),P.setHours(0),P.setMinutes(0),P.setDate(1),P.setMonth(0),P.setFullYear(s.current.value),k("Please Be Patient ..."),p(!1);const L=$=>{let N=new Date($);N.setHours(0),N.setMinutes(0),N.setSeconds(0);let E=new Date($);E.setMonth(11),E.setDate(31),E.setHours(23),E.setMinutes(59),E.setSeconds(59),console.log(N,E);const B=vi(Mt,t);Array.from(f).map((H,U)=>{zs.map((j,G)=>{let Z=0,he=0,ee=0,re=0,we=0,de=0,Re=0,He=0,Ze=0;const et=Ln(B,ct("unix_time",">=",Math.floor(N.getTime()/1e3)),ct("unix_time","<=",Math.floor(E.getTime()/1e3)),ct("machine_no","==",H),ct("product_type","==",j));gn(et).then(Pe=>{Pe.forEach(X=>{Re++,D++;const _e=X.data();_e.shift==="Morning"?parseFloat(_e.weight)>0&&(Z+=Math.abs(parseInt(_e.count)),he+=parseFloat(_e.weight)):parseFloat(_e.weight)>0&&(ee+=Math.abs(parseInt(_e.count)),re+=parseFloat(_e.weight))}),we=Z+ee,de=(re+he).toFixed(2);let Le=vi(Mt,e),Be=Ln(Le,ct("unix_time",">=",Math.floor(N.getTime()/1e3)),ct("unix_time","<=",Math.floor(E.getTime()/1e3)),ct("machine_no","==",H),ct("product_type","==",j));gn(Be).then(X=>{X.forEach(_e=>{const me=_e.data();me.shift==="Morning"?He+=parseInt(me.damagedProductCount):Ze+=parseInt(me.damagedProductCount)}),Re!==0&&T(N.getFullYear(),H,j,He,Z,he.toFixed(2),Z-He,Ze,ee,re.toFixed(2),ee-Ze,we-He-Ze,de),(U+1)*(G+1)===f.size*zs.length&&(D===0&&k("No Data Available in this Date Range"),p(!0))})})})})};for(let $=0;$<a.current.value-s.current.value+1;$++)L(P),P.setFullYear(P.getFullYear()+1)},k=D=>{i.current.innerHTML=`<tr>
              <td class="border border-black p-2 text-center" id='reportStatus' colSpan="13">
                  ${D}
              </td>
          </tr>`},T=(D,P,L,$,N,E,B,H,U,j,G,Z,he)=>{const ee=document.createElement("tr");ee.innerHTML=`<tr>
          <td class="border border-black p-2">${D}</td>
          <td class="border border-black p-2">${P}</td>
          <td class="border border-black p-2">${L}</td>

          <td class="border border-black p-2">${N}</td>
          <td class="border border-black p-2">${$}</td>
          <td class="border border-black p-2">${B}</td>
          <td class="border border-black p-2">${E}</td>

          <td class="border border-black p-2">${U}</td>
          <td class="border border-black p-2">${H}</td>
          <td class="border border-black p-2">${G}</td>
          <td class="border border-black p-2">${j}</td>

          <td class="border border-black p-2">${Z}</td>
          <td class="border border-black p-2">${he}</td>
          </tr>`;let re=document.getElementById("reportStatus");re!==null&&re.remove(),i.current.appendChild(ee)};return w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold py-8",children:"Yearly Report "}),w.jsxs("div",{className:"container mx-auto flex gap-4 justify-center items-center mb-10",children:[w.jsx("h2",{children:"From"}),w.jsxs("select",{ref:s,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[w.jsx("option",{value:n,children:n}),w.jsx("option",{value:n-1,children:n-1}),w.jsx("option",{value:n-2,children:n-2}),w.jsx("option",{value:n-3,children:n-3}),w.jsx("option",{value:n-4,children:n-4})]}),"to",w.jsxs("select",{ref:a,className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400",children:[w.jsx("option",{value:n,children:n}),w.jsx("option",{value:n-1,children:n-1}),w.jsx("option",{value:n-2,children:n-2}),w.jsx("option",{value:n-3,children:n-3}),w.jsx("option",{value:n-4,children:n-4})]}),w.jsx("button",{onClick:m,disabled:!l,className:"px-6 py-2 rounded-full bg-black text-white",children:l?"Generate":"Please Wait ..."}),w.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),w.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",w.jsx(Gl,{})]})]}),w.jsx("div",{className:"w-full",children:w.jsxs("table",{id:"table-to-xls",className:"w-full",children:[w.jsxs("thead",{className:"bg-primary text-white font-light rounded-lg",children:[w.jsxs("tr",{children:[w.jsx("th",{className:"border border-black p-2",rowSpan:"2",children:"Date"}),w.jsx("th",{className:"border border-black p-2",rowSpan:"2",children:"Machine No."}),w.jsx("th",{className:"border border-black p-2",rowSpan:"2",children:"Product Type"}),w.jsx("th",{className:"border border-black p-2",colSpan:"4",children:"Morning"}),w.jsx("th",{className:"border border-black p-2",colSpan:"4",children:"Night"}),w.jsx("th",{className:"border border-black p-2",rowSpan:"2",children:"Total Product"}),w.jsx("th",{className:"border border-black p-2",rowSpan:"2",children:"Total Weight"})]}),w.jsxs("tr",{children:[w.jsx("th",{className:"border border-black p-2",children:"Total"}),w.jsx("th",{style:{color:"#bd0000"},className:"border border-black p-2",children:"Damaged"}),w.jsx("th",{className:"border border-black p-2",children:"Net"}),w.jsx("th",{className:"border border-black p-2",children:"Weight"}),w.jsx("th",{className:"border border-black p-2",children:"Total"}),w.jsx("th",{style:{color:"#bd0000"},className:"border border-black p-2",children:"Damaged"}),w.jsx("th",{className:"border border-black p-2",children:"Net"}),w.jsx("th",{className:"border border-black p-2",children:"Weight"})]})]}),w.jsx("tbody",{ref:i,children:w.jsx("tr",{children:w.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}function aV(){const t="machinesIndividual";let e=ne.useRef(null),i=ne.useRef(null),n=ne.useRef(null),s=ne.useRef(null),[a,l]=ne.useState(new Set([])),[p,f]=ne.useState(!0);ne.useEffect(()=>{i.current.valueAsDate=new Date;let D="<th></th>",P=new Set([]);const L=Xi(Mt,"information","info");Qn(L).then($=>{let N=$.data();N.forming_machine.forEach(E=>{P.add(E)}),N.polish_machine.forEach(E=>{P.add(E)}),l(P),Eo.forEach(E=>{D+=`<th class="border border-black p-2">${E}</th>`}),s.current.innerHTML=`<tr>${D}<tr>`})},[]);const g=()=>{let D=new Date(e.current.value);D.setHours(0),D.setMinutes(0),D.setSeconds(1),D.setMilliseconds(0);let P=new Date(i.current.value);if(P.setHours(23),P.setMinutes(59),P.setMilliseconds(99),P.setSeconds(59),i.current.value===""||e.current.value==="")return m("Date Ranges cannot be empty!"),null;if(D.getTime()>P.getTime())return m("Start date should be less than end date"),null;m("Please be Patient ..."),f(!1),k(D,P)},m=D=>{n.current.innerHTML=`<tr>
              <td class='border border-black p-2' id='reportStatus' colSpan=${Eo.length+1}>
                  ${D}
              </td>
          </tr>`};async function k(D,P){const L=vi(Mt,"machineStatus"),$=vi(Mt,t);Array.from(a).forEach((N,E)=>{let B=0,H=Ln(L,ct("time_start",">=",Math.floor(D.getTime()/1e3)),ct("time_start","<=",Math.floor(P.getTime()/1e3)),ct("machine_no","==",`${N}`),ct("isRunning","==",!0));gn(H).then(U=>{N==="03"&&console.log("03",Math.floor(D.getTime()/1e3),Math.floor(P.getTime()/1e3)),U.forEach(G=>{B+=G.data().time_end-G.data().time_start,console.log("-------------------"),console.log(G.data())});let j=[];for(const G of Eo){let Z=0;H=Ln($,ct("unix_time",">=",Math.floor(D.getTime()/1e3)),ct("unix_time","<=",Math.floor(P.getTime()/1e3)),ct("machine_no","==",`${N}`),ct("thickness","==",G)),gn(H).then(he=>{he.forEach(ee=>{Z+=parseInt(ee.data().count)}),Z!==0?j.push(`${(B/Z).toFixed(2)} sec`):j.push("N/A"),j.length===Eo.length&&T(N,j),E+1===a.size&&j.length===Eo.length&&f(!0)})}})})}const T=(D,P)=>{let L=P.map(E=>`<td>${E}</td>`);L=L.join("");const $=document.createElement("tr");$.innerHTML=`<tr class="border border-black p-2">
          <td class="border border-black p-2"><b>FM ${D}</b></td>
          ${L}
          </tr>`;let N=document.getElementById("reportStatus");N&&N.remove(),n.current.appendChild($)};return w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold py-8",children:"Machine Efficiency "}),w.jsxs("div",{className:"container mx-auto flex gap-4 justify-center items-center mb-10",children:[w.jsx("h2",{children:"From"}),w.jsx("input",{type:"date",ref:e,placeholder:"Quarters",style:{width:"9rem"},className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400"}),"To",w.jsx("input",{type:"date",ref:i,placeholder:"Quarters",style:{width:"9rem"},className:"p-2 rounded-md outline-none focus:outline-none border border-gray-400"}),w.jsx("button",{onClick:g,disabled:!p,className:"px-6 py-2 rounded-full bg-black text-white",children:p?"Generate":"Please Wait ..."}),w.jsx("button",{onClick:()=>{window.print()},className:"px-6 py-2 rounded-full bg-primary text-white",children:"Print"}),w.jsxs("button",{className:"px-6 py-2 rounded-full bg-primary text-white flex gap-3 items-center",children:["Download Excel Report ",w.jsx(Gl,{})]})]}),w.jsx("div",{className:"w-full",children:w.jsxs("table",{id:"table-to-xls",className:"w-full",children:[w.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",ref:s}),w.jsx("tbody",{ref:n,children:w.jsx("tr",{children:w.jsx("td",{className:"border border-gray-500 text-center py-4 ",colSpan:"13",children:"Plase Select a Date Range"})})})]})})]})}const oV="/assets/rafi_professional-BjLSv3OK.png";function lV(){return w.jsxs("div",{className:"flex gap-4 justify-between items-center",children:[w.jsxs("h2",{className:"text-xl",children:["Welcome Back, ",w.jsx("span",{className:"text-primary",children:"Shahjalal Rafi!"})]}),w.jsxs("div",{className:" flex gap-4 items-center",children:[w.jsx("img",{src:oV,alt:"",className:"w-10 h-10 rounded-full"}),w.jsx("p",{children:"Shahjalal Rafi"})]})]})}function yx(t){return Ul({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 160c-17.7 0-32-14.3-32-32s14.3-32 32-32H544c17.7 0 32 14.3 32 32V288c0 17.7-14.3 32-32 32s-32-14.3-32-32V205.3L342.6 374.6c-12.5 12.5-32.8 12.5-45.3 0L192 269.3 54.6 406.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160c12.5-12.5 32.8-12.5 45.3 0L320 306.7 466.7 160H384z"},child:[]}]})(t)}const hV="data:image/svg+xml,%3csvg%20width='139'%20height='79'%20viewBox='0%200%20139%2079'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M25.9728%2039.469L1%2043.8541V79H138V2.54224L114.166%2039.2242C113.72%2039.9102%20112.901%2040.2556%20112.099%2040.0962L93.1174%2036.3271C92.8591%2036.2758%2092.6133%2036.174%2092.3944%2036.0274L71.5655%2022.0847C70.6882%2021.4975%2069.5055%2021.6932%2068.8642%2022.5319L47.4015%2050.6008C46.7656%2051.4324%2045.5961%2051.6329%2044.7195%2051.0608L27.4119%2039.764C26.987%2039.4867%2026.4726%2039.3812%2025.9728%2039.469Z'%20fill='url(%23paint0_linear_604_5713)'%20fill-opacity='0.25'/%3e%3cpath%20d='M1%2043.6415L26.0033%2039.2433C26.5038%2039.1553%2027.019%2039.261%2027.4443%2039.5391L44.7735%2050.8698C45.6507%2051.4434%2046.8219%2051.2425%2047.4578%2050.4094L68.9485%2022.2545C69.5898%2021.4143%2070.7742%2021.2182%2071.6521%2021.8069L92.507%2035.7916C92.7261%2035.9385%2092.972%2036.0406%2093.2307%2036.092L112.228%2039.8708C113.035%2040.0314%20113.858%2039.6811%20114.302%2038.9882L138%202'%20stroke='%232CF619'%20stroke-width='2'/%3e%3cpath%20d='M1%2043.6415L26.0033%2039.2433C26.5038%2039.1553%2027.019%2039.261%2027.4443%2039.5391L44.7735%2050.8698C45.6507%2051.4434%2046.8219%2051.2425%2047.4578%2050.4094L68.9485%2022.2545C69.5898%2021.4143%2070.7742%2021.2182%2071.6521%2021.8069L92.507%2035.7916C92.7261%2035.9385%2092.972%2036.0406%2093.2307%2036.092L112.228%2039.8708C113.035%2040.0314%20113.858%2039.6811%20114.302%2038.9882L138%202'%20stroke='white'%20stroke-opacity='0.05'%20stroke-width='2'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_604_5713'%20x1='69.5'%20y1='2.54224'%20x2='69.5'%20y2='79'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%232CF619'%20stop-opacity='0.7'/%3e%3cstop%20offset='1'%20stop-color='%232CF619'%20stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",cV="data:image/svg+xml,%3csvg%20width='139'%20height='79'%20viewBox='0%200%20139%2079'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M25.9728%2039.469L1%2043.8541V79H138V2.54224L114.166%2039.2242C113.72%2039.9102%20112.901%2040.2556%20112.099%2040.0962L93.1174%2036.3271C92.8591%2036.2758%2092.6133%2036.174%2092.3944%2036.0274L71.5655%2022.0847C70.6882%2021.4975%2069.5055%2021.6932%2068.8642%2022.5319L47.4015%2050.6008C46.7656%2051.4324%2045.5961%2051.6329%2044.7195%2051.0608L27.4119%2039.764C26.987%2039.4867%2026.4726%2039.3812%2025.9728%2039.469Z'%20fill='url(%23paint0_linear_604_5722)'%20fill-opacity='0.25'/%3e%3cpath%20d='M1%2043.6415L26.0033%2039.2433C26.5038%2039.1553%2027.019%2039.261%2027.4443%2039.5391L44.7735%2050.8698C45.6507%2051.4434%2046.8219%2051.2425%2047.4578%2050.4094L68.9485%2022.2545C69.5898%2021.4143%2070.7742%2021.2182%2071.6521%2021.8069L92.507%2035.7916C92.7261%2035.9385%2092.972%2036.0406%2093.2307%2036.092L112.228%2039.8708C113.035%2040.0314%20113.858%2039.6811%20114.302%2038.9882L138%202'%20stroke='%23ED1C24'%20stroke-width='2'/%3e%3cpath%20d='M1%2043.6415L26.0033%2039.2433C26.5038%2039.1553%2027.019%2039.261%2027.4443%2039.5391L44.7735%2050.8698C45.6507%2051.4434%2046.8219%2051.2425%2047.4578%2050.4094L68.9485%2022.2545C69.5898%2021.4143%2070.7742%2021.2182%2071.6521%2021.8069L92.507%2035.7916C92.7261%2035.9385%2092.972%2036.0406%2093.2307%2036.092L112.228%2039.8708C113.035%2040.0314%20113.858%2039.6811%20114.302%2038.9882L138%202'%20stroke='white'%20stroke-opacity='0.05'%20stroke-width='2'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_604_5722'%20x1='69.5'%20y1='2.54224'%20x2='69.5'%20y2='79'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ED1C24'%20stop-opacity='0.7'/%3e%3cstop%20offset='1'%20stop-color='%23ED1C24'%20stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",uV="data:image/svg+xml,%3csvg%20width='139'%20height='78'%20viewBox='0%200%20139%2078'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M25.9728%2038.469L1%2042.8541V78H138V1.54224L114.166%2038.2242C113.72%2038.9102%20112.901%2039.2556%20112.099%2039.0962L93.1174%2035.3271C92.8591%2035.2758%2092.6133%2035.174%2092.3944%2035.0274L71.5655%2021.0847C70.6882%2020.4975%2069.5055%2020.6932%2068.8642%2021.5319L47.4015%2049.6008C46.7656%2050.4324%2045.5961%2050.6329%2044.7195%2050.0608L27.4119%2038.764C26.987%2038.4867%2026.4726%2038.3812%2025.9728%2038.469Z'%20fill='url(%23paint0_linear_604_5731)'%20fill-opacity='0.25'/%3e%3cpath%20d='M1%2042.6415L26.0033%2038.2433C26.5038%2038.1553%2027.019%2038.261%2027.4443%2038.5391L44.7735%2049.8698C45.6507%2050.4434%2046.8219%2050.2425%2047.4578%2049.4094L68.9485%2021.2545C69.5898%2020.4143%2070.7742%2020.2182%2071.6521%2020.8069L92.507%2034.7916C92.7261%2034.9385%2092.972%2035.0406%2093.2307%2035.092L112.228%2038.8708C113.035%2039.0314%20113.858%2038.6811%20114.302%2037.9882L138%201'%20stroke='%2316B1FF'%20stroke-width='2'/%3e%3cpath%20d='M1%2042.6415L26.0033%2038.2433C26.5038%2038.1553%2027.019%2038.261%2027.4443%2038.5391L44.7735%2049.8698C45.6507%2050.4434%2046.8219%2050.2425%2047.4578%2049.4094L68.9485%2021.2545C69.5898%2020.4143%2070.7742%2020.2182%2071.6521%2020.8069L92.507%2034.7916C92.7261%2034.9385%2092.972%2035.0406%2093.2307%2035.092L112.228%2038.8708C113.035%2039.0314%20113.858%2038.6811%20114.302%2037.9882L138%201'%20stroke='white'%20stroke-opacity='0.05'%20stroke-width='2'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_604_5731'%20x1='69.5'%20y1='1.54224'%20x2='69.5'%20y2='78'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%2322B5FF'%20stop-opacity='0.7'/%3e%3cstop%20offset='1'%20stop-color='%2322B5FF'%20stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e";function dV(){let[t,e]=ne.useState(!1),[i,n]=ne.useState(!1),[s,a]=ne.useState([]),[l,p]=ne.useState([]),[f,g]=ne.useState([]);ne.useState("all");async function m(){const k=Xi(Mt,"information","info");return(await Qn(k)).data()}return ne.useEffect(()=>{m().then(T=>{const D=vi(Mt,"machineStatus");let P=(T==null?void 0:T.forming_machine)||[],L=P.length,$=0;if(L===0){e(!0),n(!1);return}P.sort((N,E)=>parseInt(N,10)-parseInt(E,10)),P.forEach(N=>{const E=Ln(D,ct("machine_no","==",N),Ns("time_end","desc"),rr(1));gn(E).then(B=>{let H=!1,U="N/A";B.forEach(j=>{let G=j.data(),Z=Math.floor(new Date().getTime()/1e3)-(G==null?void 0:G.time_end),he=Math.floor(Z/3600),ee=Math.floor(Z%3600/60),re=Z%60;U=`${he?`${he}h`:""}${ee?` ${ee}m`:""} ${re}s`,Z<=600&&(H=!0)}),a(j=>[...j,{meta:"forming",machineNo:`${N}`,active:H,idleTime:U}]),$+=1,$===L&&(e(!0),n(P.length!==0))})})})},[]),ne.useEffect(()=>{var D,P,L,$;let k=(P=(D=s==null?void 0:s.slice(0,16))==null?void 0:D.filter(N=>N==null?void 0:N.active))==null?void 0:P.length,T=($=(L=s==null?void 0:s.slice(0,16))==null?void 0:L.filter(N=>!(N!=null&&N.active)))==null?void 0:$.length;p(k),g(T)},[s]),w.jsxs("div",{className:"py-10 flex gap-10 items-center",children:[w.jsxs("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] w-full p-4 rounded-lg flex flex-col gap-6",children:[w.jsxs("div",{className:"flex gap-4 justify-between items-center",children:[w.jsx("p",{children:"Active Machines"}),w.jsxs("div",{className:"flex gap-2 items-center text-[#2CF619]",children:[w.jsx(yx,{className:"fill-[#2CF619]"}),w.jsx("p",{children:"+17%"})]})]}),w.jsxs("div",{className:"flex gap-4 items-end  justify-between",children:[w.jsxs("h2",{children:[w.jsx("span",{className:"text-2xl font-bold",children:l})," Machines Active"]}),w.jsx("img",{src:hV,alt:""})]})]}),w.jsxs("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] w-full p-4 rounded-lg flex flex-col gap-6",children:[w.jsxs("div",{className:"flex gap-4 justify-between items-center",children:[w.jsx("p",{children:"Idle Machines"}),w.jsxs("div",{className:"flex gap-2 items-center text-[#ED1C24]",children:[w.jsx(yx,{className:"fill-[#ED1C24]"}),w.jsx("p",{children:"+17%"})]})]}),w.jsxs("div",{className:"flex gap-4 items-end  justify-between",children:[w.jsxs("h2",{children:[w.jsx("span",{className:"text-2xl font-bold",children:f})," ","Machines Idle"]}),w.jsx("img",{src:cV,alt:""})]})]}),w.jsxs("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] w-full p-4 rounded-lg flex flex-col gap-6",children:[w.jsxs("div",{className:"flex gap-4 justify-between items-center",children:[w.jsx("p",{children:"Total Current Production"}),w.jsxs("div",{className:"flex gap-2 items-center text-[##16B1FF]",children:[w.jsx(yx,{className:"fill-[##16B1FF]"}),w.jsx("p",{children:"+17%"})]})]}),w.jsxs("div",{className:"flex gap-4 items-end  justify-between",children:[w.jsxs("h2",{children:[w.jsx("span",{className:"text-2xl font-bold",children:"1300"})," kg"]}),w.jsx("img",{src:uV,alt:""})]})]})]})}const NT="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M20.125%2027.25C20.125%2026.5596%2020.6846%2026%2021.375%2026H28.25C28.4968%2026%2028.738%2026.073%2028.9434%2026.2099L32%2028.2477L35.0566%2026.2099C35.262%2026.073%2035.5032%2026%2035.75%2026H42.625C43.3154%2026%2043.875%2026.5596%2043.875%2027.25C43.875%2027.9404%2043.3154%2028.5%2042.625%2028.5H36.1285L32.6934%2030.7901C32.2735%2031.07%2031.7265%2031.07%2031.3066%2030.7901L27.8715%2028.5H21.375C20.6846%2028.5%2020.125%2027.9404%2020.125%2027.25Z'%20fill='black'/%3e%3cpath%20d='M35.0625%2051.5C34.3721%2051.5%2033.8125%2052.0596%2033.8125%2052.75C33.8125%2053.4404%2034.3721%2054%2035.0625%2054H40.6875C41.3779%2054%2041.9375%2053.4404%2041.9375%2052.75C41.9375%2052.0596%2041.3779%2051.5%2040.6875%2051.5H35.0625Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M30.0625%2046.5C29.3721%2046.5%2028.8125%2047.0596%2028.8125%2047.75V57.75C28.8125%2058.4404%2029.3721%2059%2030.0625%2059H45.6875C46.3779%2059%2046.9375%2058.4404%2046.9375%2057.75V47.75C46.9375%2047.0596%2046.3779%2046.5%2045.6875%2046.5H30.0625ZM31.3125%2056.5V49H44.4375V56.5H31.3125Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M21.0625%200C20.3721%200%2019.8125%200.559644%2019.8125%201.25V3.4375H7.3125C6.62214%203.4375%206.0625%203.99714%206.0625%204.6875V9.6875C6.0625%2010.3779%206.62214%2010.9375%207.3125%2010.9375H12V37.75C12%2038.4404%2012.5596%2039%2013.25%2039H15.125V41.5H13.25C12.5596%2041.5%2012%2042.0596%2012%2042.75V62.75C12%2063.4404%2012.5596%2064%2013.25%2064H50.75C51.4404%2064%2052%2063.4404%2052%2062.75V42.75C52%2042.0596%2051.4404%2041.5%2050.75%2041.5H48.875V39H50.75C51.4404%2039%2052%2038.4404%2052%2037.75V10.9375H56.6875C57.3779%2010.9375%2057.9375%2010.3779%2057.9375%209.6875V4.6875C57.9375%203.99714%2057.3779%203.4375%2056.6875%203.4375H44.1875V1.25C44.1875%200.559644%2043.6279%200%2042.9375%200H21.0625ZM49.5%2010.9375H44.1875V13.125C44.1875%2013.8154%2043.6279%2014.375%2042.9375%2014.375H37V19.875C37%2020.2065%2036.8683%2020.5245%2036.6339%2020.7589L32.8839%2024.5089C32.3957%2024.997%2031.6043%2024.997%2031.1161%2024.5089L27.3661%2020.7589C27.1317%2020.5245%2027%2020.2065%2027%2019.875V14.375H21.0625C20.3721%2014.375%2019.8125%2013.8154%2019.8125%2013.125V10.9375H14.5V36.5H20.125V33.375C20.125%2032.6846%2020.6846%2032.125%2021.375%2032.125H28.25C28.4968%2032.125%2028.738%2032.198%2028.9434%2032.3349L32%2034.3727L35.0566%2032.3349C35.262%2032.198%2035.5032%2032.125%2035.75%2032.125H42.625C43.3154%2032.125%2043.875%2032.6846%2043.875%2033.375V36.5H49.5V10.9375ZM55.4375%208.4375V5.9375H44.1875V8.4375H55.4375ZM41.6875%202.5H22.3125V11.875H41.6875V2.5ZM19.8125%208.4375V5.9375H8.5625V8.4375H19.8125ZM34.5%2014.375H29.5V19.3572L32%2021.8572L34.5%2019.3572V14.375ZM41.375%2034.625H36.1285L32.6934%2036.9151C32.2735%2037.195%2031.7265%2037.195%2031.3066%2036.9151L27.8715%2034.625H22.625V41.5H41.375V34.625ZM46.375%2039H43.875V41.5H46.375V39ZM17.625%2041.5H20.125V39H17.625V41.5ZM14.5%2044V61.5H49.5V44H14.5Z'%20fill='black'/%3e%3c/g%3e%3c/svg%3e";function pV(){var a;let[t,e]=ne.useState([]);const i=30,n="machines";ne.useEffect(()=>{const l=vi(Mt,n),p=Ln(l,Ns("unix_time","desc"),rr(i));s(p)},[]);const s=(l,p)=>{Qc(l,f=>{e(g=>{let m=[];return f.forEach(k=>{const T={id:k==null?void 0:k.id,...k==null?void 0:k.data()},D=g.some(P=>P.id==T.id);T.status=(g==null?void 0:g.length)===0||D?"old":"new",m.push(T)}),m})})};return w.jsxs("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] p-8 rounded-lg",children:[w.jsx("h2",{className:"text-3xl",children:"Real-Time Machine Data"}),w.jsxs("div",{className:"grid grid-cols-6 items-center gap-6 bg-primary rounded-full p-4 text-white mt-6",children:[w.jsx("p",{children:"Machine Names"}),w.jsx("p",{children:"Status"}),w.jsx("p",{children:"Shift"}),w.jsx("p",{children:"Product Type"}),w.jsx("p",{children:"Production weight"}),w.jsx("p",{children:"Production Count"})]}),(a=t==null?void 0:t.slice(0,5))==null?void 0:a.map(l=>w.jsxs("div",{className:`grid grid-cols-6 items-center gap-6  rounded-md p-2 text-black mt-6 ${(l==null?void 0:l.status)=="new"?"bg-green-100":""}`,children:[w.jsxs("p",{className:"flex gap-2 items-center",children:[w.jsx("img",{src:NT,alt:"",className:"w-10 h-10"}),"FM ",l==null?void 0:l.machine_no]}),w.jsx("p",{children:"Active"}),w.jsx("p",{children:l==null?void 0:l.shift}),w.jsxs("p",{children:[l==null?void 0:l.product_type,", ",l==null?void 0:l.product_dimensions]}),w.jsxs("p",{children:[l==null?void 0:l.weight," KG"]}),w.jsx("p",{children:l==null?void 0:l.count})]}))]})}function fV(){var n,s;let[t,e]=ne.useState([]);ne.useState([]),ne.useState([]),ne.useState("all");async function i(){const a=Xi(Mt,"information","info");return(await Qn(a)).data()}return ne.useEffect(()=>{i().then(l=>{const p=vi(Mt,"machineStatus");let f=(l==null?void 0:l.forming_machine)||[],g=f.length,m=0;if(g===0){setDataLoaded(!0),setDataAvailable(!1);return}f.sort((k,T)=>parseInt(k,10)-parseInt(T,10)),f.forEach(k=>{const T=Ln(p,ct("machine_no","==",k),Ns("time_end","desc"),rr(1));gn(T).then(D=>{let P=!1,L="N/A";D.forEach($=>{let N=$.data(),E=Math.floor(new Date().getTime()/1e3)-(N==null?void 0:N.time_end),B=Math.floor(E/3600),H=Math.floor(E%3600/60),U=E%60;L=`${B?`${B}h`:""}${H?` ${H}m`:""} ${U}s`,E<=600&&(P=!0)}),e($=>[...$,{meta:"forming",machineNo:`${k}`,active:P,idleTime:L}]),m+=1,m===g&&(setDataLoaded(!0),setDataAvailable(f.length!==0))})})})},[]),w.jsxs("div",{className:"bg-white shadow-[5px_5px_20px_1px_rgba(0,0,0,0.2)] p-8 rounded-lg",children:[w.jsx("h2",{className:"text-3xl",children:"List of idle machine"}),w.jsxs("div",{className:"grid grid-cols-2 items-center gap-6 bg-primary rounded-full p-4 text-white mt-6",children:[w.jsx("p",{children:"Machine Names"}),w.jsx("p",{children:"Idle Time"})]}),(s=(n=t==null?void 0:t.slice(0,16))==null?void 0:n.filter(a=>!(a!=null&&a.active)))==null?void 0:s.map(a=>w.jsxs("div",{className:"grid grid-cols-2 items-center gap-6  rounded-full p-2 text-black mt-6",children:[w.jsxs("p",{className:"flex gap-2 items-center",children:[w.jsx("img",{src:NT,alt:"",className:"w-10 h-10"}),"FM ",a==null?void 0:a.machineNo]}),w.jsx("p",{children:a==null?void 0:a.idleTime})]}))]})}function xV(){return w.jsx("div",{className:"grid grid-cols-2 gap-8 mt-10",children:w.jsx(fV,{})})}function mV(){return w.jsxs("div",{children:[w.jsx(lV,{}),w.jsx(dV,{}),w.jsx(pV,{}),w.jsx(xV,{})]})}function gV({setshowProductModal:t,setshowShiftModal:e,setdamagedProductModal:i}){return w.jsxs("div",{className:"mb-10",children:[w.jsx("h2",{className:"text-3xl font-bold ",children:"Manage Products"}),w.jsx("div",{className:"flex gap-4 justify-end items-center",children:w.jsx(ur,{to:"/products/add-product",children:w.jsxs("button",{className:"bg-primary px-4 py-2 rounded-full text-white flex gap-2 items-center",children:["Add Product",w.jsx(ay,{className:"w-6 h-6"})]})})})]})}function yV(t){const e=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getFullYear()).slice(-2);return w.jsxs("p",{children:[`${e}/${i}/${n}`,w.jsx("br",{}),t.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})]})}function vV({productData:t}){var e;return w.jsxs("table",{className:"w-full",children:[w.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:w.jsxs("tr",{className:" rounded-tl-lg",children:[w.jsx("th",{className:"border border-black p-2",children:"Sl No."}),w.jsx("th",{className:"border border-black p-2",children:"Mazchine No."}),w.jsx("th",{className:"border border-black p-2",children:"Thickness"}),w.jsx("th",{className:"border border-black p-2",children:"Dimension"}),w.jsx("th",{className:"border border-black p-2",children:"Product Type"}),w.jsx("th",{className:"border border-black p-2",children:"Added On"})]})}),w.jsx("tbody",{children:(e=t==null?void 0:t.filter(i=>(i==null?void 0:i.status)=="approved"))==null?void 0:e.map((i,n)=>w.jsxs("tr",{children:[w.jsx("td",{class:"border border-black p-4",children:n+1}),w.jsx("td",{class:"border border-black p-4",children:i==null?void 0:i.machine_no}),w.jsx("td",{class:"border border-black p-4",children:i==null?void 0:i.thickness}),w.jsx("td",{class:"border border-black p-4",children:i==null?void 0:i.product_dimensions}),w.jsx("td",{class:"border border-black p-4",children:i==null?void 0:i.product_type}),w.jsx("td",{class:"border border-black p-4",children:i!=null&&i.creatingDate?yV(i.creatingDate.toDate()):w.jsx("p",{children:"No date"})})]}))})]})}function RT({setFormData:t}){let[e,i]=ne.useState([]),[n,s]=ne.useState(""),[a,l]=ne.useState(""),[p,f]=ne.useState(""),[g,m]=ne.useState(""),[k,T]=ne.useState("");const D=P=>{if(P.preventDefault(),a===""||p===""||g===""||k==="")return s("Please fill up this form properly"),!1;t({machine_no:a,thickness:p,product_type:g,product_dimensions:k})};return ne.useEffect(()=>{const P=Xi(Mt,"information","info");Qn(P).then(L=>{let $=[];L.data().forming_machine.forEach((E,B)=>{$.push(E)}),i($)})},[]),w.jsxs("form",{className:"flex flex-col gap-8",onSubmit:D,children:[w.jsx("h2",{className:"text-2xl font-bold pb-6",children:"Add Product"}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Machine No*"}),w.jsxs("select",{value:a,onChange:P=>l(P.target.value),className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:[w.jsx("option",{selected:!0,disabled:!0,value:"",children:"Machine No."}),e==null?void 0:e.map(P=>w.jsx("option",{value:P,children:P}))]})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Dimension*"}),w.jsxs("select",{className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:k,onChange:P=>T(P.target.value),children:[w.jsx("option",{selected:!0,disabled:!0,value:"",children:"Dimension"}),eV.map(P=>w.jsx("option",{value:P,children:P}))]})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Thickness*"}),w.jsxs("select",{className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:p,onChange:P=>f(P.target.value),children:[w.jsx("option",{selected:!0,disabled:!0,value:"",children:"Product Thickness"}),Eo.map(P=>w.jsx("option",{value:P,children:P}))]})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Product Type*"}),w.jsxs("select",{className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:g,onChange:P=>m(P.target.value),children:[w.jsx("option",{selected:!0,disabled:!0,value:"",children:"Product Type"}),zs.map(P=>w.jsx("option",{value:P,children:P}))]})]}),w.jsx("div",{className:"flex justify-center",children:w.jsx("button",{className:"btn-primary ",type:"submit",children:"Submit"})}),w.jsx("span",{className:"msgSpan",children:n})]})}function bV(t){return Ul({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(t)}function ld({open:t,control:e,children:i,width:n,bg:s,padding:a}){return t&&w.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black/70 z-50 flex justify-center items-center",children:w.jsxs("div",{className:`relative bg-white max-h-[550px] md:max-h-[750px] max-w-[600px] ${n||"w-full"}  h- mx-4 shadow-xl ${a||"p-4 md:p-8"} rounded overflow-y-scroll`,children:[w.jsx("span",{className:"absolute top-2 right-2 z-50 cursor-pointer  rounded-full  p-2 ",onClick:e,children:w.jsx(bV,{className:"p-1  w-6  h-6  z-50 bg-primary rounded-full fill-white"})}),i]})})}function VT({setShiftData:t,setshowProductModal:e}){let[i,n]=ne.useState(""),[s,a]=ne.useState(od[0]),[l,p]=ne.useState({}),f=ne.useRef(""),g=ne.useRef(""),m=ne.useRef("");const k=T=>{if(T.preventDefault(),f.current.value===""||g.current.value===""||m.current.value==="")return n("Please fill up this form properly"),!1;let D=f.current.valueAsNumber/1e3,P=g.current.valueAsNumber/1e3;t({starts:D,ends:P,shift:m.current.value}),e(!1)};return ne.useEffect(()=>{od.forEach(T=>{let D=Xi(Mt,"shiftTime",T);Qn(D).then(P=>{p(L=>({...L,[T]:P.data()}))})})},[]),ne.useEffect(()=>{if(Object.keys(l).length!==0){let T=parseInt(l[s].starts/3600),D=parseInt(l[s].starts%3600/60),P=parseInt(l[s].ends/3600),L=parseInt(l[s].ends%3600/60);f.current.value=`${T<9?`0${T}`:T}:${D<9?`0${D}`:D}`,g.current.value=`${P<9?`0${P}`:P}:${L<9?`0${L}`:L}`}},[s,l]),w.jsxs("form",{className:"flex flex-col gap-4",onSubmit:k,children:[w.jsx("h2",{className:"text-2xl font-bold pb-6",children:"Choose Shift"}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Machine No*"}),w.jsxs("select",{ref:m,onChange:T=>a(T.target.value),className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:[w.jsx("option",{selected:!0,disabled:!0,value:"",children:"Shift."}),od.map(T=>w.jsx("option",{value:T,children:T}))]})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Starts*"}),w.jsx("input",{type:"time",ref:f,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Ends*"}),w.jsx("input",{type:"time",ref:g,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),w.jsx("div",{className:"flex justify-center",children:w.jsx("button",{className:"btn-primary ",type:"submit",children:"Submit"})}),w.jsx("span",{className:"msgSpan",children:i})]})}function OT({setFormData:t,setshowProductModal:e}){let[i,n]=ne.useState([]),[s,a]=ne.useState(!1),[l,p]=ne.useState(""),[f,g]=ne.useState({machine_no:"",thickness:"N/A",product_type:"N/A",product_dimensions:"N/A",shift:"",Weight:""}),m=ne.useRef(""),k=ne.useRef(""),T=ne.useRef(""),[D,P]=ne.useState(""),[L,$]=ne.useState("");const N=H=>{const U=Xi(Mt,"latest_product",`machine_${H}`);Qn(U).then(j=>{g(j.data())})},E=()=>m.current.value===""||T.current.value===""||k.current.value===""||D===""?(p("Please fill up this form properly"),!1):!0,B=H=>{H.preventDefault(),E()&&(t({damagedProductCount:parseInt(k.current.value),machine_no:m.current.value,product_dimensions:f.product_dimensions,product_type:f.product_type,shift:T.current.value,thickness:f.thickness,unix_time:Math.floor(Date.now()/1e3),damagedCategory:D,weight:L}),e(!1),a(!1))};return ne.useEffect(()=>{const H=Xi(Mt,"information","info");Qn(H).then(U=>{let j=[];const G=U.data();j.push(w.jsx("optgroup",{label:"Forming Machines"})),G.forming_machine.forEach((Z,he)=>{j.push(w.jsx("option",{value:Z,children:Z},he))}),j.push(w.jsx("optgroup",{label:"Polish Machines"})),G.polish_machine.forEach((Z,he)=>{j.push(w.jsx("option",{value:Z,children:Z},he+j.length))}),n(j)})},[]),w.jsxs("form",{className:`flex flex-col gap-4 ${s?"":"#ddd"}`,onSubmit:B,children:[w.jsx("h2",{className:"text-2xl font-bold pb-6",children:"Add Product"}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Machine No*"}),w.jsxs("select",{ref:m,onChange:H=>{N(H.target.value)},className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:[w.jsx("option",{selected:!0,disabled:!0,value:"",children:"Machine No."}),i]})]}),w.jsxs("label",{className:"flex gap-6 items-center",style:{paddingBottom:"10px",borderBottom:"1px solid #000"},children:[w.jsx("p",{className:"w-[180px]",children:"Dimension:"}),f.product_dimensions]}),w.jsxs("label",{className:"flex gap-6 items-center",style:{paddingBottom:"10px",borderBottom:"1px solid #000"},children:[w.jsx("p",{className:"w-[180px]",children:"Thickness:"}),f.thickness]}),w.jsxs("label",{className:"flex gap-6 items-center",style:{paddingBottom:"10px",borderBottom:"1px solid #000"},children:[w.jsx("p",{className:"w-[180px]",children:"Product Type:"}),f.product_type]}),w.jsxs("div",{className:"flex gap-4 items-center",children:[w.jsx("p",{className:`${D=="damaged_product"?"btn-primary":"btn-primary opacity-50"}`,onClick:()=>P("damaged_product"),children:"Damaged Product"}),w.jsx("p",{className:` ${D=="scrap_product"?"btn-primary":"btn-primary opacity-50"}`,onClick:()=>P("scrap_product"),children:"Scrap Product"}),w.jsx("p",{className:` ${D=="cut_piece_product"?"btn-primary":"btn-primary opacity-50"}`,onClick:()=>P("cut_piece_product"),children:"Cut-Piece Product"}),w.jsx("p",{className:`${D=="b_grade_product"?"btn-primary opacity-100":"btn-primary opacity-50"}`,onClick:()=>P("b_grade_product"),children:"B-Grade Product"})]}),w.jsxs("label",{className:"flex gap-6 items-center",style:{marginBottom:"0px"},children:[w.jsx("p",{className:"w-[180px]",children:"Shift*"}),w.jsxs("select",{ref:T,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:[w.jsx("option",{selected:!0,disabled:!0,value:"",children:"Select Shift"}),od.map(H=>w.jsx("option",{value:H,children:H}))]})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Count*"}),w.jsx("input",{ref:k,type:"number",min:"1",required:!0,placeholder:"Damaged Product Count",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Weight*"}),w.jsx("input",{type:"text",min:"1",required:!0,placeholder:"Damaged Product Count",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:L,onChange:H=>$(H.target.value)})]}),w.jsx("div",{className:"flex justify-center",children:s?w.jsx("button",{className:"btn-primary ",type:"submit",children:"Submit"}):w.jsx("input",{value:"Review",type:"button",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",onClick:()=>{E()&&(a(!0),p("Please Review the form before submitting"))}})}),w.jsx("span",{className:"msgSpan",children:l})]})}function _V({setshowProductModal:t,showProductModal:e,setshowShiftModal:i,showShiftModal:n,damagedProductModal:s,setdamagedProductModal:a}){let[l,p]=ne.useState([]),[f,g]=ne.useState({}),[m,k]=ne.useState({}),[T,D]=ne.useState({});Dp("products",65).then(B=>{p(B)});const{addDocument:P}=Is("products"),{updateDocument:L,response:$}=Is("latest_product");ne.useEffect(()=>{Object.keys(f).length!==0&&(P({...f,status:"pending"}),L(`machine_${f.machine_no}`,{...f,status:"pending"}))},[f]);const{updateDocument:N}=Is("shiftTime");ne.useEffect(()=>{Object.keys(m).length!==0&&(N(m.shift,m),i(!1))},[m]);const{addDocument:E}=Is("damagedProducts");return ne.useEffect(()=>{Object.keys(T).length!==0&&(E(T),a(!1))},[T]),w.jsxs("div",{children:[w.jsx(vV,{productData:l}),e&&w.jsx(ld,{open:e,control:()=>t(!1),children:w.jsx(RT,{setFormData:g,setshowProductModal:t})}),n&&w.jsx(ld,{open:n,control:()=>i(!1),children:w.jsx(VT,{setShiftData:k,setshowProductModal:t})}),s&&w.jsx(ld,{open:s,control:()=>a(!1),children:w.jsx(OT,{setFormData:D,setshowProductModal:a})})]})}function CV(){let[t,e]=ne.useState(!1),[i,n]=ne.useState(!1),[s,a]=ne.useState(!1);return w.jsxs("div",{children:[w.jsx(gV,{setshowProductModal:e,setshowShiftModal:n,setdamagedProductModal:a}),w.jsx(_V,{setshowProductModal:e,showProductModal:t,setshowShiftModal:n,showShiftModal:i,damagedProductModal:s,setdamagedProductModal:a})]})}function wV(t){const e=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getFullYear()).slice(-2);return w.jsxs("p",{children:[`${e}/${i}/${n}`,w.jsx("br",{}),t.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})]})}function SV(){var p;let[t,e]=ne.useState([]);Dp("products",65).then(f=>{e(f)}),console.log("incharge",t);const{updateDocument:i,response:n}=Is("latest_product"),{updateDocument:s}=Is("products"),a=f=>{s(f==null?void 0:f.id,{...f,status:"approved"}),i(`machine_${f.machine_no}`,{...f,status:"approved"})},l=f=>{s(f==null?void 0:f.id,{...f,status:"declined"}),i(`machine_${f.machine_no}`,{...f,status:"declined"})};return w.jsxs("table",{className:"w-full",children:[w.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:w.jsxs("tr",{className:" rounded-tl-lg",children:[w.jsx("th",{className:"border border-black p-2",children:"Sl No."}),w.jsx("th",{className:"border border-black p-2",children:"Mazchine No."}),w.jsx("th",{className:"border border-black p-2",children:"Thickness"}),w.jsx("th",{className:"border border-black p-2",children:"Dimension"}),w.jsx("th",{className:"border border-black p-2",children:"Product Type"}),w.jsx("th",{className:"border border-black p-2",children:"Added On"}),w.jsx("th",{className:"border border-black p-2",children:"Action"})]})}),w.jsx("tbody",{children:(p=t==null?void 0:t.filter(f=>(f==null?void 0:f.status)=="pending"))==null?void 0:p.map((f,g)=>w.jsxs("tr",{children:[w.jsx("td",{class:"border border-black p-4",children:g+1}),w.jsx("td",{class:"border border-black p-4",children:f==null?void 0:f.machine_no}),w.jsx("td",{class:"border border-black p-4",children:f==null?void 0:f.thickness}),w.jsx("td",{class:"border border-black p-4",children:f==null?void 0:f.product_dimensions}),w.jsx("td",{class:"border border-black p-4",children:f==null?void 0:f.product_type}),w.jsx("td",{class:"border border-black p-4",children:f!=null&&f.creatingDate?wV(f.creatingDate.toDate()):w.jsx("p",{children:"No date"})}),w.jsx("td",{class:"border border-black p-4",children:w.jsxs("div",{className:"max-w-[140px] flex gap-2 items-center",children:[w.jsx("button",{className:"btn-primary bg-red-500",onClick:()=>l(f),children:"Decline"}),w.jsx("button",{className:"btn-primary bg-green-500",onClick:()=>a(f),children:"Approve"})]})})]}))})]})}function kV(){return w.jsxs("div",{children:[w.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Incharge Section"}),w.jsx(SV,{})]})}function MC(t){const e=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getFullYear()).slice(-2);return w.jsxs("p",{children:[`${e}/${i}/${n}`,w.jsx("br",{}),t.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})]})}function TV(){let[t,e]=ne.useState([]);return Dp("products",65).then(i=>{e(i)}),console.log("admin",t),w.jsxs("table",{className:"w-full",children:[w.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:w.jsxs("tr",{className:" rounded-tl-lg",children:[w.jsx("th",{className:"border border-black p-2",children:"Sl No."}),w.jsx("th",{className:"border border-black p-2",children:"Mazchine No."}),w.jsx("th",{className:"border border-black p-2",children:"Production Plan Change Request"}),w.jsx("th",{className:"border border-black p-2",children:"Production Plan Change Approve"}),w.jsx("th",{className:"border border-black p-2",children:"Status"}),w.jsx("th",{className:"border border-black p-2",children:"Details"})]})}),w.jsx("tbody",{children:t==null?void 0:t.map((i,n)=>w.jsxs("tr",{children:[w.jsx("td",{class:"border border-black p-4",children:n+1}),w.jsxs("td",{class:"border border-black p-4",children:["FM ",i==null?void 0:i.machine_no]}),w.jsx("td",{class:"border border-black p-4",children:i!=null&&i.creatingDate?MC(i==null?void 0:i.creatingDate.toDate()):w.jsx("p",{children:"No date"})}),w.jsx("td",{class:"border border-black p-4",children:i!=null&&i.updatedDate?MC(i==null?void 0:i.updatedDate.toDate()):w.jsx("p",{children:"No date"})}),w.jsx("td",{class:"border border-black p-4",children:w.jsx("p",{className:`text-center ${(i==null?void 0:i.status)=="pending"?"text-primary":(i==null?void 0:i.status)=="approved"?"text-green-500":(i==null?void 0:i.status)=="declined"?"text-red-500":""}`,children:i==null?void 0:i.status})}),w.jsx("td",{class:"border border-black p-4",children:w.jsxs("div",{className:"",children:[w.jsxs("p",{children:[w.jsx("span",{className:"font-bold",children:"Production Type:"})," ",i==null?void 0:i.product_type]}),w.jsxs("p",{children:[w.jsx("span",{className:"font-bold",children:"Dimension:"})," ",i==null?void 0:i.product_dimensions]}),w.jsxs("p",{children:[w.jsx("span",{className:"font-bold",children:"Thickness:"})," ",i==null?void 0:i.thickness]})]})})]}))})]})}function MV(){return w.jsxs("div",{children:[w.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Admin Section"}),w.jsx(TV,{})]})}const lr=({permission:t,children:e})=>{let[i,n]=ne.useState({});return ne.useEffect(()=>{oy("users",m0("email"),m0("pswd")).then(s=>{if(s[0]){let a=s[1][0].access;console.log("access",a);const l=Xi(Mt,"permissions",a);Qn(l).then(p=>{p.exists()&&n(p.data())})}})},[]),console.log("UserPermissions",i),i[t]?e:w.jsx("div",{className:"flex justify-center items-center min-h-screen",children:w.jsx(ry,{height:"80",width:"80",color:"#4fa94d",ariaLabel:"triangle-loading",visible:!0})})};function PV({setshowUserModal:t}){return w.jsxs("div",{className:"mb-10",children:[w.jsx("h2",{className:"text-3xl font-bold ",children:"Manage Users"}),w.jsx("div",{className:"flex gap-4 justify-end items-center",children:w.jsxs("button",{className:"bg-primary px-4 py-2 rounded-full text-white flex gap-2 items-center",onClick:()=>{t(!0)},children:["Add User",w.jsx(ay,{className:"w-6 h-6"})]})})]})}function EV({userdata:t}){return w.jsxs("table",{className:"w-full",children:[w.jsx("thead",{className:"bg-primary text-white font-light rounded-lg",children:w.jsxs("tr",{className:" rounded-tl-lg",children:[w.jsx("th",{className:"border border-black p-2",children:"ID."}),w.jsx("th",{className:"border border-black p-2",children:" Name"}),w.jsx("th",{className:"border border-black p-2",children:"User Name"}),w.jsx("th",{className:"border border-black p-2",children:"Email"}),w.jsx("th",{className:"border border-black p-2",children:"Access"})]})}),w.jsx("tbody",{children:t==null?void 0:t.map((e,i)=>w.jsxs("tr",{children:[w.jsx("td",{class:"border border-black p-4",children:i+1}),w.jsx("td",{class:"border border-black p-4",children:e.name}),w.jsx("td",{class:"border border-black p-4",children:e.username}),w.jsx("td",{class:"border border-black p-4",children:e.email}),w.jsx("td",{class:"border border-black p-4",children:e.access})]}))})]})}function AV({setFormData:t,setshowUserModal:e}){let i=ne.useRef(""),n=ne.useRef(""),s=ne.useRef(""),a=ne.useRef(""),l=ne.useRef(""),[p,f]=ne.useState("");const g=m=>{if(m.preventDefault(),i.current.value===""||n.current.value===""||s.current.value===""||a.current.value==="")return f("Please fill up this form properly"),!1;t({username:i.current.value,name:n.current.value,email:a.current.value,password:s.current.value,access:l.current.value}),e(!1)};return w.jsxs("form",{className:"flex flex-col gap-4",onSubmit:g,children:[w.jsx("h2",{className:"text-2xl font-bold pb-6",children:"Add Product"}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"User Name*"}),w.jsx("input",{type:"text",ref:i,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Name*"}),w.jsx("input",{type:"text",ref:n,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Password*"}),w.jsx("input",{type:"password",ref:s,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Email*"}),w.jsx("input",{type:"email",ref:a,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none"})]}),w.jsxs("label",{className:"flex gap-6 items-center",children:[w.jsx("p",{className:"w-[180px]",children:"Access*"}),w.jsx("select",{ref:l,className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",children:qR.map(m=>w.jsx("option",{value:m,children:m}))})]}),w.jsx("div",{className:"flex justify-center",children:w.jsx("button",{className:"btn-primary ",type:"submit",children:"Submit"})}),w.jsx("span",{className:"msgSpan",children:p})]})}function DV({showUserModal:t,setshowUserModal:e}){let[i,n]=ne.useState({}),[s,a]=ne.useState([]);Dp("users").then(p=>{a(p)});const{addDocument:l}=Is("users");return ne.useEffect(()=>{Object.keys(i).length!==0&&l(i)},[i]),w.jsxs("div",{children:[w.jsx(EV,{userdata:s}),t&&w.jsx(ld,{open:t,control:()=>e(!1),children:w.jsx(AV,{setFormData:n,setshowUserModal:e})})]})}function IV(){let[t,e]=ne.useState(!1);return w.jsxs("div",{children:[w.jsx(PV,{setshowUserModal:e}),w.jsx(DV,{showUserModal:t,setshowUserModal:e})]})}function FV(){let[t,e]=ne.useState({});const{addDocument:i}=Is("products"),{updateDocument:n,response:s}=Is("latest_product");return ne.useEffect(()=>{Object.keys(t).length!==0&&(i({...t,status:"pending"}),n(`machine_${t.machine_no}`,{...t,status:"pending"}),e({}))},[t]),w.jsx("div",{children:w.jsx(RT,{setFormData:e})})}function BV(){let[t,e]=ne.useState({});const{updateDocument:i}=Is("shiftTime");return ne.useEffect(()=>{Object.keys(t).length!==0&&(i(t.shift,t),setshowShiftModal(!1))},[t]),w.jsx("div",{children:w.jsx(VT,{setShiftData:e})})}function LV(){let[t,e]=ne.useState({});const{addDocument:i}=Is("damagedProducts");return ne.useEffect(()=>{Object.keys(t).length!==0&&i(t)},[t]),w.jsx("div",{children:w.jsx(OT,{setFormData:e})})}function NV({setShowAdd:t}){let[e,i]=ne.useState(""),[n,s]=ne.useState(null);const a=l=>{if(l.preventDefault(),n!==""){const p=Xi(Mt,"information","info");Ag(p,{forming_machine:BI(n)}),s(null),t(!1)}else return i("Machine number cannot be empty!"),!1};return w.jsxs("form",{className:"py-10",onSubmit:a,children:[w.jsx("h2",{className:"text-2xl pb-4 font-bold",children:"Add Machine"}),w.jsxs("label",{className:"flex gap-6 items-center mb-6",children:[w.jsx("p",{className:"w-[180px]",children:"Machine No*"}),w.jsx("input",{id:"",type:"number",name:"machine_no",className:"w-full p-2 rounded-md border border-black outline-none focus:outline-none",value:n,onChange:l=>s(l.target.value)})]}),e?w.jsx("span",{className:"text-red-500",children:e}):null,w.jsx("div",{className:"flex justify-center",children:w.jsx("button",{className:"btn-primary",type:"submit",children:"Add"})})]})}function RV(){const[t,e]=ne.useState(!1);let[i,n]=ne.useState([]);return ne.useEffect(()=>{const s=Xi(Mt,"information","info");Qc(s,a=>{const l=a.data();let p=[];l.forming_machine.forEach((f,g)=>{p.push(f)}),n(p)})},[]),w.jsxs("div",{children:[w.jsx("h2",{className:"text-3xl font-bold py-6",children:"Forming Machines"}),w.jsxs("div",{className:"flex justify-between items-center gap-4 mb-8 mr-10",children:[w.jsx("h2",{children:"List of Machines"}),w.jsxs("button",{className:"bg-primary px-4 py-2 rounded-full text-white flex gap-2 items-center",onClick:()=>{e(!t)},children:["Add Product",w.jsx(ay,{className:"w-6 h-6"})]})]}),t?w.jsx(NV,{setShowAdd:e}):null,w.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:i==null?void 0:i.map(s=>w.jsxs("div",{className:"px-6 py-2 rounded-xl border border-black",children:["FM ",s]}))})]})}var jT={exports:{}};(function(t){(function(){function e(F,O){F.prototype=i(O.prototype),F.prototype.constructor=F,F.base=O.prototype}function i(F){function O(){}return O.prototype=F,new O}function n(F,O,K){return K==="millisecond"?F.setMilliseconds(F.getMilliseconds()+1*O):K==="second"?F.setSeconds(F.getSeconds()+1*O):K==="minute"?F.setMinutes(F.getMinutes()+1*O):K==="hour"?F.setHours(F.getHours()+1*O):K==="day"?F.setDate(F.getDate()+1*O):K==="week"?F.setDate(F.getDate()+7*O):K==="month"?F.setMonth(F.getMonth()+1*O):K==="year"&&F.setFullYear(F.getFullYear()+1*O),F}function s(F,O){var K=!1;for(0>F&&(K=!0,F*=-1),F=""+F,O=O||1;F.length<O;)F="0"+F;return K?"-"+F:F}function a(F){if(!F)return F;F=F.replace(/^\s\s*/,"");for(var O=/\s/,K=F.length;O.test(F.charAt(--K)););return F.slice(0,K+1)}function l(F){F.roundRect=function(O,K,Ce,Ne,Oe,ke,ut,Tt){ut&&(this.fillStyle=ut),Tt&&(this.strokeStyle=Tt),typeof Oe>"u"&&(Oe=5),this.lineWidth=ke,this.beginPath(),this.moveTo(O+Oe,K),this.lineTo(O+Ce-Oe,K),this.quadraticCurveTo(O+Ce,K,O+Ce,K+Oe),this.lineTo(O+Ce,K+Ne-Oe),this.quadraticCurveTo(O+Ce,K+Ne,O+Ce-Oe,K+Ne),this.lineTo(O+Oe,K+Ne),this.quadraticCurveTo(O,K+Ne,O,K+Ne-Oe),this.lineTo(O,K+Oe),this.quadraticCurveTo(O,K,O+Oe,K),this.closePath(),ut&&this.fill(),Tt&&0<ke&&this.stroke()}}function p(F,O){return F-O}function f(F){var O=((F&16711680)>>16).toString(16),K=((F&65280)>>8).toString(16);return F=((F&255)>>0).toString(16),O=2>O.length?"0"+O:O,K=2>K.length?"0"+K:K,F=2>F.length?"0"+F:F,"#"+O+K+F}function g(F,O){var K=this.length>>>0,Ce=Number(O)||0,Ce=0>Ce?Math.ceil(Ce):Math.floor(Ce);for(0>Ce&&(Ce+=K);Ce<K;Ce++)if(Ce in this&&this[Ce]===F)return Ce;return-1}function m(F){return F===null||typeof F>"u"}function k(F){return F.indexOf||(F.indexOf=g),F}function T(F){Be.fSDec&&F[Bi("`eeDwdouMhrudods")](Bi("e`u`@ohl`uhnoHuds`uhnoDoe"),function(){Be._fTWm&&Be._fTWm(F)})}function D(F,O,K){K=K||"normal";var Ce=F+"_"+O+"_"+K,Ne=Vn[Ce];if(isNaN(Ne)){try{if(!Ti){var Oe=document.body;Ti=document.createElement("span"),Ti.innerHTML="";var ke=document.createTextNode("Mpgyi");Ti.appendChild(ke),Oe.appendChild(Ti)}Ti.style.display="",j(Ti,{position:"absolute",left:"0px",top:"-20000px",padding:"0px",margin:"0px",border:"none",whiteSpace:"pre",lineHeight:"normal",fontFamily:F,fontSize:O+"px",fontWeight:K}),Ne=Math.round(Ti.offsetHeight),Ti.style.display="none"}catch{Ne=Math.ceil(1.1*O)}Ne=Math.max(Ne,O),Vn[Ce]=Ne}return Ne}function P(F,O){var K=[];if(K={solid:[],shortDash:[3,1],shortDot:[1,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],dot:[1,2],dash:[4,2],dashDot:[4,2,1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2]}[F||"solid"])for(var Ce=0;Ce<K.length;Ce++)K[Ce]*=O;else K=[];return K}function L(F,O,K,Ce,Ne){return Ce=Ce||[],Ne=m(Ne)?Ui?{passive:!1,capture:!1}:!1:Ne,Ce.push([F,O,K,Ne]),F.addEventListener?(F.addEventListener(O,K,Ne),K):F.attachEvent?(Ce=function(Oe){Oe=Oe||window.event,Oe.preventDefault=Oe.preventDefault||function(){Oe.returnValue=!1},Oe.stopPropagation=Oe.stopPropagation||function(){Oe.cancelBubble=!0},K.call(F,Oe)},F.attachEvent("on"+O,Ce),Ce):!1}function $(F){if(F._menuButton)F.exportEnabled?(j(F._menuButton,{backgroundColor:F.toolbar.itemBackgroundColor,color:F.toolbar.fontColor}),Z(F._menuButton),G(F,F._menuButton,"menu"),0>=navigator.userAgent.search("MSIE")&&F._menuButton.childNodes[0]&&j(F._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"})):he(F._menuButton);else if(F.exportEnabled&&X){var O=!1;F._menuButton=document.createElement("button"),G(F,F._menuButton,"menu"),F._toolBar.appendChild(F._menuButton),L(F._menuButton,"touchstart",function(Oe){O=!0},F.allDOMEventHandlers),L(F._menuButton,"click",function(){F._dropdownMenu.style.display!=="none"||F._dropDownCloseTime&&500>=new Date().getTime()-F._dropDownCloseTime.getTime()||(F._dropdownMenu.style.display="block",F._menuButton.blur(),F._dropdownMenu.focus())},F.allDOMEventHandlers,!0),L(F._menuButton,"mousemove",function(){O||(j(F._menuButton,{backgroundColor:F.toolbar.itemBackgroundColorOnHover,color:F.toolbar.fontColorOnHover}),0>=navigator.userAgent.search("MSIE")&&j(F._menuButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},F.allDOMEventHandlers,!0),L(F._menuButton,"mouseout",function(){O||(j(F._menuButton,{backgroundColor:F.toolbar.itemBackgroundColor,color:F.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&j(F._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},F.allDOMEventHandlers,!0)}if(F.exportEnabled&&F._dropdownMenu){var K=F.theme&&F.theme.indexOf("dark")!==-1?"black":"#888888";j(F._dropdownMenu,{backgroundColor:F.toolbar.itemBackgroundColor,color:F.toolbar.fontColor,boxShadow:"2px 2px 10px "+K});for(var K=F._dropdownMenu.childNodes,Ce=[F._cultureInfo.printText,F._cultureInfo.saveJPGText,F._cultureInfo.savePNGText],Ne=0;Ne<Ce.length;Ne++)j(K[Ne],{backgroundColor:F.toolbar.itemBackgroundColor,color:F.toolbar.fontColor}),K[Ne].innerHTML=Ce[Ne]}else!F._dropdownMenu&&F.exportEnabled&&X&&(O=!1,F._dropdownMenu=document.createElement("div"),F._dropdownMenu.setAttribute("tabindex",-1),K=F.theme&&F.theme.indexOf("dark")!==-1?"black":"#888888",j(F._dropdownMenu,{position:"absolute",zIndex:1,userSelect:"none",MozUserSeelct:"none",WebkitUserSelect:"none",msUserSelect:"none",cursor:"pointer",right:"0px",top:"25px",minWidth:"120px",outline:0,fontSize:"14px",fontFamily:"Arial, Helvetica, sans-serif",padding:"5px 0px 5px 0px",textAlign:"left",lineHeight:"10px",backgroundColor:F.toolbar.itemBackgroundColor,boxShadow:"2px 2px 10px "+K}),F._dropdownMenu.style.display="none",F._toolBar.appendChild(F._dropdownMenu),L(F._dropdownMenu,"blur",function(){he(F._dropdownMenu),F._dropDownCloseTime=new Date},F.allDOMEventHandlers,!0),K=document.createElement("div"),j(K,{padding:"12px 8px 12px 8px"}),K.innerHTML=F._cultureInfo.printText,K.style.backgroundColor=F.toolbar.itemBackgroundColor,K.style.color=F.toolbar.fontColor,F._dropdownMenu.appendChild(K),L(K,"touchstart",function(Oe){O=!0},F.allDOMEventHandlers),L(K,"mousemove",function(){O||(this.style.backgroundColor=F.toolbar.itemBackgroundColorOnHover,this.style.color=F.toolbar.fontColorOnHover)},F.allDOMEventHandlers,!0),L(K,"mouseout",function(){O||(this.style.backgroundColor=F.toolbar.itemBackgroundColor,this.style.color=F.toolbar.fontColor)},F.allDOMEventHandlers,!0),L(K,"click",function(){F.print(),he(F._dropdownMenu)},F.allDOMEventHandlers,!0),K=document.createElement("div"),j(K,{padding:"12px 8px 12px 8px"}),K.innerHTML=F._cultureInfo.saveJPGText,K.style.backgroundColor=F.toolbar.itemBackgroundColor,K.style.color=F.toolbar.fontColor,F._dropdownMenu.appendChild(K),L(K,"touchstart",function(Oe){O=!0},F.allDOMEventHandlers),L(K,"mousemove",function(){O||(this.style.backgroundColor=F.toolbar.itemBackgroundColorOnHover,this.style.color=F.toolbar.fontColorOnHover)},F.allDOMEventHandlers,!0),L(K,"mouseout",function(){O||(this.style.backgroundColor=F.toolbar.itemBackgroundColor,this.style.color=F.toolbar.fontColor)},F.allDOMEventHandlers,!0),L(K,"click",function(){F.exportChart({format:"jpeg",fileName:F.exportFileName}),he(F._dropdownMenu)},F.allDOMEventHandlers,!0),K=document.createElement("div"),j(K,{padding:"12px 8px 12px 8px"}),K.innerHTML=F._cultureInfo.savePNGText,K.style.backgroundColor=F.toolbar.itemBackgroundColor,K.style.color=F.toolbar.fontColor,F._dropdownMenu.appendChild(K),L(K,"touchstart",function(Oe){O=!0},F.allDOMEventHandlers),L(K,"mousemove",function(){O||(this.style.backgroundColor=F.toolbar.itemBackgroundColorOnHover,this.style.color=F.toolbar.fontColorOnHover)},F.allDOMEventHandlers,!0),L(K,"mouseout",function(){O||(this.style.backgroundColor=F.toolbar.itemBackgroundColor,this.style.color=F.toolbar.fontColor)},F.allDOMEventHandlers,!0),L(K,"click",function(){F.exportChart({format:"png",fileName:F.exportFileName}),he(F._dropdownMenu)},F.allDOMEventHandlers,!0))}function N(F,O,K){for(F*=ti,O*=ti,F=K.getImageData(F,O,2,2).data,O=!0,K=0;4>K;K++)if(F[K]!==F[K+4]|F[K]!==F[K+8]|F[K]!==F[K+12]){O=!1;break}return O?F[0]<<16|F[1]<<8|F[2]:0}function E(F,O,K){return F in O?O[F]:K[F]}function B(F,O,K,Ce){X&&Zn?(Ce=!m(Ce)&&Ce?F.getContext("2d",{willReadFrequently:!0}):F.getContext("2d"),ds=Ce.webkitBackingStorePixelRatio||Ce.mozBackingStorePixelRatio||Ce.msBackingStorePixelRatio||Ce.oBackingStorePixelRatio||Ce.backingStorePixelRatio||1,ti=ar/ds,F.width=O*ti,F.height=K*ti,ar!==ds&&(F.style.width=O+"px",F.style.height=K+"px",Ce.scale(ti,ti))):(F.width=O,F.height=K)}function H(F){if(!ka){var O=!1,K=!1;typeof _e.Chart.creditHref>"u"?(F.creditHref=Bi("iuuqr;..b`ow`rkr/bnl."),F.creditText=Bi("B`ow`rKR/bnl")):(O=F.updateOption("creditText"),K=F.updateOption("creditHref")),F.creditHref&&F.creditText&&(F._creditLink||(F._creditLink=document.createElement("a"),F._creditLink.setAttribute("class","canvasjs-chart-credit"),F._creditLink.setAttribute("title","JavaScript Charts"),j(F._creditLink,{outline:"none",margin:"0px",position:"absolute",right:"2px",top:F.height-14+"px",color:"dimgrey",textDecoration:"none",fontSize:"11px",fontFamily:"Calibri, Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"}),F._creditLink.setAttribute("tabIndex",-1),F._creditLink.setAttribute("target","_blank")),(F.renderCount===0||O||K)&&(F._creditLink.setAttribute("href",F.creditHref),F._creditLink.innerHTML=F.creditText),F._creditLink&&F.creditHref&&F.creditText?(F._creditLink.parentElement||F._canvasJSContainer.appendChild(F._creditLink),F._creditLink.style.top=F.height-14+"px"):F._creditLink.parentElement&&F._canvasJSContainer.removeChild(F._creditLink))}}function U(F,O,K){var Ce=document.createElement("canvas");return Ce.setAttribute("class","canvasjs-chart-canvas"),B(Ce,F,O,K),X||typeof G_vmlCanvasManager>"u"||G_vmlCanvasManager.initElement(Ce),Ce}function j(F,O){for(var K in O)F.style[K]=O[K]}function G(F,O,K){O.getAttribute("state")||(O.style.backgroundColor=F.toolbar.itemBackgroundColor,O.style.color=F.toolbar.fontColor,O.style.border="none",j(O,{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"})),O.getAttribute("state")!==K&&(O.setAttribute("state",K),O.setAttribute("type","button"),j(O,{padding:"5px 12px",cursor:"pointer",float:"left",width:"40px",height:"25px",outline:"0px",verticalAlign:"baseline",lineHeight:"0"}),O.innerHTML="<img src='"+Ta[K].image+"' alt='"+F._cultureInfo[K+"Text"]+"' />",j(O.childNodes[0],{height:"95%",pointerEvents:"none"})),O.setAttribute("title",F._cultureInfo[K+"Text"])}function Z(){for(var F=null,O=0;O<arguments.length;O++)F=arguments[O],F.style&&(F.style.display="inline")}function he(){for(var F=null,O=0;O<arguments.length;O++)(F=arguments[O])&&F.style&&(F.style.display="none")}function ee(F,O,K,Ce,Ne){return F===null||typeof F>"u"?typeof K>"u"?O:K:(F=parseFloat(F.toString())*(0<=F.toString().indexOf("%")?O/100:1),typeof Ce<"u"&&(F=Math.min(Ce,F),typeof Ne<"u"&&(F=Math.max(Ne,F))),!isNaN(F)&&F<=O&&0<=F?F:typeof K>"u"?O:K)}function re(F,O,K,Ce,Ne){this._defaultsKey=F,this._themeOptionsKey=O,this._index=Ce,this.parent=Ne,this._eventListeners=[],F={},this.theme&&m(this.parent)&&m(O)&&m(Ce)?F=m(this.predefinedThemes[this.theme])?this.predefinedThemes.light1:this.predefinedThemes[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[O]&&(Ce===null?F=this.parent.themeOptions[O]:0<this.parent.themeOptions[O].length&&(Ce=Math.min(this.parent.themeOptions[O].length-1,Ce),F=this.parent.themeOptions[O][Ce])),this.themeOptions=F,this.options=K||{_isPlaceholder:!0},this.setOptions(this.options,F)}function we(F,O,K,Ce,Ne){typeof Ne>"u"&&(Ne=0),this._padding=Ne,this._x1=F,this._y1=O,this._x2=K,this._y2=Ce,this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding}function de(F,O){de.base.constructor.call(this,"TextBlock",null,O,null,null),this.ctx=F,this._isDirty=!0,this._wrappedText=null,this._initialize()}function Re(F,O){Re.base.constructor.call(this,"Toolbar","toolbar",O,null,F),this.chart=F,this.canvas=F.canvas,this.ctx=this.chart.ctx,this.optionsName="toolbar"}function He(F,O){if(He.base.constructor.call(this,"Title","title",O,null,F),this.chart=F,this.canvas=F.canvas,this.ctx=this.chart.ctx,this.optionsName="title",m(this.options.margin)&&F.options.subtitles){for(var K=F.options.subtitles,Ce=0;Ce<K.length;Ce++)if((m(K[Ce].horizontalAlign)&&this.horizontalAlign==="center"||K[Ce].horizontalAlign===this.horizontalAlign)&&(m(K[Ce].verticalAlign)&&this.verticalAlign==="top"||K[Ce].verticalAlign===this.verticalAlign)&&!K[Ce].dockInsidePlotArea==!this.dockInsidePlotArea){this.margin=0;break}}typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function Ze(F,O,K){Ze.base.constructor.call(this,"Subtitle","subtitles",O,K,F),this.chart=F,this.canvas=F.canvas,this.ctx=this.chart.ctx,this.optionsName="subtitles",this.isOptionsInArray=!0,typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function et(){this.pool=[]}function Pe(F){var O;F&&me[F]&&(O=me[F]),Pe.base.constructor.call(this,"CultureInfo",null,O,null,null)}var Le=!1,Be={},X=!!document.createElement("canvas").getContext,_e={Chart:{width:500,height:400,zoomEnabled:!1,zoomType:"x",backgroundColor:"white",theme:"light1",animationEnabled:!1,animationDuration:1200,dataPointWidth:null,dataPointMinWidth:null,dataPointMaxWidth:null,colorSet:"colorSet1",culture:"en",creditText:"CanvasJS",interactivityEnabled:!0,exportEnabled:!1,exportFileName:"Chart",rangeChanging:null,rangeChanged:null,publicProperties:{title:"readWrite",subtitles:"readWrite",toolbar:"readWrite",toolTip:"readWrite",legend:"readWrite",axisX:"readWrite",axisY:"readWrite",axisX2:"readWrite",axisY2:"readWrite",data:"readWrite",options:"readWrite",bounds:"readOnly",container:"readOnly",selectedColorSet:"readOnly"}},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:X?"transparent":null,margin:5,wrap:!0,maxWidth:null,textAlign:"center",dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Subtitle:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:14,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:2,wrap:!0,maxWidth:null,textAlign:"center",dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white",publicProperties:{options:"readWrite",chart:"readOnly"}},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null,dockInsidePlotArea:!1,reversed:!1,backgroundColor:X?"transparent":null,borderColor:X?"transparent":null,borderThickness:0,cornerRadius:0,maxWidth:null,maxHeight:null,markerMargin:null,itemMaxWidth:null,itemWidth:null,itemWrap:!0,itemTextFormatter:null,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},ToolTip:{enabled:!0,shared:!1,animationEnabled:!0,content:null,contentFormatter:null,reversed:!1,backgroundColor:X?"rgba(255,255,255,.9)":"rgb(255,255,255)",borderColor:null,borderThickness:2,cornerRadius:5,fontSize:14,fontColor:"black",fontFamily:"Calibri, Arial, Georgia, serif;",fontWeight:"normal",fontStyle:"italic",updated:null,hidden:null,publicProperties:{options:"readWrite",chart:"readOnly"}},Axis:{minimum:null,maximum:null,viewportMinimum:null,viewportMaximum:null,interval:null,intervalType:null,reversed:!1,logarithmic:!1,logarithmBase:10,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",titleWrap:!0,titleMaxWidth:null,titleBackgroundColor:X?"transparent":null,titleBorderColor:X?"transparent":null,titleBorderThickness:0,titleCornerRadius:0,titleTextAlign:"left",labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!0,labelWrap:!0,labelMaxWidth:null,labelFormatter:null,labelBackgroundColor:X?"transparent":null,labelBorderColor:X?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelPlacement:"outside",labelTextAlign:"left",prefix:"",suffix:"",includeZero:!1,tickLength:5,tickColor:"black",tickThickness:1,tickPlacement:"outside",lineColor:"black",lineThickness:1,lineDashType:"solid",gridColor:"#A0A0A0",gridThickness:0,gridDashType:"solid",interlacedColor:X?"transparent":null,valueFormatString:null,margin:2,publicProperties:{options:"readWrite",stripLines:"readWrite",scaleBreaks:"readWrite",crosshair:"readWrite",bounds:"readOnly",chart:"readOnly"}},StripLine:{value:null,startValue:null,endValue:null,color:"orange",opacity:null,thickness:2,lineDashType:"solid",label:"",labelPlacement:"inside",labelAlign:"far",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:null,labelBorderColor:X?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,labelTextAlign:"left",showOnTop:!1,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},ScaleBreaks:{autoCalculate:!1,collapsibleThreshold:"25%",maxNumberOfAutoBreaks:2,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",customBreaks:"readWrite",axis:"readOnly",autoBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Break:{startValue:null,endValue:null,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",scaleBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Crosshair:{enabled:!1,snapToDataPoint:!1,color:"grey",opacity:null,thickness:2,lineDashType:"solid",label:"",labelWrap:!0,labelMaxWidth:null,labelTextAlign:"left",labelBackgroundColor:X?"grey":null,labelBorderColor:X?"grey":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:X?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:12,labelFontColor:"#fff",labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,valueFormatString:null,updated:null,hidden:null,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,highlightEnabled:!0,cursor:"default",indexLabel:"",indexLabelPlacement:"auto",indexLabelOrientation:"horizontal",indexLabelTextAlign:"left",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelBorderColor:null,indexLabelBorderThickness:0,indexLabelLineColor:"gray",indexLabelLineThickness:1,indexLabelLineDashType:"solid",indexLabelMaxWidth:null,indexLabelWrap:!0,indexLabelFormatter:null,lineThickness:2,lineDashType:"solid",connectNullData:!1,nullDataLineDashType:"dash",color:null,lineColor:null,risingColor:"white",fallingColor:"red",fillOpacity:null,startAngle:0,radius:null,innerRadius:null,explodeOnClick:!0,neckHeight:null,neckWidth:null,reversed:!1,valueRepresents:null,linkedDataSeriesIndex:null,whiskerThickness:2,whiskerDashType:"solid",whiskerColor:null,whiskerLength:null,stemThickness:2,stemColor:null,stemDashType:"solid",upperBoxColor:"white",lowerBoxColor:"white",type:"column",xValueType:"number",axisXType:"primary",axisYType:"primary",axisXIndex:0,axisYIndex:0,xValueFormatString:null,yValueFormatString:null,zValueFormatString:null,percentFormatString:null,showInLegend:!1,legendMarkerType:null,legendMarkerColor:null,legendText:null,legendMarkerBorderColor:X?"transparent":null,legendMarkerBorderThickness:0,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:X?"transparent":null,markerBorderThickness:0,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0,publicProperties:{options:"readWrite",axisX:"readWrite",axisY:"readWrite",chart:"readOnly"}},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",textAlign:"left",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",menuText:"More Options",saveJPGText:"Save as JPEG",savePNGText:"Save as PNG",printText:"Print",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")}},me={en:{}},W=X?"Trebuchet MS, Helvetica, sans-serif":"Arial",ae=X?"Impact, Charcoal, sans-serif":"Arial",fe={colorSet1:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #7F6084 #77A033 #33558B #E59566".split(" "),colorSet2:"#6D78AD #51CDA0 #DF7970 #4C9CA0 #AE7D99 #C9D45C #5592AD #DF874D #52BCA8 #8E7AA3 #E3CB64 #C77B85 #C39762 #8DD17E #B57952 #FCC26C".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},ye,Se,Ee,tt,nt;Se="#333333",Ee="#000000",ye="#666666",nt=tt="#000000";var it=20,We=14,xt={colorSet:"colorSet1",backgroundColor:"#FFFFFF",title:{fontFamily:ae,fontSize:32,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:ae,fontSize:We,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:W,indexLabelFontSize:We,indexLabelFontColor:Se,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Se,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:0,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Se,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:0,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Se,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:1,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Se,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:1,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:W,fontSize:14,fontColor:Se,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:W,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1},toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white"}};Ee=Se="#F5F5F5",ye="#FFFFFF",tt="#40BAF1",nt="#F5F5F5";var it=20,We=14,rt={colorSet:"colorSet2",title:{fontFamily:W,fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},subtitles:[{fontFamily:W,fontSize:We,fontColor:"#3A3A3A",fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:W,indexLabelFontSize:We,indexLabelFontColor:"#666666",indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:W,titleFontSize:it,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickThickness:1,tickColor:"#BBBBBB",gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:W,titleFontSize:it,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:W,titleFontSize:it,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:W,titleFontSize:it,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:W,fontSize:14,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:W,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1},toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white"}};Ee=Se="#F5F5F5",ye="#FFFFFF",tt="#40BAF1",nt="#F5F5F5",it=20,We=14,ae={colorSet:"colorSet1",backgroundColor:"#2A2A2A",title:{fontFamily:ae,fontSize:32,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:ae,fontSize:We,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{itemBackgroundColor:"#666666",itemBackgroundColorOnHover:"#FF7372",buttonBorderColor:"#FF7372",buttonBorderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:W,indexLabelFontSize:We,indexLabelFontColor:Ee,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:0,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:0,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:1,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:1,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:W,fontSize:14,fontColor:Se,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:W,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:Ee,backgroundColor:"rgba(0, 0, 0, .7)"}},ye="#FFFFFF",Ee=Se="#FAFAFA",tt="#40BAF1",nt="#F5F5F5";var it=20,We=14,It={light1:xt,light2:rt,dark1:ae,dark2:{colorSet:"colorSet2",backgroundColor:"#32373A",title:{fontFamily:W,fontSize:32,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:W,fontSize:We,fontColor:Se,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{itemBackgroundColor:"#666666",itemBackgroundColorOnHover:"#FF7372",buttonBorderColor:"#FF7372",buttonBorderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:W,indexLabelFontSize:We,indexLabelFontColor:Ee,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:0,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:1,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:0,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:0,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:1,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:W,titleFontSize:it,titleFontColor:Ee,titleFontWeight:"normal",labelFontFamily:W,labelFontSize:We,labelFontColor:Ee,labelFontWeight:"normal",lineThickness:0,lineColor:ye,tickThickness:1,tickColor:ye,gridThickness:1,gridColor:ye,stripLines:[{labelFontFamily:W,labelFontSize:We,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:W,labelFontSize:We,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:tt,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:W,fontSize:14,fontColor:Se,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:W,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:Ee,backgroundColor:"rgba(0, 0, 0, .7)"}},theme1:xt,theme2:rt,theme3:xt},lt={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")};(function(){Be.fSDec=function(F){for(var O="",K=0;K<F.length;K++)O+=String.fromCharCode(Math.ceil(F.length/57/5)^F.charCodeAt(K));return O},delete _e[Be.fSDec("Bi`su")][Be.fSDec("bsdehuIsdg")],Be.pro={sCH:_e[Be.fSDec("Bi`su")][Be.fSDec("bsdehuIsdg")]}})();var Ui=function(){var F=!1;try{var O=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){return F=!0,!1}});window.addEventListener&&(window.addEventListener("test",null,O),window.removeEventListener("test",null,O))}catch{F=!1}return F}(),Vn={},Ti=null,cn=function(){this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height))},bi=function(F){F.width=1,F.height=1,F.getContext("2d")&&F.getContext("2d").clearRect(0,0,1,1)},Gi=function(F,O,K){return O=Math.min(this.width,this.height),Math.max(this.theme==="theme4"?0:300<=O?12:11,Math.round(O*(F/400)))},Ki=function(){var F=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,O="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),K="Sun Mon Tue Wed Thu Fri Sat".split(" "),Ce="January February March April May June July August September October November December".split(" "),Ne="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Oe=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,ke=/[^-+\dA-Z]/g;return function(ut,Tt,at){var _i=at?at.days:O,Ut=at?at.months:Ce,li=at?at.shortDays:K,se=at?at.shortMonths:Ne;at="";var pe=!1;if(ut=ut&&ut.getTime?ut:ut?new Date(ut):new Date,isNaN(ut))throw SyntaxError("invalid date");Tt.slice(0,4)==="UTC:"&&(Tt=Tt.slice(4),pe=!0),at=pe?"getUTC":"get";var ge=ut[at+"Date"](),xe=ut[at+"Day"](),Ve=ut[at+"Month"](),r=ut[at+"FullYear"](),d=ut[at+"Hours"](),h=ut[at+"Minutes"](),o=ut[at+"Seconds"](),c=ut[at+"Milliseconds"](),x=pe?0:ut.getTimezoneOffset();return at=Tt.replace(F,function(y){switch(y){case"D":return ge;case"DD":return s(ge,2);case"DDD":return li[xe];case"DDDD":return _i[xe];case"M":return Ve+1;case"MM":return s(Ve+1,2);case"MMM":return se[Ve];case"MMMM":return Ut[Ve];case"Y":return parseInt(String(r).slice(-2));case"YY":return s(String(r).slice(-2),2);case"YYY":return s(String(r).slice(-3),3);case"YYYY":return s(r,4);case"h":return d%12||12;case"hh":return s(d%12||12,2);case"H":return d;case"HH":return s(d,2);case"m":return h;case"mm":return s(h,2);case"s":return o;case"ss":return s(o,2);case"f":return s(String(c),3).slice(0,1);case"ff":return s(String(c),3).slice(0,2);case"fff":return s(String(c),3).slice(0,3);case"t":return 12>d?"a":"p";case"tt":return 12>d?"am":"pm";case"T":return 12>d?"A":"P";case"TT":return 12>d?"AM":"PM";case"K":return pe?"UTC":(String(ut).match(Oe)||[""]).pop().replace(ke,"");case"z":return(0<x?"-":"+")+Math.floor(Math.abs(x)/60);case"zz":return(0<x?"-":"+")+s(Math.floor(Math.abs(x)/60),2);case"zzz":return(0<x?"-":"+")+s(Math.floor(Math.abs(x)/60),2)+s(Math.abs(x)%60,2);default:return y.slice(1,y.length-1)}})}}(),Sa=function(F){var O=0>F;if(1>Math.abs(F)){var K=parseInt(F.toString().split("e-")[1]);K&&(F=(O?-1*F:F)*Math.pow(10,K-1),F="0."+Array(K).join("0")+F.toString().substring(2),F=O?"-"+F:F)}else K=parseInt(F.toString().split("+")[1]),20<K&&(K-=20,F/=Math.pow(10,K),F=F.toString()+Array(K+1).join("0"));return String(F)},Nt=function(F,O,K){if(F===null)return"";if(!isFinite(F))return F;F=Number(F);var Ce=0>F;Ce&&(F*=-1);var Ne=K?K.decimalSeparator:".",Oe=K?K.digitGroupSeparator:",",ke="";O=String(O);var ke=1,ge=K="",ut=-1,Tt=[],at=[],_i=0,Ut=0,li=0,se=!1,pe=0,ge=O.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);O=null;for(var xe=0;ge&&xe<ge.length;xe++)if(O=ge[xe],O==="."&&0>ut)ut=xe;else{if(O==="%")ke*=100;else if(O===""){ke*=1e3;continue}else if(O[0]===","&&O[O.length-1]==="."){ke/=Math.pow(1e3,O.length-1),ut=xe+O.length-1;continue}else O[0]!=="E"&&O[0]!=="e"||O[O.length-1]!=="0"||(se=!0);0>ut?(Tt.push(O),O==="#"||O==="0"?_i++:O===","&&li++):(at.push(O),O!=="#"&&O!=="0"||Ut++)}for(se&&(O=Math.floor(F),ge=-Math.floor(Math.log(F)/Math.LN10+1),pe=F===0?0:O===0?-(_i+ge):Sa(O).length-_i,ke/=Math.pow(10,pe)),0>ut&&(ut=xe),ke=(F*ke).toFixed(Ut),O=ke.split("."),ke=(O[0]+"").split(""),F=(O[1]+"").split(""),ke&&ke[0]==="0"&&ke.shift(),se=ge=xe=Ut=ut=0;0<Tt.length;)if(O=Tt.pop(),O==="#"||O==="0")if(ut++,ut===_i){var Ve=ke,ke=[];if(O==="0")for(O=_i-Ut-(Ve?Ve.length:0);0<O;)Ve.unshift("0"),O--;for(;0<Ve.length;)K=Ve.pop()+K,se++,se%ge===0&&xe===li&&0<Ve.length&&(K=Oe+K)}else 0<ke.length?(K=ke.pop()+K,Ut++,se++):O==="0"&&(K="0"+K,Ut++,se++),se%ge===0&&xe===li&&0<ke.length&&(K=Oe+K);else O[0]!=="E"&&O[0]!=="e"||O[O.length-1]!=="0"||!/[eE][+-]*[0]+/.test(O)?O===","?(xe++,ge=se,se=0,0<ke.length&&(K=Oe+K)):K=1<O.length&&(O[0]==='"'&&O[O.length-1]==='"'||O[0]==="'"&&O[O.length-1]==="'")?O.slice(1,O.length-1)+K:O+K:(O=0>pe?O.replace("+","").replace("-",""):O.replace("-",""),K+=O.replace(/[0]+/,function(r){return s(pe,r.length)}));for(Oe="",Tt=!1;0<at.length;)O=at.shift(),O==="#"||O==="0"?0<F.length&&Number(F.join(""))!==0?(Oe+=F.shift(),Tt=!0):O==="0"&&(Oe+="0",Tt=!0):1<O.length&&(O[0]==='"'&&O[O.length-1]==='"'||O[0]==="'"&&O[O.length-1]==="'")?Oe+=O.slice(1,O.length-1):O[0]!=="E"&&O[0]!=="e"||O[O.length-1]!=="0"||!/[eE][+-]*[0]+/.test(O)?Oe+=O:(O=0>pe?O.replace("+","").replace("-",""):O.replace("-",""),Oe+=O.replace(/[0]+/,function(r){return s(pe,r.length)}));return K+=(Tt?Ne:"")+Oe,Ce?"-"+K:K},$i=function(F){var O=0,K=0;return F=F||window.event,F.offsetX||F.offsetX===0?(O=F.offsetX,K=F.offsetY):F.layerX||F.layerX==0?(O=F.layerX,K=F.layerY):(O=F.pageX-F.target.offsetLeft,K=F.pageY-F.target.offsetTop),{x:O,y:K}},Zn=!0,ar=window.devicePixelRatio||1,ds=1,ti=ar/ds,kt=function(F,O,K,Ce,Ne,Oe,ke,ut,Tt,at,_i,Ut,li){typeof li>"u"&&(li=1),ke=ke||0,ut=ut||"black";var se=15<Ce-O&&15<Ne-K?8:.35*Math.min(Ce-O,Ne-K);F.beginPath(),F.moveTo(O,K),F.save(),F.fillStyle=Oe,F.globalAlpha=li,F.fillRect(O,K,Ce-O,Ne-K),F.globalAlpha=1,0<ke&&(li=ke%2===0?0:.5,F.beginPath(),F.lineWidth=ke,F.strokeStyle=ut,F.moveTo(O,K),F.rect(O-li,K-li,Ce-O+2*li,Ne-K+2*li),F.stroke()),F.restore(),Tt===!0&&(F.save(),F.beginPath(),F.moveTo(O,K),F.lineTo(O+se,K+se),F.lineTo(Ce-se,K+se),F.lineTo(Ce,K),F.closePath(),ke=F.createLinearGradient((Ce+O)/2,K+se,(Ce+O)/2,K),ke.addColorStop(0,Oe),ke.addColorStop(1,"rgba(255, 255, 255, .4)"),F.fillStyle=ke,F.fill(),F.restore()),at===!0&&(F.save(),F.beginPath(),F.moveTo(O,Ne),F.lineTo(O+se,Ne-se),F.lineTo(Ce-se,Ne-se),F.lineTo(Ce,Ne),F.closePath(),ke=F.createLinearGradient((Ce+O)/2,Ne-se,(Ce+O)/2,Ne),ke.addColorStop(0,Oe),ke.addColorStop(1,"rgba(255, 255, 255, .4)"),F.fillStyle=ke,F.fill(),F.restore())},Bi=function(F){for(var O="",K=0;K<F.length;K++)O+=String.fromCharCode(Math.ceil(F.length/57/5)^F.charCodeAt(K));return O},ka=window&&window[Bi("mnb`uhno")]&&window[Bi("mnb`uhno")].href&&window[Bi("mnb`uhno")].href.indexOf&&(window[Bi("mnb`uhno")].href.indexOf(Bi("b`ow`rkr/bnl"))!==-1||window[Bi("mnb`uhno")].href.indexOf(Bi("gdonqhy/bnl"))!==-1||window[Bi("mnb`uhno")].href.indexOf(Bi("gheemd"))!==-1)&&window[Bi("mnb`uhno")].href.indexOf(Bi("gheemd"))===-1,Ta={reset:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAeCAYAAABJ/8wUAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPjSURBVFhHxVdJaFNRFP1J/jwkP5MxsbaC1WJEglSxOFAXIsFpVRE3ggi1K90obioRRBA33XXnQnciirhQcMCdorgQxBkXWlREkFKsWkv5npvckp/XnzRpKh64kLw733fffe9L/wrL0+mVUdO8uTSZ3MBL/we2qg4rkuSpodCELstXE46ziVkLQ6FQcGOmeSSq6wd4aV50d3drWjj8kQKZJTUc9kxFGenv79dZrDksTSTWWJp2QYtEPiErysyzdX0LsxsCQR8keX8gs6RHIk8ysdgKFg2G53mhuOPsshTlBjKaFo1g7SqLNoShKLdFXT8huQ/paLSbxatYnc2mHMM4hr18Vi8TIvCmXF3vYrW6cF23gGTOk0M1wA4RKvOmq6vLZRVJipvmSWT6tZ6CSEYkco5V50VPT4+D7RwOqi6RiSZm0fJ+vggSqkeoypdsNmuyelNwbXsbgvkWYMtzDWNvWaijoyOBqE+hVK8abcssUeXQ/YfKyi0gFYv1Ipgfoj34fYGTJLOYJA0ODirok32GLN8XhUWCwSes1hIwBg6LydJ/tEeRRapAdUp+wSAiZchtZZWWgAZ+JNpD8peYXQVK9UwUxNpzOK8pq97kURZhYTCKBwPD7h2zK+js7Myi7D8Fod+0TkMI8+EMAngLGc/WtBFWawkFHFnoj/t9KLgGmF0B3QfkxC+EarxkdhnFYlFLY06USqUwL7UMjICHfh/wOc2sCqhpxGbCkLvL7EUDbF73+6DkmVWB6zi7xUDQSLeYvWjAILvm9zEnkJhlbRcDQZcv6Kg2AipyT/Axw6wKlqVSqxDdjF8Izfod13qURdrG/nxehY+xGh+h0CSzKygGvSNQIcc097BI24jb9hax6kj2E7OrMFX1il+ICEf2NrPbhiXLl+fYl+U7zK4iYdsDcyLGf+ofFlkwcN+s10KhmpuYhhtm0hCLVIFL0MDsqNlDIqy9x2CLs1jL6OvrI7vPRbtohXG6eFmsFnHDGAp6n9AgyuVySRZrGvROxRgIfLXhzjrNYnNBUxNX/dMgRWT1mt4XLDovaApD53E9W3ilNX5M55LJHpRtIsgAvciR4WWcgK2Dvb1YqgXevmF8z2zEBTcKG39EfSKsT9EbhVUaI2FZO+oZIqImxol6j66/hcAu4sSN4vc1ZPoKeoE6RGhYL2YYA+ymOSSi0Z0wWntbtkGUWCvfSDXIxONraZ/FY90KUfNTpfC5spnNLgxoYNnR9RO4F8ofXEHOgogCQE99w+fF2Xw+b7O59rEOsyRqGEfpVoaDMQQ1CZrG46bcM6AZ0C/wPqNfHliqejyTySxh9TqQpL+xmbIlkB9SlAAAAABJRU5ErkJggg=="},pan:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAICSURBVEhLxZbPahNRGMUn/5MpuAiBEAIufQGfzr5E40YptBXajYzudCEuGqS+gGlrFwquDGRTutBdYfydzJ3LzeQmJGZue+Dw/Z17Mnfmu5Pof9Hr9Z61Wq0bWZMKj263O6xWq99wU9lOpzPMKgEhEcRucNOcioOK+0RzBhNvt9tPV4nmVF19+OWhVqt9xXgFXZq+8lCv119UKpUJ7iX2FmvFTKz8RH34YdBsNk8wVtjE4fGYwm8wrrDi3WBG5oKXZGRSS9hGuNFojLTe2lFz5xThWZIktayyiE2FdT3rzXBXz7krKiL8c17wAKFDjCus2AvW+YGZ9y2JF0VFRuMPfI//rsCE/C+s26s4gQu9ul7r4NteKx7H8XOC724xNNGbaNu++IrBqbOV7Tj3FgMRvc/YKOr3+3sE47wgEt/Bl/gaK5cHbNU11vYSXylfpK7XOvjuumPp4Wcoipu30Qsez2uMXYz4lfI+mOmwothY+SLiXJy7mKVpWs3Si0CoOMfeI9Od43Wic+jO+ZVv+crsm9QSNhUW9LXSeoPBYLXopthGuFQgdIxxhY+UDwlt1x5CZ1hX+NTUdt/OIvjKaDSmuOJfaIVNPKX+W18j/PLA2/kR44p5Sd8HbHngT/yTfNRWUXX14ZcL3wmX0+TLf8YO7CGT8yFE5zB3/gney25/OETRP9CtPDFe5jShAAAAAElFTkSuQmCC"},zoom:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALWSURBVEhLvZZLaBNRFIabyftBIgEfqCCBoCC6MYqiXYiIj4U76U4X7sUHbhQhUBfixhZEUBDB16YuFERaUaQLK7ooCOJj4UKtYEFU0EptShO/A9Ph3js3k8lo/eHnP7n3nP/M3LlzMz1hkUwmNziOcyKRSFyFt+LxeD/c2Wq1Ym7Kv0M2m11Os1OxWGycn1OwZXCGuXfwIhezkd9/jRgNT2L4ldhs1pbkX5OLJe4euVxuGQaPCa3mnUjtJx7BDuKusJTCV6jVVGHTMuYRjxma7yIOhTgFY6jNaAKew2xPKpVay9ganmkvj+M448/MfJdT5K5Gg4HJacRngPFgqVRaRNwW1B4i7yehWfsEDdz1K+A01AoxPIqGAiuwGfkOTY8+1A6u7AyiFTB2Hu0KPIrdiOnzHLWDybeImvy+Wq2mZa5bUHsD0Zpz+KxHdWQymV6kAb1ElqeORgJLvgnRdj1+R1AfzkIvSUjxVjQSarVakrueIPT8+H1F5jSUy+WXiJrUYBVWyVxU4PEU8TzhfaijUqnMIWrjaY492eWRwdKOIqrnIxnXwLLeRLwk2GQzrEMjg0avEbXxkIxr4OoOImpj2QwyFgms1koa/SZUG8s+0iGnEhNfCNXEhzIXBVz0McTzEvJ+70P9oNFtxEzei3aFYrFYxmuSUPWSv9Yi9IMm2xE1We56Mp1OV4nDwqFmBDV9gk9AEh4gZtFHNt8W4kAUCoXF5MorY9Z/kDni9nDv7hc0i2fhgLvTtX8a99PoMPPagTFPxofRzmDJ9yM+AyEmTfgGysYbQcfhDzPPJDmX0c7gDg4gs9BqFIWhm/Nct5H8gtBq1I7UfIbtvmIuoaGQcp+fdpbbSM43eEH5wrwLbXmhm/fU63VHXjcuok7hEByFY/AeHGC8L5/PL3HT5xGH1uYwfPOICGo+CBcU0vwO1BqzUqILDl/z/9VYIMfpddiAc47jDP8BsUpb13wOLRwAAAAASUVORK5CYII="},menu:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAeCAYAAABE4bxTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADoSURBVFhH7dc9CsJAFATgRxIIBCwCqZKATX5sbawsY2MvWOtF9AB6AU8gguAJbD2AnZ2VXQT/Ko2TYGCL2OYtYQc+BuYA+1hCtnCVwMm27SGaXpDJIAiCvCkVR05hGOZNN3HkFMdx3nQRR06+76/R1IcFLJlNQEWlmWlBTwJtKLKHynehZqnjOGM0PYWRVXk61C37p7xlZ3Hk5HneCk1dmMH811xGoKLSzDiQwIBZB4ocoPJdqNkDt2yKlueWRVGUtzy3rPwo3sWRU3nLjuLI6OO67oZM00wMw3hrmpZx0XU9syxrR0T0BeMpb9dneSR2AAAAAElFTkSuQmCC"}};re.prototype.setOptions=function(F,O){if(_e[this._defaultsKey]){var K=_e[this._defaultsKey],Ce;for(Ce in K)Ce!=="publicProperties"&&K.hasOwnProperty(Ce)&&(this[Ce]=F&&Ce in F?F[Ce]:O&&Ce in O?O[Ce]:K[Ce])}},re.prototype.get=function(F){var O=_e[this._defaultsKey];if(F==="options")return this.options&&this.options._isPlaceholder?null:this.options;if(O.hasOwnProperty(F)||O.publicProperties&&O.publicProperties.hasOwnProperty(F))return this[F];window.console&&window.console.log('Property "'+F+`" doesn't exist. Please check for typo.`)},re.prototype.set=function(F,O,K){K=typeof K>"u"?!0:K;var Ce=_e[this._defaultsKey];if(F==="options")this.createUserOptions(O);else if(Ce.hasOwnProperty(F)||Ce.publicProperties&&Ce.publicProperties.hasOwnProperty(F)&&Ce.publicProperties[F]==="readWrite")this.options._isPlaceholder&&this.createUserOptions(),this.options[F]=O;else{window.console&&(Ce.publicProperties&&Ce.publicProperties.hasOwnProperty(F)&&Ce.publicProperties[F]==="readOnly"?window.console.log('Property "'+F+'" is read-only.'):window.console.log('Property "'+F+`" doesn't exist. Please check for typo.`));return}K&&(this.stockChart||this.chart||this).render()},re.prototype.addTo=function(F,O,K,Ce){Ce=typeof Ce>"u"?!0:Ce;var Ne=_e[this._defaultsKey];Ne.hasOwnProperty(F)||Ne.publicProperties&&Ne.publicProperties.hasOwnProperty(F)&&Ne.publicProperties[F]==="readWrite"?(this.options._isPlaceholder&&this.createUserOptions(),typeof this.options[F]>"u"&&(this.options[F]=[]),F=this.options[F],K=typeof K>"u"||K===null?F.length:K,F.splice(K,0,O),Ce&&(this.stockChart||this.chart||this).render()):window.console&&(Ne.publicProperties&&Ne.publicProperties.hasOwnProperty(F)&&Ne.publicProperties[F]==="readOnly"?window.console.log('Property "'+F+'" is read-only.'):window.console.log('Property "'+F+`" doesn't exist. Please check for typo.`))},re.prototype.createUserOptions=function(F){if(typeof F<"u"||this.options._isPlaceholder)if(this.parent&&this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.isOptionsInArray){this.parent.options[this.optionsName]||(this.parent.options[this.optionsName]=[]);var O=this.parent.options[this.optionsName],K=O.length;this.options._isPlaceholder||(k(O),K=O.indexOf(this.options)),this.options=typeof F>"u"?{}:F,O[K]=this.options}else this.options=typeof F>"u"?{}:F,this.parent&&(F=this.parent.options,this.optionsName?O=this.optionsName:(O=this._defaultsKey)&&O.length!==0?(K=O.charAt(0).toLowerCase(),1<O.length&&(K=K.concat(O.slice(1))),O=K):O=void 0,F[O]=this.options)},re.prototype.remove=function(F){if(F=typeof F>"u"?!0:F,this.isOptionsInArray){var O=this.parent.options[this.optionsName];k(O);var K=O.indexOf(this.options);0<=K&&O.splice(K,1)}else delete this.parent.options[this.optionsName];F&&(this.stockChart||this.chart||this).render()},re.prototype.updateOption=function(F){!_e[this._defaultsKey]&&Le&&console.log("defaults not set");var O=_e[this._defaultsKey],K={},Ce=this[F],Ne=this._themeOptionsKey,Oe=this._index;return this.theme&&m(this.parent)&&m(Ne)&&m(Oe)?K=m(this.predefinedThemes[this.theme])?this.predefinedThemes.light1:this.predefinedThemes[this.theme]:this.parent&&this.parent.themeOptions&&(this.options.theme?this._defaultsKey==="Chart"&&It[this.options.theme]?K=It[this.options.theme]:stockThemes[this.options.theme]&&(K=stockThemes[this.options.theme][Ne]):this.parent.themeOptions[Ne]&&(Oe===null?K=this.parent.themeOptions[Ne]:0<this.parent.themeOptions[Ne].length&&(K=Math.min(this.parent.themeOptions[Ne].length-1,Oe),K=this.parent.themeOptions[Ne][K]))),this.themeOptions=K,F in O&&(Ce=F in this.options?this.options[F]:K&&F in K?K[F]:O[F]),Ce===this[F]?!1:(this[F]=Ce,!0)},re.prototype.trackChanges=function(F){if(!this.sessionVariables)throw"Session Variable Store not set";this.sessionVariables[F]=this.options[F]},re.prototype.isBeingTracked=function(F){return this.options._oldOptions||(this.options._oldOptions={}),!!this.options._oldOptions[F]},re.prototype.hasOptionChanged=function(F){if(!this.sessionVariables)throw"Session Variable Store not set";return this.sessionVariables[F]!==this.options[F]},re.prototype.addEventListener=function(F,O,K){F&&O&&(this._eventListeners[F]=this._eventListeners[F]||[],this._eventListeners[F].push({context:K||this,eventHandler:O}))},re.prototype.removeEventListener=function(F,O){if(F&&O&&this._eventListeners[F]){for(var K=this._eventListeners[F],Ce=0;Ce<K.length;Ce++)if(K[Ce].eventHandler===O){K[Ce].splice(Ce,1);break}}},re.prototype.removeAllEventListeners=function(){this._eventListeners=[]},re.prototype.dispatchEvent=function(F,O,K){if(F&&this._eventListeners[F]){O=O||{};for(var Ce=this._eventListeners[F],Ne=0;Ne<Ce.length;Ne++)Ce[Ne].eventHandler.call(Ce[Ne].context,O)}typeof this[F]=="function"&&this[F].call(K||this.chart,O)},we.prototype.registerSpace=function(F,O){F==="top"?this._topOccupied+=O.height:F==="bottom"?this._bottomOccupied+=O.height:F==="left"?this._leftOccupied+=O.width:F==="right"&&(this._rightOccupied+=O.width)},we.prototype.unRegisterSpace=function(F,O){F==="top"?this._topOccupied-=O.height:F==="bottom"?this._bottomOccupied-=O.height:F==="left"?this._leftOccupied-=O.width:F==="right"&&(this._rightOccupied-=O.width)},we.prototype.getFreeSpace=function(){return{x1:this._x1+this._leftOccupied,y1:this._y1+this._topOccupied,x2:this._x2-this._rightOccupied,y2:this._y2-this._bottomOccupied,width:this._x2-this._x1-this._rightOccupied-this._leftOccupied,height:this._y2-this._y1-this._bottomOccupied-this._topOccupied}},we.prototype.reset=function(){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding},e(de,re),de.prototype._initialize=function(){m(this.padding)||typeof this.padding!="object"?this.topPadding=this.rightPadding=this.bottomPadding=this.leftPadding=Number(this.padding)|0:(this.topPadding=m(this.padding.top)?0:Number(this.padding.top)|0,this.rightPadding=m(this.padding.right)?0:Number(this.padding.right)|0,this.bottomPadding=m(this.padding.bottom)?0:Number(this.padding.bottom)|0,this.leftPadding=m(this.padding.left)?0:Number(this.padding.left)|0)},de.prototype.render=function(F){if(this.fontSize!==0){F&&this.ctx.save();var O=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var K=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+K),this.textBaseline==="middle"&&(K=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var Ce=0,Ne=this.topPadding,Oe=null;for(this.ctx.roundRect||l(this.ctx),(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,K,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,K=0;K<this._wrappedText.lines.length;K++)Oe=this._wrappedText.lines[K],this.textAlign==="right"?Ce=this.width-Oe.width-this.rightPadding:this.textAlign==="left"?Ce=this.leftPadding:this.textAlign==="center"&&(Ce=(this.width-(this.leftPadding+this.rightPadding))/2-Oe.width/2+this.leftPadding),this.ctx.fillText(Oe.text,Ce,Ne),Ne+=Oe.height;this.ctx.font=O,F&&this.ctx.restore()}},de.prototype.setText=function(F){this.text=F,this._isDirty=!0,this._wrappedText=null},de.prototype.measureText=function(){if(this._lineHeight=D(this.fontFamily,this.fontSize,this.fontWeight),this.maxWidth===null)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},de.prototype._getLineWithWidth=function(F,O,K){if(F=String(F),!F)return{text:"",width:0};var Ce=K=0,Ne=F.length-1,Oe=1/0;for(this.ctx.font=this._getFontString();Ce<=Ne;){var Oe=Math.floor((Ce+Ne)/2),ke=F.substr(0,Oe+1);if(K=this.ctx.measureText(ke).width,K<O)Ce=Oe+1;else if(K>O)Ne=Oe-1;else break}return K>O&&1<ke.length&&(ke=ke.substr(0,ke.length-1),K=this.ctx.measureText(ke).width),O=!0,(ke.length===F.length||F[ke.length]===" ")&&(O=!1),O&&(F=ke.split(" "),1<F.length&&F.pop(),ke=F.join(" "),K=this.ctx.measureText(ke).width),{text:ke,width:K}},de.prototype._wrapText=function(){var F=new String(a(String(this.text))),O=[],K=this.ctx.font,Ce=0,Ne=0;if(this.ctx.font=this._getFontString(),this.frontSize===0)Ne=Ce=0;else for(;0<F.length;){var Oe=this.maxHeight-(this.topPadding+this.bottomPadding),ke=this._getLineWithWidth(F,this.maxWidth-(this.leftPadding+this.rightPadding),!1);ke.height=this._lineHeight,O.push(ke);var ut=Ne,Ne=Math.max(Ne,ke.width),Ce=Ce+ke.height,F=a(F.slice(ke.text.length,F.length));Oe&&Ce>Oe&&(ke=O.pop(),Ce-=ke.height,Ne=ut)}this._wrappedText={lines:O,width:Ne,height:Ce},this.width=Ne+(this.leftPadding+this.rightPadding),this.height=Ce+(this.topPadding+this.bottomPadding),this.ctx.font=K},de.prototype._getFontString=function(){var F;F=this.fontStyle?this.fontStyle+" ":"",F+=this.fontWeight?this.fontWeight+" ":"",F+=this.fontSize?this.fontSize+"px ":"";var O=this.fontFamily?this.fontFamily+"":"";return!X&&O&&(O=O.split(",")[0],O[0]!=="'"&&O[0]!=='"'&&(O="'"+O+"'")),F+=O},e(Re,re),e(He,re),He.prototype.setLayout=function(){if(this.text){var F=this.dockInsidePlotArea?this.chart.plotArea:this.chart,O=F.layoutManager.getFreeSpace(),K=O.x1,Ce=O.y1,Ne=0,Oe=0,ke=this.chart._menuButton&&this.chart.exportEnabled&&this.verticalAlign==="top"?40:0,ut,Tt;this.textAlign=m(this.options.textAlign)?this.horizontalAlign:this.textAlign,this.verticalAlign==="top"||this.verticalAlign==="bottom"?(this.maxWidth===null&&(this.maxWidth=O.width-4-ke*(this.horizontalAlign==="center"?2:1)),Oe=.5*O.height-this.margin-2,Ne=0):this.verticalAlign==="center"&&(this.horizontalAlign==="left"||this.horizontalAlign==="right"?(this.maxWidth===null&&(this.maxWidth=O.height-4),Oe=.5*O.width-this.margin-2):this.horizontalAlign==="center"&&(this.maxWidth===null&&(this.maxWidth=O.width-4),Oe=.5*O.height-4));var at;m(this.padding)||typeof this.padding!="number"?m(this.padding)||typeof this.padding!="object"||(at=this.padding.top?this.padding.top:this.padding.bottom?this.padding.bottom:0,at+=this.padding.bottom?this.padding.bottom:this.padding.top?this.padding.top:0):at=2*this.padding,this.wrap||(Oe=Math.min(Oe,1.5*this.fontSize+at)),Oe=new de(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,textAlign:this.textAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:this.maxWidth,maxHeight:Oe,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"middle"}),at=Oe.measureText(),this.verticalAlign==="top"||this.verticalAlign==="bottom"?(this.verticalAlign==="top"?(Ce=O.y1+2+this.fontSize/2+4,Tt="top"):this.verticalAlign==="bottom"&&(Ce=O.y2-2-at.height+this.fontSize/2+4,Tt="bottom"),this.horizontalAlign==="left"?K=O.x1+2:this.horizontalAlign==="center"?K=O.x1+O.width/2-at.width/2:this.horizontalAlign==="right"&&(K=O.x2-2-at.width-ke),ut=this.horizontalAlign,this.width=at.width,this.height=at.height):this.verticalAlign==="center"&&(this.horizontalAlign==="left"?(K=O.x1+2+(this.fontSize/2+4),Ce=O.y2-2-(this.maxWidth/2-at.width/2),Ne=-90,Tt="left",this.width=at.height,this.height=at.width):this.horizontalAlign==="right"?(K=O.x2-2-(this.fontSize/2+4),Ce=O.y1+2+(this.maxWidth/2-at.width/2),Ne=90,Tt="right",this.width=at.height,this.height=at.width):this.horizontalAlign==="center"&&(Ce=F.y1+(F.height/2-at.height/2)+this.fontSize/2+4,K=F.x1+(F.width/2-at.width/2),Tt="center",this.width=at.width,this.height=at.height),ut="center"),Oe.x=K,Oe.y=Ce,Oe.angle=Ne,Oe.horizontalAlign=ut,this._textBlock=Oe,F.layoutManager.registerSpace(Tt,{width:this.width+(Tt==="left"||Tt==="right"?this.margin+2:0),height:this.height+(Tt==="top"||Tt==="bottom"?this.margin+2:0)}),this.bounds={x1:K,y1:Ce,x2:K+this.width,y2:Ce+this.height},this.ctx.textBaseline="top"}},He.prototype.render=function(){this._textBlock&&this._textBlock.render(!0)},e(Ze,re),Ze.prototype.setLayout=He.prototype.setLayout,Ze.prototype.render=He.prototype.render,et.prototype.get=function(F,O){var K=null;return 0<this.pool.length?(K=this.pool.pop(),B(K,F,O)):K=U(F,O),K},et.prototype.release=function(F){this.pool.push(F)},e(Pe,re);var yo={addTheme:function(F,O){It[F]=O},addColorSet:function(F,O){fe[F]=O},addCultureInfo:function(F,O){me[F]=O},formatNumber:function(F,O,K){if(K=K||"en",me[K])return Nt(F,O||"#,##0.##",new Pe(K));throw"Unknown Culture Name"},formatDate:function(F,O,K){if(K=K||"en",me[K])return Ki(F,O||"DD MMM YYYY",new Pe(K));throw"Unknown Culture Name"}};t.exports=yo,W=yo.Chart=function(){function F(r,d){return r.x-d.x}function O(r,d,h){d=d||{},m(h)?(this.predefinedThemes=It,this.optionsName=this.parent=this.index=null):(this.parent=h.parent,this.index=h.index,this.predefinedThemes=h.predefinedThemes,this.optionsName=h.optionsName,this.stockChart=h.stockChart,this.panel=r,this.isOptionsInArray=h.isOptionsInArray),this.theme=m(d.theme)||m(this.predefinedThemes[d.theme])?"light1":d.theme,O.base.constructor.call(this,"Chart",this.optionsName,d,this.index,this.parent);var o=this;this._containerId=r,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.isAnimating=!1,this.renderCount=0,this.disableToolTip=this.animatedRender=!1,this.canvasPool=new et,this.allDOMEventHandlers=[],this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],(this.container=typeof this._containerId=="string"?document.getElementById(this._containerId):this._containerId)?(this.container.innerHTML="",d=r=0,r=this.options.width?this.width:0<this.container.clientWidth?this.container.clientWidth:this.width,d=h&&h.height?h.height:this.options.height?this.height:0<this.container.clientHeight?this.container.clientHeight:this.height,this.width=r,this.height=d,this.x1=this.y1=0,this.x2=this.width,this.y2=this.height,this.selectedColorSet=typeof fe[this.colorSet]<"u"?fe[this.colorSet]:fe.colorSet1,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",this._canvasJSContainer.style.textAlign="left",this._canvasJSContainer.style.cursor="auto",this._canvasJSContainer.style.direction="ltr",X||(this._canvasJSContainer.style.height="0px"),this.container.appendChild(this._canvasJSContainer),this.canvas=U(r,d),this._preRenderCanvas=U(r,d),this.canvas.style.position="absolute",this.canvas.style.WebkitUserSelect="none",this.canvas.style.MozUserSelect="none",this.canvas.style.msUserSelect="none",this.canvas.style.userSelect="none",this.canvas.getContext&&(this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",l(this.ctx),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this._preRenderCtx.textBaseline="top",l(this._preRenderCtx),X?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=U(r,d),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=U(r,d),this.overlaidCanvas.style.position="absolute",this.overlaidCanvas.style.webkitTapHighlightColor="transparent",this.overlaidCanvas.style.WebkitUserSelect="none",this.overlaidCanvas.style.MozUserSelect="none",this.overlaidCanvas.style.msUserSelect="none",this.overlaidCanvas.style.userSelect="none",this.overlaidCanvas.getContext&&(this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",l(this.overlaidCanvasCtx)),this._eventManager=new li(this),this.windowResizeHandler=L(window,"resize",function(){o._updateSize()&&(o.render(),o.isNavigator&&o.stockChart&&o.stockChart.navigator&&o.stockChart.navigator.enabled&&o.stockChart.navigator._updateSlider(o.stockChart._axisXMin,o.stockChart._axisXMax))},this.allDOMEventHandlers),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),j(this._toolBar,{position:"absolute",right:"1px",top:"1px"}),this._canvasJSContainer.appendChild(this._toolBar),this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},L(this.overlaidCanvas,"click",function(c){o._mouseEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mousemove",function(c){o._mouseEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mouseup",function(c){o._mouseEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mousedown",function(c){o._mouseEventHandler(c),he(o._dropdownMenu)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mouseout",function(c){o._mouseEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(c){o._touchEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(c){o._touchEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(c){o._touchEventHandler(c)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(c){o._touchEventHandler(c)},this.allDOMEventHandlers),this.toolTip=new Ut(this,this.options.toolTip),this.data=null,this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this.sessionVariables={axisX:[],axisX2:[],axisY:[],axisY2:[]})):window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function K(r,d){for(var h=[],o,c=0;c<r.length;c++)if(c==0)h.push(r[0]);else{var x,y,S;S=c-1,x=S===0?0:S-1,y=S===r.length-1?S:S+1,o=Math.abs((r[y].x-r[x].x)/(r[y].x-r[S].x===0?.01:r[y].x-r[S].x))*(d-1)/2+1;var M=(r[y].x-r[x].x)/o;o=(r[y].y-r[x].y)/o,h[h.length]=r[S].x>r[x].x&&0<M||r[S].x<r[x].x&&0>M?{x:r[S].x+M/3,y:r[S].y+o/3}:{x:r[S].x,y:r[S].y+(h.length===1?0:o/9)},S=c,x=S===0?0:S-1,y=S===r.length-1?S:S+1,o=Math.abs((r[y].x-r[x].x)/(r[S].x-r[x].x===0?.01:r[S].x-r[x].x))*(d-1)/2+1,M=(r[y].x-r[x].x)/o,o=(r[y].y-r[x].y)/o,h[h.length]=r[S].x>r[x].x&&0<M||r[S].x<r[x].x&&0>M?{x:r[S].x-M/3,y:r[S].y-o/3}:{x:r[S].x,y:r[S].y-o/9},h[h.length]=r[c]}return h}function Ce(r,d,h,o,c,x,y,S,M,_){var v=0;_?(y.color=x,S.color=x):_=1,v=Math.abs(M?c-h:o-d),v=0<y.trimLength?Math.abs(v*y.trimLength/100):Math.abs(v-y.length),M?(h+=v/2,c-=v/2):(d+=v/2,o-=v/2);var v=Math.round(y.thickness)%2===1?.5:0,b=Math.round(S.thickness)%2===1?.5:0;r.save(),r.globalAlpha=_,r.strokeStyle=S.color||x,r.lineWidth=S.thickness||2,r.setLineDash&&r.setLineDash(P(S.dashType,S.thickness)),r.beginPath(),M&&0<S.thickness?(r.moveTo(o-y.thickness/2,Math.round((h+c)/2)-b),r.lineTo(d+y.thickness/2,Math.round((h+c)/2)-b)):0<S.thickness&&(r.moveTo(Math.round((d+o)/2)-b,h+y.thickness/2),r.lineTo(Math.round((d+o)/2)-b,c-y.thickness/2)),r.stroke(),r.strokeStyle=y.color||x,r.lineWidth=y.thickness||2,r.setLineDash&&r.setLineDash(P(y.dashType,y.thickness)),r.beginPath(),M&&0<y.thickness?(r.moveTo(o-v,h),r.lineTo(o-v,c),r.moveTo(d+v,h),r.lineTo(d+v,c)):0<y.thickness&&(r.moveTo(d,h+v),r.lineTo(o,h+v),r.moveTo(d,c-v),r.lineTo(o,c-v)),r.stroke(),r.restore()}function Ne(r,d){Ne.base.constructor.call(this,"Legend","legend",d,null,r),this.chart=r,this.canvas=r.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.optionsName="legend",this.height=this.width=0,this.orientation=null,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=D(this.fontFamily,this.fontSize,this.fontWeight),this.horizontalSpacing=this.fontSize}function Oe(r,d,h,o){for(Oe.base.constructor.call(this,"DataSeries","data",d,h,r),this.chart=r,this.canvas=r.canvas,this._ctx=r.canvas.ctx,this.index=h,this.noDataPointsInPlotArea=0,this.id=o,this.chart._eventManager.objectMap[o]={id:o,objectType:"dataSeries",dataSeriesIndex:h},r=d.dataPoints?d.dataPoints.length:0,this.dataPointEOs=[],d=0;d<r;d++)this.dataPointEOs[d]={};this.dataPointIds=[],this.plotUnit=[],this.axisY=this.axisX=null,this.optionsName="data",this.isOptionsInArray=!0,this.fillOpacity===null&&(this.type.match(/area/i)?this.fillOpacity=.7:this.fillOpacity=1),this.axisPlacement=this.getDefaultAxisPlacement(),typeof this.options.indexLabelFontSize>"u"&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function ke(r,d,h,o,c,x){if(ke.base.constructor.call(this,"Axis",d,h,o,r),this.chart=r,this.canvas=r.canvas,this.ctx=r.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this.dataSeries=[],this._stripLineLabels=this._ticks=this._labels=null,this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},this.isOptionsInArray=!0,c==="axisX"?(x==="left"||x==="bottom"?(this.optionsName="axisX",m(this.chart.sessionVariables.axisX[o])&&(this.chart.sessionVariables.axisX[o]={}),this.sessionVariables=this.chart.sessionVariables.axisX[o]):(this.optionsName="axisX2",m(this.chart.sessionVariables.axisX2[o])&&(this.chart.sessionVariables.axisX2[o]={}),this.sessionVariables=this.chart.sessionVariables.axisX2[o]),this.options.interval||(this.intervalType=null)):x==="left"||x==="bottom"?(this.optionsName="axisY",m(this.chart.sessionVariables.axisY[o])&&(this.chart.sessionVariables.axisY[o]={}),this.sessionVariables=this.chart.sessionVariables.axisY[o]):(this.optionsName="axisY2",m(this.chart.sessionVariables.axisY2[o])&&(this.chart.sessionVariables.axisY2[o]={}),this.sessionVariables=this.chart.sessionVariables.axisY2[o]),typeof this.options.titleFontSize>"u"&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),typeof this.options.labelFontSize>"u"&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=c,c!=="axisX"||h&&typeof h.gridThickness<"u"||(this.gridThickness=0),this._position=x,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this.options.scaleBreaks&&(this.scaleBreaks=new ut(this.chart,this.options.scaleBreaks,++this.chart._eventManager.lastObjectId,this)),this.stripLines=[],this.options.stripLines&&0<this.options.stripLines.length)for(r=0;r<this.options.stripLines.length;r++)this.stripLines.push(new at(this.chart,this.options.stripLines[r],r,++this.chart._eventManager.lastObjectId,this));this.options.crosshair&&(this.crosshair=new _i(this.chart,this.options.crosshair,this),this.crosshair._updatedValue=m(this.sessionVariables.crosshairValue)?null:this.sessionVariables.crosshairValue),this._titleTextBlock=null,this.hasOptionChanged("viewportMinimum")&&this.viewportMinimum===null&&(this.options.viewportMinimum=void 0,this.sessionVariables.viewportMinimum=null),this.hasOptionChanged("viewportMinimum")||isNaN(this.sessionVariables.newViewportMinimum)||this.sessionVariables.newViewportMinimum===null?this.sessionVariables.newViewportMinimum=null:this.viewportMinimum=this.sessionVariables.newViewportMinimum,this.hasOptionChanged("viewportMaximum")&&this.viewportMaximum===null&&(this.options.viewportMaximum=void 0,this.sessionVariables.viewportMaximum=null),this.hasOptionChanged("viewportMaximum")||isNaN(this.sessionVariables.newViewportMaximum)||this.sessionVariables.newViewportMaximum===null?this.sessionVariables.newViewportMaximum=null:this.viewportMaximum=this.sessionVariables.newViewportMaximum,this.minimum!==null&&this.viewportMinimum!==null&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),this.maximum!==null&&this.viewportMaximum!==null&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.trackChanges("viewportMinimum"),this.trackChanges("viewportMaximum")}function ut(r,d,h,o){if(ut.base.constructor.call(this,"ScaleBreaks","scaleBreaks",d,null,o),this.id=h,this.chart=r,this.ctx=this.chart.ctx,this.axis=o,this.optionsName="scaleBreaks",this.isOptionsInArray=!1,this._appliedBreaks=[],this.customBreaks=[],this.autoBreaks=[],typeof this.spacing=="string"?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?8:(10<this.spacing?10:this.spacing)+"%"):typeof this.spacing!="number"&&(this.spacing=8),this.autoCalculate&&(this.maxNumberOfAutoBreaks=Math.min(this.maxNumberOfAutoBreaks,5)),this.options.customBreaks&&0<this.options.customBreaks.length){for(r=0;r<this.options.customBreaks.length;r++)this.customBreaks.push(new Tt(this.chart,"customBreaks",this.options.customBreaks[r],r,++this.chart._eventManager.lastObjectId,this)),typeof this.customBreaks[r].startValue=="number"&&typeof this.customBreaks[r].endValue=="number"&&this.customBreaks[r].endValue!==this.customBreaks[r].startValue&&this._appliedBreaks.push(this.customBreaks[r]);for(this._appliedBreaks.sort(function(c,x){return c.startValue-x.startValue}),r=0;r<this._appliedBreaks.length-1;r++)this._appliedBreaks[r].endValue>=this._appliedBreaks[r+1].startValue&&(this._appliedBreaks[r].endValue=Math.max(this._appliedBreaks[r].endValue,this._appliedBreaks[r+1].endValue),window.console&&window.console.log("CanvasJS Error: Breaks "+r+" and "+(r+1)+" are overlapping."),this._appliedBreaks.splice(r,2),r--)}}function Tt(r,d,h,o,c,x){Tt.base.constructor.call(this,"Break",d,h,o,x),this.id=c,this.chart=r,this.ctx=this.chart.ctx,this.scaleBreaks=x,this.optionsName=d,this.isOptionsInArray=!0,this.type=h.type?this.type:x.type,this.fillOpacity=m(h.fillOpacity)?x.fillOpacity:this.fillOpacity,this.lineThickness=m(h.lineThickness)?x.lineThickness:this.lineThickness,this.color=h.color?this.color:x.color,this.lineColor=h.lineColor?this.lineColor:x.lineColor,this.lineDashType=h.lineDashType?this.lineDashType:x.lineDashType,!m(this.startValue)&&this.startValue.getTime&&(this.startValue=this.startValue.getTime()),!m(this.endValue)&&this.endValue.getTime&&(this.endValue=this.endValue.getTime()),typeof this.startValue=="number"&&typeof this.endValue=="number"&&this.endValue<this.startValue&&(r=this.startValue,this.startValue=this.endValue,this.endValue=r),this.spacing=typeof h.spacing>"u"?x.spacing:h.spacing,typeof this.options.spacing=="string"?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?0:(10<this.spacing?10:this.spacing)+"%"):typeof this.options.spacing!="number"&&(this.spacing=x.spacing),this.size=x.parent.logarithmic?1:0}function at(r,d,h,o,c){at.base.constructor.call(this,"StripLine","stripLines",d,h,c),this.id=o,this.chart=r,this.ctx=this.chart.ctx,this.label=this.label,this.axis=c,this.optionsName="stripLines",this.isOptionsInArray=!0,this._thicknessType="pixel",this.startValue!==null&&this.endValue!==null&&(this.value=c.logarithmic?Math.sqrt((this.startValue.getTime?this.startValue.getTime():this.startValue)*(this.endValue.getTime?this.endValue.getTime():this.endValue)):((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this._thicknessType=null)}function _i(r,d,h){_i.base.constructor.call(this,"Crosshair","crosshair",d,null,h),this.chart=r,this.ctx=this.chart.ctx,this.axis=h,this.optionsName="crosshair",this._thicknessType="pixel"}function Ut(r,d){Ut.base.constructor.call(this,"ToolTip","toolTip",d,null,r),this.chart=r,this.canvas=r.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,this.containerTransitionDuration=.1,this.mozContainerTransition=this.getContainerTransition(this.containerTransitionDuration),this.optionsName="toolTip",this._initialize()}function li(r){this.chart=r,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=U(this.chart.width,this.chart.height,!0),this.ghostCtx=this.ghostCanvas.getContext("2d"),this.mouseoveredObjectMaps=[]}function se(r){this.chart=r,this.ctx=this.chart.plotArea.ctx,this.animations=[],this.animationRequestId=null}e(O,re),O.prototype.destroy=function(){var r=this.allDOMEventHandlers;this._animator&&this._animator.cancelAllAnimations(),this._panTimerId&&clearTimeout(this._panTimerId);for(var d=0;d<r.length;d++){var h=r[d][0],o=r[d][1],c=r[d][2],x=r[d][3],x=x||!1;h.removeEventListener?h.removeEventListener(o,c,x):h.detachEvent&&h.detachEvent("on"+o,c)}for(this.allDOMEventHandlers=[],this.removeAllEventListeners();this._canvasJSContainer&&this._canvasJSContainer.hasChildNodes();)this._canvasJSContainer.removeChild(this._canvasJSContainer.lastChild);for(;this.container&&this.container.hasChildNodes();)this.container.removeChild(this.container.lastChild);for(;this._dropdownMenu&&this._dropdownMenu.hasChildNodes();)this._dropdownMenu.removeChild(this._dropdownMenu.lastChild);this.container=this._canvasJSContainer=null,this.toolTip.container=null,this.canvas&&bi(this.canvas),this.overlaidCanvas&&bi(this.overlaidCanvas),this._preRenderCanvas&&bi(this._preRenderCanvas),this._breaksCanvas&&bi(this._breaksCanvas),this._eventManager&&this._eventManager.ghostCanvas&&bi(this._eventManager.ghostCanvas),this._toolBar=this._dropdownMenu=this._menuButton=this._resetButton=this._zoomButton=null},O.prototype._updateOptions=function(){var r=this;if(this.updateOption("width"),this.updateOption("height"),this.updateOption("dataPointWidth"),this.updateOption("dataPointMinWidth"),this.updateOption("dataPointMaxWidth"),this.updateOption("interactivityEnabled"),this.updateOption("theme"),this.stockChart&&this.stockChart.options&&typeof this.stockChart.options.theme<"u"&&m(this.options.theme)?this.theme=this.stockChart.theme:m(this.stockChart)&&m(this.theme)&&(this.theme="light1"),this.updateOption("colorSet")&&(this.selectedColorSet=typeof fe[this.colorSet]<"u"?fe[this.colorSet]:fe.colorSet1),this.updateOption("backgroundColor"),this.stockChart&&this.stockChart.options&&typeof this.stockChart.options.backgroundColor<"u"&&m(this.options.backgroundColor)&&(this.backgroundColor=this.stockChart.backgroundColor),this.backgroundColor||(this.backgroundColor="rgba(0,0,0,0)"),this.updateOption("culture"),this.stockChart&&m(this.options.culture)&&(this.culture=this.stockChart.culture),this._cultureInfo=new Pe(this.culture),this.updateOption("animationEnabled"),this.animationEnabled=this.animationEnabled&&X,this.updateOption("animationDuration"),this.updateOption("rangeChanging"),this.updateOption("rangeChanged"),this.updateOption("exportEnabled"),this.updateOption("exportFileName"),this.updateOption("zoomType"),this.toolbar=new Re(this,this.options.toolbar),this.stockChart&&this.stockChart.options&&this.stockChart.options.toolbar&&!this.options.toolbar)for(var d in this.stockChart.options.toolbar)this.toolbar[d]=this.stockChart.options.toolbar[d];if(this.options.zoomEnabled||this.panEnabled){if(this._zoomButton)j(this._zoomButton,{borderRight:this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&this._zoomButton.childNodes[0]&&j(this._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"});else{var h=!1;he(this._zoomButton=document.createElement("button")),G(this,this._zoomButton,"pan"),this._toolBar.appendChild(this._zoomButton),this._zoomButton.style.borderRight=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,L(this._zoomButton,"touchstart",function(o){h=!0},this.allDOMEventHandlers),L(this._zoomButton,"click",function(){r.zoomEnabled?(r.zoomEnabled=!1,r.panEnabled=!0,G(r,r._zoomButton,"zoom")):(r.zoomEnabled=!0,r.panEnabled=!1,G(r,r._zoomButton,"pan")),r.render()},this.allDOMEventHandlers),L(this._zoomButton,"mousemove",function(){h?h=!1:(j(r._zoomButton,{backgroundColor:r.toolbar.itemBackgroundColorOnHover,color:r.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&j(r._zoomButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers),L(this._zoomButton,"mouseout",function(){h||(j(r._zoomButton,{backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&j(r._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers)}this._resetButton?(j(this._resetButton,{borderRight:this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&this._resetButton.childNodes[0]&&j(this._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}),this._resetButton.title=this._cultureInfo.resetText):(h=!1,he(this._resetButton=document.createElement("button")),G(this,this._resetButton,"reset"),this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.buttonBorderThickness:0)+"px solid "+this.toolbar.buttonBorderColor,this._toolBar.appendChild(this._resetButton),L(this._resetButton,"touchstart",function(o){h=!0},this.allDOMEventHandlers),L(this._resetButton,"click",function(){if(r.toolTip.hide(),r.toolTip&&r.toolTip.enabled&&r.toolTip.dispatchEvent("hidden",{chart:r,toolTip:r.toolTip},r.toolTip),r.zoomEnabled||r.panEnabled?(r.zoomEnabled=!0,r.panEnabled=!1,G(r,r._zoomButton,"pan"),r._defaultCursor="default",r.overlaidCanvas.style.cursor=r._defaultCursor):(r.zoomEnabled=!1,r.panEnabled=!1),r.sessionVariables.axisX)for(var o=0;o<r.sessionVariables.axisX.length;o++)r.sessionVariables.axisX[o].newViewportMinimum=null,r.sessionVariables.axisX[o].newViewportMaximum=null;if(r.sessionVariables.axisX2)for(o=0;o<r.sessionVariables.axisX2.length;o++)r.sessionVariables.axisX2[o].newViewportMinimum=null,r.sessionVariables.axisX2[o].newViewportMaximum=null;if(r.sessionVariables.axisY)for(o=0;o<r.sessionVariables.axisY.length;o++)r.sessionVariables.axisY[o].newViewportMinimum=null,r.sessionVariables.axisY[o].newViewportMaximum=null;if(r.sessionVariables.axisY2)for(o=0;o<r.sessionVariables.axisY2.length;o++)r.sessionVariables.axisY2[o].newViewportMinimum=null,r.sessionVariables.axisY2[o].newViewportMaximum=null;r.resetOverlayedCanvas(),0>=navigator.userAgent.search("MSIE")&&j(r._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}),he(r._zoomButton,r._resetButton),r.stockChart&&(r.stockChart._rangeEventParameter={stockChart:r.stockChart,source:"chart",index:r.stockChart.charts.indexOf(r),minimum:null,maximum:null}),r._dispatchRangeEvent("rangeChanging","reset"),r.stockChart&&(r.stockChart._rangeEventParameter.type="rangeChanging",r.stockChart.dispatchEvent("rangeChanging",r.stockChart._rangeEventParameter,r.stockChart)),r.render(),r.syncCharts&&r.stockChart&&(r.stockChart.rangeUpdatedBy=!r.stockChart.navigator.slider||m(r.stockChart.navigator.slider.options.minimum)&&m(r.stockChart.navigator.slider.options.maximum)?!r.stockChart.rangeSelector.enabled||!r.stockChart.rangeSelector.inputFields.enabled||m(r.stockChart.rangeSelector.inputFields.options.startValue)&&m(r.stockChart.rangeSelector.inputFields.options.endValue)?null:"inputFields":"navigator",m(r.stockChart._selectedRangeButtonIndex)||(r.stockChart.rangeUpdatedBy="rangeButton"),r.syncCharts(null,null),r.stockChart.rangeUpdatedBy==="rangeButton"&&r.stockChart.rangeSelector.selectedRangeButtonIndex<r.stockChart.rangeSelector.buttons.length&&(o=r.stockChart.rangeSelector.buttons[r.stockChart._selectedRangeButtonIndex],o.enabled&&(o.state="on",o.textBlock.fontWeight="bold",o.textBlock.fontColor=r.stockChart.rangeSelector.buttonStyle.labelFontColorOnHover,o.textBlock.backgroundColor=r.stockChart.rangeSelector.buttonStyle.backgroundColorOnSelect,r.stockChart.rangeSelector.sessionVariables._clickedRangeButtonIndex=null,o.render()))),r._dispatchRangeEvent("rangeChanged","reset"),r.stockChart&&(r.stockChart._rangeEventParameter.type="rangeChanged",r.stockChart.dispatchEvent("rangeChanged",r.stockChart._rangeEventParameter,r.stockChart))},this.allDOMEventHandlers),L(this._resetButton,"mousemove",function(){h||(j(r._resetButton,{backgroundColor:r.toolbar.itemBackgroundColorOnHover,color:r.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&j(r._resetButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers),L(this._resetButton,"mouseout",function(){h||(j(r._resetButton,{backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&j(r._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers),this.overlaidCanvas.style.cursor=r._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(r._zoomButton.getAttribute("state")===r._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),Z(r._zoomButton,r._resetButton)):(this.zoomEnabled=!0,this.panEnabled=!1))}else this.panEnabled=this.zoomEnabled=!1;$(this),this._toolBar.style.display!=="none"&&this._zoomButton&&(this.panEnabled?G(r,r._zoomButton,"zoom"):G(r,r._zoomButton,"pan"),r._resetButton.getAttribute("state")!==r._cultureInfo.resetText&&G(r,r._resetButton,"reset")),this.options.toolTip&&this.toolTip.options!==this.options.toolTip&&(this.toolTip.options=this.options.toolTip);for(d in this.toolTip.options)this.toolTip.options.hasOwnProperty(d)&&this.toolTip.updateOption(d)},O.prototype._updateSize=function(){var r;r=[this.canvas,this.overlaidCanvas,this._eventManager.ghostCanvas];var d=0,h=0;if(this.options.width?d=this.width:this.width=d=0<this.container.clientWidth?this.container.clientWidth:this.width,m(this.stockChart)||m(this.index)?this.options.height?h=this.height:this.height=h=0<this.container.clientHeight?this.container.clientHeight:this.height:h=this.height=this.stockChart._chartsHeight[this.index],this.canvas.width!==d*ti||this.canvas.height!==h*ti){for(var o=0;o<r.length;o++)B(r[o],d,h);this.bounds={x1:0,y1:0,x2:this.width,y2:this.height,width:this.width,height:this.height},r=!0}else r=!1;return r},O.prototype._initialize=function(){this.isNavigator=!(m(this.parent)||m(this.parent._defaultsKey)||this.parent._defaultsKey!=="Navigator"),this._animator?this._animator.cancelAllAnimations():this._animator=new se(this),this.removeAllEventListeners(),this.disableToolTip=!1,this._axes=[],this.funnelPyramidClickHandler=this.pieDoughnutClickHandler=null,this._updateOptions(),this.animatedRender=X&&this.animationEnabled&&this.renderCount===0,this._updateSize(),this.clearCanvas(),this.ctx.beginPath(),this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,plotTypes:[]},this.layoutManager=new we(0,0,this.width,this.height,this.isNavigator?0:2),this.plotArea.layoutManager&&this.plotArea.layoutManager.reset(),this.data=[],this.title=null,this.subtitles=[];var r=0,d=null;if(this.options.data){for(var h=0;h<this.options.data.length;h++)if(r++,!this.options.data[h].type||0<=O._supportedChartTypes.indexOf(this.options.data[h].type)){var o=new Oe(this,this.options.data[h],r-1,++this._eventManager.lastObjectId);if(!m(o)&&o.dataPoints){for(var c=0;c<o.dataPoints.length;c++)if(o.dataPoints[c].x&&o.dataPoints[c].x.getTime){o.xValueType="dateTime";break}}o.type==="error"&&(o.linkedDataSeriesIndex=m(this.options.data[h].linkedDataSeriesIndex)?h-1:this.options.data[h].linkedDataSeriesIndex,0>o.linkedDataSeriesIndex||o.linkedDataSeriesIndex>=this.options.data.length||typeof o.linkedDataSeriesIndex!="number"||this.options.data[o.linkedDataSeriesIndex].type==="error")&&(o.linkedDataSeriesIndex=null),o.name===null&&(o.name="DataSeries "+r),o.color===null?1<this.options.data.length?(o._colorSet=[this.selectedColorSet[o.index%this.selectedColorSet.length]],o.color=this.selectedColorSet[o.index%this.selectedColorSet.length]):o._colorSet=o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="stackedArea"||o.type==="stackedArea100"||o.type==="rangeArea"||o.type==="rangeSplineArea"||o.type==="candlestick"||o.type==="ohlc"||o.type==="waterfall"||o.type==="boxAndWhisker"?[this.selectedColorSet[0]]:this.selectedColorSet:o._colorSet=[o.color],o.markerSize===null&&((o.type==="line"||o.type==="stepLine"||o.type==="spline"||0<=o.type.toLowerCase().indexOf("area"))&&o.dataPoints&&o.dataPoints.length<this.width/16||o.type==="scatter")&&(o.markerSize=8),o.type!=="bubble"&&o.type!=="scatter"||!o.dataPoints||(o.dataPoints.some?o.dataPoints.some(function(S){return S.x})&&o.dataPoints.sort(F):o.dataPoints.sort(F)),this.data.push(o);var c=o.axisPlacement,d=d||c,x;if(c==="normal"?this.plotInfo.axisPlacement==="xySwapped"?x='You cannot combine "'+o.type+'" with bar chart':this.plotInfo.axisPlacement==="none"?x='You cannot combine "'+o.type+'" with pie chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="normal"):c==="xySwapped"?this.plotInfo.axisPlacement==="normal"?x='You cannot combine "'+o.type+'" with line, area, column or pie chart':this.plotInfo.axisPlacement==="none"?x='You cannot combine "'+o.type+'" with pie chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="xySwapped"):c==="none"?this.plotInfo.axisPlacement==="normal"?x='You cannot combine "'+o.type+'" with line, area, column or bar chart':this.plotInfo.axisPlacement==="xySwapped"?x='You cannot combine "'+o.type+'" with bar chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="none"):c===null&&this.plotInfo.axisPlacement==="none"&&(x='You cannot combine "'+o.type+'" with pie chart'),x&&window.console){window.console.log(x);return}}for(h=0;h<this.data.length;h++){if(d=="none"&&this.data[h].type==="error"&&window.console){window.console.log('You cannot combine "'+o.type+'" with error chart');return}this.data[h].type==="error"&&(this.data[h].axisPlacement=this.plotInfo.axisPlacement=d||"normal",this.data[h]._linkedSeries=this.data[h].linkedDataSeriesIndex===null?null:this.data[this.data[h].linkedDataSeriesIndex])}}this._objectsInitialized=!0,this._plotAreaElements=[]},O._supportedChartTypes=k("line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 candlestick ohlc boxAndWhisker rangeColumn error rangeBar rangeArea rangeSplineArea pie doughnut funnel pyramid waterfall".split(" ")),O.prototype.setLayout=function(){for(var r=this._plotAreaElements,d=0;d<this.data.length;d++)if(this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped"){if(!this.data[d].axisYType||this.data[d].axisYType==="primary")if(this.options.axisY&&0<this.options.axisY.length){if(!this.axisY.length)for(var h=0;h<this.options.axisY.length;h++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY[h]=new ke(this,"axisY",this.options.axisY[h],h,"axisY","left")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY[h]=new ke(this,"axisY",this.options.axisY[h],h,"axisY","bottom"));this.data[d].axisY=this.axisY[0<=this.data[d].axisYIndex&&this.data[d].axisYIndex<this.axisY.length?this.data[d].axisYIndex:0],this.axisY[0<=this.data[d].axisYIndex&&this.data[d].axisYIndex<this.axisY.length?this.data[d].axisYIndex:0].dataSeries.push(this.data[d])}else this.axisY.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY[0]=new ke(this,"axisY",this.options.axisY,0,"axisY","left")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY[0]=new ke(this,"axisY",this.options.axisY,0,"axisY","bottom"))),this.data[d].axisY=this.axisY[0],this.axisY[0].dataSeries.push(this.data[d]);if(this.data[d].axisYType==="secondary")if(this.options.axisY2&&0<this.options.axisY2.length){if(!this.axisY2.length)for(h=0;h<this.options.axisY2.length;h++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY2[h]=new ke(this,"axisY2",this.options.axisY2[h],h,"axisY","right")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY2[h]=new ke(this,"axisY2",this.options.axisY2[h],h,"axisY","top"));this.data[d].axisY=this.axisY2[0<=this.data[d].axisYIndex&&this.data[d].axisYIndex<this.axisY2.length?this.data[d].axisYIndex:0],this.axisY2[0<=this.data[d].axisYIndex&&this.data[d].axisYIndex<this.axisY2.length?this.data[d].axisYIndex:0].dataSeries.push(this.data[d])}else this.axisY2.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY2[0]=new ke(this,"axisY2",this.options.axisY2,0,"axisY","right")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY2[0]=new ke(this,"axisY2",this.options.axisY2,0,"axisY","top"))),this.data[d].axisY=this.axisY2[0],this.axisY2[0].dataSeries.push(this.data[d]);if(!this.data[d].axisXType||this.data[d].axisXType==="primary")if(this.options.axisX&&0<this.options.axisX.length){if(!this.axisX.length)for(h=0;h<this.options.axisX.length;h++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX[h]=new ke(this,"axisX",this.options.axisX[h],h,"axisX","bottom")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX[h]=new ke(this,"axisX",this.options.axisX[h],h,"axisX","left"));this.data[d].axisX=this.axisX[0<=this.data[d].axisXIndex&&this.data[d].axisXIndex<this.axisX.length?this.data[d].axisXIndex:0],this.axisX[0<=this.data[d].axisXIndex&&this.data[d].axisXIndex<this.axisX.length?this.data[d].axisXIndex:0].dataSeries.push(this.data[d])}else this.axisX.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX[0]=new ke(this,"axisX",this.options.axisX,0,"axisX","bottom")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX[0]=new ke(this,"axisX",this.options.axisX,0,"axisX","left"))),this.data[d].axisX=this.axisX[0],this.axisX[0].dataSeries.push(this.data[d]);if(this.data[d].axisXType==="secondary")if(this.options.axisX2&&0<this.options.axisX2.length){if(!this.axisX2.length)for(h=0;h<this.options.axisX2.length;h++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX2[h]=new ke(this,"axisX2",this.options.axisX2[h],h,"axisX","top")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX2[h]=new ke(this,"axisX2",this.options.axisX2[h],h,"axisX","right"));this.data[d].axisX=this.axisX2[0<=this.data[d].axisXIndex&&this.data[d].axisXIndex<this.axisX2.length?this.data[d].axisXIndex:0],this.axisX2[0<=this.data[d].axisXIndex&&this.data[d].axisXIndex<this.axisX2.length?this.data[d].axisXIndex:0].dataSeries.push(this.data[d])}else this.axisX2.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX2[0]=new ke(this,"axisX2",this.options.axisX2,0,"axisX","top")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX2[0]=new ke(this,"axisX2",this.options.axisX2,0,"axisX","right"))),this.data[d].axisX=this.axisX2[0],this.axisX2[0].dataSeries.push(this.data[d])}if(this.axisY){for(h=1;h<this.axisY.length;h++)typeof this.axisY[h].options.gridThickness>"u"&&(this.axisY[h].gridThickness=0);for(h=0;h<this.axisY.length-1;h++)typeof this.axisY[h].options.margin>"u"&&(this.axisY[h].margin=10)}if(this.axisY2){for(h=1;h<this.axisY2.length;h++)typeof this.axisY2[h].options.gridThickness>"u"&&(this.axisY2[h].gridThickness=0);for(h=0;h<this.axisY2.length-1;h++)typeof this.axisY2[h].options.margin>"u"&&(this.axisY2[h].margin=10)}if(this.axisY&&0<this.axisY.length&&this.axisY2&&0<this.axisY2.length&&(0<this.axisY[0].gridThickness&&typeof this.axisY2[0].options.gridThickness>"u"?this.axisY2[0].gridThickness=0:0<this.axisY2[0].gridThickness&&typeof this.axisY[0].options.gridThickness>"u"&&(this.axisY[0].gridThickness=0)),this.axisX)for(h=0;h<this.axisX.length;h++)typeof this.axisX[h].options.gridThickness>"u"&&(this.axisX[h].gridThickness=0);if(this.axisX2)for(h=0;h<this.axisX2.length;h++)typeof this.axisX2[h].options.gridThickness>"u"&&(this.axisX2[h].gridThickness=0);if(this.axisX&&0<this.axisX.length&&this.axisX2&&0<this.axisX2.length&&(0<this.axisX[0].gridThickness&&typeof this.axisX2[0].options.gridThickness>"u"?this.axisX2[0].gridThickness=0:0<this.axisX2[0].gridThickness&&typeof this.axisX[0].options.gridThickness>"u"&&(this.axisX[0].gridThickness=0)),h=!1,0<this._axes.length&&this.options.zoomEnabled&&(this.zoomEnabled||this.panEnabled)){for(d=0;d<this._axes.length;d++)if(!m(this._axes[d].viewportMinimum)||!m(this._axes[d].viewportMaximum)){h=!0;break}}if(h?(Z(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,this._zoomButton.style.borderRight=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.buttonBorderThickness:0)+"px solid "+this.toolbar.buttonBorderColor):(he(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.buttonBorderThickness+"px solid transparent",this.options.zoomEnabled&&(this.zoomEnabled=!0,this.panEnabled=!1)),T(this),this._processData(),this.options.title&&(this.title=new He(this,this.options.title),this.title.dockInsidePlotArea?r.push(this.title):this.title.setLayout()),this.options.subtitles)for(d=0;d<this.options.subtitles.length;d++)h=new Ze(this,this.options.subtitles[d],d),this.subtitles.push(h),h.dockInsidePlotArea?r.push(h):h.setLayout();for(this.legend=new Ne(this,this.options.legend),d=0;d<this.data.length;d++)(this.data[d].showInLegend||this.data[d].type==="pie"||this.data[d].type==="doughnut"||this.data[d].type==="funnel"||this.data[d].type==="pyramid")&&this.legend.dataSeries.push(this.data[d]);for(this.legend.dockInsidePlotArea?r.push(this.legend):this.legend.setLayout(),d=0;d<this._axes.length;d++)if(this._axes[d].scaleBreaks&&this._axes[d].scaleBreaks._appliedBreaks.length){X?(this._breaksCanvas=U(this.width,this.height,!0),this._breaksCanvasCtx=this._breaksCanvas.getContext("2d")):(this._breaksCanvas=this.canvas,this._breaksCanvasCtx=this.ctx);break}this._preRenderCanvas=U(this.width,this.height),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this.plotInfo.axisPlacement!=="normal"&&this.plotInfo.axisPlacement!=="xySwapped"||ke.setLayout(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace())},O.prototype.renderElements=function(){if(this.height&&this.width){var o=this._plotAreaElements;this.title&&!this.title.dockInsidePlotArea&&this.title.render();for(var r=0;r<this.subtitles.length;r++)this.subtitles[r].dockInsidePlotArea||this.subtitles[r].render();if(this.legend.dockInsidePlotArea||this.legend.render(),this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped")ke.render(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement);else if(this.plotInfo.axisPlacement==="none")this.preparePlotArea();else return;for(r=0;r<o.length;r++)o[r].setLayout(),o[r].render();var d=[];if(this.animatedRender){var h=U(this.width,this.height);h.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height)}H(this);var o=this.ctx.miterLimit,c;for(this.ctx.miterLimit=3,X&&this._breaksCanvas&&(this._preRenderCtx.drawImage(this.canvas,0,0,this.width,this.height),this._preRenderCtx.drawImage(this._breaksCanvas,0,0,this.width,this.height),this._breaksCanvasCtx.globalCompositeOperation="source-atop",this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),this._preRenderCtx.clearRect(0,0,this.width,this.height)),r=0;r<this.plotInfo.plotTypes.length;r++)for(var x=this.plotInfo.plotTypes[r],y=0;y<x.plotUnits.length;y++){var S=x.plotUnits[y],M=null;S.targetCanvas&&bi(S.targetCanvas),S.targetCanvas=null,this.animatedRender&&(S.targetCanvas=U(this.width,this.height),S.targetCanvasCtx=S.targetCanvas.getContext("2d"),c=S.targetCanvasCtx.miterLimit,S.targetCanvasCtx.miterLimit=3),S.type==="line"?M=this.renderLine(S):S.type==="stepLine"?M=this.renderStepLine(S):S.type==="spline"?M=this.renderSpline(S):S.type==="column"?M=this.renderColumn(S):S.type==="bar"?M=this.renderBar(S):S.type==="area"?M=this.renderArea(S):S.type==="stepArea"?M=this.renderStepArea(S):S.type==="splineArea"?M=this.renderSplineArea(S):S.type==="stackedColumn"?M=this.renderStackedColumn(S):S.type==="stackedColumn100"?M=this.renderStackedColumn100(S):S.type==="stackedBar"?M=this.renderStackedBar(S):S.type==="stackedBar100"?M=this.renderStackedBar100(S):S.type==="stackedArea"?M=this.renderStackedArea(S):S.type==="stackedArea100"?M=this.renderStackedArea100(S):S.type==="bubble"?M=M=this.renderBubble(S):S.type==="scatter"?M=this.renderScatter(S):S.type==="pie"?this.renderPie(S):S.type==="doughnut"?this.renderPie(S):S.type==="funnel"?M=this.renderFunnel(S):S.type==="pyramid"?M=this.renderFunnel(S):S.type==="candlestick"?M=this.renderCandlestick(S):S.type==="ohlc"?M=this.renderCandlestick(S):S.type==="rangeColumn"?M=this.renderRangeColumn(S):S.type==="error"?M=this.renderError(S):S.type==="rangeBar"?M=this.renderRangeBar(S):S.type==="rangeArea"?M=this.renderRangeArea(S):S.type==="rangeSplineArea"?M=this.renderRangeSplineArea(S):S.type==="waterfall"?M=this.renderWaterfall(S):S.type==="boxAndWhisker"&&(M=this.renderBoxAndWhisker(S));for(var _=0;_<S.dataSeriesIndexes.length;_++)this._dataInRenderedOrder.push(this.data[S.dataSeriesIndexes[_]]);this.animatedRender&&(S.targetCanvasCtx.miterLimit=c,M&&d.push(M))}this.ctx.miterLimit=o,this.animatedRender&&this._breaksCanvasCtx&&d.push({source:this._breaksCanvasCtx,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0,startTimePercent:.7}),this.animatedRender&&0<this._indexLabels.length&&(c=U(this.width,this.height).getContext("2d"),l(c),d.push(this.renderIndexLabels(c)));var v=this;if(0<d.length)v.disableToolTip=!0,v._animator.animate(200,v.animationDuration,function(b){v.ctx.clearRect(0,0,v.width,v.height),v.ctx.drawImage(h,0,0,Math.floor(v.width*ti),Math.floor(v.height*ti),0,0,v.width,v.height);for(var C=0;C<d.length;C++)M=d[C],1>b&&typeof M.startTimePercent<"u"?b>=M.startTimePercent&&M.animationCallback(M.easingFunction(b-M.startTimePercent,0,1,1-M.startTimePercent),M):M.animationCallback(M.easingFunction(b,0,1,1),M);v.dispatchEvent("dataAnimationIterationEnd",{chart:v})},function(){d=[];for(var b=0;b<v.plotInfo.plotTypes.length;b++)for(var C=v.plotInfo.plotTypes[b],u=0;u<C.plotUnits.length;u++){var I=C.plotUnits[u];I.targetCanvas&&bi(I.targetCanvas),I.targetCanvas=null}h=null,v.disableToolTip=!1,v.dispatchEvent("dataAnimationEnd",{chart:v})});else{if(v._breaksCanvas)if(X)v.plotArea.ctx.drawImage(v._breaksCanvas,0,0,this.width,this.height);else for(_=0;_<v._axes.length;_++)v._axes[_].createMask();0<v._indexLabels.length&&v.renderIndexLabels(),v.dispatchEvent("dataAnimationIterationEnd",{chart:v}),v.dispatchEvent("dataAnimationEnd",{chart:v})}for(this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||!this._zoomButton||this._zoomButton.style.display==="none"||he(this._zoomButton,this._resetButton),m(this.toolTip._xValue)||m(this.toolTip._dataSeriesIndex)||this.toolTip.showAtX(this.toolTip._xValue,this.toolTip._dataSeriesIndex),this.toolTip._updateToolTip(),this.renderCount++,this._breaksCanvas&&(delete this._breaksCanvas,delete this._breaksCanvasCtx),_=0;_<this._axes.length;_++)this._axes[_].maskCanvas&&(delete this._axes[_].maskCanvas,delete this._axes[_].maskCtx)}},O.prototype.render=function(r){r&&(this.options=r),this._initialize(),this.setLayout(),this.renderElements(),this._preRenderCanvas&&bi(this._preRenderCanvas)},O.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},O.prototype.categoriseDataSeries=function(){for(var r="",d=0;d<this.data.length;d++)if(r=this.data[d],r.dataPoints&&r.dataPoints.length!==0&&r.visible&&0<=O._supportedChartTypes.indexOf(r.type)){for(var h=null,o=!1,c=null,x=!1,y=0;y<this.plotInfo.plotTypes.length;y++)if(this.plotInfo.plotTypes[y].type===r.type){o=!0,h=this.plotInfo.plotTypes[y];break}for(o||(h={type:r.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(h)),y=0;y<h.plotUnits.length;y++)if(h.plotUnits[y].axisYType===r.axisYType&&h.plotUnits[y].axisXType===r.axisXType&&h.plotUnits[y].axisYIndex===r.axisYIndex&&h.plotUnits[y].axisXIndex===r.axisXIndex){x=!0,c=h.plotUnits[y];break}x||(c={type:r.type,previousDataSeriesCount:0,index:h.plotUnits.length,plotType:h,axisXType:r.axisXType,axisYType:r.axisYType,axisYIndex:r.axisYIndex,axisXIndex:r.axisXIndex,axisY:r.axisYType==="primary"?this.axisY[0<=r.axisYIndex&&r.axisYIndex<this.axisY.length?r.axisYIndex:0]:this.axisY2[0<=r.axisYIndex&&r.axisYIndex<this.axisY2.length?r.axisYIndex:0],axisX:r.axisXType==="primary"?this.axisX[0<=r.axisXIndex&&r.axisXIndex<this.axisX.length?r.axisXIndex:0]:this.axisX2[0<=r.axisXIndex&&r.axisXIndex<this.axisX2.length?r.axisXIndex:0],dataSeriesIndexes:[],yTotals:[],yAbsTotals:[]},h.plotUnits.push(c)),h.totalDataSeries++,c.dataSeriesIndexes.push(d),r.plotUnit=c}for(d=0;d<this.plotInfo.plotTypes.length;d++)for(h=this.plotInfo.plotTypes[d],y=r=0;y<h.plotUnits.length;y++)h.plotUnits[y].previousDataSeriesCount=r,r+=h.plotUnits[y].dataSeriesIndexes.length},O.prototype.assignIdToDataPoints=function(){for(var r=0;r<this.data.length;r++){var d=this.data[r];if(d.dataPoints)for(var h=d.dataPoints.length,o=0;o<h;o++)d.dataPointIds[o]=++this._eventManager.lastObjectId}},O.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var r=0;r<this.plotInfo.plotTypes.length;r++)for(var d=this.plotInfo.plotTypes[r],h=0;h<d.plotUnits.length;h++){var o=d.plotUnits[h];o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="column"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="bar"||o.type==="bubble"||o.type==="scatter"?this._processMultiseriesPlotUnit(o):o.type==="stackedColumn"||o.type==="stackedBar"||o.type==="stackedArea"?this._processStackedPlotUnit(o):o.type==="stackedColumn100"||o.type==="stackedBar100"||o.type==="stackedArea100"?this._processStacked100PlotUnit(o):o.type==="candlestick"||o.type==="ohlc"||o.type==="rangeColumn"||o.type==="rangeBar"||o.type==="rangeArea"||o.type==="rangeSplineArea"||o.type==="error"||o.type==="boxAndWhisker"?this._processMultiYPlotUnit(o):o.type==="waterfall"&&this._processSpecificPlotUnit(o)}this.calculateAutoBreaks()},O.prototype._processMultiseriesPlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length))for(var d=r.axisY.dataInfo,h=r.axisX.dataInfo,o,c,x=!1,y=0;y<r.dataSeriesIndexes.length;y++){var S=this.data[r.dataSeriesIndexes[y]],M=0,_=!1,v=!1,b;if(S.axisPlacement==="normal"||S.axisPlacement==="xySwapped")var C=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:r.axisX.logarithmic?0:-1/0,u=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((S.dataPoints[M].x&&S.dataPoints[M].x.getTime||S.xValueType==="dateTime")&&(x=!0),M=0;M<S.dataPoints.length;M++){if(typeof S.dataPoints[M].x>"u"&&(S.dataPoints[M].x=M+(r.axisX.logarithmic?1:0)),S.dataPoints[M].x.getTime?(x=!0,o=S.dataPoints[M].x.getTime()):o=S.dataPoints[M].x,c=S.dataPoints[M].y,o<h.min&&(h.min=o),o>h.max&&(h.max=o),c<d.min&&typeof c=="number"&&(d.min=c),c>d.max&&typeof c=="number"&&(d.max=c),0<M){if(r.axisX.logarithmic){var I=o/S.dataPoints[M-1].x;1>I&&(I=1/I),h.minDiff>I&&I!==1&&(h.minDiff=I)}else I=o-S.dataPoints[M-1].x,0>I&&(I*=-1),h.minDiff>I&&I!==0&&(h.minDiff=I);c!==null&&S.dataPoints[M-1].y!==null&&(r.axisY.logarithmic?(I=c/S.dataPoints[M-1].y,1>I&&(I=1/I),d.minDiff>I&&I!==1&&(d.minDiff=I)):(I=c-S.dataPoints[M-1].y,0>I&&(I*=-1),d.minDiff>I&&I!==0&&(d.minDiff=I)))}if(o<C&&!_)c!==null&&(b=o);else{if(!_&&(_=!0,0<M)){M-=2;continue}if(o>u&&!v)v=!0;else if(o>u&&v)continue;S.dataPoints[M].label&&(r.axisX.labels[o]=S.dataPoints[M].label),o<h.viewPortMin&&(h.viewPortMin=o),o>h.viewPortMax&&(h.viewPortMax=o),c===null?h.viewPortMin===o&&b<o&&(h.viewPortMin=b):(c<d.viewPortMin&&typeof c=="number"&&(d.viewPortMin=c),c>d.viewPortMax&&typeof c=="number"&&(d.viewPortMax=c))}}S.axisX.valueType=S.xValueType=x?"dateTime":"number"}},O.prototype._processStackedPlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length)){for(var d=r.axisY.dataInfo,h=r.axisX.dataInfo,o,c,x=!1,y=[],S=[],M=1/0,_=-1/0,v={},b=0;b<r.dataSeriesIndexes.length;b++){var C=this.data[r.dataSeriesIndexes[b]],u=0,I=!1,R=!1,z;if(C.axisPlacement==="normal"||C.axisPlacement==="xySwapped")var A=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:-1/0,Y=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((C.dataPoints[u].x&&C.dataPoints[u].x.getTime||C.xValueType==="dateTime")&&(x=!0),u=0;u<C.dataPoints.length;u++){if(typeof C.dataPoints[u].x>"u"&&(C.dataPoints[u].x=u+(r.axisX.logarithmic?1:0)),C.dataPoints[u].x.getTime?(x=!0,o=C.dataPoints[u].x.getTime()):o=C.dataPoints[u].x,c=m(C.dataPoints[u].y)?0:C.dataPoints[u].y,o<h.min&&(h.min=o),o>h.max&&(h.max=o),0<u){if(r.axisX.logarithmic){var V=o/C.dataPoints[u-1].x;1>V&&(V=1/V),h.minDiff>V&&V!==1&&(h.minDiff=V)}else V=o-C.dataPoints[u-1].x,0>V&&(V*=-1),h.minDiff>V&&V!==0&&(h.minDiff=V);c!==null&&C.dataPoints[u-1].y!==null&&(r.axisY.logarithmic?0<c&&(V=c/C.dataPoints[u-1].y,1>V&&(V=1/V),d.minDiff>V&&V!==1&&(d.minDiff=V)):(V=c-C.dataPoints[u-1].y,0>V&&(V*=-1),d.minDiff>V&&V!==0&&(d.minDiff=V)))}if(o<A&&!I)C.dataPoints[u].y!==null&&(z=o);else{if(!I&&(I=!0,0<u)){u-=2;continue}if(o>Y&&!R)R=!0;else if(o>Y&&R)continue;C.dataPoints[u].label&&(r.axisX.labels[o]=C.dataPoints[u].label),o<h.viewPortMin&&(h.viewPortMin=o),o>h.viewPortMax&&(h.viewPortMax=o),C.dataPoints[u].y===null?h.viewPortMin===o&&z<o&&(h.viewPortMin=z):(v[o]=(v[o]||0)+C.dataPoints[u].y,C.dataPointEOs[u].cumulativeY=v[o],r.yTotals[o]=(r.yTotals[o]?r.yTotals[o]:0)+c,r.yAbsTotals[o]=(r.yAbsTotals[o]?r.yAbsTotals[o]:0)+Math.abs(c),0<=c?y[o]?y[o]+=c:(y[o]=c,M=Math.min(c,M)):S[o]?S[o]+=c:(S[o]=c,_=Math.max(c,_)))}}r.axisY.scaleBreaks&&r.axisY.scaleBreaks.autoCalculate&&1<=r.axisY.scaleBreaks.maxNumberOfAutoBreaks&&(d.dataPointYPositiveSums?(d.dataPointYPositiveSums.push.apply(d.dataPointYPositiveSums,y),d.dataPointYNegativeSums.push.apply(d.dataPointYPositiveSums,S)):(d.dataPointYPositiveSums=y,d.dataPointYNegativeSums=S)),C.axisX.valueType=C.xValueType=x?"dateTime":"number"}for(u in y)y.hasOwnProperty(u)&&!isNaN(u)&&(r=y[u],r<d.min&&(d.min=Math.min(r,M)),r>d.max&&(d.max=r),u<h.viewPortMin||u>h.viewPortMax||(r<d.viewPortMin&&(d.viewPortMin=Math.min(r,M)),r>d.viewPortMax&&(d.viewPortMax=r)));for(u in S)S.hasOwnProperty(u)&&!isNaN(u)&&(r=S[u],r<d.min&&(d.min=r),r>d.max&&(d.max=Math.max(r,_)),u<h.viewPortMin||u>h.viewPortMax||(r<d.viewPortMin&&(d.viewPortMin=r),r>d.viewPortMax&&(d.viewPortMax=Math.max(r,_))))}},O.prototype._processStacked100PlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length)){for(var d=r.axisY.dataInfo,h=r.axisX.dataInfo,o,c,x=!1,y=!1,S=!1,M={},_=[],v=0;v<r.dataSeriesIndexes.length;v++){var b=this.data[r.dataSeriesIndexes[v]],C=0,u=!1,I=!1,R;if(b.axisPlacement==="normal"||b.axisPlacement==="xySwapped")var z=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:-1/0,A=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((b.dataPoints[C].x&&b.dataPoints[C].x.getTime||b.xValueType==="dateTime")&&(x=!0),C=0;C<b.dataPoints.length;C++){if(typeof b.dataPoints[C].x>"u"&&(b.dataPoints[C].x=C+(r.axisX.logarithmic?1:0)),b.dataPoints[C].x.getTime?(x=!0,o=b.dataPoints[C].x.getTime()):o=b.dataPoints[C].x,c=m(b.dataPoints[C].y)?null:b.dataPoints[C].y,o<h.min&&(h.min=o),o>h.max&&(h.max=o),0<C){if(r.axisX.logarithmic){var Y=o/b.dataPoints[C-1].x;1>Y&&(Y=1/Y),h.minDiff>Y&&Y!==1&&(h.minDiff=Y)}else Y=o-b.dataPoints[C-1].x,0>Y&&(Y*=-1),h.minDiff>Y&&Y!==0&&(h.minDiff=Y);m(c)||b.dataPoints[C-1].y===null||(r.axisY.logarithmic?0<c&&(Y=c/b.dataPoints[C-1].y,1>Y&&(Y=1/Y),d.minDiff>Y&&Y!==1&&(d.minDiff=Y)):(Y=c-b.dataPoints[C-1].y,0>Y&&(Y*=-1),d.minDiff>Y&&Y!==0&&(d.minDiff=Y)))}if(o<z&&!u)c!==null&&(R=o);else{if(!u&&(u=!0,0<C)){C-=2;continue}if(o>A&&!I)I=!0;else if(o>A&&I)continue;b.dataPoints[C].label&&(r.axisX.labels[o]=b.dataPoints[C].label),o<h.viewPortMin&&(h.viewPortMin=o),o>h.viewPortMax&&(h.viewPortMax=o),c===null?h.viewPortMin===o&&R<o&&(h.viewPortMin=R):(M[o]=(M[o]||0)+b.dataPoints[C].y,b.dataPointEOs[C].cumulativeY=M[o],r.yTotals[o]=(r.yTotals[o]?r.yTotals[o]:0)+c,r.yAbsTotals[o]=(r.yAbsTotals[o]?r.yAbsTotals[o]:0)+Math.abs(c),0<=c?y=!0:0>c&&(S=!0),_[o]=_[o]?_[o]+Math.abs(c):Math.abs(c))}}b.axisX.valueType=b.xValueType=x?"dateTime":"number"}r.axisY.logarithmic?(d.max=m(d.viewPortMax)?99*Math.pow(r.axisY.logarithmBase,-.05):Math.max(d.viewPortMax,99*Math.pow(r.axisY.logarithmBase,-.05)),d.min=m(d.viewPortMin)?1:Math.min(d.viewPortMin,1)):y&&!S?(d.max=m(d.viewPortMax)?99:Math.max(d.viewPortMax,99),d.min=m(d.viewPortMin)?1:Math.min(d.viewPortMin,1)):y&&S?(d.max=m(d.viewPortMax)?99:Math.max(d.viewPortMax,99),d.min=m(d.viewPortMin)?-99:Math.min(d.viewPortMin,-99)):!y&&S&&(d.max=m(d.viewPortMax)?-1:Math.max(d.viewPortMax,-1),d.min=m(d.viewPortMin)?-99:Math.min(d.viewPortMin,-99)),d.viewPortMin=d.min,d.viewPortMax=d.max,r.dataPointYSums=_}},O.prototype._processMultiYPlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length))for(var d=r.axisY.dataInfo,h=r.axisX.dataInfo,o,c,x,y,S=!1,M=0;M<r.dataSeriesIndexes.length;M++){var _=this.data[r.dataSeriesIndexes[M]],v=0,b=!1,C=!1,u,I,R;if(_.axisPlacement==="normal"||_.axisPlacement==="xySwapped")var z=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:r.axisX.logarithmic?0:-1/0,A=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((_.dataPoints[v].x&&_.dataPoints[v].x.getTime||_.xValueType==="dateTime")&&(S=!0),v=0;v<_.dataPoints.length;v++){if(typeof _.dataPoints[v].x>"u"&&(_.dataPoints[v].x=v+(r.axisX.logarithmic?1:0)),_.dataPoints[v].x.getTime?(S=!0,o=_.dataPoints[v].x.getTime()):o=_.dataPoints[v].x,(c=_.dataPoints[v].y)&&c.length){x=Math.min.apply(null,c),y=Math.max.apply(null,c),I=!0;for(var Y=0;Y<c.length;Y++)c.k===null&&(I=!1);I&&(b||(R=u),u=o)}if(o<h.min&&(h.min=o),o>h.max&&(h.max=o),x<d.min&&(d.min=x),y>d.max&&(d.max=y),0<v&&(r.axisX.logarithmic?(I=o/_.dataPoints[v-1].x,1>I&&(I=1/I),h.minDiff>I&&I!==1&&(h.minDiff=I)):(I=o-_.dataPoints[v-1].x,0>I&&(I*=-1),h.minDiff>I&&I!==0&&(h.minDiff=I)),c&&c[0]!==null&&_.dataPoints[v-1].y&&_.dataPoints[v-1].y[0]!==null&&(r.axisY.logarithmic?(I=c[0]/_.dataPoints[v-1].y[0],1>I&&(I=1/I),d.minDiff>I&&I!==1&&(d.minDiff=I)):(I=c[0]-_.dataPoints[v-1].y[0],0>I&&(I*=-1),d.minDiff>I&&I!==0&&(d.minDiff=I)))),!(o<z)||b){if(!b&&(b=!0,0<v)){v-=2,u=R;continue}if(o>A&&!C)C=!0;else if(o>A&&C)continue;if(_.dataPoints[v].label&&(r.axisX.labels[o]=_.dataPoints[v].label),o<h.viewPortMin&&(h.viewPortMin=o),o>h.viewPortMax&&(h.viewPortMax=o),h.viewPortMin===o&&c){for(Y=0;Y<c.length;Y++)if(c[Y]===null&&u<o){h.viewPortMin=u;break}}c===null?h.viewPortMin===o&&u<o&&(h.viewPortMin=u):(x<d.viewPortMin&&(d.viewPortMin=x),y>d.viewPortMax&&(d.viewPortMax=y))}}_.axisX.valueType=_.xValueType=S?"dateTime":"number"}},O.prototype._processSpecificPlotUnit=function(r){if(r.type==="waterfall"&&r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length))for(var d=r.axisY.dataInfo,h=r.axisX.dataInfo,o,c,x=!1,y=0;y<r.dataSeriesIndexes.length;y++){var S=this.data[r.dataSeriesIndexes[y]],M=0,_=!1,v=!1,b=o=0;if(S.axisPlacement==="normal"||S.axisPlacement==="xySwapped")var C=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:r.axisX.logarithmic?0:-1/0,u=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((S.dataPoints[M].x&&S.dataPoints[M].x.getTime||S.xValueType==="dateTime")&&(x=!0),M=0;M<S.dataPoints.length;M++)typeof S.dataPoints[M].isCumulativeSum<"u"&&S.dataPoints[M].isCumulativeSum===!0?(S.dataPointEOs[M].cumulativeSumYStartValue=0,S.dataPointEOs[M].cumulativeSum=M===0?0:S.dataPointEOs[M-1].cumulativeSum,S.dataPoints[M].y=M===0?0:S.dataPointEOs[M-1].cumulativeSum):typeof S.dataPoints[M].isIntermediateSum<"u"&&S.dataPoints[M].isIntermediateSum===!0?(S.dataPointEOs[M].cumulativeSumYStartValue=b,S.dataPointEOs[M].cumulativeSum=M===0?0:S.dataPointEOs[M-1].cumulativeSum,S.dataPoints[M].y=M===0?0:o,b=M===0?0:S.dataPointEOs[M-1].cumulativeSum,o=0):(c=typeof S.dataPoints[M].y!="number"?0:S.dataPoints[M].y,S.dataPointEOs[M].cumulativeSumYStartValue=M===0?0:S.dataPointEOs[M-1].cumulativeSum,S.dataPointEOs[M].cumulativeSum=M===0?c:S.dataPointEOs[M-1].cumulativeSum+c,o+=c);for(M=0;M<S.dataPoints.length;M++)if(typeof S.dataPoints[M].x>"u"&&(S.dataPoints[M].x=M+(r.axisX.logarithmic?1:0)),S.dataPoints[M].x.getTime?(x=!0,o=S.dataPoints[M].x.getTime()):o=S.dataPoints[M].x,c=S.dataPoints[M].y,o<h.min&&(h.min=o),o>h.max&&(h.max=o),S.dataPointEOs[M].cumulativeSum<d.min&&(d.min=S.dataPointEOs[M].cumulativeSum),S.dataPointEOs[M].cumulativeSum>d.max&&(d.max=S.dataPointEOs[M].cumulativeSum),0<M&&(r.axisX.logarithmic?(b=o/S.dataPoints[M-1].x,1>b&&(b=1/b),h.minDiff>b&&b!==1&&(h.minDiff=b)):(b=o-S.dataPoints[M-1].x,0>b&&(b*=-1),h.minDiff>b&&b!==0&&(h.minDiff=b)),c!==null&&S.dataPoints[M-1].y!==null&&(r.axisY.logarithmic?(c=S.dataPointEOs[M].cumulativeSum/S.dataPointEOs[M-1].cumulativeSum,1>c&&(c=1/c),d.minDiff>c&&c!==1&&(d.minDiff=c)):(c=S.dataPointEOs[M].cumulativeSum-S.dataPointEOs[M-1].cumulativeSum,0>c&&(c*=-1),d.minDiff>c&&c!==0&&(d.minDiff=c)))),!(o<C)||_){if(!_&&(_=!0,0<M)){M-=2;continue}if(o>u&&!v)v=!0;else if(o>u&&v)continue;S.dataPoints[M].label&&(r.axisX.labels[o]=S.dataPoints[M].label),o<h.viewPortMin&&(h.viewPortMin=o),o>h.viewPortMax&&(h.viewPortMax=o),0<M&&(S.dataPointEOs[M-1].cumulativeSum<d.viewPortMin&&(d.viewPortMin=S.dataPointEOs[M-1].cumulativeSum),S.dataPointEOs[M-1].cumulativeSum>d.viewPortMax&&(d.viewPortMax=S.dataPointEOs[M-1].cumulativeSum)),S.dataPointEOs[M].cumulativeSum<d.viewPortMin&&(d.viewPortMin=S.dataPointEOs[M].cumulativeSum),S.dataPointEOs[M].cumulativeSum>d.viewPortMax&&(d.viewPortMax=S.dataPointEOs[M].cumulativeSum)}S.axisX.valueType=S.xValueType=x?"dateTime":"number"}},O.prototype.calculateAutoBreaks=function(){function r(I,R,z,A){return A?(z=Math.pow(Math.min(z*I/R,R/I),.2),1>=z&&(z=Math.pow(1>I?1/I:Math.min(R/I,I),.25)),{startValue:I*z,endValue:R/z}):(z=.2*Math.min(z-R+I,R-I),0>=z&&(z=.25*Math.min(R-I,Math.abs(I))),{startValue:I+z,endValue:R-z})}function d(I){if(I.dataSeriesIndexes&&!(1>I.dataSeriesIndexes.length)){var R=I.axisX.scaleBreaks&&I.axisX.scaleBreaks.autoCalculate&&1<=I.axisX.scaleBreaks.maxNumberOfAutoBreaks,z=I.axisY.scaleBreaks&&I.axisY.scaleBreaks.autoCalculate&&1<=I.axisY.scaleBreaks.maxNumberOfAutoBreaks;if(R||z)for(var ve=I.axisY.dataInfo,Q=I.axisX.dataInfo,A,Y=Q.min,V=Q.max,q=ve.min,te=ve.max,Q=Q._dataRanges,ve=ve._dataRanges,Me,le=0,ue=0;ue<I.dataSeriesIndexes.length;ue++){var ce=c.data[I.dataSeriesIndexes[ue]];if(!(4>ce.dataPoints.length)){for(le=0;le<ce.dataPoints.length;le++)if(R&&(Me=(V+1-Y)*Math.max(parseFloat(I.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,A=ce.dataPoints[le].x.getTime?ce.dataPoints[le].x.getTime():ce.dataPoints[le].x,Me=Math.floor((A-Y)/Me),A<Q[Me].min&&(Q[Me].min=A),A>Q[Me].max&&(Q[Me].max=A)),z){var oe=(te+1-q)*Math.max(parseFloat(I.axisY.scaleBreaks.collapsibleThreshold)||10,10)/100;if((A=I.type==="waterfall"?ce.dataPointEOs[le].cumulativeSum:ce.dataPoints[le].y)&&A.length)for(var J=0;J<A.length;J++)Me=Math.floor((A[J]-q)/oe),A[J]<ve[Me].min&&(ve[Me].min=A[J]),A[J]>ve[Me].max&&(ve[Me].max=A[J]);else m(A)||(Me=Math.floor((A-q)/oe),A<ve[Me].min&&(ve[Me].min=A),A>ve[Me].max&&(ve[Me].max=A))}}}}}function h(I){if(I.dataSeriesIndexes&&!(1>I.dataSeriesIndexes.length)&&I.axisX.scaleBreaks&&I.axisX.scaleBreaks.autoCalculate&&1<=I.axisX.scaleBreaks.maxNumberOfAutoBreaks)for(var R=I.axisX.dataInfo,z=R.min,A=R.max,Y=R._dataRanges,V,q=0,te=0;te<I.dataSeriesIndexes.length;te++){var Q=c.data[I.dataSeriesIndexes[te]];if(!(4>Q.dataPoints.length))for(q=0;q<Q.dataPoints.length;q++)V=(A+1-z)*Math.max(parseFloat(I.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,R=Q.dataPoints[q].x.getTime?Q.dataPoints[q].x.getTime():Q.dataPoints[q].x,V=Math.floor((R-z)/V),R<Y[V].min&&(Y[V].min=R),R>Y[V].max&&(Y[V].max=R)}}for(var o,c=this,x=!1,y=0;y<this._axes.length;y++)if(this._axes[y].scaleBreaks&&this._axes[y].scaleBreaks.autoCalculate&&1<=this._axes[y].scaleBreaks.maxNumberOfAutoBreaks){x=!0,this._axes[y].dataInfo._dataRanges=[];for(var S=0;S<100/Math.max(parseFloat(this._axes[y].scaleBreaks.collapsibleThreshold)||10,10);S++)this._axes[y].dataInfo._dataRanges.push({min:1/0,max:-1/0})}if(x){for(y=0;y<this.plotInfo.plotTypes.length;y++)for(x=this.plotInfo.plotTypes[y],S=0;S<x.plotUnits.length;S++)o=x.plotUnits[S],o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="column"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="bar"||o.type==="bubble"||o.type==="scatter"||o.type==="candlestick"||o.type==="ohlc"||o.type==="rangeColumn"||o.type==="rangeBar"||o.type==="rangeArea"||o.type==="rangeSplineArea"||o.type==="waterfall"||o.type==="error"||o.type==="boxAndWhisker"?d(o):0<=o.type.indexOf("stacked")&&h(o);for(y=0;y<this._axes.length;y++)if(this._axes[y].dataInfo._dataRanges){var M=this._axes[y].dataInfo.min;o=(this._axes[y].dataInfo.max+1-M)*Math.max(parseFloat(this._axes[y].scaleBreaks.collapsibleThreshold)||10,10)/100;var _=this._axes[y].dataInfo._dataRanges,v,b,x=[];if(this._axes[y].dataInfo.dataPointYPositiveSums){var C=this._axes[y].dataInfo.dataPointYPositiveSums;v=_;for(S in C)if(C.hasOwnProperty(S)&&!isNaN(S)&&(b=C[S],!m(b))){var u=Math.floor((b-M)/o);b<v[u].min&&(v[u].min=b),b>v[u].max&&(v[u].max=b)}delete this._axes[y].dataInfo.dataPointYPositiveSums}if(this._axes[y].dataInfo.dataPointYNegativeSums){C=this._axes[y].dataInfo.dataPointYNegativeSums,v=_;for(S in C)C.hasOwnProperty(S)&&!isNaN(S)&&(b=-1*C[S],m(b)||(u=Math.floor((b-M)/o),b<v[u].min&&(v[u].min=b),b>v[u].max&&(v[u].max=b)));delete this._axes[y].dataInfo.dataPointYNegativeSums}for(S=0;S<_.length-1;S++)if(v=_[S].max,isFinite(v))for(;S<_.length-1;)if(M=_[S+1].min,isFinite(M)){b=M-v,b>o&&x.push({diff:b,start:v,end:M});break}else S++;if(this._axes[y].scaleBreaks.customBreaks)for(S=0;S<this._axes[y].scaleBreaks.customBreaks.length;S++)for(o=0;o<x.length;o++)(this._axes[y].scaleBreaks.customBreaks[S].startValue<=x[o].start&&x[o].start<=this._axes[y].scaleBreaks.customBreaks[S].endValue||this._axes[y].scaleBreaks.customBreaks[S].startValue<=x[o].start&&x[o].start<=this._axes[y].scaleBreaks.customBreaks[S].endValue||x[o].start<=this._axes[y].scaleBreaks.customBreaks[S].startValue&&this._axes[y].scaleBreaks.customBreaks[S].startValue<=x[o].end||x[o].start<=this._axes[y].scaleBreaks.customBreaks[S].endValue&&this._axes[y].scaleBreaks.customBreaks[S].endValue<=x[o].end)&&(x.splice(o,1),o--);for(x.sort(function(R,z){return z.diff-R.diff}),S=0;S<Math.min(x.length,this._axes[y].scaleBreaks.maxNumberOfAutoBreaks);S++)o=r(x[S].start,x[S].end,this._axes[y].logarithmic?this._axes[y].dataInfo.max/this._axes[y].dataInfo.min:this._axes[y].dataInfo.max-this._axes[y].dataInfo.min,this._axes[y].logarithmic),this._axes[y].scaleBreaks.autoBreaks.push(new Tt(this,"autoBreaks",o,S,++this._eventManager.lastObjectId,this._axes[y].scaleBreaks)),this._axes[y].scaleBreaks._appliedBreaks.push(this._axes[y].scaleBreaks.autoBreaks[this._axes[y].scaleBreaks.autoBreaks.length-1]);this._axes[y].scaleBreaks._appliedBreaks.sort(function(R,z){return R.startValue-z.startValue})}}},O.prototype.renderCrosshairs=function(r,d){for(var h=0;h<this.axisX.length;h++)this.axisX[h]!=r&&this.axisX[h].crosshair&&this.axisX[h].crosshair.enabled&&!this.axisX[h].crosshair._hidden&&(d&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisX[h].crosshair.render(null,this.sessionVariables.mouseY,this.axisX[h].convertPixelToValue(this.sessionVariables.mouseY)):this.axisX[h].crosshair.render(this.sessionVariables.mouseX,null,this.axisX[h].convertPixelToValue(this.sessionVariables.mouseX)):d||this.axisX[h].showCrosshair(this.axisX[h].crosshair._updatedValue));for(h=0;h<this.axisX2.length;h++)this.axisX2[h]!=r&&this.axisX2[h].crosshair&&this.axisX2[h].crosshair.enabled&&!this.axisX2[h].crosshair._hidden&&(d&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisX2[h].crosshair.render(null,this.sessionVariables.mouseY,this.axisX2[h].convertPixelToValue(this.sessionVariables.mouseY)):this.axisX2[h].crosshair.render(this.sessionVariables.mouseX,null,this.axisX2[h].convertPixelToValue(this.sessionVariables.mouseX)):d||this.axisX2[h].showCrosshair(this.axisX2[h].crosshair._updatedValue));for(h=0;h<this.axisY.length;h++)this.axisY[h]!=r&&this.axisY[h].crosshair&&this.axisY[h].crosshair.enabled&&!this.axisY[h].crosshair._hidden&&(d&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisY[h].crosshair.render(this.sessionVariables.mouseX,null,this.axisY[h].convertPixelToValue(this.sessionVariables.mouseX)):this.axisY[h].crosshair.render(null,this.sessionVariables.mouseY,this.axisY[h].convertPixelToValue(this.sessionVariables.mouseY)):d||this.axisY[h].showCrosshair(this.axisY[h].crosshair._updatedValue));for(h=0;h<this.axisY2.length;h++)this.axisY2[h]!=r&&this.axisY2[h].crosshair&&this.axisY2[h].crosshair.enabled&&!this.axisY2[h].crosshair._hidden&&(d&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisY2[h].crosshair.render(this.sessionVariables.mouseX,null,this.axisY2[h].convertPixelToValue(this.sessionVariables.mouseX)):this.axisY2[h].crosshair.render(null,this.sessionVariables.mouseY,this.axisY2[h].convertPixelToValue(this.sessionVariables.mouseY)):d||this.axisY2[h].showCrosshair(this.axisY2[h].crosshair._updatedValue))},O.prototype.getDataPointAtXY=function(r,d,h){h=h||!1;for(var o=[],c=this._dataInRenderedOrder.length-1;0<=c;c--){var x=null;(x=this._dataInRenderedOrder[c].getDataPointAtXY(r,d,h))&&o.push(x)}for(r=null,d=!1,h=0;h<o.length;h++)if((o[h].dataSeries.type==="line"||o[h].dataSeries.type==="stepLine"||o[h].dataSeries.type==="area"||o[h].dataSeries.type==="stepArea")&&(c=E("markerSize",o[h].dataPoint,o[h].dataSeries)||8,o[h].distance<=c/2)){d=!0;break}for(h=0;h<o.length;h++)d&&o[h].dataSeries.type!=="line"&&o[h].dataSeries.type!=="stepLine"&&o[h].dataSeries.type!=="area"&&o[h].dataSeries.type!=="stepArea"||(r?o[h].distance<=r.distance&&(r=o[h]):r=o[h]);return r},O.prototype.getObjectAtXY=function(r,d,h){var o=null;if(h=this.getDataPointAtXY(r,d,h||!1))o=h.dataSeries.dataPointIds[h.dataPointIndex];else if(X)o=N(r,d,this._eventManager.ghostCtx);else for(h=0;h<this.legend.items.length;h++){var c=this.legend.items[h];r>=c.x1&&r<=c.x2&&d>=c.y1&&d<=c.y2&&(o=c.id)}return o},O.prototype.getAutoFontSize=Gi,O.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},O.prototype.clearCanvas=cn,O.prototype.attachEvent=function(r){this._events.push(r)},O.prototype._touchEventHandler=function(r){if(r.changedTouches&&this.interactivityEnabled){var d=[],h=r.changedTouches,o=h?h[0]:r,c=null;switch(r.type){case"touchstart":case"MSPointerDown":d=["mousemove","mousedown"],this._lastTouchData=$i(o),this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":d=["mousemove"];break;case"touchend":case"MSPointerUp":var x=this._lastTouchData&&this._lastTouchData.time?new Date-this._lastTouchData.time:0,d=this._lastTouchEventType==="touchstart"||this._lastTouchEventType==="MSPointerDown"||300>x?["mouseup","click"]:["mouseup"];break;default:return}if(!(h&&1<h.length)){c=$i(o),c.time=new Date;try{var y=c.y-this._lastTouchData.y,x=c.time-this._lastTouchData.time;(1<Math.abs(y)&&this._lastTouchData.scroll||5<Math.abs(y)&&250>x)&&(this._lastTouchData.scroll=!0,this.stockChart&&(this.stockChart._chartScroll=!0))}catch{}if(this._lastTouchEventType=r.type,this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(h=0;h<d.length;h++)c=d[h],y=document.createEvent("MouseEvent"),y.initMouseEvent(c,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(y),(!m(this._lastTouchData.scroll)&&!this._lastTouchData.scroll||!this._lastTouchData.scroll&&250<x||c==="click")&&(r.preventManipulation&&r.preventManipulation(),r.preventDefault&&r.cancelable&&r.preventDefault(),this.stockChart&&(this.stockChart._chartScroll=null))}}},O.prototype._dispatchRangeEvent=function(r,d){var h={chart:this};h.type=r,h.trigger=d;var o=[];this.axisX&&0<this.axisX.length&&o.push("axisX"),this.axisX2&&0<this.axisX2.length&&o.push("axisX2"),this.axisY&&0<this.axisY.length&&o.push("axisY"),this.axisY2&&0<this.axisY2.length&&o.push("axisY2");for(var c=0;c<o.length;c++)if(m(h[o[c]])&&(h[o[c]]=[]),o[c]==="axisY")for(var x=0;x<this.axisY.length;x++)h[o[c]].push({viewportMinimum:this[o[c]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[c]][x].sessionVariables.newViewportMaximum});else if(o[c]==="axisY2")for(x=0;x<this.axisY2.length;x++)h[o[c]].push({viewportMinimum:this[o[c]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[c]][x].sessionVariables.newViewportMaximum});else if(o[c]==="axisX")for(x=0;x<this.axisX.length;x++)h[o[c]].push({viewportMinimum:this[o[c]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[c]][x].sessionVariables.newViewportMaximum});else if(o[c]==="axisX2")for(x=0;x<this.axisX2.length;x++)h[o[c]].push({viewportMinimum:this[o[c]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[c]][x].sessionVariables.newViewportMaximum});this.dispatchEvent(r,h,this)},O.prototype._mouseEventHandler=function(r){function d(){O.capturedEventParam&&(c=O.capturedEventParam,y=c.bounds,o==="mouseup"&&(O.capturedEventParam=null,c.chart.overlaidCanvas.releaseCapture?c.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",c.chart._mouseEventHandler,!1)),c.hasOwnProperty(o)&&(o!=="mouseup"||c.chart.overlaidCanvas.releaseCapture?r.target!==c.chart.overlaidCanvas&&X||c[o].call(c.context,h.x,h.y):r.target!==c.chart.overlaidCanvas&&(c.chart.isDrag=!1)))}typeof r.target>"u"&&r.srcElement&&(r.target=r.srcElement);var h=$i(r),o=r.type,c,x;if(r.which?x=r.which==3:r.button&&(x=r.button==2),this._ignoreNextEvent)d(),this._ignoreNextEvent=!1;else if(d(),this.interactivityEnabled){r.preventManipulation&&r.preventManipulation(),r.preventDefault&&r.preventDefault();var y;if(!x){if(!O.capturedEventParam&&this._events){for(x=0;x<this._events.length;x++)if(this._events[x].hasOwnProperty(o))if(c=this._events[x],y=c.bounds,h.x>=y.x1&&h.x<=y.x2&&h.y>=y.y1&&h.y<=y.y2){c[o].call(c.context,h.x,h.y),o==="mousedown"&&c.capture===!0?(O.capturedEventParam=c,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.documentElement.addEventListener("mouseup",this._mouseEventHandler,!1)):o==="mouseup"&&(c.chart.overlaidCanvas.releaseCapture?c.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",this._mouseEventHandler,!1));break}else c=null;r.target.style.cursor=c&&c.cursor?c.cursor:this._defaultCursor}if(x=this.plotArea,h.x<x.x1||h.x>x.x2||h.y<x.y1||h.y>x.y2){for(this.toolTip&&this.toolTip.enabled?(this.toolTip.hide(),this.toolTip.dispatchEvent("hidden",{chart:this,toolTip:this.toolTip},this.toolTip)):this.resetOverlayedCanvas(),x=0;x<this.axisX.length;x++)this.axisX[x].crosshair&&this.axisX[x].crosshair.enabled&&(this.axisX[x].crosshair.hide(),this.axisX[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX[x].options},this.axisX[x].crosshair));for(x=0;x<this.axisX2.length;x++)this.axisX2[x].crosshair&&this.axisX2[x].crosshair.enabled&&(this.axisX2[x].crosshair.hide(),this.axisX2[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX2[x].options},this.axisX2[x].crosshair));for(x=0;x<this.axisY.length;x++)this.axisY[x].crosshair&&this.axisY[x].crosshair.enabled&&(this.axisY[x].crosshair.hide(),this.axisY[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY[x].options},this.axisY[x].crosshair));for(x=0;x<this.axisY2.length;x++)this.axisY2[x].crosshair&&this.axisY2[x].crosshair.enabled&&(this.axisY2[x].crosshair.hide(),this.axisY2[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY2[x].options},this.axisY2[x].crosshair))}this.sessionVariables.mouseX=h.x,this.sessionVariables.mouseY=h.y,this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(r)}}},O.prototype._plotAreaMouseDown=function(r,d){this.isDrag=!0,this.dragStartPoint={x:r,y:d}},O.prototype._plotAreaMouseUp=function(r,d){if((this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped")&&this.isDrag){var h=d-this.dragStartPoint.y,o=r-this.dragStartPoint.x,S=0<=this.zoomType.indexOf("x"),y=0<=this.zoomType.indexOf("y"),c=!1;if(this.resetOverlayedCanvas(),this.plotInfo.axisPlacement==="xySwapped")var x=y,y=S,S=x;if(this.panEnabled||this.zoomEnabled){if(this.panEnabled)for(S=y=0;S<this._axes.length;S++)h=this._axes[S],h.logarithmic?h.viewportMinimum<h.minimum?(y=h.minimum/h.viewportMinimum,h.sessionVariables.newViewportMinimum=h.viewportMinimum*y,h.sessionVariables.newViewportMaximum=h.viewportMaximum*y,c=!0):h.viewportMaximum>h.maximum&&(y=h.viewportMaximum/h.maximum,h.sessionVariables.newViewportMinimum=h.viewportMinimum/y,h.sessionVariables.newViewportMaximum=h.viewportMaximum/y,c=!0):h.viewportMinimum<h.minimum?(y=h.minimum-h.viewportMinimum,h.sessionVariables.newViewportMinimum=h.viewportMinimum+y,h.sessionVariables.newViewportMaximum=h.viewportMaximum+y,c=!0):h.viewportMaximum>h.maximum&&(y=h.viewportMaximum-h.maximum,h.sessionVariables.newViewportMinimum=h.viewportMinimum-y,h.sessionVariables.newViewportMaximum=h.viewportMaximum-y,c=!0);else if((!S||2<Math.abs(o))&&(!y||2<Math.abs(h))&&this.zoomEnabled){if(!this.dragStartPoint)return;h=S?this.dragStartPoint.x:this.plotArea.x1,o=y?this.dragStartPoint.y:this.plotArea.y1,S=S?r:this.plotArea.x2,y=y?d:this.plotArea.y2,2<Math.abs(h-S)&&2<Math.abs(o-y)&&this._zoomPanToSelectedRegion(h,o,S,y)&&(c=!0)}c&&(this._ignoreNextEvent=!0,this._dispatchRangeEvent("rangeChanging","zoom"),this.stockChart&&(this.stockChart._rangeEventParameter||(this.stockChart._rangeEventParameter={stockChart:this.stockChart,source:"chart",index:this.stockChart.charts.indexOf(this),minimum:this.stockChart.sessionVariables._axisXMin,maximum:this.stockChart.sessionVariables._axisXMax}),this.stockChart._rangeEventParameter.type="rangeChanging",this.stockChart.dispatchEvent("rangeChanging",this.stockChart._rangeEventParameter,this.stockChart)),this.render(),this._dispatchRangeEvent("rangeChanged","zoom"),this.stockChart&&(this.stockChart.rangeUpdatedBy="chart",this.stockChart._rangeEventParameter.type="rangeChanged",this.stockChart.dispatchEvent("rangeChanged",this.stockChart._rangeEventParameter,this.stockChart)),c&&this.zoomEnabled&&this._zoomButton.style.display==="none"&&(Z(this._zoomButton,this._resetButton),G(this,this._zoomButton,"pan"),G(this,this._resetButton,"reset")))}}if(this.isDrag=!1,this.plotInfo.axisPlacement!=="none"){if(this.resetOverlayedCanvas(),this.axisX&&0<this.axisX.length)for(c=0;c<this.axisX.length;c++)this.axisX[c].crosshair&&this.axisX[c].crosshair.enabled&&this.axisX[c].renderCrosshair(r,d);if(this.axisX2&&0<this.axisX2.length)for(c=0;c<this.axisX2.length;c++)this.axisX2[c].crosshair&&this.axisX2[c].crosshair.enabled&&this.axisX2[c].renderCrosshair(r,d);if(this.axisY&&0<this.axisY.length)for(c=0;c<this.axisY.length;c++)this.axisY[c].crosshair&&this.axisY[c].crosshair.enabled&&this.axisY[c].renderCrosshair(r,d);if(this.axisY2&&0<this.axisY2.length)for(c=0;c<this.axisY2.length;c++)this.axisY2[c].crosshair&&this.axisY2[c].crosshair.enabled&&this.axisY2[c].renderCrosshair(r,d);if(this.axisX&&0<this.axisX.length)for(c=0;c<this.axisX.length;c++)this.axisX[c].crosshair&&this.axisX[c].crosshair.enabled&&this.axisX[c].crosshair.renderLabel();if(this.axisX2&&0<this.axisX2.length)for(c=0;c<this.axisX2.length;c++)this.axisX2[c].crosshair&&this.axisX2[c].crosshair.enabled&&this.axisX2[c].crosshair.renderLabel();if(this.axisY&&0<this.axisY.length)for(c=0;c<this.axisY.length;c++)this.axisY[c].crosshair&&this.axisY[c].crosshair.enabled&&this.axisY[c].crosshair.renderLabel();if(this.axisY2&&0<this.axisY2.length)for(c=0;c<this.axisY2.length;c++)this.axisY2[c].crosshair&&this.axisY2[c].crosshair.enabled&&this.axisY2[c].crosshair.renderLabel()}},O.prototype._plotAreaMouseMove=function(r,d){if(this.isDrag&&this.plotInfo.axisPlacement!=="none"){var h=0,o=0,c=h=null,c=0<=this.zoomType.indexOf("x"),x=0<=this.zoomType.indexOf("y"),y=this;if(this.plotInfo.axisPlacement==="xySwapped"&&(h=x,x=c,c=h),h=this.dragStartPoint.x-r,o=this.dragStartPoint.y-d,2<Math.abs(h)&&8>Math.abs(h)&&(this.panEnabled||this.zoomEnabled)){this.toolTip.hide(),this.toolTip&&this.toolTip.enabled&&this.toolTip.dispatchEvent("hidden",{chart:this,toolTip:this.toolTip},this.toolTip);for(var S=0;S<this.axisX.length;S++)this.axisX[S].crosshair&&this.axisX[S].crosshair.enabled&&(this.axisX[S].crosshair.hide(),this.axisX[S].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX[S].options},this.axisX[S].crosshair));for(S=0;S<this.axisX2.length;S++)this.axisX2[S].crosshair&&this.axisX2[S].crosshair.enabled&&(this.axisX2[S].crosshair.hide(),this.axisX2[S].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX2[S].options},this.axisX2[S].crosshair));for(S=0;S<this.axisY.length;S++)this.axisY[S].crosshair&&this.axisY[S].crosshair.enabled&&(this.axisY[S].crosshair.hide(),this.axisY[S].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY[S].options},this.axisY[S].crosshair));for(S=0;S<this.axisY2.length;S++)this.axisY2[S].crosshair&&this.axisY2[S].crosshair.enabled&&(this.axisY2[S].crosshair.hide(),this.axisY2[S].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY2[S].options},this.axisY2[S].crosshair))}else this.panEnabled||this.zoomEnabled||this.toolTip.mouseMoveHandler(r,d);if((!c||2<Math.abs(h)||!x||2<Math.abs(o))&&(this.panEnabled||this.zoomEnabled)){if(this.panEnabled)c={x1:c?this.plotArea.x1+h:this.plotArea.x1,y1:x?this.plotArea.y1+o:this.plotArea.y1,x2:c?this.plotArea.x2+h:this.plotArea.x2,y2:x?this.plotArea.y2+o:this.plotArea.y2},clearTimeout(y._panTimerId),y._panTimerId=setTimeout(function(v,b,C,u){return function(){y._zoomPanToSelectedRegion(v,b,C,u,!0)&&(y._dispatchRangeEvent("rangeChanging","pan"),y.stockChart&&(y.stockChart._rangeEventParameter.type="rangeChanging",y.stockChart.dispatchEvent("rangeChanging",y.stockChart._rangeEventParameter,y.stockChart)),y.render(),y._dispatchRangeEvent("rangeChanged","pan"),y.stockChart&&(y.stockChart._rangeEventParameter.type="rangeChanged",y.stockChart.dispatchEvent("rangeChanged",y.stockChart._rangeEventParameter,y.stockChart)),y.dragStartPoint.x=r,y.dragStartPoint.y=d)}}(c.x1,c.y1,c.x2,c.y2),0);else if(this.zoomEnabled){this.resetOverlayedCanvas(),h=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.fillStyle="#A89896";var o=c?this.dragStartPoint.x:this.plotArea.x1,S=x?this.dragStartPoint.y:this.plotArea.y1,M=c?r-this.dragStartPoint.x:this.plotArea.x2-this.plotArea.x1,_=x?d-this.dragStartPoint.y:this.plotArea.y2-this.plotArea.y1;this.validateRegion(o,S,c?r:this.plotArea.x2-this.plotArea.x1,x?d:this.plotArea.y2-this.plotArea.y1,this.zoomType!=="xy").isValid&&(this.resetOverlayedCanvas(),this.overlaidCanvasCtx.fillStyle="#99B2B5"),this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillRect(o,S,M,_),this.overlaidCanvasCtx.globalAlpha=h}}}else if(this.toolTip.mouseMoveHandler(r,d),this.plotInfo.axisPlacement!=="none"){if(this.sessionVariables.crosshairShownByPixel=!0,this.axisX&&0<this.axisX.length)for(c=0;c<this.axisX.length;c++)this.axisX[c].crosshair&&this.axisX[c].crosshair.enabled&&this.axisX[c].renderCrosshair(r,d);if(this.axisX2&&0<this.axisX2.length)for(c=0;c<this.axisX2.length;c++)this.axisX2[c].crosshair&&this.axisX2[c].crosshair.enabled&&this.axisX2[c].renderCrosshair(r,d);if(this.axisY&&0<this.axisY.length)for(c=0;c<this.axisY.length;c++)this.axisY[c].crosshair&&this.axisY[c].crosshair.enabled&&this.axisY[c].renderCrosshair(r,d);if(this.axisY2&&0<this.axisY2.length)for(c=0;c<this.axisY2.length;c++)this.axisY2[c].crosshair&&this.axisY2[c].crosshair.enabled&&this.axisY2[c].renderCrosshair(r,d);if(this.axisX&&0<this.axisX.length)for(c=0;c<this.axisX.length;c++)this.axisX[c].crosshair&&this.axisX[c].crosshair.enabled&&this.axisX[c].crosshair.renderLabel();if(this.axisX2&&0<this.axisX2.length)for(c=0;c<this.axisX2.length;c++)this.axisX2[c].crosshair&&this.axisX2[c].crosshair.enabled&&this.axisX2[c].crosshair.renderLabel();if(this.axisY&&0<this.axisY.length)for(c=0;c<this.axisY.length;c++)this.axisY[c].crosshair&&this.axisY[c].crosshair.enabled&&this.axisY[c].crosshair.renderLabel();if(this.axisY2&&0<this.axisY2.length)for(c=0;c<this.axisY2.length;c++)this.axisY2[c].crosshair&&this.axisY2[c].crosshair.enabled&&this.axisY2[c].crosshair.renderLabel()}},O.prototype._zoomPanToSelectedRegion=function(r,d,h,o,c){if(r=this.validateRegion(r,d,h,o,c),d=r.axesWithValidRange,h=r.axesRanges,r.isValid)for(o=0;o<d.length;o++)c=h[o],d[o].setViewPortRange(c.val1,c.val2),this.syncCharts&&this.zoomType!="y"&&this.syncCharts(c.val1,c.val2),this.stockChart&&(this.stockChart._rangeEventParameter={stockChart:this.stockChart,source:"chart",index:this.stockChart.charts.indexOf(this),minimum:c.val1,maximum:c.val2});return r.isValid},O.prototype.validateRegion=function(r,d,h,o,c){c=c||!1;for(var x=0<=this.zoomType.indexOf("x"),y=0<=this.zoomType.indexOf("y"),S=!1,M=[],_=[],v=[],b=0;b<this._axes.length;b++)(this._axes[b].type==="axisX"&&x||this._axes[b].type==="axisY"&&y)&&_.push(this._axes[b]);for(y=0;y<_.length;y++){var b=_[y],x=!1,I=b.convertPixelToValue({x:r,y:d}),u=b.convertPixelToValue({x:h,y:o});if(I>u)var C=u,u=I,I=C;if(b.scaleBreaks)for(C=0;!x&&C<b.scaleBreaks._appliedBreaks.length;C++)x=b.scaleBreaks._appliedBreaks[C].startValue<=I&&b.scaleBreaks._appliedBreaks[C].endValue>=u;if(isFinite(b.dataInfo.minDiff)){if(C=b.getApparentDifference(I,u,null,!0),!(x||!(this.panEnabled&&b.scaleBreaks&&b.scaleBreaks._appliedBreaks.length)&&(b.logarithmic&&C<Math.pow(b.dataInfo.minDiff,3)||!b.logarithmic&&C<3*Math.abs(b.dataInfo.minDiff))||I<b.minimum||u>b.maximum))M.push(b),v.push({val1:I,val2:u}),S=!0;else if(!c){S=!1;break}}}return{isValid:S,axesWithValidRange:M,axesRanges:v}},O.prototype.preparePlotArea=function(){var r=this.plotArea;if(!X&&(0<r.x1||0<r.y1)&&r.ctx.translate(r.x1,r.y1),(this.axisX[0]||this.axisX2[0])&&(this.axisY[0]||this.axisY2[0])){var d=this.axisX[0]?this.axisX[0].lineCoordinates:this.axisX2[0].lineCoordinates;if(this.axisY&&0<this.axisY.length&&this.axisY[0]){var h=this.axisY[0];r.x1=d.x1<d.x2?d.x1:h.lineCoordinates.x1,r.y1=d.y1<h.lineCoordinates.y1?d.y1:h.lineCoordinates.y1,r.x2=d.x2>h.lineCoordinates.x2?d.x2:h.lineCoordinates.x2,r.y2=d.y1>h.lineCoordinates.y2?d.y1:h.lineCoordinates.y2,r.width=r.x2-r.x1,r.height=r.y2-r.y1}this.axisY2&&0<this.axisY2.length&&this.axisY2[0]&&(h=this.axisY2[0],r.x1=d.x1<d.x2?d.x1:h.lineCoordinates.x1,r.y1=d.y1<h.lineCoordinates.y1?d.y1:h.lineCoordinates.y1,r.x2=d.x2>h.lineCoordinates.x2?d.x2:h.lineCoordinates.x2,r.y2=d.y2>h.lineCoordinates.y2?d.y2:h.lineCoordinates.y2,r.width=r.x2-r.x1,r.height=r.y2-r.y1)}else d=this.layoutManager.getFreeSpace(),r.x1=d.x1,r.x2=d.x2,r.y1=d.y1,r.y2=d.y2,r.width=d.width,r.height=d.height;X||(r.canvas.width=r.width,r.canvas.height=r.height,r.canvas.style.left=r.x1+"px",r.canvas.style.top=r.y1+"px",(0<r.x1||0<r.y1)&&r.ctx.translate(-r.x1,-r.y1)),r.layoutManager=new we(r.x1,r.y1,r.x2,r.y2,2)},O.prototype.renderIndexLabels=function(r){var d=r||this.plotArea.ctx,h=this.plotArea,o=0,c=0,x=0,y=c=x=0,S=0,M=o=0,_=0;for(r=0;r<this._indexLabels.length;r++){var v=this._indexLabels[r],b=v.chartType.toLowerCase(),C,u,S=E("indexLabelFontColor",v.dataPoint,v.dataSeries),I=E("indexLabelFontSize",v.dataPoint,v.dataSeries),M=E("indexLabelFontFamily",v.dataPoint,v.dataSeries),_=E("indexLabelFontStyle",v.dataPoint,v.dataSeries);C=E("indexLabelFontWeight",v.dataPoint,v.dataSeries);var R=E("indexLabelBackgroundColor",v.dataPoint,v.dataSeries);u=E("indexLabelBorderColor",v.dataPoint,v.dataSeries);var x=E("indexLabelBorderThickness",v.dataPoint,v.dataSeries),c=E("indexLabelMaxWidth",v.dataPoint,v.dataSeries),y=E("indexLabelWrap",v.dataPoint,v.dataSeries),z=E("indexLabelLineDashType",v.dataPoint,v.dataSeries),A=E("indexLabelLineColor",v.dataPoint,v.dataSeries),Y=m(v.dataPoint.indexLabelLineThickness)?m(v.dataSeries.options.indexLabelLineThickness)?0:v.dataSeries.options.indexLabelLineThickness:v.dataPoint.indexLabelLineThickness,o=0<Y?Math.min(10,(this.plotInfo.axisPlacement==="normal"?this.plotArea.height:this.plotArea.width)<<0):0,V={percent:null,total:null},q=null;(0<=v.dataSeries.type.indexOf("stacked")||v.dataSeries.type==="pie"||v.dataSeries.type==="doughnut")&&(V=this.getPercentAndTotal(v.dataSeries,v.dataPoint)),(v.dataSeries.indexLabelFormatter||v.dataPoint.indexLabelFormatter)&&(q={chart:this,dataSeries:v.dataSeries,dataPoint:v.dataPoint,index:v.indexKeyword,total:V.total,percent:V.percent});var te=v.dataPoint.indexLabelFormatter?v.dataPoint.indexLabelFormatter(q):v.dataPoint.indexLabel?this.replaceKeywordsWithValue(v.dataPoint.indexLabel,v.dataPoint,v.dataSeries,null,v.indexKeyword):v.dataSeries.indexLabelFormatter?v.dataSeries.indexLabelFormatter(q):v.dataSeries.indexLabel?this.replaceKeywordsWithValue(v.dataSeries.indexLabel,v.dataPoint,v.dataSeries,null,v.indexKeyword):null;if(te!==null&&te!==""){var V=E("indexLabelPlacement",v.dataPoint,v.dataSeries),q=E("indexLabelOrientation",v.dataPoint,v.dataSeries),Q=E("indexLabelTextAlign",v.dataPoint,v.dataSeries),ve=v.direction,Me=v.dataSeries.axisX,le=v.dataSeries.axisY,ue=!1,R=new de(d,{x:0,y:0,maxWidth:c||.5*this.width,maxHeight:y?5*I:1.5*I,angle:q==="horizontal"?0:-90,text:te,padding:0,backgroundColor:R,borderColor:u,borderThickness:x,textAlign:Q,fontSize:I,fontFamily:M,fontWeight:C,fontColor:S,fontStyle:_,textBaseline:"middle"});if(R.measureText(),v.dataSeries.indexLabelMaxWidth=R.maxWidth,b==="stackedarea100"){if(v.point.x<h.x1||v.point.x>h.x2||v.point.y<h.y1-1||v.point.y>h.y2+1)continue}else if(b==="rangearea"||b==="rangesplinearea"){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||Math.max.apply(null,v.dataPoint.y)<le.viewportMinimum||Math.min.apply(null,v.dataPoint.y)>le.viewportMaximum)continue}else if(0<=b.indexOf("line")||0<=b.indexOf("area")||0<=b.indexOf("bubble")||0<=b.indexOf("scatter")){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||v.dataPoint.y<le.viewportMinimum||v.dataPoint.y>le.viewportMaximum)continue}else if(0<=b.indexOf("column")){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||(0<v.dataPoint.y.length?Math.max.apply(null,v.dataPoint.y):v.dataPoint.y)<le.viewportMinimum||(0<v.dataPoint.y.length?Math.max.apply(null,v.dataPoint.y):v.dataPoint.y)>le.viewportMaximum)continue}else if(b==="waterfall"||b==="error"&&!v.axisSwapped){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||v.bounds.y1>h.y2||v.bounds.y2<h.y1)continue}else if(0<=b.indexOf("bar")||b==="error"){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||v.bounds.x1>h.x2||v.bounds.x2<h.x1)continue}else if(b==="candlestick"||b==="ohlc"){if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum||Math.max.apply(null,v.dataPoint.y)<le.viewportMinimum||Math.min.apply(null,v.dataPoint.y)>le.viewportMaximum)continue}else if(v.dataPoint.x<Me.viewportMinimum||v.dataPoint.x>Me.viewportMaximum)continue;y=S=2,q==="horizontal"?(M=R.width,_=R.height):(_=R.width,M=R.height),this.plotInfo.axisPlacement==="normal"?(0<=b.indexOf("line")||0<=b.indexOf("area")?(V="auto",S=4):0<=b.indexOf("stacked")?V==="auto"&&(V="inside"):(b==="bubble"||b==="scatter")&&(V="inside"),C=v.point.x-M/2+(q==="horizontal"?0:R._lineHeight/2),V!=="inside"?(c=h.y1,x=h.y2,0<ve?(u=v.point.y+R._lineHeight/2-_-S-o,u<c&&(u=V==="auto"?Math.max(v.point.y,c)+R._lineHeight/2+S+o:c+R._lineHeight/2+S+o,ue=u+(q==="horizontal"?_-R._lineHeight/2:0)>v.point.y,!ue||0<=b.indexOf("line")||0<=b.indexOf("area")||(u-=o))):(u=v.point.y+R._lineHeight/2+S+o,u>x-_+R._lineHeight/2-S&&(u=V==="auto"?Math.min(v.point.y,x)+R._lineHeight/2-_-S-o:x+R._lineHeight/2-_-S-o,ue=u-(q==="horizontal"?R._lineHeight/2:_)<v.point.y,!ue||0<=b.indexOf("line")||0<=b.indexOf("area")||(u+=o)))):(Math.max(v.bounds.y1,h.y1),x=Math.min(v.bounds.y2,h.y2)-_+R._lineHeight/2,o=0<=b.indexOf("range")||b==="error"?0<ve?Math.max(v.bounds.y1,h.y1)+R._lineHeight/2+S:Math.min(v.bounds.y2,h.y2)+R._lineHeight/2-_-S:(Math.max(v.bounds.y1,h.y1)+Math.min(v.bounds.y2,h.y2))/2-_/2+R._lineHeight/2,0<ve?(u=o,(b==="bubble"||b==="scatter")&&(u=v.point.y-_/2+R._lineHeight/2,_>v.bounds.y2-v.bounds.y1&&(u-=_/2+S),0>u-R._lineHeight/2&&(u+=Math.abs(u-R._lineHeight/2)<=(v.bounds.y2-v.bounds.y1)/2+S?Math.abs(u-R._lineHeight/2):(v.bounds.y2-v.bounds.y1)/2+S))):(u=Math.min(v.point.y,o),u>x-_-S&&(b==="bubble"||b==="scatter")&&(u=Math.min(v.point.y+S,h.y2-_-S))),u=Math.min(u,x))):(0<=b.indexOf("line")||0<=b.indexOf("area")||0<=b.indexOf("scatter")?(V="auto",y=4):0<=b.indexOf("stacked")?V==="auto"&&(V="inside"):b==="bubble"&&(V="inside"),u=v.point.y+R._lineHeight/2-_/2,V!=="inside"?(x=h.x1,c=h.x2,0>ve?(C=v.point.x-M+(q==="horizontal"?0:R._lineHeight/2)-y-o,(q==="horizontal"?C:C-R._lineHeight/2)<x&&(C=V==="auto"?Math.max(v.point.x,x)+(q==="horizontal"?0:R._lineHeight/2)+S+o:x+(q==="horizontal"?0:R._lineHeight/2)+y,(ue=C+M-(q==="horizontal"?0:R._lineHeight/2)>v.point.x)&&(C-=o))):(C=v.point.x+(q==="horizontal"?0:R._lineHeight/2)+y+o,(q==="horizontal"?C:C-R._lineHeight/2)>c-M-y-o&&(C=V==="auto"?Math.min(v.point.x,c)-(q==="horizontal"?M:M-R._lineHeight/2)-y-o:c-M-y+(q==="horizontal"?0:R._lineHeight/2),(ue=C-(q==="horizontal"?0:R._lineHeight/2)<v.point.x)&&(C+=o)))):(x=Math.max(v.bounds.x1,h.x1),Math.min(v.bounds.x2,h.x2),o=0<=b.indexOf("range")||b==="error"?0>ve?Math.max(v.bounds.x1,h.x1):Math.min(v.bounds.x2,h.x2)-M-y+(q==="horizontal"?0:R._lineHeight/2):(Math.max(v.bounds.x1,h.x1)+Math.min(v.bounds.x2,h.x2))/2-M/2+(q==="horizontal"?0:R._lineHeight/2),C=0>ve?o:Math.min(v.point.x,o),C=Math.max(C,x+(q==="horizontal"?0:R._lineHeight/2+S)))),q==="vertical"&&(u+=_-R._lineHeight/2,0<="ohlc candlestick boxandwhisker column rangecolumn stackedcolumn stackedcolumn100 error".split(" ").indexOf(b)&&(ue=0<ve?u+(q==="horizontal"?_-R._lineHeight/2:0)>v.point.y:u-(q==="horizontal"?R._lineHeight/2:_)<v.point.y),b==="bubble"||b==="scatter")&&(C+=R._lineHeight/2-I/2),R.x=C,R.y=u,R.render(!0),Y&&V!=="inside"&&(0>b.indexOf("bar")&&(b!=="error"||!v.axisSwapped)&&v.point.x>h.x1&&v.point.x<h.x2||!ue)&&("ohlc candlestick boxandwhisker column rangecolumn stackedcolumn stackedcolumn100 error".split(" ").indexOf(b)===-1&&(b!=="error"||v.axisSwapped)&&v.point.y>h.y1&&v.point.y<h.y2||!ue)&&(d.lineWidth=Y,d.strokeStyle=A||"gray",d.setLineDash&&d.setLineDash(P(z,Y)),d.beginPath(),d.moveTo(v.point.x,v.point.y),0<=b.indexOf("bar")||b==="error"&&v.axisSwapped?d.lineTo(C+(0<v.direction?0:M)+(q==="vertical"?-R._lineHeight/2:0),u+(q==="vertical"?-_/2:_/2-R._lineHeight/2)):0<=b.indexOf("column")||b==="error"&&!v.axisSwapped?d.lineTo(C+M/2-(q==="horizontal"?0:R._lineHeight/2),u+(q==="vertical"?u-_<v.point.y?0:-_:(u-R._lineHeight/2<v.point.y?_:0)-R._lineHeight/2)):0<=b.indexOf("waterfall")?d.lineTo(C+M/2-(q==="horizontal"?0:R._lineHeight/2),q==="vertical"?0<ve&&u<v.point.y?u:0>ve&&u-_>v.point.y?u-_:v.point.y:0<ve&&u+_-R._lineHeight/2<v.point.y?u+_-R._lineHeight/2:0>ve&&u-R._lineHeight/2>v.point.y?u-R._lineHeight/2:v.point.y):d.lineTo(C+M/2-(q==="horizontal"?0:R._lineHeight/2),u+(q==="vertical"?u-_<v.point.y?0:-_:(u+_-R._lineHeight/2<v.point.y?_:0)-R._lineHeight/2)),d.stroke())}}for(d={source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0,startTimePercent:.7},r=0;r<this._indexLabels.length;r++)v=this._indexLabels[r],R=E("indexLabelBackgroundColor",v.dataPoint,v.dataSeries),v.dataSeries.indexLabelBackgroundColor=m(R)?X?"transparent":null:R;return d},O.prototype.renderLine=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx;h.save();var c=this.plotArea;h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip();for(var x=[],y,S=0;S<r.dataSeriesIndexes.length;S++){var M=r.dataSeriesIndexes[S],_=this.data[M];h.lineWidth=_.lineThickness;var v=_.dataPoints,b="solid";if(h.setLineDash){var C=P(_.nullDataLineDashType,_.lineThickness),b=_.lineDashType,u=P(b,_.lineThickness);h.setLineDash(u)}var I=_.id;this._eventManager.objectMap[I]={objectType:"dataSeries",dataSeriesIndex:M},I=f(I),o.strokeStyle=I,o.lineWidth=0<_.lineThickness?Math.max(_.lineThickness,4):0;var I=_._colorSet,R=I=_.lineColor=_.options.lineColor?_.options.lineColor:I[0];h.strokeStyle=I;var z=!0,A=0,Y,V;if(h.beginPath(),0<v.length){for(var q=!1,A=0;A<v.length;A++)if(Y=v[A].x.getTime?v[A].x.getTime():v[A].x,!(Y<r.axisX.dataInfo.viewPortMin||Y>r.axisX.dataInfo.viewPortMax&&(!_.connectNullData||!q)))if(typeof v[A].y!="number")0<A&&!(_.connectNullData||q||z)&&(h.stroke(),X&&o.stroke()),q=!0;else{Y=r.axisX.convertValueToPixel(Y),V=r.axisY.convertValueToPixel(v[A].y);var te=_.dataPointIds[A];if(this._eventManager.objectMap[te]={id:te,objectType:"dataPoint",dataSeriesIndex:M,dataPointIndex:A,x1:Y,y1:V},z||q?(!z&&_.connectNullData?(h.setLineDash&&(_.options.nullDataLineDashType||b===_.lineDashType&&_.lineDashType!==_.nullDataLineDashType)&&(h.stroke(),h.beginPath(),h.moveTo(y.x,y.y),b=_.nullDataLineDashType,h.setLineDash(C)),h.lineTo(Y,V),X&&o.lineTo(Y,V)):(h.beginPath(),h.moveTo(Y,V),X&&(o.beginPath(),o.moveTo(Y,V))),q=z=!1):(h.lineTo(Y,V),X&&o.lineTo(Y,V),A%500==0&&(h.stroke(),h.beginPath(),h.moveTo(Y,V),X&&(o.stroke(),o.beginPath(),o.moveTo(Y,V)))),y={x:Y,y:V},A<v.length-1&&(R!==(v[A].lineColor||I)||b!==(v[A].lineDashType||_.lineDashType))&&(h.stroke(),h.beginPath(),h.moveTo(Y,V),R=v[A].lineColor||I,h.strokeStyle=R,h.setLineDash&&(v[A].lineDashType?(b=v[A].lineDashType,h.setLineDash(P(b,_.lineThickness))):(b=_.lineDashType,h.setLineDash(u)))),v[A].markerSize!==0&&(0<v[A].markerSize||0<_.markerSize)){var Q=_.getMarkerProperties(A,Y,V,h);x.push(Q),te=f(te),X&&x.push({x:Y,y:V,ctx:o,type:Q.type,size:Q.size,color:te,borderColor:te,borderThickness:Q.borderThickness})}(v[A].indexLabel||_.indexLabel||v[A].indexLabelFormatter||_.indexLabelFormatter)&&this._indexLabels.push({chartType:"line",dataPoint:v[A],dataSeries:_,point:{x:Y,y:V},direction:0>v[A].y===r.axisY.reversed?1:-1,color:I})}h.stroke(),X&&o.stroke()}}return Ve.drawMarkers(x),X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),o.beginPath()),h.restore(),h.beginPath(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},O.prototype.renderStepLine=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx;h.save();var c=this.plotArea;h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip();for(var x=[],y,S=0;S<r.dataSeriesIndexes.length;S++){var M=r.dataSeriesIndexes[S],_=this.data[M];h.lineWidth=_.lineThickness;var v=_.dataPoints,b="solid";if(h.setLineDash){var C=P(_.nullDataLineDashType,_.lineThickness),b=_.lineDashType,u=P(b,_.lineThickness);h.setLineDash(u)}var I=_.id;this._eventManager.objectMap[I]={objectType:"dataSeries",dataSeriesIndex:M},I=f(I),o.strokeStyle=I,o.lineWidth=0<_.lineThickness?Math.max(_.lineThickness,4):0;var I=_._colorSet,R=I=_.lineColor=_.options.lineColor?_.options.lineColor:I[0];h.strokeStyle=I;var z=!0,A=0,Y,V;if(h.beginPath(),0<v.length){for(var q=!1,A=0;A<v.length;A++)if(Y=v[A].getTime?v[A].x.getTime():v[A].x,!(Y<r.axisX.dataInfo.viewPortMin||Y>r.axisX.dataInfo.viewPortMax&&(!_.connectNullData||!q)))if(typeof v[A].y!="number")0<A&&!(_.connectNullData||q||z)&&(h.stroke(),X&&o.stroke()),q=!0;else{var te=V;Y=r.axisX.convertValueToPixel(Y),V=r.axisY.convertValueToPixel(v[A].y);var Q=_.dataPointIds[A];this._eventManager.objectMap[Q]={id:Q,objectType:"dataPoint",dataSeriesIndex:M,dataPointIndex:A,x1:Y,y1:V},z||q?(!z&&_.connectNullData?(h.setLineDash&&(_.options.nullDataLineDashType||b===_.lineDashType&&_.lineDashType!==_.nullDataLineDashType)&&(h.stroke(),h.beginPath(),h.moveTo(y.x,y.y),b=_.nullDataLineDashType,h.setLineDash(C)),h.lineTo(Y,te),h.lineTo(Y,V),X&&(o.lineTo(Y,te),o.lineTo(Y,V))):(h.beginPath(),h.moveTo(Y,V),X&&(o.beginPath(),o.moveTo(Y,V))),q=z=!1):(h.lineTo(Y,te),X&&o.lineTo(Y,te),h.lineTo(Y,V),X&&o.lineTo(Y,V),A%500==0&&(h.stroke(),h.beginPath(),h.moveTo(Y,V),X&&(o.stroke(),o.beginPath(),o.moveTo(Y,V)))),y={x:Y,y:V},A<v.length-1&&(R!==(v[A].lineColor||I)||b!==(v[A].lineDashType||_.lineDashType))&&(h.stroke(),h.beginPath(),h.moveTo(Y,V),R=v[A].lineColor||I,h.strokeStyle=R,h.setLineDash&&(v[A].lineDashType?(b=v[A].lineDashType,h.setLineDash(P(b,_.lineThickness))):(b=_.lineDashType,h.setLineDash(u)))),v[A].markerSize!==0&&(0<v[A].markerSize||0<_.markerSize)&&(te=_.getMarkerProperties(A,Y,V,h),x.push(te),Q=f(Q),X&&x.push({x:Y,y:V,ctx:o,type:te.type,size:te.size,color:Q,borderColor:Q,borderThickness:te.borderThickness})),(v[A].indexLabel||_.indexLabel||v[A].indexLabelFormatter||_.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepLine",dataPoint:v[A],dataSeries:_,point:{x:Y,y:V},direction:0>v[A].y===r.axisY.reversed?1:-1,color:I})}h.stroke(),X&&o.stroke()}}return Ve.drawMarkers(x),X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),o.beginPath()),h.restore(),h.beginPath(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},O.prototype.renderSpline=function(r){function d(Q){if(Q=K(Q,2),0<Q.length){o.beginPath(),X&&c.beginPath(),o.moveTo(Q[0].x,Q[0].y),Q[0].newStrokeStyle&&(o.strokeStyle=Q[0].newStrokeStyle),Q[0].newLineDashArray&&o.setLineDash(Q[0].newLineDashArray),X&&c.moveTo(Q[0].x,Q[0].y);for(var ve=0;ve<Q.length-3;ve+=3)o.bezierCurveTo(Q[ve+1].x,Q[ve+1].y,Q[ve+2].x,Q[ve+2].y,Q[ve+3].x,Q[ve+3].y),X&&c.bezierCurveTo(Q[ve+1].x,Q[ve+1].y,Q[ve+2].x,Q[ve+2].y,Q[ve+3].x,Q[ve+3].y),(0<ve&&ve%3e3===0||Q[ve+3].newStrokeStyle||Q[ve+3].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(Q[ve+3].x,Q[ve+3].y),Q[ve+3].newStrokeStyle&&(o.strokeStyle=Q[ve+3].newStrokeStyle),Q[ve+3].newLineDashArray&&o.setLineDash(Q[ve+3].newLineDashArray),X&&(c.stroke(),c.beginPath(),c.moveTo(Q[ve+3].x,Q[ve+3].y)));o.stroke(),X&&c.stroke()}}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx;o.save();var x=this.plotArea;o.beginPath(),o.rect(x.x1,x.y1,x.width,x.height),o.clip();for(var y=[],S=0;S<r.dataSeriesIndexes.length;S++){var M=r.dataSeriesIndexes[S],_=this.data[M];o.lineWidth=_.lineThickness;var v=_.dataPoints,b="solid";if(o.setLineDash){var C=P(_.nullDataLineDashType,_.lineThickness),b=_.lineDashType,u=P(b,_.lineThickness);o.setLineDash(u)}var I=_.id;this._eventManager.objectMap[I]={objectType:"dataSeries",dataSeriesIndex:M},I=f(I),c.strokeStyle=I,c.lineWidth=0<_.lineThickness?Math.max(_.lineThickness,4):0;var I=_._colorSet,R=I=_.lineColor=_.options.lineColor?_.options.lineColor:I[0];o.strokeStyle=I;var z=0,A,Y,V=[];if(o.beginPath(),0<v.length){for(Y=!1,z=0;z<v.length;z++)if(A=v[z].getTime?v[z].x.getTime():v[z].x,!(A<r.axisX.dataInfo.viewPortMin||A>r.axisX.dataInfo.viewPortMax&&(!_.connectNullData||!Y)))if(typeof v[z].y!="number")0<z&&!Y&&(_.connectNullData?o.setLineDash&&0<V.length&&(_.options.nullDataLineDashType||!v[z-1].lineDashType)&&(V[V.length-1].newLineDashArray=C,b=_.nullDataLineDashType):(d(V),V=[])),Y=!0;else{A=r.axisX.convertValueToPixel(A),Y=r.axisY.convertValueToPixel(v[z].y);var q=_.dataPointIds[z];if(this._eventManager.objectMap[q]={id:q,objectType:"dataPoint",dataSeriesIndex:M,dataPointIndex:z,x1:A,y1:Y},V[V.length]={x:A,y:Y},z<v.length-1&&(R!==(v[z].lineColor||I)||b!==(v[z].lineDashType||_.lineDashType))&&(R=v[z].lineColor||I,V[V.length-1].newStrokeStyle=R,o.setLineDash&&(v[z].lineDashType?(b=v[z].lineDashType,V[V.length-1].newLineDashArray=P(b,_.lineThickness)):(b=_.lineDashType,V[V.length-1].newLineDashArray=u))),v[z].markerSize!==0&&(0<v[z].markerSize||0<_.markerSize)){var te=_.getMarkerProperties(z,A,Y,o);y.push(te),q=f(q),X&&y.push({x:A,y:Y,ctx:c,type:te.type,size:te.size,color:q,borderColor:q,borderThickness:te.borderThickness})}(v[z].indexLabel||_.indexLabel||v[z].indexLabelFormatter||_.indexLabelFormatter)&&this._indexLabels.push({chartType:"spline",dataPoint:v[z],dataSeries:_,point:{x:A,y:Y},direction:0>v[z].y===r.axisY.reversed?1:-1,color:I}),Y=!1}}d(V)}return Ve.drawMarkers(y),X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(x.x1,x.y1,x.width,x.height),c.beginPath()),o.restore(),o.beginPath(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},O.prototype.renderColumn=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,_=0,x,y,S,M=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),_=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,v=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/r.plotType.totalDataSeries))<<0,b=r.axisX.dataInfo.minDiff;for(isFinite(b)||(b=.3*Math.abs(r.axisX.range)),b=this.dataPointWidth=this.options.dataPointWidth?this.dataPointWidth:.9*(c.width*(r.axisX.logarithmic?Math.log(b)/Math.log(r.axisX.range):Math.abs(b)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&_>v&&(_=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,v)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&v<_&&(v=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,_)),b<_&&(b=_),b>v&&(b=v),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),v=0;v<r.dataSeriesIndexes.length;v++){var C=r.dataSeriesIndexes[v],u=this.data[C],I=u.dataPoints;if(0<I.length){for(var R=!!(5<b&&u.bevelEnabled),_=0;_<I.length;_++)if(I[_].getTime?S=I[_].x.getTime():S=I[_].x,!(S<r.axisX.dataInfo.viewPortMin||S>r.axisX.dataInfo.viewPortMax)&&typeof I[_].y=="number"){x=r.axisX.convertValueToPixel(S),y=r.axisY.convertValueToPixel(I[_].y),x=r.axisX.reversed?x+r.plotType.totalDataSeries*b/2-(r.previousDataSeriesCount+v)*b<<0:x-r.plotType.totalDataSeries*b/2+(r.previousDataSeriesCount+v)*b<<0;var z=r.axisX.reversed?x-b<<0:x+b<<0,A;0<=I[_].y?A=M:(A=y,y=M),y>A&&(o=y,y=A,A=o),o=I[_].color?I[_].color:u._colorSet[_%u._colorSet.length],kt(h,r.axisX.reversed?z:x,y,r.axisX.reversed?x:z,A,o,0,null,R&&(r.axisY.reversed?0>I[_].y:0<=I[_].y),(r.axisY.reversed?0<=I[_].y:0>I[_].y)&&R,!1,!1,u.fillOpacity),o=u.dataPointIds[_],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:_,x1:x,y1:y,x2:z,y2:A},o=f(o),X&&kt(this._eventManager.ghostCtx,r.axisX.reversed?z:x,y,r.axisX.reversed?x:z,A,o,0,null,!1,!1),(I[_].indexLabel||u.indexLabel||I[_].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"column",dataPoint:I[_],dataSeries:u,point:{x:x+(z-x)/2,y:0>I[_].y===r.axisY.reversed?y:A},direction:0>I[_].y===r.axisY.reversed?1:-1,bounds:{x1:x,y1:Math.min(y,A),x2:z,y2:Math.max(y,A)},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.yScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:M<r.axisY.bounds.y1?r.axisY.bounds.y1:M>r.axisY.bounds.y2?r.axisY.bounds.y2:M}}},O.prototype.renderStackedColumn=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,x=[],y=[],S=[],M=[],C=0,_,v,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0,I=r.axisX.dataInfo.minDiff;for(isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.9*(c.width*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),u=0;u<r.dataSeriesIndexes.length;u++){var R=r.dataSeriesIndexes[u],z=this.data[R],A=z.dataPoints;if(0<A.length){var Y=!!(5<I&&z.bevelEnabled);for(h.strokeStyle="#4572A7 ",C=0;C<A.length;C++)if(o=A[C].x.getTime?A[C].x.getTime():A[C].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof A[C].y=="number"){_=r.axisX.convertValueToPixel(o),_=_-r.plotType.plotUnits.length*I/2+r.index*I<<0;var V=_+I<<0,q;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<A[C].y)S[o]=A[C].y+(S[o]?S[o]:0),0<S[o]&&(v=r.axisY.convertValueToPixel(S[o]),q=typeof x[o]<"u"?x[o]:b,x[o]=v);else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=A[C].y)M[o]=A[C].y+(M[o]?M[o]:0),q=r.axisY.convertValueToPixel(M[o]),v=typeof y[o]<"u"?y[o]:b,y[o]=q;else if(v=r.axisY.convertValueToPixel(A[C].y),0<=A[C].y){var te=typeof x[o]<"u"?x[o]:0;v-=te,q=b-te,x[o]=te+(q-v)}else te=y[o]?y[o]:0,q=v+te,v=b+te,y[o]=te+(q-v);o=A[C].color?A[C].color:z._colorSet[C%z._colorSet.length],kt(h,_,r.axisY.reversed?q:v,V,r.axisY.reversed?v:q,o,0,null,Y&&(r.axisY.reversed?0>A[C].y:0<=A[C].y),(r.axisY.reversed?0<=A[C].y:0>A[C].y)&&Y,!1,!1,z.fillOpacity),o=z.dataPointIds[C],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:R,dataPointIndex:C,x1:_,y1:v,x2:V,y2:q},o=f(o),X&&kt(this._eventManager.ghostCtx,_,v,V,q,o,0,null,!1,!1),(A[C].indexLabel||z.indexLabel||A[C].indexLabelFormatter||z.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:A[C],dataSeries:z,point:{x:_+(V-_)/2,y:0<=A[C].y?v:q},direction:0>A[C].y===r.axisY.reversed?1:-1,bounds:{x1:_,y1:Math.min(v,q),x2:V,y2:Math.max(v,q)},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.yScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.y1?r.axisY.bounds.y1:b>r.axisY.bounds.y2?r.axisY.bounds.y2:b}}},O.prototype.renderStackedColumn100=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,x=[],y=[],S=[],M=[],C=0,_,v,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0,I=r.axisX.dataInfo.minDiff;for(isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.9*(c.width*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),u=0;u<r.dataSeriesIndexes.length;u++){var R=r.dataSeriesIndexes[u],z=this.data[R],A=z.dataPoints;if(0<A.length){for(var Y=!!(5<I&&z.bevelEnabled),C=0;C<A.length;C++)if(o=A[C].x.getTime?A[C].x.getTime():A[C].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof A[C].y=="number"){_=r.axisX.convertValueToPixel(o),v=r.dataPointYSums[o]!==0?100*(A[C].y/r.dataPointYSums[o]):0,_=_-r.plotType.plotUnits.length*I/2+r.index*I<<0;var V=_+I<<0,q;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<A[C].y){if(S[o]=v+(typeof S[o]<"u"?S[o]:0),0>=S[o])continue;v=r.axisY.convertValueToPixel(S[o]),q=x[o]?x[o]:b,x[o]=v}else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=A[C].y)M[o]=v+(typeof M[o]<"u"?M[o]:0),q=r.axisY.convertValueToPixel(M[o]),v=y[o]?y[o]:b,y[o]=q;else if(v=r.axisY.convertValueToPixel(v),0<=A[C].y){var te=typeof x[o]<"u"?x[o]:0;v-=te,q=b-te,r.dataSeriesIndexes.length-1===u&&1>=Math.abs(c.y1-v)&&(v=c.y1),x[o]=te+(q-v)}else te=typeof y[o]<"u"?y[o]:0,q=v+te,v=b+te,r.dataSeriesIndexes.length-1===u&&1>=Math.abs(c.y2-q)&&(q=c.y2),y[o]=te+(q-v);o=A[C].color?A[C].color:z._colorSet[C%z._colorSet.length],kt(h,_,r.axisY.reversed?q:v,V,r.axisY.reversed?v:q,o,0,null,Y&&(r.axisY.reversed?0>A[C].y:0<=A[C].y),(r.axisY.reversed?0<=A[C].y:0>A[C].y)&&Y,!1,!1,z.fillOpacity),o=z.dataPointIds[C],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:R,dataPointIndex:C,x1:_,y1:v,x2:V,y2:q},o=f(o),X&&kt(this._eventManager.ghostCtx,_,v,V,q,o,0,null,!1,!1),(A[C].indexLabel||z.indexLabel||A[C].indexLabelFormatter||z.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:A[C],dataSeries:z,point:{x:_+(V-_)/2,y:0<=A[C].y?v:q},direction:0>A[C].y===r.axisY.reversed?1:-1,bounds:{x1:_,y1:Math.min(v,q),x2:V,y2:Math.max(v,q)},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.yScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.y1?r.axisY.bounds.y1:b>r.axisY.bounds.y2?r.axisY.bounds.y2:b}}},O.prototype.renderBar=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,_=0,x,y,S,M=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),_=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,v=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/r.plotType.totalDataSeries))<<0,b=r.axisX.dataInfo.minDiff;for(isFinite(b)||(b=.3*Math.abs(r.axisX.range)),b=this.options.dataPointWidth?this.dataPointWidth:.9*(c.height*(r.axisX.logarithmic?Math.log(b)/Math.log(r.axisX.range):Math.abs(b)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&_>v&&(_=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,v)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&v<_&&(v=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,_)),b<_&&(b=_),b>v&&(b=v),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),v=0;v<r.dataSeriesIndexes.length;v++){var C=r.dataSeriesIndexes[v],u=this.data[C],I=u.dataPoints;if(0<I.length){var R=!!(5<b&&u.bevelEnabled);for(h.strokeStyle="#4572A7 ",_=0;_<I.length;_++)if(I[_].getTime?S=I[_].x.getTime():S=I[_].x,!(S<r.axisX.dataInfo.viewPortMin||S>r.axisX.dataInfo.viewPortMax)&&typeof I[_].y=="number"){y=r.axisX.convertValueToPixel(S),x=r.axisY.convertValueToPixel(I[_].y),y=r.axisX.reversed?y+r.plotType.totalDataSeries*b/2-(r.previousDataSeriesCount+v)*b<<0:y-r.plotType.totalDataSeries*b/2+(r.previousDataSeriesCount+v)*b<<0;var z=r.axisX.reversed?y-b<<0:y+b<<0,A;0<=I[_].y?A=M:(A=x,x=M),o=I[_].color?I[_].color:u._colorSet[_%u._colorSet.length],kt(h,r.axisY.reversed?x:A,r.axisX.reversed?z:y,r.axisY.reversed?A:x,r.axisX.reversed?y:z,o,0,null,R,!1,!1,!1,u.fillOpacity),o=u.dataPointIds[_],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:_,x1:A,y1:y,x2:x,y2:z},o=f(o),X&&kt(this._eventManager.ghostCtx,A,r.axisX.reversed?z:y,x,r.axisX.reversed?y:z,o,0,null,!1,!1),(I[_].indexLabel||u.indexLabel||I[_].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"bar",dataPoint:I[_],dataSeries:u,point:{x:0<=I[_].y?x:A,y:y+(z-y)/2},direction:0>I[_].y===r.axisY.reversed?1:-1,bounds:{x1:Math.min(A,x),y1:y,x2:Math.max(A,x),y2:z},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.xScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:M<r.axisY.bounds.x1?r.axisY.bounds.x1:M>r.axisY.bounds.x2?r.axisY.bounds.x2:M}}},O.prototype.renderStackedBar=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,x=[],y=[],S=[],M=[],C=0,_,v,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0,I=r.axisX.dataInfo.minDiff;for(isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.9*(c.height*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),u=0;u<r.dataSeriesIndexes.length;u++){var R=r.dataSeriesIndexes[u],z=this.data[R],A=z.dataPoints;if(0<A.length){var Y=!!(5<I&&z.bevelEnabled);for(h.strokeStyle="#4572A7 ",C=0;C<A.length;C++)if(o=A[C].x.getTime?A[C].x.getTime():A[C].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof A[C].y=="number"){v=r.axisX.convertValueToPixel(o),v=v-r.plotType.plotUnits.length*I/2+r.index*I<<0;var V=v+I<<0,q;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<A[C].y)S[o]=A[C].y+(S[o]?S[o]:0),0<S[o]&&(q=x[o]?x[o]:b,x[o]=_=r.axisY.convertValueToPixel(S[o]));else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=A[C].y)M[o]=A[C].y+(M[o]?M[o]:0),_=y[o]?y[o]:b,y[o]=q=r.axisY.convertValueToPixel(M[o]);else if(_=r.axisY.convertValueToPixel(A[C].y),0<=A[C].y){var te=x[o]?x[o]:0;q=b+te,_+=te,x[o]=te+(_-q)}else te=y[o]?y[o]:0,q=_-te,_=b-te,y[o]=te+(_-q);o=A[C].color?A[C].color:z._colorSet[C%z._colorSet.length],kt(h,r.axisY.reversed?_:q,v,r.axisY.reversed?q:_,V,o,0,null,Y,!1,!1,!1,z.fillOpacity),o=z.dataPointIds[C],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:R,dataPointIndex:C,x1:q,y1:v,x2:_,y2:V},o=f(o),X&&kt(this._eventManager.ghostCtx,q,v,_,V,o,0,null,!1,!1),(A[C].indexLabel||z.indexLabel||A[C].indexLabelFormatter||z.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar",dataPoint:A[C],dataSeries:z,point:{x:0<=A[C].y?_:q,y:v+(V-v)/2},direction:0>A[C].y===r.axisY.reversed?1:-1,bounds:{x1:Math.min(q,_),y1:v,x2:Math.max(q,_),y2:V},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.xScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.x1?r.axisY.bounds.x1:b>r.axisY.bounds.x2?r.axisY.bounds.x2:b}}},O.prototype.renderStackedBar100=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,x=[],y=[],S=[],M=[],C=0,_,v,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0,I=r.axisX.dataInfo.minDiff;for(isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.9*(c.height*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),u=0;u<r.dataSeriesIndexes.length;u++){var R=r.dataSeriesIndexes[u],z=this.data[R],A=z.dataPoints;if(0<A.length){var Y=!!(5<I&&z.bevelEnabled);for(h.strokeStyle="#4572A7 ",C=0;C<A.length;C++)if(o=A[C].x.getTime?A[C].x.getTime():A[C].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof A[C].y=="number"){v=r.axisX.convertValueToPixel(o);var V;V=r.dataPointYSums[o]!==0?100*(A[C].y/r.dataPointYSums[o]):0,v=v-r.plotType.plotUnits.length*I/2+r.index*I<<0;var q=v+I<<0;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<A[C].y){if(S[o]=V+(S[o]?S[o]:0),0>=S[o])continue;V=x[o]?x[o]:b,x[o]=_=r.axisY.convertValueToPixel(S[o])}else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=A[C].y)M[o]=V+(M[o]?M[o]:0),_=y[o]?y[o]:b,y[o]=V=r.axisY.convertValueToPixel(M[o]);else if(_=r.axisY.convertValueToPixel(V),0<=A[C].y){var te=x[o]?x[o]:0;V=b+te,_+=te,r.dataSeriesIndexes.length-1===u&&1>=Math.abs(c.x2-_)&&(_=c.x2),x[o]=te+(_-V)}else te=y[o]?y[o]:0,V=_-te,_=b-te,r.dataSeriesIndexes.length-1===u&&1>=Math.abs(c.x1-V)&&(V=c.x1),y[o]=te+(_-V);o=A[C].color?A[C].color:z._colorSet[C%z._colorSet.length],kt(h,r.axisY.reversed?_:V,v,r.axisY.reversed?V:_,q,o,0,null,Y,!1,!1,!1,z.fillOpacity),o=z.dataPointIds[C],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:R,dataPointIndex:C,x1:V,y1:v,x2:_,y2:q},o=f(o),X&&kt(this._eventManager.ghostCtx,V,v,_,q,o,0,null,!1,!1),(A[C].indexLabel||z.indexLabel||A[C].indexLabelFormatter||z.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar100",dataPoint:A[C],dataSeries:z,point:{x:0<=A[C].y?_:V,y:v+(q-v)/2},direction:0>A[C].y===r.axisY.reversed?1:-1,bounds:{x1:Math.min(V,_),y1:v,x2:Math.max(V,_),y2:q},color:o})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.xScaleAnimation,easingFunction:xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.x1?r.axisY.bounds.x1:b>r.axisY.bounds.x2?r.axisY.bounds.x2:b}}},O.prototype.renderArea=function(r){var d,h;function o(){te&&(0<u.lineThickness&&x.stroke(),r.axisY.logarithmic||0>=r.axisY.viewportMinimum&&0<=r.axisY.viewportMaximum?q=V:0>r.axisY.viewportMaximum?q=S.y1:0<r.axisY.viewportMinimum&&(q=V),x.lineTo(z,q),x.lineTo(te.x,q),x.closePath(),x.globalAlpha=u.fillOpacity,x.fill(),x.globalAlpha=1,X&&(y.lineTo(z,q),y.lineTo(te.x,q),y.closePath(),y.fill()),x.beginPath(),x.moveTo(z,A),y.beginPath(),y.moveTo(z,A),te={x:z,y:A})}var c=r.targetCanvasCtx||this.plotArea.ctx,x=X?this._preRenderCtx:c;if(!(0>=r.dataSeriesIndexes.length)){var y=this._eventManager.ghostCtx,S=r.axisY.lineCoordinates,M=[],_=this.plotArea,v;x.save(),X&&y.save(),x.beginPath(),x.rect(_.x1,_.y1,_.width,_.height),x.clip(),X&&(y.beginPath(),y.rect(_.x1,_.y1,_.width,_.height),y.clip());for(var b=0;b<r.dataSeriesIndexes.length;b++){var C=r.dataSeriesIndexes[b],u=this.data[C],I=u.dataPoints,M=u.id;this._eventManager.objectMap[M]={objectType:"dataSeries",dataSeriesIndex:C},M=f(M),y.fillStyle=M,M=[],d=!0;var R=0,z,A,Y,V=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),q,te=null;if(0<I.length){var Q=u._colorSet[R%u._colorSet.length],ve=u.lineColor=u.options.lineColor||Q,Me=ve;if(x.fillStyle=Q,x.strokeStyle=ve,x.lineWidth=u.lineThickness,h="solid",x.setLineDash){var le=P(u.nullDataLineDashType,u.lineThickness);h=u.lineDashType;var ue=P(h,u.lineThickness);x.setLineDash(ue)}for(var ce=!0;R<I.length;R++)if(Y=I[R].x.getTime?I[R].x.getTime():I[R].x,!(Y<r.axisX.dataInfo.viewPortMin||Y>r.axisX.dataInfo.viewPortMax&&(!u.connectNullData||!ce)))if(typeof I[R].y!="number")u.connectNullData||ce||d||o(),ce=!0;else{z=r.axisX.convertValueToPixel(Y),A=r.axisY.convertValueToPixel(I[R].y),d||ce?(!d&&u.connectNullData?(x.setLineDash&&(u.options.nullDataLineDashType||h===u.lineDashType&&u.lineDashType!==u.nullDataLineDashType)&&(d=z,h=A,z=v.x,A=v.y,o(),x.moveTo(v.x,v.y),z=d,A=h,te=v,h=u.nullDataLineDashType,x.setLineDash(le)),x.lineTo(z,A),X&&y.lineTo(z,A)):(x.beginPath(),x.moveTo(z,A),X&&(y.beginPath(),y.moveTo(z,A)),te={x:z,y:A}),ce=d=!1):(x.lineTo(z,A),X&&y.lineTo(z,A),R%250==0&&o()),v={x:z,y:A},R<I.length-1&&(Me!==(I[R].lineColor||ve)||h!==(I[R].lineDashType||u.lineDashType))&&(o(),Me=I[R].lineColor||ve,x.strokeStyle=Me,x.setLineDash&&(I[R].lineDashType?(h=I[R].lineDashType,x.setLineDash(P(h,u.lineThickness))):(h=u.lineDashType,x.setLineDash(ue))));var oe=u.dataPointIds[R];this._eventManager.objectMap[oe]={id:oe,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:R,x1:z,y1:A},I[R].markerSize!==0&&(0<I[R].markerSize||0<u.markerSize)&&(Y=u.getMarkerProperties(R,z,A,x),M.push(Y),oe=f(oe),X&&M.push({x:z,y:A,ctx:y,type:Y.type,size:Y.size,color:oe,borderColor:oe,borderThickness:Y.borderThickness})),(I[R].indexLabel||u.indexLabel||I[R].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"area",dataPoint:I[R],dataSeries:u,point:{x:z,y:A},direction:0>I[R].y===r.axisY.reversed?1:-1,color:Q})}o(),Ve.drawMarkers(M)}}return X&&(c.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&x.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&x.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.clearRect(_.x1,_.y1,_.width,_.height),this._eventManager.ghostCtx.restore()),x.restore(),{source:c,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},O.prototype.renderSplineArea=function(r){function d(){var ce=K(Y,2);if(0<ce.length){if(0<v.lineThickness){o.beginPath(),o.moveTo(ce[0].x,ce[0].y),ce[0].newStrokeStyle&&(o.strokeStyle=ce[0].newStrokeStyle),ce[0].newLineDashArray&&o.setLineDash(ce[0].newLineDashArray);for(var oe=0;oe<ce.length-3;oe+=3)o.bezierCurveTo(ce[oe+1].x,ce[oe+1].y,ce[oe+2].x,ce[oe+2].y,ce[oe+3].x,ce[oe+3].y),X&&c.bezierCurveTo(ce[oe+1].x,ce[oe+1].y,ce[oe+2].x,ce[oe+2].y,ce[oe+3].x,ce[oe+3].y),(ce[oe+3].newStrokeStyle||ce[oe+3].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(ce[oe+3].x,ce[oe+3].y),ce[oe+3].newStrokeStyle&&(o.strokeStyle=ce[oe+3].newStrokeStyle),ce[oe+3].newLineDashArray&&o.setLineDash(ce[oe+3].newLineDashArray));o.stroke()}for(o.beginPath(),o.moveTo(ce[0].x,ce[0].y),X&&(c.beginPath(),c.moveTo(ce[0].x,ce[0].y)),oe=0;oe<ce.length-3;oe+=3)o.bezierCurveTo(ce[oe+1].x,ce[oe+1].y,ce[oe+2].x,ce[oe+2].y,ce[oe+3].x,ce[oe+3].y),X&&c.bezierCurveTo(ce[oe+1].x,ce[oe+1].y,ce[oe+2].x,ce[oe+2].y,ce[oe+3].x,ce[oe+3].y);r.axisY.logarithmic||0>=r.axisY.viewportMinimum&&0<=r.axisY.viewportMaximum?z=R:0>r.axisY.viewportMaximum?z=x.y1:0<r.axisY.viewportMinimum&&(z=R),A={x:ce[0].x,y:ce[0].y},o.lineTo(ce[ce.length-1].x,z),o.lineTo(A.x,z),o.closePath(),o.globalAlpha=v.fillOpacity,o.fill(),o.globalAlpha=1,X&&(c.lineTo(ce[ce.length-1].x,z),c.lineTo(A.x,z),c.closePath(),c.fill())}}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx,x=r.axisY.lineCoordinates,y=[],S=this.plotArea;o.save(),X&&c.save(),o.beginPath(),o.rect(S.x1,S.y1,S.width,S.height),o.clip(),X&&(c.beginPath(),c.rect(S.x1,S.y1,S.width,S.height),c.clip());for(var M=0;M<r.dataSeriesIndexes.length;M++){var _=r.dataSeriesIndexes[M],v=this.data[_],b=v.dataPoints,y=v.id;this._eventManager.objectMap[y]={objectType:"dataSeries",dataSeriesIndex:_},y=f(y),c.fillStyle=y;var y=[],C=0,u,I,R=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),z,A=null,Y=[];if(0<b.length){var V=v._colorSet[C%v._colorSet.length],q=v.lineColor=v.options.lineColor||V,te=q;o.fillStyle=V,o.strokeStyle=q,o.lineWidth=v.lineThickness;var Q="solid";if(o.setLineDash){var ve=P(v.nullDataLineDashType,v.lineThickness),Q=v.lineDashType,Me=P(Q,v.lineThickness);o.setLineDash(Me)}for(I=!1;C<b.length;C++)if(u=b[C].x.getTime?b[C].x.getTime():b[C].x,!(u<r.axisX.dataInfo.viewPortMin||u>r.axisX.dataInfo.viewPortMax&&(!v.connectNullData||!I)))if(typeof b[C].y!="number")0<C&&!I&&(v.connectNullData?o.setLineDash&&0<Y.length&&(v.options.nullDataLineDashType||!b[C-1].lineDashType)&&(Y[Y.length-1].newLineDashArray=ve,Q=v.nullDataLineDashType):(d(),Y=[])),I=!0;else{u=r.axisX.convertValueToPixel(u),I=r.axisY.convertValueToPixel(b[C].y);var le=v.dataPointIds[C];if(this._eventManager.objectMap[le]={id:le,objectType:"dataPoint",dataSeriesIndex:_,dataPointIndex:C,x1:u,y1:I},Y[Y.length]={x:u,y:I},C<b.length-1&&(te!==(b[C].lineColor||q)||Q!==(b[C].lineDashType||v.lineDashType))&&(te=b[C].lineColor||q,Y[Y.length-1].newStrokeStyle=te,o.setLineDash&&(b[C].lineDashType?(Q=b[C].lineDashType,Y[Y.length-1].newLineDashArray=P(Q,v.lineThickness)):(Q=v.lineDashType,Y[Y.length-1].newLineDashArray=Me))),b[C].markerSize!==0&&(0<b[C].markerSize||0<v.markerSize)){var ue=v.getMarkerProperties(C,u,I,o);y.push(ue),le=f(le),X&&y.push({x:u,y:I,ctx:c,type:ue.type,size:ue.size,color:le,borderColor:le,borderThickness:ue.borderThickness})}(b[C].indexLabel||v.indexLabel||b[C].indexLabelFormatter||v.indexLabelFormatter)&&this._indexLabels.push({chartType:"splineArea",dataPoint:b[C],dataSeries:v,point:{x:u,y:I},direction:0>b[C].y===r.axisY.reversed?1:-1,color:V}),I=!1}d(),Ve.drawMarkers(y)}}return X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(S.x1,S.y1,S.width,S.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},O.prototype.renderStepArea=function(r){var d,h;function o(){te&&(0<u.lineThickness&&x.stroke(),r.axisY.logarithmic||0>=r.axisY.viewportMinimum&&0<=r.axisY.viewportMaximum?q=V:0>r.axisY.viewportMaximum?q=S.y1:0<r.axisY.viewportMinimum&&(q=V),x.lineTo(z,q),x.lineTo(te.x,q),x.closePath(),x.globalAlpha=u.fillOpacity,x.fill(),x.globalAlpha=1,X&&(y.lineTo(z,q),y.lineTo(te.x,q),y.closePath(),y.fill()),x.beginPath(),x.moveTo(z,A),y.beginPath(),y.moveTo(z,A),te={x:z,y:A})}var c=r.targetCanvasCtx||this.plotArea.ctx,x=X?this._preRenderCtx:c;if(!(0>=r.dataSeriesIndexes.length)){var y=this._eventManager.ghostCtx,S=r.axisY.lineCoordinates,M=[],_=this.plotArea,v;x.save(),X&&y.save(),x.beginPath(),x.rect(_.x1,_.y1,_.width,_.height),x.clip(),X&&(y.beginPath(),y.rect(_.x1,_.y1,_.width,_.height),y.clip());for(var b=0;b<r.dataSeriesIndexes.length;b++){var C=r.dataSeriesIndexes[b],u=this.data[C],I=u.dataPoints,M=u.id;this._eventManager.objectMap[M]={objectType:"dataSeries",dataSeriesIndex:C},M=f(M),y.fillStyle=M,M=[],d=!0;var R=0,z,A,Y,V=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),q,te=null;if(h=!1,0<I.length){var Q=u._colorSet[R%u._colorSet.length],ve=u.lineColor=u.options.lineColor||Q,Me=ve;x.fillStyle=Q,x.strokeStyle=ve,x.lineWidth=u.lineThickness;var le="solid";if(x.setLineDash){var ue=P(u.nullDataLineDashType,u.lineThickness),le=u.lineDashType,ce=P(le,u.lineThickness);x.setLineDash(ce)}for(;R<I.length;R++)if(Y=I[R].x.getTime?I[R].x.getTime():I[R].x,!(Y<r.axisX.dataInfo.viewPortMin||Y>r.axisX.dataInfo.viewPortMax&&(!u.connectNullData||!h))){var oe=A;typeof I[R].y!="number"?(u.connectNullData||h||d||o(),h=!0):(z=r.axisX.convertValueToPixel(Y),A=r.axisY.convertValueToPixel(I[R].y),d||h?(!d&&u.connectNullData?(x.setLineDash&&(u.options.nullDataLineDashType||le===u.lineDashType&&u.lineDashType!==u.nullDataLineDashType)&&(d=z,h=A,z=v.x,A=v.y,o(),x.moveTo(v.x,v.y),z=d,A=h,te=v,le=u.nullDataLineDashType,x.setLineDash(ue)),x.lineTo(z,oe),x.lineTo(z,A),X&&(y.lineTo(z,oe),y.lineTo(z,A))):(x.beginPath(),x.moveTo(z,A),X&&(y.beginPath(),y.moveTo(z,A)),te={x:z,y:A}),h=d=!1):(x.lineTo(z,oe),X&&y.lineTo(z,oe),x.lineTo(z,A),X&&y.lineTo(z,A),R%250==0&&o()),v={x:z,y:A},R<I.length-1&&(Me!==(I[R].lineColor||ve)||le!==(I[R].lineDashType||u.lineDashType))&&(o(),Me=I[R].lineColor||ve,x.strokeStyle=Me,x.setLineDash&&(I[R].lineDashType?(le=I[R].lineDashType,x.setLineDash(P(le,u.lineThickness))):(le=u.lineDashType,x.setLineDash(ce)))),Y=u.dataPointIds[R],this._eventManager.objectMap[Y]={id:Y,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:R,x1:z,y1:A},I[R].markerSize!==0&&(0<I[R].markerSize||0<u.markerSize)&&(oe=u.getMarkerProperties(R,z,A,x),M.push(oe),Y=f(Y),X&&M.push({x:z,y:A,ctx:y,type:oe.type,size:oe.size,color:Y,borderColor:Y,borderThickness:oe.borderThickness})),(I[R].indexLabel||u.indexLabel||I[R].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepArea",dataPoint:I[R],dataSeries:u,point:{x:z,y:A},direction:0>I[R].y===r.axisY.reversed?1:-1,color:Q}))}o(),Ve.drawMarkers(M)}}return X&&(c.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&x.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&x.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.clearRect(_.x1,_.y1,_.width,_.height),this._eventManager.ghostCtx.restore()),x.restore(),{source:c,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},O.prototype.renderStackedArea=function(r){function d(){if(!(1>_.length)){for(0<Q.lineThickness&&o.stroke();0<_.length;){var ie=_.pop();o.lineTo(ie.x,ie.y),X&&z.lineTo(ie.x,ie.y)}o.closePath(),o.globalAlpha=Q.fillOpacity,o.fill(),o.globalAlpha=1,o.beginPath(),X&&(z.closePath(),z.fill(),z.beginPath()),_=[]}}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=null,x=null,y=[],S=this.plotArea,M=[],_=[],v=[],b=[],C=0,u,I,R=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),z=this._eventManager.ghostCtx,A,Y,V;X&&z.beginPath(),o.save(),X&&z.save(),o.beginPath(),o.rect(S.x1,S.y1,S.width,S.height),o.clip(),X&&(z.beginPath(),z.rect(S.x1,S.y1,S.width,S.height),z.clip());for(var c=[],q=0;q<r.dataSeriesIndexes.length;q++){var te=r.dataSeriesIndexes[q],Q=this.data[te],ve=Q.dataPoints;for(Q.dataPointIndexes=[],C=0;C<ve.length;C++)te=ve[C].x.getTime?ve[C].x.getTime():ve[C].x,Q.dataPointIndexes[te]=C,c[te]||(v.push(te),c[te]=!0);v.sort(p)}for(q=0;q<r.dataSeriesIndexes.length;q++){if(te=r.dataSeriesIndexes[q],Q=this.data[te],ve=Q.dataPoints,Y=!0,_=[],C=Q.id,this._eventManager.objectMap[C]={objectType:"dataSeries",dataSeriesIndex:te},C=f(C),z.fillStyle=C,0<v.length){var c=Q._colorSet[0],Me=Q.lineColor=Q.options.lineColor||c,le=Me;if(o.fillStyle=c,o.strokeStyle=Me,o.lineWidth=Q.lineThickness,V="solid",o.setLineDash){var ue=P(Q.nullDataLineDashType,Q.lineThickness);V=Q.lineDashType;var ce=P(V,Q.lineThickness);o.setLineDash(ce)}for(var oe=!0,C=0;C<v.length;C++){var x=v[C],J=null,J=0<=Q.dataPointIndexes[x]?ve[Q.dataPointIndexes[x]]:{x,y:null};if(!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax&&(!Q.connectNullData||!oe)))if(typeof J.y!="number")Q.connectNullData||oe||Y||d(),oe=!0;else{u=r.axisX.convertValueToPixel(x);var be=M[x]?M[x]:0;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length){if(b[x]=J.y+(b[x]?b[x]:0),0>=b[x]&&r.axisY.logarithmic)continue;I=r.axisY.convertValueToPixel(b[x])}else I=r.axisY.convertValueToPixel(J.y),I-=be;if(_.push({x:u,y:R-be}),M[x]=R-I,Y||oe?(!Y&&Q.connectNullData?(o.setLineDash&&(Q.options.nullDataLineDashType||V===Q.lineDashType&&Q.lineDashType!==Q.nullDataLineDashType)&&(Y=_.pop(),V=_[_.length-1],d(),o.moveTo(A.x,A.y),_.push(V),_.push(Y),V=Q.nullDataLineDashType,o.setLineDash(ue)),o.lineTo(u,I),X&&z.lineTo(u,I)):(o.beginPath(),o.moveTo(u,I),X&&(z.beginPath(),z.moveTo(u,I))),oe=Y=!1):(o.lineTo(u,I),X&&z.lineTo(u,I),C%250==0&&(d(),o.moveTo(u,I),X&&z.moveTo(u,I),_.push({x:u,y:R-be}))),A={x:u,y:I},C<ve.length-1&&(le!==(ve[C].lineColor||Me)||V!==(ve[C].lineDashType||Q.lineDashType))&&(d(),o.beginPath(),o.moveTo(u,I),_.push({x:u,y:R-be}),le=ve[C].lineColor||Me,o.strokeStyle=le,o.setLineDash&&(ve[C].lineDashType?(V=ve[C].lineDashType,o.setLineDash(P(V,Q.lineThickness))):(V=Q.lineDashType,o.setLineDash(ce)))),0<=Q.dataPointIndexes[x]){var Ae=Q.dataPointIds[Q.dataPointIndexes[x]];this._eventManager.objectMap[Ae]={id:Ae,objectType:"dataPoint",dataSeriesIndex:te,dataPointIndex:Q.dataPointIndexes[x],x1:u,y1:I}}0<=Q.dataPointIndexes[x]&&J.markerSize!==0&&(0<J.markerSize||0<Q.markerSize)&&(be=Q.getMarkerProperties(Q.dataPointIndexes[x],u,I,o),y.push(be),x=f(Ae),X&&y.push({x:u,y:I,ctx:z,type:be.type,size:be.size,color:x,borderColor:x,borderThickness:be.borderThickness})),(J.indexLabel||Q.indexLabel||J.indexLabelFormatter||Q.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:J,dataSeries:Q,point:{x:u,y:I},direction:0>J.y===r.axisY.reversed?1:-1,color:c})}}d(),o.moveTo(u,I),X&&z.moveTo(u,I)}delete Q.dataPointIndexes}return Ve.drawMarkers(y),X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(S.x1,S.y1,S.width,S.height),z.restore()),o.restore(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},O.prototype.renderStackedArea100=function(r){function d(){for(0<Q.lineThickness&&o.stroke();0<_.length;){var pt=_.pop();o.lineTo(pt.x,pt.y),X&&V.lineTo(pt.x,pt.y)}o.closePath(),o.globalAlpha=Q.fillOpacity,o.fill(),o.globalAlpha=1,o.beginPath(),X&&(V.closePath(),V.fill(),V.beginPath()),_=[]}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=null,x=null,y=this.plotArea,S=[],M=[],_=[],v=[],b=[],C=0,u,I,R,z,A,Y=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),V=this._eventManager.ghostCtx;o.save(),X&&V.save(),o.beginPath(),o.rect(y.x1,y.y1,y.width,y.height),o.clip(),X&&(V.beginPath(),V.rect(y.x1,y.y1,y.width,y.height),V.clip());for(var c=[],q=0;q<r.dataSeriesIndexes.length;q++){var te=r.dataSeriesIndexes[q],Q=this.data[te],ve=Q.dataPoints;for(Q.dataPointIndexes=[],C=0;C<ve.length;C++)te=ve[C].x.getTime?ve[C].x.getTime():ve[C].x,Q.dataPointIndexes[te]=C,c[te]||(v.push(te),c[te]=!0);v.sort(p)}for(q=0;q<r.dataSeriesIndexes.length;q++){if(te=r.dataSeriesIndexes[q],Q=this.data[te],ve=Q.dataPoints,z=!0,c=Q.id,this._eventManager.objectMap[c]={objectType:"dataSeries",dataSeriesIndex:te},c=f(c),V.fillStyle=c,_=[],0<v.length){var c=Q._colorSet[C%Q._colorSet.length],Me=Q.lineColor=Q.options.lineColor||c,le=Me;if(o.fillStyle=c,o.strokeStyle=Me,o.lineWidth=Q.lineThickness,A="solid",o.setLineDash){var ue=P(Q.nullDataLineDashType,Q.lineThickness);A=Q.lineDashType;var ce=P(A,Q.lineThickness);o.setLineDash(ce)}for(var oe=!0,C=0;C<v.length;C++){var x=v[C],J=null,J=0<=Q.dataPointIndexes[x]?ve[Q.dataPointIndexes[x]]:{x,y:null};if(!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax&&(!Q.connectNullData||!oe)))if(typeof J.y!="number")Q.connectNullData||oe||z||d(),oe=!0;else{var be;be=r.dataPointYSums[x]!==0?100*(J.y/r.dataPointYSums[x]):0,u=r.axisX.convertValueToPixel(x);var Ae=M[x]?M[x]:0;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length){if(b[x]=be+(b[x]?b[x]:0),0>=b[x]&&r.axisY.logarithmic)continue;I=r.axisY.convertValueToPixel(b[x])}else I=r.axisY.convertValueToPixel(be),I-=Ae;if(_.push({x:u,y:Y-Ae}),M[x]=Y-I,z||oe?(!z&&Q.connectNullData?(o.setLineDash&&(Q.options.nullDataLineDashType||A===Q.lineDashType&&Q.lineDashType!==Q.nullDataLineDashType)&&(z=_.pop(),A=_[_.length-1],d(),o.moveTo(R.x,R.y),_.push(A),_.push(z),A=Q.nullDataLineDashType,o.setLineDash(ue)),o.lineTo(u,I),X&&V.lineTo(u,I)):(o.beginPath(),o.moveTo(u,I),X&&(V.beginPath(),V.moveTo(u,I))),oe=z=!1):(o.lineTo(u,I),X&&V.lineTo(u,I),C%250==0&&(d(),o.moveTo(u,I),X&&V.moveTo(u,I),_.push({x:u,y:Y-Ae}))),R={x:u,y:I},C<ve.length-1&&(le!==(ve[C].lineColor||Me)||A!==(ve[C].lineDashType||Q.lineDashType))&&(d(),o.beginPath(),o.moveTo(u,I),_.push({x:u,y:Y-Ae}),le=ve[C].lineColor||Me,o.strokeStyle=le,o.setLineDash&&(ve[C].lineDashType?(A=ve[C].lineDashType,o.setLineDash(P(A,Q.lineThickness))):(A=Q.lineDashType,o.setLineDash(ce)))),0<=Q.dataPointIndexes[x]){var ie=Q.dataPointIds[Q.dataPointIndexes[x]];this._eventManager.objectMap[ie]={id:ie,objectType:"dataPoint",dataSeriesIndex:te,dataPointIndex:Q.dataPointIndexes[x],x1:u,y1:I}}0<=Q.dataPointIndexes[x]&&J.markerSize!==0&&(0<J.markerSize||0<Q.markerSize)&&(Ae=Q.getMarkerProperties(Q.dataPointIndexes[x],u,I,o),S.push(Ae),x=f(ie),X&&S.push({x:u,y:I,ctx:V,type:Ae.type,size:Ae.size,color:x,borderColor:x,borderThickness:Ae.borderThickness})),(J.indexLabel||Q.indexLabel||J.indexLabelFormatter||Q.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:J,dataSeries:Q,point:{x:u,y:I},direction:0>J.y===r.axisY.reversed?1:-1,color:c})}}d(),o.moveTo(u,I),X&&V.moveTo(u,I)}delete Q.dataPointIndexes}return Ve.drawMarkers(S),X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(y.x1,y.y1,y.width,y.height),V.restore()),o.restore(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},O.prototype.renderBubble=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=this.plotArea,c=0,x,y;h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(o.x1,o.y1,o.width,o.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip());for(var S=-1/0,M=1/0,_=0;_<r.dataSeriesIndexes.length;_++)for(var v=r.dataSeriesIndexes[_],b=this.data[v],C=b.dataPoints,u=0,c=0;c<C.length;c++)x=C[c].getTime?x=C[c].x.getTime():x=C[c].x,x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax||typeof C[c].z>"u"||(u=C[c].z,u>S&&(S=u),u<M&&(M=u));for(var I=25*Math.PI,R=Math.max(Math.pow(.25*Math.min(o.height,o.width)/2,2)*Math.PI,I),_=0;_<r.dataSeriesIndexes.length;_++)if(v=r.dataSeriesIndexes[_],b=this.data[v],C=b.dataPoints,0<C.length){for(h.strokeStyle="#4572A7 ",c=0;c<C.length;c++)if(x=C[c].getTime?x=C[c].x.getTime():x=C[c].x,!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax)&&typeof C[c].y=="number"){x=r.axisX.convertValueToPixel(x),y=r.axisY.convertValueToPixel(C[c].y);var u=C[c].z,z=2*Math.max(Math.sqrt((S===M?R/2:I+(R-I)/(S-M)*(u-M))/Math.PI)<<0,1),u=b.getMarkerProperties(c,h);u.size=z,h.globalAlpha=b.fillOpacity,Ve.drawMarker(x,y,h,u.type,u.size,u.color,u.borderColor,u.borderThickness),h.globalAlpha=1;var A=b.dataPointIds[c];this._eventManager.objectMap[A]={id:A,objectType:"dataPoint",dataSeriesIndex:v,dataPointIndex:c,x1:x,y1:y,size:z},z=f(A),X&&Ve.drawMarker(x,y,this._eventManager.ghostCtx,u.type,u.size,z,z,u.borderThickness),(C[c].indexLabel||b.indexLabel||C[c].indexLabelFormatter||b.indexLabelFormatter)&&this._indexLabels.push({chartType:"bubble",dataPoint:C[c],dataSeries:b,point:{x,y},direction:1,bounds:{x1:x-u.size/2,y1:y-u.size/2,x2:x+u.size/2,y2:y+u.size/2},color:null})}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},O.prototype.renderScatter=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=this.plotArea,c=0,x,y;h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(o.x1,o.y1,o.width,o.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip());for(var S=0;S<r.dataSeriesIndexes.length;S++){var M=r.dataSeriesIndexes[S],_=this.data[M],v=_.dataPoints;if(0<v.length){h.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(o.height,o.width)/2,2);for(var b=0,C=0,c=0;c<v.length;c++)if(x=v[c].getTime?x=v[c].x.getTime():x=v[c].x,!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax)&&typeof v[c].y=="number"){x=r.axisX.convertValueToPixel(x),y=r.axisY.convertValueToPixel(v[c].y);var u=_.getMarkerProperties(c,x,y,h);h.globalAlpha=_.fillOpacity,Ve.drawMarker(u.x,u.y,u.ctx,u.type,u.size,u.color,u.borderColor,u.borderThickness),h.globalAlpha=1,Math.sqrt((b-x)*(b-x)+(C-y)*(C-y))<Math.min(u.size,5)&&v.length>Math.min(this.plotArea.width,this.plotArea.height)||(b=_.dataPointIds[c],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:M,dataPointIndex:c,x1:x,y1:y},b=f(b),X&&Ve.drawMarker(u.x,u.y,this._eventManager.ghostCtx,u.type,u.size,b,b,u.borderThickness),(v[c].indexLabel||_.indexLabel||v[c].indexLabelFormatter||_.indexLabelFormatter)&&this._indexLabels.push({chartType:"scatter",dataPoint:v[c],dataSeries:_,point:{x,y},direction:1,bounds:{x1:x-u.size/2,y1:y-u.size/2,x2:x+u.size/2,y2:y+u.size/2},color:null}),b=x,C=y)}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},O.prototype.renderCandlestick=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d,o=this._eventManager.ghostCtx;if(!(0>=r.dataSeriesIndexes.length)){var C=null,u=null,c=this.plotArea,x=0,y,S,M,_,v,b,C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,I=r.axisX.dataInfo.minDiff;isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.7*c.width*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&o.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(o.beginPath(),o.rect(c.x1,c.y1,c.width,c.height),o.clip());for(var R=0;R<r.dataSeriesIndexes.length;R++){var z=r.dataSeriesIndexes[R],A=this.data[z],Y=A.dataPoints;if(0<Y.length){for(var V=!!(5<I&&A.bevelEnabled),x=0;x<Y.length;x++)if(Y[x].getTime?b=Y[x].x.getTime():b=Y[x].x,!(b<r.axisX.dataInfo.viewPortMin||b>r.axisX.dataInfo.viewPortMax)&&!m(Y[x].y)&&Y[x].y.length&&typeof Y[x].y[0]=="number"&&typeof Y[x].y[1]=="number"&&typeof Y[x].y[2]=="number"&&typeof Y[x].y[3]=="number"){y=r.axisX.convertValueToPixel(b),S=r.axisY.convertValueToPixel(Y[x].y[0]),M=r.axisY.convertValueToPixel(Y[x].y[1]),_=r.axisY.convertValueToPixel(Y[x].y[2]),v=r.axisY.convertValueToPixel(Y[x].y[3]);var q=y-I/2<<0,te=q+I<<0,u=A.options.fallingColor?A.fallingColor:A._colorSet[0],C=Y[x].color?Y[x].color:A._colorSet[0],Q=Math.round(Math.max(1,.15*I)),ve=Q%2===0?0:.5,Me=A.dataPointIds[x];this._eventManager.objectMap[Me]={id:Me,objectType:"dataPoint",dataSeriesIndex:z,dataPointIndex:x,x1:q,y1:S,x2:te,y2:M,x3:y,y3:_,x4:y,y4:v,borderThickness:Q,color:C},h.strokeStyle=C,h.beginPath(),h.lineWidth=Q,o.lineWidth=Math.max(Q,4),A.type==="candlestick"?(h.moveTo(y-ve,M),h.lineTo(y-ve,Math.min(S,v)),h.stroke(),h.moveTo(y-ve,Math.max(S,v)),h.lineTo(y-ve,_),h.stroke(),kt(h,q,Math.min(S,v),te,Math.max(S,v),Y[x].y[0]<=Y[x].y[3]?A.risingColor:u,Q,C,V,V,!1,!1,A.fillOpacity),X&&(C=f(Me),o.strokeStyle=C,o.moveTo(y-ve,M),o.lineTo(y-ve,Math.min(S,v)),o.stroke(),o.moveTo(y-ve,Math.max(S,v)),o.lineTo(y-ve,_),o.stroke(),kt(o,q,Math.min(S,v),te,Math.max(S,v),C,0,null,!1,!1))):A.type==="ohlc"&&(h.moveTo(y-ve,M),h.lineTo(y-ve,_),h.stroke(),h.beginPath(),h.moveTo(y,S),h.lineTo(q,S),h.stroke(),h.beginPath(),h.moveTo(y,v),h.lineTo(te,v),h.stroke(),X&&(C=f(Me),o.strokeStyle=C,o.moveTo(y-ve,M),o.lineTo(y-ve,_),o.stroke(),o.beginPath(),o.moveTo(y,S),o.lineTo(q,S),o.stroke(),o.beginPath(),o.moveTo(y,v),o.lineTo(te,v),o.stroke())),(Y[x].indexLabel||A.indexLabel||Y[x].indexLabelFormatter||A.indexLabelFormatter)&&this._indexLabels.push({chartType:A.type,dataPoint:Y[x],dataSeries:A,point:{x:q+(te-q)/2,y:r.axisY.reversed?_:M},direction:1,bounds:{x1:q,y1:Math.min(M,_),x2:te,y2:Math.max(M,_)},color:C})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),o.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},O.prototype.renderBoxAndWhisker=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d,o=this._eventManager.ghostCtx;if(!(0>=r.dataSeriesIndexes.length)){var C=null,c=this.plotArea,u=0,x,y,S,M,_,v,b,C=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,I=r.axisX.dataInfo.minDiff;isFinite(I)||(I=.3*Math.abs(r.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.7*c.width*(r.axisX.logarithmic?Math.log(I)/Math.log(r.axisX.range):Math.abs(I)/Math.abs(r.axisX.range))<<0,this.dataPointMaxWidth&&C>u&&(C=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<C&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,C)),I<C&&(I=C),I>u&&(I=u),h.save(),X&&o.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(o.beginPath(),o.rect(c.x1,c.y1,c.width,c.height),o.clip());for(var R=!1,R=!!r.axisY.reversed,z=0;z<r.dataSeriesIndexes.length;z++){var A=r.dataSeriesIndexes[z],Y=this.data[A],V=Y.dataPoints;if(0<V.length){for(var q=!!(5<I&&Y.bevelEnabled),u=0;u<V.length;u++)if(V[u].getTime?b=V[u].x.getTime():b=V[u].x,!(b<r.axisX.dataInfo.viewPortMin||b>r.axisX.dataInfo.viewPortMax)&&!m(V[u].y)&&V[u].y.length&&typeof V[u].y[0]=="number"&&typeof V[u].y[1]=="number"&&typeof V[u].y[2]=="number"&&typeof V[u].y[3]=="number"&&typeof V[u].y[4]=="number"&&V[u].y.length===5){x=r.axisX.convertValueToPixel(b),y=r.axisY.convertValueToPixel(V[u].y[0]),S=r.axisY.convertValueToPixel(V[u].y[1]),M=r.axisY.convertValueToPixel(V[u].y[2]),_=r.axisY.convertValueToPixel(V[u].y[3]),v=r.axisY.convertValueToPixel(V[u].y[4]);var te=x-I/2<<0,Q=x+I/2<<0,C=V[u].color?V[u].color:Y._colorSet[0],ve=Math.round(Math.max(1,.15*I)),Me=ve%2===0?0:.5,le=V[u].whiskerColor?V[u].whiskerColor:V[u].color?Y.whiskerColor?Y.whiskerColor:V[u].color:Y.whiskerColor?Y.whiskerColor:C,ue=typeof V[u].whiskerThickness=="number"?V[u].whiskerThickness:typeof Y.options.whiskerThickness=="number"?Y.whiskerThickness:ve,ce=V[u].whiskerDashType?V[u].whiskerDashType:Y.whiskerDashType,oe=m(V[u].whiskerLength)?m(Y.options.whiskerLength)?I:Y.whiskerLength:V[u].whiskerLength,oe=typeof oe=="number"?0>=oe?0:oe>=I?I:oe:typeof oe=="string"?parseInt(oe)*I/100>I?I:parseInt(oe)*I/100:I,J=Math.round(ue)%2===1?.5:0,be=V[u].stemColor?V[u].stemColor:V[u].color?Y.stemColor?Y.stemColor:V[u].color:Y.stemColor?Y.stemColor:C,Ae=typeof V[u].stemThickness=="number"?V[u].stemThickness:typeof Y.options.stemThickness=="number"?Y.stemThickness:ve,ie=Math.round(Ae)%2===1?.5:0,pt=V[u].stemDashType?V[u].stemDashType:Y.stemDashType,mt=V[u].lineColor?V[u].lineColor:V[u].color?Y.lineColor?Y.lineColor:V[u].color:Y.lineColor?Y.lineColor:C,Ft=typeof V[u].lineThickness=="number"?V[u].lineThickness:typeof Y.options.lineThickness=="number"?Y.lineThickness:ve,At=V[u].lineDashType?V[u].lineDashType:Y.lineDashType,Ge=Math.round(Ft)%2===1?.5:0,ri=Y.upperBoxColor,Ct=Y.lowerBoxColor,vt=m(Y.options.fillOpacity)?1:Y.fillOpacity,Ye=Y.dataPointIds[u];this._eventManager.objectMap[Ye]={id:Ye,objectType:"dataPoint",dataSeriesIndex:A,dataPointIndex:u,x1:te,y1:y,x2:Q,y2:S,x3:x,y3:M,x4:x,y4:_,y5:v,borderThickness:ve,color:C,stemThickness:Ae,stemColor:be,whiskerThickness:ue,whiskerLength:oe,whiskerColor:le,lineThickness:Ft,lineColor:mt},h.save(),0<Ae&&(h.beginPath(),h.strokeStyle=be,h.lineWidth=Ae,h.setLineDash&&h.setLineDash(P(pt,Ae)),h.moveTo(x-ie,S),h.lineTo(x-ie,y),h.stroke(),h.moveTo(x-ie,_),h.lineTo(x-ie,M),h.stroke()),h.restore(),o.lineWidth=Math.max(ve,4),h.beginPath(),kt(h,te,Math.min(v,S),Q,Math.max(S,v),Ct,0,C,R?q:!1,R?!1:q,!1,!1,vt),h.beginPath(),kt(h,te,Math.min(M,v),Q,Math.max(v,M),ri,0,C,R?!1:q,R?q:!1,!1,!1,vt),h.beginPath(),h.lineWidth=ve,h.strokeStyle=C,h.rect(te-Me,Math.min(S,M)-Me,Q-te+2*Me,Math.max(S,M)-Math.min(S,M)+2*Me),h.stroke(),h.save(),0<Ft&&(h.beginPath(),h.globalAlpha=1,h.setLineDash&&h.setLineDash(P(At,Ft)),h.strokeStyle=mt,h.lineWidth=Ft,h.moveTo(te,v-Ge),h.lineTo(Q,v-Ge),h.stroke()),h.restore(),h.save(),0<ue&&(h.beginPath(),h.setLineDash&&h.setLineDash(P(ce,ue)),h.strokeStyle=le,h.lineWidth=ue,h.moveTo(x-oe/2<<0,_-J),h.lineTo(x+oe/2<<0,_-J),h.stroke(),h.moveTo(x-oe/2<<0,y+J),h.lineTo(x+oe/2<<0,y+J),h.stroke()),h.restore(),X&&(C=f(Ye),o.strokeStyle=C,o.lineWidth=Ae,0<Ae&&(o.moveTo(x-Me-ie,S),o.lineTo(x-Me-ie,Math.max(y,_)),o.stroke(),o.moveTo(x-Me-ie,Math.min(y,_)),o.lineTo(x-Me-ie,M),o.stroke()),kt(o,te,Math.max(S,M),Q,Math.min(S,M),C,0,null,!1,!1),0<ue&&(o.beginPath(),o.lineWidth=ue,o.moveTo(x+oe/2,_-J),o.lineTo(x-oe/2,_-J),o.stroke(),o.moveTo(x+oe/2,y+J),o.lineTo(x-oe/2,y+J),o.stroke())),(V[u].indexLabel||Y.indexLabel||V[u].indexLabelFormatter||Y.indexLabelFormatter)&&this._indexLabels.push({chartType:Y.type,dataPoint:V[u],dataSeries:Y,point:{x:te+(Q-te)/2,y:r.axisY.reversed?y:_},direction:1,bounds:{x1:te,y1:Math.min(y,_),x2:Q,y2:Math.max(y,_)},color:C})}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),o.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},O.prototype.renderRangeColumn=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,M=0,x,y,S,M=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;x=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.03*this.width;var _=r.axisX.dataInfo.minDiff;isFinite(_)||(_=.3*Math.abs(r.axisX.range)),_=this.options.dataPointWidth?this.dataPointWidth:.9*(c.width*(r.axisX.logarithmic?Math.log(_)/Math.log(r.axisX.range):Math.abs(_)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&M>x&&(M=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,x)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&x<M&&(x=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,M)),_<M&&(_=M),_>x&&(_=x),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip());for(var v=0;v<r.dataSeriesIndexes.length;v++){var b=r.dataSeriesIndexes[v],C=this.data[b],u=C.dataPoints;if(0<u.length){for(var I=!!(5<_&&C.bevelEnabled),M=0;M<u.length;M++)if(u[M].getTime?S=u[M].x.getTime():S=u[M].x,!(S<r.axisX.dataInfo.viewPortMin||S>r.axisX.dataInfo.viewPortMax)&&!m(u[M].y)&&u[M].y.length&&typeof u[M].y[0]=="number"&&typeof u[M].y[1]=="number"){o=r.axisX.convertValueToPixel(S),x=r.axisY.convertValueToPixel(u[M].y[0]),y=r.axisY.convertValueToPixel(u[M].y[1]);var R=r.axisX.reversed?o+r.plotType.totalDataSeries*_/2-(r.previousDataSeriesCount+v)*_<<0:o-r.plotType.totalDataSeries*_/2+(r.previousDataSeriesCount+v)*_<<0,z=r.axisX.reversed?R-_<<0:R+_<<0,o=u[M].color?u[M].color:C._colorSet[M%C._colorSet.length];if(x>y){var A=x;x=y,y=A}A=C.dataPointIds[M],this._eventManager.objectMap[A]={id:A,objectType:"dataPoint",dataSeriesIndex:b,dataPointIndex:M,x1:R,y1:x,x2:z,y2:y},kt(h,r.axisX.reversed?z:R,x,r.axisX.reversed?R:z,y,o,0,o,I,I,!1,!1,C.fillOpacity),o=f(A),X&&kt(this._eventManager.ghostCtx,r.axisX.reversed?z:R,x,r.axisX.reversed?R:z,y,o,0,null,!1,!1),(u[M].indexLabel||C.indexLabel||u[M].indexLabelFormatter||C.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeColumn",dataPoint:u[M],dataSeries:C,indexKeyword:0,point:{x:R+(z-R)/2,y:u[M].y[1]>=u[M].y[0]?y:x},direction:u[M].y[1]>=u[M].y[0]?-1:1,bounds:{x1:R,y1:Math.min(x,y),x2:z,y2:Math.max(x,y)},color:o}),this._indexLabels.push({chartType:"rangeColumn",dataPoint:u[M],dataSeries:C,indexKeyword:1,point:{x:R+(z-R)/2,y:u[M].y[1]>=u[M].y[0]?x:y},direction:u[M].y[1]>=u[M].y[0]?1:-1,bounds:{x1:R,y1:Math.min(x,y),x2:z,y2:Math.max(x,y)},color:o}))}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},O.prototype.renderError=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d,o=r.axisY._position?!(r.axisY._position==="left"||r.axisY._position==="right"):!1;if(!(0>=r.dataSeriesIndexes.length)){var c=null,x=!1,y=this.plotArea,S=0,M,_,v,b,C,u,I,R=r.axisX.dataInfo.minDiff;isFinite(R)||(R=.3*Math.abs(r.axisX.range)),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(y.x1,y.y1,y.width,y.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(y.x1,y.y1,y.width,y.height),this._eventManager.ghostCtx.clip());for(var z=0,A=0;A<this.data.length;A++)!this.data[A].type.match(/(bar|column)/ig)||!this.data[A].visible||this.data[A].type.match(/(stacked)/ig)&&z||z++;for(var Y=0;Y<r.dataSeriesIndexes.length;Y++){var V=r.dataSeriesIndexes[Y],q=this.data[V],te=q.dataPoints,Q=m(q._linkedSeries)?!1:!!(q._linkedSeries.type.match(/(bar|column)/ig)&&q._linkedSeries.visible),ve=0;if(Q)for(c=q._linkedSeries.id,A=0;A<c;A++)!this.data[A].type.match(/(bar|column)/ig)||!this.data[A].visible||this.data[A].type.match(/(stacked)/ig)&&ve||(this.data[A].type.match(/(range)/ig)&&(x=!0),ve++);if(c=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,S=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:o?Math.min(.15*this.height,.9*(this.plotArea.height/(Q?z:1)))<<0:.3*this.width,x&&(S=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:o?Math.min(.15*this.height,.9*(this.plotArea.height/(Q?z:1)))<<0:.03*this.width),A=this.options.dataPointWidth?this.dataPointWidth:.9*((o?y.height:y.width)*(r.axisX.logarithmic?Math.log(R)/Math.log(r.axisX.range):Math.abs(R)/Math.abs(r.axisX.range))/(Q?z:1))<<0,this.dataPointMaxWidth&&c>S&&(c=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,S)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&S<c&&(S=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,c)),A<c&&(A=c),A>S&&(A=S),0<te.length)for(var Me=q._colorSet,S=0;S<te.length;S++){var c=q.lineColor=q.options.color?q.options.color:Me[0],le={color:te[S].whiskerColor?te[S].whiskerColor:te[S].color?q.whiskerColor?q.whiskerColor:te[S].color:q.whiskerColor?q.whiskerColor:c,thickness:m(te[S].whiskerThickness)?q.whiskerThickness:te[S].whiskerThickness,dashType:te[S].whiskerDashType?te[S].whiskerDashType:q.whiskerDashType,length:m(te[S].whiskerLength)?m(q.options.whiskerLength)?A:q.options.whiskerLength:te[S].whiskerLength,trimLength:m(te[S].whiskerLength)&&m(q.options.whiskerLength)?50:0};le.length=typeof le.length=="number"?0>=le.length?0:le.length>=A?A:le.length:typeof le.length=="string"?parseInt(le.length)*A/100>A?A:parseInt(le.length)*A/100>A:A,le.thickness=typeof le.thickness=="number"?0>le.thickness?0:Math.round(le.thickness):2;var ue={color:te[S].stemColor?te[S].stemColor:te[S].color?q.stemColor?q.stemColor:te[S].color:q.stemColor?q.stemColor:c,thickness:te[S].stemThickness?te[S].stemThickness:q.stemThickness,dashType:te[S].stemDashType?te[S].stemDashType:q.stemDashType};if(ue.thickness=typeof ue.thickness=="number"?0>ue.thickness?0:Math.round(ue.thickness):2,te[S].getTime?I=te[S].x.getTime():I=te[S].x,!(I<r.axisX.dataInfo.viewPortMin||I>r.axisX.dataInfo.viewPortMax)&&!m(te[S].y)&&te[S].y.length&&typeof te[S].y[0]=="number"&&typeof te[S].y[1]=="number"){var ce=r.axisX.convertValueToPixel(I);o?_=ce:M=ce,ce=r.axisY.convertValueToPixel(te[S].y[0]),o?v=ce:C=ce,ce=r.axisY.convertValueToPixel(te[S].y[1]),o?b=ce:u=ce,o?(C=r.axisX.reversed?_+(Q?z:1)*A/2-(Q?ve-1:0)*A<<0:_-(Q?z:1)*A/2+(Q?ve-1:0)*A<<0,u=r.axisX.reversed?C-A<<0:C+A<<0):(v=r.axisX.reversed?M+(Q?z:1)*A/2-(Q?ve-1:0)*A<<0:M-(Q?z:1)*A/2+(Q?ve-1:0)*A<<0,b=r.axisX.reversed?v-A<<0:v+A<<0),!o&&C>u&&(ce=C,C=u,u=ce),o&&v>b&&(ce=v,v=b,b=ce),ce=q.dataPointIds[S],this._eventManager.objectMap[ce]={id:ce,objectType:"dataPoint",dataSeriesIndex:V,dataPointIndex:S,x1:Math.min(v,b),y1:Math.min(C,u),x2:Math.max(b,v),y2:Math.max(u,C),isXYSwapped:o,stemProperties:ue,whiskerProperties:le},Ce(h,Math.min(v,b),Math.min(C,u),Math.max(b,v),Math.max(u,C),c,le,ue,o),X&&Ce(this._eventManager.ghostCtx,v,C,b,u,c,le,ue,o),(te[S].indexLabel||q.indexLabel||te[S].indexLabelFormatter||q.indexLabelFormatter)&&(this._indexLabels.push({chartType:"error",dataPoint:te[S],dataSeries:q,indexKeyword:0,point:{x:o?te[S].y[1]>=te[S].y[0]?v:b:v+(b-v)/2,y:o?C+(u-C)/2:te[S].y[1]>=te[S].y[0]?u:C},direction:te[S].y[1]>=te[S].y[0]?-1:1,bounds:{x1:o?Math.min(v,b):v,y1:o?C:Math.min(C,u),x2:o?Math.max(v,b):b,y2:o?u:Math.max(C,u)},color:c,axisSwapped:o}),this._indexLabels.push({chartType:"error",dataPoint:te[S],dataSeries:q,indexKeyword:1,point:{x:o?te[S].y[1]>=te[S].y[0]?b:v:v+(b-v)/2,y:o?C+(u-C)/2:te[S].y[1]>=te[S].y[0]?C:u},direction:te[S].y[1]>=te[S].y[0]?1:-1,bounds:{x1:o?Math.min(v,b):v,y1:o?C:Math.min(C,u),x2:o?Math.max(v,b):b,y2:o?u:Math.max(C,u)},color:c,axisSwapped:o}))}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(y.x1,y.y1,y.width,y.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},O.prototype.renderRangeBar=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=null,c=this.plotArea,_=0,x,y,S,M,_=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;x=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/r.plotType.totalDataSeries))<<0;var v=r.axisX.dataInfo.minDiff;isFinite(v)||(v=.3*Math.abs(r.axisX.range)),v=this.options.dataPointWidth?this.dataPointWidth:.9*(c.height*(r.axisX.logarithmic?Math.log(v)/Math.log(r.axisX.range):Math.abs(v)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&_>x&&(_=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,x)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&x<_&&(x=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,_)),v<_&&(v=_),v>x&&(v=x),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(c.x1,c.y1,c.width,c.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip());for(var b=0;b<r.dataSeriesIndexes.length;b++){var C=r.dataSeriesIndexes[b],u=this.data[C],I=u.dataPoints;if(0<I.length){var R=!!(5<v&&u.bevelEnabled);for(h.strokeStyle="#4572A7 ",_=0;_<I.length;_++)if(I[_].getTime?M=I[_].x.getTime():M=I[_].x,!(M<r.axisX.dataInfo.viewPortMin||M>r.axisX.dataInfo.viewPortMax)&&!m(I[_].y)&&I[_].y.length&&typeof I[_].y[0]=="number"&&typeof I[_].y[1]=="number"){x=r.axisY.convertValueToPixel(I[_].y[0]),y=r.axisY.convertValueToPixel(I[_].y[1]),S=r.axisX.convertValueToPixel(M),S=r.axisX.reversed?S+r.plotType.totalDataSeries*v/2-(r.previousDataSeriesCount+b)*v<<0:S-r.plotType.totalDataSeries*v/2+(r.previousDataSeriesCount+b)*v<<0;var z=r.axisX.reversed?S-v<<0:S+v<<0;x>y&&(o=x,x=y,y=o),o=I[_].color?I[_].color:u._colorSet[_%u._colorSet.length],kt(h,x,r.axisX.reversed?z:S,y,r.axisX.reversed?S:z,o,0,null,R,!1,!1,!1,u.fillOpacity),o=u.dataPointIds[_],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:_,x1:x,y1:S,x2:y,y2:z},o=f(o),X&&kt(this._eventManager.ghostCtx,x,r.axisX.reversed?z:S,y,r.axisX.reversed?S:z,o,0,null,!1,!1),(I[_].indexLabel||u.indexLabel||I[_].indexLabelFormatter||u.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeBar",dataPoint:I[_],dataSeries:u,indexKeyword:0,point:{x:I[_].y[1]>=I[_].y[0]?x:y,y:S+(z-S)/2},direction:I[_].y[1]>=I[_].y[0]?-1:1,bounds:{x1:Math.min(x,y),y1:S,x2:Math.max(x,y),y2:z},color:o}),this._indexLabels.push({chartType:"rangeBar",dataPoint:I[_],dataSeries:u,indexKeyword:1,point:{x:I[_].y[1]>=I[_].y[0]?y:x,y:S+(z-S)/2},direction:I[_].y[1]>=I[_].y[0]?1:-1,bounds:{x1:Math.min(x,y),y1:S,x2:Math.max(x,y),y2:z},color:o}))}}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}},O.prototype.renderRangeArea=function(r){function d(){if(Y){for(var oe=null,J=M.length-1;0<=J;J--)oe=M[J],o.lineTo(oe.x,oe.y2),c.lineTo(oe.x,oe.y2);if(o.closePath(),o.globalAlpha=v.fillOpacity,o.fill(),o.globalAlpha=1,c.fill(),0<v.lineThickness){for(o.beginPath(),o.moveTo(oe.x,oe.y2),J=0;J<M.length;J++)oe=M[J],o.lineTo(oe.x,oe.y2);for(o.moveTo(M[0].x,M[0].y1),J=0;J<M.length;J++)oe=M[J],o.lineTo(oe.x,oe.y1);o.stroke()}o.beginPath(),o.moveTo(I,R),c.beginPath(),c.moveTo(I,R),Y={x:I,y:R},M=[],M.push({x:I,y1:R,y2:z})}}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx,x=[],y=this.plotArea;o.save(),X&&c.save(),o.beginPath(),o.rect(y.x1,y.y1,y.width,y.height),o.clip(),X&&(c.beginPath(),c.rect(y.x1,y.y1,y.width,y.height),c.clip());for(var S=0;S<r.dataSeriesIndexes.length;S++){var M=[],_=r.dataSeriesIndexes[S],v=this.data[_],b=v.dataPoints,x=v.id;this._eventManager.objectMap[x]={objectType:"dataSeries",dataSeriesIndex:_},x=f(x),c.fillStyle=x;var x=[],C=!0,u=0,I,R,z,A,Y=null;if(0<b.length){var V=v._colorSet[u%v._colorSet.length],q=v.lineColor=v.options.lineColor||V,te=q;o.fillStyle=V,o.strokeStyle=q,o.lineWidth=v.lineThickness;var Q="solid";if(o.setLineDash){var ve=P(v.nullDataLineDashType,v.lineThickness),Q=v.lineDashType,Me=P(Q,v.lineThickness);o.setLineDash(Me)}for(var le=!0;u<b.length;u++)if(A=b[u].x.getTime?b[u].x.getTime():b[u].x,!(A<r.axisX.dataInfo.viewPortMin||A>r.axisX.dataInfo.viewPortMax&&(!v.connectNullData||!le)))if(b[u].y!==null&&b[u].y.length&&typeof b[u].y[0]=="number"&&typeof b[u].y[1]=="number"){if(I=r.axisX.convertValueToPixel(A),R=r.axisY.convertValueToPixel(b[u].y[0]),z=r.axisY.convertValueToPixel(b[u].y[1]),C||le?(v.connectNullData&&!C?(o.setLineDash&&(v.options.nullDataLineDashType||Q===v.lineDashType&&v.lineDashType!==v.nullDataLineDashType)&&(M[M.length-1].newLineDashArray=Me,Q=v.nullDataLineDashType,o.setLineDash(ve)),o.lineTo(I,R),X&&c.lineTo(I,R),M.push({x:I,y1:R,y2:z})):(o.beginPath(),o.moveTo(I,R),Y={x:I,y:R},M=[],M.push({x:I,y1:R,y2:z}),X&&(c.beginPath(),c.moveTo(I,R))),le=C=!1):(o.lineTo(I,R),M.push({x:I,y1:R,y2:z}),X&&c.lineTo(I,R),u%250==0&&d()),A=v.dataPointIds[u],this._eventManager.objectMap[A]={id:A,objectType:"dataPoint",dataSeriesIndex:_,dataPointIndex:u,x1:I,y1:R,y2:z},u<b.length-1&&(te!==(b[u].lineColor||q)||Q!==(b[u].lineDashType||v.lineDashType))&&(d(),te=b[u].lineColor||q,M[M.length-1].newStrokeStyle=te,o.strokeStyle=te,o.setLineDash&&(b[u].lineDashType?(Q=b[u].lineDashType,M[M.length-1].newLineDashArray=P(Q,v.lineThickness),o.setLineDash(M[M.length-1].newLineDashArray)):(Q=v.lineDashType,M[M.length-1].newLineDashArray=Me,o.setLineDash(Me)))),b[u].markerSize!==0&&(0<b[u].markerSize||0<v.markerSize)){var ue=v.getMarkerProperties(u,I,z,o);x.push(ue);var ce=f(A);X&&x.push({x:I,y:z,ctx:c,type:ue.type,size:ue.size,color:ce,borderColor:ce,borderThickness:ue.borderThickness}),ue=v.getMarkerProperties(u,I,R,o),x.push(ue),ce=f(A),X&&x.push({x:I,y:R,ctx:c,type:ue.type,size:ue.size,color:ce,borderColor:ce,borderThickness:ue.borderThickness})}(b[u].indexLabel||v.indexLabel||b[u].indexLabelFormatter||v.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeArea",dataPoint:b[u],dataSeries:v,indexKeyword:0,point:{x:I,y:R},direction:b[u].y[0]>b[u].y[1]===r.axisY.reversed?-1:1,color:V}),this._indexLabels.push({chartType:"rangeArea",dataPoint:b[u],dataSeries:v,indexKeyword:1,point:{x:I,y:z},direction:b[u].y[0]>b[u].y[1]===r.axisY.reversed?1:-1,color:V}))}else le||C||d(),le=!0;d(),Ve.drawMarkers(x)}}return X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(y.x1,y.y1,y.width,y.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},O.prototype.renderRangeSplineArea=function(r){function d(ue,ce){var oe=K(R,2);if(0<oe.length){if(0<_.lineThickness){o.strokeStyle=ce,o.setLineDash&&o.setLineDash(ue),o.beginPath(),o.moveTo(oe[0].x,oe[0].y);for(var J=0;J<oe.length-3;J+=3)(oe[J].newStrokeStyle||oe[J].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(oe[J].x,oe[J].y),oe[J].newStrokeStyle&&(o.strokeStyle=oe[J].newStrokeStyle),oe[J].newLineDashArray&&o.setLineDash(oe[J].newLineDashArray)),o.bezierCurveTo(oe[J+1].x,oe[J+1].y,oe[J+2].x,oe[J+2].y,oe[J+3].x,oe[J+3].y)}for(o.beginPath(),o.moveTo(oe[0].x,oe[0].y),X&&(c.beginPath(),c.moveTo(oe[0].x,oe[0].y)),J=0;J<oe.length-3;J+=3)o.bezierCurveTo(oe[J+1].x,oe[J+1].y,oe[J+2].x,oe[J+2].y,oe[J+3].x,oe[J+3].y),X&&c.bezierCurveTo(oe[J+1].x,oe[J+1].y,oe[J+2].x,oe[J+2].y,oe[J+3].x,oe[J+3].y);for(oe=K(z,2),o.lineTo(z[z.length-1].x,z[z.length-1].y),J=oe.length-1;2<J;J-=3)o.bezierCurveTo(oe[J-1].x,oe[J-1].y,oe[J-2].x,oe[J-2].y,oe[J-3].x,oe[J-3].y),X&&c.bezierCurveTo(oe[J-1].x,oe[J-1].y,oe[J-2].x,oe[J-2].y,oe[J-3].x,oe[J-3].y);if(o.closePath(),o.globalAlpha=_.fillOpacity,o.fill(),X&&(c.closePath(),c.fill()),o.globalAlpha=1,0<_.lineThickness){o.strokeStyle=ce,o.setLineDash&&o.setLineDash(ue),o.beginPath(),o.moveTo(oe[0].x,oe[0].y);for(var be=J=0;J<oe.length-3;J+=3,be++)(R[be].newStrokeStyle||R[be].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(oe[J].x,oe[J].y),R[be].newStrokeStyle&&(o.strokeStyle=R[be].newStrokeStyle),R[be].newLineDashArray&&o.setLineDash(R[be].newLineDashArray)),o.bezierCurveTo(oe[J+1].x,oe[J+1].y,oe[J+2].x,oe[J+2].y,oe[J+3].x,oe[J+3].y);for(oe=K(R,2),o.moveTo(oe[0].x,oe[0].y),be=J=0;J<oe.length-3;J+=3,be++)(R[be].newStrokeStyle||R[be].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(oe[J].x,oe[J].y),R[be].newStrokeStyle&&(o.strokeStyle=R[be].newStrokeStyle),R[be].newLineDashArray&&o.setLineDash(R[be].newLineDashArray)),o.bezierCurveTo(oe[J+1].x,oe[J+1].y,oe[J+2].x,oe[J+2].y,oe[J+3].x,oe[J+3].y);o.stroke()}o.beginPath()}}var h=r.targetCanvasCtx||this.plotArea.ctx,o=X?this._preRenderCtx:h;if(!(0>=r.dataSeriesIndexes.length)){var c=this._eventManager.ghostCtx,x=[],y=this.plotArea;o.save(),X&&c.save(),o.beginPath(),o.rect(y.x1,y.y1,y.width,y.height),o.clip(),X&&(c.beginPath(),c.rect(y.x1,y.y1,y.width,y.height),c.clip());for(var S=0;S<r.dataSeriesIndexes.length;S++){var M=r.dataSeriesIndexes[S],_=this.data[M],v=_.dataPoints,x=_.id;this._eventManager.objectMap[x]={objectType:"dataSeries",dataSeriesIndex:M},x=f(x),c.fillStyle=x;var x=[],b=0,C,u,I,R=[],z=[];if(0<v.length){var A=_._colorSet[b%_._colorSet.length],Y=_.lineColor=_.options.lineColor||A,V=Y;o.fillStyle=A,o.lineWidth=_.lineThickness;var q="solid",te;if(o.setLineDash){var Q=P(_.nullDataLineDashType,_.lineThickness),q=_.lineDashType;te=P(q,_.lineThickness)}for(u=!1;b<v.length;b++)if(C=v[b].x.getTime?v[b].x.getTime():v[b].x,!(C<r.axisX.dataInfo.viewPortMin||C>r.axisX.dataInfo.viewPortMax&&(!_.connectNullData||!u)))if(v[b].y!==null&&v[b].y.length&&typeof v[b].y[0]=="number"&&typeof v[b].y[1]=="number"){C=r.axisX.convertValueToPixel(C),u=r.axisY.convertValueToPixel(v[b].y[0]),I=r.axisY.convertValueToPixel(v[b].y[1]);var ve=_.dataPointIds[b];if(this._eventManager.objectMap[ve]={id:ve,objectType:"dataPoint",dataSeriesIndex:M,dataPointIndex:b,x1:C,y1:u,y2:I},R[R.length]={x:C,y:u},z[z.length]={x:C,y:I},b<v.length-1&&(V!==(v[b].lineColor||Y)||q!==(v[b].lineDashType||_.lineDashType))&&(V=v[b].lineColor||Y,R[R.length-1].newStrokeStyle=V,o.setLineDash&&(v[b].lineDashType?(q=v[b].lineDashType,R[R.length-1].newLineDashArray=P(q,_.lineThickness)):(q=_.lineDashType,R[R.length-1].newLineDashArray=te))),v[b].markerSize!==0&&(0<v[b].markerSize||0<_.markerSize)){var Me=_.getMarkerProperties(b,C,u,o);x.push(Me);var le=f(ve);X&&x.push({x:C,y:u,ctx:c,type:Me.type,size:Me.size,color:le,borderColor:le,borderThickness:Me.borderThickness}),Me=_.getMarkerProperties(b,C,I,o),x.push(Me),le=f(ve),X&&x.push({x:C,y:I,ctx:c,type:Me.type,size:Me.size,color:le,borderColor:le,borderThickness:Me.borderThickness})}(v[b].indexLabel||_.indexLabel||v[b].indexLabelFormatter||_.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:v[b],dataSeries:_,indexKeyword:0,point:{x:C,y:u},direction:v[b].y[0]<=v[b].y[1]?-1:1,color:A}),this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:v[b],dataSeries:_,indexKeyword:1,point:{x:C,y:I},direction:v[b].y[0]<=v[b].y[1]?1:-1,color:A})),u=!1}else 0<b&&!u&&(_.connectNullData?o.setLineDash&&0<R.length&&(_.options.nullDataLineDashType||!v[b-1].lineDashType)&&(R[R.length-1].newLineDashArray=Q,q=_.nullDataLineDashType):(d(te,Y),R=[],z=[])),u=!0;d(te,Y),Ve.drawMarkers(x)}}return X&&(h.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(y.x1,y.y1,y.width,y.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:h,dest:this.plotArea.ctx,animationCallback:xe.xClipAnimation,easingFunction:xe.easing.linear,animationBase:0}}},O.prototype.renderWaterfall=function(r){var d=r.targetCanvasCtx||this.plotArea.ctx,h=X?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx,c=null,x=this.plotArea,b=0,y,S,M,_,v=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),b=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;S=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/r.plotType.totalDataSeries))<<0;var C=r.axisX.dataInfo.minDiff;isFinite(C)||(C=.3*Math.abs(r.axisX.range)),C=this.options.dataPointWidth?this.dataPointWidth:.6*(x.width*(r.axisX.logarithmic?Math.log(C)/Math.log(r.axisX.range):Math.abs(C)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&b>S&&(b=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,S)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&S<b&&(S=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,b)),C<b&&(C=b),C>S&&(C=S),h.save(),X&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(x.x1,x.y1,x.width,x.height),h.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(x.x1,x.y1,x.width,x.height),this._eventManager.ghostCtx.clip());for(var u=0;u<r.dataSeriesIndexes.length;u++){var I=r.dataSeriesIndexes[u],R=this.data[I],z=R.dataPoints,c=R._colorSet[0];R.risingColor=R.options.risingColor?R.options.risingColor:c,R.fallingColor=R.options.fallingColor?R.options.fallingColor:"#e40a0a";var A=typeof R.options.lineThickness=="number"?Math.round(R.lineThickness):1,Y=Math.round(A)%2===1?-.5:0;if(0<z.length)for(var V=!!(5<C&&R.bevelEnabled),q=!1,te=null,Q=null,b=0;b<z.length;b++)if(z[b].getTime?_=z[b].x.getTime():_=z[b].x,typeof z[b].y!="number"){if(0<b&&!q&&R.connectNullData)var ve=R.options.nullDataLineDashType||!z[b-1].lineDashType?R.nullDataLineDashType:z[b-1].lineDashType;q=!0}else{y=r.axisX.convertValueToPixel(_),S=R.dataPointEOs[b].cumulativeSum===0?v:r.axisY.convertValueToPixel(R.dataPointEOs[b].cumulativeSum),M=R.dataPointEOs[b].cumulativeSumYStartValue===0?v:r.axisY.convertValueToPixel(R.dataPointEOs[b].cumulativeSumYStartValue),y=r.axisX.reversed?y+r.plotType.totalDataSeries*C/2-(r.previousDataSeriesCount+u)*C<<0:y-r.plotType.totalDataSeries*C/2+(r.previousDataSeriesCount+u)*C<<0;var Me=r.axisX.reversed?y-C<<0:y+C<<0;S>M&&(c=S,S=M,M=c),r.axisY.reversed&&(c=S,S=M,M=c),c=R.dataPointIds[b],this._eventManager.objectMap[c]={id:c,objectType:"dataPoint",dataSeriesIndex:I,dataPointIndex:b,x1:y,y1:S,x2:Me,y2:M};var ue=z[b].color?z[b].color:0<z[b].y?R.risingColor:R.fallingColor;kt(h,r.axisX.reversed?Me:y,r.axisY.reversed?M:S,r.axisX.reversed?y:Me,r.axisY.reversed?S:M,ue,0,ue,V,V,!1,!1,R.fillOpacity),c=f(c),X&&kt(this._eventManager.ghostCtx,r.axisX.reversed?Me:y,S,r.axisX.reversed?y:Me,M,c,0,null,!1,!1);var le,ue=y;le=typeof z[b].isIntermediateSum<"u"&&z[b].isIntermediateSum===!0||typeof z[b].isCumulativeSum<"u"&&z[b].isCumulativeSum===!0?0<z[b].y?S:M:0<z[b].y?M:S,0<b&&te&&(!q||R.connectNullData)&&(q&&h.setLineDash&&h.setLineDash(P(ve,A)),h.beginPath(),h.moveTo(te,Q-Y),h.lineTo(ue,le-Y),0<A&&h.stroke(),X&&(o.beginPath(),o.moveTo(te,Q-Y),o.lineTo(ue,le-Y),0<A&&o.stroke())),q=!1,te=Me,Q=0<z[b].y?S:M,ue=z[b].lineDashType?z[b].lineDashType:R.options.lineDashType?R.options.lineDashType:"shortDash",h.strokeStyle=z[b].lineColor?z[b].lineColor:R.options.lineColor?R.options.lineColor:"#9e9e9e",h.lineWidth=A,h.setLineDash&&(ue=P(ue,A),h.setLineDash(ue)),(z[b].indexLabel||R.indexLabel||z[b].indexLabelFormatter||R.indexLabelFormatter)&&this._indexLabels.push({chartType:"waterfall",dataPoint:z[b],dataSeries:R,point:{x:y+(Me-y)/2,y:0<=z[b].y?S:M},direction:0>z[b].y===r.axisY.reversed?1:-1,bounds:{x1:y,y1:Math.min(S,M),x2:Me,y2:Math.max(S,M)},color:c})}}return X&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&h.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&h.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(x.x1,x.y1,x.width,x.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:xe.fadeInAnimation,easingFunction:xe.easing.easeInQuad,animationBase:0}}};var pe=function(r,d,h,o,c,x,y,S,M){if(!(0>h)){if(typeof S>"u"&&(S=1),!X){var _=Number((y%(2*Math.PI)).toFixed(8));Number((x%(2*Math.PI)).toFixed(8))===_&&(y-=1e-4)}r.save(),r.globalAlpha=S,c==="pie"?(r.beginPath(),r.moveTo(d.x,d.y),r.arc(d.x,d.y,h,x,y,!1),r.fillStyle=o,r.strokeStyle="white",r.lineWidth=2,r.closePath(),r.fill()):c==="doughnut"&&(r.beginPath(),r.arc(d.x,d.y,h,x,y,!1),0<=M&&r.arc(d.x,d.y,M*h,y,x,!0),r.closePath(),r.fillStyle=o,r.strokeStyle="white",r.lineWidth=2,r.fill()),r.globalAlpha=1,r.restore()}};O.prototype.renderPie=function(r){function d(){if(_&&v){var le=0,ue=0,ce=0,oe=0;m(_.options.indexLabelMaxWidth)&&(_.indexLabelMaxWidth=.33*C.width);for(var J=0;J<v.length;J++){var be=v[J],Ae=_.dataPointIds[J];u[J].id=Ae,u[J].objectType="dataPoint",u[J].dataPointIndex=J,u[J].dataSeriesIndex=0;var ie=u[J],mt={percent:null,total:null},pt=null,mt=M.getPercentAndTotal(_,be);(_.indexLabelFormatter||be.indexLabelFormatter)&&(pt={chart:M.options,dataSeries:_,dataPoint:be,total:mt.total,percent:mt.percent}),mt=be.indexLabelFormatter?be.indexLabelFormatter(pt):be.indexLabel?M.replaceKeywordsWithValue(be.indexLabel,be,_,J):_.indexLabelFormatter?_.indexLabelFormatter(pt):_.indexLabel?M.replaceKeywordsWithValue(_.indexLabel,be,_,J):be.label?be.label:"",M._eventManager.objectMap[Ae]=ie,ie.center={x:V.x,y:V.y},ie.y=be.y,ie.radius=Q,ie.percentInnerRadius=Me,ie.indexLabelText=mt,ie.indexLabelPlacement=_.indexLabelPlacement,ie.indexLabelLineColor=be.indexLabelLineColor?be.indexLabelLineColor:_.options.indexLabelLineColor?_.options.indexLabelLineColor:be.color?be.color:_._colorSet[J%_._colorSet.length],ie.indexLabelLineThickness=m(be.indexLabelLineThickness)?_.indexLabelLineThickness:be.indexLabelLineThickness,ie.indexLabelLineDashType=be.indexLabelLineDashType?be.indexLabelLineDashType:_.indexLabelLineDashType,ie.indexLabelFontColor=be.indexLabelFontColor?be.indexLabelFontColor:_.indexLabelFontColor,ie.indexLabelFontStyle=be.indexLabelFontStyle?be.indexLabelFontStyle:_.indexLabelFontStyle,ie.indexLabelFontWeight=be.indexLabelFontWeight?be.indexLabelFontWeight:_.indexLabelFontWeight,ie.indexLabelFontSize=m(be.indexLabelFontSize)?_.indexLabelFontSize:be.indexLabelFontSize,ie.indexLabelFontFamily=be.indexLabelFontFamily?be.indexLabelFontFamily:_.indexLabelFontFamily,ie.indexLabelBackgroundColor=be.indexLabelBackgroundColor?be.indexLabelBackgroundColor:_.options.indexLabelBackgroundColor?_.options.indexLabelBackgroundColor:_.indexLabelBackgroundColor,ie.indexLabelBorderColor=be.indexLabelBorderColor?be.indexLabelBorderColor:_.options.indexLabelBorderColor?_.options.indexLabelBorderColor:_.indexLabelBorderColor,ie.indexLabelBorderThickness=be.indexLabelBorderThickness?be.indexLabelBorderThickness:_.options.indexLabelBorderThickness?_.options.indexLabelBorderThickness:_.indexLabelBorderThickness,ie.indexLabelMaxWidth=be.indexLabelMaxWidth?be.indexLabelMaxWidth:_.indexLabelMaxWidth,ie.indexLabelWrap=typeof be.indexLabelWrap<"u"?be.indexLabelWrap:_.indexLabelWrap,ie.indexLabelTextAlign=be.indexLabelTextAlign?be.indexLabelTextAlign:_.indexLabelTextAlign?_.indexLabelTextAlign:"left",ie.startAngle=J===0?_.startAngle?_.startAngle/180*Math.PI:0:u[J-1].endAngle,ie.startAngle=(ie.startAngle+2*Math.PI)%(2*Math.PI),ie.endAngle=ie.startAngle+2*Math.PI/q*Math.abs(be.y),be=(ie.endAngle+ie.startAngle)/2,be=(be+2*Math.PI)%(2*Math.PI),ie.midAngle=be,ie.midAngle>Math.PI/2-A&&ie.midAngle<Math.PI/2+A?((le===0||u[ce].midAngle>ie.midAngle)&&(ce=J),le++):ie.midAngle>3*Math.PI/2-A&&ie.midAngle<3*Math.PI/2+A&&((ue===0||u[oe].midAngle>ie.midAngle)&&(oe=J),ue++),ie.hemisphere=be>Math.PI/2&&be<=3*Math.PI/2?"left":"right",ie.indexLabelTextBlock=new de(M.plotArea.ctx,{fontSize:ie.indexLabelFontSize,fontFamily:ie.indexLabelFontFamily,fontColor:ie.indexLabelFontColor,fontStyle:ie.indexLabelFontStyle,fontWeight:ie.indexLabelFontWeight,textAlign:ie.indexLabelTextAlign,backgroundColor:ie.indexLabelBackgroundColor,borderColor:ie.indexLabelBorderColor,borderThickness:ie.indexLabelBorderThickness,maxWidth:ie.indexLabelMaxWidth,maxHeight:ie.indexLabelWrap?5*ie.indexLabelFontSize:1.5*ie.indexLabelFontSize,text:ie.indexLabelText,padding:0,textBaseline:"middle"}),ie.indexLabelTextBlock.measureText()}for(Ae=be=0,mt=!1,J=0;J<v.length;J++)ie=u[(ce+J)%v.length],1<le&&ie.midAngle>Math.PI/2-A&&ie.midAngle<Math.PI/2+A&&(be<=le/2&&!mt?(ie.hemisphere="right",be++):(ie.hemisphere="left",mt=!0));for(mt=!1,J=0;J<v.length;J++)ie=u[(oe+J)%v.length],1<ue&&ie.midAngle>3*Math.PI/2-A&&ie.midAngle<3*Math.PI/2+A&&(Ae<=ue/2&&!mt?(ie.hemisphere="left",Ae++):(ie.hemisphere="right",mt=!0))}}function h(le,ue){var ce=M.plotArea.ctx;for(ce.clearRect(C.x1,C.y1,C.width,C.height),ce.fillStyle=M.backgroundColor,ce.fillRect(C.x1,C.y1,C.width,C.height),ce=0;ce<v.length;ce++){var oe=u[ce].startAngle,J=u[ce].endAngle;if(J>oe){var be=.07*Q*Math.cos(u[ce].midAngle),Ae=.07*Q*Math.sin(u[ce].midAngle),ie=!1;v[ce].exploded?(1e-9<Math.abs(u[ce].center.x-(V.x+be))||1e-9<Math.abs(u[ce].center.y-(V.y+Ae)))&&(u[ce].center.x=V.x+be*le,u[ce].center.y=V.y+Ae*le,ie=!0):(0<Math.abs(u[ce].center.x-V.x)||0<Math.abs(u[ce].center.y-V.y))&&(u[ce].center.x=V.x+be*(1-le),u[ce].center.y=V.y+Ae*(1-le),ie=!0),ie&&ue&&(be={},be.dataSeries=_,be.dataPoint=_.dataPoints[ce],be.index=ce,M.toolTip.highlightObjects([be])),pe(M.plotArea.ctx,u[ce].center,u[ce].radius,v[ce].color?v[ce].color:_._colorSet[ce%_._colorSet.length],_.type,oe,J,_.fillOpacity,u[ce].percentInnerRadius)}}for(ce=M.plotArea.ctx,ce.save(),ce.fillStyle="black",ce.strokeStyle="grey",ce.textBaseline="middle",ce.lineJoin="round",oe=oe=0;oe<v.length;oe++)J=u[oe],J.indexLabelText&&(J.indexLabelTextBlock.y-=J.indexLabelTextBlock.height/2-J.indexLabelTextBlock.fontSize/2,be=0,be=J.hemisphere==="left"?_.indexLabelPlacement!=="inside"?-(J.indexLabelTextBlock.width+b):-J.indexLabelTextBlock.width/2:_.indexLabelPlacement!=="inside"?b:-J.indexLabelTextBlock.width/2,J.indexLabelTextBlock.x+=be,J.indexLabelTextBlock.render(!0),J.indexLabelTextBlock.x-=be,J.indexLabelTextBlock.y+=J.indexLabelTextBlock.height/2-J.indexLabelTextBlock.fontSize/2,J.indexLabelPlacement!=="inside"&&0<J.indexLabelLineThickness&&(be=J.center.x+Q*Math.cos(J.midAngle),Ae=J.center.y+Q*Math.sin(J.midAngle),ce.strokeStyle=J.indexLabelLineColor,ce.lineWidth=J.indexLabelLineThickness,ce.setLineDash&&ce.setLineDash(P(J.indexLabelLineDashType,J.indexLabelLineThickness)),ce.beginPath(),ce.moveTo(be,Ae),ce.lineTo(J.indexLabelTextBlock.x,J.indexLabelTextBlock.y),ce.lineTo(J.indexLabelTextBlock.x+(J.hemisphere==="left"?-b:b),J.indexLabelTextBlock.y),ce.stroke()),ce.lineJoin="miter");ce.save()}function o(le,ue){var ce=0,ce=le.indexLabelTextBlock.y-le.indexLabelTextBlock.height/2,oe=le.indexLabelTextBlock.y+le.indexLabelTextBlock.height/2,J=ue.indexLabelTextBlock.y-ue.indexLabelTextBlock.height/2,be=ue.indexLabelTextBlock.y+ue.indexLabelTextBlock.height/2;return ce=ue.indexLabelTextBlock.y>le.indexLabelTextBlock.y?J-oe:ce-be}function c(le){for(var ue=null,ce=1;ce<v.length;ce++)if(ue=(le+ce+u.length)%u.length,u[ue].hemisphere!==u[le].hemisphere){ue=null;break}else{if(u[ue].indexLabelText&&ue!==le&&(0>o(u[ue],u[le])||(u[le].hemisphere==="right"?u[ue].indexLabelTextBlock.y>=u[le].indexLabelTextBlock.y:u[ue].indexLabelTextBlock.y<=u[le].indexLabelTextBlock.y)))break;ue=null}return ue}function x(le,ue,ce){if(ce=(ce||0)+1,1e3<ce)return 0;ue=ue||0;var oe=0,J=V.y-1*R,be=V.y+1*R;if(0<=le&&le<v.length){var Ae=u[le];if(0>ue&&Ae.indexLabelTextBlock.y<J||0<ue&&Ae.indexLabelTextBlock.y>be)return 0;var ie=0,pt=0,pt=ie=ie=0;for(0>ue?Ae.indexLabelTextBlock.y-Ae.indexLabelTextBlock.height/2>J&&Ae.indexLabelTextBlock.y-Ae.indexLabelTextBlock.height/2+ue<J&&(ue=-(J-(Ae.indexLabelTextBlock.y-Ae.indexLabelTextBlock.height/2+ue))):Ae.indexLabelTextBlock.y+Ae.indexLabelTextBlock.height/2<J&&Ae.indexLabelTextBlock.y+Ae.indexLabelTextBlock.height/2+ue>be&&(ue=Ae.indexLabelTextBlock.y+Ae.indexLabelTextBlock.height/2+ue-be),ue=Ae.indexLabelTextBlock.y+ue,J=0,J=Ae.hemisphere==="right"?V.x+Math.sqrt(Math.pow(R,2)-Math.pow(ue-V.y,2)):V.x-Math.sqrt(Math.pow(R,2)-Math.pow(ue-V.y,2)),pt=V.x+Q*Math.cos(Ae.midAngle),ie=V.y+Q*Math.sin(Ae.midAngle),ie=Math.sqrt(Math.pow(J-pt,2)+Math.pow(ue-ie,2)),pt=Math.acos(Q/R),ie=Math.acos((R*R+Q*Q-ie*ie)/(2*Q*R)),ue=ie<pt?ue-Ae.indexLabelTextBlock.y:0,J=null,be=1;be<v.length;be++)if(J=(le-be+u.length)%u.length,u[J].hemisphere!==u[le].hemisphere){J=null;break}else{if(u[J].indexLabelText&&u[J].hemisphere===u[le].hemisphere&&J!==le&&(0>o(u[J],u[le])||(u[le].hemisphere==="right"?u[J].indexLabelTextBlock.y<=u[le].indexLabelTextBlock.y:u[J].indexLabelTextBlock.y>=u[le].indexLabelTextBlock.y)))break;J=null}pt=J,ie=c(le),be=J=0,0>ue?(be=Ae.hemisphere==="right"?pt:ie,oe=ue,be!==null&&(pt=-ue,ue=Ae.indexLabelTextBlock.y-Ae.indexLabelTextBlock.height/2-(u[be].indexLabelTextBlock.y+u[be].indexLabelTextBlock.height/2),ue-pt<I&&(J=-pt,be=x(be,J,ce+1),+be.toFixed(Y)>+J.toFixed(Y)&&(oe=ue>I?-(ue-I):-(pt-(be-J)))))):0<ue&&(be=Ae.hemisphere==="right"?ie:pt,oe=ue,be!==null&&(pt=ue,ue=u[be].indexLabelTextBlock.y-u[be].indexLabelTextBlock.height/2-(Ae.indexLabelTextBlock.y+Ae.indexLabelTextBlock.height/2),ue-pt<I&&(J=pt,be=x(be,J,ce+1),+be.toFixed(Y)<+J.toFixed(Y)&&(oe=ue>I?ue-I:pt-(J-be))))),oe&&(ce=Ae.indexLabelTextBlock.y+oe,ue=0,ue=Ae.hemisphere==="right"?V.x+Math.sqrt(Math.pow(R,2)-Math.pow(ce-V.y,2)):V.x-Math.sqrt(Math.pow(R,2)-Math.pow(ce-V.y,2)),Ae.midAngle>Math.PI/2-A&&Ae.midAngle<Math.PI/2+A?(J=(le-1+u.length)%u.length,J=u[J],le=u[(le+1+u.length)%u.length],Ae.hemisphere==="left"&&J.hemisphere==="right"&&ue>J.indexLabelTextBlock.x?ue=J.indexLabelTextBlock.x-15:Ae.hemisphere==="right"&&le.hemisphere==="left"&&ue<le.indexLabelTextBlock.x&&(ue=le.indexLabelTextBlock.x+15)):Ae.midAngle>3*Math.PI/2-A&&Ae.midAngle<3*Math.PI/2+A&&(J=(le-1+u.length)%u.length,J=u[J],le=u[(le+1+u.length)%u.length],Ae.hemisphere==="right"&&J.hemisphere==="left"&&ue<J.indexLabelTextBlock.x?ue=J.indexLabelTextBlock.x+15:Ae.hemisphere==="left"&&le.hemisphere==="right"&&ue>le.indexLabelTextBlock.x&&(ue=le.indexLabelTextBlock.x-15)),Ae.indexLabelTextBlock.y=ce,Ae.indexLabelTextBlock.x=ue,Ae.indexLabelAngle=Math.atan2(Ae.indexLabelTextBlock.y-V.y,Ae.indexLabelTextBlock.x-V.x))}return oe}function y(){var le=M.plotArea.ctx;le.fillStyle="grey",le.strokeStyle="grey",le.font="16px Arial",le.textBaseline="middle";for(var oe=le=0,ue=0,ce=!0,oe=0;10>oe&&(1>oe||0<ue);oe++){if((_.radius||!_.radius&&typeof _.innerRadius<"u"&&_.innerRadius!==null&&Q-ue<=ve)&&(ce=!1),ce&&(Q-=ue),ue=0,_.indexLabelPlacement!=="inside"){for(R=Q*z,le=0;le<v.length;le++){var J=u[le];J.indexLabelTextBlock.x=V.x+R*Math.cos(J.midAngle),J.indexLabelTextBlock.y=V.y+R*Math.sin(J.midAngle),J.indexLabelAngle=J.midAngle,J.radius=Q,J.percentInnerRadius=Me}for(var be,Ae,le=0;le<v.length;le++){var J=u[le],ie=c(le);if(ie!==null){be=u[le],Ae=u[ie];var pt=0,pt=o(be,Ae)-I;if(0>pt){for(var Ft=Ae=0,mt=0;mt<v.length;mt++)mt!==le&&u[mt].hemisphere===J.hemisphere&&(u[mt].indexLabelTextBlock.y<J.indexLabelTextBlock.y?Ae++:Ft++);Ae=pt/(Ae+Ft||1)*Ft;var Ft=-1*(pt-Ae),At=mt=0;J.hemisphere==="right"?(mt=x(le,Ae),Ft=-1*(pt-mt),At=x(ie,Ft),+At.toFixed(Y)<+Ft.toFixed(Y)&&+mt.toFixed(Y)<=+Ae.toFixed(Y)&&x(le,-(Ft-At))):(mt=x(ie,Ae),Ft=-1*(pt-mt),At=x(le,Ft),+At.toFixed(Y)<+Ft.toFixed(Y)&&+mt.toFixed(Y)<=+Ae.toFixed(Y)&&x(ie,-(Ft-At)))}}}}else for(le=0;le<v.length;le++)J=u[le],R=_.type==="pie"?.7*Q:.85*Q,ie=V.x+R*Math.cos(J.midAngle),Ae=V.y+R*Math.sin(J.midAngle),J.indexLabelTextBlock.x=ie,J.indexLabelTextBlock.y=Ae;for(le=0;le<v.length;le++)J=u[le],ie=J.indexLabelTextBlock.measureText(),ie.height!==0&&ie.width!==0&&(ie=ie=0,J.hemisphere==="right"?(ie=C.x2-(J.indexLabelTextBlock.x+J.indexLabelTextBlock.width+b),ie*=-1):ie=C.x1-(J.indexLabelTextBlock.x-J.indexLabelTextBlock.width-b),0<ie&&(!ce&&J.indexLabelText&&(Ae=J.hemisphere==="right"?C.x2-J.indexLabelTextBlock.x:J.indexLabelTextBlock.x-C.x1,.3*J.indexLabelTextBlock.maxWidth>Ae?J.indexLabelText="":J.indexLabelTextBlock.maxWidth=.85*Ae,.3*J.indexLabelTextBlock.maxWidth<Ae&&(J.indexLabelTextBlock.x-=J.hemisphere==="right"?2:-2)),Math.abs(J.indexLabelTextBlock.y-J.indexLabelTextBlock.height/2-V.y)<Q||Math.abs(J.indexLabelTextBlock.y+J.indexLabelTextBlock.height/2-V.y)<Q)&&(ie/=Math.abs(Math.cos(J.indexLabelAngle)),9<ie&&(ie*=.3),ie>ue&&(ue=ie)),ie=ie=0,0<J.indexLabelAngle&&J.indexLabelAngle<Math.PI?(ie=C.y2-(J.indexLabelTextBlock.y+J.indexLabelTextBlock.height/2+5),ie*=-1):ie=C.y1-(J.indexLabelTextBlock.y-J.indexLabelTextBlock.height/2-5),0<ie&&(!ce&&J.indexLabelText&&(Ae=0<J.indexLabelAngle&&J.indexLabelAngle<Math.PI?-1:1,x(le,ie*Ae)===0&&x(le,2*Ae)),Math.abs(J.indexLabelTextBlock.x-V.x)<Q&&(ie/=Math.abs(Math.sin(J.indexLabelAngle)),9<ie&&(ie*=.3),ie>ue&&(ue=ie))));var Ge=function(ri,Ct,vt){for(var Ye=[],Jt=0;Ye.push(u[Ct]),Ct!==vt;Ct=(Ct+1+v.length)%v.length);for(Ye.sort(function(On,Di){return On.y-Di.y}),Ct=0;Ct<Ye.length&&(vt=Ye[Ct],Jt<.7*ri);Ct++)Jt+=vt.indexLabelTextBlock.height,vt.indexLabelTextBlock.text="",vt.indexLabelText="",vt.indexLabelTextBlock.measureText()};(function(){for(var ri=-1,Ct=-1,vt=0,Ye=!1,Jt=0;Jt<v.length;Jt++)if(Ye=!1,be=u[Jt],be.indexLabelText){var On=c(Jt);if(On!==null){var Di=u[On];pt=0,pt=o(be,Di);var Hs;if(Hs=0>pt){Hs=be.indexLabelTextBlock.x;var ws=be.indexLabelTextBlock.y-be.indexLabelTextBlock.height/2,Te=be.indexLabelTextBlock.y+be.indexLabelTextBlock.height/2,Kl=Di.indexLabelTextBlock.y-Di.indexLabelTextBlock.height/2,Ii=Di.indexLabelTextBlock.x+Di.indexLabelTextBlock.width,vo=Di.indexLabelTextBlock.y+Di.indexLabelTextBlock.height/2;Hs=!(be.indexLabelTextBlock.x+be.indexLabelTextBlock.width<Di.indexLabelTextBlock.x-b||Hs>Ii+b||ws>vo+b||Te<Kl-b)}Hs?(0>ri&&(ri=Jt),On!==ri&&(Ct=On,vt+=-pt),Jt%Math.max(v.length/10,3)===0&&(Ye=!0)):Ye=!0,Ye&&0<vt&&0<=ri&&0<=Ct&&(Ge(vt,ri,Ct),Ct=ri=-1,vt=0)}}0<vt&&Ge(vt,ri,Ct)})()}}function S(){if(M.plotArea.layoutManager.reset(),M.title&&(M.title.dockInsidePlotArea||M.title.horizontalAlign==="center"&&M.title.verticalAlign==="center")&&M.title.render(),M.subtitles)for(var le=0;le<M.subtitles.length;le++){var ue=M.subtitles[le];(ue.dockInsidePlotArea||ue.horizontalAlign==="center"&&ue.verticalAlign==="center")&&ue.render()}M.legend&&(M.legend.dockInsidePlotArea||M.legend.horizontalAlign==="center"&&M.legend.verticalAlign==="center")&&(M.legend.setLayout(),M.legend.render())}var M=this;if(!(0>=r.dataSeriesIndexes.length)){var _=this.data[r.dataSeriesIndexes[0]],v=_.dataPoints,b=10,C=this.plotArea,u=_.dataPointEOs,I=2,R,z=1.3,A=20/180*Math.PI,Y=6,V={x:(C.x2+C.x1)/2,y:(C.y2+C.y1)/2},q=0;r=!1;for(var te=0;te<v.length;te++)q+=Math.abs(v[te].y),!r&&typeof v[te].indexLabel<"u"&&v[te].indexLabel!==null&&0<v[te].indexLabel.toString().length&&(r=!0),!r&&typeof v[te].label<"u"&&v[te].label!==null&&0<v[te].label.toString().length&&(r=!0);if(q!==0){r=r||typeof _.indexLabel<"u"&&_.indexLabel!==null&&0<_.indexLabel.toString().length;var Q=_.indexLabelPlacement!=="inside"&&r?.75*Math.min(C.width,C.height)/2:.92*Math.min(C.width,C.height)/2;_.radius&&(Q=ee(_.radius,Q));var ve=typeof _.innerRadius<"u"&&_.innerRadius!==null?ee(_.innerRadius,Q):.7*Q,Me=Math.min(ve/Q,(Q-1)/Q);this.pieDoughnutClickHandler=function(le){M.isAnimating||!m(this.explodeOnClick)&&!this.explodeOnClick||(le=le.dataPoint,le.exploded=!le.exploded,1<this.dataPoints.length&&M._animator.animate(0,500,function(ue){h(ue,!0),S(),M.dispatchEvent("dataAnimationIterationEnd",{chart:M}),M.dispatchEvent("dataAnimationEnd",{chart:M})}))},d(),y(),y(),y(),y(),this.disableToolTip=!0,this._animator.animate(0,this.animatedRender?this.animationDuration:0,function(le){var ue=M.plotArea.ctx;ue.clearRect(C.x1,C.y1,C.width,C.height),ue.fillStyle=M.backgroundColor,ue.fillRect(C.x1,C.y1,C.width,C.height);for(var ue=u[0].startAngle+2*Math.PI*le,ce=0;ce<v.length;ce++){var oe=ce===0?u[ce].startAngle:J,J=oe+(u[ce].endAngle-u[ce].startAngle),be=!1;J>ue&&(J=ue,be=!0);var Ae=v[ce].color?v[ce].color:_._colorSet[ce%_._colorSet.length];if(J>oe&&pe(M.plotArea.ctx,u[ce].center,u[ce].radius,Ae,_.type,oe,J,_.fillOpacity,u[ce].percentInnerRadius),be)break}S(),M.dispatchEvent("dataAnimationIterationEnd",{chart:M}),1<=le&&M.dispatchEvent("dataAnimationEnd",{chart:M})},function(){M.disableToolTip=!1,M._animator.animate(0,M.animatedRender?500:0,function(le){h(le,!1),S(),M.dispatchEvent("dataAnimationIterationEnd",{chart:M})}),M.dispatchEvent("dataAnimationEnd",{chart:M})}),_.radius=Q,_.type==="doughnut"&&(_.innerRadius=ve)}}};var ge=function(r,d,h,o){typeof h>"u"&&(h=1),0>=Math.round(d.y4-d.y1)||(r.save(),r.globalAlpha=h,r.beginPath(),r.moveTo(Math.round(d.x1),Math.round(d.y1)),r.lineTo(Math.round(d.x2),Math.round(d.y2)),r.lineTo(Math.round(d.x3),Math.round(d.y3)),r.lineTo(Math.round(d.x4),Math.round(d.y4)),d.x5!=="undefined"&&(r.lineTo(Math.round(d.x5),Math.round(d.y5)),r.lineTo(Math.round(d.x6),Math.round(d.y6))),r.closePath(),r.fillStyle=o||d.color,r.fill(),r.globalAplha=1,r.restore())};O.prototype.renderFunnel=function(r){function d(){for(var Fe=0,De=[],$e=0;$e<Y.length;$e++){if(typeof Y[$e].y>"u")return-1;Y[$e].y=typeof Y[$e].y=="number"?Y[$e].y:0,Fe+=Math.abs(Y[$e].y)}if(Fe===0)return-1;for($e=De[0]=0;$e<Y.length;$e++)De.push(Math.abs(Y[$e].y)*ve/Fe);return De}function h(){var Fe=mt,De=Ft,$e=Ge,ft=ri,Xe,bt;Xe=oe,bt=J-Ae,ft=Math.abs((bt-Xe)*(De-Fe+(ft-$e))/2),$e=ri-Ge,Xe=bt-Xe,bt=$e*(bt-J),bt=Math.abs(bt),bt=ft+bt;for(var ft=[],Qi=0,Wt=0;Wt<Y.length;Wt++){if(typeof Y[Wt].y>"u")return-1;Y[Wt].y=typeof Y[Wt].y=="number"?Y[Wt].y:0,Qi+=Math.abs(Y[Wt].y)}if(Qi===0)return-1;for(var Vt=ft[0]=0,Ue=0,ai,Mi,De=De-Fe,Vt=!1,Wt=0;Wt<Y.length;Wt++)Fe=Math.abs(Y[Wt].y)*bt/Qi,Vt?ai=Number($e.toFixed(3))==0?0:Fe/$e:(Mi=Di*Di*De*De-4*Math.abs(Di)*Fe,0>Mi?(Mi=$e,Vt=(De+Mi)*(Xe-Ue)/2,Fe-=Vt,ai=Xe-Ue,Ue+=Xe-Ue,ai+=Mi==0?0:Fe/Mi,Ue+=Fe/Mi,Vt=!0):(ai=(Math.abs(Di)*De-Math.sqrt(Mi))/2,Mi=De-2*ai/Math.abs(Di),Ue+=ai,Ue>Xe&&(Ue-=ai,Mi=$e,Vt=(De+Mi)*(Xe-Ue)/2,Fe-=Vt,ai=Xe-Ue,Ue+=Xe-Ue,ai+=Fe/Mi,Ue+=Fe/Mi,Vt=!0),De=Mi)),ft.push(ai);return ft}function o(){if(A&&Y){for(var Fe,De,$e,ft,Xe,bt,Qi,Wt,Ue,ai,Mi,Vt,dt,gt,Ke,Xt,ii,Li=[],Zi=[],or={percent:null,total:null},Ji=null,wt=0;wt<Y.length;wt++)ii=Ye[wt],ii=typeof ii.x5<"u"?(ii.y2+ii.y4)/2:(ii.y2+ii.y3)/2,ii=u(ii).x2+1,Li[wt]=ce-(isNaN(ii)?0:ii)-pt;ii=.5*pt;for(var wt=0,nu=Y.length-1;wt<Y.length||0<=nu;wt++,nu--)De=A.reversed?Y[nu]:Y[wt],Fe=De.color?De.color:A.reversed?A._colorSet[(Y.length-1-wt)%A._colorSet.length]:A._colorSet[wt%A._colorSet.length],$e=De.indexLabelPlacement||A.indexLabelPlacement||"outside",Xt=De.indexLabelTextAlign||A.indexLabelTextAlign||"left",ft=De.indexLabelBackgroundColor||A.indexLabelBackgroundColor||(X?"transparent":null),Xe=De.indexLabelBorderColor||A.indexLabelBorderColor||(X?"transparent":null),bt=m(De.indexLabelBorderThickness)?A.indexLabelBorderThickness:De.indexLabelBorderThickness,Qi=De.indexLabelFontColor||A.indexLabelFontColor||"#979797",Wt=m(De.indexLabelFontSize)?A.indexLabelFontSize:De.indexLabelFontSize,Ue=De.indexLabelFontStyle||A.indexLabelFontStyle||"normal",ai=De.indexLabelFontFamily||A.indexLabelFontFamily||"arial",Mi=De.indexLabelFontWeight||A.indexLabelFontWeight||"normal",Fe=De.indexLabelLineColor||A.options.indexLabelLineColor||Fe,Vt=typeof De.indexLabelLineThickness=="number"?De.indexLabelLineThickness:typeof A.indexLabelLineThickness=="number"?A.indexLabelLineThickness:2,dt=De.indexLabelLineDashType||A.indexLabelLineDashType||"solid",gt=typeof De.indexLabelWrap<"u"?De.indexLabelWrap:typeof A.indexLabelWrap<"u"?A.indexLabelWrap:!0,Ke=A.dataPointIds[wt],z._eventManager.objectMap[Ke]={id:Ke,objectType:"dataPoint",dataPointIndex:wt,dataSeriesIndex:0,funnelSection:Ye[A.reversed?Y.length-1-wt:wt]},A.indexLabelPlacement==="inside"&&(Li[wt]=wt!==On?A.reversed?Ye[wt].x2-Ye[wt].x1:Ye[wt].x3-Ye[wt].x4:Ye[wt].x3-Ye[wt].x6,20>Li[wt]&&(Li[wt]=wt!==On&&A.reversed?Ye[wt].x3-Ye[wt].x4:Ye[wt].x2-Ye[wt].x1,Li[wt]/=2)),Ke=De.indexLabelMaxWidth?De.indexLabelMaxWidth:A.options.indexLabelMaxWidth?A.indexLabelMaxWidth:Li[wt],(Ke>Li[wt]||0>Ke)&&(Ke=Li[wt]),Zi[wt]=A.indexLabelPlacement==="inside"?gt?Math.max(Ye[wt].height,Wt):1.5*Wt:!1,or=z.getPercentAndTotal(A,De),(A.indexLabelFormatter||De.indexLabelFormatter)&&(Ji={chart:z.options,dataSeries:A,dataPoint:De,total:or.total,percent:or.percent}),De=De.indexLabelFormatter?De.indexLabelFormatter(Ji):De.indexLabel?z.replaceKeywordsWithValue(De.indexLabel,De,A,wt):A.indexLabelFormatter?A.indexLabelFormatter(Ji):A.indexLabel?z.replaceKeywordsWithValue(A.indexLabel,De,A,wt):De.label?De.label:"",0>=Vt&&(Vt=0),1e3>Ke&&1e3-Ke<ii&&(Ke+=1e3-Ke),m(A.options.indexLabelMaxWidth)&&(A.indexLabelMaxWidth=m(A.indexLabelMaxWidth)?Ke:Math.max(Ke,A.indexLabelMaxWidth)),be.roundRect||l(be),$e=new de(be,{fontSize:Wt,fontFamily:ai,fontColor:Qi,fontStyle:Ue,fontWeight:Mi,horizontalAlign:$e,textAlign:Xt,backgroundColor:ft,borderColor:Xe,borderThickness:bt,maxWidth:Ke,maxHeight:Zi[wt]===!1?gt?4.28571429*Wt:1.5*Wt:Zi[wt],text:De,padding:ws,textBaseline:"middle"}),$e.measureText(),$e.height=$e.height===2*$e.padding?0:$e.height,$e.width=$e.width===2*$e.padding?0:$e.width,Te.push({textBlock:$e,id:A.reversed?nu:wt,isDirty:!1,lineColor:Fe,lineThickness:Vt,lineDashType:dt,height:$e.height<$e.maxHeight?$e.height:$e.maxHeight,width:$e.width<$e.maxWidth?$e.width:$e.maxWidth})}}function c(){var Fe,De,$e,ft,Xe,bt=[];Xe=!1,$e=0;for(var Qi,Wt=ce-Ft-pt/2,Wt=A.options.indexLabelMaxWidth?A.indexLabelMaxWidth>Wt?Wt:A.indexLabelMaxWidth:Wt,Ue=Te.length-1;0<=Ue;Ue--)Qi=Y[Te[Ue].id],$e=Te[Ue],ft=$e.textBlock,De=(Fe=C(Ue)<Ye.length?Te[C(Ue)]:null)?Fe.textBlock:null,$e=$e.height,Fe&&ft.y+$e+ws>De.y&&(Xe=!0),$e=Qi.indexLabelMaxWidth||Wt,($e>Wt||0>$e)&&($e=Wt),bt.push($e);if(Xe)for(Ue=Te.length-1;0<=Ue;Ue--)Fe=Ye[Ue],Te[Ue].textBlock.maxWidth=bt[bt.length-(Ue+1)],Te[Ue].textBlock.measureText(),Te[Ue].textBlock.height=Te[Ue].textBlock.height===2*Te[Ue].textBlock.padding?0:Te[Ue].textBlock.height,Te[Ue].textBlock.width=Te[Ue].textBlock.width===2*Te[Ue].textBlock.padding?0:Te[Ue].textBlock.width,Te[Ue].textBlock.x=ce-Wt,$e=Te[Ue].textBlock.height<Te[Ue].textBlock.maxHeight?Te[Ue].textBlock.height:Te[Ue].textBlock.maxHeight,Xe=Te[Ue].textBlock.width<Te[Ue].textBlock.maxWidth?Te[Ue].textBlock.width:Te[Ue].textBlock.maxWidth,Te[Ue].height=$e,Te[Ue].width=Xe,$e=typeof Fe.x5<"u"?(Fe.y2+Fe.y4)/2:(Fe.y2+Fe.y3)/2,Te[Ue].textBlock.y=$e-Te[Ue].height/2,A.reversed?(Te[Ue].textBlock.y+Te[Ue].height>At+q&&(Te[Ue].textBlock.y=At+q-Te[Ue].height),Te[Ue].textBlock.y<vt-q&&(Te[Ue].textBlock.y=vt-q)):(Te[Ue].textBlock.y<At-q&&(Te[Ue].textBlock.y=At-q),Te[Ue].textBlock.y+Te[Ue].height>vt+q&&(Te[Ue].textBlock.y=vt+q-Te[Ue].height))}function x(){var Fe,De,$e,ft;if(A.indexLabelPlacement!=="inside")for(var Xe=0;Xe<Ye.length;Xe++)Te[Xe].textBlock.text.length==0?Te[Xe].isDirty=!0:(Fe=Ye[Xe],$e=typeof Fe.x5<"u"?(Fe.y2+Fe.y4)/2:(Fe.y2+Fe.y3)/2,De=A.reversed?typeof Fe.x5<"u"&&$e>Ct?u($e).x2+1:(Fe.x2+Fe.x3)/2+1:typeof Fe.x5<"u"?$e<Ct?u($e).x2+1:(Fe.x4+Fe.x3)/2+1:(Fe.x2+Fe.x3)/2+1,Te[Xe].textBlock.x=De+pt,Te[Xe].textBlock.y=$e-Te[Xe].height/2,A.reversed?(Te[Xe].textBlock.y+Te[Xe].height>At+q&&(Te[Xe].textBlock.y=At+q-Te[Xe].height),Te[Xe].textBlock.y<vt-q&&(Te[Xe].textBlock.y=vt-q)):(Te[Xe].textBlock.y<At-q&&(Te[Xe].textBlock.y=At-q),Te[Xe].textBlock.y+Te[Xe].height>vt+q&&(Te[Xe].textBlock.y=vt+q-Te[Xe].height)));else for(Xe=0;Xe<Ye.length;Xe++)Te[Xe].textBlock.text.length==0?Te[Xe].isDirty=!0:(Fe=Ye[Xe],De=Fe.height,$e=Te[Xe].height,ft=Te[Xe].width,De>=$e?(De=Xe!=On?(Fe.x4+Fe.x3)/2-ft/2:(Fe.x5+Fe.x4)/2-ft/2,$e=Xe!=On?(Fe.y1+Fe.y3)/2-$e/2:(Fe.y1+Fe.y4)/2-$e/2,Te[Xe].textBlock.x=De,Te[Xe].textBlock.y=$e):Te[Xe].isDirty=!0)}function y(){function Fe(dt,gt){var Ke;if(0>dt||dt>=Te.length)return 0;var Xt,ii=Te[dt].textBlock;return 0>gt?(gt*=-1,Xt=b(dt),Ke=S(Xt,dt),Ke>=gt?(ii.y-=gt,gt):dt==0?(0<Ke&&(ii.y-=Ke),Ke):(Ke+=Fe(Xt,-(gt-Ke)),0<Ke&&(ii.y-=Ke),Ke)):(Xt=C(dt),Ke=S(dt,Xt),Ke>=gt?(ii.y+=gt,gt):dt==Ye.length-1?(0<Ke&&(ii.y+=Ke),Ke):(Ke+=Fe(Xt,gt-Ke),0<Ke&&(ii.y+=Ke),Ke))}function De(){var dt,gt,Ke,Xt,ii=0,Li;Xt=(J-oe+2*q)/ai,Li=ai;for(var Zi,or=1;or<Li;or++){Ke=or*Xt;for(var Ji=Te.length-1;0<=Ji;Ji--)!Te[Ji].isDirty&&Te[Ji].textBlock.y<Ke&&Te[Ji].textBlock.y+Te[Ji].height>Ke&&(Zi=C(Ji),!(Zi>=Te.length-1)&&Te[Ji].textBlock.y+Te[Ji].height+ws>Te[Zi].textBlock.y&&(Te[Ji].textBlock.y=Te[Ji].textBlock.y+Te[Ji].height-Ke>Ke-Te[Ji].textBlock.y?Ke+1:Ke-Te[Ji].height-1))}for(Zi=Ye.length-1;0<Zi;Zi--)if(!Te[Zi].isDirty){if(Ke=b(Zi),0>Ke&&(Ke=0,Te[Ke].isDirty))break;if(Te[Zi].textBlock.y<Te[Ke].textBlock.y+Te[Ke].height){for(gt=gt||Zi,Xt=Zi,Li=0;Te[Xt].textBlock.y<Te[Ke].textBlock.y+Te[Ke].height+ws;){if(dt=dt||Te[Xt].textBlock.y+Te[Xt].height,Li+=Te[Xt].height,Li+=ws,Xt=Ke,0>=Xt){Xt=0,Li+=Te[Xt].height;break}if(Ke=b(Xt),0>Ke){Xt=0,Li+=Te[Xt].height;break}}if(Xt!=Zi){ii=Te[Xt].textBlock.y,dt-=ii,dt=Li-dt,ii=$e(dt,gt,Xt);break}}}return ii}function $e(dt,gt,Ke){var Xt=[],ii=0,Li=0;for(dt=Math.abs(dt);Ke<=gt;Ke++)Xt.push(Ye[Ke]);for(Xt.sort(function(Zi,or){return Zi.height-or.height}),Ke=0;Ke<Xt.length&&(gt=Xt[Ke],ii<dt);Ke++)Li++,ii+=Te[gt.id].height+ws,Te[gt.id].textBlock.text="",Te[gt.id].indexLabelText="",Te[gt.id].isDirty=!0,Te[gt.id].textBlock.measureText();return Li}for(var ft,Xe,bt,Qi,Wt,Ue,ai=1,Mi=0;Mi<2*ai;Mi++){for(var Vt=Te.length-1;0<=Vt&&(0<=b(Vt)&&b(Vt),bt=Te[Vt],Qi=bt.textBlock,Ue=(Wt=C(Vt)<Ye.length?Te[C(Vt)]:null)?Wt.textBlock:null,ft=+bt.height.toFixed(6),Xe=+Qi.y.toFixed(6),!(!bt.isDirty&&Wt&&Xe+ft+ws>+Ue.y.toFixed(6)&&(ft=Qi.y+ft+ws-Ue.y,Xe=Fe(Vt,-ft),Xe<ft&&(0<Xe&&(ft-=Xe),Xe=Fe(C(Vt),ft),Xe!=ft))));Vt--);De()}}function S(Fe,De){return(De<Ye.length?Te[De].textBlock.y:A.reversed?At+q:vt+q)-(0>Fe?A.reversed?vt-q:At-q:Te[Fe].textBlock.y+Te[Fe].height+ws)}function M(Fe,De,$e){var ft,Xe,bt,Qi=[],Wt=q,Ue=[];if(De!==-1&&(0<=Ii.indexOf(De)?(Xe=Ii.indexOf(De),Ii.splice(Xe,1)):(Ii.push(De),Ii=Ii.sort(function(Vt,dt){return Vt-dt}))),Ii.length===0)Qi=vo;else{Xe=q*(Ii.length!=1||Ii[0]!=0&&Ii[0]!=Ye.length-1?2:1)/_();for(var ai=0;ai<Ye.length;ai++){if(Ii.length==1&&Ii[0]==0){if(ai===0){Qi.push(vo[ai]),ft=Wt;continue}}else ai===0&&(ft=-1*Wt);Qi.push(vo[ai]+ft),(0<=Ii.indexOf(ai)||ai<Ye.length&&0<=Ii.indexOf(ai+1))&&(ft+=Xe)}}bt=function(){for(var Vt=[],dt=0;dt<Ye.length;dt++)Vt.push(Qi[dt]-Ye[dt].y1);return Vt}();var Mi={startTime:new Date().getTime(),duration:$e||500,easingFunction:function(Vt,dt,gt,Ke){return xe.easing.easeOutQuart(Vt,dt,gt,Ke)},changeSection:function(Vt){for(var dt,gt,Ke=0;Ke<Ye.length;Ke++)dt=bt[Ke],gt=Ye[Ke],dt*=Vt,typeof Ue[Ke]>"u"&&(Ue[Ke]=0),0>Ue&&(Ue*=-1),gt.y1+=dt-Ue[Ke],gt.y2+=dt-Ue[Ke],gt.y3+=dt-Ue[Ke],gt.y4+=dt-Ue[Ke],gt.y5&&(gt.y5+=dt-Ue[Ke],gt.y6+=dt-Ue[Ke]),Ue[Ke]=dt}};Fe._animator.animate(0,$e,function(Vt){var dt=Fe.plotArea.ctx||Fe.ctx;Kl=!0,dt.clearRect(V.x1,V.y1,V.x2-V.x1,V.y2-V.y1),dt.fillStyle=Fe.backgroundColor,dt.fillRect(V.x1,V.y1,V.width,V.height),Mi.changeSection(Vt,De);var gt={};for(gt.dataSeries=A,gt.dataPoint=A.reversed?A.dataPoints[Y.length-1-De]:A.dataPoints[De],gt.index=A.reversed?Y.length-1-De:De,Fe.toolTip.highlightObjects([gt]),gt=0;gt<Ye.length;gt++)ge(dt,Ye[gt],A.fillOpacity);R(dt),le&&(A.indexLabelPlacement!=="inside"?v(dt):x(),I(dt)),1<=Vt&&(Kl=!1)},null,xe.easing.easeOutQuart)}function _(){for(var Fe=0,De=0;De<Ye.length-1;De++)(0<=Ii.indexOf(De)||0<=Ii.indexOf(De+1))&&Fe++;return Fe}function v(Fe){for(var De,$e,ft,Xe,bt=0;bt<Ye.length;bt++)Xe=Te[bt].lineThickness%2===1?.5:0,$e=((Ye[bt].y2+Ye[bt].y4)/2<<0)+Xe,De=u($e).x2-1,isNaN(De)&&Math.round(Ye[bt].x1)===Math.round(Ye[bt].x4)&&Math.round(Ye[bt].x2)===Math.round(Ye[bt].x3)&&(De=Ye[bt].x2),ft=Te[bt].textBlock.x,Xe=(Te[bt].textBlock.y+Te[bt].height/2<<0)+Xe,Te[bt].isDirty||Te[bt].lineThickness==0||(Fe.strokeStyle=Te[bt].lineColor,Fe.lineWidth=Te[bt].lineThickness,Fe.setLineDash&&Fe.setLineDash(P(Te[bt].lineDashType,Te[bt].lineThickness)),Fe.beginPath(),Fe.moveTo(De,$e),Fe.lineTo(ft,Xe),Fe.stroke())}function b(Fe){for(Fe-=1;-1<=Fe&&Fe!=-1&&Te[Fe].isDirty;Fe--);return Fe}function C(Fe){for(Fe+=1;Fe<=Ye.length&&Fe!=Ye.length&&Te[Fe].isDirty;Fe++);return Fe}function u(Fe){for(var De,$e=0;$e<Y.length;$e++)if(Ye[$e].y1<Fe&&Ye[$e].y4>Fe){De=Ye[$e];break}return De?(Fe=De.y6&&Fe>De.y6?De.x3+(De.x4-De.x3)/(De.y4-De.y3)*(Fe-De.y3):De.x2+(De.x3-De.x2)/(De.y3-De.y2)*(Fe-De.y2),{x1:Fe,x2:Fe}):-1}function I(Fe){for(var De=0;De<Ye.length;De++)Te[De].isDirty||(Fe&&(Te[De].textBlock.ctx=Fe),Te[De].textBlock.y+=Te[De].textBlock._lineHeight/2,Te[De].textBlock.render(!0),Te[De].textBlock.y-=Te[De].textBlock._lineHeight/2)}function R(Fe){if(z.plotArea.layoutManager.reset(),Fe.roundRect||l(Fe),z.title&&(z.title.dockInsidePlotArea||z.title.horizontalAlign==="center"&&z.title.verticalAlign==="center")&&(z.title.ctx=Fe,z.title.render()),z.subtitles)for(var De=0;De<z.subtitles.length;De++){var $e=z.subtitles[De];($e.dockInsidePlotArea||$e.horizontalAlign==="center"&&$e.verticalAlign==="center")&&(z.subtitles.ctx=Fe,$e.render())}z.legend&&(z.legend.dockInsidePlotArea||z.legend.horizontalAlign==="center"&&z.legend.verticalAlign==="center")&&(z.legend.ctx=Fe,z.legend.setLayout(),z.legend.render()),Be.fNg&&Be.fNg(z)}var z=this;if(!(0>=r.dataSeriesIndexes.length)){for(var A=this.data[r.dataSeriesIndexes[0]],Y=A.dataPoints,V=this.plotArea,q=.025*V.width,te=.01*V.width,Q=0,ve=V.height-2*q,Me=Math.min(V.width-2*te,2.8*V.height),le=!1,ue=0;ue<Y.length;ue++)!le&&typeof Y[ue].indexLabel<"u"&&Y[ue].indexLabel!==null&&0<Y[ue].indexLabel.toString().length&&(le=!0),!le&&typeof Y[ue].label<"u"&&Y[ue].label!==null&&0<Y[ue].label.toString().length&&(le=!0),(!le&&typeof A.indexLabelFormatter=="function"||typeof Y[ue].indexLabelFormatter=="function")&&(le=!0);le=le||typeof A.indexLabel<"u"&&A.indexLabel!==null&&0<A.indexLabel.toString().length,A.indexLabelPlacement!=="inside"&&le||(te=(V.width-.75*Me)/2);var ue=V.x1+te,ce=V.x2-te,oe=V.y1+q,J=V.y2-q,be=r.targetCanvasCtx||this.plotArea.ctx||this.ctx;if(A.length!=0&&A.dataPoints&&A.visible&&Y.length!==0){var Ae,ie;r=75*Me/100;var pt=30*(ce-r)/100;A.type==="funnel"?(Ae=m(A.options.neckHeight)?.35*ve:A.neckHeight,ie=m(A.options.neckWidth)?.25*r:A.neckWidth,typeof Ae=="string"&&Ae.match(/%$/)?(Ae=parseInt(Ae),Ae=Ae*ve/100):Ae=parseInt(Ae),typeof ie=="string"&&ie.match(/%$/)?(ie=parseInt(ie),ie=ie*r/100):ie=parseInt(ie),Ae>ve?Ae=ve:0>=Ae&&(Ae=0),ie>r?ie=r-.5:0>=ie&&(ie=0)):A.type==="pyramid"&&(ie=Ae=0,A.reversed=!A.reversed);var te=ue+r/2,mt=ue,Ft=ue+r,At=A.reversed?J:oe,Ge=te-ie/2,ri=te+ie/2,Ct=A.reversed?oe+Ae:J-Ae,vt=A.reversed?oe:J;ie=A.valueRepresents=A.valueRepresents?A.valueRepresents:"height",ue=[],r=[];var Ye=[],te=[],Jt=oe,On,Di=(Ct-At)/(Ge-mt),Hs=-Di,Me=ie==="area"?h():d();if(Me!==-1){if(A.reversed)for(te.push(Jt),ie=Me.length-1;0<ie;ie--)Jt+=Me[ie],te.push(Math.round(Jt));else for(ie=0;ie<Me.length;ie++)Jt+=Me[ie],te.push(Math.round(Jt));if(A.reversed)for(ie=0;ie<Me.length;ie++)te[ie]<Ct?(ue.push(Ge),r.push(ri),On=ie):(ue.push((te[ie]-At+Di*mt)/Di),r.push((te[ie]-At+Hs*Ft)/Hs));else for(ie=0;ie<Me.length;ie++)te[ie]<Ct?(ue.push((te[ie]-At+Di*mt)/Di),r.push((te[ie]-At+Hs*Ft)/Hs),On=ie):(ue.push(Ge),r.push(ri));for(ie=0;ie<Me.length-1;ie++)Jt=A.reversed?Y[Y.length-1-ie].color?Y[Y.length-1-ie].color:A._colorSet[(Y.length-1-ie)%A._colorSet.length]:Y[ie].color?Y[ie].color:A._colorSet[ie%A._colorSet.length],ie===On?Ye.push({x1:ue[ie],y1:te[ie],x2:r[ie],y2:te[ie],x3:ri,y3:Ct,x4:r[ie+1],y4:te[ie+1],x5:ue[ie+1],y5:te[ie+1],x6:Ge,y6:Ct,id:ie,height:te[ie+1]-te[ie],color:Jt}):Ye.push({x1:ue[ie],y1:te[ie],x2:r[ie],y2:te[ie],x3:r[ie+1],y3:te[ie+1],x4:ue[ie+1],y4:te[ie+1],id:ie,height:te[ie+1]-te[ie],color:Jt}),A.dataPointEOs[ie]&&Ye[ie]&&(A.dataPointEOs[ie].sectionsofFunnel=Ye[ie]);var ws=2,Te=[],Kl=!1,Ii=[],vo=[],ue=!1;for(r=r=0,k(Ii),ie=0;ie<Y.length;ie++)Y[ie].exploded&&(ue=!0,A.reversed?Ii.push(Y.length-1-ie):Ii.push(ie));if(be.clearRect(V.x1,V.y1,V.width,V.height),be.fillStyle=z.backgroundColor,be.fillRect(V.x1,V.y1,V.width,V.height),le&&A.visible&&(o(),x(),A.indexLabelPlacement!=="inside")){for(c(),y(),ie=0;ie<Y.length;ie++)Te[ie].isDirty||(r=Te[ie].textBlock.x+Te[ie].width,r=(ce-r)/2,ie==0&&(Q=r),Q>r&&(Q=r));for(ie=0;ie<Ye.length;ie++)Ye[ie].x1+=Q,Ye[ie].x2+=Q,Ye[ie].x3+=Q,Ye[ie].x4+=Q,Ye[ie].x5&&(Ye[ie].x5+=Q,Ye[ie].x6+=Q),Te[ie].textBlock.x+=Q}for(ie=0;ie<Ye.length;ie++)Q=Ye[ie],ge(be,Q,A.fillOpacity),vo.push(Q.y1);if(R(be),le&&A.visible&&(A.indexLabelPlacement==="inside"||z.animationEnabled||v(be),z.animationEnabled||I()),!le)for(ie=0;ie<Y.length;ie++)Q=A.dataPointIds[ie],r={id:Q,objectType:"dataPoint",dataPointIndex:ie,dataSeriesIndex:0,funnelSection:Ye[A.reversed?Y.length-1-ie:ie]},z._eventManager.objectMap[Q]=r;return(!z.animationEnabled&&ue||z.animationEnabled&&!z.animatedRender)&&M(z,-1,0),this.funnelPyramidClickHandler=function(ft){var Xe=-1;!Kl&&!z.isAnimating&&(m(ft.dataSeries.explodeOnClick)||ft.dataSeries.explodeOnClick)&&(Xe=A.reversed?Y.length-1-ft.dataPointIndex:ft.dataPointIndex,0<=Xe)&&(ft=Xe,(A.type==="funnel"||A.type==="pyramid")&&(A.reversed?Y[Y.length-1-ft].exploded=!Y[Y.length-1-ft].exploded:Y[ft].exploded=!Y[ft].exploded),M(z,Xe,500))},{source:be,dest:this.plotArea.ctx,animationCallback:function(ft,Xe){xe.fadeInAnimation(ft,Xe),1<=ft&&(M(z,-1,500),R(z.plotArea.ctx||z.ctx))},easingFunction:xe.easing.easeInQuad,animationBase:0}}}}},O.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r){window.setTimeout(r,1e3/60)}}(),O.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,O.prototype.set=function(r,d,h){h=typeof h>"u"?!0:h,r==="options"?(this.options=d,h&&this.render()):O.base.set.call(this,r,d,h)},O.prototype.exportChart=function(r){r=typeof r>"u"?{}:r;var d=r.format?r.format:"png",h=r.fileName?r.fileName:this.exportFileName;if(r.toDataURL)return this.canvas.toDataURL("image/"+d);var o=this.canvas;if(o&&d&&h){h=h+"."+d,r="image/"+d;var o=o.toDataURL(r),c=!1,x=document.createElement("a");if(x.download=h,x.href=o,typeof Blob<"u"&&new Blob){for(var y=o.replace(/^data:[a-z\/]*;base64,/,""),y=atob(y),S=new ArrayBuffer(y.length),S=new Uint8Array(S),M=0;M<y.length;M++)S[M]=y.charCodeAt(M);d=new Blob([S.buffer],{type:"image/"+d});try{window.navigator.msSaveBlob(d,h),c=!0}catch{x.dataset.downloadurl=[r,x.download,x.href].join(":"),x.href=window.URL.createObjectURL(d)}}if(!c)try{event=document.createEvent("MouseEvents"),event.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),x.dispatchEvent?x.dispatchEvent(event):x.fireEvent&&x.fireEvent("onclick")}catch{d=window.open(),d.document.write("<img src='"+o+"'></img><div>Please right click on the image and save it to your device</div>"),d.document.close()}}},O.prototype.print=function(){var r=this.exportChart({toDataURL:!0}),d=document.createElement("iframe");d.setAttribute("class","canvasjs-chart-print-frame"),j(d,{position:"absolute",width:"100%",border:"0px",margin:"0px 0px 0px 0px",padding:"0px 0px 0px 0px"}),d.style.height=this.height+"px",this._canvasJSContainer.appendChild(d);var h=this,o=d.contentWindow||d.contentDocument.document||d.contentDocument;o.document.open(),o.document.write(`<!DOCTYPE HTML>
<html><body><img src="`+r+'"/><body/></html>'),o.document.body&&o.document.body.style&&(o.document.body.style.margin="0px 0px 0px 0px",o.document.body.style.padding="0px 0px 0px 0px"),o.document.close(),setTimeout(function(){o.focus(),o.print(),setTimeout(function(){h._canvasJSContainer.removeChild(d)},1e3)},500)},O.prototype.getPercentAndTotal=function(r,d){var h=null,o=null,c=h=null;if(0<=r.type.indexOf("stacked"))o=0,h=d.x.getTime?d.x.getTime():d.x,h in r.plotUnit.yTotals&&(o=r.plotUnit.yTotals[h],h=r.plotUnit.yAbsTotals[h],c=isNaN(d.y)||h===0?0:100*(d.y/h));else if(r.type==="pie"||r.type==="doughnut"||r.type==="funnel"||r.type==="pyramid"){for(h=o=0;h<r.dataPoints.length;h++)isNaN(r.dataPoints[h].y)||(o+=r.dataPoints[h].y);c=isNaN(d.y)?0:100*(d.y/o)}return{percent:c,total:o}},O.prototype.replaceKeywordsWithValue=function(r,d,h,o,c){var x=this;if(c=typeof c>"u"?0:c,(0<=h.type.indexOf("stacked")||h.type==="pie"||h.type==="doughnut"||h.type==="funnel"||h.type==="pyramid")&&(0<=r.indexOf("#percent")||0<=r.indexOf("#total"))){var M="#percent",S="#total",y=this.getPercentAndTotal(h,d),S=isNaN(y.total)?S:y.total,M=isNaN(y.percent)?M:y.percent;do{if(y="",h.percentFormatString)y=h.percentFormatString;else{var y="#,##0.",_=Math.max(Math.ceil(Math.log(1/Math.abs(M))/Math.LN10),2);(isNaN(_)||!isFinite(_))&&(_=2);for(var v=0;v<_;v++)y+="#";h.percentFormatString=y}r=r.replace("#percent",Nt(M,y,x._cultureInfo)),r=r.replace("#total",Nt(S,h.yValueFormatString?h.yValueFormatString:"#,##0.########",x._cultureInfo))}while(0<=r.indexOf("#percent")||0<=r.indexOf("#total"))}return r.replace(/\{.*?\}|"[^"]*"|'[^']*'/g,function(b){if(b[0]==='"'&&b[b.length-1]==='"'||b[0]==="'"&&b[b.length-1]==="'")return b.slice(1,b.length-1);b=a(b.slice(1,b.length-1)),b=b.replace("#index",c);var C=null;try{var u=b.match(/(.*?)\s*\[\s*(.*?)\s*\]/);u&&0<u.length&&(C=a(u[2]),b=a(u[1]))}catch{}if(u=null,b==="color")return h.type==="waterfall"?d.color?d.color:0<d.y?h.risingColor:h.fallingColor:h.type==="error"?h.color?h.color:h._colorSet[C%h._colorSet.length]:d.color?d.color:h.color?h.color:h._colorSet[o%h._colorSet.length];if(d.hasOwnProperty(b))u=d;else if(h.hasOwnProperty(b))u=h;else return"";return u=u[b],C!==null&&(u=u[C]),b==="x"?(h.axisX&&h.axisX.valueType==="dateTime"||h.xValueType==="dateTime"||d.x&&d.x.getTime)&&!h.axisX.logarithmic?Ki(u,d.xValueFormatString?d.xValueFormatString:h.xValueFormatString?h.xValueFormatString:h.xValueFormatString=x.axisX&&x.axisX.autoValueFormatString?x.axisX.autoValueFormatString:"DD MMM YY",x._cultureInfo):Nt(u,d.xValueFormatString?d.xValueFormatString:h.xValueFormatString?h.xValueFormatString:h.xValueFormatString="#,##0.########",x._cultureInfo):b==="y"?Nt(u,d.yValueFormatString?d.yValueFormatString:h.yValueFormatString?h.yValueFormatString:h.yValueFormatString="#,##0.########",x._cultureInfo):b==="z"?Nt(u,d.zValueFormatString?d.zValueFormatString:h.zValueFormatString?h.zValueFormatString:h.zValueFormatString="#,##0.########",x._cultureInfo):u})},e(Ne,re),Ne.prototype.setLayout=function(){var r=this.dockInsidePlotArea?this.chart.plotArea:this.chart,d=r.layoutManager.getFreeSpace(),h=null,o=0,c=0,x=0,y=0,S=this.markerMargin=this.chart.options.legend&&!m(this.chart.options.legend.markerMargin)?this.chart.options.legend.markerMargin:.3*this.fontSize;this.height=0;var M=[],_=[];this.verticalAlign==="top"||this.verticalAlign==="bottom"?(this.orientation="horizontal",h=this.verticalAlign,x=this.maxWidth=this.maxWidth!==null?this.maxWidth:d.width,y=this.maxHeight=this.maxHeight!==null?this.maxHeight:.5*d.height):this.verticalAlign==="center"&&(this.orientation="vertical",(this.horizontalAlign==="left"||this.horizontalAlign==="center"||this.horizontalAlign==="right")&&(h=this.horizontalAlign),x=this.maxWidth=this.maxWidth!==null?this.maxWidth:.5*d.width,y=this.maxHeight=this.maxHeight!==null?this.maxHeight:d.height),this.errorMarkerColor=[];for(var v=0;v<this.dataSeries.length;v++){var b=this.dataSeries[v];if(b.dataPoints&&b.dataPoints.length){if(b.type!=="pie"&&b.type!=="doughnut"&&b.type!=="funnel"&&b.type!=="pyramid"){var C=b.legendMarkerType=b.legendMarkerType?b.legendMarkerType:b.type!=="line"&&b.type!=="stepLine"&&b.type!=="spline"&&b.type!=="scatter"&&b.type!=="bubble"||!b.markerType?b.type==="error"&&b._linkedSeries?b._linkedSeries.legendMarkerType?b._linkedSeries.legendMarkerType:Oe.getDefaultLegendMarker(b._linkedSeries.type):Oe.getDefaultLegendMarker(b.type):b.markerType,u=b.legendText?b.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:b,dataPoint:null}):b.name,I=b.legendMarkerColor=b.legendMarkerColor?b.legendMarkerColor:b.markerColor?b.markerColor:b.type==="error"?m(b.whiskerColor)?b._colorSet[0]:b.whiskerColor:b._colorSet[0],R=b.markerSize||b.type!=="line"&&b.type!=="stepLine"&&b.type!=="spline"?.75*this.lineHeight:0,z=b.legendMarkerBorderColor?b.legendMarkerBorderColor:b.markerBorderColor,A=b.legendMarkerBorderThickness?b.legendMarkerBorderThickness:b.markerBorderThickness?Math.max(1,Math.round(.2*R)):0;b.type==="error"&&this.errorMarkerColor.push(I),u=b.legendText=this.chart.replaceKeywordsWithValue(u,b.dataPoints[0],b,v),C={markerType:C,markerColor:I,text:u,textBlock:null,chartType:b.type,markerSize:R,lineColor:b._colorSet[0],dataSeriesIndex:b.index,dataPointIndex:null,markerBorderColor:z,markerBorderThickness:A},M.push(C)}else for(var Y=0;Y<b.dataPoints.length;Y++){var V=b.dataPoints[Y],C=V.legendMarkerType?V.legendMarkerType:b.legendMarkerType?b.legendMarkerType:Oe.getDefaultLegendMarker(b.type),u=V.legendText?V.legendText:b.legendText?b.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:b,dataPoint:V}):V.name?V.name:"DataPoint: "+(Y+1),I=V.legendMarkerColor?V.legendMarkerColor:b.legendMarkerColor?b.legendMarkerColor:V.color?V.color:b.color?b.color:b._colorSet[Y%b._colorSet.length],R=.75*this.lineHeight,z=V.legendMarkerBorderColor?V.legendMarkerBorderColor:b.legendMarkerBorderColor?b.legendMarkerBorderColor:V.markerBorderColor?V.markerBorderColor:b.markerBorderColor,A=V.legendMarkerBorderThickness?V.legendMarkerBorderThickness:b.legendMarkerBorderThickness?b.legendMarkerBorderThickness:V.markerBorderThickness||b.markerBorderThickness?Math.max(1,Math.round(.2*R)):0,u=this.chart.replaceKeywordsWithValue(u,V,b,Y),C={markerType:C,markerColor:I,text:u,textBlock:null,chartType:b.type,markerSize:R,dataSeriesIndex:v,dataPointIndex:Y,markerBorderColor:z,markerBorderThickness:A};(V.showInLegend||b.showInLegend&&V.showInLegend!==!1)&&M.push(C)}m(b.legendText)&&(b.legendText=b.name)}}if(this.reversed===!0&&M.reverse(),0<M.length){for(b=null,u=V=Y=0,V=this.itemWidth!==null?this.itemMaxWidth!==null?Math.min(this.itemWidth,this.itemMaxWidth,x):this.itemMaxWidth=Math.min(this.itemWidth,x):this.itemMaxWidth!==null?Math.min(this.itemMaxWidth,x):this.itemMaxWidth=x,R=R===0?.75*this.lineHeight:R,V=(this.itemMaxWidth?this.itemMaxWidth:V)-(R+S),v=0;v<M.length;v++)C=M[v],I=V,(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine")&&(I-=2*.1*this.lineHeight),0>=y||typeof y>"u"||0>=I||typeof I>"u"||(this.orientation==="horizontal"?(C.textBlock=new de(this.ctx,{x:0,y:0,maxWidth:I,maxHeight:this.itemWrap?y:this.lineHeight,angle:0,text:C.text,textAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),C.textBlock.measureText(),this.itemWidth!==null&&(C.textBlock.width=this.itemWidth-(R+S+(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine"?2*.1*this.lineHeight:0))),(!b||b.width+Math.round(C.textBlock.width+R+S+(b.width===0?0:this.horizontalSpacing)+(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine"?2*.1*this.lineHeight:0))>x)&&(b={items:[],width:0},_.push(b),this.height+=u,u=0),u=Math.max(u,C.textBlock.height?C.textBlock.height:this.lineHeight),C.textBlock.x=b.width,C.textBlock.y=0,b.width+=Math.round(C.textBlock.width+R+S+(b.width===0?0:this.horizontalSpacing)+(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine"?2*.1*this.lineHeight:0)),b.items.push(C),this.width=Math.max(b.width,this.width)):(C.textBlock=new de(this.ctx,{x:0,y:0,maxWidth:V,maxHeight:this.itemWrap===!0?y:1.5*this.fontSize,angle:0,text:C.text,textAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),C.textBlock.measureText(),this.itemWidth!==null&&(C.textBlock.width=this.itemWidth-(R+S+(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine"?2*.1*this.lineHeight:0))),this.height<y-this.lineHeight?(b={items:[],width:0},_.push(b)):(b=_[Y],Y=(Y+1)%_.length),b&&(this.height+=C.textBlock.height?C.textBlock.height:this.lineHeight,C.textBlock.x=b.width,C.textBlock.y=0,b.width+=Math.round(C.textBlock.width+R+S+(b.width===0?0:this.horizontalSpacing)+(C.chartType==="line"||C.chartType==="spline"||C.chartType==="stepLine"?2*.1*this.lineHeight:0)),b.items.push(C),this.width=Math.max(b.width,this.width))));this.height=this.itemWrap===!1?_.length*this.lineHeight:this.height+u,this.height=Math.min(y,this.height),this.width=Math.min(x,this.width)}for(this.verticalAlign==="top"?(c=this.horizontalAlign==="left"?d.x1:this.horizontalAlign==="right"?d.x2-this.width:d.x1+d.width/2-this.width/2,o=d.y1):this.verticalAlign==="center"?(c=this.horizontalAlign==="left"?d.x1:this.horizontalAlign==="right"?d.x2-this.width:d.x1+d.width/2-this.width/2,o=d.y1+d.height/2-this.height/2):this.verticalAlign==="bottom"&&(c=this.horizontalAlign==="left"?d.x1:this.horizontalAlign==="right"?d.x2-this.width:d.x1+d.width/2-this.width/2,o=d.y2-this.height),this.items=M,v=0;v<this.items.length;v++)C=M[v],C.id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[C.id]={id:C.id,objectType:"legendItem",legendItemIndex:v,dataSeriesIndex:C.dataSeriesIndex,dataPointIndex:C.dataPointIndex};this.markerSize=R,this.rows=_,0<M.length&&r.layoutManager.registerSpace(h,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:c,y1:o,x2:c+this.width,y2:o+this.height}},Ne.prototype.render=function(){var r=this.bounds.x1,d=this.bounds.y1,h=this.markerMargin,o=this.maxWidth,c=this.maxHeight,x=this.markerSize,y=this.rows;(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(r,d,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor);for(var S=0,M=0;M<y.length;M++){for(var _=y[M],v=0,b=0;b<_.items.length;b++){var C=_.items[b],u=C.textBlock.x+r+(b===0?.2*x:this.horizontalSpacing),I=d+S,R=u;if(this.chart.data[C.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(r,d,o,Math.max(c-c%this.lineHeight,0)),this.ctx.clip(),(C.chartType==="line"||C.chartType==="stepLine"||C.chartType==="spline")&&(this.ctx.strokeStyle=C.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(u-.1*this.lineHeight,I+this.lineHeight/2),this.ctx.lineTo(u+.85*this.lineHeight,I+this.lineHeight/2),this.ctx.stroke(),R-=.1*this.lineHeight),C.chartType==="error"){this.ctx.strokeStyle=this.errorMarkerColor[0],this.ctx.lineWidth=x/8,this.ctx.beginPath();var z=u-.08*this.lineHeight+.1*this.lineHeight,A=I+.15*this.lineHeight,Y=.7*this.lineHeight,V=Y+.02*this.lineHeight;this.ctx.moveTo(z,A),this.ctx.lineTo(z+Y,A),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(z+Y/2,A),this.ctx.lineTo(z+Y/2,A+V),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(z,A+V),this.ctx.lineTo(z+Y,A+V),this.ctx.stroke(),this.errorMarkerColor.shift()}Ve.drawMarker(u+x/2,I+this.lineHeight/2,this.ctx,C.markerType,C.chartType==="error"||C.chartType==="line"||C.chartType==="spline"?C.markerSize/2:C.markerSize,C.markerColor,C.markerBorderColor,C.markerBorderThickness),C.textBlock.x=u+h+x,(C.chartType==="line"||C.chartType==="stepLine"||C.chartType==="spline")&&(C.textBlock.x+=.1*this.lineHeight),C.textBlock.y=Math.round(I+this.lineHeight/2),C.textBlock.render(!0),this.ctx.restore(),v=0<b?Math.max(v,C.textBlock.height?C.textBlock.height:this.lineHeight):C.textBlock.height?C.textBlock.height:this.lineHeight,this.chart.data[C.dataSeriesIndex].visible||(this.ctx.globalAlpha=1),u=f(C.id),this.ghostCtx.fillStyle=u,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(R,C.textBlock.y-this.lineHeight/2,C.textBlock.x+C.textBlock.width-R,C.textBlock.height?C.textBlock.height:this.lineHeight),C.x1=this.chart._eventManager.objectMap[C.id].x1=R,C.y1=this.chart._eventManager.objectMap[C.id].y1=C.textBlock.y-this.lineHeight/2,C.x2=this.chart._eventManager.objectMap[C.id].x2=C.textBlock.x+C.textBlock.width,C.y2=this.chart._eventManager.objectMap[C.id].y2=C.textBlock.y+(C.textBlock.height?C.textBlock.height:this.lineHeight)-this.lineHeight/2}S+=v}},e(Oe,re),Oe.prototype.getDefaultAxisPlacement=function(){var r=this.type;return r==="column"||r==="line"||r==="stepLine"||r==="spline"||r==="area"||r==="stepArea"||r==="splineArea"||r==="stackedColumn"||r==="stackedLine"||r==="bubble"||r==="scatter"||r==="stackedArea"||r==="stackedColumn100"||r==="stackedLine100"||r==="stackedArea100"||r==="candlestick"||r==="ohlc"||r==="rangeColumn"||r==="rangeArea"||r==="rangeSplineArea"||r==="boxAndWhisker"||r==="waterfall"?"normal":r==="bar"||r==="stackedBar"||r==="stackedBar100"||r==="rangeBar"?"xySwapped":r==="pie"||r==="doughnut"||r==="funnel"||r==="pyramid"?"none":(r!=="error"&&window.console.log("Unknown Chart Type: "+r),null)},Oe.getDefaultLegendMarker=function(r){return r==="column"||r==="stackedColumn"||r==="stackedLine"||r==="bar"||r==="stackedBar"||r==="stackedBar100"||r==="bubble"||r==="scatter"||r==="stackedColumn100"||r==="stackedLine100"||r==="stepArea"||r==="candlestick"||r==="ohlc"||r==="rangeColumn"||r==="rangeBar"||r==="rangeArea"||r==="rangeSplineArea"||r==="boxAndWhisker"||r==="waterfall"?"square":r==="line"||r==="stepLine"||r==="spline"||r==="pie"||r==="doughnut"?"circle":r==="area"||r==="splineArea"||r==="stackedArea"||r==="stackedArea100"||r==="funnel"||r==="pyramid"?"triangle":r==="error"?"none":(window.console.log("Unknown Chart Type: "+r),null)},Oe.prototype.getDataPointAtX=function(r,d){if(!this.dataPoints||this.dataPoints.length===0)return null;var h={dataPoint:null,distance:1/0,index:NaN},o=null,c=0,x=0,y=1,S=1/0,M=0,_=0,v=0;for(this.chart.plotInfo.axisPlacement!=="none"&&(this.axisX.logarithmic?(v=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x),v=1<v?Math.min(Math.max((this.dataPoints.length-1)/v*Math.log(r/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0):(v=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,v=0<v?Math.min(Math.max((this.dataPoints.length-1)/v*(r-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0));;){if(x=0<y?v+c:v-c,0<=x&&x<this.dataPoints.length){var o=this.dataPoints[x],b=this.axisX&&this.axisX.logarithmic?o.x>r?o.x/r:r/o.x:Math.abs(o.x-r);if(b<h.distance&&(h.dataPoint=o,h.distance=b,h.index=x),o=b,o<=S?S=o:0<y?M++:_++,1e3<M&&1e3<_)break}else if(0>v-c&&v+c>=this.dataPoints.length)break;y===-1?(c++,y=1):y=-1}return d||(h.dataPoint.x.getTime?h.dataPoint.x.getTime():h.dataPoint.x)!==(r.getTime?r.getTime():r)?d&&h.dataPoint!==null?h:null:h},Oe.prototype.getDataPointAtXY=function(r,d,h){if(!this.dataPoints||this.dataPoints.length===0||r<this.chart.plotArea.x1||r>this.chart.plotArea.x2||d<this.chart.plotArea.y1||d>this.chart.plotArea.y2)return null;h=h||!1;var o=[],c=0,x=0,y=1,S=!1,M=1/0,_=0,v=0,C=0;if(this.chart.plotInfo.axisPlacement!=="none")if(C=(this.chart.axisX[0]?this.chart.axisX[0]:this.chart.axisX2[0]).getXValueAt({x:r,y:d}),this.axisX.logarithmic)var b=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x),C=1<b?Math.min(Math.max((this.dataPoints.length-1)/b*Math.log(C/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0;else b=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,C=0<b?Math.min(Math.max((this.dataPoints.length-1)/b*(C-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0;for(;;){if(x=0<y?C+c:C-c,0<=x&&x<this.dataPoints.length){var b=this.chart._eventManager.objectMap[this.dataPointIds[x]],u=this.dataPoints[x],I=null;if(b){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":case"rangeColumn":case"rangeBar":case"waterfall":case"error":r>=b.x1&&r<=b.x2&&d>=b.y1&&d<=b.y2&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y1-d),Math.abs(b.y2-d))}),S=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var R=E("markerSize",u,this)||4,z=h?20:R,I=Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y1-d,2));I<=z&&o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:I}),b=Math.abs(b.x1-r),b<=M?M=b:0<y?_++:v++,I<=R/2&&(S=!0);break;case"rangeArea":case"rangeSplineArea":R=E("markerSize",u,this)||4,z=h?20:R,I=Math.min(Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y1-d,2)),Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y2-d,2))),I<=z&&o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:I}),b=Math.abs(b.x1-r),b<=M?M=b:0<y?_++:v++,I<=R/2&&(S=!0);break;case"bubble":R=b.size,I=Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y1-d,2)),I<=R/2&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:I}),S=!0);break;case"pie":case"doughnut":R=b.center,z=this.type==="doughnut"?b.percentInnerRadius*b.radius:0,I=Math.sqrt(Math.pow(R.x-r,2)+Math.pow(R.y-d,2)),I<b.radius&&I>z&&(I=Math.atan2(d-R.y,r-R.x),0>I&&(I+=2*Math.PI),I=Number(((180*(I/Math.PI)%360+360)%360).toFixed(12)),R=Number(((180*(b.startAngle/Math.PI)%360+360)%360).toFixed(12)),z=Number(((180*(b.endAngle/Math.PI)%360+360)%360).toFixed(12)),z===0&&1<b.endAngle&&(z=360),R>=z&&u.y!==0&&!m(u.y)&&(z+=360,I<R&&(I+=360)),I>R&&I<z&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:0}),S=!0));break;case"funnel":case"pyramid":I=b.funnelSection,d>I.y1&&d<I.y4&&(I.y6?d>I.y6?(x=I.x6+(I.x5-I.x6)/(I.y5-I.y6)*(d-I.y6),I=I.x3+(I.x4-I.x3)/(I.y4-I.y3)*(d-I.y3)):(x=I.x1+(I.x6-I.x1)/(I.y6-I.y1)*(d-I.y1),I=I.x2+(I.x3-I.x2)/(I.y3-I.y2)*(d-I.y2)):(x=I.x1+(I.x4-I.x1)/(I.y4-I.y1)*(d-I.y1),I=I.x2+(I.x3-I.x2)/(I.y3-I.y2)*(d-I.y2)),r>x&&r<I&&(o.push({dataPoint:u,dataPointIndex:b.dataPointIndex,dataSeries:this,distance:0}),S=!0));break;case"boxAndWhisker":(r>=b.x1-b.borderThickness/2&&r<=b.x2+b.borderThickness/2&&d>=b.y4-b.borderThickness/2&&d<=b.y1+b.borderThickness/2||Math.abs(b.x2-r+b.x1-r)<b.borderThickness&&d>=b.y1&&d<=b.y4)&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y2-d),Math.abs(b.y3-d))}),S=!0);break;case"candlestick":(r>=b.x1-b.borderThickness/2&&r<=b.x2+b.borderThickness/2&&d>=b.y2-b.borderThickness/2&&d<=b.y3+b.borderThickness/2||Math.abs(b.x2-r+b.x1-r)<b.borderThickness&&d>=b.y1&&d<=b.y4)&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y2-d),Math.abs(b.y3-d))}),S=!0);break;case"ohlc":(Math.abs(b.x2-r+b.x1-r)<b.borderThickness&&d>=b.y2&&d<=b.y3||r>=b.x1&&r<=(b.x2+b.x1)/2&&d>=b.y1-b.borderThickness/2&&d<=b.y1+b.borderThickness/2||r>=(b.x1+b.x2)/2&&r<=b.x2&&d>=b.y4-b.borderThickness/2&&d<=b.y4+b.borderThickness/2)&&(o.push({dataPoint:u,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y2-d),Math.abs(b.y3-d))}),S=!0)}if(S||1e3<_&&1e3<v)break}}else if(0>C-c&&C+c>=this.dataPoints.length)break;y===-1?(c++,y=1):y=-1}for(r=null,d=0;d<o.length;d++)r?o[d].distance<=r.distance&&(r=o[d]):r=o[d];return r},Oe.prototype.getMarkerProperties=function(r,d,h,o){var c=this.dataPoints,x=c[r].markerColor?c[r].markerColor:this.markerColor?this.markerColor:c[r].color?c[r].color:this.color?this.color:this._colorSet[r%this._colorSet.length],y=c[r].markerBorderColor?c[r].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,S=m(c[r].markerBorderThickness)?this.markerBorderThickness?this.markerBorderThickness:null:c[r].markerBorderThickness,M=c[r].markerType?c[r].markerType:this.markerType;return r=m(c[r].markerSize)?this.markerSize:c[r].markerSize,{x:d,y:h,ctx:o,type:M,size:r,color:x,borderColor:y,borderThickness:S}},e(ke,re),ke.prototype.createExtraLabelsForLog=function(r){if(r=(r||0)+1,!(5<r)){var d=this.logLabelValues[0]||this.intervalStartPosition;if(Math.log(this.range)/Math.log(d/this.viewportMinimum)<this.noTicks-1){for(var h=ke.getNiceNumber((d-this.viewportMinimum)/Math.min(Math.max(2,this.noTicks-this.logLabelValues.length),3),!0),o=Math.ceil(this.viewportMinimum/h)*h;o<d;o+=h)o<this.viewportMinimum||this.logLabelValues.push(o);this.logLabelValues.sort(p),this.createExtraLabelsForLog(r)}}},ke.prototype.createLabels=function(){var r,d,h=0,y=0,o,c=0,x=0,y=0,y=this.interval,S=0,M,_=.6*this.chart.height,v;r=!1;var b=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],C=b.length?m(this.scaleBreaks.firstBreakIndex)?0:this.scaleBreaks.firstBreakIndex:0;if(this.type!=="axisX"||this.valueType!=="dateTime"||this.logarithmic){if(o=this.viewportMaximum,this.labels){r=Math.ceil(y);for(var y=Math.ceil(this.intervalStartPosition),u=!1,h=y;h<this.viewportMaximum;h+=r)if(this.labels[h])u=!0;else{u=!1;break}u&&(this.interval=r,this.intervalStartPosition=y)}if(this.logarithmic&&!this.equidistantInterval)for(this.logLabelValues||(this.logLabelValues=[],this.createExtraLabelsForLog()),y=0,u=C;y<this.logLabelValues.length;y++)if(h=this.logLabelValues[y],h<this.viewportMinimum)y++;else{for(;u<b.length&&h>b[u].endValue;u++);r=u<b.length&&h>=b[u].startValue&&h<=b[u].endValue,v=h,r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:v,label:this.labels[v]?this.labels[v]:null}):this.type==="axisX"&&this.labels[v]?this.labels[v]:Nt(v,this.valueFormatString,this.chart._cultureInfo),r=new de(this.ctx,{x:0,y:0,maxWidth:c,maxHeight:x,angle:this.labelAngle,text:this.prefix+r+this.suffix,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,cornerRadius:this.labelCornerRadius,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:this.labelBorderThickness}),this._labels.push({position:v,textBlock:r,effectiveHeight:null}))}for(u=C,h=this.intervalStartPosition;h<=o;h=parseFloat(1e-12>this.interval?this.logarithmic&&this.equidistantInterval?h*Math.pow(this.logarithmBase,this.interval):h+this.interval:(this.logarithmic&&this.equidistantInterval?h*Math.pow(this.logarithmBase,this.interval):h+this.interval).toFixed(12))){for(;u<b.length&&h>b[u].endValue;u++);r=u<b.length&&h>=b[u].startValue&&h<=b[u].endValue,v=h,r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:v,label:this.labels[v]?this.labels[v]:null}):this.type==="axisX"&&this.labels[v]?this.labels[v]:Nt(v,this.valueFormatString,this.chart._cultureInfo),r=new de(this.ctx,{x:0,y:0,maxWidth:c,maxHeight:x,angle:this.labelAngle,text:this.prefix+r+this.suffix,textAlign:this.labelTextAlign,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:v,textBlock:r,effectiveHeight:null}))}}else for(this.intervalStartPosition=this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval),o=n(new Date(this.viewportMaximum),this.interval,this.intervalType),u=C,h=this.intervalStartPosition;h<o;n(h,y,this.intervalType)){for(r=h.getTime();u<b.length&&r>b[u].endValue;u++);v=r,r=u<b.length&&r>=b[u].startValue&&r<=b[u].endValue,r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:new Date(v),label:this.labels[v]?this.labels[v]:null}):this.type==="axisX"&&this.labels[v]?this.labels[v]:Ki(v,this.valueFormatString,this.chart._cultureInfo),r=new de(this.ctx,{x:0,y:0,maxWidth:c,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxHeight:x,angle:this.labelAngle,text:this.prefix+r+this.suffix,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:v,textBlock:r,effectiveHeight:null,breaksLabelType:void 0}))}for(this._position==="bottom"||this._position==="top"?(S=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.width*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.width/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*lt[this.intervalType+"Duration"]*this.interval,c=typeof this.options.labelMaxWidth>"u"?.5*this.chart.width>>0:this.options.labelMaxWidth,this.chart.panEnabled||(x=typeof this.options.labelWrap>"u"||this.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize)):(this._position==="left"||this._position==="right")&&(S=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.height*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.height/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*lt[this.intervalType+"Duration"]*this.interval,this.chart.panEnabled||(c=typeof this.options.labelMaxWidth>"u"?.3*this.chart.width>>0:this.options.labelMaxWidth),x=typeof this.options.labelWrap>"u"||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize),y=0;y<this._labels.length;y++){r=this._labels[y].textBlock,r.maxWidth=c,r.maxHeight=x;var I=r.measureText();M=I.height}if(o=[],C=b=0,this.labelAutoFit||this.options.labelAutoFit){if(m(this.labelAngle)||(this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360)),this._position==="bottom"||this._position==="top")if(c=Math.floor(.9*S),C=0,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=c,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,h=0;h<this._labels.length;h++)if(!this._labels[h].breaksLabelType){r=this._labels[h].textBlock;for(var R,u=r.text.split(" "),y=0;y<u.length;y++)v=u[y],this.ctx.font=r.fontStyle+" "+r.fontWeight+" "+r.fontSize+"px "+r.fontFamily,v=this.ctx.measureText(v),v.width>C&&(R=h,C=v.width)}for(h=0,h=this.intervalStartPosition<this.viewportMinimum?1:0;h<this._labels.length;h++)if(!this._labels[h].breaksLabelType){for(r=this._labels[h].textBlock,I=r.measureText(),u=h+1;u<this._labels.length;u++)if(!this._labels[u].breaksLabelType){d=this._labels[u].textBlock,d=d.measureText();break}if(o.push(r.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,o),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),y=c*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(x-r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),m(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&this.options.labelAngle!==0){if(this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:Math.min((y-c*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),y),v=(_-(M+r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(-25)))/Math.sin(Math.PI/180*Math.abs(-25)),!m(this.options.labelWrap))this.labelWrap?m(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=Math.min(Math.max(c,C),v),this.sessionVariables.labelWrap=this.labelWrap,d&&I.width+d.width>>0>2*c&&(this.sessionVariables.labelAngle=-25)):(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>c?-25:this.sessionVariables.labelAngle):m(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelMaxWidth=c,d&&I.width+d.width>>0>2*c&&(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=v)):(this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>c?-25:this.sessionVariables.labelAngle,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelWrap=this.labelWrap);else if(m(this.options.labelWrap)){if(!m(this.options.labelMaxWidth))this.options.labelMaxWidth<c?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=y):(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=x);else if(!m(d)){if(y=I.width+d.width>>0,u=this.labelFontSize,C<c)y-2*c>b&&(b=y-2*c,y>=2*c&&y<2.2*c?(this.sessionVariables.labelMaxWidth=c,m(this.options.labelFontSize)&&12<u&&(u=Math.floor(12/13*u),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?u:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):y>=2.2*c&&y<2.8*c?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelFontSize=u):y>=2.8*c&&y<3.2*c?(this.sessionVariables.labelMaxWidth=Math.max(c,C),this.sessionVariables.labelWrap=!0,m(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?u:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):y>=3.2*c&&y<3.6*c?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelFontSize=this.labelFontSize):y>3.6*c&&y<5*c?(m(this.options.labelFontSize)&&12<u&&(u=Math.floor(12/13*u),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?u:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=v):y>5*c&&(this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=c,this.sessionVariables.labelFontSize=u,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=this.labelAngle));else if(R===h&&(R===0&&C+this._labels[R+1].textBlock.measureText().width-2*c>b||R===this._labels.length-1&&C+this._labels[R-1].textBlock.measureText().width-2*c>b||0<R&&R<this._labels.length-1&&C+this._labels[R+1].textBlock.measureText().width-2*c>b&&C+this._labels[R-1].textBlock.measureText().width-2*c>b))b=R===0?C+this._labels[R+1].textBlock.measureText().width-2*c:C+this._labels[R-1].textBlock.measureText().width-2*c,this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?u:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=v;else if(b===0)for(this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?u:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,y=0;y<this._labels.length;y++)r=this._labels[y].textBlock,r.maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(c,C),v),I=r.measureText(),y<this._labels.length-1&&(u=y+1,d=this._labels[u].textBlock,d.maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(c,C),v),d=d.measureText(),I.width+d.width>>0>2*c&&(this.sessionVariables.labelAngle=-25))}}}else this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:Math.min((y-c*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),y),v=this.labelAngle!=0?(_-(M+r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)):c,this.sessionVariables.labelMaxHeight=this.labelWrap?(_-v*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)):1.5*this.labelFontSize,m(this.options.labelWrap)?m(this.options.labelWrap)&&(this.labelWrap&&!m(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:v,this.sessionVariables.labelMaxHeight=x):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelMaxHeight=y<.9*S?.9*S:y,this.sessionVariables.labelWrap=this.labelWrap)):(this.options.labelWrap?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:v):(m(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:v,this.sessionVariables.labelWrap=this.labelWrap),this.sessionVariables.labelMaxHeight=x)}for(y=0;y<this._labels.length;y++)r=this._labels[y].textBlock,r.maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,r.fontSize=this.sessionVariables.labelFontSize,r.angle=this.labelAngle=this.sessionVariables.labelAngle,r.wrap=this.labelWrap=this.sessionVariables.labelWrap,r.maxHeight=this.sessionVariables.labelMaxHeight,r.measureText()}else for(h=0;h<this._labels.length;h++)r=this._labels[h].textBlock,r.maxWidth=this.labelMaxWidth=m(this.options.labelMaxWidth)?m(this.sessionVariables.labelMaxWidth)?this.sessionVariables.labelMaxWidth=c:this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,r.fontSize=this.labelFontSize=m(this.options.labelFontSize)?m(this.sessionVariables.labelFontSize)?this.sessionVariables.labelFontSize=this.labelFontSize:this.sessionVariables.labelFontSize:this.options.labelFontSize,r.angle=this.labelAngle=m(this.options.labelAngle)?m(this.sessionVariables.labelAngle)?this.sessionVariables.labelAngle=this.labelAngle:this.sessionVariables.labelAngle:this.labelAngle,r.wrap=this.labelWrap=m(this.options.labelWrap)?m(this.sessionVariables.labelWrap)?this.sessionVariables.labelWrap=this.labelWrap:this.sessionVariables.labelWrap:this.options.labelWrap,r.maxHeight=m(this.sessionVariables.labelMaxHeight)?this.sessionVariables.labelMaxHeight=x:this.sessionVariables.labelMaxHeight,r.measureText();else if(this._position==="left"||this._position==="right")if(c=m(this.options.labelMaxWidth)?.3*this.chart.width>>0:this.options.labelMaxWidth,x=typeof this.options.labelWrap>"u"||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=c,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=m(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,h=0;h<this._labels.length;h++)if(!this._labels[h].breaksLabelType){for(r=this._labels[h].textBlock,I=r.measureText(),u=h+1;u<this._labels.length;u++)if(!this._labels[u].breaksLabelType){d=this._labels[u].textBlock,d=d.measureText();break}o.push(r.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,o),y=c*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(x-r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),m(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&this.options.labelAngle!==0?m(this.options.labelWrap)?m(this.options.labelWrap)&&(m(this.options.labelMaxWidth)?m(d)||(S=I.height+d.height>>0,S-2*x>C&&(C=S-2*x,S>=2*x&&S<2.4*x?(m(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize):S>=2.4*x&&S<2.8*x?(this.sessionVariables.labelMaxHeight=y,this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelWrap=!0):S>=2.8*x&&S<3.2*x?(this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelWrap=!0,m(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelAngle=m(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):S>=3.2*x&&S<3.6*x?(this.sessionVariables.labelMaxHeight=y,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelFontSize=this.labelFontSize):S>3.6*x&&S<10*x?(m(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxWidth=c,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=m(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):S>10*x&&S<50*x&&(m(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=m(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelMaxWidth=c,this.sessionVariables.labelAngle=m(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle))):(this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth)):(this.sessionVariables.labelMaxWidth=this.labelWrap?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:this.labelMaxWidth?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:c,this.sessionVariables.labelMaxHeight=x):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=this.labelAngle===0?c:Math.min((y-x*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)),x),m(this.options.labelWrap)?m(this.options.labelWrap)&&(this.labelWrap&&!m(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=y):(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:c,this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:y,m(this.options.labelMaxWidth)&&(this.sessionVariables.labelAngle=this.labelAngle))):this.options.labelWrap?(this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:y,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=c):(this.sessionVariables.labelMaxHeight=x,m(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap))}for(y=0;y<this._labels.length;y++)r=this._labels[y].textBlock,r.maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,r.fontSize=this.labelFontSize=this.sessionVariables.labelFontSize,r.angle=this.labelAngle=this.sessionVariables.labelAngle,r.wrap=this.labelWrap=this.sessionVariables.labelWrap,r.maxHeight=this.sessionVariables.labelMaxHeight,r.measureText()}else for(m(this.chart.stockChart)||this.chart.isNavigator||(this.sessionVariables.labelMaxHeight=x),h=0;h<this._labels.length;h++)r=this._labels[h].textBlock,r.maxWidth=this.labelMaxWidth=m(this.options.labelMaxWidth)?m(this.sessionVariables.labelMaxWidth)?this.sessionVariables.labelMaxWidth=c:this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,r.fontSize=this.labelFontSize=m(this.options.labelFontSize)?m(this.sessionVariables.labelFontSize)?this.sessionVariables.labelFontSize=this.labelFontSize:this.sessionVariables.labelFontSize:this.options.labelFontSize,r.angle=this.labelAngle=m(this.options.labelAngle)?m(this.sessionVariables.labelAngle)?this.sessionVariables.labelAngle=this.labelAngle:this.sessionVariables.labelAngle:this.labelAngle,r.wrap=this.labelWrap=m(this.options.labelWrap)?m(this.sessionVariables.labelWrap)?this.sessionVariables.labelWrap=this.labelWrap:this.sessionVariables.labelWrap:this.options.labelWrap,r.maxHeight=m(this.sessionVariables.labelMaxHeight)?this.sessionVariables.labelMaxHeight=x:this.sessionVariables.labelMaxHeight,r.measureText()}for(h=0;h<this.stripLines.length;h++){var c=this.stripLines[h],z;c.labelPlacement==="outside"?(x=this.sessionVariables.labelMaxWidth,(this._position==="bottom"||this._position==="top")&&(m(c.options.labelWrap)&&!m(this.sessionVariables.stripLineLabelMaxHeight)?z=this.sessionVariables.stripLineLabelMaxHeight:this.sessionVariables.stripLineLabelMaxHeight=z=c.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize),(this._position==="left"||this._position==="right")&&(m(c.options.labelWrap)&&!m(this.sessionVariables.stripLineLabelMaxHeight)?z=this.sessionVariables.stripLineLabelMaxHeight:this.sessionVariables.stripLineLabelMaxHeight=z=c.labelWrap?.8*this.chart.width>>0:1.5*this.labelFontSize),m(c.labelBackgroundColor)&&(c.labelBackgroundColor="#EEEEEE")):(x=this._position==="bottom"||this._position==="top"?.9*this.chart.width>>0:.9*this.chart.height>>0,z=m(c.options.labelWrap)||c.labelWrap?this._position==="bottom"||this._position==="top"?.8*this.chart.width>>0:.8*this.chart.height>>0:1.5*this.labelFontSize,m(c.labelBackgroundColor)&&(m(c.startValue)&&c.startValue!==0?c.labelBackgroundColor=X?"transparent":null:c.labelBackgroundColor="#EEEEEE")),c.labelFontSize=c.labelPlacement==="outside"&&m(c.options.labelFontSize)?this.labelFontSize:c.labelFontSize,c.labelFontFamily=c.labelPlacement==="outside"&&m(c.options.labelFontFamily)?this.labelFontFamily:c.labelFontFamily,c.labelFontWeight=c.labelPlacement==="outside"&&m(c.options.labelFontWeight)?this.labelFontWeight:c.labelFontWeight,c.labelFontStyle=c.labelPlacement==="outside"&&m(c.options.labelFontStyle)?this.labelFontStyle:c.labelFontStyle,r=new de(this.ctx,{x:0,y:0,backgroundColor:c.labelBackgroundColor,borderColor:c.labelBorderColor,borderThickness:c.labelBorderThickness,cornerRadius:c.labelCornerRadius,maxWidth:c.options.labelMaxWidth?c.options.labelMaxWidth:x,maxHeight:z,angle:this.labelAngle,text:c.labelFormatter?c.labelFormatter({chart:this.chart,axis:this,stripLine:c}):c.label,textAlign:c.labelTextAlign,fontSize:c.labelFontSize,fontFamily:c.labelFontFamily,fontWeight:c.labelFontWeight,fontColor:c.labelFontColor||c.color,fontStyle:c.labelFontStyle,textBaseline:"middle"}),this._stripLineLabels.push({position:c.value,textBlock:r,effectiveHeight:null,stripLine:c})}},ke.prototype.createLabelsAndCalculateWidth=function(){var r=0,d=0;this._labels=[],this._stripLineLabels=[];var h=this.chart.isNavigator?0:5;if(this._position==="left"||this._position==="right"){if(this.createLabels(),this.labelPlacement!="inside"||this.labelPlacement==="inside"&&0<this._index)for(d=0;d<this._labels.length;d++){var o=this._labels[d].textBlock,o=o.measureText(),c=0,c=this.labelAngle===0?o.width:o.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+o.height*Math.sin(Math.PI/180*Math.abs(this.labelAngle));r<c&&(this.labelEffectiveWidth=r=c),this._labels[d].effectiveWidth=c}for(d=0;d<this._stripLineLabels.length;d++)this._stripLineLabels[d].stripLine.labelPlacement==="outside"&&this._stripLineLabels[d].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[d].stripLine.value<=this.viewportMaximum&&(o=this._stripLineLabels[d].textBlock,o=o.measureText(),c=this.labelAngle===0?o.width:o.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+o.height*Math.sin(Math.PI/180*Math.abs(this.labelAngle)),this.tickPlacement==="inside"&&(c+=this.tickLength),this.labelPlacement==="inside"&&(r+=0<this._index?c:0),r<c&&(r=c),this.stripLineLabelEffectiveWidth=this._stripLineLabels[d].effectiveWidth=c)}return(this.title?this._titleTextBlock.measureText().height+2:0)+r+(this.tickPlacement==="inside"?0<this._index?this.tickLength:0:this.tickLength)+h},ke.prototype.createLabelsAndCalculateHeight=function(){var r=0;this._labels=[],this._stripLineLabels=[];var d,h=0,o=this.chart.isNavigator?0:5;if(this._position==="bottom"||this._position==="top"){if(this.createLabels(),this.labelPlacement!="inside"||this.labelPlacement==="inside"&&0<this._index)for(h=0;h<this._labels.length;h++){d=this._labels[h].textBlock,d=d.measureText();var c=0,c=this.labelAngle===0?d.height:d.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+d.height*Math.cos(Math.PI/180*Math.abs(this.labelAngle));r<c&&(this.labelEffectiveHeight=r=c),this._labels[h].effectiveHeight=c}for(h=0;h<this._stripLineLabels.length;h++)this._stripLineLabels[h].stripLine.labelPlacement==="outside"&&this._stripLineLabels[h].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[h].stripLine.value<=this.viewportMaximum&&(d=this._stripLineLabels[h].textBlock,d=d.measureText(),c=this.labelAngle===0?d.height:d.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+d.height*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),this.tickPlacement==="inside"&&(c+=this.tickLength),this.labelPlacement==="inside"&&(r+=0<this._index?c:0),r<c&&(r=c),this.stripLineLabelEffectiveHeight=this._stripLineLabels[h].effectiveHeight=c)}return(this.title?this._titleTextBlock.measureText().height+2:0)+r+(this.tickPlacement==="inside"?0<this._index?this.tickLength:0:this.tickLength)+o},ke.setLayout=function(r,d,h,o,c,x){var y,S,M,_,v=r[0]?r[0].chart:d[0].chart,b=v.isNavigator?0:10,C=v._axes;if(r&&0<r.length)for(var u=0;u<r.length;u++)r[u]&&r[u].calculateAxisParameters();if(d&&0<d.length)for(u=0;u<d.length;u++)d[u].calculateAxisParameters();if(h&&0<h.length)for(u=0;u<h.length;u++)h[u].calculateAxisParameters();if(o&&0<o.length)for(u=0;u<o.length;u++)o[u].calculateAxisParameters();for(u=0;u<C.length;u++)if(C[u]&&C[u].scaleBreaks&&C[u].scaleBreaks._appliedBreaks.length)for(var I=C[u].scaleBreaks._appliedBreaks,R=0;R<I.length&&!(I[R].startValue>C[u].viewportMaximum);R++)I[R].endValue<C[u].viewportMinimum||(m(C[u].scaleBreaks.firstBreakIndex)&&(C[u].scaleBreaks.firstBreakIndex=R),I[R].startValue>=C[u].viewPortMinimum&&(C[u].scaleBreaks.lastBreakIndex=R));for(var z=R=0,A=0,Y=0,V=0,q=0,te=0,Q,ve,Me=S=0,le,ue,ce,I=le=ue=ce=!1,u=0;u<C.length;u++)C[u]&&C[u].title&&(C[u]._titleTextBlock=new de(C[u].ctx,{text:C[u].title,fontSize:C[u].titleFontSize,fontFamily:C[u].titleFontFamily,fontWeight:C[u].titleFontWeight,fontColor:C[u].titleFontColor,fontStyle:C[u].titleFontStyle,borderColor:C[u].titleBorderColor,borderThickness:C[u].titleBorderThickness,backgroundColor:C[u].titleBackgroundColor,cornerRadius:C[u].titleCornerRadius,textBaseline:"middle",textAlign:C[u].titleTextAlign}));for(u=0;u<C.length;u++)if(C[u].title)switch(C[u]._position){case"left":C[u]._titleTextBlock.maxWidth=C[u].titleMaxWidth||x.height,C[u]._titleTextBlock.maxHeight=C[u].titleWrap?.8*x.width:1.5*C[u].titleFontSize,C[u]._titleTextBlock.angle=-90;break;case"right":C[u]._titleTextBlock.maxWidth=C[u].titleMaxWidth||x.height,C[u]._titleTextBlock.maxHeight=C[u].titleWrap?.8*x.width:1.5*C[u].titleFontSize,C[u]._titleTextBlock.angle=90;break;default:C[u]._titleTextBlock.maxWidth=C[u].titleMaxWidth||x.width,C[u]._titleTextBlock.maxHeight=C[u].titleWrap?.8*x.height:1.5*C[u].titleFontSize,C[u]._titleTextBlock.angle=0}if(c==="normal"){for(var Y=[],V=[],q=[],te=[],oe=[],J=[],be=[],Ae=[];4>R;){var ie=0,pt=0,mt=0,Ft=0,At=c=0,Ge=0,ri=0,Ct=0,vt=0,Ye=0,Jt=0;if(h&&0<h.length)for(q=[],u=Ye=0;u<h.length;u++)q.push(Math.ceil(h[u]?h[u].createLabelsAndCalculateWidth():0)),Ye+=q[u],Ge+=h[u]&&!v.isNavigator?h[u].margin:0;else q.push(Math.ceil(h[0]?h[0].createLabelsAndCalculateWidth():0));if(be.push(q),o&&0<o.length)for(te=[],u=Jt=0;u<o.length;u++)te.push(Math.ceil(o[u]?o[u].createLabelsAndCalculateWidth():0)),Jt+=te[u],ri+=o[u]?o[u].margin:0;else te.push(Math.ceil(o[0]?o[0].createLabelsAndCalculateWidth():0));if(Ae.push(te),y=Math.round(x.x1+Ye+Ge),M=Math.round(x.x2-Jt-ri>v.width-b?v.width-b:x.x2-Jt-ri),r&&0<r.length)for(Y=[],u=Ct=0;u<r.length;u++)r[u]&&(r[u].lineCoordinates={}),r[u].lineCoordinates.width=Math.abs(M-y),r[u].title&&(r[u]._titleTextBlock.maxWidth=0<r[u].titleMaxWidth&&r[u].titleMaxWidth<r[u].lineCoordinates.width?r[u].titleMaxWidth:r[u].lineCoordinates.width),Y.push(Math.ceil(r[u]?r[u].createLabelsAndCalculateHeight():0)),Ct+=Y[u],c+=r[u]&&!v.isNavigator?r[u].margin:0;else Y.push(Math.ceil(r[0]?r[0].createLabelsAndCalculateHeight():0));if(oe.push(Y),d&&0<d.length)for(V=[],u=vt=0;u<d.length;u++)d[u]&&(d[u].lineCoordinates={}),d[u].lineCoordinates.width=Math.abs(M-y),d[u].title&&(d[u]._titleTextBlock.maxWidth=0<d[u].titleMaxWidth&&d[u].titleMaxWidth<d[u].lineCoordinates.width?d[u].titleMaxWidth:d[u].lineCoordinates.width),V.push(Math.ceil(d[u]?d[u].createLabelsAndCalculateHeight():0)),vt+=V[u],At+=d[u]&&!v.isNavigator?d[u].margin:0;else V.push(Math.ceil(d[0]?d[0].createLabelsAndCalculateHeight():0));if(J.push(V),r&&0<r.length)for(u=0;u<r.length;u++)r[u]&&(r[u].lineCoordinates.x1=y,M=Math.round(x.x2-Jt-ri>v.width-b?v.width-b:x.x2-Jt-ri),r[u]._labels&&1<r[u]._labels.length&&(S=_=0,_=r[u]._labels[1],S=r[u].valueType==="dateTime"?r[u]._labels[r[u]._labels.length-2]:r[u]._labels[r[u]._labels.length-1],z=_.textBlock.width*Math.cos(Math.PI/180*Math.abs(_.textBlock.angle))+(_.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(_.textBlock.angle)),A=S.textBlock.width*Math.cos(Math.PI/180*Math.abs(S.textBlock.angle))+(S.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(S.textBlock.angle))),!r[u]||!r[u].labelAutoFit||m(Q)||m(ve)||v.isNavigator||v.stockChart||(S=0,0<r[u].labelAngle?ve+A>M&&r[u].convertPixelToValue(ve)>=r[u].viewportMinimum&&r[u].convertPixelToValue(ve)<=r[u].viewportMaximum&&(S+=0<r[u].labelAngle?ve+A-M-Jt:0):0>r[u].labelAngle?Q-z<y&&Q-z<r[u].viewportMinimum&&(Me=y-(Ge+r[u].tickLength+q+Q-z+r[u].labelFontSize/2)):r[u].labelAngle===0&&(ve+A>M&&r[u].convertPixelToValue(ve)>=r[u].viewportMinimum&&r[u].convertPixelToValue(ve)<=r[u].viewportMaximum&&(S=ve+A/2-M-Jt),Q-z<y&&Q-z<r[u].viewportMinimum&&(Me=y-Ge-r[u].tickLength-q-Q+z/2)),r[u].viewportMaximum===r[u].maximum&&r[u].viewportMinimum===r[u].minimum&&0<r[u].labelAngle&&0<S?M-=S:r[u].viewportMaximum===r[u].maximum&&r[u].viewportMinimum===r[u].minimum&&0>r[u].labelAngle&&0<Me?y+=Me:r[u].viewportMaximum===r[u].maximum&&r[u].viewportMinimum===r[u].minimum&&r[u].labelAngle===0&&(0<Me&&(y+=Me),0<S&&(M-=S))),v.panEnabled?Ct=m(v.sessionVariables.axisX.height)||v.stockChart?v.sessionVariables.axisX.height=Ct:v.sessionVariables.axisX.height:v.sessionVariables.axisX.height=Ct,S=Math.round(x.y2-Ct-c+ie),_=Math.round(x.y2),r[u].lineCoordinates.x2=M,r[u].lineCoordinates.width=M-y,r[u].lineCoordinates.y1=S,r[u].lineCoordinates.y2=S,r[u].labelPlacement==="inside"&&0<u&&(r[u].lineCoordinates.y1=r[0].lineCoordinates.y2+ie+(r[u].labelEffectiveHeight||0),r[u].lineCoordinates.y2=r[u].lineCoordinates.y1+r[u].lineThickness/2),r[u].tickPlacement==="inside"&&0<u&&(r[u].lineCoordinates.y1+=r[u].tickLength,r[u].lineCoordinates.y2=r[u].lineCoordinates.y1+r[u].lineThickness/2),r[u].bounds={x1:y,y1:S,x2:M,y2:_-(Ct+c-Y[u]-ie),width:M-y},r[u].bounds.height=r[u].bounds.y2-r[u].bounds.y1),ie+=Y[u]+r[u].margin;if(d&&0<d.length)for(u=0;u<d.length;u++)d[u].lineCoordinates.x1=Math.round(x.x1+Ye+Ge),d[u].lineCoordinates.x2=M||Math.round(x.x2-Jt-ri>v.width-b?v.width-b:x.x2-Jt-ri),d[u].lineCoordinates.width=Math.abs(M-y),d[u]._labels&&1<d[u]._labels.length&&(_=d[u]._labels[1],S=d[u].valueType==="dateTime"?d[u]._labels[d[u]._labels.length-2]:d[u]._labels[d[u]._labels.length-1],z=_.textBlock.width*Math.cos(Math.PI/180*Math.abs(_.textBlock.angle))+(_.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(_.textBlock.angle)),A=S.textBlock.width*Math.cos(Math.PI/180*Math.abs(S.textBlock.angle))+(S.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(S.textBlock.angle))),v.panEnabled?vt=m(v.sessionVariables.axisX2.height)||v.stockChart?v.sessionVariables.axisX2.height=vt:v.sessionVariables.axisX2.height:v.sessionVariables.axisX2.height=vt,S=Math.round(x.y1),_=d[u].lineCoordinates.y1=S+vt+At-pt,d[u].lineCoordinates.y2=S,d[u].labelPlacement==="inside"&&0<u&&(d[u].lineCoordinates.y1=d[0].lineCoordinates.y1-pt-(d[u].labelEffectiveHeight||0)-5),d[u].tickPlacement==="inside"&&0<u&&(d[u].lineCoordinates.y1-=d[u].tickLength),d[u].bounds={x1:y,y1:S+(vt+At-(d[u].labelPlacement==="inside"&&u===0?V[u]-5:V[u])-pt),x2:M,y2:_,width:M-y},d[u].bounds.height=d[u].bounds.y2-d[u].bounds.y1,pt+=(d[u].labelPlacement==="inside"&&u===0?V[u]-5:V[u])+d[u].margin;if(h&&0<h.length)for(u=0;u<h.length;u++)Ge=v.isNavigator?0:10,h[u]&&(y=Math.round(r[0]?r[0].lineCoordinates.x1:d[0].lineCoordinates.x1),Ge=h[u]._labels&&0<h[u]._labels.length?h[u]._labels[h[u]._labels.length-1].textBlock.height/2:b,S=Math.round(x.y1+vt+At<Math.max(Ge,b)?Math.max(Ge,b):x.y1+vt+At),M=Math.round(r[0]?r[0].lineCoordinates.x1:d[0].lineCoordinates.x1),Ge=0<r.length?0:h[u]._labels&&0<h[u]._labels.length?h[u]._labels[0].textBlock.height/2:b,_=Math.round(x.y2-Ct-c-Ge),h[u].lineCoordinates={x1:y-mt,y1:S,x2:M-mt,y2:_,height:Math.abs(_-S)},h[u].labelPlacement==="inside"&&0<u&&(h[u].lineCoordinates.x1=h[0].lineCoordinates.x1-mt-(h[u].labelEffectiveWidth||0)-5,h[u].lineCoordinates.x2=h[u].lineCoordinates.x1+h[u].lineThickness/2),h[u].tickPlacement==="inside"&&0<u&&(h[u].lineCoordinates.x1-=h[u].tickLength,h[u].lineCoordinates.x2=h[u].lineCoordinates.x1+h[u].lineThickness/2),h[u].bounds={x1:y-((h[u].labelPlacement==="inside"&&u===0?q[u]-5:q[u])+mt),y1:S,x2:M-mt,y2:_,height:_-S},h[u].bounds.width=h[u].bounds.x2-h[u].bounds.x1,h[u].title&&(h[u]._titleTextBlock.maxWidth=0<h[u].titleMaxWidth&&h[u].titleMaxWidth<h[u].lineCoordinates.height?h[u].titleMaxWidth:h[u].lineCoordinates.height),mt+=(h[u].labelPlacement==="inside"&&u===0?q[u]-5:q[u])+h[u].margin);if(o&&0<o.length)for(u=0;u<o.length;u++)o[u]&&(y=Math.round(r[0]?r[0].lineCoordinates.x2:d[0].lineCoordinates.x2),M=Math.round(y),Ge=o[u]._labels&&0<o[u]._labels.length?o[u]._labels[o[u]._labels.length-1].textBlock.height/2:0,S=Math.round(x.y1+vt+At<Math.max(Ge,b)?Math.max(Ge,b):x.y1+vt+At),Ge=0<r.length?0:o[u]._labels&&0<o[u]._labels.length?o[u]._labels[0].textBlock.height/2:0,_=Math.round(x.y2-(Ct+c+Ge)),o[u].lineCoordinates={x1:y+Ft,y1:S,x2:y+Ft,y2:_,height:Math.abs(_-S)},o[u].labelPlacement==="inside"&&0<u&&(o[u].lineCoordinates.x1=o[0].lineCoordinates.x2+Ft+(o[u].labelEffectiveWidth||0)+5,o[u].lineCoordinates.x2=o[u].lineCoordinates.x1+o[u].lineThickness/2),o[u].tickPlacement==="inside"&&0<u&&(o[u].lineCoordinates.x1+=o[u].tickLength,o[u].lineCoordinates.x2=o[u].lineCoordinates.x1+o[u].lineThickness/2),o[u].bounds={x1:y+Ft,y1:S,x2:M+((o[u].labelPlacement==="inside"&&u===0?te[u]-5:te[u])+Ft),y2:_,height:_-S},o[u].bounds.width=o[u].bounds.x2-o[u].bounds.x1,o[u].title&&(o[u]._titleTextBlock.maxWidth=0<o[u].titleMaxWidth&&o[u].titleMaxWidth<o[u].lineCoordinates.height?o[u].titleMaxWidth:o[u].lineCoordinates.height),Ft+=(o[u].labelPlacement==="inside"&&u===0?te[u]-5:te[u])+o[u].margin);if(r&&0<r.length)for(u=0;u<r.length;u++)r[u]&&(r[u].calculateValueToPixelConversionParameters(),r[u].calculateBreaksSizeInValues(),r[u]._labels&&1<r[u]._labels.length&&(Q=(r[u].logarithmic?Math.log(r[u]._labels[1].position/r[u].viewportMinimum)/r[u].conversionParameters.lnLogarithmBase:r[u]._labels[1].position-r[u].viewportMinimum)*Math.abs(r[u].conversionParameters.pixelPerUnit)+r[u].lineCoordinates.x1,y=r[u]._labels[r[u]._labels.length-(r[u].valueType==="dateTime"?2:1)].position,y=r[u].getApparentDifference(r[u].viewportMinimum,y),ve=r[u].logarithmic?(1<y?Math.log(y)/r[u].conversionParameters.lnLogarithmBase*Math.abs(r[u].conversionParameters.pixelPerUnit):0)+r[u].lineCoordinates.x1:(0<y?y*Math.abs(r[u].conversionParameters.pixelPerUnit):0)+r[u].lineCoordinates.x1));if(d&&0<d.length)for(u=0;u<d.length;u++)d[u].calculateValueToPixelConversionParameters(),d[u].calculateBreaksSizeInValues(),d[u]._labels&&1<d[u]._labels.length&&(Q=(d[u].logarithmic?Math.log(d[u]._labels[1].position/d[u].viewportMinimum)/d[u].conversionParameters.lnLogarithmBase:d[u]._labels[1].position-d[u].viewportMinimum)*Math.abs(d[u].conversionParameters.pixelPerUnit)+d[u].lineCoordinates.x1,y=d[u]._labels[d[u]._labels.length-(d[u].valueType==="dateTime"?2:1)].position,y=d[u].getApparentDifference(d[u].viewportMinimum,y),ve=d[u].logarithmic?(1<y?Math.log(y)/d[u].conversionParameters.lnLogarithmBase*Math.abs(d[u].conversionParameters.pixelPerUnit):0)+d[u].lineCoordinates.x1:(0<y?y*Math.abs(d[u].conversionParameters.pixelPerUnit):0)+d[u].lineCoordinates.x1);for(u=0;u<C.length;u++)C[u].type==="axisY"&&(C[u].calculateValueToPixelConversionParameters(),C[u].calculateBreaksSizeInValues());if(0<R){if(r&&0<r.length)for(u=0;u<r.length;u++)I=oe[R-1][u]===oe[R][u];else I=!0;if(d&&0<d.length)for(u=0;u<d.length;u++)le=J[R-1][u]===J[R][u];else le=!0;if(h&&0<h.length)for(u=0;u<h.length;u++)ue=be[R-1][u]===be[R][u];else ue=!0;if(o&&0<o.length)for(u=0;u<o.length;u++)ce=Ae[R-1][u]===Ae[R][u];else ce=!0}if(I&&le&&ue&&ce)break;R++}if(r&&0<r.length)for(u=0;u<r.length;u++)r[u].calculateStripLinesThicknessInValues(),r[u].calculateBreaksInPixels();if(d&&0<d.length)for(u=0;u<d.length;u++)d[u].calculateStripLinesThicknessInValues(),d[u].calculateBreaksInPixels();if(h&&0<h.length)for(u=0;u<h.length;u++)h[u].calculateStripLinesThicknessInValues(),h[u].calculateBreaksInPixels();if(o&&0<o.length)for(u=0;u<o.length;u++)o[u].calculateStripLinesThicknessInValues(),o[u].calculateBreaksInPixels()}else{for(b=[],Q=[],Me=[],z=[],ve=[],A=[],oe=[],J=[];4>R;){if(Ct=Ft=mt=ri=Ge=At=c=Ae=be=ie=vt=0,r&&0<r.length)for(Me=[],u=Ft=0;u<r.length;u++)Me.push(Math.ceil(r[u]?r[u].createLabelsAndCalculateWidth():0)),Ft+=Me[u],c+=r[u]&&!v.isNavigator?r[u].margin:0;else Me.push(Math.ceil(r[0]?r[0].createLabelsAndCalculateWidth():0));if(oe.push(Me),d&&0<d.length)for(z=[],u=Ct=0;u<d.length;u++)z.push(Math.ceil(d[u]?d[u].createLabelsAndCalculateWidth():0)),Ct+=z[u],At+=d[u]?d[u].margin:0;else z.push(Math.ceil(d[0]?d[0].createLabelsAndCalculateWidth():0));if(J.push(z),h&&0<h.length)for(u=0;u<h.length;u++)h[u].lineCoordinates={},y=Math.round(x.x1+Ft+c),M=Math.round(x.x2-Ct-At>v.width-10?v.width-10:x.x2-Ct-At),h[u].labelAutoFit&&!m(Y)&&(0<!r.length&&(y=0>h[u].labelAngle?Math.max(y,Y):h[u].labelAngle===0?Math.max(y,Y/2):y),0<!d.length&&(M=0<h[u].labelAngle||h[u].labelAngle===0?M-V/2:M)),h[u].lineCoordinates.x1=y,h[u].lineCoordinates.x2=M,h[u].lineCoordinates.width=Math.abs(M-y),h[u].title&&(h[u]._titleTextBlock.maxWidth=0<h[u].titleMaxWidth&&h[u].titleMaxWidth<h[u].lineCoordinates.width?h[u].titleMaxWidth:h[u].lineCoordinates.width);if(o&&0<o.length)for(u=0;u<o.length;u++)o[u].lineCoordinates={},y=Math.round(x.x1+Ft+c),M=Math.round(x.x2-Ct-At>o[u].chart.width-10?o[u].chart.width-10:x.x2-Ct-At),o[u]&&o[u].labelAutoFit&&!m(q)&&(0<!r.length&&(y=0<o[u].labelAngle?Math.max(y,q):o[u].labelAngle===0?Math.max(y,q/2):y),0<!d.length&&(M-=te/2)),o[u].lineCoordinates.x1=y,o[u].lineCoordinates.x2=M,o[u].lineCoordinates.width=Math.abs(M-y),o[u].title&&(o[u]._titleTextBlock.maxWidth=0<o[u].titleMaxWidth&&o[u].titleMaxWidth<o[u].lineCoordinates.width?o[u].titleMaxWidth:o[u].lineCoordinates.width);if(h&&0<h.length)for(b=[],u=mt=0;u<h.length;u++)b.push(Math.ceil(h[u]?h[u].createLabelsAndCalculateHeight():0)),mt+=b[u]+h[u].margin,Ge+=h[u].margin;else b.push(Math.ceil(h[0]?h[0].createLabelsAndCalculateHeight():0));if(ve.push(b),o&&0<o.length)for(Q=[],u=0;u<o.length;u++)Q.push(Math.ceil(o[u]?o[u].createLabelsAndCalculateHeight():0)),ri+=o[u].margin;else Q.push(Math.ceil(o[0]?o[0].createLabelsAndCalculateHeight():0));if(A.push(Q),h&&0<h.length)for(u=0;u<h.length;u++)0<h[u]._labels.length&&(_=h[u]._labels[0],S=h[u]._labels[h[u]._labels.length-1],Y=_.textBlock.width*Math.cos(Math.PI/180*Math.abs(_.textBlock.angle))+(_.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(_.textBlock.angle)),V=S.textBlock.width*Math.cos(Math.PI/180*Math.abs(S.textBlock.angle))+(S.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(S.textBlock.angle)));if(o&&0<o.length)for(u=0;u<o.length;u++)o[u]&&0<o[u]._labels.length&&(_=o[u]._labels[0],S=o[u]._labels[o[u]._labels.length-1],q=_.textBlock.width*Math.cos(Math.PI/180*Math.abs(_.textBlock.angle))+(_.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(_.textBlock.angle)),te=S.textBlock.width*Math.cos(Math.PI/180*Math.abs(S.textBlock.angle))+(S.textBlock.height-S.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(S.textBlock.angle)));if(v.panEnabled)for(u=0;u<h.length;u++)b[u]=m(v.sessionVariables.axisY[u].height)?v.sessionVariables.axisY[u].height=b[u]:v.sessionVariables.axisY[u].height;else for(u=0;u<h.length;u++)v.sessionVariables.axisY[u].height=b[u];if(h&&0<h.length)for(u=h.length-1;0<=u;u--)S=Math.round(x.y2),_=Math.round(x.y2>h[u].chart.height?h[u].chart.height:x.y2),h[u].lineCoordinates.y1=S-(b[u]+h[u].margin+vt),h[u].lineCoordinates.y2=S-(b[u]+h[u].margin+vt),h[u].labelPlacement==="inside"&&0<u&&(h[u].lineCoordinates.y1=h[u].lineCoordinates.y1+b[u]-(h[u]._titleTextBlock?h[u]._titleTextBlock.height:0)-h[u].tickLength-(h[u].stripLineLabelEffectiveHeight||0)-5,h[u].lineCoordinates.y2=h[u].lineCoordinates.y1+h[u].lineThickness/2),h[u].tickPlacement==="inside"&&0<u&&(h[u].lineCoordinates.y1+=h[u].tickLength,h[u].lineCoordinates.y2=h[u].lineCoordinates.y1+h[u].lineThickness/2),h[u].bounds={x1:y,y1:S-(b[u]+vt+h[u].margin),x2:M,y2:_-(vt+h[u].margin),width:M-y,height:b[u]},h[u].title&&(h[u]._titleTextBlock.maxWidth=0<h[u].titleMaxWidth&&h[u].titleMaxWidth<h[u].lineCoordinates.width?h[u].titleMaxWidth:h[u].lineCoordinates.width),vt+=b[u]+h[u].margin;if(o&&0<o.length)for(u=o.length-1;0<=u;u--)o[u]&&(S=Math.round(x.y1),_=Math.round(x.y1+(Q[u]+o[u].margin+ie)),o[u].lineCoordinates.y1=_,o[u].lineCoordinates.y2=_,o[u].labelPlacement==="inside"&&0<u&&(o[u].lineCoordinates.y1=_-Q[u]+(o[u]._titleTextBlock?o[u]._titleTextBlock.height:0)+o[u].tickLength+(o[u].stripLineLabelEffectiveHeight||0),o[u].lineCoordinates.y2=o[u].lineCoordinates.y1-o[u].lineThickness/2),o[u].tickPlacement==="inside"&&0<u&&(o[u].lineCoordinates.y1-=o[u].tickLength,o[u].lineCoordinates.y2=o[u].lineCoordinates.y1-o[u].lineThickness/2),o[u].bounds={x1:y,y1:S+(o[u].margin+ie),x2:M,y2:_,width:M-y},o[u].bounds.height=o[u].bounds.y2-o[u].bounds.y1,o[u].title&&(o[u]._titleTextBlock.maxWidth=0<o[u].titleMaxWidth&&o[u].titleMaxWidth<o[u].lineCoordinates.width?o[u].titleMaxWidth:o[u].lineCoordinates.width),ie+=Q[u]+o[u].margin);if(r&&0<r.length)for(u=0;u<r.length;u++){if(Ge=r[u]._labels&&0<r[u]._labels.length?r[u]._labels[0].textBlock.fontSize/2:0,y=Math.round(x.x1+c),S=o&&0<o.length?Math.round(o[0]?o[0].lineCoordinates.y2:x.y1<Math.max(Ge,10)?Math.max(Ge,10):x.y1):x.y1<Math.max(Ge,10)?Math.max(Ge,10):x.y1,M=Math.round(x.x1+Ft+c),_=h&&0<h.length?Math.round(h[0]?h[0].lineCoordinates.y1:x.y2-mt>v.height-Math.max(Ge,10)?v.height-Math.max(Ge,10):x.y2-mt):x.y2>v.height-Math.max(Ge,10)?v.height-Math.max(Ge,10):x.y2,h&&0<h.length)for(Ge=0;Ge<h.length;Ge++)h[Ge]&&h[Ge].labelAutoFit&&(M=h[Ge].lineCoordinates.x1,y=0>h[Ge].labelAngle||h[Ge].labelAngle===0?M-Ft:y);if(o&&0<o.length)for(Ge=0;Ge<o.length;Ge++)o[Ge]&&o[Ge].labelAutoFit&&(M=o[Ge].lineCoordinates.x1,y=M-Ft);r[u].lineCoordinates={x1:M-be,y1:S,x2:M-be,y2:_,height:Math.abs(_-S)},r[u].labelPlacement==="inside"&&0<u&&(r[u].lineCoordinates.x1=r[u].lineCoordinates.x1-(Me[u]-(r[u]._titleTextBlock?r[u]._titleTextBlock.height:0))+r[u].tickLength+(r[u].stripLineLabelEffectiveWidth||0),r[u].lineCoordinates.x2=r[u].lineCoordinates.x1+r[u].lineThickness/2),r[u].tickPlacement==="inside"&&0<u&&(r[u].lineCoordinates.x1-=r[u].tickLength,r[u].lineCoordinates.x2=r[u].lineCoordinates.x1+r[u].lineThickness/2),r[u].bounds={x1:M-(Me[u]+be),y1:S,x2:M-be,y2:_,height:_-S},r[u].bounds.width=r[u].bounds.x2-r[u].bounds.x1,r[u].title&&(r[u]._titleTextBlock.maxWidth=0<r[u].titleMaxWidth&&r[u].titleMaxWidth<r[u].lineCoordinates.height?r[u].titleMaxWidth:r[u].lineCoordinates.height),r[u].calculateValueToPixelConversionParameters(),r[u].calculateBreaksSizeInValues(),be+=Me[u]+r[u].margin}if(d&&0<d.length)for(u=0;u<d.length;u++){if(Ge=d[u]._labels&&0<d[u]._labels.length?d[u]._labels[0].textBlock.fontSize/2:0,y=Math.round(x.x1-c),S=o&&0<o.length?Math.round(o[0]?o[0].lineCoordinates.y2:x.y1<Math.max(Ge,10)?Math.max(Ge,10):x.y1):x.y1<Math.max(Ge,10)?Math.max(Ge,10):x.y1,M=Math.round(x.x2-Ct-At),_=h&&0<h.length?Math.round(h[0]?h[0].lineCoordinates.y1:x.y2-mt>v.height-Math.max(Ge,10)?v.height-Math.max(Ge,10):x.y2-mt):x.y2>v.height-Math.max(Ge,10)?v.height-Math.max(Ge,10):x.y2,h&&0<h.length)for(Ge=0;Ge<h.length;Ge++)h[Ge]&&h[Ge].labelAutoFit&&(M=0>h[Ge].labelAngle?Math.max(M,Y):h[Ge].labelAngle===0?Math.max(M,Y/2):M,y=0>h[Ge].labelAngle||h[Ge].labelAngle===0?M-Ct:y);if(o&&0<o.length)for(Ge=0;Ge<o.length;Ge++)o[Ge]&&o[Ge].labelAutoFit&&(M=o[Ge].lineCoordinates.x2,y=M-Ct);d[u].lineCoordinates={x1:M+Ae,y1:S,x2:M+Ae,y2:_,height:Math.abs(_-S)},d[u].labelPlacement==="inside"&&0<u&&(d[u].lineCoordinates.x1=d[u].lineCoordinates.x1+(z[u]-(d[u]._titleTextBlock?d[u]._titleTextBlock.height:0)-2)-d[u].tickLength-(d[u].stripLineLabelEffectiveWidth||0),d[u].lineCoordinates.x2=d[u].lineCoordinates.x1+d[u].lineThickness/2),d[u].tickPlacement==="inside"&&0<u&&(d[u].lineCoordinates.x1+=d[u].tickLength,d[u].lineCoordinates.x2=d[u].lineCoordinates.x1+d[u].lineThickness/2),d[u].bounds={x1:d[u].lineCoordinates.x1,y1:S,x2:M+z[u]+Ae,y2:_,width:M-y,height:_-S},d[u].bounds.width=d[u].bounds.x2-d[u].bounds.x1,d[u].title&&(d[u]._titleTextBlock.maxWidth=0<d[u].titleMaxWidth&&d[u].titleMaxWidth<d[u].lineCoordinates.height?d[u].titleMaxWidth:d[u].lineCoordinates.height),d[u].calculateValueToPixelConversionParameters(),d[u].calculateBreaksSizeInValues(),Ae+=z[u]+d[u].margin}for(u=0;u<C.length;u++)C[u].type==="axisY"&&(C[u].calculateValueToPixelConversionParameters(),C[u].calculateBreaksSizeInValues());if(0<R){if(r&&0<r.length)for(u=0;u<r.length;u++)I=oe[R-1][u]===oe[R][u];else I=!0;if(d&&0<d.length)for(u=0;u<d.length;u++)le=J[R-1][u]===J[R][u];else le=!0;if(h&&0<h.length)for(u=0;u<h.length;u++)ue=ve[R-1][u]===ve[R][u];else ue=!0;if(o&&0<o.length)for(u=0;u<o.length;u++)ce=A[R-1][u]===A[R][u];else ce=!0}if(I&&le&&ue&&ce)break;R++}if(h&&0<h.length)for(u=0;u<h.length;u++)h[u].calculateStripLinesThicknessInValues(),h[u].calculateBreaksInPixels();if(o&&0<o.length)for(u=0;u<o.length;u++)o[u].calculateStripLinesThicknessInValues(),o[u].calculateBreaksInPixels();if(r&&0<r.length)for(u=0;u<r.length;u++)r[u].calculateStripLinesThicknessInValues(),r[u].calculateBreaksInPixels();if(d&&0<d.length)for(u=0;u<d.length;u++)d[u].calculateStripLinesThicknessInValues(),d[u].calculateBreaksInPixels()}},ke.render=function(r,d,h,o,c){c=r[0]?r[0].chart:d[0].chart;var x=c.ctx;if(c.alignVerticalAxes&&c.alignVerticalAxes(),x.save(),x.beginPath(),r&&r.length&&x.rect(2,r[0].bounds.y1,r[0].chart.width-4,r[r.length-1].bounds.y2),d&&d.length&&x.rect(2,d[d.length-1].bounds.y1,d[0].chart.width-4,d[0].bounds.y2),x.clip(),r&&0<r.length)for(var y=0;y<r.length;y++)r[y].renderLabelsTicksAndTitle();if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderLabelsTicksAndTitle();if(x.restore(),h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderLabelsTicksAndTitle();if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderLabelsTicksAndTitle();if(c.preparePlotArea(),y=c.plotArea,x.save(),x.beginPath(),x.rect(y.x1,y.y1,Math.abs(y.x2-y.x1),Math.abs(y.y2-y.y1)),x.clip(),r&&0<r.length)for(y=0;y<r.length;y++)r[y].renderStripLinesOfThicknessType("value");if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderStripLinesOfThicknessType("value");if(h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderStripLinesOfThicknessType("value");if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderStripLinesOfThicknessType("value");if(r&&0<r.length)for(y=0;y<r.length;y++)r[y].renderInterlacedColors();if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderInterlacedColors();if(h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderInterlacedColors();if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderInterlacedColors();if(x.restore(),r&&0<r.length)for(y=0;y<r.length;y++)r[y].renderGrid(),X&&(r[y].createMask(),r[y].renderBreaksBackground());if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderGrid(),X&&(d[y].createMask(),d[y].renderBreaksBackground());if(h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderGrid(),X&&(h[y].createMask(),h[y].renderBreaksBackground());if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderGrid(),X&&(o[y].createMask(),o[y].renderBreaksBackground());if(r&&0<r.length)for(y=0;y<r.length;y++)r[y].renderAxisLine();if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderAxisLine();if(h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderAxisLine();if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderAxisLine();if(x=!1,r&&0<r.length)for(y=0;y<r.length;y++)r[y].renderStripLinesOfThicknessType("pixel"),r[y].crosshair&&r[y].crosshair.enabled&&(x=!0,c.clearedOverlayedCanvas=r[y].type);if(d&&0<d.length)for(y=0;y<d.length;y++)d[y].renderStripLinesOfThicknessType("pixel"),d[y].crosshair&&d[y].crosshair.enabled&&(x=!0,c.clearedOverlayedCanvas=d[y].type);if(h&&0<h.length)for(y=0;y<h.length;y++)h[y].renderStripLinesOfThicknessType("pixel"),h[y].crosshair&&h[y].crosshair.enabled&&(x=!0,c.clearedOverlayedCanvas=h[y].type);if(o&&0<o.length)for(y=0;y<o.length;y++)o[y].renderStripLinesOfThicknessType("pixel"),o[y].crosshair&&o[y].crosshair.enabled&&(x=!0,c.clearedOverlayedCanvas=o[y].type);(x||!x&&c.clearedOverlayedCanvas&&0<=c.clearedOverlayedCanvas.indexOf("axis"))&&(c.resetOverlayedCanvas(),c.renderCrosshairs(null,m(c.sessionVariables.crosshairShownByPixel)||c.sessionVariables.crosshairShownByPixel?!0:c.sessionVariables.crosshairShownByPixel))},ke.prototype.calculateStripLinesThicknessInValues=function(){for(var r=0;r<this.stripLines.length;r++)if(this.stripLines[r].startValue!==null&&this.stripLines[r].endValue!==null){var d=Math.min(this.stripLines[r].startValue,this.stripLines[r].endValue),h=Math.max(this.stripLines[r].startValue,this.stripLines[r].endValue),o=this.getApparentDifference(d,h);this.stripLines[r].value=this.convertPixelToValue((this.convertValueToPixel(d)+this.convertValueToPixel(h))/2),this.stripLines[r].thickness=o,this.stripLines[r]._thicknessType="value"}},ke.prototype.calculateBreaksSizeInValues=function(){for(var r=this._position==="left"||this._position==="right"?this.lineCoordinates.height||this.chart.height:this.lineCoordinates.width||this.chart.width,d=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],h=this.conversionParameters.pixelPerUnit||r/(this.logarithmic?this.conversionParameters.maximum/this.conversionParameters.minimum:this.conversionParameters.maximum-this.conversionParameters.minimum),o=this.scaleBreaks&&!m(this.scaleBreaks.options.spacing),c,x=0;x<d.length;x++)c=o||!m(d[x].options.spacing),d[x].spacing=ee(d[x].spacing,r,8,c?.1*r:8,c?0:3)<<0,d[x].size=0>d[x].spacing?0:Math.abs(d[x].spacing/h),this.logarithmic&&(d[x].size=Math.pow(this.logarithmBase,d[x].size))},ke.prototype.calculateBreaksInPixels=function(){if(!(this.scaleBreaks&&0>=this.scaleBreaks._appliedBreaks.length)){var r=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];r.length&&(this.scaleBreaks.firstBreakIndex=this.scaleBreaks.lastBreakIndex=null);for(var d=0;d<r.length&&!(r[d].startValue>this.conversionParameters.maximum);d++)r[d].endValue<this.conversionParameters.minimum||(m(this.scaleBreaks.firstBreakIndex)&&(this.scaleBreaks.firstBreakIndex=d),r[d].startValue>=this.conversionParameters.minimum&&(r[d].startPixel=this.convertValueToPixel(r[d].startValue),this.scaleBreaks.lastBreakIndex=d),r[d].endValue<=this.conversionParameters.maximum&&(r[d].endPixel=this.convertValueToPixel(r[d].endValue)))}},ke.prototype.renderLabelsTicksAndTitle=function(){var r=this,d=!1,h=0,o=0,c=1,x=0;if(this.labelAngle!==0&&this.labelAngle!==360&&(c=1.2),typeof this.options.interval>"u"){if(this._position==="bottom"||this._position==="top")if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){for(var h=[],c=this.labelAngle!==0&&this.labelAngle!==360?1:1.2,y,S=this.viewportMaximum,M=this.lineCoordinates.width/Math.log(this.range),v=this._labels.length-1;0<=v&&(b=this._labels[v],!(b.position<this.viewportMinimum));v--)b.position>this.viewportMaximum||!(v===this._labels.length-1||y<Math.log(S/b.position)*M/c)||(h.push(b),S=b.position,y=b.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=h}else{for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||(y=b.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)),h+=y);h>this.lineCoordinates.width*c&&this.labelAutoFit&&(d=!0)}if(this._position==="left"||this._position==="right")if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){for(var h=[],_,S=this.viewportMaximum,M=this.lineCoordinates.height/Math.log(this.range),v=this._labels.length-1;0<=v&&(b=this._labels[v],!(b.position<this.viewportMinimum));v--)b.position>this.viewportMaximum||!(v===this._labels.length-1||_<Math.log(S/b.position)*M)||(h.push(b),S=b.position,_=b.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=h}else{for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||(_=b.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)),o+=_);o>this.lineCoordinates.height*c&&this.labelAutoFit&&(d=!0)}}this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit&&this._labels.sort(function(u,I){return u.position-I.position});var v=0,b,C;if(this._position==="bottom"){for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(C=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(C.x<<0)+.5:C.x<<0,this.ctx.beginPath(),this.ctx.moveTo(o,C.y<<0),this.ctx.lineTo(o,C.y+this.tickLength<<0),this.ctx.stroke()),d&&x++%2!==0&&this.labelAutoFit||(b.textBlock.angle===0?(C.x-=b.textBlock.width/2,C.y=this.labelPlacement==="inside"?C.y-((this.tickPlacement==="inside"?this.tickLength:0)+b.textBlock.height-b.textBlock.fontSize/2):C.y+(this.tickPlacement==="inside"?0:this.tickLength)+b.textBlock.fontSize/2+5):0>this.labelAngle?(C.x-=this.labelPlacement==="inside"?0:b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle),C.y=this.labelPlacement==="inside"?C.y-(this.tickPlacement==="inside"?this.tickLength:0)-(b.textBlock.height-b.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle):C.y+(this.tickPlacement==="inside"?0:this.tickLength)+5+Math.abs(b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-b.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle))):(C.x-=this.labelPlacement==="inside"?b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,C.y=this.labelPlacement==="inside"?C.y-(this.tickPlacement==="inside"?this.tickLength:0)-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-(b.textBlock.height-b.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle):C.y+(this.tickPlacement==="inside"?0:this.tickLength)+5+Math.abs(b.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle))),b.textBlock.x=C.x,b.textBlock.y=C.y));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(v=0;v<r._labels.length;v++)if(b=r._labels[v],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(C=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var u=r.ctx.lineWidth%2===1?(C.x<<0)+.5:C.x<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(u,C.y<<0),r.ctx.lineTo(u,C.y-r.tickLength<<0),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y2-this._titleTextBlock.height+this._titleTextBlock._lineHeight/2-1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="top"){for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(C=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(C.x<<0)+.5:C.x<<0,this.ctx.beginPath(),this.ctx.moveTo(o,C.y<<0),this.ctx.lineTo(o,C.y-this.tickLength<<0),this.ctx.stroke()),d&&x++%2!==0&&this.labelAutoFit||(b.textBlock.angle===0?(C.x-=b.textBlock.width/2,C.y=this.labelPlacement==="inside"?C.y+this.labelFontSize/2+(this.tickPlacement==="inside"?this.tickLength:0)+5:C.y-((this.tickPlacement==="inside"?0:this.tickLength)+b.textBlock.height-b.textBlock.fontSize/2)):0>this.labelAngle?(C.x-=this.labelPlacement==="inside"?b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,C.y=this.labelPlacement==="inside"?C.y+(this.tickPlacement==="inside"?this.tickLength:0)+5-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+b.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle):C.y-(this.tickPlacement==="inside"?0:this.tickLength)-2-(b.textBlock.height-b.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)):(C.x-=this.labelPlacement==="inside"?0:b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle),C.y=this.labelPlacement==="inside"?C.y+(this.tickPlacement==="inside"?this.tickLength:0)+5+b.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle):C.y-(this.tickPlacement==="inside"?0:this.tickLength)-2-((b.textBlock.height-b.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)+b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle))),b.textBlock.x=C.x,b.textBlock.y=C.y));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(v=0;v<r._labels.length;v++)if(b=r._labels[v],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(C=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var u=r.ctx.lineWidth%2===1?(C.x<<0)+.5:C.x<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(u,C.y<<0),r.ctx.lineTo(u,C.y+r.tickLength<<0),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y1+this._titleTextBlock._lineHeight/2+1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="left"){for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(C=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(C.y<<0)+.5:C.y<<0,this.ctx.beginPath(),this.ctx.moveTo(C.x<<0,o),this.ctx.lineTo(C.x-this.tickLength<<0,o),this.ctx.stroke()),d&&x++%2!==0&&this.labelAutoFit||(this.labelAngle===0?(b.textBlock.y=C.y,b.textBlock.x=this.labelPlacement==="inside"?C.x+(this.tickPlacement==="inside"?this.tickLength:0)+5:C.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?0:this.tickLength)-5):0>this.labelAngle?(b.textBlock.y=this.labelPlacement==="inside"?C.y:C.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),b.textBlock.x=this.labelPlacement==="inside"?C.x-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?this.tickLength:0)+5:C.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?0:this.tickLength)-5):(b.textBlock.y=this.labelPlacement==="inside"?C.y:C.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),b.textBlock.x=this.labelPlacement==="inside"?C.x+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?this.tickLength:0)+5:C.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?0:this.tickLength)-5)));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(v=0;v<r._labels.length;v++)if(b=r._labels[v],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(C=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var u=r.ctx.lineWidth%2===1?(C.y<<0)+.5:C.y<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(C.x<<0,u),r.ctx.lineTo(C.x+r.tickLength<<0,u),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x1+this._titleTextBlock._lineHeight/2,this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="right"){for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(C=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(C.y<<0)+.5:C.y<<0,this.ctx.beginPath(),this.ctx.moveTo(C.x<<0,o),this.ctx.lineTo(C.x+this.tickLength<<0,o),this.ctx.stroke()),d&&x++%2!==0&&this.labelAutoFit||(this.labelAngle===0?(b.textBlock.y=C.y,b.textBlock.x=this.labelPlacement==="inside"?C.x-b.textBlock.width-(this.tickPlacement==="inside"?this.tickLength:0)-5:C.x+(this.tickPlacement==="inside"?0:this.tickLength)+5):0>this.labelAngle?(b.textBlock.y=this.labelPlacement==="inside"?C.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):C.y,b.textBlock.x=this.labelPlacement==="inside"?C.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?this.tickLength:0)-5:C.x-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?0:this.tickLength)+5):(b.textBlock.y=this.labelPlacement==="inside"?C.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):C.y,b.textBlock.x=this.labelPlacement==="inside"?C.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?this.tickLength:0)-5:C.x+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?0:this.tickLength)+5)));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(v=0;v<r._labels.length;v++)if(b=r._labels[v],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(C=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var u=r.ctx.lineWidth%2===1?(C.y<<0)+.5:C.y<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(C.x<<0,u),r.ctx.lineTo(C.x-r.tickLength<<0,u),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x2-this._titleTextBlock._lineHeight/2,this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}if(x=0,this.labelPlacement==="inside")this.chart.addEventListener("dataAnimationIterationEnd",function(){for(v=0;v<r._labels.length;v++)b=r._labels[v],b.position<r.viewportMinimum||b.position>r.viewportMaximum||d&&x++%2!==0&&r.labelAutoFit||(r.ctx.save(),r.ctx.beginPath(),b.textBlock.render(!0),r.ctx.restore())},this);else for(v=0;v<this._labels.length;v++)b=this._labels[v],b.position<this.viewportMinimum||b.position>this.viewportMaximum||d&&x++%2!==0&&this.labelAutoFit||b.textBlock.render(!0)},ke.prototype.renderInterlacedColors=function(){var r=this.chart.plotArea.ctx,d,h,o=this.chart.plotArea,c=0;if(d=!0,(this._position==="bottom"||this._position==="top")&&this.interlacedColor)for(r.fillStyle=this.interlacedColor,c=0;c<this._labels.length;c++)d?(d=this.getPixelCoordinatesOnAxis(this._labels[c].position),h=c+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[c+1].position),r.fillRect(Math.min(h.x,d.x),o.y1,Math.abs(h.x-d.x),Math.abs(o.y1-o.y2)),d=!1):d=!0;else if((this._position==="left"||this._position==="right")&&this.interlacedColor)for(r.fillStyle=this.interlacedColor,c=0;c<this._labels.length;c++)d?(h=this.getPixelCoordinatesOnAxis(this._labels[c].position),d=c+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[c+1].position),r.fillRect(o.x1,Math.min(h.y,d.y),Math.abs(o.x1-o.x2),Math.abs(d.y-h.y)),d=!1):d=!0;r.beginPath()},ke.prototype.renderStripLinesOfThicknessType=function(r){if(this.stripLines&&0<this.stripLines.length&&r){var d=this,h,o,c=0,x=0,y=!1;o=!1;for(var S=[],M=[],_=!1,v,c=0;c<this.stripLines.length;c++){var b=this.stripLines[c];b._thicknessType===r&&(r==="pixel"&&(b.value<this.viewportMinimum||b.value>this.viewportMaximum||m(b.value)||isNaN(this.range))||r==="value"&&(b.startValue<=this.viewportMinimum&&b.endValue<=this.viewportMinimum||b.startValue>=this.viewportMaximum&&b.endValue>=this.viewportMaximum||m(b.startValue)||m(b.endValue)||isNaN(this.range))||S.push(b))}for(c=0;c<this._stripLineLabels.length;c++)if(b=this.stripLines[c],h=this._stripLineLabels[c],!(h.position<this.viewportMinimum||h.position>this.viewportMaximum||isNaN(this.range)))if(o=this.getPixelCoordinatesOnAxis(h.position),h.stripLine.labelPlacement==="outside"){if(b&&(this.ctx.strokeStyle=b.color,this.ctx.lineWidth=b._thicknessType==="pixel"?b.thickness:this.tickThickness,m(b.opacity)||b._thicknessType!=="pixel"||(v=b.ctx.globalAlpha,b.ctx.globalAlpha=b.opacity)),this._position==="bottom"){var C=this.ctx.lineWidth%2===1?(o.x<<0)+.5:o.x<<0;this.ctx.beginPath(),this.ctx.moveTo(C,o.y<<0),this.ctx.lineTo(C,o.y+this.tickLength<<0),this.ctx.stroke(),this.labelAngle===0?(o.x-=h.textBlock.width/2,o.y+=this.tickLength+h.textBlock.fontSize/2+5):(o.x-=0>this.labelAngle?h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,o.y+=this.tickLength+5+(0>this.labelAngle?Math.abs(h.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-h.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle)):Math.abs(h.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle))))}else this._position==="top"?(C=this.ctx.lineWidth%2===1?(o.x<<0)+.5:o.x<<0,this.ctx.beginPath(),this.ctx.moveTo(C,o.y<<0),this.ctx.lineTo(C,o.y-this.tickLength<<0),this.ctx.stroke(),this.labelAngle===0?(o.x-=h.textBlock.width/2,o.y-=this.tickLength+h.textBlock.height-h.textBlock.fontSize/2):(o.x-=0<this.labelAngle?h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,o.y-=this.tickLength+2+(0<this.labelAngle?(h.textBlock.height-h.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)+h.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):(h.textBlock.height-h.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)))):this._position==="left"?(C=this.ctx.lineWidth%2===1?(o.y<<0)+.5:o.y<<0,this.ctx.beginPath(),this.ctx.moveTo(o.x<<0,C),this.ctx.lineTo(o.x-this.tickLength<<0,C),this.ctx.stroke(),this.labelAngle===0?o.x=o.x-h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:(o.y-=h.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),o.x-=this.tickLength+5+(0<this.labelAngle?h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+h.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle):h.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-(h.textBlock.height-h.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)))):this._position==="right"&&(C=this.ctx.lineWidth%2===1?(o.y<<0)+.5:o.y<<0,this.ctx.beginPath(),this.ctx.moveTo(o.x<<0,C),this.ctx.lineTo(o.x+this.tickLength<<0,C),this.ctx.stroke(),o.x=this.labelAngle===0?o.x+this.tickLength+5:this.tickLength+5+(0<this.labelAngle?o.x+(h.textBlock.height-h.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle):o.x-h.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)));v&&(b.ctx.globalAlpha=v),h.textBlock.x=o.x,h.textBlock.y=o.y,M.push(h)}else b._thicknessType===r&&(h.textBlock.angle=-90,this._position==="bottom"?(h.textBlock.maxWidth=this.options.stripLines[c].labelMaxWidth?this.options.stripLines[c].labelMaxWidth:this.chart.plotArea.height-3,h.textBlock.measureText(),o.x-h.textBlock.height-b.thickness/2>this.chart.plotArea.x1?m(b.startValue)?o.x-=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.x-=h.textBlock.height/2-h.textBlock.fontSize/2:(h.textBlock.angle=90,m(b.startValue)?o.x+=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.x+=h.textBlock.height/2-h.textBlock.fontSize/2),o.y=h.textBlock.angle===-90?h.stripLine.labelAlign==="near"?this.chart.plotArea.y2-3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1+h.textBlock.width)/2:this.chart.plotArea.y1+h.textBlock.width+3:h.stripLine.labelAlign==="near"?this.chart.plotArea.y2-h.textBlock.width-3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1-h.textBlock.width)/2:this.chart.plotArea.y1+3):this._position==="top"?(h.textBlock.maxWidth=this.options.stripLines[c].labelMaxWidth?this.options.stripLines[c].labelMaxWidth:this.chart.plotArea.height-3,h.textBlock.measureText(),o.x-h.textBlock.height-b.thickness/2>this.chart.plotArea.x1?m(b.startValue)?o.x-=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.x-=h.textBlock.height/2-h.textBlock.fontSize/2:(h.textBlock.angle=90,m(b.startValue)?o.x+=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.x+=h.textBlock.height/2-h.textBlock.fontSize/2),o.y=h.textBlock.angle===-90?h.stripLine.labelAlign==="near"?this.chart.plotArea.y1+h.textBlock.width+3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1+h.textBlock.width)/2:this.chart.plotArea.y2-3:h.stripLine.labelAlign==="near"?this.chart.plotArea.y1+3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1-h.textBlock.width)/2:this.chart.plotArea.y2-h.textBlock.width-3):this._position==="left"?(h.textBlock.maxWidth=this.options.stripLines[c].labelMaxWidth?this.options.stripLines[c].labelMaxWidth:this.chart.plotArea.width-3,h.textBlock.angle=0,h.textBlock.measureText(),o.y-h.textBlock.height-b.thickness/2>this.chart.plotArea.y1?m(b.startValue)?o.y-=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.y-=h.textBlock.height/2-h.textBlock.fontSize/2:m(b.startValue)?o.y+=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.y+=h.textBlock.height/2-h.textBlock.fontSize+3,o.x=h.stripLine.labelAlign==="near"?this.chart.plotArea.x1+3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-h.textBlock.width/2:this.chart.plotArea.x2-h.textBlock.width-3):this._position==="right"&&(h.textBlock.maxWidth=this.options.stripLines[c].labelMaxWidth?this.options.stripLines[c].labelMaxWidth:this.chart.plotArea.width-3,h.textBlock.angle=0,h.textBlock.measureText(),o.y-h.textBlock.height-b.thickness/2>this.chart.plotArea.y1?m(b.startValue)?o.y-=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.y-=h.textBlock.height/2-h.textBlock.fontSize/2:m(b.startValue)?o.y+=h.textBlock.height-h.textBlock.fontSize/2+b.thickness/2:o.y-=h.textBlock.height/2-h.textBlock.fontSize/2+3,o.x=h.stripLine.labelAlign==="near"?this.chart.plotArea.x2-h.textBlock.width-3:h.stripLine.labelAlign==="center"?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-h.textBlock.width/2:this.chart.plotArea.x1+3),h.textBlock.x=o.x,h.textBlock.y=o.y,M.push(h));if(!_){for(o=!1,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),c=0;c<S.length;c++)b=S[c],b.showOnTop?y||(y=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),x=0;x<S.length;x++)b=S[x],b.showOnTop&&b.render();this.ctx.restore()},b)):b.render();for(c=0;c<M.length;c++)h=M[c],h.stripLine.showOnTop?o||(o=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(x=0;x<M.length;x++)h=M[x],h.stripLine.labelPlacement==="inside"&&h.stripLine.showOnTop&&(d.ctx.save(),d.ctx.beginPath(),d.ctx.rect(d.chart.plotArea.x1,d.chart.plotArea.y1,d.chart.plotArea.width,d.chart.plotArea.height),d.ctx.clip(),h.textBlock.render(!0),d.ctx.restore())},h.textBlock)):h.stripLine.labelPlacement==="inside"&&h.textBlock.render(!0);this.ctx.restore(),_=!0}if(_)for(o=!1,c=0;c<M.length;c++)h=M[c],h.stripLine.labelPlacement==="outside"&&h.textBlock.render(!0)}},ke.prototype.renderBreaksBackground=function(){this.chart._breaksCanvas&&this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length&&this.maskCanvas&&(this.chart._breaksCanvasCtx.save(),this.chart._breaksCanvasCtx.beginPath(),this.chart._breaksCanvasCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.chart._breaksCanvasCtx.clip(),this.chart._breaksCanvasCtx.drawImage(this.maskCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx.restore())},ke.prototype.createMask=function(){if(this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length){var r=this.scaleBreaks._appliedBreaks;X?(this.maskCanvas=U(this.chart.width,this.chart.height),this.maskCtx=this.maskCanvas.getContext("2d")):(this.maskCanvas=this.chart.plotArea.canvas,this.maskCtx=this.chart.plotArea.ctx),this.maskCtx.save(),this.maskCtx.beginPath(),this.maskCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.maskCtx.clip();for(var d=0;d<r.length;d++)r[d].endValue<this.viewportMinimum||r[d].startValue>this.viewportMaximum||isNaN(this.range)||r[d].render(this.maskCtx);this.maskCtx.restore()}},ke.prototype.renderCrosshair=function(r,d){isFinite(this.minimum)&&isFinite(this.maximum)&&this.crosshair.render(r,d)},ke.prototype.showCrosshair=function(r){m(r)||r<this.viewportMinimum||r>this.viewportMaximum||(this._position==="top"||this._position==="bottom"?this.crosshair.render(this.convertValueToPixel(r),null,r):this.crosshair.render(null,this.convertValueToPixel(r),r))},ke.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var r=this.chart.ctx;r.save();var d,h=this.chart.plotArea;if(r.lineWidth=this.gridThickness,r.strokeStyle=this.gridColor,r.setLineDash&&r.setLineDash(P(this.gridDashType,this.gridThickness)),this._position==="bottom"||this._position==="top")for(o=0;o<this._labels.length;o++)this._labels[o].position<this.viewportMinimum||this._labels[o].position>this.viewportMaximum||this._labels[o].breaksLabelType||(r.beginPath(),d=this.getPixelCoordinatesOnAxis(this._labels[o].position),d=r.lineWidth%2===1?(d.x<<0)+.5:d.x<<0,r.moveTo(d,h.y1<<0),r.lineTo(d,h.y2<<0),r.stroke());else if(this._position==="left"||this._position==="right")for(var o=0;o<this._labels.length;o++)this._labels[o].position<this.viewportMinimum||this._labels[o].position>this.viewportMaximum||this._labels[o].breaksLabelType||(r.beginPath(),d=this.getPixelCoordinatesOnAxis(this._labels[o].position),d=r.lineWidth%2===1?(d.y<<0)+.5:d.y<<0,r.moveTo(h.x1<<0,d),r.lineTo(h.x2<<0,d),r.stroke());r.restore()}},ke.prototype.renderAxisLine=function(){var r=this.chart.ctx,d=X?this.chart._preRenderCtx:r,h=Math.ceil(this.tickThickness/(this.reversed?-2:2)),o=Math.ceil(this.tickThickness/(this.reversed?2:-2)),c,x;if(d.save(),this._position==="bottom"||this._position==="top"){if(this.lineThickness){this.reversed?(c=this.lineCoordinates.x2,x=this.lineCoordinates.x1):(c=this.lineCoordinates.x1,x=this.lineCoordinates.x2),d.lineWidth=this.lineThickness,d.strokeStyle=this.lineColor?this.lineColor:"black",d.setLineDash&&d.setLineDash(P(this.lineDashType,this.lineThickness));var y=this.lineThickness%2===1?(this.lineCoordinates.y1<<0)+.5:this.lineCoordinates.y1<<0;if(d.beginPath(),this.scaleBreaks&&!m(this.scaleBreaks.firstBreakIndex))if(m(this.scaleBreaks.lastBreakIndex))c=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+o;else for(var S=this.scaleBreaks.firstBreakIndex;S<=this.scaleBreaks.lastBreakIndex;S++)d.moveTo(c,y),d.lineTo(this.scaleBreaks._appliedBreaks[S].startPixel+h,y),c=this.scaleBreaks._appliedBreaks[S].endPixel+o;c&&(d.moveTo(c,y),d.lineTo(x,y)),d.stroke()}}else if((this._position==="left"||this._position==="right")&&this.lineThickness){if(this.reversed?(c=this.lineCoordinates.y1,x=this.lineCoordinates.y2):(c=this.lineCoordinates.y2,x=this.lineCoordinates.y1),d.lineWidth=this.lineThickness,d.strokeStyle=this.lineColor,d.setLineDash&&d.setLineDash(P(this.lineDashType,this.lineThickness)),y=this.lineThickness%2===1?(this.lineCoordinates.x1<<0)+.5:this.lineCoordinates.x1<<0,d.beginPath(),this.scaleBreaks&&!m(this.scaleBreaks.firstBreakIndex))if(m(this.scaleBreaks.lastBreakIndex))c=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+h;else for(S=this.scaleBreaks.firstBreakIndex;S<=this.scaleBreaks.lastBreakIndex;S++)d.moveTo(y,c),d.lineTo(y,this.scaleBreaks._appliedBreaks[S].startPixel+o),c=this.scaleBreaks._appliedBreaks[S].endPixel+h;c&&(d.moveTo(y,c),d.lineTo(y,x)),d.stroke()}X&&(r.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx&&this.chart._breaksCanvasCtx.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),d.clearRect(0,0,this.chart.width,this.chart.height)),d.restore()},ke.prototype.getPixelCoordinatesOnAxis=function(r){var d={};return(this._position==="bottom"||this._position==="top")&&(d.x=this.convertValueToPixel(r),d.y=this.lineCoordinates.y1),(this._position==="left"||this._position==="right")&&(d.y=this.convertValueToPixel(r),d.x=this.lineCoordinates.x2),d},ke.prototype.convertPixelToValue=function(r){if(typeof r>"u")return null;var h=0,c=0,d,h=!0,o=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],c=typeof r=="number"?r:this._position==="left"||this._position==="right"?r.y:r.x;if(this.logarithmic){if(r=d=Math.pow(this.logarithmBase,(c-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit),c<=this.conversionParameters.reference==(this._position==="left"||this._position==="right")!==this.reversed){for(c=0;c<o.length;c++)if(!(o[c].endValue<this.conversionParameters.minimum))if(h)if(o[c].startValue<this.conversionParameters.minimum){if(1<o[c].size&&this.conversionParameters.minimum*Math.pow(o[c].endValue/o[c].startValue,Math.log(d)/Math.log(o[c].size))<o[c].endValue){r=Math.pow(o[c].endValue/o[c].startValue,Math.log(d)/Math.log(o[c].size));break}else r*=o[c].endValue/this.conversionParameters.minimum/Math.pow(o[c].size,Math.log(o[c].endValue/this.conversionParameters.minimum)/Math.log(o[c].endValue/o[c].startValue)),d/=Math.pow(o[c].size,Math.log(o[c].endValue/this.conversionParameters.minimum)/Math.log(o[c].endValue/o[c].startValue));h=!1}else if(d>o[c].startValue/this.conversionParameters.minimum){if(d/=o[c].startValue/this.conversionParameters.minimum,d<o[c].size){r*=Math.pow(o[c].endValue/o[c].startValue,o[c].size===1?1:Math.log(d)/Math.log(o[c].size))/d;break}else r*=o[c].endValue/o[c].startValue/o[c].size;d/=o[c].size,h=!1}else break;else if(d>o[c].startValue/o[c-1].endValue){if(d/=o[c].startValue/o[c-1].endValue,d<o[c].size){r*=Math.pow(o[c].endValue/o[c].startValue,o[c].size===1?1:Math.log(d)/Math.log(o[c].size))/d;break}else r*=o[c].endValue/o[c].startValue/o[c].size;d/=o[c].size}else break}else for(c=o.length-1;0<=c;c--)if(!(o[c].startValue>this.conversionParameters.minimum))if(h)if(o[c].endValue>this.conversionParameters.minimum){if(1<o[c].size&&this.conversionParameters.minimum*Math.pow(o[c].endValue/o[c].startValue,Math.log(d)/Math.log(o[c].size))>o[c].startValue){r=Math.pow(o[c].endValue/o[c].startValue,Math.log(d)/Math.log(o[c].size));break}else r*=o[c].startValue/this.conversionParameters.minimum*Math.pow(o[c].size,Math.log(o[c].startValue/this.conversionParameters.minimum)/Math.log(o[c].endValue/o[c].startValue))*d,d*=Math.pow(o[c].size,Math.log(this.conversionParameters.minimum/o[c].startValue)/Math.log(o[c].endValue/o[c].startValue));h=!1}else if(d<o[c].endValue/this.conversionParameters.minimum){if(d/=o[c].endValue/this.conversionParameters.minimum,d>1/o[c].size){r*=Math.pow(o[c].endValue/o[c].startValue,1>=o[c].size?1:Math.log(d)/Math.log(o[c].size))*d;break}else r/=o[c].endValue/o[c].startValue/o[c].size;d*=o[c].size,h=!1}else break;else if(d<o[c].endValue/o[c+1].startValue){if(d/=o[c].endValue/o[c+1].startValue,d>1/o[c].size){r*=Math.pow(o[c].endValue/o[c].startValue,1>=o[c].size?1:Math.log(d)/Math.log(o[c].size))*d;break}else r/=o[c].endValue/o[c].startValue/o[c].size;d*=o[c].size}else break;h=r*this.viewportMinimum}else{if(r=d=(c-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit,c<=this.conversionParameters.reference==(this._position==="left"||this._position==="right")!==this.reversed){for(c=0;c<o.length;c++)if(!(o[c].endValue<this.conversionParameters.minimum))if(h)if(o[c].startValue<this.conversionParameters.minimum){if(o[c].size&&this.conversionParameters.minimum+d*(o[c].endValue-o[c].startValue)/o[c].size<o[c].endValue){r=0>=o[c].size?0:d*(o[c].endValue-o[c].startValue)/o[c].size;break}else r+=o[c].endValue-this.conversionParameters.minimum-o[c].size*(o[c].endValue-this.conversionParameters.minimum)/(o[c].endValue-o[c].startValue),d-=o[c].size*(o[c].endValue-this.conversionParameters.minimum)/(o[c].endValue-o[c].startValue);h=!1}else if(d>o[c].startValue-this.conversionParameters.minimum){if(d-=o[c].startValue-this.conversionParameters.minimum,d<o[c].size){r+=(o[c].endValue-o[c].startValue)*(o[c].size===0?1:d/o[c].size)-d;break}else r+=o[c].endValue-o[c].startValue-o[c].size;d-=o[c].size,h=!1}else break;else if(d>o[c].startValue-o[c-1].endValue){if(d-=o[c].startValue-o[c-1].endValue,d<o[c].size){r+=(o[c].endValue-o[c].startValue)*(o[c].size===0?1:d/o[c].size)-d;break}else r+=o[c].endValue-o[c].startValue-o[c].size;d-=o[c].size}else break}else for(c=o.length-1;0<=c;c--)if(!(o[c].startValue>this.conversionParameters.minimum))if(h)if(o[c].endValue>this.conversionParameters.minimum)if(o[c].size&&this.conversionParameters.minimum+d*(o[c].endValue-o[c].startValue)/o[c].size>o[c].startValue){r=0>=o[c].size?0:d*(o[c].endValue-o[c].startValue)/o[c].size;break}else r+=o[c].startValue-this.conversionParameters.minimum+o[c].size*(this.conversionParameters.minimum-o[c].startValue)/(o[c].endValue-o[c].startValue),d+=o[c].size*(this.conversionParameters.minimum-o[c].startValue)/(o[c].endValue-o[c].startValue),h=!1;else if(d<o[c].endValue-this.conversionParameters.minimum){if(d-=o[c].endValue-this.conversionParameters.minimum,d>-1*o[c].size){r+=(o[c].endValue-o[c].startValue)*(o[c].size===0?1:d/o[c].size)+d;break}else r-=o[c].endValue-o[c].startValue-o[c].size;d+=o[c].size,h=!1}else break;else if(d<o[c].endValue-o[c+1].startValue){if(d-=o[c].endValue-o[c+1].startValue,d>-1*o[c].size){r+=(o[c].endValue-o[c].startValue)*(o[c].size===0?1:d/o[c].size)+d;break}else r-=o[c].endValue-o[c].startValue-o[c].size;d+=o[c].size}else break;h=this.conversionParameters.minimum+r}return h},ke.prototype.convertValueToPixel=function(r){return r=this.getApparentDifference(this.conversionParameters.minimum,r,r),this.logarithmic?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*Math.log(r/this.conversionParameters.minimum)/this.conversionParameters.lnLogarithmBase+.5<<0:this.type==="axisX"?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(r-this.conversionParameters.minimum)+.5<<0:this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(r-this.conversionParameters.minimum)+.5},ke.prototype.getApparentDifference=function(r,d,h,o){var c=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];if(this.logarithmic){h=m(h)?d/r:h;for(var x=0;x<c.length&&!(d<c[x].startValue);x++)r>c[x].endValue||(r<=c[x].startValue&&d>=c[x].endValue?h=h/c[x].endValue*c[x].startValue*c[x].size:r>=c[x].startValue&&d>=c[x].endValue?h=h/c[x].endValue*r*Math.pow(c[x].size,Math.log(c[x].endValue/r)/Math.log(c[x].endValue/c[x].startValue)):r<=c[x].startValue&&d<=c[x].endValue?h=h/d*c[x].startValue*Math.pow(c[x].size,Math.log(d/c[x].startValue)/Math.log(c[x].endValue/c[x].startValue)):!o&&r>c[x].startValue&&d<c[x].endValue&&(h=r*Math.pow(c[x].size,Math.log(d/r)/Math.log(c[x].endValue/c[x].startValue))))}else for(h=m(h)?Math.abs(d-r):h,x=0;x<c.length&&!(d<c[x].startValue);x++)r>c[x].endValue||(r<=c[x].startValue&&d>=c[x].endValue?h=h-c[x].endValue+c[x].startValue+c[x].size:r>c[x].startValue&&d>=c[x].endValue?h=h-c[x].endValue+r+c[x].size*(c[x].endValue-r)/(c[x].endValue-c[x].startValue):r<=c[x].startValue&&d<c[x].endValue?h=h-d+c[x].startValue+c[x].size*(d-c[x].startValue)/(c[x].endValue-c[x].startValue):!o&&r>c[x].startValue&&d<c[x].endValue&&(h=r+c[x].size*(d-r)/(c[x].endValue-c[x].startValue)));return h},ke.prototype.setViewPortRange=function(r,d){this.sessionVariables.newViewportMinimum=this.viewportMinimum=Math.min(r,d),this.sessionVariables.newViewportMaximum=this.viewportMaximum=Math.max(r,d)},ke.prototype.getXValueAt=function(r){if(!r)return null;var d=null;return this._position==="left"?d=this.convertPixelToValue(r.y):this._position==="bottom"&&(d=this.convertPixelToValue(r.x)),d},ke.prototype.calculateValueToPixelConversionParameters=function(r){r=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];var d={pixelPerUnit:null,minimum:null,reference:null},h=this.lineCoordinates.width,o=this.lineCoordinates.height,h=this._position==="bottom"||this._position==="top"?h:o,o=Math.abs(this.range);if(this.logarithmic)for(var c=0;c<r.length&&!(this.viewportMaximum<r[c].startValue);c++)this.viewportMinimum>r[c].endValue||(this.viewportMinimum>=r[c].startValue&&this.viewportMaximum<=r[c].endValue?h=0:this.viewportMinimum<=r[c].startValue&&this.viewportMaximum>=r[c].endValue?(o=o/r[c].endValue*r[c].startValue,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100):h-Math.min(r[c].spacing,.1*h)):this.viewportMinimum>r[c].startValue&&this.viewportMaximum>=r[c].endValue?(o=o/r[c].endValue*this.viewportMinimum,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100*Math.log(r[c].endValue/this.viewportMinimum)/Math.log(r[c].endValue/r[c].startValue)):h-Math.min(r[c].spacing,.1*h)*Math.log(r[c].endValue/this.viewportMinimum)/Math.log(r[c].endValue/r[c].startValue)):this.viewportMinimum<=r[c].startValue&&this.viewportMaximum<r[c].endValue&&(o=o/this.viewportMaximum*r[c].startValue,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100*Math.log(this.viewportMaximum/r[c].startValue)/Math.log(r[c].endValue/r[c].startValue)):h-Math.min(r[c].spacing,.1*h)*Math.log(this.viewportMaximum/r[c].startValue)/Math.log(r[c].endValue/r[c].startValue)));else for(c=0;c<r.length&&!(this.viewportMaximum<r[c].startValue);c++)this.viewportMinimum>r[c].endValue||(this.viewportMinimum>=r[c].startValue&&this.viewportMaximum<=r[c].endValue?h=0:this.viewportMinimum<=r[c].startValue&&this.viewportMaximum>=r[c].endValue?(o=o-r[c].endValue+r[c].startValue,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100):h-Math.min(r[c].spacing,.1*h)):this.viewportMinimum>r[c].startValue&&this.viewportMaximum>=r[c].endValue?(o=o-r[c].endValue+this.viewportMinimum,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100*(r[c].endValue-this.viewportMinimum)/(r[c].endValue-r[c].startValue)):h-Math.min(r[c].spacing,.1*h)*(r[c].endValue-this.viewportMinimum)/(r[c].endValue-r[c].startValue)):this.viewportMinimum<=r[c].startValue&&this.viewportMaximum<r[c].endValue&&(o=o-this.viewportMaximum+r[c].startValue,h=0<r[c].spacing.toString().indexOf("%")?h*(1-parseFloat(r[c].spacing)/100*(this.viewportMaximum-r[c].startValue)/(r[c].endValue-r[c].startValue)):h-Math.min(r[c].spacing,.1*h)*(this.viewportMaximum-r[c].startValue)/(r[c].endValue-r[c].startValue)));d.minimum=this.viewportMinimum,d.maximum=this.viewportMaximum,d.range=o,(this._position==="bottom"||this._position==="top")&&(this.logarithmic?(d.lnLogarithmBase=Math.log(this.logarithmBase),d.pixelPerUnit=(this.reversed?-1:1)*h*d.lnLogarithmBase/Math.log(Math.abs(o))):d.pixelPerUnit=(this.reversed?-1:1)*h/Math.abs(o),d.reference=this.reversed?this.lineCoordinates.x2:this.lineCoordinates.x1),(this._position==="left"||this._position==="right")&&(this.logarithmic?(d.lnLogarithmBase=Math.log(this.logarithmBase),d.pixelPerUnit=(this.reversed?1:-1)*h*d.lnLogarithmBase/Math.log(Math.abs(o))):d.pixelPerUnit=(this.reversed?1:-1)*h/Math.abs(o),d.reference=this.reversed?this.lineCoordinates.y1:this.lineCoordinates.y2),this.conversionParameters=d},ke.prototype.calculateAxisParameters=function(){if(this.logarithmic)this.calculateLogarithmicAxisParameters();else{var h=this.chart.layoutManager.getFreeSpace(),r=!1,d=!1;this._position==="bottom"||this._position==="top"?(this.maxWidth=h.width,this.maxHeight=h.height):(this.maxWidth=h.height,this.maxHeight=h.width);var h=this.type==="axisX"?this.chart.plotInfo.axisPlacement==="xySwapped"?62:70:this.chart.plotInfo.axisPlacement==="xySwapped"?50:40,y=4;this.type==="axisX"&&(y=600>this.maxWidth?8:6);var h=Math.max(y,Math.floor(this.maxWidth/h)),o,c,x,y=0;if(!m(this.options.viewportMinimum)&&!m(this.options.viewportMaximum)&&this.options.viewportMinimum>=this.options.viewportMaximum&&(this.viewportMinimum=this.viewportMaximum=null),m(this.options.viewportMinimum)&&!m(this.sessionVariables.newViewportMinimum)&&!isNaN(this.sessionVariables.newViewportMinimum)?this.viewportMinimum=this.sessionVariables.newViewportMinimum:(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),m(this.options.viewportMaximum)&&!m(this.sessionVariables.newViewportMaximum)&&!isNaN(this.sessionVariables.newViewportMaximum)?this.viewportMaximum=this.sessionVariables.newViewportMaximum:(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks){for(y=0;y<this.scaleBreaks._appliedBreaks.length;y++)if((!m(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[y].startValue||!m(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[y].startValue||!m(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[y].startValue)&&(!m(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[y].endValue||!m(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[y].endValue||!m(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[y].endValue)){this.scaleBreaks._appliedBreaks.splice(y,1);break}}if(this.type==="axisX"){if(this.dataSeries&&0<this.dataSeries.length)for(o=0;o<this.dataSeries.length;o++)this.dataSeries[o].xValueType==="dateTime"&&(d=!0);o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,c=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,c-o===0&&(y=typeof this.options.interval>"u"?.4:this.options.interval,c+=y,o-=y),this.dataInfo.minDiff!==1/0?x=this.dataInfo.minDiff:1<c-o?x=.5*Math.abs(c-o):(x=1,d&&(r=!0))}else this.type==="axisY"&&(o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,c=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,isFinite(o)||isFinite(c)?isFinite(o)?isFinite(c)||(c=o):o=c:(c=typeof this.options.interval>"u"?-1/0:this.options.interval,o=typeof this.options.interval<"u"||isFinite(this.dataInfo.minDiff)?0:1/0),o===0&&c===0?(c+=9,o=0):c-o===0?(y=Math.min(Math.abs(.01*Math.abs(c)),5),c+=y,o-=y):o>c?(y=Math.min(.01*Math.abs(this.getApparentDifference(c,o,null,!0)),5),0<=c?o=c-y:c=isFinite(o)?o+y:0):(y=Math.min(.01*Math.abs(this.getApparentDifference(o,c,null,!0)),.05),c!==0&&(c+=y),o!==0&&(o-=y)),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<c-o?.5*Math.abs(c-o):1,this.includeZero&&(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&0<o&&(o=0),this.includeZero&&(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&0>c&&(c=0));y=this.getApparentDifference(isNaN(this.viewportMinimum)||this.viewportMinimum===null?o:this.viewportMinimum,isNaN(this.viewportMaximum)||this.viewportMaximum===null?c:this.viewportMaximum,null,!0),this.type==="axisX"&&d?(this.valueType="dateTime",this.intervalType||(y/1<=h?(this.interval=1,this.intervalType="millisecond"):y/2<=h?(this.interval=2,this.intervalType="millisecond"):y/5<=h?(this.interval=5,this.intervalType="millisecond"):y/10<=h?(this.interval=10,this.intervalType="millisecond"):y/20<=h?(this.interval=20,this.intervalType="millisecond"):y/50<=h?(this.interval=50,this.intervalType="millisecond"):y/100<=h?(this.interval=100,this.intervalType="millisecond"):y/200<=h?(this.interval=200,this.intervalType="millisecond"):y/250<=h?(this.interval=250,this.intervalType="millisecond"):y/300<=h?(this.interval=300,this.intervalType="millisecond"):y/400<=h?(this.interval=400,this.intervalType="millisecond"):y/500<=h?(this.interval=500,this.intervalType="millisecond"):y/(1*lt.secondDuration)<=h?(this.interval=1,this.intervalType="second"):y/(2*lt.secondDuration)<=h?(this.interval=2,this.intervalType="second"):y/(5*lt.secondDuration)<=h?(this.interval=5,this.intervalType="second"):y/(10*lt.secondDuration)<=h?(this.interval=10,this.intervalType="second"):y/(15*lt.secondDuration)<=h?(this.interval=15,this.intervalType="second"):y/(20*lt.secondDuration)<=h?(this.interval=20,this.intervalType="second"):y/(30*lt.secondDuration)<=h?(this.interval=30,this.intervalType="second"):y/(1*lt.minuteDuration)<=h?(this.interval=1,this.intervalType="minute"):y/(2*lt.minuteDuration)<=h?(this.interval=2,this.intervalType="minute"):y/(5*lt.minuteDuration)<=h?(this.interval=5,this.intervalType="minute"):y/(10*lt.minuteDuration)<=h?(this.interval=10,this.intervalType="minute"):y/(15*lt.minuteDuration)<=h?(this.interval=15,this.intervalType="minute"):y/(20*lt.minuteDuration)<=h?(this.interval=20,this.intervalType="minute"):y/(30*lt.minuteDuration)<=h?(this.interval=30,this.intervalType="minute"):y/(1*lt.hourDuration)<=h?(this.interval=1,this.intervalType="hour"):y/(2*lt.hourDuration)<=h?(this.interval=2,this.intervalType="hour"):y/(3*lt.hourDuration)<=h?(this.interval=3,this.intervalType="hour"):y/(6*lt.hourDuration)<=h?(this.interval=6,this.intervalType="hour"):y/(1*lt.dayDuration)<=h?(this.interval=1,this.intervalType="day"):y/(2*lt.dayDuration)<=h?(this.interval=2,this.intervalType="day"):y/(4*lt.dayDuration)<=h?(this.interval=4,this.intervalType="day"):y/(1*lt.weekDuration)<=h?(this.interval=1,this.intervalType="week"):y/(2*lt.weekDuration)<=h?(this.interval=2,this.intervalType="week"):y/(3*lt.weekDuration)<=h?(this.interval=3,this.intervalType="week"):y/(1*lt.monthDuration)<=h?(this.interval=1,this.intervalType="month"):y/(2*lt.monthDuration)<=h?(this.interval=2,this.intervalType="month"):y/(3*lt.monthDuration)<=h?(this.interval=3,this.intervalType="month"):y/(6*lt.monthDuration)<=h?(this.interval=6,this.intervalType="month"):(this.interval=y/(1*lt.yearDuration)<=h?1:y/(2*lt.yearDuration)<=h?2:y/(4*lt.yearDuration)<=h?4:Math.floor(ke.getNiceNumber(y/(h-1),!0)/lt.yearDuration),this.intervalType="year")),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=o-x/2),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=c+x/2),r?this.autoValueFormatString="MMM DD YYYY HH:mm":this.intervalType==="year"?this.autoValueFormatString="YYYY":this.intervalType==="month"?this.autoValueFormatString="MMM YYYY":this.intervalType==="week"?this.autoValueFormatString="MMM DD YYYY":this.intervalType==="day"?this.autoValueFormatString="MMM DD YYYY":this.intervalType==="hour"?this.autoValueFormatString="hh:mm TT":this.intervalType==="minute"?this.autoValueFormatString="hh:mm TT":this.intervalType==="second"?this.autoValueFormatString="hh:mm:ss TT":this.intervalType==="millisecond"&&(this.autoValueFormatString="fff'ms'"),this.valueFormatString||(this.valueFormatString=this.autoValueFormatString)):(this.intervalType="number",y=ke.getNiceNumber(y,!1),this.interval=this.options&&0<this.options.interval?this.options.interval:ke.getNiceNumber(y/(h-1),!0),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.type==="axisX"?o-x/2:Math.floor(o/this.interval)*this.interval),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.type==="axisX"?c+x/2:Math.ceil(c/this.interval)*this.interval),this.viewportMaximum===0&&this.viewportMinimum===0&&(this.options.viewportMinimum===0?this.viewportMaximum+=10:this.options.viewportMaximum===0&&(this.viewportMinimum-=10),this.options&&typeof this.options.interval>"u"&&(this.interval=ke.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(h-1),!0)))),(this.minimum===null||this.maximum===null)&&(this.type==="axisX"?(o=this.minimum!==null?this.minimum:this.dataInfo.min,c=this.maximum!==null?this.maximum:this.dataInfo.max,c-o===0&&(y=typeof this.options.interval>"u"?.4:this.options.interval,c+=y,o-=y),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<c-o?.5*Math.abs(c-o):1):this.type==="axisY"&&(o=this.minimum!==null?this.minimum:this.dataInfo.min,c=this.maximum!==null?this.maximum:this.dataInfo.max,isFinite(o)||isFinite(c)?o===0&&c===0?(c+=9,o=0):c-o===0?(y=Math.min(Math.abs(.01*Math.abs(c)),5),c+=y,o-=y):o>c?(y=Math.min(.01*Math.abs(this.getApparentDifference(c,o,null,!0)),5),0<=c?o=c-y:c=isFinite(o)?o+y:0):(y=Math.min(.01*Math.abs(this.getApparentDifference(o,c,null,!0)),.05),c!==0&&(c+=y),o!==0&&(o-=y)):(c=typeof this.options.interval>"u"?-1/0:this.options.interval,o=typeof this.options.interval<"u"||isFinite(this.dataInfo.minDiff)?0:1/0),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<c-o?.5*Math.abs(c-o):1,this.includeZero&&(this.minimum===null||isNaN(this.minimum))&&0<o&&(o=0),this.includeZero&&(this.maximum===null||isNaN(this.maximum))&&0>c&&(c=0)),Math.abs(this.getApparentDifference(o,c,null,!0)),this.type==="axisX"&&d?(this.valueType="dateTime",(this.minimum===null||isNaN(this.minimum))&&(this.minimum=o-x/2,this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),(this.maximum===null||isNaN(this.maximum))&&(this.maximum=c+x/2,this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum))):(this.intervalType=this.valueType="number",this.minimum===null&&(this.minimum=this.type==="axisX"?o-x/2:Math.floor(o/this.interval)*this.interval,this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),this.maximum===null&&(this.maximum=this.type==="axisX"?c+x/2:Math.ceil(c/this.interval)*this.interval,this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum)),this.maximum===0&&this.minimum===0&&(this.options.minimum===0?this.maximum+=10:this.options.maximum===0&&(this.minimum-=10)))),m(this.sessionVariables.newViewportMinimum)&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),m(this.sessionVariables.newViewportMaximum)&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.range=this.viewportMaximum-this.viewportMinimum,this.intervalStartPosition=this.type==="axisX"&&d?this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval):Math.floor((this.viewportMinimum+.2*this.interval)/this.interval)*this.interval,this.valueFormatString||(this.valueFormatString=ke.generateValueFormatString(this.range,2))}},ke.prototype.calculateLogarithmicAxisParameters=function(){var h=this.chart.layoutManager.getFreeSpace(),r=Math.log(this.logarithmBase),d;this._position==="bottom"||this._position==="top"?(this.maxWidth=h.width,this.maxHeight=h.height):(this.maxWidth=h.height,this.maxHeight=h.width);var h=this.type==="axisX"?500>this.maxWidth?7:Math.max(7,Math.floor(this.maxWidth/100)):Math.max(Math.floor(this.maxWidth/50),3),o,c,x,y;if(y=1,(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks){for(y=0;y<this.scaleBreaks._appliedBreaks.length;y++)if((!m(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[y].startValue||!m(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[y].startValue||!m(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[y].startValue)&&(!m(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[y].endValue||!m(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[y].endValue||!m(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[y].endValue)){this.scaleBreaks._appliedBreaks.splice(y,1);break}}this.type==="axisX"?(o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,c=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,c/o===1&&(y=Math.pow(this.logarithmBase,typeof this.options.interval>"u"?.4:this.options.interval),c*=y,o/=y),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:c/o>this.logarithmBase?c/o*Math.pow(this.logarithmBase,.5):this.logarithmBase):this.type==="axisY"&&(o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,c=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,0>=o&&!isFinite(c)?(c=typeof this.options.interval>"u"?0:this.options.interval,o=1):0>=o?o=c:isFinite(c)||(c=o),o===1&&c===1?(c*=this.logarithmBase-1/this.logarithmBase,o=1):c/o===1?(y=Math.min(c*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),c*=y,o/=y):o>c?(y=Math.min(o/c*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),1<=c?o=c/y:c=o*y):(y=Math.min(c/o*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),c!==1&&(c*=y),o!==1&&(o/=y)),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:c/o>this.logarithmBase?c/o*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&1<o&&(o=1),this.includeZero&&(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&1>c&&(c=1)),y=(isNaN(this.viewportMaximum)||this.viewportMaximum===null?c:this.viewportMaximum)/(isNaN(this.viewportMinimum)||this.viewportMinimum===null?o:this.viewportMinimum);var S=(isNaN(this.viewportMaximum)||this.viewportMaximum===null?c:this.viewportMaximum)-(isNaN(this.viewportMinimum)||this.viewportMinimum===null?o:this.viewportMinimum);if(this.intervalType="number",y=Math.pow(this.logarithmBase,ke.getNiceNumber(Math.abs(Math.log(y)/r),!1)),this.options&&0<this.options.interval?this.interval=this.options.interval:(this.interval=ke.getNiceExponent(Math.log(y)/r/(h-1),!0),d=ke.getNiceNumber(S/(h-1),!0)),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.type==="axisX"?o/Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(o)/r/this.interval))),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.type==="axisX"?c*Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(c)/r/this.interval))),this.viewportMaximum===1&&this.viewportMinimum===1&&(this.options.viewportMinimum===1?this.viewportMaximum*=this.logarithmBase-1/this.logarithmBase:this.options.viewportMaximum===1&&(this.viewportMinimum/=this.logarithmBase-1/this.logarithmBase),this.options&&typeof this.options.interval>"u"&&(this.interval=ke.getNiceExponent(Math.ceil(Math.log(y)/r)/(h-1)),d=ke.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(h-1),!0))),(this.minimum===null||this.maximum===null)&&(this.type==="axisX"?(o=this.minimum!==null?this.minimum:this.dataInfo.min,c=this.maximum!==null?this.maximum:this.dataInfo.max,c/o===1&&(y=Math.pow(this.logarithmBase,typeof this.options.interval>"u"?.4:this.options.interval),c*=y,o/=y),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:c/o>this.logarithmBase?c/o*Math.pow(this.logarithmBase,.5):this.logarithmBase):this.type==="axisY"&&(o=this.minimum!==null?this.minimum:this.dataInfo.min,c=this.maximum!==null?this.maximum:this.dataInfo.max,isFinite(o)||isFinite(c)?o===1&&c===1?(c*=this.logarithmBase,o/=this.logarithmBase):c/o===1?(y=Math.pow(this.logarithmBase,this.interval),c*=y,o/=y):o>c?(y=Math.min(.01*(o/c),5),1<=c?o=c/y:c=o*y):(y=Math.min(c/o*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),c!==1&&(c*=y),o!==1&&(o/=y)):(c=typeof this.options.interval>"u"?0:this.options.interval,o=1),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:c/o>this.logarithmBase?c/o*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(this.minimum===null||isNaN(this.minimum))&&1<o&&(o=1),this.includeZero&&(this.maximum===null||isNaN(this.maximum))&&1>c&&(c=1)),this.intervalType="number",this.minimum===null&&(this.minimum=this.type==="axisX"?o/Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(o)/r/this.interval)),m(this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?typeof this.sessionVariables.newViewportMinimum>"u"?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum)||(this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?typeof this.sessionVariables.newViewportMinimum>"u"?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum))),this.maximum===null&&(this.maximum=this.type==="axisX"?c*Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(c)/r/this.interval)),m(this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?typeof this.sessionVariables.newViewportMaximum>"u"?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum)||(this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?typeof this.sessionVariables.newViewportMaximum>"u"?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum))),this.maximum===1&&this.minimum===1&&(this.options.minimum===1?this.maximum*=this.logarithmBase-1/this.logarithmBase:this.options.maximum===1&&(this.minimum/=this.logarithmBase-1/this.logarithmBase))),this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum),this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum),this.viewportMinimum>this.viewportMaximum&&(!this.options.viewportMinimum&&!this.options.minimum||this.options.viewportMaximum||this.options.maximum?this.options.viewportMinimum||this.options.minimum||!this.options.viewportMaximum&&!this.options.maximum||(this.viewportMinimum=this.minimum=(this.options.viewportMaximum||this.options.maximum)/Math.pow(this.logarithmBase,2*Math.ceil(this.interval))):this.viewportMaximum=this.maximum=this.options.viewportMinimum||this.options.minimum),o=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(r*this.interval)+.2)*this.interval),this.range=this.viewportMaximum/this.viewportMinimum,this.noTicks=h,!this.options.interval&&this.range<Math.pow(this.logarithmBase,8>this.viewportMaximum||3>h?2:3)){for(r=Math.floor(this.viewportMinimum/d+.5)*d;r<this.viewportMinimum;)r+=d;this.equidistantInterval=!1,this.intervalStartPosition=r,this.interval=d}else this.options.interval||(d=Math.ceil(this.interval),this.range>this.interval&&(this.interval=d,o=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(r*this.interval)+.2)*this.interval))),this.equidistantInterval=!0,this.intervalStartPosition=o;if(!this.valueFormatString&&(this.valueFormatString="#,##0.##",1>this.viewportMinimum)&&(r=Math.floor(Math.abs(Math.log(this.viewportMinimum)/Math.LN10))+2,(isNaN(r)||!isFinite(r))&&(r=2),2<r))for(y=0;y<r-2;y++)this.valueFormatString+="#"},ke.generateValueFormatString=function(r,d){var h="#,##0.",o=d;1>r&&(o+=Math.floor(Math.abs(Math.log(r)/Math.LN10)),isNaN(o)||!isFinite(o))&&(o=d);for(var c=0;c<o;c++)h+="#";return h},ke.getNiceExponent=function(r,d){var h=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,h),o=0>h?1>=o?1:5>=o?5:10:Math.max(Math.floor(o),1);return-20>h?Number(o*Math.pow(10,h)):Number((o*Math.pow(10,h)).toFixed(20))},ke.getNiceNumber=function(r,d){var h=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,h),o=d?1.5>o?1:3>o?2:7>o?5:10:1>=o?1:2>=o?2:5>=o?5:10;return-20>h?Number(o*Math.pow(10,h)):Number((o*Math.pow(10,h)).toFixed(20))},ke.prototype.getLabelStartPoint=function(){var r=lt[this.intervalType+"Duration"]*this.interval,r=new Date(Math.floor(this.viewportMinimum/r)*r);return this.intervalType!=="millisecond"&&(this.intervalType==="second"?0<r.getMilliseconds()&&(r.setSeconds(r.getSeconds()+1),r.setMilliseconds(0)):this.intervalType==="minute"?(0<r.getSeconds()||0<r.getMilliseconds())&&(r.setMinutes(r.getMinutes()+1),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="hour"?(0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setHours(r.getHours()+1),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="day"?(0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setDate(r.getDate()+1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="week"?(0<r.getDay()||0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setDate(r.getDate()+(7-r.getDay())),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="month"?(1<r.getDate()||0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setMonth(r.getMonth()+1),r.setDate(1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="year"&&(0<r.getMonth()||1<r.getDate()||0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setFullYear(r.getFullYear()+1),r.setMonth(0),r.setDate(1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0))),r},e(ut,re),e(Tt,re),Tt.prototype.createUserOptions=function(r){if(typeof r<"u"||this.options._isPlaceholder){var d=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(k(this.parent[this.optionsName]),d=this.parent.options[this.optionsName].indexOf(this.options)),this.options=typeof r>"u"?{}:r,this.parent.options[this.optionsName][d]=this.options}},Tt.prototype.render=function(r){if(this.spacing!==0||this.options.lineThickness!==0&&(typeof this.options.lineThickness<"u"||this.parent.lineThickness!==0)){var d=this.ctx,h=this.ctx.globalAlpha;this.ctx=r||this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip();var o=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.startValue),c=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.endValue);this.ctx.strokeStyle=this.lineColor,this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.globalAlpha=1,f(this.id);var x,y,S,M,_,v;r=Math.max(this.spacing,3);var b=Math.max(0,this.lineThickness);if(this.ctx.lineWidth=b,this.ctx.setLineDash&&this.ctx.setLineDash(P(this.lineDashType,b)),this.scaleBreaks.parent._position==="bottom"||this.scaleBreaks.parent._position==="top"){if(o=b%2===1?(o.x<<0)+.5:o.x<<0,y=b%2===1?(c.x<<0)+.5:c.x<<0,this.scaleBreaks.parent._position==="top"?(c=this.chart.plotArea.y1,S=this.chart.plotArea.y2+b/2+.5<<0):(c=this.chart.plotArea.y2,S=this.chart.plotArea.y1-b/2+.5<<0,r*=-1),this.bounds={x1:o-b/2,y1:c,x2:y+b/2,y2:S},this.ctx.moveTo(o,c),this.type==="straight"||this.scaleBreaks.parent._position==="top"&&0>=r||this.scaleBreaks.parent._position==="bottom"&&0<=r)this.ctx.lineTo(o,S),this.ctx.lineTo(y,S),this.ctx.lineTo(y,c);else if(this.type==="wavy"){M=o,_=c,x=.5,v=(S-_)/r/3;for(var C=0;C<v;C++)this.ctx.bezierCurveTo(M+x*r,_+r,M+x*r,_+2*r,M,_+3*r),_+=3*r,x*=-1;for(this.ctx.bezierCurveTo(M+x*r,_+r,M+x*r,_+2*r,M,_+3*r),M=y,x*=-1,this.ctx.lineTo(M,_),C=0;C<v;C++)this.ctx.bezierCurveTo(M+x*r,_-r,M+x*r,_-2*r,M,_-3*r),_-=3*r,x*=-1}else if(this.type==="zigzag"){for(x=-1,_=c+r,M=o+r,v=(S-_)/r/2,C=0;C<v;C++)this.ctx.lineTo(M,_),M+=2*x*r,_+=2*r,x*=-1;for(this.ctx.lineTo(M,_),M+=y-o,C=0;C<v+1;C++)this.ctx.lineTo(M,_),M+=2*x*r,_-=2*r,x*=-1;this.ctx.lineTo(M+x*r,_+r)}}else if(this.scaleBreaks.parent._position==="left"||this.scaleBreaks.parent._position==="right"){if(c=b%2===1?(c.y<<0)+.5:c.y<<0,S=b%2===1?(o.y<<0)+.5:o.y<<0,this.scaleBreaks.parent._position==="left"?(o=this.chart.plotArea.x1,y=this.chart.plotArea.x2+b/2+.5<<0):(o=this.chart.plotArea.x2,y=this.chart.plotArea.x1-b/2+.5<<0,r*=-1),this.bounds={x1:o,y1:c-b/2,x2:y,y2:S+b/2},this.ctx.moveTo(o,c),this.type==="straight"||this.scaleBreaks.parent._position==="left"&&0>=r||this.scaleBreaks.parent._position==="right"&&0<=r)this.ctx.lineTo(y,c),this.ctx.lineTo(y,S),this.ctx.lineTo(o,S);else if(this.type==="wavy"){for(M=o,_=c,x=.5,v=(y-M)/r/3,C=0;C<v;C++)this.ctx.bezierCurveTo(M+r,_+x*r,M+2*r,_+x*r,M+3*r,_),M+=3*r,x*=-1;for(this.ctx.bezierCurveTo(M+r,_+x*r,M+2*r,_+x*r,M+3*r,_),_=S,x*=-1,this.ctx.lineTo(M,_),C=0;C<v;C++)this.ctx.bezierCurveTo(M-r,_+x*r,M-2*r,_+x*r,M-3*r,_),M-=3*r,x*=-1}else if(this.type==="zigzag"){for(x=1,_=c-r,M=o+r,v=(y-M)/r/2,C=0;C<v;C++)this.ctx.lineTo(M,_),_+=2*x*r,M+=2*r,x*=-1;for(this.ctx.lineTo(M,_),_+=S-c,C=0;C<v+1;C++)this.ctx.lineTo(M,_),_+=2*x*r,M-=2*r,x*=-1;this.ctx.lineTo(M+r,_+x*r)}}0<b&&this.ctx.stroke(),this.ctx.closePath(),this.ctx.globalAlpha=this.fillOpacity,this.ctx.globalCompositeOperation="destination-over",this.ctx.fill(),this.ctx.restore(),this.ctx.globalAlpha=h,this.ctx=d}},e(at,re),at.prototype.createUserOptions=function(r){if(typeof r<"u"||this.options._isPlaceholder){var d=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(k(this.parent.stripLines),d=this.parent.options.stripLines.indexOf(this.options)),this.options=typeof r>"u"?{}:r,this.parent.options.stripLines[d]=this.options}},at.prototype.render=function(){this.ctx.save();var r=this.parent.getPixelCoordinatesOnAxis(this.value),d=Math.abs(this._thicknessType==="pixel"?this.thickness:Math.abs(this.parent.convertValueToPixel(this.endValue)-this.parent.convertValueToPixel(this.startValue)));if(0<d){var h=this.opacity===null?1:this.opacity;this.ctx.strokeStyle=this.color,this.ctx.beginPath();var o=this.ctx.globalAlpha;this.ctx.globalAlpha=h,f(this.id);var c,x,y,S;this.ctx.lineWidth=d,this.ctx.setLineDash&&this.ctx.setLineDash(P(this.lineDashType,d)),this.parent._position==="bottom"||this.parent._position==="top"?(c=x=this.ctx.lineWidth%2===1?(r.x<<0)+.5:r.x<<0,y=this.chart.plotArea.y1,S=this.chart.plotArea.y2,this.bounds={x1:c-d/2,y1:y,x2:x+d/2,y2:S}):(this.parent._position==="left"||this.parent._position==="right")&&(y=S=this.ctx.lineWidth%2===1?(r.y<<0)+.5:r.y<<0,c=this.chart.plotArea.x1,x=this.chart.plotArea.x2,this.bounds={x1:c,y1:y-d/2,x2:x,y2:S+d/2}),this.ctx.moveTo(c,y),this.ctx.lineTo(x,S),this.ctx.stroke(),this.ctx.globalAlpha=o}this.ctx.restore()},e(_i,re),_i.prototype.showAt=function(r){if(!this.enabled)return!1;var d=this.chart,h=!1;if(d.resetOverlayedCanvas(),d.clearedOverlayedCanvas=this.parent.type,this.chart.renderCrosshairs(this.parent),d.plotInfo.axisPlacement==="xySwapped"){if(this.parent._position==="bottom")for(var o=0;o<d.axisY.length;o++)this.parent===d.axisY[o]&&(d.axisY[o]._crosshairValue=r>=d.axisY[o].viewportMinimum&&r<=d.axisY[o].viewportMaximum?r:null);else if(this.parent._position==="top")for(o=0;o<d.axisY2.length;o++)this.parent===d.axisY2[o]&&(d.axisY2[o]._crosshairValue=r>=d.axisY2[o].viewportMinimum&&r<=d.axisY2[o].viewportMaximum?r:null);else if(this.parent._position==="left")for(o=0;o<d.axisX.length;o++)this.parent===d.axisX[o]&&(d.axisX[o]._crosshairValue=r>=d.axisX[o].viewportMinimum&&r<=d.axisX[o].viewportMaximum?r:null);else if(this.parent._position==="right")for(o=0;o<d.axisX2.length;o++)this.parent===d.axisX2[o]&&(d.axisX2[o]._crosshairValue=r>=d.axisX2[o].viewportMinimum&&r<=d.axisX2[o].viewportMaximum?r:null)}else if(this.parent._position==="bottom")for(o=0;o<d.axisX.length;o++)this.parent===d.axisX[o]&&(d.axisX[o]._crosshairValue=r>=d.axisX[o].viewportMinimum&&r<=d.axisX[o].viewportMaximum?r:null);else if(this.parent._position==="top")for(o=0;o<d.axisX2.length;o++)this.parent===d.axisX2[o]&&(d.axisX2[o]._crosshairValue=r>=d.axisX2[o].viewportMinimum&&r<=d.axisX2[o].viewportMaximum?r:null);else if(this.parent._position==="left")for(o=0;o<d.axisY.length;o++)this.parent===d.axisY[o]&&(d.axisY[o]._crosshairValue=r>=d.axisY[o].viewportMinimum&&r<=d.axisY[o].viewportMaximum?r:null);else if(this.parent._position==="right")for(o=0;o<d.axisY2.length;o++)this.parent===d.axisY2[o]&&(d.axisY2[o]._crosshairValue=r>=d.axisY2[o].viewportMinimum&&r<=d.axisY2[o].viewportMaximum?r:null);for(o=0;o<d.axisX.length;o++)r=d.axisX[o]._crosshairValue,d.axisX[o].crosshair&&d.axisX[o].crosshair.enabled&&(!m(r)&&r>=d.axisX[o].viewportMinimum&&r<=d.axisX[o].viewportMaximum?(d.axisX[o].showCrosshair(r),d.axisX[o].sessionVariables.crosshairValue=d.axisX[o].crosshair._updatedValue=r,this===d.axisX[o].crosshair&&(h=!0)):r!==void 0&&(d.axisX[o].sessionVariables.crosshairValue=d.axisX[o].crosshair._updatedValue=null));for(o=0;o<d.axisX2.length;o++)r=d.axisX2[o]._crosshairValue,d.axisX2[o].crosshair&&d.axisX2[o].crosshair.enabled&&(!m(r)&&r>=d.axisX2[o].viewportMinimum&&r<=d.axisX2[o].viewportMaximum?(d.axisX2[o].showCrosshair(r),d.axisX2[o].sessionVariables.crosshairValue=d.axisX2[o].crosshair._updatedValue=r,this===d.axisX2[o].crosshair&&(h=!0)):r!==void 0&&(d.axisX2[o].sessionVariables.crosshairValue=d.axisX2[o].crosshair._updatedValue=null));for(o=0;o<d.axisY.length;o++)r=d.axisY[o]._crosshairValue,d.axisY[o].crosshair&&d.axisY[o].crosshair.enabled&&(!m(r)&&r>=d.axisY[o].viewportMinimum&&r<=d.axisY[o].viewportMaximum?(d.axisY[o].showCrosshair(r),d.axisY[o].sessionVariables.crosshairValue=d.axisY[o].crosshair._updatedValue=r,this===d.axisY[o].crosshair&&(h=!0)):r!==void 0&&(d.axisY[o].sessionVariables.crosshairValue=d.axisY[o].crosshair._updatedValue=null));for(o=0;o<d.axisY2.length;o++)r=d.axisY2[o]._crosshairValue,d.axisY2[o].crosshair&&d.axisY2[o].crosshair.enabled&&(!m(r)&&r>=d.axisY2[o].viewportMinimum&&r<=d.axisY2[o].viewportMaximum?(d.axisY2[o].showCrosshair(r),d.axisY2[o].sessionVariables.crosshairValue=d.axisY2[o].crosshair._updatedValue=r,this===d.axisY2[o].crosshair&&(h=!0)):r!==void 0&&(d.axisY2[o].sessionVariables.crosshairValue=d.axisY2[o].crosshair._updatedValue=null));return this.chart.toolTip&&this.chart.toolTip._entries&&this.chart.toolTip.highlightObjects(this.chart.toolTip._entries),d.sessionVariables.crosshairShownByPixel=!1,h},_i.prototype.hide=function(){this.chart.resetOverlayedCanvas(),this.chart.renderCrosshairs(this.parent),this._hidden=!0},_i.prototype.render=function(r,d,h){var o,c,x,y,S=null,M=null,_=null,v="";this.valueFormatString||(this.parent.valueType==="dateTime"?this.valueFormatString=this.parent.valueFormatString:(_=0,_=this.chart.plotInfo.axisPlacement==="xySwapped"?50<this.parent.range?0:500<this.chart.width&&25>this.parent.range?2:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0):50<this.parent.range?0:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0),this.valueFormatString=ke.generateValueFormatString(this.parent.range,_)));var b=this.opacity===null?1:this.opacity,C=Math.abs(this._thicknessType==="pixel"?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness),u=this.chart.overlaidCanvasCtx,I=u.globalAlpha;if(u.beginPath(),u.strokeStyle=this.color,u.lineWidth=C,u.save(),this.labelFontSize=Math.abs(m(this.options.labelFontSize)?this.parent.labelFontSize:this.labelFontSize),this.labelMaxWidth=m(this.options.labelMaxWidth)?.3*this.chart.width:this.labelMaxWidth,this.labelMaxHeight=m(this.options.labelWrap)||this.labelWrap?.3*this.chart.height:2*this.labelFontSize,0<C&&u.setLineDash&&u.setLineDash(P(this.lineDashType,C)),_=new de(u,{x:0,y:0,padding:{top:2,right:3,bottom:2,left:4},backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxWidth:this.labelMaxWidth,maxHeight:this.labelMaxHeight,angle:this.labelAngle,text:v,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this.snapToDataPoint){var R=0,v=[];if(this.chart.plotInfo.axisPlacement==="xySwapped"){var z=null;this.parent._position==="bottom"||this.parent._position==="top"?R=this.parent.dataSeries[0].axisX.convertPixelToValue({y:d}):(this.parent._position==="left"||this.parent._position==="right")&&(R=this.parent.convertPixelToValue({y:d}));for(var A=0;A<this.parent.dataSeries.length;A++)(z=this.parent.dataSeries[A].getDataPointAtX(R,!0))&&0<=z.index&&(z.dataSeries=this.parent.dataSeries[A],z.dataPoint.y!==null&&z.dataSeries.visible&&v.push(z));if(z=null,v.length===0)return;v.sort(function(Q,ve){return Q.distance-ve.distance});var Y=z=0;yPercent=cumulativeY=0;for(var R=1/0,V,A=0;A<v.length;A++){if(v[A].dataSeries.type==="rangeBar"||v[A].dataSeries.type==="error"){if(v[A].dataPoint.y)for(var q=0;q<v[A].dataPoint.y.length;q++)Y=Math.abs(r-this.parent.convertValueToPixel(v[A].dataPoint.y[q])),Y<=R&&(R=Y,z=A)}else v[A].dataSeries.type==="stackedBar"?(cumulativeY=v[A].dataSeries.dataPointEOs[v[A].index].cumulativeY,Y=Math.abs(r-this.parent.convertValueToPixel(cumulativeY)),Y<=R&&(R=Y,z=A)):v[A].dataSeries.type==="stackedBar100"?(Y=v[0].dataPoint.x.getTime?v[0].dataPoint.x.getTime():v[0].dataPoint.x,m(V)&&(V=Math.abs(r-this.parent.convertValueToPixel(100*(v[0].dataSeries.dataPointEOs[v[0].index].cumulativeY/v[0].dataSeries.plotUnit.dataPointYSums[Y])))),cumulativeY=v[A].dataSeries.dataPointEOs[v[A].index].cumulativeY,Y=v[A].dataPoint.x.getTime?v[A].dataPoint.x.getTime():v[A].dataPoint.x,yPercent=100*(cumulativeY/v[A].dataSeries.plotUnit.dataPointYSums[Y]),Y=Math.abs(r-this.parent.convertValueToPixel(yPercent)),Y<=V&&(V=Y,z=A)):(Y=Math.abs(r-this.parent.convertValueToPixel(v[A].dataPoint.y)),Y<=R&&(R=Y,z=A));m(V)||(R=Math.min(R,V))}if(V=v[z],A=0,this.parent._position==="bottom"||this.parent._position==="top"){if(V.dataSeries.type==="rangeBar"||V.dataSeries.type==="error"){for(R=Math.abs(r-this.parent.convertValueToPixel(V.dataPoint.y[0])),v=0;v<V.dataPoint.y.length;v++)Y=Math.abs(r-this.parent.convertValueToPixel(V.dataPoint.y[v])),Y<R&&(R=Y,A=v);S=u.lineWidth%2===1?(this.parent.convertValueToPixel(V.dataPoint.y[A])<<0)+.5:this.parent.convertValueToPixel(V.dataPoint.y[A])<<0,this.value=V.dataPoint.y[A],_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:V.dataPoint.y[A]}):m(this.options.label)?Nt(m(h)?V.dataPoint.y[A]:h,this.valueFormatString,this.chart._cultureInfo):this.label}else V.dataSeries.type==="stackedBar"?(R=Math.abs(r-this.parent.convertValueToPixel(v[0].dataPoint.y)),cumulativeY=V.dataSeries.dataPointEOs[V.index].cumulativeY,S=u.lineWidth%2===1?(this.parent.convertValueToPixel(cumulativeY)<<0)+.5:this.parent.convertValueToPixel(cumulativeY)<<0,this.value=cumulativeY,_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:cumulativeY}):m(this.options.label)?Nt(m(h)?cumulativeY:h,this.valueFormatString,this.chart._cultureInfo):this.label):V.dataSeries.type==="stackedBar100"?(R=Math.abs(r-this.parent.convertValueToPixel(v[0].dataPoint.y)),cumulativeY=V.dataSeries.dataPointEOs[V.index].cumulativeY,Y=V.dataPoint.x.getTime?V.dataPoint.x.getTime():V.dataPoint.x,yPercent=100*(cumulativeY/V.dataSeries.plotUnit.dataPointYSums[Y]),S=u.lineWidth%2===1?(this.parent.convertValueToPixel(yPercent)<<0)+.5:this.parent.convertValueToPixel(yPercent)<<0,this.value=yPercent,_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:yPercent}):m(this.options.label)?Nt(m(h)?yPercent:h,this.valueFormatString,this.chart._cultureInfo):this.label):(S=u.lineWidth%2===1?(this.parent.convertValueToPixel(V.dataPoint.y)<<0)+.5:this.parent.convertValueToPixel(V.dataPoint.y)<<0,this.value=V.dataPoint.y,_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:V.dataPoint.y}):m(this.options.label)?Nt(m(h)?V.dataPoint.y:h,this.valueFormatString,this.chart._cultureInfo):this.label);o=c=S,x=this.chart.plotArea.y1,y=this.chart.plotArea.y2,this.bounds={x1:o-C/2,y1:x,x2:c+C/2,y2:y},_.x=o-_.measureText().width/2,_.x+_.width>this.chart.bounds.x2?_.x=this.chart.bounds.x2-_.width:_.x<this.chart.bounds.x1&&(_.x=this.chart.bounds.x1),_.y=this.parent.lineCoordinates.y2+(this.parent._position==="top"?-_.height+this.parent.tickLength:_.fontSize/2)+2,_.y+_.height>this.chart.bounds.y2?_.y=this.chart.bounds.y2-_.height:_.y<this.chart.bounds.y1&&(_.y=this.chart.bounds.y1)}else if(this.parent._position==="left"||this.parent._position==="right"){if(x=y=M=u.lineWidth%2===1?(this.parent.convertValueToPixel(V.dataPoint.x)<<0)+.5:this.parent.convertValueToPixel(V.dataPoint.x)<<0,o=this.chart.plotArea.x1,c=this.chart.plotArea.x2,this.bounds={x1:o,y1:x-C/2,x2:c,y2:y+C/2},A=!1,this.parent.labels)for(R=Math.ceil(this.parent.interval),v=0;v<this.parent.viewportMaximum;v+=R)if(this.parent.labels[v])A=!0;else{A=!1;break}if(A){if(this.parent.type==="axisX")for(R=this.parent.convertPixelToValue({y:d}),z=null,A=0;A<this.parent.dataSeries.length;A++)(z=this.parent.dataSeries[A].getDataPointAtX(R,!0))&&0<=z.index&&(_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:V.dataPoint.x}):m(this.options.label)?z.dataPoint.label:this.label)}else _.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:V.dataPoint.x}):m(this.options.label)?Nt(V.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:V.dataPoint.x}):m(this.options.label)?Ki(V.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label;this.value=V.dataPoint.x,_.y=y+_.fontSize/2-_.measureText().height/2+2,_.y-_.fontSize/2<this.chart.bounds.y1?_.y=this.chart.bounds.y1+_.fontSize/2+2:_.y+_.measureText().height-_.fontSize/2>this.chart.bounds.y2&&(_.y=this.chart.bounds.y2-_.measureText().height+_.fontSize/2),this.parent._position==="left"?_.x=this.parent.lineCoordinates.x2-_.measureText().width:this.parent._position==="right"&&(_.x=this.parent.lineCoordinates.x2)}}else if(this.parent._position==="bottom"||this.parent._position==="top"){for(R=this.parent.convertPixelToValue({x:r}),A=0;A<this.parent.dataSeries.length;A++)(z=this.parent.dataSeries[A].getDataPointAtX(R,!0))&&0<=z.index&&(z.dataSeries=this.parent.dataSeries[A],z.dataPoint.y!==null&&z.dataSeries.visible&&v.push(z));if(v.length===0)return;if(v.sort(function(Q,ve){return Q.distance-ve.distance}),V=v[0],o=c=S=u.lineWidth%2===1?(this.parent.convertValueToPixel(V.dataPoint.x)<<0)+.5:this.parent.convertValueToPixel(V.dataPoint.x)<<0,x=this.chart.plotArea.y1,y=this.chart.plotArea.y2,this.bounds={x1:o-C/2,y1:x,x2:c+C/2,y2:y},A=!1,this.parent.labels)for(R=Math.ceil(this.parent.interval),v=0;v<this.parent.viewportMaximum;v+=R)if(this.parent.labels[v])A=!0;else{A=!1;break}if(A){if(this.parent.type==="axisX")for(R=this.parent.convertPixelToValue({x:r}),z=null,A=0;A<this.parent.dataSeries.length;A++)(z=this.parent.dataSeries[A].getDataPointAtX(R,!0))&&0<=z.index&&(_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:V.dataPoint.x}):m(this.options.label)?z.dataPoint.label:this.label)}else _.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:V.dataPoint.x}):m(this.options.label)?Nt(V.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:V.dataPoint.x}):m(this.options.label)?Ki(V.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label;this.value=V.dataPoint.x,_.x=o-_.measureText().width/2,_.x+_.width>this.chart.bounds.x2&&(_.x=this.chart.bounds.x2-_.width),_.x<this.chart.bounds.x1&&(_.x=this.chart.bounds.x1),this.parent._position==="bottom"?_.y=this.parent.lineCoordinates.y2+_.fontSize/2+2:this.parent._position==="top"&&(_.y=this.parent.lineCoordinates.y1-_.height+_.fontSize/2+2)}else if(this.parent._position==="left"||this.parent._position==="right"){for(!m(this.parent.dataSeries)&&0<this.parent.dataSeries.length&&(R=this.parent.dataSeries[0].axisX.convertPixelToValue({x:r})),A=0;A<this.parent.dataSeries.length;A++)(z=this.parent.dataSeries[A].getDataPointAtX(R,!0))&&0<=z.index&&(z.dataSeries=this.parent.dataSeries[A],z.dataPoint.y!==null&&z.dataSeries.visible&&v.push(z));if(v.length===0)return;for(v.sort(function(Q,ve){return Q.distance-ve.distance}),Y=z=0,R=1/0,A=0;A<v.length;A++){if(v[A].dataSeries.type==="rangeColumn"||v[A].dataSeries.type==="rangeArea"||v[A].dataSeries.type==="error"||v[A].dataSeries.type==="rangeSplineArea"||v[A].dataSeries.type==="candlestick"||v[A].dataSeries.type==="ohlc"||v[A].dataSeries.type==="boxAndWhisker"){if(v[A].dataPoint.y)for(q=0;q<v[A].dataPoint.y.length;q++)Y=Math.abs(d-this.parent.convertValueToPixel(v[A].dataPoint.y[q])),Y<=R&&(R=Y,z=A)}else v[A].dataSeries.type==="stackedColumn"?(o=v[A].dataSeries.dataPointEOs[v[A].index].cumulativeY,Y=Math.abs(d-this.parent.convertValueToPixel(o)),Y<=R&&(R=Y,z=A)):v[A].dataSeries.type==="stackedArea"?(o=v[A].dataSeries.dataPointEOs[v[A].index].cumulativeY,Y=Math.abs(d-this.parent.convertValueToPixel(o)),Y<=R&&(R=Y,z=A)):v[A].dataSeries.type==="stackedColumn100"||v[A].dataSeries.type==="stackedArea100"?(Y=v[0].dataPoint.x.getTime?v[0].dataPoint.x.getTime():v[0].dataPoint.x,m(V)&&(V=Math.abs(d-this.parent.convertValueToPixel(100*(v[0].dataSeries.dataPointEOs[v[0].index].cumulativeY/v[0].dataSeries.plotUnit.dataPointYSums[Y])))),v[A].dataSeries.type==="stackedColumn100"?(M=v[A].dataSeries.dataPointEOs[v[A].index].cumulativeY,Y=v[A].dataPoint.x.getTime?v[A].dataPoint.x.getTime():v[A].dataPoint.x,o=100*(M/v[A].dataSeries.plotUnit.dataPointYSums[Y]),Y=Math.abs(d-this.parent.convertValueToPixel(o)),Y<=V&&(V=Y,z=A)):v[A].dataSeries.type==="stackedArea100"&&(M=v[A].dataSeries.dataPointEOs[v[A].index].cumulativeY,Y=v[A].dataPoint.x.getTime?v[A].dataPoint.x.getTime():v[A].dataPoint.x,o=100*(M/v[A].dataSeries.plotUnit.dataPointYSums[Y]),Y=Math.abs(d-this.parent.convertValueToPixel(o)),Y<=V&&(V=Y,z=A))):v[A].dataSeries.type==="waterfall"?(Y=Math.abs(d-this.parent.convertValueToPixel(v[A].dataSeries.dataPointEOs[v[A].index].cumulativeSum)),Y<=R&&(V=R=Y,z=A)):(Y=Math.abs(d-this.parent.convertValueToPixel(v[A].dataPoint.y)),Y<=R&&(R=Y,z=A));m(V)||(R=Math.min(R,V))}if(V=v[z],A=0,V.dataSeries.type==="rangeColumn"||V.dataSeries.type==="rangeArea"||V.dataSeries.type==="error"||V.dataSeries.type==="rangeSplineArea"||V.dataSeries.type==="candlestick"||V.dataSeries.type==="ohlc"||V.dataSeries.type==="boxAndWhisker"){for(R=Math.abs(d-this.parent.convertValueToPixel(V.dataPoint.y[0])),v=0;v<V.dataPoint.y.length;v++)Y=Math.abs(d-this.parent.convertValueToPixel(V.dataPoint.y[v])),Y<R&&(R=Y,A=v);M=u.lineWidth%2===1?(this.parent.convertValueToPixel(V.dataPoint.y[A])<<0)+.5:this.parent.convertValueToPixel(V.dataPoint.y[A])<<0,_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:V.dataPoint.y[A]}):m(this.options.label)?Nt(m(h)?V.dataPoint.y[A]:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=V.dataPoint.y[A]}else V.dataSeries.type==="stackedColumn"?(o=V.dataSeries.dataPointEOs[V.index].cumulativeY,M=u.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):m(this.options.label)?Nt(m(h)?o:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):V.dataSeries.type==="stackedArea"?(o=V.dataSeries.dataPointEOs[V.index].cumulativeY,M=u.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):m(this.options.label)?Nt(m(h)?o:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):V.dataSeries.type==="stackedColumn100"?(M=V.dataSeries.dataPointEOs[V.index].cumulativeY,Y=V.dataPoint.x.getTime?V.dataPoint.x.getTime():V.dataPoint.x,o=100*(M/V.dataSeries.plotUnit.dataPointYSums[Y]),M=u.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):m(this.options.label)?Nt(m(h)?o:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):V.dataSeries.type==="stackedArea100"?(M=V.dataSeries.dataPointEOs[V.index].cumulativeY,Y=V.dataPoint.x.getTime?V.dataPoint.x.getTime():V.dataPoint.x,o=100*(M/V.dataSeries.plotUnit.dataPointYSums[Y]),M=u.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):m(this.options.label)?Nt(m(h)?o:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):V.dataSeries.type==="waterfall"?(M=u.lineWidth%2===1?(this.parent.convertValueToPixel(V.dataSeries.dataPointEOs[V.index].cumulativeSum)<<0)+.5:this.parent.convertValueToPixel(V.dataSeries.dataPointEOs[V.index].cumulativeSum)<<0,_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:V.dataSeries.dataPointEOs[V.index].cumulativeSum}):m(this.options.label)?Nt(m(h)?V.dataSeries.dataPointEOs[V.index].cumulativeSum:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=V.dataSeries.dataPointEOs[V.index].cumulativeSum):(M=u.lineWidth%2===1?(m(r)?d:this.parent.convertValueToPixel(V.dataPoint.y)<<0)+.5:m(r)?d:this.parent.convertValueToPixel(V.dataPoint.y)<<0,_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?V.dataPoint.y:h}):m(this.options.label)?Nt(m(h)?V.dataPoint.y:h,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=V.dataPoint.y);x=y=M,o=this.chart.plotArea.x1,c=this.chart.plotArea.x2,this.bounds={x1:o,y1:x-C/2,x2:c,y2:y+C/2},_.y=y+_.fontSize/2-_.measureText().height/2+2,_.y-_.fontSize/2<this.chart.bounds.y1?_.y=this.chart.bounds.y1+_.fontSize/2+2:_.y+_.measureText().height-_.fontSize/2>this.chart.bounds.y2&&(_.y=this.chart.bounds.y2-_.measureText().height+_.fontSize/2),this.parent._position==="left"?_.x=this.parent.lineCoordinates.x2-_.measureText().width:this.parent._position==="right"&&(_.x=this.parent.lineCoordinates.x2)}v=null,u.globalAlpha=b,(this.parent._position==="bottom"||this.parent._position==="top")&&(this.parent._position==="top"&&_.y-_.fontSize/2<this.chart.bounds.y1&&(_.y=this.chart.bounds.y1+_.fontSize/2),this.parent._position==="bottom"&&this.parent.lineCoordinates.y2-_.fontSize/2+_.measureText().height>this.chart.bounds.y2&&(_.y=this.chart.bounds.y2-_.height+_.fontSize/2+2),this.value>=Math.min(this.parent.viewportMinimum,this.parent.viewportMaximum)&&this.value<=Math.max(this.parent.viewportMinimum,this.parent.viewportMaximum)&&0<C&&(u.moveTo(o,x),u.lineTo(c,y),u.stroke(),this._hidden=!1)),(this.parent._position==="left"||this.parent._position==="right")&&(this.parent._position==="left"&&_.x<this.chart.bounds.x1&&(_.x=this.chart.bounds.x1),this.parent._position==="right"&&_.x+_.measureText().width>this.chart.bounds.x2&&(_.x=this.chart.bounds.x2-_.measureText().width),this.value>=Math.min(this.parent.viewportMinimum,this.parent.viewportMaximum)&&this.value<=Math.max(this.parent.viewportMinimum,this.parent.viewportMaximum)&&0<C&&(u.moveTo(o,x),u.lineTo(c,y),u.stroke(),this._hidden=!1))}else{if(this.parent._position==="bottom"||this.parent._position==="top"?(o=c=S=u.lineWidth%2===1?(r<<0)+.5:r<<0,x=this.chart.plotArea.y1,y=this.chart.plotArea.y2,this.bounds={x1:o-C/2,y1:x,x2:c+C/2,y2:y}):(this.parent._position==="left"||this.parent._position==="right")&&(x=y=M=u.lineWidth%2===1?(d<<0)+.5:d<<0,o=this.chart.plotArea.x1,c=this.chart.plotArea.x2,this.bounds={x1:o,y1:x-C/2,x2:c,y2:y+C/2}),this.chart.plotInfo.axisPlacement==="xySwapped")if(this.parent._position==="left"||this.parent._position==="right"){if(A=!1,this.parent.labels)for(R=Math.ceil(this.parent.interval),v=0;v<this.parent.viewportMaximum;v+=R)if(this.parent.labels[v])A=!0;else{A=!1;break}if(A){if(this.parent.type==="axisX")for(R=this.parent.convertPixelToValue({y:d}),z=null,A=0;A<this.parent.dataSeries.length;A++)(z=this.parent.dataSeries[A].getDataPointAtX(R,!0))&&0<=z.index&&(_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(r):h}):m(this.options.label)?z.dataPoint.label:this.label)}else _.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(d):h}):m(this.options.label)?Nt(m(h)?this.parent.convertPixelToValue(d):h,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(d):h}):m(this.options.label)?Ki(m(h)?this.parent.convertPixelToValue(d):h,this.valueFormatString,this.chart._cultureInfo):this.label;_.y=d+_.fontSize/2-_.measureText().height/2+2,_.y-_.fontSize/2<this.chart.bounds.y1?_.y=this.chart.bounds.y1+_.fontSize/2+2:_.y+_.measureText().height-_.fontSize/2>this.chart.bounds.y2&&(_.y=this.chart.bounds.y2-_.measureText().height+_.fontSize/2),this.parent._position==="left"?_.x=this.parent.lineCoordinates.x1-_.measureText().width:this.parent._position==="right"&&(_.x=this.parent.lineCoordinates.x2)}else(this.parent._position==="bottom"||this.parent._position==="top")&&(_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(r):h}):m(this.options.label)?Nt(m(h)?this.parent.convertPixelToValue(r):h,this.valueFormatString,this.chart._cultureInfo):this.label,_.x=o-_.measureText().width/2,_.x+_.width>this.chart.bounds.x2&&(_.x=this.chart.bounds.x2-_.width),_.x<this.chart.bounds.x1&&(_.x=this.chart.bounds.x1),this.parent._position==="bottom"?_.y=this.parent.lineCoordinates.y2+_.fontSize/2+2:this.parent._position==="top"&&(_.y=this.parent.lineCoordinates.y1-_.height+_.fontSize/2+2));else if(this.parent._position==="bottom"||this.parent._position==="top"){if(A=!1,v="",this.parent.labels)for(R=Math.ceil(this.parent.interval),v=0;v<this.parent.viewportMaximum;v+=R)if(this.parent.labels[v])A=!0;else{A=!1;break}if(A){if(this.parent.type==="axisX")for(R=this.parent.convertPixelToValue({x:r}),z=null,A=0;A<this.parent.dataSeries.length;A++)(z=this.parent.dataSeries[A].getDataPointAtX(R,!0))&&0<=z.index&&(_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(r):h}):m(this.options.label)?m(h)?z.dataPoint.label:h:this.label)}else _.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?0<this.parent.dataSeries.length?this.parent.convertPixelToValue(r):"":h}):m(this.options.label)?Nt(m(h)?this.parent.convertPixelToValue(r):h,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(r):h}):m(this.options.label)?Ki(m(h)?this.parent.convertPixelToValue(r):h,this.valueFormatString,this.chart._cultureInfo):this.label;_.x=o-_.measureText().width/2,_.x+_.width>this.chart.bounds.x2&&(_.x=this.chart.bounds.x2-_.width),_.x<this.chart.bounds.x1&&(_.x=this.chart.bounds.x1),this.parent._position==="bottom"?_.y=this.parent.lineCoordinates.y2+_.fontSize/2+2:this.parent._position==="top"&&(_.y=this.parent.lineCoordinates.y1-_.height+_.fontSize/2+2)}else(this.parent._position==="left"||this.parent._position==="right")&&(_.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:m(h)?this.parent.convertPixelToValue(d):h}):m(this.options.label)?Nt(m(h)?this.parent.convertPixelToValue(d):h,this.valueFormatString,this.chart._cultureInfo):this.label,_.y=d+_.fontSize/2-_.measureText().height/2+2,_.y-_.fontSize/2<this.chart.bounds.y1?_.y=this.chart.bounds.y1+_.fontSize/2+2:_.y+_.measureText().height-_.fontSize/2>this.chart.bounds.y2&&(_.y=this.chart.bounds.y2-_.measureText().height+_.fontSize/2),this.parent._position==="left"?_.x=this.parent.lineCoordinates.x2-_.measureText().width:this.parent._position==="right"&&(_.x=this.parent.lineCoordinates.x2));this.parent._position==="left"&&_.x<this.chart.bounds.x1?_.x=this.chart.bounds.x1:this.parent._position==="right"&&_.x+_.measureText().width>this.chart.bounds.x2?_.x=this.chart.bounds.x2-_.measureText().width:this.parent._position==="top"&&_.y-_.fontSize/2<this.chart.bounds.y1?_.y=this.chart.bounds.y1+_.fontSize/2:this.parent._position==="bottom"&&this.parent.lineCoordinates.y2-_.fontSize/2+_.measureText().height>this.chart.bounds.y2&&(_.y=this.chart.bounds.y2-_.height+_.fontSize/2+2),u.globalAlpha=b,0<C&&(u.moveTo(o,x),u.lineTo(c,y),u.stroke(),this._hidden=!1),this.value=this.parent._position==="bottom"||this.parent._position==="top"?this.parent.convertPixelToValue(r):this.parent.convertPixelToValue(d)}(this.parent._position==="bottom"||this.parent._position==="top")&&(this.parent.sessionVariables.crosshairValue=this._updatedValue=this.parent.convertPixelToValue(S)),(this.parent._position==="left"||this.parent._position==="right")&&(this.parent.sessionVariables.crosshairValue=this._updatedValue=this.parent.convertPixelToValue(M)),this._textBlock=_,this._label=h,m(h)||this.renderLabel(),u.restore(),u.globalAlpha=I},_i.prototype.renderLabel=function(){this.value>=Math.min(this.parent.viewportMinimum,this.parent.viewportMaximum)&&this.value<=Math.max(this.parent.viewportMinimum,this.parent.viewportMaximum)&&(m(this._textBlock)||m(this._textBlock.text)||!(typeof this._textBlock.text.valueOf()=="number"||0<this._textBlock.text.length)||this._hidden||this._textBlock.render(!0),m(this._label)&&this.dispatchEvent("updated",{chart:this.chart,crosshair:this.options,axis:this.parent,value:this.value},this.parent))},e(Ut,re),Ut.prototype._updateOptions=function(){this.updateOption("enabled"),this.updateOption("shared"),this.updateOption("animationEnabled"),this.updateOption("content"),this.updateOption("contentFormatter"),this.updateOption("reversed"),this.updateOption("backgroundColor"),this.updateOption("borderColor"),this.updateOption("borderThickness"),this.updateOption("cornerRadius"),this.updateOption("fontSize"),this.updateOption("fontColor"),this.updateOption("fontFamily"),this.updateOption("fontWeight"),this.updateOption("fontStyle")},Ut.prototype._initialize=function(){if(this.updateOption("updated"),this.updateOption("hidden"),this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.pointerEvents="none",this.container.style.display="none";var r=document.createElement("div");r.style.width="auto",r.style.height="auto",r.style.minWidth="50px",r.style.lineHeight="normal",r.style.margin="0px 0px 0px 0px",r.style.padding="5px",r.style.fontFamily="Calibri, Arial, Georgia, serif",r.style.fontWeight="normal",r.style.fontStyle=X?"italic":"normal",r.style.fontSize="14px",r.style.color="#000000",r.style.textShadow="1px 1px 1px rgba(0, 0, 0, 0.1)",r.style.textAlign="left",r.style.border="2px solid gray",r.style.background=X?"rgba(255,255,255,.9)":"rgb(255,255,255)",r.style.textIndent="0px",r.style.whiteSpace="nowrap",r.style.borderRadius="5px",r.style.MozUserSelect="none",r.style.WebkitUserSelect="none",r.style.msUserSelect="none",r.style.userSelect="none",X||(r.style.filter="alpha(opacity = 90)",r.style.filter="progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666')"),r.innerText="Sample Tooltip",this.container.appendChild(r),this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},Ut.prototype.mouseMoveHandler=function(r,d){this._lastUpdated&&4>new Date().getTime()-this._lastUpdated||(this._lastUpdated=new Date().getTime(),this.chart.resetOverlayedCanvas(),this._updateToolTip(r,d),this.enabled&&this._updatedEventParameters&&!isNaN(this._prevX)&&!isNaN(this._prevY)&&this.container&&this.container.style&&this.dispatchEvent(this.container.style.display==="none"?"hidden":"updated",this._updatedEventParameters,this))},Ut.prototype._updateToolTip=function(r,d,h){if(h=typeof h>"u"?!0:h,this._updateOptions(),this.container||this._initialize(),this.enabled||this.hide(),!this.chart.disableToolTip){if(typeof r>"u"||typeof d>"u"){if(isNaN(this._prevX)||isNaN(this._prevY))return;r=this._prevX,d=this._prevY}else this._prevX=r,this._prevY=d;var o=null,c=null,x=[],y=0;if(this.shared&&this.enabled&&this.chart.plotInfo.axisPlacement!=="none"){var S=[];if(this.chart.axisX)for(var M=0;M<this.chart.axisX.length;M++){for(var y=this.chart.plotInfo.axisPlacement==="xySwapped"?this.chart.axisX[M].convertPixelToValue({y:d}):this.chart.axisX[M].convertPixelToValue({x:r}),_=null,o=0;o<this.chart.axisX[M].dataSeries.length;o++)(_=this.chart.axisX[M].dataSeries[o].getDataPointAtX(y,h))&&0<=_.index&&(_.dataSeries=this.chart.axisX[M].dataSeries[o],_.dataPoint.y!==null&&_.dataSeries.visible&&S.push(_));_=null}if(this.chart.axisX2)for(M=0;M<this.chart.axisX2.length;M++){for(y=this.chart.plotInfo.axisPlacement==="xySwapped"?this.chart.axisX2[M].convertPixelToValue({y:d}):this.chart.axisX2[M].convertPixelToValue({x:r}),_=null,o=0;o<this.chart.axisX2[M].dataSeries.length;o++)(_=this.chart.axisX2[M].dataSeries[o].getDataPointAtX(y,h))&&0<=_.index&&(_.dataSeries=this.chart.axisX2[M].dataSeries[o],_.dataPoint.y!==null&&_.dataSeries.visible&&S.push(_));_=null}if(S.length===0)return;for(S.sort(function(v,b){return v.dataSeries.axisX.logarithmic||b.dataSeries.axisX.logarithmic?v.distance-b.distance:v.distance/v.dataSeries.axisX.range-b.distance/b.dataSeries.axisX.range}),h=S[0],o=0;o<S.length;o++)S[o].dataPoint.x.valueOf()===h.dataPoint.x.valueOf()&&x.push(S[o]);S=null}else{if(o=this.chart.getDataPointAtXY(r,d,h))this.currentDataPointIndex=o.dataPointIndex,this.currentSeriesIndex=o.dataSeries.index;else if(X)if(o=N(r,d,this.chart._eventManager.ghostCtx),0<o&&typeof this.chart._eventManager.objectMap[o]<"u"){if(o=this.chart._eventManager.objectMap[o],o.objectType==="legendItem")return;this.currentSeriesIndex=o.dataSeriesIndex,this.currentDataPointIndex=0<=o.dataPointIndex?o.dataPointIndex:-1}else this.currentDataPointIndex=-1;else this.currentDataPointIndex=-1;if(0<=this.currentSeriesIndex){if(c=this.chart.data[this.currentSeriesIndex],_={},0<=this.currentDataPointIndex)o=c.dataPoints[this.currentDataPointIndex],_.dataSeries=c,_.dataPoint=o,_.index=this.currentDataPointIndex,_.distance=Math.abs(o.x-y),c.type==="waterfall"&&(_.cumulativeSumYStartValue=c.dataPointEOs[this.currentDataPointIndex].cumulativeSumYStartValue,_.cumulativeSum=c.dataPointEOs[this.currentDataPointIndex].cumulativeSum);else if(this.enabled&&c&&(c.type==="line"||c.type==="stepLine"||c.type==="spline"||c.type==="area"||c.type==="stepArea"||c.type==="splineArea"||c.type==="stackedArea"||c.type==="stackedArea100"||c.type==="rangeArea"||c.type==="rangeSplineArea"||c.type==="candlestick"||c.type==="ohlc"||c.type==="boxAndWhisker"))y=c.axisX.convertPixelToValue({x:r}),_=c.getDataPointAtX(y,h),m(_)||(_.dataSeries=c,this.currentDataPointIndex=_.index,o=_.dataPoint);else{this.chart.clearedOverlayedCanvas==="toolTip"&&(this.chart.resetOverlayedCanvas(),this.chart.clearedOverlayedCanvas=null,this.container&&(this.container.style.display="none"));return}if(!m(_)&&!m(_.dataPoint)&&!m(_.dataPoint.y))if(_.dataSeries.axisY)if(0<_.dataPoint.y.length){for(o=h=0;o<_.dataPoint.y.length;o++)_.dataPoint.y[o]<_.dataSeries.axisY.viewportMinimum?h--:_.dataPoint.y[o]>_.dataSeries.axisY.viewportMaximum&&h++;h<_.dataPoint.y.length&&h>-_.dataPoint.y.length&&x.push(_)}else c.type==="column"||c.type==="bar"?0>_.dataPoint.y?0>_.dataSeries.axisY.viewportMinimum&&_.dataSeries.axisY.viewportMaximum>=_.dataPoint.y&&x.push(_):_.dataSeries.axisY.viewportMinimum<=_.dataPoint.y&&0<=_.dataSeries.axisY.viewportMaximum&&x.push(_):c.type==="bubble"?(h=this.chart._eventManager.objectMap[c.dataPointIds[_.index]].size/2,_.dataPoint.y>=_.dataSeries.axisY.viewportMinimum-h&&_.dataPoint.y<=_.dataSeries.axisY.viewportMaximum+h&&x.push(_)):c.type==="waterfall"?(h=0,_.cumulativeSumYStartValue<_.dataSeries.axisY.viewportMinimum?h--:_.cumulativeSumYStartValue>_.dataSeries.axisY.viewportMaximum&&h++,_.cumulativeSum<_.dataSeries.axisY.viewportMinimum?h--:_.cumulativeSum>_.dataSeries.axisY.viewportMaximum&&h++,2>h&&-2<h&&x.push(_)):(0<=_.dataSeries.type.indexOf("100")||c.type==="stackedColumn"||c.type==="stackedBar"||c.type==="stackedArea"||_.dataPoint.y>=_.dataSeries.axisY.viewportMinimum&&_.dataPoint.y<=_.dataSeries.axisY.viewportMaximum)&&x.push(_);else x.push(_)}}if(0<x.length){if(this.highlightObjects(x),this.enabled){if(h="",h=this.getToolTipInnerHTML({entries:x}),h!==null){if(this.contentDiv.innerHTML=h,this.isToolTipDefinedInData&&m(this.options.content)&&m(this.options.contentFormatter))for(y=this.contentDiv.getElementsByTagName("span"),o=0;o<y.length;o++)y[o]&&(y[o].style.color=y[o].getAttribute("data-color"));y=!1,this.container.style.display==="none"&&(y=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:X?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.borderColor=x[0].dataSeries.type==="waterfall"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:0<x[0].dataPoint.y?x[0].dataSeries.risingColor:x[0].dataSeries.fallingColor:x[0].dataSeries.type==="error"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[c.index%x[0].dataSeries._colorSet.length]:this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[x[0].index%x[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||this.borderThickness===0?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||this.cornerRadius===0?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||this.fontSize===0?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:X?"italic":"normal"}catch{}x[0].dataSeries.type==="pie"||x[0].dataSeries.type==="doughnut"||x[0].dataSeries.type==="funnel"||x[0].dataSeries.type==="pyramid"||x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?r=r-10-this.container.clientWidth:(r=x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x)-this.container.clientWidth<<0,r-=10),0>r&&(r=Math.max(0,r+this.container.clientWidth+20)),r+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(r=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),d=x.length!==1||this.shared||x[0].dataSeries.type!=="line"&&x[0].dataSeries.type!=="stepLine"&&x[0].dataSeries.type!=="spline"&&x[0].dataSeries.type!=="area"&&x[0].dataSeries.type!=="stepArea"&&x[0].dataSeries.type!=="splineArea"?x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x):d:x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y),d=-d+10,0<d+this.container.clientHeight+5&&(d-=d+this.container.clientHeight+5-0),this.fixMozTransitionDelay(r,d),!this.animationEnabled||y?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.positionLeft=r,this.positionBottom=d,this.container.style.left=r+"px",this.container.style.bottom=d+"px"}else this.hide(!1),this.enabled&&this.dispatchEvent("hidden",{chart:this.chart,toolTip:this},this);for(d=[],o=0;o<x.length;o++)d.push({xValue:x[o].dataPoint.x,dataPoint:x[o].dataPoint,dataSeries:x[o].dataSeries,dataPointIndex:x[o].index,dataSeriesIndex:x[o].dataSeries._index});this._updatedEventParameters={chart:this.chart,toolTip:this.options,content:h,entries:d},this._entries=x}}else this.hide(),this.enabled&&this.dispatchEvent("hidden",{chart:this.chart,toolTip:this},this);this._dataSeriesIndex=this._xValue=null}},Ut.prototype.highlightObjects=function(r){var d=this.chart.overlaidCanvasCtx;m(this.chart.clearedOverlayedCanvas)||this.chart.clearedOverlayedCanvas==="toolTip"?(this.chart.resetOverlayedCanvas(),d.clearRect(0,0,this.chart.width,this.chart.height),this.chart.clearedOverlayedCanvas="toolTip"):this.chart.clearedOverlayedCanvas=null,d.save();var h=this.chart.plotArea,o=0;for(d.beginPath(),d.rect(h.x1,h.y1,h.x2-h.x1,h.y2-h.y1),d.clip(),h=0;h<r.length;h++){var c=r[h];if((c=this.chart._eventManager.objectMap[c.dataSeries.dataPointIds[c.index]])&&c.objectType&&c.objectType==="dataPoint"){var o=this.chart.data[c.dataSeriesIndex],x=o.dataPoints[c.dataPointIndex],y=c.dataPointIndex;x.highlightEnabled===!1||o.highlightEnabled!==!0&&x.highlightEnabled!==!0||(o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="scatter"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="stackedArea"||o.type==="stackedArea100"||o.type==="rangeArea"||o.type==="rangeSplineArea"?(x=o.getMarkerProperties(y,c.x1,c.y1,this.chart.overlaidCanvasCtx),x.size=Math.max(1.5*x.size<<0,10),x.borderColor=x.borderColor||"#FFFFFF",x.borderThickness=x.borderThickness||Math.ceil(.1*x.size),Ve.drawMarkers([x]),typeof c.y2<"u"&&(x=o.getMarkerProperties(y,c.x1,c.y2,this.chart.overlaidCanvasCtx),x.size=Math.max(1.5*x.size<<0,10),x.borderColor=x.borderColor||"#FFFFFF",x.borderThickness=x.borderThickness||Math.ceil(.1*x.size),Ve.drawMarkers([x]))):o.type==="bubble"?(x=o.getMarkerProperties(y,c.x1,c.y1,this.chart.overlaidCanvasCtx),x.size=c.size,x.color="white",x.borderColor="white",d.globalAlpha=.3,Ve.drawMarkers([x]),d.globalAlpha=1):o.type==="column"||o.type==="stackedColumn"||o.type==="stackedColumn100"||o.type==="bar"||o.type==="rangeBar"||o.type==="stackedBar"||o.type==="stackedBar100"||o.type==="rangeColumn"||o.type==="waterfall"?kt(d,c.x1,c.y1,c.x2,c.y2,"white",0,null,!1,!1,!1,!1,.3):o.type==="pie"||o.type==="doughnut"?pe(d,c.center,c.radius,"white",o.type,c.startAngle,c.endAngle,.3,c.percentInnerRadius):o.type==="funnel"||o.type==="pyramid"?ge(d,c.funnelSection,.3,"white"):o.type==="candlestick"?(d.globalAlpha=1,d.strokeStyle=c.color,d.lineWidth=2*c.borderThickness,o=d.lineWidth%2===0?0:.5,d.beginPath(),d.moveTo(c.x3-o,Math.min(c.y2,c.y3)),d.lineTo(c.x3-o,Math.min(c.y1,c.y4)),d.stroke(),d.beginPath(),d.moveTo(c.x3-o,Math.max(c.y1,c.y4)),d.lineTo(c.x3-o,Math.max(c.y2,c.y3)),d.stroke(),kt(d,c.x1,Math.min(c.y1,c.y4),c.x2,Math.max(c.y1,c.y4),"transparent",2*c.borderThickness,c.color,!1,!1),d.globalAlpha=1):o.type==="ohlc"?(d.globalAlpha=1,d.strokeStyle=c.color,d.lineWidth=2*c.borderThickness,o=d.lineWidth%2===0?0:.5,d.beginPath(),d.moveTo(c.x3-o,c.y2),d.lineTo(c.x3-o,c.y3),d.stroke(),d.beginPath(),d.moveTo(c.x3,c.y1),d.lineTo(c.x1,c.y1),d.stroke(),d.beginPath(),d.moveTo(c.x3,c.y4),d.lineTo(c.x2,c.y4),d.stroke(),d.globalAlpha=1):o.type==="boxAndWhisker"?(d.save(),d.globalAlpha=1,d.strokeStyle=c.stemColor,d.lineWidth=2*c.stemThickness,0<c.stemThickness&&(d.beginPath(),d.moveTo(c.x3,c.y2+c.borderThickness/2),d.lineTo(c.x3,c.y1+c.whiskerThickness/2),d.stroke(),d.beginPath(),d.moveTo(c.x3,c.y4-c.whiskerThickness/2),d.lineTo(c.x3,c.y3-c.borderThickness/2),d.stroke()),d.beginPath(),kt(d,c.x1,Math.max(c.y2,c.y3),c.x2,Math.min(c.y2,c.y3),"transparent",2*c.borderThickness,c.color,!1,!1),d.globalAlpha=1,d.strokeStyle=c.whiskerColor,d.lineWidth=2*c.whiskerThickness,0<c.whiskerThickness&&(d.beginPath(),d.moveTo(Math.floor(c.x3-c.whiskerLength/2),c.y4),d.lineTo(Math.ceil(c.x3+c.whiskerLength/2),c.y4),d.stroke(),d.beginPath(),d.moveTo(Math.floor(c.x3-c.whiskerLength/2),c.y1),d.lineTo(Math.ceil(c.x3+c.whiskerLength/2),c.y1),d.stroke()),d.globalAlpha=1,d.strokeStyle=c.lineColor,d.lineWidth=2*c.lineThickness,0<c.lineThickness&&(d.beginPath(),d.moveTo(c.x1,c.y5),d.lineTo(c.x2,c.y5),d.stroke()),d.restore(),d.globalAlpha=1):o.type==="error"&&Ce(d,c.x1,c.y1,c.x2,c.y2,"white",c.whiskerProperties,c.stemProperties,c.isXYSwapped,.3))}}d.restore(),d.globalAlpha=1,d.beginPath()},Ut.prototype.getToolTipInnerHTML=function(r){r=r.entries;var d=null,h=null,o=null,c=0,x="";this.isToolTipDefinedInData=!0;for(var y=0;y<r.length;y++)if(r[y].dataSeries.toolTipContent||r[y].dataPoint.toolTipContent){this.isToolTipDefinedInData=!1;break}if(this.isToolTipDefinedInData&&(this.content&&typeof this.content=="function"||this.contentFormatter))r={chart:this.chart,toolTip:this.options,entries:r},d=this.contentFormatter?this.contentFormatter(r):this.content(r);else if(this.shared&&this.chart.plotInfo.axisPlacement!=="none"){for(var S=null,M="",y=0;y<r.length;y++){if(h=r[y].dataSeries,o=r[y].dataPoint,c=r[y].index,x="",y===0&&this.isToolTipDefinedInData&&!this.content){if(this.chart.axisX&&0<this.chart.axisX.length?M+=typeof this.chart.axisX[0].labels[o.x]<"u"?this.chart.axisX[0].labels[o.x]:"{x}":this.chart.axisX2&&0<this.chart.axisX2.length&&(M+=typeof this.chart.axisX2[0].labels[o.x]<"u"?this.chart.axisX2[0].labels[o.x]:"{x}"),M+="</br>",!h.visible)continue;M=this.chart.replaceKeywordsWithValue(M,o,h,c)}o.toolTipContent===null||typeof o.toolTipContent>"u"&&h.options.toolTipContent===null||(h.type==="line"||h.type==="stepLine"||h.type==="spline"||h.type==="area"||h.type==="stepArea"||h.type==="splineArea"||h.type==="column"||h.type==="bar"||h.type==="scatter"||h.type==="stackedColumn"||h.type==="stackedColumn100"||h.type==="stackedBar"||h.type==="stackedBar100"||h.type==="stackedArea"||h.type==="stackedArea100"||h.type==="waterfall"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=S!=h.axisXIndex?h.axisX.title?h.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span>&nbsp;&nbsp;{y}`,S=h.axisXIndex):h.type==="bubble"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=S!=h.axisXIndex?h.axisX.title?h.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}`):h.type==="rangeColumn"||h.type==="rangeBar"||h.type==="rangeArea"||h.type==="rangeSplineArea"||h.type==="error"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=S!=h.axisXIndex?h.axisX.title?h.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}`):h.type==="candlestick"||h.type==="ohlc"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=S!=h.axisXIndex?h.axisX.title?h.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}`):h.type==="boxAndWhisker"&&(this.chart.axisX&&1<this.chart.axisX.length&&(x+=S!=h.axisXIndex?h.axisX.title?h.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span><br/>Minimum: &nbsp;{y[0]}<br/>Q1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}`),d===null&&(d=""),h.visible&&(this.reversed===!0?(d=this.chart.replaceKeywordsWithValue(x,o,h,c)+d,y<r.length-1&&(d="</br>"+d)):(d+=this.chart.replaceKeywordsWithValue(x,o,h,c),y<r.length-1&&(d+="</br>"))))}d!==null&&(d=M+d)}else{if(h=r[0].dataSeries,o=r[0].dataPoint,c=r[0].index,o.toolTipContent===null||typeof o.toolTipContent>"u"&&h.options.toolTipContent===null)return null;h.type==="line"||h.type==="stepLine"||h.type==="spline"||h.type==="area"||h.type==="stepArea"||h.type==="splineArea"||h.type==="column"||h.type==="bar"||h.type==="scatter"||h.type==="stackedColumn"||h.type==="stackedColumn100"||h.type==="stackedBar"||h.type==="stackedBar100"||h.type==="stackedArea"||h.type==="stackedArea100"||h.type==="waterfall"?x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}":h.type==="bubble"?x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":h.type==="pie"||h.type==="doughnut"||h.type==="funnel"||h.type==="pyramid"?x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.name?"{name}:</span>&nbsp;&nbsp;":o.label?"{label}:</span>&nbsp;&nbsp;":"</span>")+"{y}":h.type==="rangeColumn"||h.type==="rangeBar"||h.type==="rangeArea"||h.type==="rangeSplineArea"||h.type==="error"?x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}":h.type==="candlestick"||h.type==="ohlc"?x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+"</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}":h.type==="boxAndWhisker"&&(x=o.toolTipContent?o.toolTipContent:h.toolTipContent?h.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+"</span><br/>Minimum: &nbsp;{y[0]}<br/>Q1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),d===null&&(d=""),d+=this.chart.replaceKeywordsWithValue(x,o,h,c)}return d},Ut.prototype.enableAnimation=function(){if(!this.container.style.WebkitTransition){var r=this.getContainerTransition(this.containerTransitionDuration);this.container.style.WebkitTransition=r,this.container.style.MsTransition=r,this.container.style.transition=r,this.container.style.MozTransition=this.mozContainerTransition}},Ut.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},Ut.prototype.hide=function(r){this.container&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._entries=this._dataSeriesIndex=this._xValue=null,this._prevY=this._prevX=NaN,this._updatedEventParameters=null,(typeof r>"u"||r)&&this.chart.resetOverlayedCanvas())},Ut.prototype.show=function(r,d,h){this._updateToolTip(r,d,typeof h>"u"?!1:h)},Ut.prototype.showAtIndex=function(r,d){},Ut.prototype.showAtX=function(r,d){if(!this.enabled)return!1;this.chart.clearedOverlayedCanvas=null,this._updateOptions();var h,o,c,x=[];if(c=!1,d=!m(d)&&0<=d&&d<this.chart.data.length?d:0,this.shared)for(var y=0;y<this.chart.data.length;y++)h=this.chart.data[y],(o=h.getDataPointAtX(r,!1))&&o.dataPoint&&!m(o.dataPoint.y)&&h.visible&&(o.dataSeries=h,this.chart.data[d].axisX.convertValueToPixel(r)===h.axisX.convertValueToPixel(o.dataPoint.x)&&x.push(o));else h=this.chart.data[d],(o=h.getDataPointAtX(r,!1))&&o.dataPoint&&!m(o.dataPoint.y)&&h.visible&&(o.dataSeries=h,x.push(o));if(0<x.length){for(y=0;y<x.length;y++)if(o=x[y],(this.shared||0<=o.dataSeries.type.indexOf("100"))&&o.dataSeries.axisX&&o.dataPoint.x>=o.dataSeries.axisX.viewportMinimum&&o.dataPoint.x<=o.dataSeries.axisX.viewportMaximum){c=!1;break}else if(o.dataSeries.axisX&&o.dataSeries.axisY&&(o.dataPoint.x<o.dataSeries.axisX.viewportMinimum||o.dataPoint.x>o.dataSeries.axisX.viewportMaximum||o.dataPoint.y<o.dataSeries.axisY.viewportMinimum||o.dataPoint.y>o.dataSeries.axisY.viewportMaximum))c=!0;else{c=!1;break}if(c)return this.hide(),!1;if(this.highlightObjects(x),this._entries=x,y="",y=this.getToolTipInnerHTML({entries:x}),y!==null){if(this.contentDiv.innerHTML=y,this.isToolTipDefinedInData&&m(this.options.content)&&m(this.options.contentFormatter))for(o=this.contentDiv.getElementsByTagName("span"),y=0;y<o.length;y++)o[y]&&(o[y].style.color=o[y].getAttribute("data-color"));y=!1,this.container.style.display==="none"&&(y=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:X?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.borderColor=x[0].dataSeries.type==="waterfall"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:0<x[0].dataPoint.y?x[0].dataSeries.risingColor:x[0].dataSeries.fallingColor:x[0].dataSeries.type==="error"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[h.index%x[0].dataSeries._colorSet.length]:this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[x[0].index%x[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||this.borderThickness===0?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||this.cornerRadius===0?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||this.fontSize===0?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:X?"italic":"normal"}catch{}x[0].dataSeries.type==="pie"||x[0].dataSeries.type==="doughnut"?h=x[0].dataSeries.dataPointEOs[x[0].index].center.x+x[0].dataSeries.radius*Math.cos(x[0].dataSeries.dataPointEOs[x[0].index].midAngle)+-(x[0].dataSeries.dataPointEOs[x[0].index].hemisphere==="left"?0:this.container.clientWidth):x[0].dataSeries.type==="funnel"||x[0].dataSeries.type==="pyramid"?(o=x[0].dataSeries.dataPointEOs[x[0].index].sectionsofFunnel,h=(o.x1+o.x2-this.container.clientWidth)/2):(h=x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y.length?x[0].dataPoint.y[x[0].dataPoint.y.length-1]:x[0].dataPoint.y)-this.container.clientWidth<<0:x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x)-this.container.clientWidth<<0,h-=10),0>h&&(h+=this.container.clientWidth+20),h+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(h=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),x.length!==1||this.shared||x[0].dataSeries.type!=="line"&&x[0].dataSeries.type!=="stepLine"&&x[0].dataSeries.type!=="spline"&&x[0].dataSeries.type!=="area"&&x[0].dataSeries.type!=="stepArea"&&x[0].dataSeries.type!=="splineArea"?x[0].dataSeries.type==="pie"||x[0].dataSeries.type==="doughnut"?(o=x[0].dataSeries.dataPointEOs[x[0].index].center.y+x[0].dataSeries.radius*Math.sin(x[0].dataSeries.dataPointEOs[x[0].index].midAngle),o<x[0].dataSeries.dataPointEOs[x[0].index].center.y&&(o+=this.container.clientHeight)):x[0].dataSeries.type==="funnel"||x[0].dataSeries.type==="pyramid"?(o=x[0].dataSeries.dataPointEOs[x[0].dataSeries.reversed?x[0].dataSeries.dataPointEOs.length-1-x[0].index:x[0].index].sectionsofFunnel,o=typeof o.x5<"u"?(o.y2+o.y4)/2:(o.y2+o.y3)/2+this.container.clientHeight/2):o=x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x):x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y.length?x[0].dataPoint.y[x[0].dataPoint.y.length-1]:x[0].dataPoint.y):o=x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y),o=-o+10,0<o+this.container.clientHeight+5&&(o-=o+this.container.clientHeight+5-0),this.fixMozTransitionDelay(h,o),!this.animationEnabled||y?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.container.style.left=h+"px",this.container.style.bottom=o+"px"}else return this.hide(!1),!1}else return this.hide(),!1;return this._xValue=r,this._dataSeriesIndex=d,this._prevY=this._prevX=NaN,!0},Ut.prototype.fixMozTransitionDelay=function(r,d){if(20<this.chart._eventManager.lastObjectId)this.mozContainerTransition=this.getContainerTransition(0);else{var h=parseFloat(this.container.style.left),h=isNaN(h)?0:h,o=parseFloat(this.container.style.bottom),o=isNaN(o)?0:o;10<Math.sqrt(Math.pow(h-r,2)+Math.pow(o-d,2))?this.mozContainerTransition=this.getContainerTransition(.1):this.mozContainerTransition=this.getContainerTransition(0)}},Ut.prototype.getContainerTransition=function(r){return"left "+r+"s ease-out 0s, bottom "+r+"s ease-out 0s"},li.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],X&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},li.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},li.prototype.mouseEventHandler=function(r){if(r.type==="mousemove"||r.type==="click"){var d=[],h=$i(r),o=null;if((o=this.chart.getObjectAtXY(h.x,h.y,!1))&&typeof this.objectMap[o]<"u")if(o=this.objectMap[o],o.objectType==="dataPoint"){var c=this.chart.data[o.dataSeriesIndex],x=c.dataPoints[o.dataPointIndex],y=o.dataPointIndex;o.eventParameter={x:h.x,y:h.y,dataPoint:x,dataSeries:c.options,dataPointIndex:y,dataSeriesIndex:c.index,chart:this.chart},o.eventContext={context:x,userContext:x,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},d.push(o),o=this.objectMap[c.id],o.eventParameter={x:h.x,y:h.y,dataPoint:x,dataSeries:c.options,dataPointIndex:y,dataSeriesIndex:c.index,chart:this.chart},o.eventContext={context:c,userContext:c.options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},d.push(this.objectMap[c.id])}else o.objectType==="legendItem"&&(c=this.chart.data[o.dataSeriesIndex],x=o.dataPointIndex!==null?c.dataPoints[o.dataPointIndex]:null,o.eventParameter={x:h.x,y:h.y,dataSeries:c.options,dataPoint:x,dataPointIndex:o.dataPointIndex,dataSeriesIndex:o.dataSeriesIndex,chart:this.chart},o.eventContext={context:this.chart.legend,userContext:this.chart.legend.options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},d.push(o));for(c=[],h=0;h<this.mouseoveredObjectMaps.length;h++){for(x=!0,o=0;o<d.length;o++)if(d[o].id===this.mouseoveredObjectMaps[h].id){x=!1;break}x?this.fireEvent(this.mouseoveredObjectMaps[h],"mouseout",r):c.push(this.mouseoveredObjectMaps[h])}for(this.mouseoveredObjectMaps=c,h=0;h<d.length;h++){for(c=!1,o=0;o<this.mouseoveredObjectMaps.length;o++)if(d[h].id===this.mouseoveredObjectMaps[o].id){c=!0;break}c||(this.fireEvent(d[h],"mouseover",r),this.mouseoveredObjectMaps.push(d[h])),r.type==="click"?this.fireEvent(d[h],"click",r):r.type==="mousemove"&&this.fireEvent(d[h],"mousemove",r)}}},li.prototype.fireEvent=function(r,d,h){if(r&&d){var o=r.eventParameter,c=r.eventContext,x=r.eventContext.userContext;x&&c&&x[c[d]]&&x[c[d]].call(x,o),d!=="mouseout"?x.cursor&&x.cursor!==h.target.style.cursor&&(h.target.style.cursor=x.cursor):(h.target.style.cursor=this.chart.panEnabled?c.mouseout!=="itemmouseout"||x.dockInsidePlotArea?"move":this.chart._defaultCursor:this.chart._defaultCursor,delete r.eventParameter,delete r.eventContext),d==="click"&&r.objectType==="dataPoint"&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[r.dataSeriesIndex],o),d==="click"&&r.objectType==="dataPoint"&&this.chart.funnelPyramidClickHandler&&this.chart.funnelPyramidClickHandler.call(this.chart.data[r.dataSeriesIndex],o)}},se.prototype.animate=function(r,d,h,o,c){var x=this;for(this.chart.isAnimating=!0,c=c||xe.easing.linear,h&&this.animations.push({startTime:new Date().getTime()+(r||0),duration:d,animationCallback:h,onComplete:o}),r=[];0<this.animations.length;)d=this.animations.shift(),h=new Date().getTime(),o=0,d.startTime<=h&&(o=c(Math.min(h-d.startTime,d.duration),0,1,d.duration),o=Math.min(o,1),isNaN(o)||!isFinite(o))&&(o=1),1>o&&r.push(d),d.animationCallback(o),1<=o&&d.onComplete&&d.onComplete();this.animations=r,0<this.animations.length?this.animationRequestId=this.chart.requestAnimFrame.call(window,function(){x.animate.call(x)}):this.chart.isAnimating=!1},se.prototype.cancelAllAnimations=function(){this.animations=[],this.animationRequestId&&this.chart.cancelRequestAnimFrame.call(window,this.animationRequestId),this.animationRequestId=null,this.chart.isAnimating=!1};var xe={yScaleAnimation:function(r,d){if(r!==0){var h=d.dest,o=d.source.canvas,c=d.animationBase;h.drawImage(o,0,0,o.width,o.height,0,c-c*r,h.canvas.width/ti,r*h.canvas.height/ti)}},xScaleAnimation:function(r,d){if(r!==0){var h=d.dest,o=d.source.canvas,c=d.animationBase;h.drawImage(o,0,0,o.width,o.height,c-c*r,0,r*h.canvas.width/ti,h.canvas.height/ti)}},xClipAnimation:function(r,d){if(r!==0){var h=d.dest,o=d.source.canvas;h.save(),0<r&&h.drawImage(o,0,0,o.width*r,o.height,0,0,o.width*r/ti,o.height/ti),h.restore()}},fadeInAnimation:function(r,d){if(r!==0){var h=d.dest,o=d.source.canvas;h.save(),h.globalAlpha=r,h.drawImage(o,0,0,o.width,o.height,0,0,h.canvas.width/ti,h.canvas.height/ti),h.restore()}},easing:{linear:function(r,d,h,o){return h*r/o+d},easeOutQuad:function(r,d,h,o){return-h*(r/=o)*(r-2)+d},easeOutQuart:function(r,d,h,o){return-h*((r=r/o-1)*r*r*r-1)+d},easeInQuad:function(r,d,h,o){return h*(r/=o)*r+d},easeInQuart:function(r,d,h,o){return h*(r/=o)*r*r*r+d}}},Ve={drawMarker:function(r,d,h,o,c,x,y,S){if(h){var M=1;h.fillStyle=x||"#000000",h.strokeStyle=y||"#000000",h.lineWidth=S||0,h.setLineDash&&h.setLineDash(P("solid",S)),o==="circle"?(h.moveTo(r,d),h.beginPath(),h.arc(r,d,c/2,0,2*Math.PI,!1),x&&h.fill(),S&&(y?h.stroke():(M=h.globalAlpha,h.globalAlpha=.15,h.strokeStyle="black",h.stroke(),h.globalAlpha=M))):o==="square"?(h.beginPath(),h.rect(r-c/2,d-c/2,c,c),x&&h.fill(),S&&(y?h.stroke():(M=h.globalAlpha,h.globalAlpha=.15,h.strokeStyle="black",h.stroke(),h.globalAlpha=M))):o==="triangle"?(h.beginPath(),h.moveTo(r-c/2,d+c/2),h.lineTo(r+c/2,d+c/2),h.lineTo(r,d-c/2),h.closePath(),x&&h.fill(),S&&(y?h.stroke():(M=h.globalAlpha,h.globalAlpha=.15,h.strokeStyle="black",h.stroke(),h.globalAlpha=M)),h.beginPath()):o==="cross"&&(h.strokeStyle=x,h.lineWidth=c/4,h.beginPath(),h.moveTo(r-c/2,d-c/2),h.lineTo(r+c/2,d+c/2),h.stroke(),h.moveTo(r+c/2,d-c/2),h.lineTo(r-c/2,d+c/2),h.stroke())}},drawMarkers:function(r){for(var d=0;d<r.length;d++){var h=r[d];Ve.drawMarker(h.x,h.y,h.ctx,h.type,h.size,h.color,h.borderColor,h.borderThickness)}}};return O}(),W.version="v3.10.16 GA",window.CanvasJS&&W&&!window.CanvasJS.Chart&&(window.CanvasJS.Chart=W)})(),document.createElement("canvas").getContext||function(){function e(){return this.context_||(this.context_=new P(this))}function i(W,ae,fe){var ye=He.call(arguments,2);return function(){return W.apply(ae,ye.concat(He.call(arguments)))}}function n(W){return String(W).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function s(W){W.namespaces.g_vml_||W.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),W.namespaces.g_o_||W.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),W.styleSheets.ex_canvas_||(W=W.createStyleSheet(),W.owningElement.id="ex_canvas_",W.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function a(W){var ae=W.srcElement;switch(W.propertyName){case"width":ae.getContext().clearRect(),ae.style.width=ae.attributes.width.nodeValue+"px",ae.firstChild.style.width=ae.clientWidth+"px";break;case"height":ae.getContext().clearRect(),ae.style.height=ae.attributes.height.nodeValue+"px",ae.firstChild.style.height=ae.clientHeight+"px"}}function l(W){W=W.srcElement,W.firstChild&&(W.firstChild.style.width=W.clientWidth+"px",W.firstChild.style.height=W.clientHeight+"px")}function p(){return[[1,0,0],[0,1,0],[0,0,1]]}function f(W,ae){for(var fe=p(),ye=0;3>ye;ye++)for(var Se=0;3>Se;Se++){for(var Ee=0,tt=0;3>tt;tt++)Ee+=W[ye][tt]*ae[tt][Se];fe[ye][Se]=Ee}return fe}function g(W,ae){ae.fillStyle=W.fillStyle,ae.lineCap=W.lineCap,ae.lineJoin=W.lineJoin,ae.lineWidth=W.lineWidth,ae.miterLimit=W.miterLimit,ae.shadowBlur=W.shadowBlur,ae.shadowColor=W.shadowColor,ae.shadowOffsetX=W.shadowOffsetX,ae.shadowOffsetY=W.shadowOffsetY,ae.strokeStyle=W.strokeStyle,ae.globalAlpha=W.globalAlpha,ae.font=W.font,ae.textAlign=W.textAlign,ae.textBaseline=W.textBaseline,ae.arcScaleX_=W.arcScaleX_,ae.arcScaleY_=W.arcScaleY_,ae.lineScale_=W.lineScale_}function m(W){var fe=W.indexOf("(",3),ae=W.indexOf(")",fe+1),fe=W.substring(fe+1,ae).split(",");return(fe.length!=4||W.charAt(3)!="a")&&(fe[3]=1),fe}function k(W,ae,fe){return Math.min(fe,Math.max(ae,W))}function T(W,ae,fe){return 0>fe&&fe++,1<fe&&fe--,1>6*fe?W+6*(ae-W)*fe:1>2*fe?ae:2>3*fe?W+6*(ae-W)*(2/3-fe):W}function D(W){if(W in Be)return Be[W];var ae,fe=1;if(W=String(W),W.charAt(0)=="#")ae=W;else if(/^rgb/.test(W)){fe=m(W),ae="#";for(var ye,Se=0;3>Se;Se++)ye=fe[Se].indexOf("%")!=-1?Math.floor(255*(parseFloat(fe[Se])/100)):+fe[Se],ae+=et[k(ye,0,255)];fe=+fe[3]}else if(/^hsl/.test(W)){if(Se=fe=m(W),ae=parseFloat(Se[0])/360%360,0>ae&&ae++,ye=k(parseFloat(Se[1])/100,0,1),Se=k(parseFloat(Se[2])/100,0,1),ye==0)ye=Se=ae=Se;else{var Ee=.5>Se?Se*(1+ye):Se+ye-Se*ye,tt=2*Se-Ee;ye=T(tt,Ee,ae+1/3),Se=T(tt,Ee,ae),ae=T(tt,Ee,ae-1/3)}ae="#"+et[Math.floor(255*ye)]+et[Math.floor(255*Se)]+et[Math.floor(255*ae)],fe=fe[3]}else ae=Le[W]||W;return Be[W]={color:ae,alpha:fe}}function P(W){this.m_=p(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*de,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=W;var ae="width:"+W.clientWidth+"px;height:"+W.clientHeight+"px;overflow:hidden;position:absolute",fe=W.ownerDocument.createElement("div");fe.style.cssText=ae,W.appendChild(fe),ae=fe.cloneNode(!1),ae.style.backgroundColor="red",ae.style.filter="alpha(opacity=0)",W.appendChild(ae),this.element_=fe,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function L(W,ae,fe,ye){W.currentPath_.push({type:"bezierCurveTo",cp1x:ae.x,cp1y:ae.y,cp2x:fe.x,cp2y:fe.y,x:ye.x,y:ye.y}),W.currentX_=ye.x,W.currentY_=ye.y}function $(W,ae){var ye=D(W.strokeStyle),fe=ye.color,ye=ye.alpha*W.globalAlpha,Se=W.lineScale_*W.lineWidth;1>Se&&(ye*=Se),ae.push("<g_vml_:stroke",' opacity="',ye,'"',' joinstyle="',W.lineJoin,'"',' miterlimit="',W.miterLimit,'"',' endcap="',_e[W.lineCap]||"square",'"',' weight="',Se,'px"',' color="',fe,'" />')}function N(W,ae,fe,ye){var Se=W.fillStyle,Ee=W.arcScaleX_,tt=W.arcScaleY_,nt=ye.x-fe.x,xt=ye.y-fe.y;if(Se instanceof H){var rt=0,it=ye=0,We=0,It=1;if(Se.type_=="gradient"){rt=Se.x1_/Ee,fe=Se.y1_/tt;var lt=E(W,Se.x0_/Ee,Se.y0_/tt),rt=E(W,rt,fe),rt=180*Math.atan2(rt.x-lt.x,rt.y-lt.y)/Math.PI;0>rt&&(rt+=360),1e-6>rt&&(rt=0)}else lt=E(W,Se.x0_,Se.y0_),ye=(lt.x-fe.x)/nt,it=(lt.y-fe.y)/xt,nt/=Ee*de,xt/=tt*de,It=G.max(nt,xt),We=2*Se.r0_/It,It=2*Se.r1_/It-We;Ee=Se.colors_,Ee.sort(function(Ti,cn){return Ti.offset-cn.offset}),tt=Ee.length,lt=Ee[0].color,fe=Ee[tt-1].color,nt=Ee[0].alpha*W.globalAlpha,W=Ee[tt-1].alpha*W.globalAlpha;for(var xt=[],Ui=0;Ui<tt;Ui++){var Vn=Ee[Ui];xt.push(Vn.offset*It+We+" "+Vn.color)}ae.push('<g_vml_:fill type="',Se.type_,'"',' method="none" focus="100%"',' color="',lt,'"',' color2="',fe,'"',' colors="',xt.join(","),'"',' opacity="',W,'"',' g_o_:opacity2="',nt,'"',' angle="',rt,'"',' focusposition="',ye,",",it,'" />')}else Se instanceof U?nt&&xt&&ae.push("<g_vml_:fill",' position="',-fe.x/nt*Ee*Ee,",",-fe.y/xt*tt*tt,'"',' type="tile"',' src="',Se.src_,'" />'):(Se=D(W.fillStyle),ae.push('<g_vml_:fill color="',Se.color,'" opacity="',Se.alpha*W.globalAlpha,'" />'))}function E(W,ae,fe){return W=W.m_,{x:de*(ae*W[0][0]+fe*W[1][0]+W[2][0])-Re,y:de*(ae*W[0][1]+fe*W[1][1]+W[2][1])-Re}}function B(W,ae,fe){isFinite(ae[0][0])&&isFinite(ae[0][1])&&isFinite(ae[1][0])&&isFinite(ae[1][1])&&isFinite(ae[2][0])&&isFinite(ae[2][1])&&(W.m_=ae,fe&&(W.lineScale_=we(re(ae[0][0]*ae[1][1]-ae[0][1]*ae[1][0]))))}function H(W){this.type_=W,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function U(W,ae){if(!W||W.nodeType!=1||W.tagName!="IMG")throw new j("TYPE_MISMATCH_ERR");if(W.readyState!="complete")throw new j("INVALID_STATE_ERR");switch(ae){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=ae;break;default:throw new j("SYNTAX_ERR")}this.src_=W.src,this.width_=W.width,this.height_=W.height}function j(W){this.code=this[W],this.message=W+": DOM Exception "+this.code}var G=Math,Z=G.round,he=G.sin,ee=G.cos,re=G.abs,we=G.sqrt,de=10,Re=de/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var He=Array.prototype.slice;s(document);var Ze={init:function(W){W=W||document,W.createElement("canvas"),W.attachEvent("onreadystatechange",i(this.init_,this,W))},init_:function(W){W=W.getElementsByTagName("canvas");for(var ae=0;ae<W.length;ae++)this.initElement(W[ae])},initElement:function(W){if(!W.getContext){W.getContext=e,s(W.ownerDocument),W.innerHTML="",W.attachEvent("onpropertychange",a),W.attachEvent("onresize",l);var ae=W.attributes;ae.width&&ae.width.specified?W.style.width=ae.width.nodeValue+"px":W.width=W.clientWidth,ae.height&&ae.height.specified?W.style.height=ae.height.nodeValue+"px":W.height=W.clientHeight}return W}};Ze.init();for(var et=[],me=0;16>me;me++)for(var Pe=0;16>Pe;Pe++)et[16*me+Pe]=me.toString(16)+Pe.toString(16);var Le={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},Be={},X={},_e={butt:"flat",round:"round"},me=P.prototype;me.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},me.beginPath=function(){this.currentPath_=[]},me.moveTo=function(W,ae){var fe=E(this,W,ae);this.currentPath_.push({type:"moveTo",x:fe.x,y:fe.y}),this.currentX_=fe.x,this.currentY_=fe.y},me.lineTo=function(W,ae){var fe=E(this,W,ae);this.currentPath_.push({type:"lineTo",x:fe.x,y:fe.y}),this.currentX_=fe.x,this.currentY_=fe.y},me.bezierCurveTo=function(W,ae,fe,ye,Se,Ee){Se=E(this,Se,Ee),W=E(this,W,ae),fe=E(this,fe,ye),L(this,W,fe,Se)},me.quadraticCurveTo=function(W,ae,fe,ye){W=E(this,W,ae),fe=E(this,fe,ye),ye={x:this.currentX_+2/3*(W.x-this.currentX_),y:this.currentY_+2/3*(W.y-this.currentY_)},L(this,ye,{x:ye.x+(fe.x-this.currentX_)/3,y:ye.y+(fe.y-this.currentY_)/3},fe)},me.arc=function(W,ae,fe,ye,Se,Ee){fe*=de;var tt=Ee?"at":"wa",nt=W+ee(ye)*fe-Re,xt=ae+he(ye)*fe-Re;ye=W+ee(Se)*fe-Re,Se=ae+he(Se)*fe-Re,nt!=ye||Ee||(nt+=.125),W=E(this,W,ae),nt=E(this,nt,xt),ye=E(this,ye,Se),this.currentPath_.push({type:tt,x:W.x,y:W.y,radius:fe,xStart:nt.x,yStart:nt.y,xEnd:ye.x,yEnd:ye.y})},me.rect=function(W,ae,fe,ye){this.moveTo(W,ae),this.lineTo(W+fe,ae),this.lineTo(W+fe,ae+ye),this.lineTo(W,ae+ye),this.closePath()},me.strokeRect=function(W,ae,fe,ye){var Se=this.currentPath_;this.beginPath(),this.moveTo(W,ae),this.lineTo(W+fe,ae),this.lineTo(W+fe,ae+ye),this.lineTo(W,ae+ye),this.closePath(),this.stroke(),this.currentPath_=Se},me.fillRect=function(W,ae,fe,ye){var Se=this.currentPath_;this.beginPath(),this.moveTo(W,ae),this.lineTo(W+fe,ae),this.lineTo(W+fe,ae+ye),this.lineTo(W,ae+ye),this.closePath(),this.fill(),this.currentPath_=Se},me.createLinearGradient=function(W,ae,fe,ye){var Se=new H("gradient");return Se.x0_=W,Se.y0_=ae,Se.x1_=fe,Se.y1_=ye,Se},me.createRadialGradient=function(W,ae,fe,ye,Se,Ee){var tt=new H("gradientradial");return tt.x0_=W,tt.y0_=ae,tt.r0_=fe,tt.x1_=ye,tt.y1_=Se,tt.r1_=Ee,tt},me.drawImage=function(W,ae){var fe,ye,Se,Ee,tt,nt,xt,rt;Se=W.runtimeStyle.width,Ee=W.runtimeStyle.height,W.runtimeStyle.width="auto",W.runtimeStyle.height="auto";var it=W.width,We=W.height;if(W.runtimeStyle.width=Se,W.runtimeStyle.height=Ee,arguments.length==3)fe=arguments[1],ye=arguments[2],tt=nt=0,xt=Se=it,rt=Ee=We;else if(arguments.length==5)fe=arguments[1],ye=arguments[2],Se=arguments[3],Ee=arguments[4],tt=nt=0,xt=it,rt=We;else if(arguments.length==9)tt=arguments[1],nt=arguments[2],xt=arguments[3],rt=arguments[4],fe=arguments[5],ye=arguments[6],Se=arguments[7],Ee=arguments[8];else throw Error("Invalid number of arguments");var It=E(this,fe,ye),lt=[];if(lt.push(" <g_vml_:group",' coordsize="',10*de,",",10*de,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var Ui=[];Ui.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",Z(It.x/de),",","Dy=",Z(It.y/de),"");var Vn=E(this,fe+Se,ye),Ti=E(this,fe,ye+Ee);fe=E(this,fe+Se,ye+Ee),It.x=G.max(It.x,Vn.x,Ti.x,fe.x),It.y=G.max(It.y,Vn.y,Ti.y,fe.y),lt.push("padding:0 ",Z(It.x/de),"px ",Z(It.y/de),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",Ui.join(""),", sizingmethod='clip');")}else lt.push("top:",Z(It.y/de),"px;left:",Z(It.x/de),"px;");lt.push(' ">','<g_vml_:image src="',W.src,'"',' style="width:',de*Se,"px;"," height:",de*Ee,'px"',' cropleft="',tt/it,'"',' croptop="',nt/We,'"',' cropright="',(it-tt-xt)/it,'"',' cropbottom="',(We-nt-rt)/We,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",lt.join(""))},me.stroke=function(W){var ae=[];ae.push("<g_vml_:shape",' filled="',!!W,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*de,",",10*de,'"',' stroked="',!W,'"',' path="');for(var fe={x:null,y:null},ye={x:null,y:null},Se=0;Se<this.currentPath_.length;Se++){var Ee=this.currentPath_[Se];switch(Ee.type){case"moveTo":ae.push(" m ",Z(Ee.x),",",Z(Ee.y));break;case"lineTo":ae.push(" l ",Z(Ee.x),",",Z(Ee.y));break;case"close":ae.push(" x "),Ee=null;break;case"bezierCurveTo":ae.push(" c ",Z(Ee.cp1x),",",Z(Ee.cp1y),",",Z(Ee.cp2x),",",Z(Ee.cp2y),",",Z(Ee.x),",",Z(Ee.y));break;case"at":case"wa":ae.push(" ",Ee.type," ",Z(Ee.x-this.arcScaleX_*Ee.radius),",",Z(Ee.y-this.arcScaleY_*Ee.radius)," ",Z(Ee.x+this.arcScaleX_*Ee.radius),",",Z(Ee.y+this.arcScaleY_*Ee.radius)," ",Z(Ee.xStart),",",Z(Ee.yStart)," ",Z(Ee.xEnd),",",Z(Ee.yEnd))}Ee&&((fe.x==null||Ee.x<fe.x)&&(fe.x=Ee.x),(ye.x==null||Ee.x>ye.x)&&(ye.x=Ee.x),(fe.y==null||Ee.y<fe.y)&&(fe.y=Ee.y),(ye.y==null||Ee.y>ye.y)&&(ye.y=Ee.y))}ae.push(' ">'),W?N(this,ae,fe,ye):$(this,ae),ae.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",ae.join(""))},me.fill=function(){this.stroke(!0)},me.closePath=function(){this.currentPath_.push({type:"close"})},me.save=function(){var W={};g(this,W),this.aStack_.push(W),this.mStack_.push(this.m_),this.m_=f(p(),this.m_)},me.restore=function(){this.aStack_.length&&(g(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},me.translate=function(W,ae){B(this,f([[1,0,0],[0,1,0],[W,ae,1]],this.m_),!1)},me.rotate=function(W){var ae=ee(W);W=he(W),B(this,f([[ae,W,0],[-W,ae,0],[0,0,1]],this.m_),!1)},me.scale=function(W,ae){this.arcScaleX_*=W,this.arcScaleY_*=ae,B(this,f([[W,0,0],[0,ae,0],[0,0,1]],this.m_),!0)},me.transform=function(W,ae,fe,ye,Se,Ee){B(this,f([[W,ae,0],[fe,ye,0],[Se,Ee,1]],this.m_),!0)},me.setTransform=function(W,ae,fe,ye,Se,Ee){B(this,[[W,ae,0],[fe,ye,0],[Se,Ee,1]],!0)},me.drawText_=function(W,ae,fe,ye,Se){var Ee=this.m_;ye=0;var tt=1e3,nt=0,xt=[],rt;if(rt=this.font,X[rt])rt=X[rt];else{var it=document.createElement("div").style;try{it.font=rt}catch{}rt=X[rt]={style:it.fontStyle||"normal",variant:it.fontVariant||"normal",weight:it.fontWeight||"normal",size:it.fontSize||10,family:it.fontFamily||"sans-serif"}}var it=rt,We=this.element_;rt={};for(var It in it)rt[It]=it[It];switch(It=parseFloat(We.currentStyle.fontSize),We=parseFloat(it.size),typeof it.size=="number"?rt.size=it.size:it.size.indexOf("px")!=-1?rt.size=We:it.size.indexOf("em")!=-1?rt.size=It*We:it.size.indexOf("%")!=-1?rt.size=It/100*We:it.size.indexOf("pt")!=-1?rt.size=We/.75:rt.size=It,rt.size*=.981,It=rt.style+" "+rt.variant+" "+rt.weight+" "+rt.size+"px "+rt.family,We=this.element_.currentStyle,it=this.textAlign.toLowerCase(),it){case"left":case"center":case"right":break;case"end":it=We.direction=="ltr"?"right":"left";break;case"start":it=We.direction=="rtl"?"right":"left";break;default:it="left"}switch(this.textBaseline){case"hanging":case"top":nt=rt.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":nt=-rt.size/2.25}switch(it){case"right":ye=1e3,tt=.05;break;case"center":ye=tt=500}ae=E(this,ae+0,fe+nt),xt.push('<g_vml_:line from="',-ye,' 0" to="',tt,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!Se,'" stroked="',!!Se,'" style="position:absolute;width:1px;height:1px;">'),Se?$(this,xt):N(this,xt,{x:-ye,y:0},{x:tt,y:rt.size}),Se=Ee[0][0].toFixed(3)+","+Ee[1][0].toFixed(3)+","+Ee[0][1].toFixed(3)+","+Ee[1][1].toFixed(3)+",0,0",ae=Z(ae.x/de)+","+Z(ae.y/de),xt.push('<g_vml_:skew on="t" matrix="',Se,'" ',' offset="',ae,'" origin="',ye,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',n(W),'" style="v-text-align:',it,";font:",n(It),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",xt.join(""))},me.fillText=function(W,ae,fe,ye){this.drawText_(W,ae,fe,ye,!1)},me.strokeText=function(W,ae,fe,ye){this.drawText_(W,ae,fe,ye,!0)},me.measureText=function(W){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var ae=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(ae.createTextNode(W)),{width:this.textMeasureEl_.offsetWidth}},me.clip=function(){},me.arcTo=function(){},me.createPattern=function(W,ae){return new U(W,ae)},H.prototype.addColorStop=function(W,ae){ae=D(ae),this.colors_.push({offset:W,color:ae.color,alpha:ae.alpha})},me=j.prototype=Error(),me.INDEX_SIZE_ERR=1,me.DOMSTRING_SIZE_ERR=2,me.HIERARCHY_REQUEST_ERR=3,me.WRONG_DOCUMENT_ERR=4,me.INVALID_CHARACTER_ERR=5,me.NO_DATA_ALLOWED_ERR=6,me.NO_MODIFICATION_ALLOWED_ERR=7,me.NOT_FOUND_ERR=8,me.NOT_SUPPORTED_ERR=9,me.INUSE_ATTRIBUTE_ERR=10,me.INVALID_STATE_ERR=11,me.SYNTAX_ERR=12,me.INVALID_MODIFICATION_ERR=13,me.NAMESPACE_ERR=14,me.INVALID_ACCESS_ERR=15,me.VALIDATION_ERR=16,me.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=Ze,CanvasRenderingContext2D=P,CanvasGradient=H,CanvasPattern=U,DOMException=j}()})(jT);var VV=jT.exports,vx=ne,hd=VV;hd=hd.Chart?hd:window.CanvasJS;class nO extends vx.Component{constructor(e){super(e),this.options=e.options?e.options:{},this.containerProps=e.containerProps?{...e.containerProps}:{width:"100%",position:"relative"},this.containerProps.height=e.containerProps&&e.containerProps.height?e.containerProps.height:this.options.height?this.options.height+"px":"400px",this.containerRef=vx.createRef()}componentDidMount(){this.chart=new hd.Chart(this.containerRef.current,this.options),this.chart.render(),this.props.onRef&&this.props.onRef(this.chart)}shouldComponentUpdate(e,i){return e.options!==this.options}componentDidUpdate(){this.chart.options=this.props.options,this.chart.render()}componentWillUnmount(){this.chart&&this.chart.destroy(),this.props.onRef&&this.props.onRef(void 0)}render(){return vx.createElement("div",{id:this.props.id,ref:this.containerRef,style:this.containerProps})}}const OV=VP([{element:w.jsx(OR,{}),children:[{path:"/",element:w.jsx(mV,{})},{path:"/machines",element:w.jsx(RN,{})},{path:"/tare-crain-updates",element:w.jsx(zR,{})},{path:"/reports/dashboard",element:w.jsx(QR,{})},{path:"/reports/realtime-reports",element:w.jsx(lr,{permission:"manageRealtime",children:w.jsx(JR,{})})},{path:"/reports/daily-reports",element:w.jsx(tV,{})},{path:"/reports/weekly-reports",element:w.jsx(iV,{})},{path:"/reports/monthly-reports",element:w.jsx(nV,{})},{path:"/reports/quarterly-reports",element:w.jsx(sV,{})},{path:"/reports/yearly-reports",element:w.jsx(rV,{})},{path:"/reports/machine-efficiency",element:w.jsx(aV,{})},{path:"/manage/all-machines",element:w.jsx(lr,{permission:"manageProduct",children:w.jsx(RV,{})})},{path:"/manage/products",element:w.jsx(lr,{permission:"manageProduct",children:w.jsx(CV,{})})},{path:"/products/add-product",element:w.jsx(lr,{permission:"addProduct",children:w.jsx(FV,{})})},{path:"/products/add-shift",element:w.jsx(lr,{permission:"setShiftTime",children:w.jsx(BV,{})})},{path:"/products/add-damaged-product",element:w.jsx(lr,{permission:"addDamagedProduct",children:w.jsx(LV,{})})},{path:"/manage/users",element:w.jsxs(lr,{permission:"manageUser",children:[w.jsx(IV,{}),","]})},{path:"/incharge",element:w.jsx(lr,{permission:"manageIncharge",children:w.jsx(kV,{})})},{path:"/admin/machine-production",element:w.jsx(lr,{permission:"adminSection",children:w.jsx(MV,{})})}]}]);function jV(){return w.jsx(w.Fragment,{children:w.jsx(XP,{router:OV})})}W4(document.getElementById("root")).render(w.jsx(jV,{}));
